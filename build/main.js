webpackJsonp([146],[,,function(e,n,t){"use strict";t.d(n,"a",function(){return c});t(0),t(4),t(11);var o=t(10),r=(t(7),t(441),t(5),t(12),t(23),t(3),t(172),t(42)),i=t(117),l=t(54),s=t(195),a=(t.n(s),t(535)),u=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},d=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},c=function(){function CoreSitesProvider(n,t,o,r,i,s,a,c,p,f,h,m){this.http=t,this.sitesFactory=o,this.appProvider=r,this.translate=i,this.urlUtils=s,this.eventsProvider=a,this.textUtils=c,this.utils=p,this.injector=f,this.wsProvider=h,this.domUtils=m,this.appTablesSchema={name:"CoreSitesProvider",version:2,tables:[{name:e.SITES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"siteUrl",type:"TEXT",notNull:!0},{name:"token",type:"TEXT"},{name:"info",type:"TEXT"},{name:"privateToken",type:"TEXT"},{name:"config",type:"TEXT"},{name:"loggedOut",type:"INTEGER"},{name:"oauthId",type:"INTEGER"}]},{name:e.CURRENT_SITE_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"siteId",type:"TEXT",notNull:!0,unique:!0}]}],migrate:function(n,t){return u(this,void 0,void 0,function(){var o,r,i,l;return d(this,function(s){switch(s.label){case 0:if(!(t<2))return[3,7];o=e.SITES_TABLE,r="sites",s.label=1;case 1:return s.trys.push([1,6,,7]),[4,n.tableExists(r)];case 2:return s.sent(),[4,n.getAllRecords(r)];case 3:return i=s.sent(),l=[],i.forEach(function(e){l.push(n.insertRecord(o,e))}),[4,Promise.all(l)];case 4:return s.sent(),[4,n.dropTable(r)];case 5:return s.sent(),[3,7];case 6:return s.sent(),[3,7];case 7:return[2]}})})}},this.WORKPLACE_APP=3,this.MOODLE_APP=2,this.VALID_VERSION=1,this.INVALID_VERSION=-1,this.services={},this.sessionRestored=!1,this.sites={},this.siteSchemasMigration={},this.siteSchemas={},this.siteTablesSchemas=[{name:e.SCHEMA_VERSIONS_TABLE,columns:[{name:"name",type:"TEXT",primaryKey:!0},{name:"version",type:"INTEGER"}]}],this.siteSchema={name:"CoreSitesProvider",version:1,canBeCleared:[l.a.WS_CACHE_TABLE],tables:[{name:l.a.WS_CACHE_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"data",type:"TEXT"},{name:"key",type:"TEXT"},{name:"expirationTime",type:"INTEGER"}]},{name:l.a.CONFIG_TABLE,columns:[{name:"name",type:"TEXT",unique:!0,notNull:!0},{name:"value"}]}]},this.logger=n.getInstance("CoreSitesProvider"),this.appDB=r.getDB(),this.dbReady=r.createTablesFromSchema(this.appTablesSchema).catch(function(){}),this.registerSiteSchema(this.siteSchema)}return e=CoreSitesProvider,CoreSitesProvider.prototype.getDemoSiteData=function(e){var n=i.a.demo_sites;if(void 0!==n&&void 0!==n[e])return n[e]},CoreSitesProvider.prototype.checkSite=function(e,n){var t=this;return void 0===n&&(n="https://"),e=this.urlUtils.formatURL(e),this.urlUtils.isHttpURL(e)?this.appProvider.isOnline()?this.checkSiteWithProtocol(e,n).catch(function(o){return o.critical?Promise.reject(o):(n="https://"==n?"http://":"https://",t.checkSiteWithProtocol(e,n).catch(function(e){return e.critical?Promise.reject(e):t.textUtils.getErrorMessageFromError(o)?Promise.reject(o):t.textUtils.getErrorMessageFromError(e)?Promise.reject(e):t.translate.instant("core.cannotconnect",{$a:l.a.MINIMUM_MOODLE_VERSION})}))}):Promise.reject(this.translate.instant("core.networkerrormsg")):Promise.reject(this.translate.instant("core.login.invalidsite"))},CoreSitesProvider.prototype.checkSiteWithProtocol=function(e,n){function rejectWithCriticalError(e,n){return Promise.reject({error:e,errorcode:n,critical:!0})}var t,o=this;return e=e.replace(/^http(s)?\:\/\//i,n),this.siteExists(e).catch(function(n){if("enablewsdescription"==n.errorcode)return rejectWithCriticalError(n.error,n.errorcode);var t=o.urlUtils.addOrRemoveWWW(e);return o.siteExists(t).then(function(){e=t}).catch(function(e){return"enablewsdescription"==e.errorcode?rejectWithCriticalError(e.error,e.errorcode):o.textUtils.getErrorMessageFromError(n)?Promise.reject(n):Promise.reject(e)})}).then(function(){var n=o.sitesFactory.makeSite(void 0,e);return n.checkLocalMobilePlugin().then(function(s){return s.service=s.service||i.a.wsservice,o.services[e]=s.service,s.coreSupported||s.code!=r.a.LOGIN_SSO_CODE&&s.code!=r.a.LOGIN_SSO_INAPP_CODE?n.getPublicConfig().then(function(e){if(t=e,!e.enablewebservices)return rejectWithCriticalError(o.translate.instant("core.login.webservicesnotenabled"));if(!e.enablemobilewebservice)return rejectWithCriticalError(o.translate.instant("core.login.mobileservicesnotenabled"));if(e.maintenanceenabled){var n=o.translate.instant("core.sitemaintenance");return e.maintenancemessage&&(n+=e.maintenancemessage),rejectWithCriticalError(n)}return 0===s.code&&(s.code=e.typeoflogin),s},function(n){return 1===n.available?(n.critical=!0,"codingerror"==n.errorcode?o.utils.checkRedirect(e).then(function(e){return n.error=e?o.translate.instant("core.login.sitehasredirect"):o.translate.instant("core.cannotconnect",{$a:l.a.MINIMUM_MOODLE_VERSION}),Promise.reject(n)}):Promise.reject(n)):s}):s},function(e){return rejectWithCriticalError(e)}).then(function(o){return e=n.getURL(),{siteUrl:e,code:o.code,warning:o.warning,service:o.service,config:t}})})},CoreSitesProvider.prototype.siteExists=function(e){var n=this;return this.http.post(e+"/login/token.php",{}).timeout(this.wsProvider.getRequestTimeout()).toPromise().catch(function(){return Promise.reject({error:n.translate.instant("core.cannotconnect",{$a:l.a.MINIMUM_MOODLE_VERSION})})}).then(function(e){return!e.errorcode||"enablewsdescription"!=e.errorcode&&"requirecorrectaccess"!=e.errorcode?e.error&&"Web services must be enabled in Advanced features."==e.error?Promise.reject({errorcode:"enablewsdescription",error:e.error}):void 0:Promise.reject({errorcode:e.errorcode,error:e.error})})},CoreSitesProvider.prototype.getUserToken=function(e,n,t,o,r){var i=this;if(!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));o||(o=this.determineService(e));var s=e+"/login/token.php";return this.http.post(s,{username:n,password:t,service:o}).timeout(this.wsProvider.getRequestTimeout()).toPromise().then(function(a){return void 0===a?Promise.reject(i.translate.instant("core.cannotconnect",{$a:l.a.MINIMUM_MOODLE_VERSION})):void 0!==a.token?{token:a.token,siteUrl:e,privateToken:a.privatetoken}:void 0!==a.error?r||"requirecorrectaccess"!=a.errorcode?"missingparam"==a.errorcode?i.utils.checkRedirect(s).then(function(e){return e?Promise.reject({error:i.translate.instant("core.login.sitehasredirect")}):Promise.reject({error:a.error,errorcode:a.errorcode})}):void 0!==a.errorcode?Promise.reject({error:a.error,errorcode:a.errorcode}):Promise.reject(a.error):(e=i.urlUtils.addOrRemoveWWW(e),i.getUserToken(e,n,t,o,!0)):Promise.reject(i.translate.instant("core.login.invalidaccount"))},function(){return Promise.reject(i.translate.instant("core.cannotconnect",{$a:l.a.MINIMUM_MOODLE_VERSION}))})},CoreSitesProvider.prototype.newSite=function(e,n,t,r,i){var l=this;void 0===t&&(t=""),void 0===r&&(r=!0),"boolean"!=typeof r&&(r=!0);var s=this.sitesFactory.makeSite(void 0,e,n,void 0,t,void 0,void 0),a=!0;return s.fetchSiteInfo().then(function(u){var d=l.isValidMoodleVersion(u);if(d==l.VALID_VERSION){var c=l.createSiteID(u.siteurl,u.username);return l.getSite(c).catch(function(){}).then(function(e){if(!e)return a=!0,s.setId(c),s.setInfo(u),s.setOAuthId(i),l.migrateSiteSchemas(s);a=!1,(s=e).setToken(n),s.setPrivateToken(t),s.setInfo(u),s.setOAuthId(i)}).then(function(){return l.getSiteConfig(s).catch(function(e){if(a)return Promise.reject(e)}).then(function(a){return void 0!==a&&s.setConfig(a),l.addSite(c,e,n,u,t,a,i),l.sites[c]=s,r&&(l.currentSite=s,l.login(c)),l.eventsProvider.trigger(o.a.SITE_ADDED,u,c),c})})}return l.treatInvalidAppVersion(d,e)}).catch(function(n){return n&&"invaliddevice"==n.errorcode?l.treatInvalidAppVersion(l.WORKPLACE_APP,e):Promise.reject(n)})},CoreSitesProvider.prototype.treatInvalidAppVersion=function(e,n,t){var o,r,i,s=this;switch(e){case this.MOODLE_APP:r="core.login.connecttomoodleapp",o="connecttomoodleapp";break;case this.WORKPLACE_APP:r="core.login.connecttoworkplaceapp",o="connecttoworkplaceapp";break;default:o="invalidmoodleversion",r="core.login.invalidmoodleversion",i={$a:l.a.MINIMUM_MOODLE_VERSION}}return(t?this.setSiteLoggedOut(t,!0):Promise.resolve()).then(function(){return Promise.reject({error:s.translate.instant(r,i),errorcode:o,loggedout:!0})})},CoreSitesProvider.prototype.createSiteID=function(e,n){return s.Md5.hashAsciiStr(e+n)},CoreSitesProvider.prototype.determineService=function(e){return e=e.replace("https://","http://"),this.services[e]?this.services[e]:(e=e.replace("http://","https://"),this.services[e]?this.services[e]:i.a.wsservice)},CoreSitesProvider.prototype.isValidMoodleVersion=function(e){if(!e)return this.INVALID_VERSION;var n=l.a.MINIMUM_MOODLE_VERSION;if(e.version){var t=parseInt(e.version,10);if(!isNaN(t)&&t>=2016052300)return this.validateWorkplaceVersion(e)}var o=this.getReleaseNumber(e.release||"");return o&&o>=n?this.validateWorkplaceVersion(e):this.INVALID_VERSION},CoreSitesProvider.prototype.validateWorkplaceVersion=function(e){var n=!!e.functions&&e.functions.some(function(e){return"tool_program_get_user_programs"==e.name});return void 0===this.isWPApp&&(this.isWPApp=!!a.c&&"AddonBlockProgramsOverviewModule"==a.c.name&&!!this.injector.get(a.c,!1)),!this.isWPApp&&n?this.WORKPLACE_APP:this.isWPApp&&!n?this.MOODLE_APP:this.VALID_VERSION},CoreSitesProvider.prototype.getReleaseNumber=function(e){var n=e.match(/^\d(\.\d(\.\d+)?)?/);return n?n[0]:""},CoreSitesProvider.prototype.validateSiteInfo=function(e){if(!e.firstname||!e.lastname){return{error:"core.requireduserdatamissing",params:{$a:'<a core-link href="'+e.siteurl+'">'+e.siteurl+"</a>"}}}return!0},CoreSitesProvider.prototype.addSite=function(n,t,o,r,i,l,s){return void 0===i&&(i=""),u(this,void 0,void 0,function(){var a;return d(this,function(u){switch(u.label){case 0:return[4,this.dbReady];case 1:return u.sent(),a={id:n,siteUrl:t,token:o,info:r?JSON.stringify(r):r,privateToken:i,config:l?JSON.stringify(l):l,loggedOut:0,oauthId:s},[2,this.appDB.insertRecord(e.SITES_TABLE,a)]}})})},CoreSitesProvider.prototype.checkRequiredMinimumVersion=function(e,n){var t=this;if(e&&e.tool_mobile_minimumversion){if(this.convertVersionName(e.tool_mobile_minimumversion)>this.convertVersionName(i.a.versionname)){var o="";if(o=this.appProvider.isAndroid()&&e.tool_mobile_androidappid?"market://details?id="+e.tool_mobile_androidappid:this.appProvider.isIOS()&&e.tool_mobile_iosappid?"itms-apps://itunes.apple.com/app/id"+e.tool_mobile_iosappid:e.tool_mobile_setuplink?e.tool_mobile_setuplink:this.appProvider.isMobile()?"https://download.moodle.org/mobile/":"https://download.moodle.org/desktop/",n=n||this.getCurrentSiteId(),this.domUtils.showConfirm(this.translate.instant("core.updaterequireddesc",{$a:e.tool_mobile_minimumversion}),this.translate.instant("core.updaterequired"),this.translate.instant("core.download"),this.translate.instant(n?"core.mainmenu.logout":"core.cancel")).then(function(){t.utils.openInBrowser(o)}).catch(function(){}),n){return(n==this.getCurrentSiteId()?this.logout():Promise.resolve()).then(function(){return t.setSiteLoggedOut(n,!0)}).then(function(){return Promise.reject(null)})}return Promise.reject(null)}}return Promise.resolve()},CoreSitesProvider.prototype.convertVersionName=function(e){var n=0,t=e.split("-")[0].split(".",3);return t.forEach(function(e){n=100*n+Number(e)}),t.length<3&&(n*=Math.pow(100,3-t.length)),n},CoreSitesProvider.prototype.loadSite=function(e,n,t){var r=this;return this.logger.debug("Load site "+e),this.getSite(e).then(function(i){return r.currentSite=i,i.isLoggedOut()?(r.eventsProvider.trigger(o.a.SESSION_EXPIRED,{pageName:n,params:t},i.getId()),!1):i.checkIfLocalMobileInstalledAndNotUsed().then(function(){return r.eventsProvider.trigger(o.a.SESSION_EXPIRED,{pageName:n,params:t},e),!1},function(){return i.getPublicConfig().catch(function(){return{}}).then(function(n){return r.checkRequiredMinimumVersion(n).then(function(){return r.login(e),r.updateSiteInfo(e),!0}).catch(function(){return!1})})})})},CoreSitesProvider.prototype.getCurrentSite=function(){return this.currentSite},CoreSitesProvider.prototype.getCurrentSiteHomeId=function(){return this.currentSite?this.currentSite.getSiteHomeId():1},CoreSitesProvider.prototype.getCurrentSiteId=function(){return this.currentSite?this.currentSite.getId():""},CoreSitesProvider.prototype.getCurrentSiteUserId=function(){return this.currentSite?this.currentSite.getUserId():0},CoreSitesProvider.prototype.isLoggedIn=function(){return void 0!==this.currentSite&&void 0!==this.currentSite.token&&""!=this.currentSite.token},CoreSitesProvider.prototype.deleteSite=function(n){return u(this,void 0,void 0,function(){var t;return d(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:return r.sent(),this.logger.debug("Delete site "+n),void 0!==this.currentSite&&this.currentSite.id==n&&this.logout(),[4,this.getSite(n)];case 2:return t=r.sent(),[4,t.deleteDB()];case 3:r.sent(),delete this.sites[n],r.label=4;case 4:return r.trys.push([4,6,,7]),[4,this.appDB.deleteRecords(e.SITES_TABLE,{id:n})];case 5:return r.sent(),[3,7];case 6:return r.sent(),[3,7];case 7:return[4,t.deleteFolder()];case 8:return r.sent(),this.eventsProvider.trigger(o.a.SITE_DELETED,t,n),[2]}})})},CoreSitesProvider.prototype.hasSites=function(){return u(this,void 0,void 0,function(){var n;return d(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[4,this.appDB.countRecords(e.SITES_TABLE)];case 2:return n=t.sent(),[2,n>0]}})})},CoreSitesProvider.prototype.getSite=function(n){return u(this,void 0,void 0,function(){var t;return d(this,function(o){switch(o.label){case 0:return[4,this.dbReady];case 1:if(o.sent(),n)return[3,2];if(this.currentSite)return[2,this.currentSite];throw null;case 2:return this.currentSite&&this.currentSite.getId()==n?[2,this.currentSite]:[3,3];case 3:return void 0===this.sites[n]?[3,4]:[2,this.sites[n]];case 4:return[4,this.appDB.getRecord(e.SITES_TABLE,{id:n})];case 5:return t=o.sent(),[2,this.makeSiteFromSiteListEntry(t)]}})})},CoreSitesProvider.prototype.makeSiteFromSiteListEntry=function(e){var n,t=this,o=e.info,r=e.config;return o=o?this.textUtils.parseJSON(o):o,r=r?this.textUtils.parseJSON(r):r,(n=this.sitesFactory.makeSite(e.id,e.siteUrl,e.token,o,e.privateToken,r,1==e.loggedOut)).setOAuthId(e.oauthId),this.migrateSiteSchemas(n).then(function(){return t.sites[e.id]=n,n})},CoreSitesProvider.prototype.isCurrentSite=function(e){if(!e||!this.currentSite)return!!this.currentSite;var n="object"==typeof e?e.getId():e;return this.currentSite.getId()===n},CoreSitesProvider.prototype.getSiteDb=function(e){return this.getSite(e).then(function(e){return e.getDb()})},CoreSitesProvider.prototype.getSiteHomeId=function(e){return this.getSite(e).then(function(e){return e.getSiteHomeId()})},CoreSitesProvider.prototype.getSites=function(n){return u(this,void 0,void 0,function(){var t,o,r=this;return d(this,function(l){switch(l.label){case 0:return[4,this.dbReady];case 1:return l.sent(),[4,this.appDB.getAllRecords(e.SITES_TABLE)];case 2:return t=l.sent(),o=[],t.forEach(function(e){if(!n||n.indexOf(e.id)>-1){var t=e.info?r.textUtils.parseJSON(e.info):e.info;o.push({id:e.id,siteUrl:e.siteUrl,fullName:t&&t.fullname,siteName:i.a.sitename?i.a.sitename:t&&t.sitename,avatar:t&&t.userpictureurl,siteHomeId:t&&t.siteid||1})}}),[2,o]}})})},CoreSitesProvider.prototype.getSortedSites=function(e){return this.getSites(e).then(function(e){return e.sort(function(e,n){var t=e.siteUrl.replace(/^https?:\/\//,"").toLowerCase(),o=n.siteUrl.replace(/^https?:\/\//,"").toLowerCase(),r=t.localeCompare(o);return 0!==r?r:(t=e.fullName.toLowerCase().trim(),o=n.fullName.toLowerCase().trim(),t.localeCompare(o))}),e})},CoreSitesProvider.prototype.getLoggedInSitesIds=function(){return u(this,void 0,void 0,function(){var n;return d(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[4,this.appDB.getRecords(e.SITES_TABLE,{loggedOut:0})];case 2:return n=t.sent(),[2,n.map(function(e){return e.id})]}})})},CoreSitesProvider.prototype.getSitesIds=function(){return u(this,void 0,void 0,function(){var n;return d(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[4,this.appDB.getAllRecords(e.SITES_TABLE)];case 2:return n=t.sent(),[2,n.map(function(e){return e.id})]}})})},CoreSitesProvider.prototype.login=function(n){return u(this,void 0,void 0,function(){var t;return d(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:return r.sent(),t={id:1,siteId:n},[4,this.appDB.insertRecord(e.CURRENT_SITE_TABLE,t)];case 2:return r.sent(),this.eventsProvider.trigger(o.a.LOGIN,{},n),[2]}})})},CoreSitesProvider.prototype.logout=function(){return u(this,void 0,void 0,function(){var n,t,r;return d(this,function(i){switch(i.label){case 0:return[4,this.dbReady];case 1:i.sent(),t=[],this.currentSite&&(r=this.currentSite.getStoredConfig(),n=this.currentSite.getId(),this.currentSite=void 0,r&&"1"==r.tool_mobile_forcelogout&&t.push(this.setSiteLoggedOut(n,!0)),t.push(this.appDB.deleteRecords(e.CURRENT_SITE_TABLE,{id:1}))),i.label=2;case 2:return i.trys.push([2,,4,5]),[4,Promise.all(t)];case 3:return i.sent(),[3,5];case 4:return this.eventsProvider.trigger(o.a.LOGOUT,{},n),[7];case 5:return[2]}})})},CoreSitesProvider.prototype.restoreSession=function(){return u(this,void 0,void 0,function(){var n,t;return d(this,function(o){switch(o.label){case 0:return this.sessionRestored?[2,Promise.reject(null)]:[4,this.dbReady];case 1:o.sent(),this.sessionRestored=!0,o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.appDB.getRecord(e.CURRENT_SITE_TABLE,{id:1})];case 3:return n=o.sent(),t=n.siteId,this.logger.debug("Restore session in site "+t),[2,this.loadSite(t)];case 4:return o.sent(),[3,5];case 5:return[2]}})})},CoreSitesProvider.prototype.setSiteLoggedOut=function(n,t){return u(this,void 0,void 0,function(){var o,r;return d(this,function(i){switch(i.label){case 0:return[4,this.dbReady];case 1:return i.sent(),[4,this.getSite(n)];case 2:return o=i.sent(),r={token:"",loggedOut:t?1:0},o.setLoggedOut(t),[2,this.appDB.updateRecords(e.SITES_TABLE,r,{id:n})]}})})},CoreSitesProvider.prototype.unsetCurrentSite=function(){this.currentSite=void 0},CoreSitesProvider.prototype.updateSiteToken=function(e,n,t,o){var r=this;void 0===o&&(o="");var i=this.createSiteID(e,n);return this.updateSiteTokenBySiteId(i,t,o).then(function(){return r.login(i)})},CoreSitesProvider.prototype.updateSiteTokenBySiteId=function(n,t,o){return void 0===o&&(o=""),u(this,void 0,void 0,function(){var r,i;return d(this,function(l){switch(l.label){case 0:return[4,this.dbReady];case 1:return l.sent(),[4,this.getSite(n)];case 2:return r=l.sent(),i={token:t,privateToken:o,loggedOut:0},r.token=t,r.privateToken=o,r.setLoggedOut(!1),[2,this.appDB.updateRecords(e.SITES_TABLE,i,{id:n})]}})})},CoreSitesProvider.prototype.updateSiteInfo=function(n){return u(this,void 0,void 0,function(){var t,r,i,l,s;return d(this,function(a){switch(a.label){case 0:return[4,this.dbReady];case 1:return a.sent(),[4,this.getSite(n)];case 2:t=a.sent(),a.label=3;case 3:return a.trys.push([3,13,,14]),[4,t.fetchSiteInfo()];case 4:if(r=a.sent(),t.setInfo(r),(i=this.isValidMoodleVersion(r))!=this.VALID_VERSION)return[2,this.treatInvalidAppVersion(i,t.getURL(),t.getId())];l=void 0,a.label=5;case 5:return a.trys.push([5,7,,8]),[4,this.getSiteConfig(t)];case 6:return l=a.sent(),[3,8];case 7:return a.sent(),[3,8];case 8:s={info:JSON.stringify(r),loggedOut:t.isLoggedOut()?1:0},void 0!==l&&(t.setConfig(l),s.config=JSON.stringify(l)),a.label=9;case 9:return a.trys.push([9,,11,12]),[4,this.appDB.updateRecords(e.SITES_TABLE,s,{id:n})];case 10:return a.sent(),[3,12];case 11:return this.eventsProvider.trigger(o.a.SITE_UPDATED,r,n),[7];case 12:return[3,14];case 13:return a.sent(),[3,14];case 14:return[2]}})})},CoreSitesProvider.prototype.updateSiteInfoByUrl=function(e,n){var t=this.createSiteID(e,n);return this.updateSiteInfo(t)},CoreSitesProvider.prototype.getSiteIdsFromUrl=function(n,t,o){return u(this,void 0,void 0,function(){var r,i,l,s=this;return d(this,function(a){switch(a.label){case 0:return[4,this.dbReady];case 1:if(a.sent(),t&&this.currentSite&&this.currentSite.containsUrl(n)&&(!o||this.currentSite.getInfo().username==o))return[2,[this.currentSite.getId()]];if(!n.match(/^https?:\/\//i))return this.urlUtils.isAbsoluteURL(n)?[2,[]]:this.currentSite?[2,[this.currentSite.getId()]]:[2,[]];a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.appDB.getAllRecords(e.SITES_TABLE)];case 3:return r=a.sent(),i=[],l=[],r.forEach(function(e){s.sites[e.id]||l.push(s.makeSiteFromSiteListEntry(e)),s.sites[e.id].containsUrl(n)&&(o&&s.sites[e.id].getInfo().username!=o||i.push(e.id))}),[4,Promise.all(l)];case 4:return a.sent(),[2,i];case 5:return a.sent(),[2,[]];case 6:return[2]}})})},CoreSitesProvider.prototype.getStoredCurrentSiteId=function(){return u(this,void 0,void 0,function(){var n;return d(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[4,this.appDB.getRecord(e.CURRENT_SITE_TABLE,{id:1})];case 2:return n=t.sent(),[2,n.siteId]}})})},CoreSitesProvider.prototype.getSitePublicConfig=function(e){return this.sitesFactory.makeSite(void 0,e).getPublicConfig()},CoreSitesProvider.prototype.getSiteConfig=function(e){return e.wsAvailable("tool_mobile_get_config")?e.getConfig(void 0,!0):Promise.resolve()},CoreSitesProvider.prototype.isFeatureDisabled=function(e,n){return this.getSite(n).then(function(n){return n.isFeatureDisabled(e)})},CoreSitesProvider.prototype.createTableFromSchema=function(e){this.createTablesFromSchema([e])},CoreSitesProvider.prototype.createTablesFromSchema=function(e){this.siteTablesSchemas=this.siteTablesSchemas.concat(e);for(var n in this.sites)this.sites[n].getDb().createTablesFromSchema(e)},CoreSitesProvider.prototype.wsAvailableInCurrentSite=function(e,n){void 0===n&&(n=!0);var t=this.getCurrentSite();return t&&t.wsAvailable(e,n)},CoreSitesProvider.prototype.isLegacyMoodleByInfo=function(e){return!1},CoreSitesProvider.prototype.registerSiteSchema=function(e){return u(this,void 0,void 0,function(){var n,t,o=this;return d(this,function(r){switch(r.label){case 0:if(!this.currentSite)return[3,9];r.label=1;case 1:return r.trys.push([1,,7,8]),n={},n[e.name]=e,e.onlyCurrentSite?[3,4]:[4,this.getSitesIds()];case 2:return t=r.sent(),[4,Promise.all(t.map(function(e){return u(o,void 0,void 0,function(){var t;return d(this,function(o){switch(o.label){case 0:return[4,this.getSite(e)];case 1:return t=o.sent(),[2,this.applySiteSchemas(t,n)]}})})}))];case 3:return r.sent(),[3,6];case 4:return e.siteId=this.currentSite.getId(),[4,this.applySiteSchemas(this.currentSite,n)];case 5:r.sent(),r.label=6;case 6:return[3,8];case 7:return this.siteSchemas[e.name]=e,[7];case 8:return[3,10];case 9:e.onlyCurrentSite||(this.siteSchemas[e.name]=e),r.label=10;case 10:return[2]}})})},CoreSitesProvider.prototype.migrateSiteSchemas=function(e){var n=this;if(this.siteSchemasMigration[e.id])return this.siteSchemasMigration[e.id];this.logger.debug("Migrating all schemas of "+e.id);var t=e.getDb().createTablesFromSchema(this.siteTablesSchemas).then(function(){return n.applySiteSchemas(e,n.siteSchemas)});return this.siteSchemasMigration[e.id]=t,t.finally(function(){delete n.siteSchemasMigration[e.id]})},CoreSitesProvider.prototype.applySiteSchemas=function(n,t){var o=this,r=n.getDb();return r.getAllRecords(e.SCHEMA_VERSIONS_TABLE).then(function(i){var l={};i.forEach(function(e){l[e.name]=e.version});var s=[],a=function(i){var a=t[i],u=l[i]||0;if(u>=a.version||a.siteId&&n.getId()!=a.siteId)return"continue";o.logger.debug("Migrating schema '"+i+"' of "+n.id+" from version "+u+" to "+a.version);var d=Promise.resolve();a.tables&&(d=d.then(function(){return r.createTablesFromSchema(a.tables)})),a.migrate&&(d=d.then(function(){return a.migrate(r,u,n.id)})),d=d.then(function(){return r.insertRecord(e.SCHEMA_VERSIONS_TABLE,{name:i,version:a.version})}),s.push(d)};for(var u in t)a(u);return Promise.all(s)})},CoreSitesProvider.prototype.isStoredRootURL=function(e,n){var t=this;return this.getSiteIdsFromUrl(e,!0,n).then(function(n){var o={siteIds:n,site:void 0};return n.length>0?t.getSite(n[0]).then(function(n){return t.textUtils.removeEndingSlash(t.urlUtils.removeProtocolAndWWW(n.getURL()))==t.textUtils.removeEndingSlash(t.urlUtils.removeProtocolAndWWW(e))&&(o.site=n),o}):o})},CoreSitesProvider.prototype.getSiteTableSchemasToClear=function(e){var n=[];for(var t in this.siteSchemas){var o=this.siteSchemas[t];!o.canBeCleared||o.siteId&&e.getId()!=o.siteId||(n=n.concat(this.siteSchemas[t].canBeCleared))}return n},CoreSitesProvider.prototype.getReadingStrategyPreSets=function(e){switch(e){case 1:return{omitExpires:!0};case 0:return{omitExpires:!0,forceOffline:!0};case 2:default:return{}}},CoreSitesProvider.SITES_TABLE="sites_2",CoreSitesProvider.CURRENT_SITE_TABLE="current_site",CoreSitesProvider.SCHEMA_VERSIONS_TABLE="schema_versions",CoreSitesProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(6),t(436),t(437),t(438),t(566),t(11),t(5),t(67);var o=t(10),r=(t(7),t(4),t(151),t(172),function(){function CoreUtilsProvider(e,n,t,o,r,i,l,s,a,u,d,c,p,f,h){this.iab=e,this.appProvider=n,this.clipboard=t,this.domUtils=o,this.translate=i,this.platform=l,this.langProvider=s,this.eventsProvider=a,this.fileOpener=u,this.mimetypeUtils=d,this.webIntent=c,this.wsProvider=p,this.zone=f,this.textUtils=h,this.DONT_CLONE=["[object FileEntry]","[object DirectoryEntry]","[object DOMFileSystem]"],this.uniqueIds={},this.logger=r.getInstance("CoreUtilsProvider")}return CoreUtilsProvider.prototype.addDataNotDownloadedError=function(e,n){var t=e;return e&&"string"!=typeof e&&(t=this.textUtils.getErrorMessageFromError(e)),"string"!=typeof t&&(t=n||""),this.isWebServiceError(e)||(t+="<br><br>"+this.translate.instant("core.errorsomedatanotdownloaded")),t},CoreUtilsProvider.prototype.allPromises=function(e){return e&&e.length?new Promise(function(n,t){var o,r=e.length,i=0,l=!1;e.forEach(function(e){e.catch(function(e){l=!0,o=e}).finally(function(){++i===r&&(l?t(o):n())})})}):Promise.resolve()},CoreUtilsProvider.prototype.arrayToObject=function(e,n,t){return t=t||{},e.forEach(function(e){t[n?e[n]:e]=e}),t},CoreUtilsProvider.prototype.basicLeftCompare=function(e,n,t,o,r){if(void 0===t&&(t=0),void 0===o&&(o=0),void 0===r&&(r=!0),"function"==typeof e||"function"==typeof n)return!0;if("object"==typeof e&&"object"==typeof n){if(o>=t)return!0;var i=!0;for(var l in e){var s=e[l];if("$$hashKey"==l)return;this.basicLeftCompare(s,n[l],t,o+1)||(i=!1)}return i}if(r&&(void 0===e&&null===n||null===e&&void 0===n))return!0;var a=parseFloat(e),u=parseFloat(n);return isNaN(a)||isNaN(u)?e===n:a==u},CoreUtilsProvider.prototype.blockLeaveView=function(){},CoreUtilsProvider.prototype.checkRedirect=function(e){if(window.fetch){var n,t=window,o={redirect:"follow"};return t.AbortController&&(n=new t.AbortController,o.signal=n.signal),this.timeoutPromise(window.fetch(e,o),this.wsProvider.getRequestTimeout()).then(function(e){return e.redirected}).catch(function(e){return e.timeout&&n&&n.abort(),!1})}return Promise.resolve(!1)},CoreUtilsProvider.prototype.closeInAppBrowser=function(e){this.iabInstance&&(this.iabInstance.close(),e&&this.appProvider.isDesktop()&&t(132).ipcRenderer.send("closeSecondaryWindows"))},CoreUtilsProvider.prototype.clone=function(e,n){if(void 0===n&&(n=0),n>=20)return this.logger.error("Max depth reached when cloning object.",e),e;if(Array.isArray(e)){for(var t=[],o=0;o<e.length;o++)t[o]=this.clone(e[o],n+1);return t}if("object"==typeof e&&null!==e){if(e&&e.toString&&-1!=this.DONT_CLONE.indexOf(e.toString()))return e;var r={};for(var i in e)r[i]=this.clone(e[i],n+1);return r}return e},CoreUtilsProvider.prototype.copyProperties=function(e,n,t){void 0===t&&(t=!0);for(var o in e)n[o]=t?this.clone(e[o]):e[o]},CoreUtilsProvider.prototype.copyToClipboard=function(e){var n=this;return this.clipboard.copy(e).then(function(){return n.domUtils.showToast("core.copiedtoclipboard",!0)}).catch(function(){})},CoreUtilsProvider.prototype.createFakeWSError=function(e,n){return this.wsProvider.createFakeWSError(e,n)},CoreUtilsProvider.prototype.emptyArray=function(e){e.length=0},CoreUtilsProvider.prototype.emptyObject=function(e){for(var n in e)e.hasOwnProperty(n)&&delete e[n]},CoreUtilsProvider.prototype.executeOrderedPromises=function(e){var n=this,t=[],o=Promise.resolve(),r=function(r){var i=e[r],l=void 0;l=o.finally(function(){var e;try{e=i.func.apply(i.context,i.params||[])}catch(e){return void n.logger.error(e.message)}return e}),t.push(l),i.blocking&&(o=l)};for(var i in e)r(i);return this.allPromises(t)},CoreUtilsProvider.prototype.flattenObject=function(e,n){var t={};for(var o in e)if(e.hasOwnProperty(o)){var r=e[o];if("object"!=typeof r||Array.isArray(r))t[o]=r;else{var i=this.flattenObject(r);for(var l in i)if(i.hasOwnProperty(l)){t[n?o+"."+l:o+"["+l+"]"]=i[l]}}}return t},CoreUtilsProvider.prototype.filterByRegexp=function(e,n){return e&&e.length?e.filter(function(e){var t=e.match(n);return t&&t.length}):[]},CoreUtilsProvider.prototype.filterEnabledSites=function(e,n,t){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];var i=[],l=[],s=function(r){var s=e[r];!t&&i.length||i.push(Promise.resolve(n.apply(n,[s].concat(o))).then(function(e){e&&l.push(s)}))};for(var a in e)s(a);return this.allPromises(i).catch(function(){}).then(function(){return t?l:l.length?e:[]})},CoreUtilsProvider.prototype.formatFloat=function(e){if(void 0===e||null===e||"boolean"==typeof e)return"";var n=this.translate.instant("core.decsep");return(e+="").replace(".",n)},CoreUtilsProvider.prototype.formatTree=function(e,n,t,o,r){void 0===n&&(n="parent"),void 0===t&&(t="id"),void 0===o&&(o=0),void 0===r&&(r=5);var i,l,s={},a={},u=[];return e.forEach(function(d,c){if(l=d[t],i=d[n],d.children=[],s[l]=c,i!=o){var p=e[s[i]];if(p)if(a[i]==r){var f=p[n];f&&(e[s[f]].children.push(d),a[l]=a[i],d.parent=f)}else p.children.push(d),a[l]=a[i]+1}else u.push(d),a[l]=1}),u},CoreUtilsProvider.prototype.getCountryName=function(e){var n="assets.countries."+e,t=this.translate.instant(n);return t!==n?t:e},CoreUtilsProvider.prototype.getCountryList=function(){var e=this;return this.getCountryKeysList().then(function(n){var t={};return n.forEach(function(n){if(0===n.indexOf("assets.countries.")){var o=n.replace("assets.countries.","");t[o]=e.translate.instant(n)}}),t})},CoreUtilsProvider.prototype.getCountryListSorted=function(){return this.getCountryList().then(function(e){var n=[];return Object.keys(e).sort(function(n,t){return e[n].localeCompare(e[t])}).forEach(function(t){n.push({code:t,name:e[t]})}),n})},CoreUtilsProvider.prototype.getCountryKeysList=function(){var e=this,n=this.langProvider.getDefaultLanguage();return this.getCountryKeysListForLanguage(n).catch(function(){var t=e.langProvider.getFallbackLanguage();return t===n?Promise.reject("Countries not found."):e.getCountryKeysListForLanguage(t)})},CoreUtilsProvider.prototype.getCountryKeysListForLanguage=function(e){return this.langProvider.getTranslationTable(e).then(function(e){var n=[];for(var t in e)0===t.indexOf("assets.countries.")&&n.push(t);return 0===n.length?Promise.reject("Countries not found."):n})},CoreUtilsProvider.prototype.getMimeTypeFromUrl=function(e){var n=this.mimetypeUtils.guessExtensionFromUrl(e),t=this.mimetypeUtils.getMimeType(n);return t?Promise.resolve(t):this.wsProvider.getRemoteFileMimeType(e).then(function(e){return e||""})},CoreUtilsProvider.prototype.getUniqueId=function(e){return this.uniqueIds[e]||(this.uniqueIds[e]=0),++this.uniqueIds[e]},CoreUtilsProvider.prototype.hasRepeatedFilenames=function(e){if(!e||!e.length)return!1;for(var n=[],t=0;t<e.length;t++){var o=e[t].filename||e[t].name;if(n.indexOf(o)>-1)return this.translate.instant("core.filenameexist",{$a:o});n.push(o)}return!1},CoreUtilsProvider.prototype.indexOfRegexp=function(e,n){if(!e||!e.length)return-1;for(var t=0;t<e.length;t++){var o=e[t].match(n);if(o&&o.length)return t}return-1},CoreUtilsProvider.prototype.isFalseOrZero=function(e){return void 0!==e&&(!1===e||"false"===e||0===parseInt(e,10))},CoreUtilsProvider.prototype.isTrueOrOne=function(e){return void 0!==e&&(!0===e||"true"===e||1===parseInt(e,10))},CoreUtilsProvider.prototype.isWebServiceError=function(e){return e&&(void 0!==e.warningcode||void 0!==e.errorcode&&"invalidtoken"!=e.errorcode&&"userdeleted"!=e.errorcode&&"upgraderunning"!=e.errorcode&&"forcepasswordchangenotice"!=e.errorcode&&"usernotfullysetup"!=e.errorcode&&"sitepolicynotagreed"!=e.errorcode&&"sitemaintenance"!=e.errorcode&&("accessexception"!=e.errorcode||-1==e.message.indexOf("Invalid token - token expired")))},CoreUtilsProvider.prototype.makeMenuFromList=function(e,n,t,o){void 0===t&&(t=",");var r=e.split(t).map(function(e,n){return{label:e.trim(),value:n+1}});return n&&r.unshift({label:n,value:o||0}),r},CoreUtilsProvider.prototype.mergeArraysWithoutDuplicates=function(e,n,t){return this.uniqueArray(e.concat(n),t)},CoreUtilsProvider.prototype.openFile=function(e){var n=this,t=this.mimetypeUtils.getFileExtension(e),o=this.mimetypeUtils.getMimeType(t);try{e=decodeURIComponent(e)}catch(e){}return this.fileOpener.open(e,o).catch(function(r){return n.logger.error("Error opening file "+e+" with mimetype "+o),n.logger.error("Error: ",JSON.stringify(r)),r=!t||t.indexOf("/")>-1||t.indexOf("\\")>-1?n.translate.instant("core.erroropenfilenoextension"):n.translate.instant("core.erroropenfilenoapp"),Promise.reject(r)})},CoreUtilsProvider.prototype.openInApp=function(e,n){var t=this;if(e){if((n=n||{}).enableViewPortScale||(n.enableViewPortScale="yes"),n.allowInlineMediaPlayback||(n.allowInlineMediaPlayback="yes"),!n.location&&this.platform.is("ios")&&0===e.indexOf("file://")&&(n.location="no"),this.iabInstance=this.iab.create(e,"_blank",n),this.appProvider.isDesktop()||this.appProvider.isMobile()){var r,i=[],l=this.iabInstance.on("loadstart").subscribe(function(e){t.zone.run(function(){i.push(e.url),i.length>10&&i.shift(),t.eventsProvider.trigger(o.a.IAB_LOAD_START,e)})});this.platform.is("android")&&(r=this.iabInstance.on("loadstop").subscribe(function(e){t.zone.run(function(){-1==i.indexOf(e.url)&&t.eventsProvider.trigger(o.a.IAB_LOAD_START,e)})}));var s=this.iabInstance.on("exit").subscribe(function(e){t.zone.run(function(){l.unsubscribe(),r&&r.unsubscribe(),s.unsubscribe(),t.eventsProvider.trigger(o.a.IAB_EXIT,e)})})}return this.iabInstance}},CoreUtilsProvider.prototype.openInBrowser=function(e){if(this.appProvider.isDesktop()){t(132).shell.openExternal(e)||window.open(e,"_system")}else window.open(e,"_system")},CoreUtilsProvider.prototype.openOnlineFile=function(e){var n=this;return this.platform.is("android")?this.getMimeTypeFromUrl(e).catch(function(){}).then(function(t){if(!t)return Promise.reject(n.translate.instant("core.erroropenfilenoextension"));return n.webIntent.startActivity({action:n.webIntent.ACTION_VIEW,url:e,type:t}).catch(function(o){return n.logger.error("Error opening online file "+e+" with mimetype "+t),n.logger.error("Error: ",JSON.stringify(o)),Promise.reject(n.translate.instant("core.erroropenfilenoapp"))})}):(this.openInApp(e),Promise.resolve())},CoreUtilsProvider.prototype.objectToArray=function(e){return Object.keys(e).map(function(n){return e[n]})},CoreUtilsProvider.prototype.objectToArrayOfObjects=function(e,n,t,o,r){var i=function(e,o){if(void 0!==o&&null!=o){if("object"==typeof o){var r=[];return Object.keys(o).forEach(function(n){var t=i(e?e+"["+n+"]":n,o[n]);t&&(r=r.concat(t))}),r}var l={};return l[n]=e,l[t]=o,l}};if(!e)return[];var l=i("",e);return o||r?l.sort(function(e,r){return o?e[n]>=r[n]?1:-1:e[t]>=r[t]?1:-1}):l},CoreUtilsProvider.prototype.objectToKeyValueMap=function(e,n,t,o){if(e){var r=o?o.length:0,i={};return e.forEach(function(e){var o=r>0?e[n].substr(r):e[n];i[o]=e[t]}),i}},CoreUtilsProvider.prototype.objectToGetParams=function(e,n){void 0===n&&(n=!0);var t=this.flattenObject(e),o="",r="";for(var i in t){var l=t[i];(!n||null!==l&&void 0!==l)&&("boolean"==typeof l&&(l=l?1:0),o+=r+i+"="+l,r="&")}return o},CoreUtilsProvider.prototype.prefixKeys=function(e,n){var t={};return Object.keys(e).forEach(function(o){t[n+o]=e[o]}),t},CoreUtilsProvider.prototype.promiseDefer=function(){var e={};return e.promise=new Promise(function(n,t){e.resolve=n,e.reject=t}),e},CoreUtilsProvider.prototype.promiseFails=function(e){return e.then(function(){return!1}).catch(function(){return!0})},CoreUtilsProvider.prototype.promiseWorks=function(e){return e.then(function(){return!0}).catch(function(){return!1})},CoreUtilsProvider.prototype.sameAtKeyMissingIsBlank=function(e,n,t){var o=void 0!==e[t]?e[t]:"",r=void 0!==n[t]?n[t]:"";return"number"!=typeof o&&"boolean"!=typeof o||(o=""+o),"number"!=typeof r&&"boolean"!=typeof r||(r=""+r),o===r},CoreUtilsProvider.prototype.sortAndStringify=function(e){return JSON.stringify(this.sortProperties(e))},CoreUtilsProvider.prototype.sortProperties=function(e){var n=this;return null==e||"object"!=typeof e||Array.isArray(e)?e:Object.keys(e).sort().reduce(function(t,o){return t[o]=n.sortProperties(e[o]),t},{})},CoreUtilsProvider.prototype.sortValues=function(e){if("object"!=typeof e||Array.isArray(e))return e;var n=this.objectToArrayOfObjects(e,"name","value",!1,!0);return this.objectToKeyValueMap(n,"name","value")},CoreUtilsProvider.prototype.sumFileSizes=function(e){var n={size:0,total:!0};return e.forEach(function(e){void 0===e.filesize?n.total=!1:n.size+=e.filesize}),n},CoreUtilsProvider.prototype.timeoutPromise=function(e,n){return new Promise(function(t,o){var r=setTimeout(function(){o({timeout:!0})},n);e.then(t).catch(o).finally(function(){clearTimeout(r)})})},CoreUtilsProvider.prototype.unformatFloat=function(e,n){if(void 0===e)return!1;if(null==e)return"";if(e+="",""==(e=e.trim()))return"";e=(e=e.replace(" ","")).replace(this.translate.instant("core.decsep"),".");var t=parseFloat(e);return!(n&&(!isFinite(e)||isNaN(t)))&&t},CoreUtilsProvider.prototype.uniqueArray=function(e,n){var t=[],o={};return e.forEach(function(e){var r=n?e[n]:e;o[r]||(o[r]=!0,t.push(e))}),t},CoreUtilsProvider}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return u});t(0);var o=t(1),r=(t(6),t(4),t(11),t(127),t(10)),i=(t(7),t(42)),l=t(565),s=t(195),a=(t.n(s),t(147)),u=(t.n(a),function(){function CoreDomUtilsProvider(e,n,t,o,r,l,s,a,u,d,c,p,f,h,m){var _=this;this.translate=e,this.loadingCtrl=n,this.toastCtrl=t,this.alertCtrl=o,this.textUtils=r,this.appProvider=l,this.platform=s,this.configProvider=a,this.urlUtils=u,this.modalCtrl=d,this.sanitizer=c,this.popoverCtrl=p,this.fileProvider=f,this.eventsProvider=m,this.INPUT_SUPPORT_KEYBOARD=["date","datetime","datetime-local","email","month","number","password","search","tel","text","time","url","week"],this.INSTANCE_ID_ATTR_NAME="core-instance-id",this.template=document.createElement("template"),this.instances={},this.lastInstanceId=0,this.debugDisplay=!1,this.displayedAlerts={},this.logger=h.getInstance("CoreDomUtilsProvider"),a.get(i.a.SETTINGS_DEBUG_DISPLAY,!1).then(function(e){_.debugDisplay=!!e})}return CoreDomUtilsProvider.prototype.closest=function(e,n){var t=this;if("function"==typeof e.closest)return e.closest(n);if(this.matchesFn||(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(t.matchesFn=e,!0)}),this.matchesFn))for(;e;){if(e[this.matchesFn](n))return e;e=e.parentElement}},CoreDomUtilsProvider.prototype.confirmDownloadSize=function(e,n,t,o,r,l){var s=this,a=this.textUtils.bytesToSize(e.size,2);return new Promise(function(n){s.appProvider.isDesktop()?n(null):s.fileProvider.calculateFreeSpace().then(function(n){return s.platform.is("android")?n:n<i.a.IOS_FREE_SPACE_THRESHOLD||e.size>n/2?n:null}).then(function(e){n(e)})}).then(function(n){if(null===n)return"";var t=s.textUtils.bytesToSize(n,2);return s.platform.is("android")&&e.size>n-i.a.MINIMUM_FREE_SPACE?Promise.reject(s.translate.instant("core.course.insufficientavailablespace",{size:a})):s.translate.instant("core.course.availablespace",{available:t})}).then(function(u){o=void 0===o?i.a.WIFI_DOWNLOAD_THRESHOLD:o,r=void 0===r?i.a.DOWNLOAD_THRESHOLD:r;var d="";return s.appProvider.isNetworkAccessLimited()&&(d=s.translate.instant("core.course.confirmlimiteddownload")),e.size<0||0==e.size&&!e.total?(t=t||"core.course.confirmdownloadunknownsize",s.showConfirm(d+s.translate.instant(t,{availableSpace:u}))):e.total?l||e.size>=o||s.appProvider.isNetworkAccessLimited()&&e.size>=r?(n=n||(0===e.size?"core.course.confirmdownloadzerosize":"core.course.confirmdownload"),s.showConfirm(d+s.translate.instant(n,{size:a,availableSpace:u}))):Promise.resolve():s.showConfirm(d+s.translate.instant("core.course.confirmpartialdownloadsize",{size:a,availableSpace:u}))})},CoreDomUtilsProvider.prototype.convertToElement=function(e){return this.template.innerHTML="<div>"+e+"</div>",this.template.content.children[0]},CoreDomUtilsProvider.prototype.createCanceledError=function(){return{coreCanceled:!0}},CoreDomUtilsProvider.prototype.createChangesFromKeyValueDiff=function(e){var n={};return e.forEachAddedItem(function(e){n[e.key]=new o.Q(e.previousValue,e.currentValue,!0)}),e.forEachChangedItem(function(e){n[e.key]=new o.Q(e.previousValue,e.currentValue,!1)}),e.forEachRemovedItem(function(e){n[e.key]=new o.Q(e.previousValue,e.currentValue,!0)}),n},CoreDomUtilsProvider.prototype.extractDownloadableFilesFromHtml=function(e){this.logger.error("The function extractDownloadableFilesFromHtml has been moved to CoreFilepoolProvider. Please use that function instead of this one.");var n,t=[];n=this.convertToElement(e).querySelectorAll("a, img, audio, video, source, track");for(var o=0;o<n.length;o++){var r=n[o],i="A"===r.tagName?r.href:r.src;i&&this.urlUtils.isDownloadableUrl(i)&&-1==t.indexOf(i)&&t.push(i),"VIDEO"==r.tagName&&r.getAttribute("poster")&&(i=r.getAttribute("poster"))&&this.urlUtils.isDownloadableUrl(i)&&-1==t.indexOf(i)&&t.push(i)}return t},CoreDomUtilsProvider.prototype.extractDownloadableFilesFromHtmlAsFakeFileObjects=function(e){return this.extractDownloadableFilesFromHtml(e).map(function(e){return{fileurl:e}})},CoreDomUtilsProvider.prototype.extractUrlsFromCSS=function(e){var n=[],t=e.match(/url\(\s*["']?(?!data:)([^)]+)\)/gim);return t?(t.forEach(function(e){var t=e.match(/url\(\s*['"]?([^'"]*)['"]?\s*\)/im);t&&t[1]&&n.push(t[1])}),n):n},CoreDomUtilsProvider.prototype.fixHtml=function(e){this.template.innerHTML=e;var n=/[^\x00-\x20\x7F-\x9F"'>\/=]+/,t=function(e){Array.from(e.attributes).forEach(function(t){n.test(t.name)||e.removeAttributeNode(t)}),Array.from(e.children).forEach(t)};return Array.from(this.template.content.children).forEach(t),this.template.innerHTML},CoreDomUtilsProvider.prototype.focusElement=function(e){e&&e.focus&&(e.focus(),this.platform.is("android")&&this.supportsInputKeyboard(e)&&this.appProvider.openKeyboard())},CoreDomUtilsProvider.prototype.formatPixelsSize=function(e){return"string"==typeof e&&(e.indexOf("px")>-1||e.indexOf("%")>-1||"auto"==e||"initial"==e)?e:(e=parseInt(e,10),isNaN(e)?"":e+"px")},CoreDomUtilsProvider.prototype.getContentsOfElement=function(e,n){if(e){var t=e.querySelector(n);if(t)return t.innerHTML}},CoreDomUtilsProvider.prototype.getDataFromForm=function(e){if(!e||!e.elements)return{};for(var n={},t=0;t<e.elements.length;t++){var o=e.elements[t],r=o.name||"";r&&"submit"!=o.type&&"BUTTON"!=o.tagName&&("checkbox"==o.type?n[r]=!!o.checked:"radio"==o.type?o.checked&&(n[r]=o.value):n[r]=o.value)}return n},CoreDomUtilsProvider.prototype.getHTMLElementAttribute=function(e,n){return this.convertToElement(e).children[0].getAttribute("src")},CoreDomUtilsProvider.prototype.getElementHeight=function(e,n,t,o,r){return this.getElementMeasure(e,!1,n,t,o,r)},CoreDomUtilsProvider.prototype.getElementMeasure=function(e,n,t,o,r,i){var l=n?"offsetWidth":"offsetHeight",s=n?"width":"height",a=n?"clientWidth":"clientHeight",u=n?"Left":"Top",d=n?"Right":"Bottom",c=e[l]||e[s]||e[a]||0;if(c<=0){var p=getComputedStyle(e);p&&""==p.display&&(e.style.display="inline-block",c=e[l]||e[s]||e[a]||0,e.style.display="")}if(t||o||r){var f=getComputedStyle(e),h=0;t&&(h+=this.getComputedStyleMeasure(f,"padding"+u)+this.getComputedStyleMeasure(f,"padding"+d)),o&&(h+=this.getComputedStyleMeasure(f,"margin"+u)+this.getComputedStyleMeasure(f,"margin"+d)),r&&(h+=this.getComputedStyleMeasure(f,"border"+u+"Width")+this.getComputedStyleMeasure(f,"border"+d+"Width")),i?c=c>h?c-h:0:c+=h}return c},CoreDomUtilsProvider.prototype.getComputedStyleMeasure=function(e,n){return parseInt(e[n],10)||0},CoreDomUtilsProvider.prototype.getConnectionWarningIconHtml=function(){return'<div text-center><span class="core-icon-with-badge"><ion-icon role="img" class="icon fa fa-wifi" aria-label="wifi"></ion-icon><ion-icon class="icon fa fa-exclamation-triangle core-icon-badge"></ion-icon></span></div>'},CoreDomUtilsProvider.prototype.getElementWidth=function(e,n,t,o,r){return this.getElementMeasure(e,!0,n,t,o,r)},CoreDomUtilsProvider.prototype.getElementXY=function(e,n,t){var o,r=n?e.querySelector(n):e,i=0,l=0;if(t||(t="scroll-content"),!r)return null;for(;r;){for(l+=r.offsetLeft-r.scrollLeft+r.clientLeft,i+=r.offsetTop-r.scrollTop+r.clientTop,o=r.offsetParent,r=r.parentElement;o!=r&&r;)r=-1!=r.className.indexOf(t)?null:r.parentElement;r&&-1!=r.className.indexOf(t)&&(r=null)}return[l,i]},CoreDomUtilsProvider.prototype.getErrorTitle=function(e){return e==this.translate.instant("core.networkerrormsg")||e==this.translate.instant("core.fileuploader.errormustbeonlinetoupload")?this.sanitizer.bypassSecurityTrustHtml(this.getConnectionWarningIconHtml()):this.textUtils.decodeHTML(this.translate.instant("core.error"))},CoreDomUtilsProvider.prototype.getErrorMessage=function(e,n){var t="";if("object"==typeof e){if(this.debugDisplay&&(e.debuginfo&&(t="<br><br>"+this.textUtils.escapeHTML(e.debuginfo)),e.backtrace&&(t+="<br><br>"+this.textUtils.replaceNewLines(this.textUtils.escapeHTML(e.backtrace),"<br>")),console.error(e)),e.coreCanceled)return null;(e=this.textUtils.getErrorMessageFromError(e))||(e=JSON.stringify(e),t="");var o=e.match(/token"?[=|:]"?(\w*)/,"");o&&o[1]&&(e=e.replace(new RegExp(o[1],"g"),"secret"))}if(e==i.a.DONT_SHOW_ERROR)return null;var r=this.textUtils.decodeHTML(n?this.translate.instant(e):e);return t&&(r+=t),r},CoreDomUtilsProvider.prototype.getInstanceByElement=function(e){var n=e.getAttribute(this.INSTANCE_ID_ATTR_NAME);return this.instances[n]},CoreDomUtilsProvider.prototype.waitElementToExist=function(e){var n={promise:null,resolve:null,reject:null},t=100;n.promise=new Promise(function(e,t){n.resolve=e,n.reject=t});var o=setInterval(function(){var r=e();r?(clearInterval(o),n.resolve(r)):--t<=0&&(clearInterval(o),n.reject())},100);return n.promise},CoreDomUtilsProvider.prototype.handleBootstrapTooltips=function(e){var n=this;Array.from(e.querySelectorAll('[data-toggle="tooltip"]')).forEach(function(e){var t=e.getAttribute("title")||e.getAttribute("data-original-title"),o=e.getAttribute("data-trigger")||"hover focus",r=e.getAttribute("data-bstooltip-treated");!t||"true"===r||-1==o.indexOf("hover")&&-1==o.indexOf("focus")&&-1==o.indexOf("click")||(e.setAttribute("data-bstooltip-treated","true"),e.setAttribute("data-original-title",t),e.setAttribute("title",""),e.addEventListener("click",function(o){var r=e.getAttribute("data-html");n.popoverCtrl.create(l.a,{content:t,html:"true"===r}).present({ev:o})}))})},CoreDomUtilsProvider.prototype.isElementOutsideOfScreen=function(e,n){var t,o,r=n.getBoundingClientRect(),i=0;return!!r&&(t=Math.round((r.bottom+r.top)/2),o=e.getBoundingClientRect(),i=o&&o.top||0,t>window.innerHeight||t<i)},CoreDomUtilsProvider.prototype.isRichTextEditorEnabled=function(){return this.isRichTextEditorSupported()?this.configProvider.get(i.a.SETTINGS_RICH_TEXT_EDITOR,!0).then(function(e){return!!e}):Promise.resolve(!1)},CoreDomUtilsProvider.prototype.isRichTextEditorSupported=function(){return!0},CoreDomUtilsProvider.prototype.moveChildren=function(e,n,t){for(var o=[],r=t?n.firstChild:null;e.childNodes.length>0;){var i=e.childNodes[0];o.push(i),n.insertBefore(i,r)}return o},CoreDomUtilsProvider.prototype.removeElement=function(e,n){if(e){var t=e.querySelector(n);t&&t.remove()}},CoreDomUtilsProvider.prototype.removeElementFromHtml=function(e,n,t){var o,r=this.convertToElement(e);if(t){o=r.querySelectorAll(n);for(var i=0;i<o.length;i++)o[i].remove()}else(o=r.querySelector(n))&&o.remove();return r.innerHTML},CoreDomUtilsProvider.prototype.removeInstanceByElement=function(e){var n=e.getAttribute(this.INSTANCE_ID_ATTR_NAME);delete this.instances[n]},CoreDomUtilsProvider.prototype.removeInstanceById=function(e){delete this.instances[e]},CoreDomUtilsProvider.prototype.replaceClassesInElement=function(e,n){for(var t in n)for(var o=e.querySelectorAll("."+t),r=0;r<o.length;r++){var i=o[r];i.className=i.className.replace(t,n[t])}},CoreDomUtilsProvider.prototype.restoreSourcesInHtml=function(e,n,t){var o=this,r=this.convertToElement(e);return Array.from(r.querySelectorAll("img, video, audio, source, track")).forEach(function(e){var t=n[o.textUtils.decodeURIComponent(e.getAttribute("src"))];void 0!==t&&e.setAttribute("src",t),"VIDEO"==e.tagName&&e.getAttribute("poster")&&void 0!==(t=n[o.textUtils.decodeURIComponent(e.getAttribute("poster"))])&&e.setAttribute("poster",t)}),Array.from(r.querySelectorAll("a")).forEach(function(e){var r=o.textUtils.decodeURIComponent(e.getAttribute("href")),i=n[r];void 0!==i&&(e.setAttribute("href",i),"function"==typeof t&&t(e,r))}),r.innerHTML},CoreDomUtilsProvider.prototype.scrollTo=function(e,n,t,o,r){return e&&e._scroll&&e.scrollTo(n,t,o,r)},CoreDomUtilsProvider.prototype.scrollToBottom=function(e,n){return e&&e._scroll&&e.scrollToBottom(n)},CoreDomUtilsProvider.prototype.scrollToTop=function(e,n){return e&&e._scroll&&e.scrollToTop(n)},CoreDomUtilsProvider.prototype.getContentHeight=function(e){return e&&e._scroll&&e.contentHeight||0},CoreDomUtilsProvider.prototype.getScrollHeight=function(e){return e&&e._scroll&&e.scrollHeight||0},CoreDomUtilsProvider.prototype.getScrollTop=function(e){return e&&e._scrollContent&&e._scrollContent.nativeElement.scrollTop||0},CoreDomUtilsProvider.prototype.scrollToElement=function(e,n,t){var o=this.getElementXY(n,void 0,t);return!!o&&(this.scrollTo(e,o[0],o[1]),!0)},CoreDomUtilsProvider.prototype.scrollToElementBySelector=function(e,n,t){var o=this.getElementXY(e.getScrollElement(),n,t);return!!o&&(this.scrollTo(e,o[0],o[1]),!0)},CoreDomUtilsProvider.prototype.scrollToInputError=function(e,n){return!!e&&this.scrollToElementBySelector(e,".core-input-error",n)},CoreDomUtilsProvider.prototype.setDebugDisplay=function(e){this.debugDisplay=e},CoreDomUtilsProvider.prototype.showAlert=function(e,n,t,o){var r=this,i=this.textUtils.hasHTMLTags(n);return(i?this.textUtils.formatText(n):Promise.resolve(n)).then(function(n){var l=s.Md5.hashAsciiStr((e||"")+"#"+(n||""));if(r.displayedAlerts[l])return r.displayedAlerts[l];var u=r.alertCtrl.create({title:e,message:n,buttons:[t||r.translate.instant("core.ok")]});return u.present().then(function(){if(i){var e=u.pageRef().nativeElement.querySelector(".alert-message");r.treatAnchors(e)}}),r.displayedAlerts[l]=u,u.didDismiss=new a.Subject,u.willDismiss=new a.Subject,u.onDidDismiss(function(e,n){delete r.displayedAlerts[l],u.didDismiss.next({data:e,role:n})}),u.onWillDismiss(function(e,n){u.willDismiss.next({data:e,role:n})}),o>0&&setTimeout(function(){u.dismiss()},o),u})},CoreDomUtilsProvider.prototype.showAlertTranslated=function(e,n,t,o){return e=e?this.translate.instant(e):e,n=n?this.translate.instant(n):n,t=t?this.translate.instant(t):t,this.showAlert(e,n,t,o)},CoreDomUtilsProvider.prototype.showDeleteConfirm=function(e,n,t){return void 0===e&&(e="core.areyousure"),void 0===n&&(n={}),this.showConfirm(this.translate.instant(e,n),void 0,this.translate.instant("core.delete"),void 0,t)},CoreDomUtilsProvider.prototype.showConfirm=function(e,n,t,o,r){var i=this;return new Promise(function(l,s){var a=i.textUtils.hasHTMLTags(e);(a?i.textUtils.formatText(e):Promise.resolve(e)).then(function(e){(r=r||{}).message=e,r.title=n,n||(r.cssClass="core-nohead"),r.buttons=[{text:o||i.translate.instant("core.cancel"),role:"cancel",handler:function(){s(i.createCanceledError())}},{text:t||i.translate.instant("core.ok"),handler:function(e){l(e)}}];var u=i.alertCtrl.create(r);u.present().then(function(){if(a){var e=u.pageRef().nativeElement.querySelector(".alert-message");i.treatAnchors(e)}})})})},CoreDomUtilsProvider.prototype.showErrorModal=function(e,n,t){var o=this.getErrorMessage(e,n);return null===o?Promise.resolve(null):this.showAlert(this.getErrorTitle(o),o,void 0,t)},CoreDomUtilsProvider.prototype.showErrorModalDefault=function(e,n,t,o){if(!e||!e.coreCanceled){var r=e;return e&&"string"!=typeof e&&(r=this.textUtils.getErrorMessageFromError(e)),this.showErrorModal("string"==typeof r?e:n,t,o)}},CoreDomUtilsProvider.prototype.showErrorModalFirstWarning=function(e,n,t,o){return this.showErrorModalDefault(e&&e.length&&e[0].message,n,t,o)},CoreDomUtilsProvider.prototype.showModalLoading=function(e,n){e?n&&(e=this.translate.instant(e)):e=this.translate.instant("core.loading");var t=this.loadingCtrl.create({content:e}),o=t.dismiss.bind(t),r=!1,i=!1;return t.dismiss=function(e,n,t){return!r||i?(i=!0,Promise.resolve()):(i=!0,o(e,n,t))},setTimeout(function(){i||(r=!0,t.present())},40),t},CoreDomUtilsProvider.prototype.showPrompt=function(e,n,t,o){var r=this;return void 0===o&&(o="password"),new Promise(function(i,l){var s=r.textUtils.hasHTMLTags(e);(s?r.textUtils.formatText(e):Promise.resolve(e)).then(function(e){var a=r.alertCtrl.create({message:e,title:n,inputs:[{name:"promptinput",placeholder:t||r.translate.instant("core.login.password"),type:o}],buttons:[{text:r.translate.instant("core.cancel"),role:"cancel",handler:function(){l()}},{text:r.translate.instant("core.ok"),handler:function(e){i(e.promptinput)}}]});a.present().then(function(){if(s){var e=a.pageRef().nativeElement.querySelector(".alert-message");r.treatAnchors(e)}})})})},CoreDomUtilsProvider.prototype.showToast=function(e,n,t,o,r){void 0===t&&(t=2e3),void 0===o&&(o=""),void 0===r&&(r=!0),n&&(e=this.translate.instant(e));var i=this.toastCtrl.create({message:e,duration:t,position:"bottom",cssClass:o,dismissOnPageChange:r});return i.present(),i},CoreDomUtilsProvider.prototype.storeInstanceByElement=function(e,n){var t=String(this.lastInstanceId++);return e.setAttribute(this.INSTANCE_ID_ATTR_NAME,t),this.instances[t]=n,t},CoreDomUtilsProvider.prototype.supportsInputKeyboard=function(e){return e&&!e.disabled&&("textarea"==e.tagName.toLowerCase()||"input"==e.tagName.toLowerCase()&&-1!=this.INPUT_SUPPORT_KEYBOARD.indexOf(e.type))},CoreDomUtilsProvider.prototype.toDom=function(e){return this.convertToElement(e).children},CoreDomUtilsProvider.prototype.treatAnchors=function(e){var n=this;Array.from(e.querySelectorAll("a")).forEach(function(e){e.addEventListener("click",function(o){if(!o.defaultPrevented){var r=e.getAttribute("href");if(r)if(o.preventDefault(),o.stopPropagation(),n.appProvider.isDesktop()){t(132).shell.openExternal(r)||window.open(r,"_system")}else window.open(r,"_system")}})})},CoreDomUtilsProvider.prototype.viewImage=function(e,n,t,o,r){if(e){this.modalCtrl.create("CoreViewerImagePage",{title:n,image:e,component:t,componentId:o},r?{cssClass:"core-modal-fullscreen"}:{}).present()}},CoreDomUtilsProvider.prototype.waitForImages=function(e){var n=[],t=!1;return Array.from(e.querySelectorAll("img")).forEach(function(e){e&&!e.complete&&(t=!0,n.push(new Promise(function(n,t){var o=function(){n(),e.removeEventListener("load",o),e.removeEventListener("error",o)};e.addEventListener("load",o),e.addEventListener("error",o)})))}),Promise.all(n).then(function(){return t})},CoreDomUtilsProvider.prototype.wrapElement=function(e,n){e.parentNode.insertBefore(n,e),n.appendChild(e)},CoreDomUtilsProvider.prototype.triggerFormCancelledEvent=function(e,n){e&&this.eventsProvider.trigger(r.a.FORM_ACTION,{action:"cancel",form:e.nativeElement},n)},CoreDomUtilsProvider.prototype.triggerFormSubmittedEvent=function(e,n,t){e&&this.eventsProvider.trigger(r.a.FORM_ACTION,{action:"submit",form:e.nativeElement,online:!!n},t)},CoreDomUtilsProvider}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(15),r=(t.n(o),function(){function CoreLoggerProvider(){this.enabled=!0}return CoreLoggerProvider.prototype.getInstance=function(e){return e=e||"",{log:this.prepareLogFn(console.log.bind(console),e),info:this.prepareLogFn(console.info.bind(console),e),warn:this.prepareLogFn(console.warn.bind(console),e),debug:this.prepareLogFn(console.debug.bind(console),e),error:this.prepareLogFn(console.error.bind(console),e)}},CoreLoggerProvider.prototype.prepareLogFn=function(e,n){var t=this;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t.enabled){var l=o().format("l LTS");r[0]=l+" "+n+": "+r[0],e.apply(null,r)}}},CoreLoggerProvider}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(147),r=(t.n(o),function(){function CoreEventsProvider(e){this.observables={},this.uniqueEvents={},this.logger=e.getInstance("CoreEventsProvider")}return CoreEventsProvider.prototype.on=function(e,n,t){var r=this;if(this.uniqueEvents[e])return n(this.uniqueEvents[e].data),{off:function(){}};this.logger.debug("New observer listening to event '"+e+"'"),void 0===this.observables[e]&&(this.observables[e]=new o.Subject);var i=this.observables[e].subscribe(function(e){t&&e.siteId!=t||n(e)});return{off:function(){r.logger.debug("Stop listening to event '"+e+"'"),i.unsubscribe()}}},CoreEventsProvider.prototype.trigger=function(e,n,t){this.logger.debug("Event '"+e+"' triggered."),this.observables[e]&&(t&&(n||(n={}),n.siteId=t),this.observables[e].next(n))},CoreEventsProvider.prototype.triggerUnique=function(e,n,t){this.uniqueEvents[e]?this.logger.debug("Unique event '"+e+"' ignored because it was already triggered."):(this.logger.debug("Unique event '"+e+"' triggered."),t&&(n||(n={}),n.siteId=t),this.uniqueEvents[e]={data:n},this.observables[e]&&this.observables[e].next(n))},CoreEventsProvider.SESSION_EXPIRED="session_expired",CoreEventsProvider.PASSWORD_CHANGE_FORCED="password_change_forced",CoreEventsProvider.USER_NOT_FULLY_SETUP="user_not_fully_setup",CoreEventsProvider.SITE_POLICY_NOT_AGREED="site_policy_not_agreed",CoreEventsProvider.LOGIN="login",CoreEventsProvider.LOGOUT="logout",CoreEventsProvider.LANGUAGE_CHANGED="language_changed",CoreEventsProvider.NOTIFICATION_SOUND_CHANGED="notification_sound_changed",CoreEventsProvider.SITE_ADDED="site_added",CoreEventsProvider.SITE_UPDATED="site_updated",CoreEventsProvider.SITE_DELETED="site_deleted",CoreEventsProvider.COMPLETION_MODULE_VIEWED="completion_module_viewed",CoreEventsProvider.USER_DELETED="user_deleted",CoreEventsProvider.PACKAGE_STATUS_CHANGED="package_status_changed",CoreEventsProvider.COURSE_STATUS_CHANGED="course_status_changed",CoreEventsProvider.SECTION_STATUS_CHANGED="section_status_changed",CoreEventsProvider.SITE_PLUGINS_LOADED="site_plugins_loaded",CoreEventsProvider.SITE_PLUGINS_COURSE_RESTRICT_UPDATED="site_plugins_course_restrict_updated",CoreEventsProvider.LOGIN_SITE_CHECKED="login_site_checked",CoreEventsProvider.LOGIN_SITE_UNCHECKED="login_site_unchecked",CoreEventsProvider.IAB_LOAD_START="inappbrowser_load_start",CoreEventsProvider.IAB_EXIT="inappbrowser_exit",CoreEventsProvider.APP_LAUNCHED_URL="app_launched_url",CoreEventsProvider.FILE_SHARED="file_shared",CoreEventsProvider.KEYBOARD_CHANGE="keyboard_change",CoreEventsProvider.CORE_LOADING_CHANGED="core_loading_changed",CoreEventsProvider.ORIENTATION_CHANGE="orientation_change",CoreEventsProvider.LOAD_PAGE_MAIN_MENU="load_page_main_menu",CoreEventsProvider.SEND_ON_ENTER_CHANGED="send_on_enter_changed",CoreEventsProvider.MAIN_MENU_OPEN="main_menu_open",CoreEventsProvider.SELECT_COURSE_TAB="select_course_tab",CoreEventsProvider.WS_CACHE_INVALIDATED="ws_cache_invalidated",CoreEventsProvider.SITE_STORAGE_DELETED="site_storage_deleted",CoreEventsProvider.FORM_ACTION="form_action",CoreEventsProvider}())},function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0),t(6),t(349),t(186),t(554),t(427),t(7);var o=t(10),r=t(117),i=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},l=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},s=function(){function CoreAppProvider(n,t,r,i,l,s,a,u,d,c){var p=this;this.platform=t,this.keyboard=r,this.appCtrl=i,this.network=l,this.events=a,this.menuCtrl=d,this.statusBar=c,this.DBNAME="MoodleMobile",this.isKeyboardShown=!1,this.backActions=[],this.mainMenuId=0,this.forceOffline=!1,this.SCHEMA_VERSIONS_TABLE="schema_versions",this.versionsTableSchema={name:this.SCHEMA_VERSIONS_TABLE,columns:[{name:"name",type:"TEXT",primaryKey:!0},{name:"version",type:"INTEGER"}]},this.logger=s.getInstance("CoreAppProvider"),this.db=n.getDB(this.DBNAME),this.createVersionsTableReady=this.db.createTableFromSchema(this.versionsTableSchema),this.keyboard.onKeyboardShow().subscribe(function(e){u.run(function(){document.body.classList.add("keyboard-is-open"),p.isKeyboardShown=!0,a.trigger(o.a.KEYBOARD_CHANGE,e.keyboardHeight)})}),this.keyboard.onKeyboardHide().subscribe(function(e){u.run(function(){document.body.classList.remove("keyboard-is-open"),p.isKeyboardShown=!1,a.trigger(o.a.KEYBOARD_CHANGE,0)})}),this.platform.registerBackButtonAction(function(){p.backButtonAction()},100),e.isAutomated()&&(window.appProvider=this)}return e=CoreAppProvider,CoreAppProvider.prototype.canGetUserMedia=function(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)},CoreAppProvider.prototype.canRecordMedia=function(){return!!window.MediaRecorder},CoreAppProvider.prototype.closeKeyboard=function(){this.isMobile()&&this.keyboard.hide()},CoreAppProvider.prototype.createTablesFromSchema=function(e){return i(this,void 0,void 0,function(){var n,t;return l(this,function(o){switch(o.label){case 0:this.logger.debug("Apply schema to app DB: "+e.name),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,this.createVersionsTableReady];case 2:return o.sent(),[4,this.db.getRecord(this.SCHEMA_VERSIONS_TABLE,{name:e.name})];case 3:return t=o.sent(),n=t.version,[3,5];case 4:return o.sent(),n=0,[3,5];case 5:return n>=e.version?[2]:(this.logger.debug("Migrating schema '"+e.name+"' of app DB from version "+n+" to "+e.version),e.tables?[4,this.db.createTablesFromSchema(e.tables)]:[3,7]);case 6:o.sent(),o.label=7;case 7:return e.migrate?[4,e.migrate(this.db,n)]:[3,9];case 8:o.sent(),o.label=9;case 9:return[4,this.db.insertRecord(this.SCHEMA_VERSIONS_TABLE,{name:e.name,version:e.version})];case 10:return o.sent(),[2]}})})},CoreAppProvider.prototype.getDB=function(){return this.db},CoreAppProvider.prototype.getMainMenuId=function(){return this.mainMenuId++},CoreAppProvider.prototype.getRootNavController=function(){return this.appCtrl.getRootNavs()[0]},CoreAppProvider.isAutomated=function(){return!!navigator.webdriver},CoreAppProvider.prototype.is64Bits=function(){var e=window.process;return this.isDesktop()&&"x64"==e.arch},CoreAppProvider.prototype.isAndroid=function(){return this.platform.is("android")},CoreAppProvider.prototype.isDesktop=function(){var e=window.process;return!(!e||!e.versions||void 0===e.versions.electron)},CoreAppProvider.prototype.isIOS=function(){return this.platform.is("ios")},CoreAppProvider.prototype.isKeyboardVisible=function(){return this.isKeyboardShown},CoreAppProvider.prototype.isLinux=function(){if(!this.isDesktop())return!1;try{return 0===t(564).platform().indexOf("linux")}catch(e){return!1}},CoreAppProvider.prototype.isMac=function(){if(!this.isDesktop())return!1;try{return 0===t(564).platform().indexOf("darwin")}catch(e){return!1}},CoreAppProvider.prototype.isMainMenuOpen=function(){return void 0!==this.mainMenuOpen},CoreAppProvider.prototype.isMobile=function(){return this.platform.is("cordova")},CoreAppProvider.prototype.isWide=function(){return this.platform.width()>768},CoreAppProvider.prototype.isOnline=function(){if(this.forceOffline)return!1;var e=null!==this.network.type&&this.network.type!=Connection.NONE&&this.network.type!=Connection.UNKNOWN;return!e&&navigator.onLine&&(e=!0),e},CoreAppProvider.prototype.isNetworkAccessLimited=function(){var e=this.network.type;if(null===e)return!1;return[Connection.CELL_2G,Connection.CELL_3G,Connection.CELL_4G,Connection.CELL].indexOf(e)>-1},CoreAppProvider.prototype.isWifi=function(){return this.isOnline()&&!this.isNetworkAccessLimited()},CoreAppProvider.prototype.isWindows=function(){if(!this.isDesktop())return!1;try{return 0===t(564).platform().indexOf("win")}catch(e){return!1}},CoreAppProvider.prototype.openKeyboard=function(){this.isMobile()&&!this.platform.is("ios")&&this.keyboard.show()},CoreAppProvider.prototype.setMainMenuOpen=function(e,n){n?(this.mainMenuOpen=e,this.events.trigger(o.a.MAIN_MENU_OPEN)):this.mainMenuOpen==e&&delete this.mainMenuOpen},CoreAppProvider.prototype.startSSOAuthentication=function(){var e,n,t=this;this.ssoAuthenticationPromise=new Promise(function(o,r){n=o,e=setTimeout(function(){t.finishSSOAuthentication()},1e4)}),this.ssoAuthenticationPromise.resolve=n,this.ssoAuthenticationPromise.then(function(){clearTimeout(e)})},CoreAppProvider.prototype.finishSSOAuthentication=function(){this.ssoAuthenticationPromise&&(this.ssoAuthenticationPromise.resolve&&this.ssoAuthenticationPromise.resolve(),this.ssoAuthenticationPromise=void 0)},CoreAppProvider.prototype.isSSOAuthenticationOngoing=function(){return!!this.ssoAuthenticationPromise},CoreAppProvider.prototype.waitForSSOAuthentication=function(){return this.ssoAuthenticationPromise||Promise.resolve()},CoreAppProvider.prototype.getRedirect=function(){if(localStorage&&localStorage.getItem)try{var e={siteId:localStorage.getItem("CoreRedirectSiteId"),page:localStorage.getItem("CoreRedirectState"),params:localStorage.getItem("CoreRedirectParams"),timemodified:parseInt(localStorage.getItem("CoreRedirectTime"),10)};return e.params&&(e.params=JSON.parse(e.params)),e}catch(e){this.logger.error("Error loading redirect data:",e)}return{}},CoreAppProvider.prototype.storeRedirect=function(e,n,t){if(localStorage&&localStorage.setItem)try{localStorage.setItem("CoreRedirectSiteId",e),localStorage.setItem("CoreRedirectState",n),localStorage.setItem("CoreRedirectParams",JSON.stringify(t)),localStorage.setItem("CoreRedirectTime",String(Date.now()))}catch(e){}},CoreAppProvider.prototype.backButtonAction=function(){for(var e=0;e<this.backActions.length&&!(this.backActions[e].priority<1e3);e++)if(this.backActions[e].fn())return;if(this.menuCtrl&&this.menuCtrl.isOpen())this.menuCtrl.close();else{for(;e<this.backActions.length&&!(this.backActions[e].priority<500);e++)if(this.backActions[e].fn())return;if(!this.appCtrl.navPop()){for(;e<this.backActions.length;e++)if(this.backActions[e].fn())return;this.appCtrl.goBack()}}},CoreAppProvider.prototype.registerBackButtonAction=function(e,n){var t=this;void 0===n&&(n=0);var o={fn:e,priority:n};return this.backActions.push(o),this.backActions.sort(function(e,n){return n.priority-e.priority}),function(){var e=t.backActions.indexOf(o);return e>=0&&!!t.backActions.splice(e,1)}},CoreAppProvider.prototype.setStatusBarColor=function(){"string"==typeof r.a.statusbarbgios&&this.platform.is("ios")?(this.statusBar.overlaysWebView(!1),this.statusBar.backgroundColorByHexString(r.a.statusbarbgios),r.a.statusbarlighttextios?this.statusBar.styleLightContent():this.statusBar.styleDefault()):"string"==typeof r.a.statusbarbgandroid&&this.platform.is("android")?(this.statusBar.backgroundColorByHexString(r.a.statusbarbgandroid),r.a.statusbarlighttextandroid?this.statusBar.styleLightContent():this.statusBar.styleDefault()):"string"==typeof r.a.statusbarbg?(this.platform.is("ios")&&this.statusBar.overlaysWebView(!1),this.statusBar.backgroundColorByHexString(r.a.statusbarbg),r.a.statusbarlighttext?this.statusBar.styleLightContent():this.statusBar.styleDefault()):this.platform.is("android")?this.statusBar.styleLightContent():this.statusBar.styleDefault()},CoreAppProvider.prototype.resetStatusBarColor=function(){"string"==typeof r.a.statusbarbgremotetheme&&("string"==typeof r.a.statusbarbgios&&this.platform.is("ios")||"string"==typeof r.a.statusbarbgandroid&&this.platform.is("android")||"string"==typeof r.a.statusbarbg)&&(this.platform.is("ios")&&this.statusBar.overlaysWebView(!1),this.statusBar.backgroundColorByHexString(r.a.statusbarbgremotetheme),r.a.statusbarlighttextremotetheme?this.statusBar.styleLightContent():this.statusBar.styleDefault())},CoreAppProvider.prototype.setForceOffline=function(e){this.forceOffline=!!e},CoreAppProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(151);var o=function(){function CoreTextUtilsProvider(e,n,t,o,r){this.translate=e,this.langProvider=n,this.modalCtrl=t,this.sanitizer=o,this.platform=r,this.DISABLED_FEATURES_COMPAT_REGEXPS=[{old:/\$mmLoginEmailSignup/g,new:"CoreLoginEmailSignup"},{old:/\$mmSideMenuDelegate/g,new:"CoreMainMenuDelegate"},{old:/\$mmCoursesDelegate/g,new:"CoreCourseOptionsDelegate"},{old:/\$mmUserDelegate/g,new:"CoreUserDelegate"},{old:/\$mmCourseDelegate/g,new:"CoreCourseModuleDelegate"},{old:/_mmCourses/g,new:"_CoreCourses"},{old:/_mmaFrontpage/g,new:"_CoreSiteHome"},{old:/_mmaGrades/g,new:"_CoreGrades"},{old:/_mmaCompetency/g,new:"_AddonCompetency"},{old:/_mmaNotifications/g,new:"_AddonNotifications"},{old:/_mmaMessages/g,new:"_AddonMessages"},{old:/_mmaCalendar/g,new:"_AddonCalendar"},{old:/_mmaFiles/g,new:"_AddonFiles"},{old:/_mmaParticipants/g,new:"_CoreUserParticipants"},{old:/_mmaCourseCompletion/g,new:"_AddonCourseCompletion"},{old:/_mmaNotes/g,new:"_AddonNotes"},{old:/_mmaBadges/g,new:"_AddonBadges"},{old:/files_privatefiles/g,new:"AddonFilesPrivateFiles"},{old:/files_sitefiles/g,new:"AddonFilesSiteFiles"},{old:/files_upload/g,new:"AddonFilesUpload"},{old:/_mmaModAssign/g,new:"_AddonModAssign"},{old:/_mmaModBook/g,new:"_AddonModBook"},{old:/_mmaModChat/g,new:"_AddonModChat"},{old:/_mmaModChoice/g,new:"_AddonModChoice"},{old:/_mmaModData/g,new:"_AddonModData"},{old:/_mmaModFeedback/g,new:"_AddonModFeedback"},{old:/_mmaModFolder/g,new:"_AddonModFolder"},{old:/_mmaModForum/g,new:"_AddonModForum"},{old:/_mmaModGlossary/g,new:"_AddonModGlossary"},{old:/_mmaModImscp/g,new:"_AddonModImscp"},{old:/_mmaModLabel/g,new:"_AddonModLabel"},{old:/_mmaModLesson/g,new:"_AddonModLesson"},{old:/_mmaModLti/g,new:"_AddonModLti"},{old:/_mmaModPage/g,new:"_AddonModPage"},{old:/_mmaModQuiz/g,new:"_AddonModQuiz"},{old:/_mmaModResource/g,new:"_AddonModResource"},{old:/_mmaModScorm/g,new:"_AddonModScorm"},{old:/_mmaModSurvey/g,new:"_AddonModSurvey"},{old:/_mmaModUrl/g,new:"_AddonModUrl"},{old:/_mmaModWiki/g,new:"_AddonModWiki"},{old:/_mmaModWorkshop/g,new:"_AddonModWorkshop"},{old:/remoteAddOn_/g,new:"sitePlugin_"}],this.template=document.createElement("template")}return CoreTextUtilsProvider.prototype.addEndingSlash=function(e){return e?"/"!=e.slice(-1)?e+"/":e:""},CoreTextUtilsProvider.prototype.buildAddressURL=function(e){return this.sanitizer.bypassSecurityTrustUrl((this.platform.is("android")?"geo:0,0?q=":"http://maps.google.com?q=")+encodeURIComponent(e))},CoreTextUtilsProvider.prototype.buildMessage=function(e){var n="";return e.forEach(function(e){e&&(n+="<p>"+e+"</p>")}),n},CoreTextUtilsProvider.prototype.buildSeveralParagraphsMessage=function(e){var n=this,t=[];if(e.forEach(function(e){var o=n.getErrorMessageFromError(e);e&&t.push(o)}),t.length<2)return t[0]||"";for(var o=t[0],r=1;r<t.length;r++)o=this.translate.instant("core.twoparagraphs",{p1:o,p2:t[r]});return o},CoreTextUtilsProvider.prototype.bytesToSize=function(e,n){if(void 0===n&&(n=2),void 0===e||null===e||e<0)return this.translate.instant("core.notapplicable");n<0&&(n=2);var t=["core.sizeb","core.sizekb","core.sizemb","core.sizegb","core.sizetb"],o=this.translate.instant(t),r=0;if(e>=1024){for(;e>=1024;)r++,e/=1024;e=Number(Math.round(parseFloat(e+"e+"+n))+"e-"+n)}return this.translate.instant("core.humanreadablesize",{size:e,unit:o[t[r]]})},CoreTextUtilsProvider.prototype.cleanTags=function(e,n){if("string"!=typeof e)return e;if(!e)return"";e=e.replace(/(<([^>]+)>)/gi,"");return e=this.convertToElement(e).textContent,e=this.replaceNewLines(e,n?" ":"<br>")},CoreTextUtilsProvider.prototype.concatenatePaths=function(e,n){if(!e)return n;if(!n)return e;var t=e.slice(-1),o=n.charAt(0);return"/"===t&&"/"===o?e+n.substr(1):"/"!==t&&"/"!==o?e+"/"+n:e+n},CoreTextUtilsProvider.prototype.convertToElement=function(e){return this.template.innerHTML="<div>"+e+"</div>",this.template.content.children[0]},CoreTextUtilsProvider.prototype.countWords=function(e){if(!e||"string"!=typeof e)return 0;var n=["address","article","aside","blockquote","br"," details","dialog","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","ol","p","pre","section","table","ul"];return e=e.replace(/<script[^>]*>([\S\s]*?)<\/script>/gim,""),e=e.replace(/<(\/[ ]*)?([a-zA-Z0-9]+)[^>]*>/gi,function(e,t,o){return n.indexOf(o)>=0?" ":""}),e=this.decodeHTMLEntities(e),(e=e.replace(/_/gi," ")).match(/\S+/gi).length},CoreTextUtilsProvider.prototype.decodeHTML=function(e){return void 0===e||null===e||"number"==typeof e&&isNaN(e)?"":"string"!=typeof e?""+e:e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&nbsp;/g," ")},CoreTextUtilsProvider.prototype.decodeHTMLEntities=function(e){if(e){e=this.convertToElement(e).textContent}return e},CoreTextUtilsProvider.prototype.decodeURI=function(e){try{return decodeURI(e)}catch(e){}return e},CoreTextUtilsProvider.prototype.decodeURIComponent=function(e){try{return decodeURIComponent(e)}catch(e){}return e},CoreTextUtilsProvider.prototype.escapeForRegex=function(e){return e&&"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},CoreTextUtilsProvider.prototype.escapeHTML=function(e){return void 0===e||null===e||"number"==typeof e&&isNaN(e)?"":"string"!=typeof e?""+e:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},CoreTextUtilsProvider.prototype.expandText=function(e,n,t,o,r,i,l,s,a){if(n.length>0){var u={title:e,content:n,component:t,componentId:o,files:r,filter:i,contextLevel:l,instanceId:s,courseId:a};u.isModal=!0;this.modalCtrl.create("CoreViewerTextPage",u).present()}},CoreTextUtilsProvider.prototype.formatHtmlLines=function(e){var n=this.hasHTMLTags(e);return-1==e.indexOf("<p>")&&(e="<p>"+e+"</p>"),n?e:this.replaceNewLines(e,"<br>")},CoreTextUtilsProvider.prototype.formatText=function(e,n,t,o,r){var i=this;return this.treatMultilangTags(e).then(function(e){return n&&(e=i.cleanTags(e,t)),o>0&&(e=i.shortenText(e,o)),r&&(e=i.highlightText(e,r)),e})},CoreTextUtilsProvider.prototype.getErrorMessageFromError=function(e){return"string"==typeof e?e:e&&(e.message||e.error||e.content||e.body)},CoreTextUtilsProvider.prototype.getTextPluginfileUrl=function(e){if(e&&e.length){var n=e[0].url||e[0].fileurl;return n.substr(0,Math.max(n.lastIndexOf("/"),n.lastIndexOf("%2F")))}},CoreTextUtilsProvider.prototype.hasHTMLTags=function(e){return/<[a-z][\s\S]*>/i.test(e)},CoreTextUtilsProvider.prototype.highlightText=function(e,n){if(!e||"string"!=typeof e)return"";if(!n)return e;var t=new RegExp("("+n+")","gi");return e.replace(t,'<span class="matchtext">$1</span>')},CoreTextUtilsProvider.prototype.htmlIsBlank=function(e){return!e||(this.template.innerHTML=e,""==this.template.content.textContent&&null===this.template.content.querySelector("img, object, hr"))},CoreTextUtilsProvider.prototype.hasUnicode=function(e){for(var n=0;n<e.length;n++)if(e.charCodeAt(n)>55295)return!0;return!1},CoreTextUtilsProvider.prototype.hasUnicodeData=function(e){for(var n in e)if("object"==typeof e[n]){if(this.hasUnicodeData(e[n]))return!0}else if("string"==typeof e[n]&&this.hasUnicode(e[n]))return!0;return!1},CoreTextUtilsProvider.prototype.parseJSON=function(e,n,t){try{return JSON.parse(e)}catch(e){t&&t(e)}return void 0!==n?n:e},CoreTextUtilsProvider.prototype.removeEndingSlash=function(e){return e?"/"==e.slice(-1)?e.substr(0,e.length-1):e:""},CoreTextUtilsProvider.prototype.removeSpecialCharactersForFiles=function(e){return e&&"string"==typeof e?e.replace(/[#:\/\?\\]+/g,"_"):""},CoreTextUtilsProvider.prototype.replaceNewLines=function(e,n){return e&&"string"==typeof e?e.replace(/(?:\r\n|\r|\n)/g,n):""},CoreTextUtilsProvider.prototype.replacePluginfileUrls=function(e,n){if(e&&"string"==typeof e){var t=this.getTextPluginfileUrl(n);if(t)return e.replace(/@@PLUGINFILE@@/g,t)}return e},CoreTextUtilsProvider.prototype.restorePluginfileUrls=function(e,n){if(e&&"string"==typeof e){var t=this.getTextPluginfileUrl(n);if(t)return e.replace(new RegExp(this.escapeForRegex(t),"g"),"@@PLUGINFILE@@")}return e},CoreTextUtilsProvider.prototype.roundToDecimals=function(e,n){void 0===n&&(n=2);var t=Math.pow(10,n);return Math.round(e*t)/t},CoreTextUtilsProvider.prototype.s=function(e){return e?this.escapeHTML(e).replace(/&amp;#(\d+|x[0-9a-f]+);/i,"&#$1;"):""},CoreTextUtilsProvider.prototype.shortenText=function(e,n){if(e.length>n){var t=(e=e.substr(0,n)).lastIndexOf(" ");t>0&&(e=e.substr(0,t)),e+="&hellip;"}return e},CoreTextUtilsProvider.prototype.stripUnicode=function(e){for(var n="",t=0;t<e.length;t++)e.charCodeAt(t)<=55295&&(n+=e.charAt(t));return n},CoreTextUtilsProvider.prototype.substrReplace=function(e,n,t,o){return o=void 0!==o?o:e.length,t<0&&(t+=e.length),o<0&&(o=o+e.length-t),[e.slice(0,t),n.substr(0,o),n.slice(o),e.slice(t+o)].join("")},CoreTextUtilsProvider.prototype.treatDisabledFeatures=function(e){if(!e)return"";for(var n=0;n<this.DISABLED_FEATURES_COMPAT_REGEXPS.length;n++){var t=this.DISABLED_FEATURES_COMPAT_REGEXPS[n];e=e.replace(t.old,t.new)}return e},CoreTextUtilsProvider.prototype.treatMultilangTags=function(e){return e&&"string"==typeof e?this.langProvider.getCurrentLanguage().then(function(n){var t=/<(?:lang|span)[^>]+lang="[a-zA-Z0-9_-]+"[^>]*>(.*?)<\/(?:lang|span)>/g,o=new RegExp('<(?:lang|span)[^>]+lang="'+n+'"[^>]*>(.*?)</(?:lang|span)>',"g");if(!e.match(o)){var r=e.match(t);if(!r||!r[0])return e;n=r[0].match(/lang="([a-zA-Z0-9_-]+)"/)[1],o=new RegExp('<(?:lang|span)[^>]+lang="'+n+'"[^>]*>(.*?)</(?:lang|span)>',"g")}return e=e.replace(o,"$1"),e=e.replace(t,"")}):Promise.resolve("")},CoreTextUtilsProvider.prototype.twoDigits=function(e){return e<10?"0"+e:""+e},CoreTextUtilsProvider.prototype.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},CoreTextUtilsProvider.prototype.unserialize=function(e,n){var t=function(e){for(var n=e.length,t=e.length-1;t>=0;t--){var o=e.charCodeAt(t);o>127&&o<=2047?n++:o>2047&&o<=65535&&(n+=2),o>=56320&&o<=57343&&t--}return n-1},o=function(e,t){n&&n(e+t)},r=function(e,n,t){for(var r=2,i=[],l=e.slice(n,n+1);l!==t;)r+n>e.length&&o("Error","Invalid"),i.push(l),l=e.slice(n+(r-1),n+r),r+=1;return[i.length,i.join("")]},i=function(e,n){var l,s,a,u,d,c,p,f,h,m,_,g,v,C,y,P,A=0,b=function(e){return e};switch(n||(n=0),l=e.slice(n,n+1).toLowerCase(),s=n+2,l){case"i":b=function(e){return parseInt(e,10)},f=(h=r(e,s,";"))[1],s+=(A=h[0])+1;break;case"b":b=function(e){return 0!==parseInt(e,10)},f=(h=r(e,s,";"))[1],s+=(A=h[0])+1;break;case"d":b=function(e){return parseFloat(e)},f=(h=r(e,s,";"))[1],s+=(A=h[0])+1;break;case"n":f=null;break;case"s":_=(m=r(e,s,":"))[1],f=(h=function(e,n,o){for(var r,i=[],l=0;l<o;l++)r=e.slice(n+(l-1),n+l),i.push(r),o-=t(r);return[i.length,i.join("")]}(e,(s+=(A=m[0])+2)+1,parseInt(_,10)))[1],s+=(A=h[0])+2,A!==parseInt(_,10)&&A!==f.length&&o("SyntaxError","String length mismatch");break;case"a":f={},u=(a=r(e,s,":"))[1],s+=(A=a[0])+2,c=parseInt(u,10),d=!0;for(var I=0;I<c;I++)v=(C=i(e,s))[2],P=(y=i(e,s+=C[1]))[2],s+=y[1],v!==I&&(d=!1),f[v]=P;if(d){for(p=new Array(c),g=0;g<c;g++)p[g]=f[g];f=p}s+=1;break;default:o("SyntaxError","Unknown / Unhandled data type(s): "+l)}return[l,s-n,b(f)]};return i(e+"",0)[2]},CoreTextUtilsProvider}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(4);var o=t(10),r=t(54),i=t(42),l=(t(353),t(179),function(){function CoreCourseProvider(e,n,t,o,r,i,l,s,a,u,d,c){this.sitesProvider=n,this.eventsProvider=t,this.utils=o,this.timeUtils=r,this.translate=i,this.courseOffline=l,this.appProvider=s,this.courseFormatDelegate=a,this.sitePluginsProvider=u,this.domUtils=d,this.pushNotificationsProvider=c,this.ROOT_CACHE_KEY="mmCourse:",this.COURSE_STATUS_TABLE="course_status",this.siteSchema={name:"CoreCourseProvider",version:1,tables:[{name:this.COURSE_STATUS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"status",type:"TEXT",notNull:!0},{name:"previous",type:"TEXT"},{name:"updated",type:"INTEGER"},{name:"downloadTime",type:"INTEGER"},{name:"previousDownloadTime",type:"INTEGER"}]}]},this.CORE_MODULES=["assign","assignment","book","chat","choice","data","database","date","external-tool","feedback","file","folder","forum","glossary","ims","imscp","label","lesson","lti","page","quiz","resource","scorm","survey","url","wiki","workshop"],this.logger=e.getInstance("CoreCourseProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=CoreCourseProvider,CoreCourseProvider.prototype.canGetCourseBlocks=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isVersionGreaterEqualThan("3.7")&&e.wsAvailable("core_block_get_course_blocks")},CoreCourseProvider.prototype.canRequestStealthModules=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isVersionGreaterEqualThan(["3.4.6","3.5.3"])},CoreCourseProvider.prototype.checkModuleCompletion=function(e,n){var t=this;n&&2===n.tracking&&0===n.state&&this.invalidateSections(e).finally(function(){t.eventsProvider.trigger(o.a.COMPLETION_MODULE_VIEWED,{courseId:e})})},CoreCourseProvider.prototype.clearAllCoursesStatus=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return t.logger.debug("Clear all course status for site "+n.id),n.getDb().deleteRecords(t.COURSE_STATUS_TABLE).then(function(){t.triggerCourseStatusChanged(e.ALL_COURSES_CLEARED,i.a.NOT_DOWNLOADED,n.id)})})},CoreCourseProvider.prototype.currentViewIsCourse=function(e,n){if(e){var t=e.getActive();return t&&"CoreCourseSectionPage"==t.id&&t.data&&t.data.course&&t.data.course.id==n}return!1},CoreCourseProvider.prototype.getActivitiesCompletionStatus=function(e,n,t,o,r,i){var l=this;return void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===i&&(i=!0),this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId(),l.logger.debug("Getting completion status for user "+t+" in course "+e);var s={courseid:e,userid:t},a={cacheKey:l.getActivitiesCompletionCacheKey(e,t)};return o?a.omitExpires=!0:r&&(a.getFromCache=!1,a.emergencyCache=!1),n.read("core_completion_get_activities_completion_status",s,a).then(function(e){return e&&e.statuses?l.utils.arrayToObject(e.statuses,"cmid"):Promise.reject(null)}).then(function(t){return i?l.courseOffline.getCourseManualCompletions(e,n.id).then(function(e){return e.forEach(function(e){if(e&&void 0!==t[e.cmid]){var n=t[e.cmid];1===n.tracking&&(n.state=e.completed,n.offline=!0)}}),t}).catch(function(){return t}):t})})},CoreCourseProvider.prototype.getActivitiesCompletionCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"activitiescompletion:"+e+":"+n},CoreCourseProvider.prototype.getCourseBlocks=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o={courseid:e,returncontents:1},i={cacheKey:t.getCourseBlocksCacheKey(e),updateFrequency:r.a.FREQUENCY_RARELY};return n.read("core_block_get_course_blocks",o,i).then(function(e){return e.blocks||[]})})},CoreCourseProvider.prototype.getCourseBlocksCacheKey=function(e){return this.ROOT_CACHE_KEY+"courseblocks:"+e},CoreCourseProvider.prototype.getCourseStatusData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.COURSE_STATUS_TABLE,{id:e}).then(function(e){return e||Promise.reject(null)})})},CoreCourseProvider.prototype.getCourseStatus=function(e,n){return this.getCourseStatusData(e,n).then(function(e){return e.status||i.a.NOT_DOWNLOADED}).catch(function(){return i.a.NOT_DOWNLOADED})},CoreCourseProvider.prototype.getModule=function(n,t,o,i,l,s,a){var u=this;s=s||this.sitesProvider.getCurrentSiteId();var d=function(e,n,o,i,s){var a={courseid:t,options:[]},c={omitExpires:s,updateFrequency:r.a.FREQUENCY_RARELY};return i&&a.options.push({name:"includestealthmodules",value:1}),o?(a.options.push({name:"modname",value:o}),c.cacheKey=u.getModuleByModNameCacheKey(o)):(a.options.push({name:"cmid",value:n}),c.cacheKey=u.getModuleCacheKey(n)),!s&&l&&(c.getFromCache=!1,c.emergencyCache=!1),e.read("core_course_get_contents",a,c).catch(function(){if(!l&&!u.appProvider.isOnline()){if(i)return d(e,n,o,!1,!0);if(o)return d(e,n,void 0,u.canRequestStealthModules(e),!0)}return Promise.reject(null)})};return(t?Promise.resolve():this.getModuleBasicInfo(n,s).then(function(e){t=e.course})).then(function(){return u.sitesProvider.getSite(s)}).then(function(e){return u.logger.debug("Getting module "+n+" in course "+t),d(e,n,a,u.canRequestStealthModules(e),i)}).catch(function(){var e={omitExpires:i};return!i&&l&&(e.getFromCache=!1,e.emergencyCache=!1),u.getSections(t,!1,!1,e,s)}).then(function(r){for(var i=0;i<r.length;i++){var l=r[i];if(null==o||isNaN(o)||l.id==e.STEALTH_MODULES_SECTION_ID||o==l.id)for(var s=0;s<l.modules.length;s++){var a=l.modules[s];if(a.id==n)return a.course=t,a}}return Promise.reject(null)})},CoreCourseProvider.prototype.getModuleBasicInfo=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o={cmid:e},i={cacheKey:t.getModuleCacheKey(e),updateFrequency:r.a.FREQUENCY_RARELY};return n.read("core_course_get_course_module",o,i).then(function(e){return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e.cm?e.cm:Promise.reject(null)})})},CoreCourseProvider.prototype.getModuleBasicGradeInfo=function(e,n){return this.getModuleBasicInfo(e,n).then(function(e){var n={advancedgrading:e.advancedgrading||!1,grade:e.grade||!1,gradecat:e.gradecat||!1,gradepass:e.gradepass||!1,outcomes:e.outcomes||!1,scale:e.scale||!1};return(!1!==n.grade||!1!==n.advancedgrading||!1!==n.outcomes)&&n})},CoreCourseProvider.prototype.getModuleBasicInfoByInstance=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var i={instance:e,module:n},l={cacheKey:o.getModuleBasicInfoByInstanceCacheKey(e,n),updateFrequency:r.a.FREQUENCY_RARELY};return t.read("core_course_get_course_module_by_instance",i,l).then(function(e){return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e.cm?e.cm:Promise.reject(null)})})},CoreCourseProvider.prototype.getModuleBasicInfoByInstanceCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"moduleByInstance:"+n+":"+e},CoreCourseProvider.prototype.getModuleCacheKey=function(e){return this.ROOT_CACHE_KEY+"module:"+e},CoreCourseProvider.prototype.getModuleByModNameCacheKey=function(e){return this.ROOT_CACHE_KEY+"module:modName:"+e},CoreCourseProvider.prototype.getModuleIconSrc=function(e,n){if(this.CORE_MODULES.indexOf(e)<0){if(n)return n;e="external-tool"}return"assets/img/mod/"+e+".svg"},CoreCourseProvider.prototype.getModuleSectionId=function(e,n){return this.getModuleBasicInfo(e,n).then(function(e){return e.section})},CoreCourseProvider.prototype.getSection=function(e,n,t,o,r){return n<0?Promise.reject("Invalid section ID"):this.getSections(e,t,o,void 0,r).then(function(e){for(var t=0;t<e.length;t++)if(e[t].id==n)return e[t];return Promise.reject("Unkown section")})},CoreCourseProvider.prototype.getSections=function(e,n,t,o,i,l){var s=this;return void 0===l&&(l=!0),this.sitesProvider.getSite(i).then(function(i){(o=o||{}).cacheKey=s.getSectionsCacheKey(e),o.updateFrequency=o.updateFrequency||r.a.FREQUENCY_RARELY;var a={courseid:e,options:[{name:"excludemodules",value:n?1:0},{name:"excludecontents",value:t?1:0}]};return s.canRequestStealthModules(i)&&a.options.push({name:"includestealthmodules",value:l?1:0}),i.read("core_course_get_contents",a,o).catch(function(){return o.omitExpires=!0,a.options.splice(-1,1),i.read("core_course_get_contents",a,o)}).then(function(n){var t=i.getSiteHomeId(),o=!0;return e==t&&(o=i.getStoredConfig("numsections")),void 0!==o&&!o&&n.length>0&&n.pop(),n.length>1&&(n[1].modules=n[1].modules.filter(function(e){return 28!==e.id&&31!==e.id&&32!==e.id})),n})})},CoreCourseProvider.prototype.getSectionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"sections:"+e},CoreCourseProvider.prototype.getSectionsModules=function(e){if(!e||!e.length)return[];var n=[];return e.forEach(function(e){e.modules&&(n=n.concat(e.modules))}),n},CoreCourseProvider.prototype.invalidateCourseBlocks=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCourseBlocksCacheKey(e))})},CoreCourseProvider.prototype.invalidateModule=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r=[];return t&&r.push(n.invalidateWsCacheForKey(o.getModuleByModNameCacheKey(t))),r.push(n.invalidateWsCacheForKey(o.getModuleCacheKey(e))),Promise.all(r)})},CoreCourseProvider.prototype.invalidateModuleByInstance=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getModuleBasicInfoByInstanceCacheKey(e,n))})},CoreCourseProvider.prototype.invalidateSections=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){var r=[],i=n.getSiteHomeId();return t=t||n.getUserId(),r.push(n.invalidateWsCacheForKey(o.getSectionsCacheKey(e))),r.push(n.invalidateWsCacheForKey(o.getActivitiesCompletionCacheKey(e,t))),e==i&&r.push(n.invalidateConfig()),Promise.all(r)})},CoreCourseProvider.prototype.loadModuleContents=function(e,n,t,o,r,i,l){return!r&&e.contents&&e.contents.length?Promise.resolve():this.getModule(e.id,n,t,o,r,i,l).then(function(n){e.contents=n.contents})},CoreCourseProvider.prototype.logView=function(e,n,t,o){var r=this,i={courseid:e};return void 0!==n&&(i.sectionnumber=n),this.sitesProvider.getSite(t).then(function(l){return r.pushNotificationsProvider.logViewEvent(e,o,"course","core_course_view_course",{sectionnumber:n},t),l.write("core_course_view_course",i).then(function(e){if(!e.status)return Promise.reject(null)})})},CoreCourseProvider.prototype.markCompletedManually=function(e,n,t,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.courseOffline.markCompletedManually(e,n,t,o,r)};return!this.appProvider.isOnline()&&t?l():this.markCompletedManuallyOnline(e,n,r).then(function(n){return i.courseOffline.deleteManualCompletion(e,r).catch(function(){}).then(function(){return n})}).catch(function(e){return i.utils.isWebServiceError(e)||!t?Promise.reject(e):l()})},CoreCourseProvider.prototype.markCompletedManuallyOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("core_completion_update_activity_completion_status_manually",{cmid:e,completed:n})})},CoreCourseProvider.prototype.moduleHasView=function(e){return!!e.url},CoreCourseProvider.prototype.openCourse=function(e,n,t){var r=this,i=this.domUtils.showModalLoading();return this.sitePluginsProvider.waitFetchPlugins().then(function(){return r.sitePluginsProvider.sitePluginPromiseExists("format_"+n.format)?r.sitePluginsProvider.sitePluginLoaded("format_"+n.format).then(function(){if(r.sitePluginsProvider.sitePluginsFinishedLoading)return r.courseFormatDelegate.openCourse(e,n,t);var i=r.utils.promiseDefer(),l=r.eventsProvider.on(o.a.SITE_PLUGINS_LOADED,function(){l&&l.off(),r.courseFormatDelegate.openCourse(e,n,t).then(function(e){i.resolve(e)}).catch(function(e){i.reject(e)})});return i.promise}).catch(function(){var e=r.translate.instant("core.courses.errorloadplugins"),n=r.translate.instant("core.courses.reload"),t=r.translate.instant("core.courses.ignore");r.domUtils.showConfirm(e,"",n,t).then(function(){window.location.reload()})}):r.courseFormatDelegate.openCourse(e,n,t)}).finally(function(){i.dismiss()})},CoreCourseProvider.prototype.selectCourseTab=function(e,n){(n=n||{}).name=e||"",this.eventsProvider.trigger(o.a.SELECT_COURSE_TAB,n)},CoreCourseProvider.prototype.setCoursePreviousStatus=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.logger.debug("Set previous status for course "+e+" in site "+n),this.sitesProvider.getSite(n).then(function(o){var r=o.getDb(),l={};return t.getCourseStatusData(e,n).then(function(o){return t.logger.debug("Set previous status '"+o.status+"' for course "+e),l.status=o.previous||i.a.NOT_DOWNLOADED,l.updated=Date.now(),o.status==i.a.DOWNLOADING&&(l.downloadTime=o.previousDownloadTime),r.updateRecords(t.COURSE_STATUS_TABLE,l,{id:e}).then(function(){return t.triggerCourseStatusChanged(e,l.status,n),l.status})})})},CoreCourseProvider.prototype.setCourseStatus=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.logger.debug("Set status '"+n+"' for course "+e+" in site "+t),this.sitesProvider.getSite(t).then(function(r){var l,s;return n==i.a.DOWNLOADING&&(l=o.timeUtils.timestamp()),o.getCourseStatusData(e,t).then(function(e){return void 0===l?(l=e.downloadTime,s=e.previousDownloadTime):s=e.downloadTime,e.status}).catch(function(){}).then(function(t){if(t!=n){var i={id:e,status:n,previous:t,updated:(new Date).getTime(),downloadTime:l,previousDownloadTime:s};return r.getDb().insertRecord(o.COURSE_STATUS_TABLE,i)}}).then(function(){o.triggerCourseStatusChanged(e,n,t)})})},CoreCourseProvider.prototype.translateModuleName=function(e){this.CORE_MODULES.indexOf(e)<0&&(e="external-tool");var n="core.mod_"+e,t=this.translate.instant(n);return t!==n?t:e},CoreCourseProvider.prototype.triggerCourseStatusChanged=function(e,n,t){this.eventsProvider.trigger(o.a.COURSE_STATUS_CHANGED,{courseId:e,status:n},t)},CoreCourseProvider.ALL_SECTIONS_ID=-2,CoreCourseProvider.STEALTH_MODULES_SECTION_ID=-1,CoreCourseProvider.ACCESS_GUEST="courses_access_guest",CoreCourseProvider.ACCESS_DEFAULT="courses_access_default",CoreCourseProvider.ALL_COURSES_CLEARED=-1,CoreCourseProvider.COMPLETION_TRACKING_NONE=0,CoreCourseProvider.COMPLETION_TRACKING_MANUAL=1,CoreCourseProvider.COMPLETION_TRACKING_AUTOMATIC=2,CoreCourseProvider.COMPLETION_INCOMPLETE=0,CoreCourseProvider.COMPLETION_COMPLETE=1,CoreCourseProvider.COMPLETION_COMPLETE_PASS=2,CoreCourseProvider.COMPLETION_COMPLETE_FAIL=3,CoreCourseProvider.COMPONENT="CoreCourse",CoreCourseProvider;var e}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4),t(63);var o=t(42),r=t(117),i=function(){function CoreContentLinksHelperProvider(e,n,t,o,r,i,l,s,a,u,d,c,p,f,h){this.sitesProvider=n,this.loginHelper=t,this.contentLinksDelegate=o,this.appProvider=r,this.domUtils=i,this.urlUtils=l,this.translate=s,this.initDelegate=a,this.textUtils=d,this.sitePluginsProvider=c,this.zone=p,this.utils=f,this.mainMenuProvider=h,this.logger=e.getInstance("CoreContentLinksHelperProvider")}return CoreContentLinksHelperProvider.prototype.canHandleLink=function(e,n,t,o){var r=this;return(o?this.sitesProvider.isStoredRootURL(e,t):Promise.resolve({})).then(function(n){return!!n.site||r.contentLinksDelegate.getActionsFor(e,void 0,t).then(function(e){return!!r.getFirstValidAction(e)})}).catch(function(){return!1})},CoreContentLinksHelperProvider.prototype.getFirstValidAction=function(e){if(e)for(var n=0;n<e.length;n++){var t=e[n];if(t&&t.sites&&t.sites.length)return t}},CoreContentLinksHelperProvider.prototype.goInSite=function(e,n,t,o,r){var i=this;o=o||this.sitesProvider.getCurrentSiteId();var l=this.utils.promiseDefer();return this.zone.run(function(){e&&o==i.sitesProvider.getCurrentSiteId()?r?i.mainMenuProvider.isCurrentMainMenuHandler(n,t).catch(function(){return!1}).then(function(o){o?(i.loginHelper.loadPageInMainMenu(n,t),l.resolve()):e.push(n,t).then(l.resolve,l.reject)}):e.push(n,t).then(l.resolve,l.reject):i.loginHelper.redirect(n,t,o).then(l.resolve,l.reject)}),l.promise},CoreContentLinksHelperProvider.prototype.goToChooseSite=function(e){this.appProvider.getRootNavController().setRoot("CoreContentLinksChooseSitePage",{url:e})},CoreContentLinksHelperProvider.prototype.handleCustomUrl=function(e){var n=this,t=r.a.customurlscheme+"://link";if(-1==e.indexOf(t))return!1;var i,l=this.domUtils.showModalLoading();return e=this.textUtils.decodeURIComponent(e),this.logger.debug("Treating custom URL scheme: "+e),e=e.replace(t+"=",""),(i=this.urlUtils.getUsernameFromUrl(e))&&(e=e.replace(i+"@","")),this.initDelegate.ready().then(function(){return n.sitesProvider.isStoredRootURL(e,i)}).then(function(t){if(t.site)return l.dismiss(),n.handleRootURL(t.site,!1);if(t.siteIds.length>0)return l.dismiss(),n.handleLink(e,i).then(function(e){e||n.domUtils.showErrorModal("core.contentlinks.errornoactions",!0)});var r=n.contentLinksDelegate.getSiteUrl(e),s=e;return r||(r=e,s=void 0),n.sitesProvider.checkSite(r).then(function(e){var t,r=n.loginHelper.isSSOLoginNeeded(e.code),a="CoreLoginCredentialsPage",u={siteUrl:e.siteUrl,username:i,urlToOpen:s,siteConfig:e.config},d=!1;if(l.dismiss(),n.sitesProvider.isLoggedIn()){var c=n.translate.instant("core.contentlinks.confirmurlothersite");t=n.domUtils.showConfirm(c).then(function(){if(!r)return(d=n.sitePluginsProvider.hasSitePluginsLoaded)&&n.appProvider.storeRedirect(o.a.NO_SITE_ID,a,u),n.sitesProvider.logout().catch(function(){})})}else t=Promise.resolve();return t.then(function(){if(r)n.loginHelper.confirmAndOpenBrowserForSSOLogin(e.siteUrl,e.code,e.service,e.config&&e.config.launchurl);else if(!d)return n.loginHelper.goToNoSitePage(void 0,a,u)})}).catch(function(e){n.domUtils.showErrorModalDefault(e,n.translate.instant("core.login.invalidsite"))})}).finally(function(){l.dismiss()}),!0},CoreContentLinksHelperProvider.prototype.handleLink=function(e,n,t,o,r){var i=this;return(o?this.sitesProvider.isStoredRootURL(e,n):Promise.resolve({})).then(function(o){return o.site?(i.handleRootURL(o.site,r),!0):i.contentLinksDelegate.getActionsFor(e,void 0,n).then(function(n){var o=i.getFirstValidAction(n);return!!o&&(i.sitesProvider.isLoggedIn()?1==o.sites.length&&o.sites[0]==i.sitesProvider.getCurrentSiteId()?o.action(o.sites[0],t):i.domUtils.showConfirm(i.translate.instant("core.contentlinks.confirmurlothersite")).then(function(){1==o.sites.length?o.action(o.sites[0],t):i.goToChooseSite(e)}).catch(function(){}):1==o.sites.length?o.action(o.sites[0],t):i.goToChooseSite(e),!0)}).catch(function(){return!1})})},CoreContentLinksHelperProvider.prototype.handleRootURL=function(e,n,t){var o=this.sitesProvider.getCurrentSite();return!o||o.getURL()!=e.getURL()||t&&o.getToken()!=e.getToken()?this.loginHelper.redirect("",{},e.getId()):n?e.openInBrowserWithAutoLogin(e.getURL()):Promise.resolve()},CoreContentLinksHelperProvider}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return a});t(0),t(186),t(11);var o=t(10),r=(t(155),t(7),t(57),t(172),t(5),t(67),t(12),t(25),t(23),t(3),t(42)),i=t(195),l=(t.n(i),this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})}),s=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},a=function(){function CoreFilepoolProvider(e,n,t,o,r,i,l,s,a,u,d,c,p,f,h,m){var _=this;this.appProvider=n,this.fileProvider=t,this.sitesProvider=o,this.wsProvider=r,this.textUtils=i,this.utils=l,this.mimeUtils=s,this.urlUtils=a,this.timeUtils=u,this.eventsProvider=d,this.pluginFileDelegate=f,this.domUtils=h,this.QUEUE_PROCESS_INTERVAL=0,this.FOLDER="filepool",this.WIFI_DOWNLOAD_THRESHOLD=20971520,this.DOWNLOAD_THRESHOLD=2097152,this.QUEUE_RUNNING="CoreFilepool:QUEUE_RUNNING",this.QUEUE_PAUSED="CoreFilepool:QUEUE_PAUSED",this.ERR_QUEUE_IS_EMPTY="CoreFilepoolError:ERR_QUEUE_IS_EMPTY",this.ERR_FS_OR_NETWORK_UNAVAILABLE="CoreFilepoolError:ERR_FS_OR_NETWORK_UNAVAILABLE",this.ERR_QUEUE_ON_PAUSE="CoreFilepoolError:ERR_QUEUE_ON_PAUSE",this.QUEUE_TABLE="filepool_files_queue",this.FILES_TABLE="filepool_files",this.LINKS_TABLE="filepool_files_links",this.PACKAGES_TABLE="filepool_packages",this.appTablesSchema={name:"CoreFilepoolProvider",version:1,tables:[{name:this.QUEUE_TABLE,columns:[{name:"siteId",type:"TEXT"},{name:"fileId",type:"TEXT"},{name:"added",type:"INTEGER"},{name:"priority",type:"INTEGER"},{name:"url",type:"TEXT"},{name:"revision",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"isexternalfile",type:"INTEGER"},{name:"repositorytype",type:"TEXT"},{name:"path",type:"TEXT"},{name:"links",type:"TEXT"}],primaryKeys:["siteId","fileId"]}]},this.siteSchema={name:"CoreFilepoolProvider",version:1,tables:[{name:this.FILES_TABLE,columns:[{name:"fileId",type:"TEXT",primaryKey:!0},{name:"url",type:"TEXT",notNull:!0},{name:"revision",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"stale",type:"INTEGER"},{name:"downloadTime",type:"INTEGER"},{name:"isexternalfile",type:"INTEGER"},{name:"repositorytype",type:"TEXT"},{name:"path",type:"TEXT"},{name:"extension",type:"TEXT"}]},{name:this.LINKS_TABLE,columns:[{name:"fileId",type:"TEXT"},{name:"component",type:"TEXT"},{name:"componentId",type:"TEXT"}],primaryKeys:["fileId","component","componentId"]},{name:this.PACKAGES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"component",type:"TEXT"},{name:"componentId",type:"TEXT"},{name:"status",type:"TEXT"},{name:"previous",type:"TEXT"},{name:"updated",type:"INTEGER"},{name:"downloadTime",type:"INTEGER"},{name:"previousDownloadTime",type:"INTEGER"},{name:"extra",type:"TEXT"}]}]},this.tokenRegex=new RegExp("(\\?|&)token=([A-Za-z0-9]*)"),this.urlAttributes=[this.tokenRegex,new RegExp("(\\?|&)forcedownload=[0-1]"),new RegExp("(\\?|&)preview=[A-Za-z0-9]+"),new RegExp("(\\?|&)offline=[0-1]","g")],this.queueDeferreds={},this.sizeCache={},this.packagesPromises={},this.filePromises={},this.logger=e.getInstance("CoreFilepoolProvider"),this.appDB=this.appProvider.getDB(),this.dbReady=n.createTablesFromSchema(this.appTablesSchema).catch(function(){}),this.sitesProvider.registerSiteSchema(this.siteSchema),c.ready().then(function(){_.checkQueueProcessing(),p.onConnect().subscribe(function(){m.run(function(){_.checkQueueProcessing()})})})}return CoreFilepoolProvider.prototype.addFileLink=function(e,n,t,o){var r=this;return t?(o=this.fixComponentId(o),this.sitesProvider.getSiteDb(e).then(function(e){return e.insertRecord(r.LINKS_TABLE,{fileId:n,component:t,componentId:o||""})})):Promise.reject(null)},CoreFilepoolProvider.prototype.addFileLinkByUrl=function(e,n,t,o){var r=this;return this.fixPluginfileURL(e,n).then(function(n){var i=r.getFileIdByUrl(n.fileurl);return r.addFileLink(e,i,t,o)})},CoreFilepoolProvider.prototype.addFileLinks=function(e,n,t){var o=this,r=[];return t.forEach(function(t){r.push(o.addFileLink(e,n,t.component,t.componentId))}),Promise.all(r)},CoreFilepoolProvider.prototype.addFilesToQueue=function(e,n,t,o){return this.downloadOrPrefetchFiles(e,n,!0,!1,t,o)},CoreFilepoolProvider.prototype.addFileToPool=function(e,n,t){var o=this,r=Object.assign({},t);return r.fileId=n,this.sitesProvider.getSiteDb(e).then(function(e){return e.insertRecord(o.FILES_TABLE,r)})},CoreFilepoolProvider.prototype.addHashToFilename=function(e,n){var t=n.match(/_[a-f0-9]{32}/g);if(t&&t.length){var o=t[t.length-1],r=e.replace(o,"");if("_"+i.Md5.hashAsciiStr("url:"+r)==o)return n}return n+"_"+i.Md5.hashAsciiStr("url:"+e)},CoreFilepoolProvider.prototype.addToQueue=function(e,n,t,o,r,i,a,u,d,c){return void 0===d&&(d={}),l(this,void 0,void 0,function(){return s(this,function(l){switch(l.label){case 0:return[4,this.dbReady];case 1:return l.sent(),this.logger.debug("Adding "+n+" to the queue"),[4,this.appDB.insertRecord(this.QUEUE_TABLE,{siteId:e,fileId:n,url:t,priority:o,revision:r,timemodified:i,path:a,isexternalfile:d.isexternalfile?1:0,repositorytype:d.repositorytype,links:JSON.stringify(c?[c]:[]),added:Date.now()})];case 2:return l.sent(),this.checkQueueProcessing(),this.notifyFileDownloading(e,n),[2,this.getQueuePromise(e,n,!0,u)]}})})},CoreFilepoolProvider.prototype.addToQueueByUrl=function(e,n,t,o,r,i,a,u,d,c,p){return void 0===r&&(r=0),void 0===u&&(u=0),void 0===d&&(d={}),l(this,void 0,void 0,function(){var l,f,h,m=this;return s(this,function(s){switch(s.label){case 0:return[4,this.dbReady];case 1:return s.sent(),this.fileProvider.isAvailable()?[2,this.sitesProvider.getSite(e).then(function(t){return t.canDownloadFiles()?p?{fileurl:n}:m.fixPluginfileURL(e,n):Promise.reject(null)}).then(function(s){n=s.fileurl,r=s.timemodified||r,c=c||m.getRevisionFromUrl(n),l=m.getFileIdByUrl(n);var p={siteId:e,fileId:l};return void 0!==t&&(f={component:t,componentId:m.fixComponentId(o)}),h=m.getQueueDeferred(e,l,!1,a),m.hasFileInQueue(e,l).then(function(t){var o={},s=!1;if(t){if(t.priority<u&&(o.priority=u),c&&t.revision!==c&&(o.revision=c),r&&t.timemodified!==r&&(o.timemodified=r),i&&t.path!==i&&(o.path=i),t.isexternalfile!==d.isexternalfile&&(t.isexternalfile||d.isexternalfile)&&(o.isexternalfile=d.isexternalfile),t.repositorytype!==d.repositorytype&&(t.repositorytype||d.repositorytype)&&(o.repositorytype=d.repositorytype),f){if(t.links&&t.links.length)for(var _ in t.links){var g=t.links[_];if(g.component==f.component&&g.componentId==f.componentId){s=!0;break}}s||(o.links=t.links||[],o.links.push(f),o.links=JSON.stringify(t.links))}return Object.keys(o).length?(m.logger.debug("Updating file "+l+" which is already in queue"),m.appDB.updateRecords(m.QUEUE_TABLE,o,p).then(function(){return m.getQueuePromise(e,l,!0,a)})):(m.logger.debug("File "+l+" already in queue and does not require update"),h?h.promise:m.getQueuePromise(e,l,!0,a))}return m.addToQueue(e,l,n,u,c,r,i,a,d,f)},function(){return m.addToQueue(e,l,n,u,c,r,i,a,d,f)})})]:[2,Promise.reject(null)]}})})},CoreFilepoolProvider.prototype.addToQueueIfNeeded=function(e,n,t,o,r,i,l,s,a){var u=this;void 0===r&&(r=0),void 0===i&&(i=!0),void 0===s&&(s={});var d;if(i){if(void 0!==this.sizeCache[n])d=Promise.resolve(this.sizeCache[n]);else{if(!this.appProvider.isOnline())return Promise.reject(null);d=this.wsProvider.getRemoteFileSize(n)}return d.then(function(i){var d=u.appProvider.isWifi(),c=i<=0;if(c||(u.sizeCache[n]=i),c){if(l&&d)return u.addToQueueByUrl(e,n,t,o,r,void 0,void 0,0,s,a,!0)}else if(u.shouldDownload(i))return u.addToQueueByUrl(e,n,t,o,r,void 0,void 0,0,s,a,!0)})}return this.addToQueueByUrl(e,n,t,o,r,void 0,void 0,0,s,a,!0)},CoreFilepoolProvider.prototype.checkQueueProcessing=function(){this.fileProvider.isAvailable()&&this.appProvider.isOnline()?this.queueState!==this.QUEUE_RUNNING&&(this.queueState=this.QUEUE_RUNNING,this.processQueue()):this.queueState=this.QUEUE_PAUSED},CoreFilepoolProvider.prototype.clearAllPackagesStatus=function(e){var n=this;return this.logger.debug("Clear all packages status for site "+e),this.sitesProvider.getSite(e).then(function(t){return t.getDb().getAllRecords(n.PACKAGES_TABLE).then(function(o){return t.getDb().deleteRecords(n.PACKAGES_TABLE).then(function(){o.forEach(function(t){n.triggerPackageStatusChanged(e,r.a.NOT_DOWNLOADED,t.component,t.componentId)})})})})},CoreFilepoolProvider.prototype.clearFilepool=function(e){var n=this;return this.sitesProvider.getSiteDb(e).then(function(e){return Promise.all([e.deleteRecords(n.FILES_TABLE),e.deleteRecords(n.LINKS_TABLE)])})},CoreFilepoolProvider.prototype.componentHasFiles=function(e,n,t){var o=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.countRecords(o.LINKS_TABLE,{component:n,componentId:t||""}).then(function(e){if(e<=0)return Promise.reject(null)})})},CoreFilepoolProvider.prototype.determinePackagesStatus=function(e,n){return e||(e=r.a.NOT_DOWNLOADABLE),n===r.a.NOT_DOWNLOADED?r.a.NOT_DOWNLOADED:n===r.a.DOWNLOADED&&e===r.a.NOT_DOWNLOADABLE?r.a.DOWNLOADED:n!==r.a.DOWNLOADING||e!==r.a.NOT_DOWNLOADABLE&&e!==r.a.DOWNLOADED?n===r.a.OUTDATED&&e!==r.a.NOT_DOWNLOADED?r.a.OUTDATED:e:r.a.DOWNLOADING},CoreFilepoolProvider.prototype.downloadForPoolByUrl=function(e,n,t,o,r,i){var l=this;void 0===t&&(t={});var s=this.getFileIdByUrl(n),a=this.mimeUtils.guessExtensionFromUrl(n),u=void 0===o,d=o||this.getFilePath(e,s,a);return Promise.resolve(d).then(function(o){if(i&&i.fileId!==s)return l.logger.error("Invalid object to update passed"),Promise.reject(null);var a=l.getFileDownloadId(n,o);return l.filePromises[e]&&l.filePromises[e][a]?l.filePromises[e][a]:(l.filePromises[e]||(l.filePromises[e]={}),l.filePromises[e][a]=l.sitesProvider.getSite(e).then(function(a){if(!a.canDownloadFiles())return Promise.reject(null);var d;return l.wsProvider.downloadFile(n,o,u,r).then(function(t){return d=t,l.pluginFileDelegate.treatDownloadedFile(n,d,e)}).then(function(){var o=i||{};return o.downloadTime=Date.now(),o.stale=0,o.url=n,o.revision=t.revision,o.timemodified=t.timemodified,o.isexternalfile=t.isexternalfile?1:0,o.repositorytype=t.repositorytype,o.path=d.path,o.extension=d.extension,l.addFileToPool(e,s,o).then(function(){return d.toURL()})})}).finally(function(){delete l.filePromises[e][a]}),l.filePromises[e][a])})},CoreFilepoolProvider.prototype.downloadOrPrefetchFiles=function(e,n,t,o,r,i,l){var s=this,a=[];return n.forEach(function(n){var u,d=n.url||n.fileurl,c=n.timemodified,p={isexternalfile:n.isexternalfile,repositorytype:n.repositorytype};l&&(u=n.filename,"/"!==n.filepath&&(u=n.filepath.substr(1)+u),u=s.textUtils.concatenatePaths(l,u)),a.push(t?s.addToQueueByUrl(e,d,r,i,c,u,void 0,0,p):s.downloadUrl(e,d,o,r,i,c,u,void 0,p))}),this.utils.allPromises(a)},CoreFilepoolProvider.prototype.downloadOrPrefetchPackage=function(e,n,t,o,i,l,s,a){var u,d=this,c=this.getPackageId(o,i);return this.packagesPromises[e]&&this.packagesPromises[e][c]?this.packagesPromises[e][c]:(this.packagesPromises[e]||(this.packagesPromises[e]={}),u=this.storePackageStatus(e,r.a.DOWNLOADING,o,i).then(function(){var u=[],c=0;return n.forEach(function(n){var r,l,p,f=n.url||n.fileurl,h={isexternalfile:n.isexternalfile,repositorytype:n.repositorytype},m=0;a&&(p=function(e){e&&e.loaded&&(c+=e.loaded-m,m=e.loaded,a({packageDownload:!0,loaded:c,fileProgress:e}))}),s&&(r=n.filename,"/"!==n.filepath&&(r=n.filepath.substr(1)+r),r=d.textUtils.concatenatePaths(s,r)),l=t?d.addToQueueByUrl(e,f,o,i,n.timemodified,r,void 0,0,h):d.downloadUrl(e,f,!1,o,i,n.timemodified,p,r,h),u.push(l)}),Promise.all(u).then(function(){return d.storePackageStatus(e,r.a.DOWNLOADED,o,i,l)}).catch(function(n){return d.setPackagePreviousStatus(e,o,i).then(function(){return Promise.reject(n)})})}).finally(function(){delete d.packagesPromises[e][c]}),this.packagesPromises[e][c]=u,u)},CoreFilepoolProvider.prototype.downloadPackage=function(e,n,t,o,r,i,l){return this.downloadOrPrefetchPackage(e,n,!1,t,o,r,i,l)},CoreFilepoolProvider.prototype.downloadUrl=function(e,n,t,o,r,i,l,s,a,u){var d=this;void 0===i&&(i=0),void 0===a&&(a={});var c;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,n).then(function(p){return n=p.fileurl,i=p.timemodified||i,a=Object.assign({},a),a.timemodified=i||0,a.revision=u||d.getRevisionFromUrl(n),c=d.getFileIdByUrl(n),d.hasFileInPool(e,c).then(function(o){return void 0===o?(d.notifyFileDownloading(e,c),d.downloadForPoolByUrl(e,n,a,s,l)):d.isFileOutdated(o,a.revision,a.timemodified)&&d.appProvider.isOnline()&&!t?(d.notifyFileDownloading(e,c),d.downloadForPoolByUrl(e,n,a,s,l,o)):(s?d.getInternalUrlByPath(s):d.getInternalUrlById(e,c)).then(function(e){return e},function(){return d.notifyFileDownloading(e,c),d.downloadForPoolByUrl(e,n,a,s,l,o)})},function(){return d.notifyFileDownloading(e,c),d.downloadForPoolByUrl(e,n,a,s,l)}).then(function(n){return void 0!==o&&d.addFileLink(e,c,o,r).catch(function(){}),d.notifyFileDownloaded(e,c),n},function(n){return d.notifyFileDownloadError(e,c),Promise.reject(n)})}):Promise.reject(null)},CoreFilepoolProvider.prototype.extractDownloadableFilesFromHtml=function(e){var n,t=[],o=this.domUtils.convertToElement(e);n=o.querySelectorAll("a, img, audio, video, source, track");for(var r=0;r<n.length;r++){var i=n[r],l="A"===i.tagName?i.href:i.src;l&&this.urlUtils.isDownloadableUrl(l)&&-1==t.indexOf(l)&&t.push(l),"VIDEO"==i.tagName&&i.getAttribute("poster")&&(l=i.getAttribute("poster"))&&this.urlUtils.isDownloadableUrl(l)&&-1==t.indexOf(l)&&t.push(l)}return t=t.concat(this.pluginFileDelegate.getDownloadableFilesFromHTML(o))},CoreFilepoolProvider.prototype.extractDownloadableFilesFromHtmlAsFakeFileObjects=function(e){return this.extractDownloadableFilesFromHtml(e).map(function(e){return{fileurl:e}})},CoreFilepoolProvider.prototype.fillExtensionInFile=function(e,n){var t=this;return void 0!==e.extension?Promise.resolve():this.sitesProvider.getSiteDb(n).then(function(n){var o=t.mimeUtils.getFileExtension(e.path);if(!o)return t.logger.debug("Staled file with no extension "+e.fileId),n.updateRecords(t.FILES_TABLE,{stale:1},{fileId:e.fileId});var r=e.fileId;return e.fileId=t.mimeUtils.removeExtension(r),e.extension=o,n.updateRecords(t.FILES_TABLE,e,{fileId:r}).then(function(){if(e.fileId!=r)return n.updateRecords(t.LINKS_TABLE,{fileId:e.fileId},{fileId:r});t.logger.debug("Removed extesion "+o+" from file "+e.fileId)})})},CoreFilepoolProvider.prototype.fixComponentId=function(e){if("number"==typeof e)return e;var n=parseInt(e,10);return isNaN(n)?void 0===e||null===e?-1:e:n},CoreFilepoolProvider.prototype.fixPluginfileURL=function(e,n,t){var o=this;return void 0===t&&(t=0),this.pluginFileDelegate.getDownloadableFile({fileurl:n,timemodified:t}).then(function(n){return o.sitesProvider.getSite(e).then(function(e){return e.checkAndFixPluginfileURL(n.fileurl)}).then(function(e){return n.fileurl=e,n})})},CoreFilepoolProvider.prototype.getComponentFiles=function(e,n,t){return e.getRecords(this.LINKS_TABLE,{component:n,componentId:t||""})},CoreFilepoolProvider.prototype.getDirectoryUrlByUrl=function(e,n){var t=this;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,n).then(function(n){var o=t.getFileIdByUrl(n.fileurl),r=t.getFilePath(e,o,"");return t.fileProvider.getDir(r).then(function(e){return e.toURL()})}):Promise.reject(null)},CoreFilepoolProvider.prototype.getFileDownloadId=function(e,n){return i.Md5.hashAsciiStr(e+"###"+n)},CoreFilepoolProvider.prototype.getFileEventName=function(e,n){return"CoreFilepoolFile:"+e+":"+n},CoreFilepoolProvider.prototype.getFileEventNameByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var o=t.getFileIdByUrl(n.fileurl);return t.getFileEventName(e,o)})},CoreFilepoolProvider.prototype.getFileIdByUrl=function(e){var n,t=e;return t=t.replace(/\/tokenpluginfile\.php\/[^\/]+\//,"/webservice/pluginfile.php/"),t=this.removeRevisionFromUrl(t),-1!==(t=this.textUtils.decodeHTML(this.textUtils.decodeURIComponent(t))).indexOf("/webservice/pluginfile")&&this.urlAttributes.forEach(function(e){t=t.replace(e,"")}),n=this.guessFilenameFromUrl(t),this.addHashToFilename(t,n)},CoreFilepoolProvider.prototype.getFileLinks=function(e,n){var t=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getRecords(t.LINKS_TABLE,{fileId:n})})},CoreFilepoolProvider.prototype.getFilePath=function(e,n,t){var o=this.getFilepoolFolderPath(e)+"/"+n;return void 0===t?this.hasFileInPool(e,n).then(function(e){return e.extension&&(o+="."+e.extension),o}).catch(function(){return o}):(t&&(o+="."+t),o)},CoreFilepoolProvider.prototype.getFilePathByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var o=t.getFileIdByUrl(n.fileurl);return t.getFilePath(e,o)})},CoreFilepoolProvider.prototype.getFilepoolFolderPath=function(e){return this.fileProvider.getSiteFolder(e)+"/"+this.FOLDER},CoreFilepoolProvider.prototype.getFilesByComponent=function(e,n,t){var o=this;return this.sitesProvider.getSiteDb(e).then(function(e){return o.getComponentFiles(e,n,t).then(function(n){var t=[],r=[];return n.forEach(function(n){t.push(e.getRecord(o.FILES_TABLE,{fileId:n.fileId}).then(function(e){e&&r.push({url:e.url,path:e.path,extension:e.extension,revision:e.revision,timemodified:e.timemodified})}).catch(function(){}))}),Promise.all(t).then(function(){return r})})})},CoreFilepoolProvider.prototype.getFilesSizeByComponent=function(e,n,t){var o=this;return this.getFilesByComponent(e,n,t).then(function(e){var n=[],t=0;return e.forEach(function(e){n.push(o.fileProvider.getFileSize(e.path).then(function(e){t+=e}).catch(function(){}))}),Promise.all(n).then(function(){return t})})},CoreFilepoolProvider.prototype.getFileStateByUrl=function(e,n,t,o,i){var l=this;void 0===t&&(t=0);var s;return this.fixPluginfileURL(e,n,t).then(function(a){return n=a.fileurl,t=a.timemodified||t,i=i||l.getRevisionFromUrl(n),s=l.getFileIdByUrl(n),l.hasFileInQueue(e,s).then(function(){return r.a.DOWNLOADING}).catch(function(){var a=l.mimeUtils.guessExtensionFromUrl(n),u=o||l.getFilePath(e,s,a);return Promise.resolve(u).then(function(o){var a=l.getFileDownloadId(n,o);return l.filePromises[e]&&l.filePromises[e][a]?r.a.DOWNLOADING:l.hasFileInPool(e,s).then(function(e){return l.isFileOutdated(e,i,t)?r.a.OUTDATED:r.a.DOWNLOADED}).catch(function(){return r.a.NOT_DOWNLOADED})})})},function(){return r.a.NOT_DOWNLOADABLE})},CoreFilepoolProvider.prototype.getFileUrlByUrl=function(e,n,t,o,r,i,l,s,a,u){var d=this;void 0===r&&(r="url"),void 0===i&&(i=0),void 0===l&&(l=!0),void 0===a&&(a={});var c,p=function(n){d.addToQueueIfNeeded(e,n,t,o,i,l,s,a,u).catch(function(){})};return this.fixPluginfileURL(e,n,i).then(function(t){return n=t.fileurl,i=t.timemodified||i,u=u||d.getRevisionFromUrl(n),c=d.getFileIdByUrl(n),d.hasFileInPool(e,c).then(function(t){var o;return void 0===t?(p(n),o=n):d.isFileOutdated(t,u,i)&&d.appProvider.isOnline()?(p(n),o=n):o=(o="src"===r?d.getInternalSrcById(e,c):d.getInternalUrlById(e,c)).then(function(e){return e}).catch(function(){return d.logger.debug("File "+c+" not found on disk"),d.removeFileById(e,c),p(n),d.appProvider.isOnline()?n:Promise.reject(null)}),o},function(){return p(n),n})})},CoreFilepoolProvider.prototype.getInternalSrcById=function(e,n){var t=this;return this.fileProvider.isAvailable()?Promise.resolve(this.getFilePath(e,n)).then(function(e){return t.fileProvider.getFile(e).then(function(e){return t.fileProvider.getInternalURL(e)})}):Promise.reject(null)},CoreFilepoolProvider.prototype.getInternalUrlById=function(e,n){var t=this;return this.fileProvider.isAvailable()?Promise.resolve(this.getFilePath(e,n)).then(function(e){return t.fileProvider.getFile(e).then(function(e){return t.appProvider.isDesktop()?e.toInternalURL():e.toURL()})}):Promise.reject(null)},CoreFilepoolProvider.prototype.getInternalUrlByPath=function(e){return this.fileProvider.isAvailable()?this.fileProvider.getFile(e).then(function(e){return e.toURL()}):Promise.reject(null)},CoreFilepoolProvider.prototype.getInternalUrlByUrl=function(e,n){var t=this;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,n).then(function(n){var o=t.getFileIdByUrl(n.fileurl);return t.getInternalUrlById(e,o)}):Promise.reject(null)},CoreFilepoolProvider.prototype.getPackageData=function(e,n,t){var o=this;return t=this.fixComponentId(t),this.sitesProvider.getSite(e).then(function(e){var r=o.getPackageId(n,t);return e.getDb().getRecord(o.PACKAGES_TABLE,{id:r})})},CoreFilepoolProvider.prototype.getPackageDirNameByUrl=function(e){var n,t="";return-1!==(e=this.removeRevisionFromUrl(e)).indexOf("/webservice/pluginfile")&&(this.urlAttributes.forEach(function(n){e=e.replace(n,"")}),(n=this.mimeUtils.guessExtensionFromUrl(e))&&"php"!==n&&(t="."+n)),i.Md5.hashAsciiStr("url:"+e)+t},CoreFilepoolProvider.prototype.getPackageDirPathByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var o=t.getPackageDirNameByUrl(n.fileurl);return t.getFilePath(e,o,"")})},CoreFilepoolProvider.prototype.getPackageDirUrlByUrl=function(e,n){var t=this;return this.fileProvider.isAvailable()?this.fixPluginfileURL(e,n).then(function(n){var o=t.getPackageDirNameByUrl(n.fileurl),r=t.getFilePath(e,o,"");return t.fileProvider.getDir(r).then(function(e){return e.toURL()})}):Promise.reject(null)},CoreFilepoolProvider.prototype.getPackageDownloadPromise=function(e,n,t){var o=this.getPackageId(n,t);if(this.packagesPromises[e]&&this.packagesPromises[e][o])return this.packagesPromises[e][o]},CoreFilepoolProvider.prototype.getPackageExtra=function(e,n,t){return this.getPackageData(e,n,t).then(function(e){return e.extra})},CoreFilepoolProvider.prototype.getPackageId=function(e,n){return i.Md5.hashAsciiStr(e+"#"+this.fixComponentId(n))},CoreFilepoolProvider.prototype.getPackagePreviousStatus=function(e,n,t){return this.getPackageData(e,n,t).then(function(e){return e.previous||r.a.NOT_DOWNLOADED}).catch(function(){return r.a.NOT_DOWNLOADED})},CoreFilepoolProvider.prototype.getPackageStatus=function(e,n,t){return this.getPackageData(e,n,t).then(function(e){return e.status||r.a.NOT_DOWNLOADED}).catch(function(){return r.a.NOT_DOWNLOADED})},CoreFilepoolProvider.prototype.getPluginFileArgs=function(e){if(this.urlUtils.isPluginFileUrl(e)){var n=e.substr(e.indexOf("/pluginfile.php")+16).split("/");if(!(n.length<3))return n}},CoreFilepoolProvider.prototype.getQueueDeferred=function(e,n,t,o){if(void 0===t&&(t=!0),!this.queueDeferreds[e]){if(!t)return;this.queueDeferreds[e]={}}if(!this.queueDeferreds[e][n]){if(!t)return;this.queueDeferreds[e][n]=this.utils.promiseDefer()}return o&&(this.queueDeferreds[e][n].onProgress=o),this.queueDeferreds[e][n]},CoreFilepoolProvider.prototype.getQueueOnProgress=function(e,n){var t=this.getQueueDeferred(e,n,!1);if(t)return t.onProgress},CoreFilepoolProvider.prototype.getQueuePromise=function(e,n,t,o){return void 0===t&&(t=!0),this.getQueueDeferred(e,n,t,o).promise},CoreFilepoolProvider.prototype.getRevisionFromFileList=function(e){var n=this,t=0;return e.forEach(function(e){if(e.url||e.fileurl){var o=n.getRevisionFromUrl(e.url||e.fileurl);o>t&&(t=o)}}),t},CoreFilepoolProvider.prototype.getRevisionFromUrl=function(e){var n=this.getPluginFileArgs(e);if(!n)return 0;var t=this.pluginFileDelegate.getComponentRevisionRegExp(n);if(!t)return 0;var o=e.match(t);return o&&void 0!==o[1]?parseInt(o[1],10):0},CoreFilepoolProvider.prototype.getSrcByUrl=function(e,n,t,o,r,i,l,s,a){return void 0===r&&(r=0),void 0===i&&(i=!0),void 0===s&&(s={}),this.getFileUrlByUrl(e,n,t,o,"src",r,i,l,s,a)},CoreFilepoolProvider.prototype.getTimemodifiedFromFileList=function(e){var n=0;return e.forEach(function(e){e.timemodified>n&&(n=e.timemodified)}),n},CoreFilepoolProvider.prototype.getUrlByUrl=function(e,n,t,o,r,i,l,s,a){return void 0===r&&(r=0),void 0===i&&(i=!0),void 0===s&&(s={}),this.getFileUrlByUrl(e,n,t,o,"url",r,i,l,s,a)},CoreFilepoolProvider.prototype.guessFilenameFromUrl=function(e){var n="";if(-1!==e.indexOf("/webservice/pluginfile")){var t=this.urlUtils.extractUrlParams(e);n=t.file?t.file.substr(t.file.lastIndexOf("/")+1):this.urlUtils.getLastFileWithoutParams(e)}else if(this.urlUtils.isGravatarUrl(e))n="gravatar_"+this.urlUtils.getLastFileWithoutParams(e);else if(this.urlUtils.isThemeImageUrl(e)){var o=e.match(/\/core\/([^\/]*)\//);o&&o[1]&&(n=o[1]),n="default_"+n+"_"+this.urlUtils.getLastFileWithoutParams(e)}else n=this.urlUtils.getLastFileWithoutParams(e);var r,i=n.indexOf("#");return-1!=i&&((r=n.split("#")).shift(),n=n.substr(0,i)),n=this.mimeUtils.removeExtension(n),r&&(n+="_"+r.join("_")),this.textUtils.removeSpecialCharactersForFiles(n)},CoreFilepoolProvider.prototype.hasFileInPool=function(e,n){var t=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.getRecord(t.FILES_TABLE,{fileId:n}).then(function(e){return void 0===e?Promise.reject(null):e})})},CoreFilepoolProvider.prototype.hasFileInQueue=function(e,n){return l(this,void 0,void 0,function(){var t;return s(this,function(o){switch(o.label){case 0:return[4,this.dbReady];case 1:return o.sent(),[4,this.appDB.getRecord(this.QUEUE_TABLE,{siteId:e,fileId:n})];case 2:if(void 0===(t=o.sent()))throw null;return t.links=this.textUtils.parseJSON(t.links,[]),[2,t]}})})},CoreFilepoolProvider.prototype.invalidateAllFiles=function(e,n){var t=this;return void 0===n&&(n=!0),this.sitesProvider.getSiteDb(e).then(function(e){var o,r;return n&&(o="isexternalfile = ? OR (revision < ? AND timemodified = ?)",r=[0,1,0]),e.updateRecordsWhere(t.FILES_TABLE,{stale:1},o,r)})},CoreFilepoolProvider.prototype.invalidateFileByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var o=t.getFileIdByUrl(n.fileurl);return t.sitesProvider.getSiteDb(e).then(function(e){return e.updateRecords(t.FILES_TABLE,{stale:1},{fileId:o})})})},CoreFilepoolProvider.prototype.invalidateFilesByComponent=function(e,n,t,o){var r=this;return void 0===o&&(o=!0),this.sitesProvider.getSiteDb(e).then(function(e){return r.getComponentFiles(e,n,t).then(function(n){var t=n.map(function(e){return e.fileId}),i=e.getInOrEqual(t);return i[0]="fileId "+i[0],o&&(i[0]+=" AND (isexternalfile = ? OR (revision < ? AND timemodified = ?))",i[1]=i[1].concat([0,1,0])),e.updateRecordsWhere(r.FILES_TABLE,{stale:1},i[0],i[1])})})},CoreFilepoolProvider.prototype.isFileDownloadable=function(e,n,t,o,i){return void 0===t&&(t=0),l(this,void 0,void 0,function(){var l;return s(this,function(s){switch(s.label){case 0:return[4,this.getFileStateByUrl(e,n,t,o,i)];case 1:return l=s.sent(),[2,l!=r.a.NOT_DOWNLOADABLE]}})})},CoreFilepoolProvider.prototype.isFileDownloadingByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var o=t.getFileIdByUrl(n.fileurl);return t.hasFileInQueue(e,o)})},CoreFilepoolProvider.prototype.isFileOutdated=function(e,n,t){return!!e.stale||n>e.revision||t>e.timemodified},CoreFilepoolProvider.prototype.isFileUpdateUnknown=function(e){return!!e.isexternalfile||e.revision<1&&!e.timemodified},CoreFilepoolProvider.prototype.notifyFileDeleted=function(e,n){this.eventsProvider.trigger(this.getFileEventName(e,n),{action:"deleted"})},CoreFilepoolProvider.prototype.notifyFileDownloaded=function(e,n){this.eventsProvider.trigger(this.getFileEventName(e,n),{action:"download",success:!0})},CoreFilepoolProvider.prototype.notifyFileDownloadError=function(e,n){this.eventsProvider.trigger(this.getFileEventName(e,n),{action:"download",success:!1})},CoreFilepoolProvider.prototype.notifyFileDownloading=function(e,n){this.eventsProvider.trigger(this.getFileEventName(e,n),{action:"downloading"})},CoreFilepoolProvider.prototype.notifyFileOutdated=function(e,n){this.eventsProvider.trigger(this.getFileEventName(e,n),{action:"outdated"})},CoreFilepoolProvider.prototype.prefetchPackage=function(e,n,t,o,r,i,l){return this.downloadOrPrefetchPackage(e,n,!0,t,o,r,i,l)},CoreFilepoolProvider.prototype.processQueue=function(){var e=this;(this.queueState!==this.QUEUE_RUNNING?Promise.reject(this.ERR_QUEUE_ON_PAUSE):this.fileProvider.isAvailable()&&this.appProvider.isOnline()?this.processImportantQueueItem():Promise.reject(this.ERR_FS_OR_NETWORK_UNAVAILABLE)).then(function(){setTimeout(function(){e.processQueue()},e.QUEUE_PROCESS_INTERVAL)},function(n){n===e.ERR_FS_OR_NETWORK_UNAVAILABLE?e.logger.debug("Filesysem or network unavailable, pausing queue processing."):n===e.ERR_QUEUE_IS_EMPTY&&e.logger.debug("Queue is empty, pausing queue processing."),e.queueState=e.QUEUE_PAUSED})},CoreFilepoolProvider.prototype.processImportantQueueItem=function(){return l(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.appDB.getRecords(this.QUEUE_TABLE,void 0,"priority DESC, added ASC",void 0,0,1)];case 3:return e=t.sent(),[3,5];case 4:throw t.sent(),this.ERR_QUEUE_IS_EMPTY;case 5:if(!(n=e.pop()))throw this.ERR_QUEUE_IS_EMPTY;return n.links=this.textUtils.parseJSON(n.links,[]),[2,this.processQueueItem(n)]}})})},CoreFilepoolProvider.prototype.processQueueItem=function(e){var n=this,t=e.siteId,o=e.fileId,r=e.url,i={revision:e.revision||void 0,timemodified:e.timemodified||void 0,isexternalfile:e.isexternalfile||void 0,repositorytype:e.repositorytype||void 0},l=e.path||void 0,s=e.links||[];return this.logger.debug("Processing queue item: "+t+", "+o),this.hasFileInPool(t,o).catch(function(){}).then(function(e){if(e&&!i.isexternalfile&&!n.isFileOutdated(e,i.revision,i.timemodified))return n.logger.debug("Queued file already in store, ignoring..."),n.addFileLinks(t,o,s).catch(function(){}),n.removeFromQueue(t,o).catch(function(){}).finally(function(){n.treatQueueDeferred(t,o,!0)}),void n.notifyFileDownloaded(t,o);var a=n.getQueueOnProgress(t,o);return n.downloadForPoolByUrl(t,r,i,l,a,e).then(function(){return n.addFileLinks(t,o,s).catch(function(){}),n.treatQueueDeferred(t,o,!0),n.notifyFileDownloaded(t,o),n.removeFromQueue(t,o).catch(function(){})},function(e){var i=!1;e&&e.source===r?1===e.code?i=!0:2===e.code?i=!0:3===e.code?i=!0:4===e.code||(i=!0):i=!0;var l=null;return e instanceof FileTransferError&&e.exception&&e.exception.includes("EDQUOT")&&(l="core.course.insufficientavailablequota"),i?(n.logger.debug("Item dropped from queue due to error: "+r,e),n.removeFromQueue(t,o).catch(function(){}).then(function(){n.treatQueueDeferred(t,o,!1,l),n.notifyFileDownloadError(t,o)})):(n.treatQueueDeferred(t,o,!1,l),n.notifyFileDownloadError(t,o),Promise.reject(e))})})},CoreFilepoolProvider.prototype.removeFromQueue=function(e,n){return l(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[2,this.appDB.deleteRecords(this.QUEUE_TABLE,{siteId:e,fileId:n})]}})})},CoreFilepoolProvider.prototype.removeFileById=function(e,n){var t=this;return this.sitesProvider.getSiteDb(e).then(function(o){var r,i=t.getFilepoolFolderPath(e)+"/"+n;return t.hasFileInPool(e,n).then(function(e){return r=e.url,e.extension&&(i+="."+e.extension),i}).catch(function(){return i}).then(function(i){var l=[];return l.push(o.deleteRecords(t.FILES_TABLE,{fileId:n})),l.push(o.deleteRecords(t.LINKS_TABLE,{fileId:n})),t.fileProvider.isAvailable()&&l.push(t.fileProvider.removeFile(i).catch(function(e){if(!e||1!=e.code)return Promise.reject(e)})),Promise.all(l).then(function(){return t.notifyFileDeleted(e,n),t.pluginFileDelegate.fileDeleted(r,i,e).catch(function(e){})})})})},CoreFilepoolProvider.prototype.removeFilesByComponent=function(e,n,t){var o=this;return this.sitesProvider.getSiteDb(e).then(function(e){return o.getComponentFiles(e,n,t)}).then(function(n){return Promise.all(n.map(function(n){return o.removeFileById(e,n.fileId)}))})},CoreFilepoolProvider.prototype.removeFileByUrl=function(e,n){var t=this;return this.fixPluginfileURL(e,n).then(function(n){var o=t.getFileIdByUrl(n.fileurl);return t.removeFileById(e,o)})},CoreFilepoolProvider.prototype.removeRevisionFromUrl=function(e){var n=this.getPluginFileArgs(e);return n?this.pluginFileDelegate.removeRevisionFromUrl(e,n):e},CoreFilepoolProvider.prototype.setPackagePreviousStatus=function(e,n,t){var o=this;return t=this.fixComponentId(t),this.logger.debug("Set previous status for package "+n+" "+t),this.sitesProvider.getSite(e).then(function(e){var i=o.getPackageId(n,t);return e.getDb().getRecord(o.PACKAGES_TABLE,{id:i}).then(function(l){var s={};return l.status==r.a.DOWNLOADING&&(s.downloadTime=l.previousDownloadTime),s.status=l.previous||r.a.NOT_DOWNLOADED,s.updated=Date.now(),o.logger.debug("Set previous status '"+l.status+"' for package "+n+" "+t),e.getDb().updateRecords(o.PACKAGES_TABLE,s,{id:i}).then(function(){return o.triggerPackageStatusChanged(e.id,s.status,n,t),s.status})})})},CoreFilepoolProvider.prototype.shouldDownload=function(e){return e<=this.DOWNLOAD_THRESHOLD||this.appProvider.isWifi()&&e<=this.WIFI_DOWNLOAD_THRESHOLD},CoreFilepoolProvider.prototype.shouldDownloadBeforeOpen=function(e,n){return n>=0&&n<=this.DOWNLOAD_THRESHOLD?Promise.resolve():this.appProvider.isDesktop()?Promise.resolve():this.utils.getMimeTypeFromUrl(e).then(function(e){if(-1!=e.indexOf("video")||-1!=e.indexOf("audio"))return Promise.reject(null)})},CoreFilepoolProvider.prototype.storePackageStatus=function(e,n,t,o,i){var l=this;return this.logger.debug("Set status '"+n+"' for package "+t+" "+o),o=this.fixComponentId(o),this.sitesProvider.getSite(e).then(function(s){var a,u,d=l.getPackageId(t,o);return n==r.a.DOWNLOADING&&(a=l.timeUtils.timestamp()),s.getDb().getRecord(l.PACKAGES_TABLE,{id:d}).then(function(e){return void 0!==i&&null!==i||(i=e.extra),void 0===a?(a=e.downloadTime,u=e.previousDownloadTime):u=e.downloadTime,e.status}).catch(function(){}).then(function(r){var c={id:d,component:t,componentId:o,status:n,previous:r,updated:Date.now(),downloadTime:a,previousDownloadTime:u,extra:i};return(r===n?Promise.resolve():s.getDb().insertRecord(l.PACKAGES_TABLE,c)).then(function(){l.triggerPackageStatusChanged(e,n,t,o)})})})},CoreFilepoolProvider.prototype.treatCSSCode=function(e,n,t,o,r,i){var l,s=this,a=this.domUtils.extractUrlsFromCSS(t),u=[],d=!1;return u.push(this.getFilePathByUrl(e,n).then(function(e){l=e})),a.forEach(function(n){0==n.indexOf("http")&&u.push(s.downloadUrl(e,n,!1,o,r,0,void 0,void 0,void 0,i).then(function(e){e!=n&&(t=t.replace(new RegExp(s.textUtils.escapeForRegex(n),"g"),e),d=!0)}).catch(function(e){s.logger.warn("Error treating file ",n,e)}))}),Promise.all(u).then(function(){if(d)return s.fileProvider.writeFile(l,t)}).then(function(){return t})},CoreFilepoolProvider.prototype.treatQueueDeferred=function(e,n,t,o){this.queueDeferreds[e]&&this.queueDeferreds[e][n]&&(t?this.queueDeferreds[e][n].resolve():this.queueDeferreds[e][n].reject(o),delete this.queueDeferreds[e][n])},CoreFilepoolProvider.prototype.triggerPackageStatusChanged=function(e,n,t,r){var i={component:t,componentId:this.fixComponentId(r),status:n};this.eventsProvider.trigger(o.a.PACKAGE_STATUS_CHANGED,i,e)},CoreFilepoolProvider.prototype.updatePackageDownloadTime=function(e,n,t){var o=this;return t=this.fixComponentId(t),this.sitesProvider.getSite(e).then(function(e){var r=o.getPackageId(n,t);return e.getDb().updateRecords(o.PACKAGES_TABLE,{downloadTime:o.timeUtils.timestamp()},{id:r})})},CoreFilepoolProvider}()},,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(151);var o=function(){function CoreUrlUtilsProvider(e,n){this.langProvider=e,this.textUtils=n}return CoreUrlUtilsProvider.prototype.addOrRemoveWWW=function(e){return e&&(e=e.match(/http(s)?:\/\/www\./)?e.replace("www.",""):(e=e.replace("https://","https://www.")).replace("http://","http://www.")),e},CoreUrlUtilsProvider.prototype.addParamsToUrl=function(e,n,t,o){var r=-1!=e.indexOf("?")?"&":"?";for(var i in n){var l=n[i];o&&"boolean"==typeof l&&(l=l?1:0),"object"!=typeof l&&(e+=r+i+"="+l,r="&")}return t&&(e+="#"+t),e},CoreUrlUtilsProvider.prototype.buildLink=function(e,n){return'<a href="'+e+'">'+n+"</a>"},CoreUrlUtilsProvider.prototype.canUseTokenPluginFile=function(e,n,t){return t&&!e.match(/[\&?]file=/)&&(0===e.indexOf(this.textUtils.concatenatePaths(n,"pluginfile.php"))||0===e.indexOf(this.textUtils.concatenatePaths(n,"webservice/pluginfile.php")))},CoreUrlUtilsProvider.prototype.extractUrlParams=function(e){var n,t=this,o={},r=e.split("#"),i=r[0].split("?");return i.length>2&&(i.splice(0,2),n="?"+i.join("?"),r[0]=r[0].replace(n,"@@@SUBPARAMS@@@")),r[0].replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(e,r,i){return o[r]=void 0!==i?t.textUtils.decodeURIComponent(i):"",n&&(o[r]=o[r].replace("@@@SUBPARAMS@@@",n)),e}),r.length>1&&(r.shift(),o.urlHash=r.join("#")),o},CoreUrlUtilsProvider.prototype.fixPluginfileURL=function(e,n,t,o){if(!e)return"";e=e.replace(/&amp;/g,"&");var r=o&&this.canUseTokenPluginFile(e,t,o);return(r||-1==e.indexOf("token="))&&this.isPluginFileUrl(e)&&0===e.indexOf(this.textUtils.addEndingSlash(t))&&this.isPluginFileUrl(e)&&0===e.indexOf(this.textUtils.addEndingSlash(t))?r?e=e.replace(/(\/webservice)?\/pluginfile\.php/,"/tokenpluginfile.php/"+o):(e.match(/\?[^=]+=/)?e+="&":e+="?",0===(e+="token="+n+"&offline=1").indexOf(this.textUtils.concatenatePaths(t,"pluginfile.php"))&&(e=e.replace("/pluginfile","/webservice/pluginfile")),e):e},CoreUrlUtilsProvider.prototype.formatURL=function(e){return e=e.trim(),/^http(s)?\:\/\/.*/i.test(e)||(e="https://"+e),e=e.replace(/^http/i,"http"),e=e.replace(/^https/i,"https"),e=e.replace(/\/$/,"")},CoreUrlUtilsProvider.prototype.getDocsUrl=function(e,n){void 0===n&&(n="Mobile_app");var t="https://docs.moodle.org/en/"+n;if(void 0!==e){var o=e.substr(0,3).replace(".","");parseInt(o)>=24&&(t=t.replace("https://docs.moodle.org/","https://docs.moodle.org/"+o+"/"))}return this.langProvider.getCurrentLanguage().then(function(e){return t.replace("/en/","/"+e+"/")}).catch(function(){return t})},CoreUrlUtilsProvider.prototype.getYoutubeEmbedUrl=function(e){if(e){var n,t={},o=(e=this.textUtils.decodeHTML(e)).match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);if(o&&11===o[2].length&&(n=o[2]),n)return(o=e.match(/[?&]list=([^#\&\?]+)/))&&o[1]&&(t.list=o[1]),(o=e.match(/[?&]start=(\d+)/))&&o[1]?t.start=parseInt(o[1],10):(o=e.match(/[?&]t=(\d+h)?(\d+m)?(\d+s)?/))&&(t.start=(o[1]?3600*parseInt(o[1],10):0)+(o[2]?60*parseInt(o[2],10):0)+(o[3]?parseInt(o[3],10):0)),this.addParamsToUrl("https://www.youtube.com/embed/"+n,t)}},CoreUrlUtilsProvider.prototype.getLastFileWithoutParams=function(e){var n=e.substr(e.lastIndexOf("/")+1);return-1!=n.indexOf("?")&&(n=n.substr(0,n.indexOf("?"))),n},CoreUrlUtilsProvider.prototype.getUrlProtocol=function(e){if(e){var n=e.match(/^([^\/:\.\?]*):\/\//);return n&&n[1]?n[1]:void 0}},CoreUrlUtilsProvider.prototype.getUrlScheme=function(e){if(e){var n=e.match(/^([a-z][a-z0-9+\-.]*):/);return n&&n[1]?n[1]:void 0}},CoreUrlUtilsProvider.prototype.getUsernameFromUrl=function(e){if(e.indexOf("@")>-1){var n=e.replace(/^[^?@\/]*:\/\//,"").match(/[^@]*/);if(n&&n.length&&!n[0].match(/[\/|?]/))return n[0]}},CoreUrlUtilsProvider.prototype.isAbsoluteURL=function(e){return/^[^:]{2,}:\/\//i.test(e)||/^(tel:|mailto:|geo:)/.test(e)},CoreUrlUtilsProvider.prototype.isDownloadableUrl=function(e){return this.isPluginFileUrl(e)||this.isThemeImageUrl(e)||this.isGravatarUrl(e)},CoreUrlUtilsProvider.prototype.isGravatarUrl=function(e){return e&&-1!==e.indexOf("gravatar.com/avatar")},CoreUrlUtilsProvider.prototype.isHttpURL=function(e){return/^https?\:\/\/.+/i.test(e)},CoreUrlUtilsProvider.prototype.isPluginFileUrl=function(e){return e&&-1!==e.indexOf("/pluginfile.php")},CoreUrlUtilsProvider.prototype.isThemeImageUrl=function(e){return e&&-1!==e.indexOf("/theme/image.php")},CoreUrlUtilsProvider.prototype.removeProtocolAndWWW=function(e){return e=e.replace(/.*?:\/\//g,""),e=e.replace(/^www./,"")},CoreUrlUtilsProvider.prototype.removeUrlParams=function(e){var n=e.match(/^[^\?]+/);return n&&n[0]},CoreUrlUtilsProvider.prototype.unfixPluginfileURL=function(e,n){return e?(e=e.replace(/&amp;/g,"&"),n&&0!==e.indexOf(this.textUtils.addEndingSlash(n))?e:((e=e.replace(/\/webservice\/pluginfile\.php\//,"/pluginfile.php/")).replace(/([?&])token=[^&]*&?/,"$1"),e)):""},CoreUrlUtilsProvider}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var o=t(15),r=(t.n(o),t(42)),i=function(){function CoreTimeUtilsProvider(e){this.translate=e,this.FORMAT_REPLACEMENTS={"%a":"ddd","%A":"dddd","%d":"DD","%e":"D","%j":"DDDD","%u":"E","%w":"e","%U":"ww","%V":"WW","%W":"ww","%b":"MMM","%B":"MMMM","%h":"MMM","%m":"MM","%C":"","%g":"GG","%G":"GGGG","%y":"YY","%Y":"YYYY","%H":"HH","%k":"H","%I":"hh","%l":"h","%M":"mm","%p":"A","%P":"a","%r":"hh:mm:ss A","%R":"HH:mm","%S":"ss","%T":"HH:mm:ss","%X":"LTS","%z":"ZZ","%Z":"ZZ","%c":"LLLL","%D":"MM/DD/YY","%F":"YYYY-MM-DD","%s":"X","%x":"L","%n":"\n","%t":"\t","%%":"%"}}return CoreTimeUtilsProvider.prototype.convertPHPToMoment=function(e){if("string"!=typeof e)return"";for(var n="",t=!1,o=0;o<e.length;o++){var r=e[o];"%"==r?(r+=e[++o]||"",t&&(t=!1,n+="]"),n+=void 0!==this.FORMAT_REPLACEMENTS[r]?this.FORMAT_REPLACEMENTS[r]:r):(t||(t=!0,n+="["),n+=r)}return t&&(n+="]"),n},CoreTimeUtilsProvider.prototype.fixFormatForDatetime=function(e){if(!e)return"";var n=e.replace(/[\[\]]/g,"");return-1!=n.indexOf("A")&&(n=(n=n.replace(/ ?A/g,"")).replace(/h/g,"H")),n},CoreTimeUtilsProvider.prototype.formatTime=function(e){var n,t,o,i,l,s,a;a=(n=Math.abs(e))-(t=Math.floor(n/r.a.SECONDS_YEAR))*r.a.SECONDS_YEAR,a=n-(o=Math.floor(a/r.a.SECONDS_DAY))*r.a.SECONDS_DAY,a-=(i=Math.floor(a/r.a.SECONDS_HOUR))*r.a.SECONDS_HOUR,l=Math.floor(a/r.a.SECONDS_MINUTE);var u=this.translate.instant("core."+(1==(s=a-l*r.a.SECONDS_MINUTE)?"sec":"secs")),d=this.translate.instant("core."+(1==l?"min":"mins")),c=this.translate.instant("core."+(1==i?"hour":"hours")),p=this.translate.instant("core."+(1==o?"day":"days")),f=this.translate.instant("core."+(1==t?"year":"years")),h="",m="",_="",g="",v="";return t&&(h=t+" "+f),o&&(m=o+" "+p),i&&(_=i+" "+c),l&&(g=l+" "+d),s&&(v=s+" "+u),t?h+" "+m:o?m+" "+_:i?_+" "+g:l?g+" "+v:s?v:this.translate.instant("core.now")},CoreTimeUtilsProvider.prototype.formatDuration=function(e,n){n=n||5;var t=o.duration(e,"seconds"),r="";return n&&t.years()>0&&(r+=" "+o.duration(t.years(),"years").humanize(),n--),n&&t.months()>0&&(r+=" "+o.duration(t.months(),"months").humanize(),n--),n&&t.days()>0&&(r+=" "+o.duration(t.days(),"days").humanize(),n--),n&&t.hours()>0&&(r+=" "+o.duration(t.hours(),"hours").humanize(),n--),n&&t.minutes()>0&&(r+=" "+o.duration(t.minutes(),"minutes").humanize(),n--),r.trim()},CoreTimeUtilsProvider.prototype.readableTimestamp=function(){return o(Date.now()).format("YYYYMMDDHHmmSS")},CoreTimeUtilsProvider.prototype.timestamp=function(){return Math.round(Date.now()/1e3)},CoreTimeUtilsProvider.prototype.userDate=function(e,n,t,r,i){return void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===i&&(i=!0),n=this.translate.instant(n||"core.strftimedaydatetime"),r&&(n=n.replace(/%d/g,"%e")),i&&(n=n.replace("%I","%l")),t&&(n=this.convertPHPToMoment(n)),o(e).format(n)},CoreTimeUtilsProvider.prototype.toDatetimeFormat=function(e){return e=e||Date.now(),this.userDate(e,"YYYY-MM-DDTHH:mm:ss.SSS",!1)+"Z"},CoreTimeUtilsProvider.prototype.convertToTimestamp=function(e){return"string"==typeof e&&"Z"==e.slice(-1)?o(e).unix()-60*o().utcOffset():o(e).unix()},CoreTimeUtilsProvider.prototype.getLocalizedDateFormat=function(e){return o.localeData().longDateFormat(e)},CoreTimeUtilsProvider.prototype.getMidnightForTimestamp=function(e){return e?o(1e3*e).startOf("day").unix():o().startOf("day").unix()},CoreTimeUtilsProvider}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(95),t(378),t(320),t(115),t(327),t(79),t(84),t(569),t(570),t(444),t(1582),t(1583),t(202),t(88),t(200),t(1550),t(1555),t(1556),t(571),t(395),t(318),t(734),t(1584),t(273),t(183),t(492),t(565);var o=function(){return function CoreComponentsModule(){}}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),t(4),function(){function CoreSplitViewComponent(e,n,t,o,r){var i=this;this.masterNav=e,this.when="md",this.masterPageName="",this.masterPageIndex=0,this.loadDetailPage=!1,this.masterCanLeaveOverridden=!1,this.ignoreSplitChanged=!1,this.detailPage=null,this.element=n.nativeElement,this.audioCaptureSubscription=t.onAudioCapture.subscribe(function(e){i.ignoreSplitChanged=e}),this.languageChangedSubscription=r.onLangChange.subscribe(function(e){setTimeout(function(){i.side=o.isRTL?"right":"left",i.menu.setElementAttribute("side",i.side)})})}return CoreSplitViewComponent.prototype.ngOnInit=function(){this.masterPageName=this.masterNav.getActive().component.name,this.masterPageIndex=this.masterNav.indexOf(this.masterNav.getActive()),this.emptyDetails(),this.handleCanLeave()},CoreSplitViewComponent.prototype.getDetailsNav=function(){return this.isEnabled?this.detailNav:this.masterNav},CoreSplitViewComponent.prototype.getMasterNav=function(){return this.masterNav},CoreSplitViewComponent.prototype.handleCanLeave=function(){var e=this;this.detailsDidEnterSubscription=this.detailNav.viewDidEnter.subscribe(function(n){if(e.isOn()){var t=e.masterNav.getActive();e.masterCanLeaveOverridden&&(t.instance.ionViewCanLeave=e.originalMasterCanLeave,e.originalMasterCanLeave=void 0,e.masterCanLeaveOverridden=!1),n&&n.instance&&n.instance.ionViewCanLeave&&(t.instance.ionViewCanLeave&&(e.originalMasterCanLeave=t.instance.ionViewCanLeave),e.masterCanLeaveOverridden=!0,t.instance.ionViewCanLeave=function(){return Promise.resolve().then(function(){if(e.originalMasterCanLeave){var n=e.originalMasterCanLeave.apply(t.instance);return"boolean"!=typeof n||n?n:Promise.reject(null)}}).then(function(){return n.instance.ionViewCanLeave()})})}})},CoreSplitViewComponent.prototype.isOn=function(){return!!this.isEnabled},CoreSplitViewComponent.prototype.push=function(e,n,t){var o=this;if(!this.pushOngoing)if(void 0!==this.isEnabled||t){this.pushOngoing=!0;var r=void 0;this.isEnabled?r=this.detailNav.setRoot(e,n):(this.loadDetailPage={component:e,data:n},r=this.masterNav.push(e,n)),r.finally(function(){o.pushOngoing=!1})}else setTimeout(function(){o.push(e,n,!0)},200)},CoreSplitViewComponent.prototype.emptyDetails=function(){this.loadDetailPage=!1,this.detailNav.setRoot("CoreSplitViewPlaceholderPage")},CoreSplitViewComponent.prototype.onSplitPaneChanged=function(e){this.ignoreSplitChanged||(this.isEnabled=e,this.masterNav&&this.detailNav&&(e?this.activateSplitView():this.deactivateSplitView()))},CoreSplitViewComponent.prototype.activateSplitView=function(){var e=this.masterNav.getActive(),n=e.component.name;this.masterNav.getPrevious()&&this.masterNav.getPrevious().component.name==this.masterPageName&&(n!=this.masterPageName?(this.masterNav.pop(),this.detailNav.setRoot(e.component,e.data)):this.loadDetailPage&&this.detailNav.setRoot(this.loadDetailPage.component,this.loadDetailPage.data),this.loadDetailPage=!1)},CoreSplitViewComponent.prototype.deactivateSplitView=function(){var e=this.detailNav.getActive();"CoreSplitViewPlaceholderPage"!=e.component.name&&this.masterNav.insert(this.masterPageIndex+1,e.component,e.data)},CoreSplitViewComponent.prototype.ngOnDestroy=function(){this.detailsDidEnterSubscription&&this.detailsDidEnterSubscription.unsubscribe(),this.audioCaptureSubscription.unsubscribe(),this.languageChangedSubscription.unsubscribe()},CoreSplitViewComponent=Object(o.__decorate)([Object(o.__param)(0,Object(r.E)())],CoreSplitViewComponent)}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(10),r=(t(37),t(54)),i=function(){function CoreFilterHelperProvider(e,n,t,r,i,l,s,a){var u=this;this.appProvider=t,this.sitesProvider=r,this.filterDelegate=i,this.courseProvider=l,this.filterProvider=s,this.coursesProvider=a,this.moduleContextsCache={},this.logger=e.getInstance("CoreFilterHelperProvider"),n.on(o.a.WS_CACHE_INVALIDATED,function(e){delete u.moduleContextsCache[e.siteId]}),n.on(o.a.SITE_STORAGE_DELETED,function(e){delete u.moduleContextsCache[e.siteId]})}return CoreFilterHelperProvider.prototype.getBlocksContexts=function(e,n){return this.courseProvider.getCourseBlocks(e,n).then(function(e){var n=[];return e.forEach(function(e){n.push({contextlevel:"block",instanceid:e.instanceid})}),n})},CoreFilterHelperProvider.prototype.getCacheableFilters=function(e,n,t,o,r){var i=this,l=this.getFromMemoryCache(o.courseId,e,n,r);if(l)return Promise.resolve(l);var s=r.getId();return t().then(function(t){return i.filterProvider.getAvailableInContexts(t,s).then(function(t){return i.storeInMemoryCache(o.courseId,e,t,s),t[e][n]||[]})})},CoreFilterHelperProvider.prototype.getCourseContexts=function(e,n){return this.coursesProvider.getCourseIdsIfEnrolled(e,n).then(function(e){var n=[];return e.forEach(function(e){n.push({contextlevel:"course",instanceid:e})}),n})},CoreFilterHelperProvider.prototype.getCourseModulesContexts=function(e,n){return this.courseProvider.getSections(e,!1,!0,void 0,n).then(function(e){var n=[];return e.forEach(function(e){e.modules&&e.modules.forEach(function(e){e.uservisible&&n.push({contextlevel:"module",instanceid:e.id})})}),n})},CoreFilterHelperProvider.prototype.getFilters=function(e,n,t,o){var r=this;return t=t||{},t.contextLevel=e,t.instanceId=n,t.filter=!1,this.sitesProvider.getSite(o).then(function(i){return o=i.getId(),r.filterProvider.canGetAvailableInContext(o).then(function(l){if(!l)return t.filter=!0,r.filterDelegate.getEnabledFilters(e,n);return("system"==e||"course"==e&&n==i.getSiteHomeId()?Promise.resolve(!0):r.siteHasFiltersToTreat(t,o)).then(function(l){if(l){if(t.filter=!0,"module"==e&&t.courseId){var s=r.getCourseModulesContexts.bind(r,t.courseId,o);return r.getCacheableFilters(e,n,s,t,i)}if("course"==e){s=r.getCourseContexts.bind(r,n,o);return r.getCacheableFilters(e,n,s,t,i)}if("block"==e&&t.courseId&&r.courseProvider.canGetCourseBlocks(i)){s=r.getBlocksContexts.bind(r,t.courseId,o);return r.getCacheableFilters(e,n,s,t,i)}return r.filterProvider.getAvailableInContext(e,n,o)}return[]})})}).catch(function(t){return r.logger.error("Error getting filters, return an empty array",t,e,n),[]})},CoreFilterHelperProvider.prototype.getFiltersAndFormatText=function(e,n,t,o,r){var i=this;return this.getFilters(n,t,o,r).then(function(n){return i.filterProvider.formatText(e,o,n,r).then(function(e){return{text:e,filters:n}})})},CoreFilterHelperProvider.prototype.getFromMemoryCache=function(e,n,t,o){var i=o.getId();if(this.moduleContextsCache[i]&&this.moduleContextsCache[i][e]&&this.moduleContextsCache[i][e][n]){var l=this.moduleContextsCache[i][e][n];if(!this.appProvider.isOnline()||Date.now()<=l.time+o.getExpirationDelay(r.a.FREQUENCY_RARELY))return l.contexts[n]&&l.contexts[n][t]}},CoreFilterHelperProvider.prototype.siteHasFiltersToTreat=function(e,n){var t=this;return e=e||{},this.sitesProvider.getSite(n).then(function(n){return t.filterProvider.getAvailableInContext("system",0,n.getId()).then(function(o){return t.filterDelegate.shouldBeApplied(o,e,n)})})},CoreFilterHelperProvider.prototype.storeInMemoryCache=function(e,n,t,o){this.moduleContextsCache[o]=this.moduleContextsCache[o]||{},this.moduleContextsCache[o][e]=this.moduleContextsCache[o][e]||{},this.moduleContextsCache[o][e][n]={contexts:t,time:Date.now()}},CoreFilterHelperProvider}()},,function(e,n,t){"use strict";t(0),t(1),t(376),t(116),t(5),t(229),t(255),t(48),t(175),t(3),t(479),t(381),t(1580),t(473),t(491);t.d(n,"a",function(){return o});var o=function(){return function CoreDirectivesModule(){}}()},,,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=(t(133),function(e){function CoreFilterDelegate(n,t,o,r){var i=e.call(this,"CoreFilterDelegate",n,t,o)||this;return i.sitesProvider=t,i.defaultHandler=r,i.featurePrefix="CoreFilterDelegate_",i.handlerNameProperty="filterName",i}return Object(o.__extends)(CoreFilterDelegate,e),CoreFilterDelegate.prototype.filterText=function(e,n,t,o,r){var i=this;return this.handlersInitPromise.then(function(){return i.sitesProvider.getSite(r)}).then(function(l){var s=Promise.resolve(e);return n=n||[],t=t||{},n.forEach(function(e){i.isEnabledAndShouldApply(e,t,l,o)&&(s=s.then(function(n){return Promise.resolve(i.executeFunctionOnEnabled(e.filter,"filter",[n,e,t,r])).catch(function(t){return i.logger.error("Error applying filter"+e.filter,t),n})}))}),s.then(function(e){return e=e.replace(/<\/?nolink>/gi,"")})})},CoreFilterDelegate.prototype.getEnabledFilters=function(e,n){var t=[];for(var o in this.enabledHandlers){t.push({contextid:-1,contextlevel:e,filter:this.enabledHandlers[o].filterName,inheritedstate:1,instanceid:n,localstate:1})}return t},CoreFilterDelegate.prototype.handleHtml=function(e,n,t,o,r,i,l,s){var a=this;return this.handlersInitPromise.then(function(){return a.sitesProvider.getSite(s)}).then(function(u){var d=Promise.resolve();return n=n||[],o=o||{},n.forEach(function(n){a.isEnabledAndShouldApply(n,o,u,r)&&(d=d.then(function(){return Promise.resolve(a.executeFunctionOnEnabled(n.filter,"handleHtml",[e,n,o,t,i,l,s])).catch(function(e){a.logger.error("Error handling HTML"+n.filter,e)})}))}),d})},CoreFilterDelegate.prototype.isEnabledAndShouldApply=function(e,n,t,o){return-1!=e.localstate&&(0!=e.localstate||-1!=e.inheritedstate)&&(!!this.shouldFilterBeApplied(e,n,t)&&(!o||-1==o.indexOf(e.filter)))},CoreFilterDelegate.prototype.shouldBeApplied=function(e,n,t){var o=this;return this.handlersInitPromise.then(function(){for(var r=0;r<e.length;r++)if(o.shouldFilterBeApplied(e[r],n,t))return!0})},CoreFilterDelegate.prototype.shouldFilterBeApplied=function(e,n,t){return!!this.hasHandler(e.filter,!0)&&this.executeFunctionOnEnabled(e.filter,"shouldBeApplied",[n,t])},CoreFilterDelegate}(t(99).a))},,function(e,n,t){"use strict";t.d(n,"a",function(){return a});t(0),t(4);var o=t(10),r=(t(103),t(14)),i=(t(353),t(62),t(51),t(126)),l=t(42),s=t(15),a=(t.n(s),function(){function CoreCourseHelperProvider(e,n,t,o,r,i,l,s,a,u,d,c,p,f,h,m,_,g,v,C,y,P){this.courseProvider=e,this.domUtils=n,this.moduleDelegate=t,this.prefetchDelegate=o,this.filepoolProvider=r,this.sitesProvider=i,this.textUtils=l,this.timeUtils=s,this.utils=a,this.translate=u,this.loginHelper=d,this.courseOptionsDelegate=c,this.siteHomeProvider=p,this.eventsProvider=f,this.fileHelper=h,this.appProvider=m,this.fileProvider=_,this.injector=g,this.coursesProvider=v,this.courseOffline=C,this.filterHelper=P,this.courseDwnPromises={},this.logger=y.getInstance("CoreCourseHelperProvider")}return CoreCourseHelperProvider.prototype.addHandlerDataForModules=function(e,n,t,o,r){var i=this,l=!1;return e.forEach(function(e){e&&i.sectionHasContent(e)&&e.modules&&(l=!0,e.modules.forEach(function(l){l.handlerData=i.moduleDelegate.getModuleDataFor(l.modname,l,n,e.id,r),l.completiondata&&l.completion>0?(l.completiondata.courseId=n,l.completiondata.courseName=o,l.completiondata.tracking=l.completion,l.completiondata.cmid=l.id,l.completionstatus=l.completiondata):t&&void 0!==t[l.id]&&(l.completiondata=t[l.id],l.completiondata.courseId=n,l.completiondata.courseName=o,l.completionstatus=l.completiondata),l.isStealth=0===l.visibleoncoursepage||l.visible&&!e.visible}))}),l},CoreCourseHelperProvider.prototype.calculateSectionStatus=function(e,n,t,o){var i=this;return void 0===o&&(o=!0),e.id==r.a.ALL_SECTIONS_ID?Promise.reject(null):this.prefetchDelegate.getModulesStatus(e.modules,n,e.id,t,!0,o).then(function(n){var t=i.getSectionDownloadId(e);return i.prefetchDelegate.isBeingDownloaded(t)&&(n.status=l.a.DOWNLOADING),e.downloadStatus=n.status,e.canCheckUpdates=i.prefetchDelegate.canCheckUpdates(),n.status===l.a.DOWNLOADING&&i.prefetchDelegate.isBeingDownloaded(e.id)?(e.isDownloading=!0,i.prefetchDelegate.setOnProgress(t,function(n){e.count=n.count,e.total=n.total})):(e.isDownloading=!1,e.total=0),n})},CoreCourseHelperProvider.prototype.calculateSectionsStatus=function(e,n,t,o){var i=this;void 0===o&&(o=!0);var s,a,u=[];return e.forEach(function(e){e.id===r.a.ALL_SECTIONS_ID?(s=e,e.isCalculating=!0):(e.isCalculating=!0,u.push(i.calculateSectionStatus(e,n,t,o).then(function(e){a=i.filepoolProvider.determinePackagesStatus(a,e.status)}).finally(function(){e.isCalculating=!1})))}),Promise.all(u).then(function(){s&&(s.downloadStatus=a,s.canCheckUpdates=i.prefetchDelegate.canCheckUpdates(),s.isDownloading=a===l.a.DOWNLOADING)}).finally(function(){s&&(s.isCalculating=!1)})},CoreCourseHelperProvider.prototype.confirmAndPrefetchCourse=function(e,n,t,o,r){var i=this,l=e.prefetchCourseIcon,s=e.title,a=this.sitesProvider.getCurrentSiteId();return e.downloadSucceeded=!1,e.prefetchCourseIcon="spinner",e.title="core.downloading",(t?Promise.resolve(t):this.courseProvider.getSections(n.id,!1,!0)).then(function(t){return i.confirmDownloadSizeSection(n.id,void 0,t,!0).then(function(){var l=[];return o||l.push(i.courseOptionsDelegate.getHandlersToDisplay(i.injector,n).then(function(e){o=e})),r||l.push(i.courseOptionsDelegate.getMenuHandlersToDisplay(i.injector,n).then(function(e){r=e})),Promise.all(l).then(function(){return i.prefetchCourse(n,t,o,r,a)}).then(function(){return e.downloadSucceeded=!0,!0})},function(n){return e.prefetchCourseIcon=l,e.title=s,Promise.reject(n)})})},CoreCourseHelperProvider.prototype.confirmAndPrefetchCourses=function(e,n){var t=this,o=this.sitesProvider.getCurrentSiteId();return this.domUtils.showConfirm(this.translate.instant("core.areyousure")).then(function(){var r=[],i=e.length,l=0;return e.forEach(function(e){var s,a,u,d=[],c=!0;d.push(t.courseProvider.getSections(e.id,!1,!0).then(function(e){s=e})),d.push(t.courseOptionsDelegate.getHandlersToDisplay(t.injector,e).then(function(e){a=e})),d.push(t.courseOptionsDelegate.getMenuHandlersToDisplay(t.injector,e).then(function(e){u=e})),r.push(Promise.all(d).then(function(){return t.prefetchCourse(e,s,a,u,o)}).catch(function(e){return c=!1,Promise.reject(e)}).finally(function(){l++,n&&n({count:l,total:i,courseId:e.id,success:c})}))}),n&&n({count:0,total:i,success:!0}),t.utils.allPromises(r)})},CoreCourseHelperProvider.prototype.confirmAndRemoveFiles=function(e,n){var t=this;return this.domUtils.showDeleteConfirm("core.course.confirmdeletemodulefiles").then(function(){return t.prefetchDelegate.removeModuleFiles(e,n)}).catch(function(e){e&&t.domUtils.showErrorModal(e)})},CoreCourseHelperProvider.prototype.confirmDownloadSizeSection=function(e,n,t,o){var i,l=this,s=!1;if(n&&n.id!=r.a.ALL_SECTIONS_ID)i=this.prefetchDelegate.getDownloadSize(n.modules,e),s=this.filepoolProvider.extractDownloadableFilesFromHtml(n.summary).length>0;else{var a=[],u={size:0,total:!0};t.forEach(function(n){n.id!=r.a.ALL_SECTIONS_ID&&(a.push(l.prefetchDelegate.getDownloadSize(n.modules,e).then(function(e){u.total=u.total&&e.total,u.size+=e.size})),!s&&l.filepoolProvider.extractDownloadableFilesFromHtml(n.summary).length>0&&(s=!0))}),i=Promise.all(a).then(function(){return u})}return i.then(function(e){return s&&(e.total=!1),l.domUtils.confirmDownloadSize(e,void 0,void 0,void 0,void 0,o)})},CoreCourseHelperProvider.prototype.contextMenuPrefetch=function(e,n,t,o){var r=this,i=e.prefetchStatusIcon;return e.prefetchStatusIcon="spinner",this.prefetchDelegate.getModuleDownloadSize(n,t,!0).then(function(e){return r.domUtils.confirmDownloadSize(e).then(function(){return r.prefetchDelegate.prefetchModule(n,t,!0)})}).then(function(){o&&o()}).catch(function(n){e.prefetchStatusIcon=i,e.isDestroyed||r.domUtils.showErrorModalDefault(n,"core.errordownloading",!0)})},CoreCourseHelperProvider.prototype.determineCoursesStatus=function(e){var n=this,t=[],o=this.sitesProvider.getCurrentSiteId();return e.forEach(function(e){t.push(n.courseProvider.getCourseStatus(e.id,o))}),Promise.all(t).then(function(e){for(var t=e[0],o=1;o<e.length;o++)t=n.filepoolProvider.determinePackagesStatus(t,e[o]);return t})},CoreCourseHelperProvider.prototype.downloadModuleAndOpenFile=function(e,n,t,o,r,i){var s=this;i=i||this.sitesProvider.getCurrentSiteId();return(r?Promise.resolve(r):this.courseProvider.loadModuleContents(e,n).then(function(){r=e.contents})).then(function(){return r&&r.length?s.sitesProvider.getSite(i):Promise.reject(s.utils.createFakeWSError("core.filenotfound",!0))}).then(function(a){var u=r[0],d=s.fileHelper.getFileUrl(u);return s.fileHelper.shouldOpenInBrowser(u)?s.appProvider.isOnline()?a.checkAndFixPluginfileURL(d).then(function(l){l=(l=(l=l.replace("&offline=1","")).replace(/forcedownload=\d+&/,"")).replace(/[\?|\&]forcedownload=\d+/,""),s.utils.openInBrowser(l),s.fileProvider.isAvailable()&&s.downloadModule(e,n,t,o,r,i)}):s.filepoolProvider.getInternalUrlByUrl(i,d).then(function(e){return s.utils.openFile(e)}).catch(function(e){return Promise.reject(s.translate.instant("core.networkerrormsg"))}):s.downloadModuleWithMainFileIfNeeded(e,n,t,o,r,i).then(function(a){return 0===a.path.indexOf("http")?(a.path=a.path+"#moodlemobile-embedded",s.utils.openOnlineFile(a.path).catch(function(u){if(!s.fileProvider.isAvailable())return Promise.reject(u);if(a.status===l.a.DOWNLOADING)return Promise.reject(s.translate.instant("core.erroropenfiledownloading"));return(a.status===l.a.NOT_DOWNLOADED?s.downloadModule(e,n,t,o,r,i).then(function(){return s.filepoolProvider.getInternalUrlByUrl(i,d)}):s.filepoolProvider.getInternalUrlByUrl(i,d)).then(function(e){return s.utils.openFile(e)})})):s.utils.openFile(a.path)})})},CoreCourseHelperProvider.prototype.downloadModuleWithMainFileIfNeeded=function(e,n,t,o,r,i){var s=this;if(i=i||this.sitesProvider.getCurrentSiteId(),!r||!r.length)return Promise.reject(null);var a=this.fileHelper.getFileUrl(r[0]),u={fixedUrl:void 0,path:void 0,status:void 0};return this.sitesProvider.getSite(i).then(function(e){return e.checkAndFixPluginfileURL(a)}).then(function(d){return u.fixedUrl=d,s.fileProvider.isAvailable()?s.filepoolProvider.getPackageStatus(i,t,o).then(function(c){return u.status=c,c===l.a.DOWNLOADED?s.filepoolProvider.getInternalUrlByUrl(i,a).catch(function(a){return s.filepoolProvider.storePackageStatus(i,l.a.NOT_DOWNLOADED,t,o).then(function(){return s.downloadModuleWithMainFile(e,n,d,r,c,t,o,i)})}):c!==l.a.DOWNLOADING||s.appProvider.isDesktop()?s.downloadModuleWithMainFile(e,n,d,r,c,t,o,i):d}).then(function(e){return u.path=e,u}):(u.path=d,u)})},CoreCourseHelperProvider.prototype.downloadModuleWithMainFile=function(e,n,t,o,r,i,s,a){var u=this,d=this.appProvider.isOnline(),c=o[0],p=this.fileHelper.getFileUrl(c),f=this.fileHelper.getFileTimemodified(c);return d||r!==l.a.NOT_DOWNLOADED?this.filepoolProvider.shouldDownloadBeforeOpen(t,c.filesize).then(function(){return u.downloadModule(e,n,i,s,o,a).then(function(){return u.filepoolProvider.getInternalUrlByUrl(a,p)})},function(){return u.appProvider.isWifi()&&u.downloadModule(e,n,i,s,o,a),!u.fileHelper.isStateDownloaded(r)||d?t:u.filepoolProvider.getUrlByUrl(a,p,i,s,f,!1,!1,c)}):Promise.reject(this.translate.instant("core.networkerrormsg"))},CoreCourseHelperProvider.prototype.downloadModule=function(e,n,t,o,r,i){var l=this.prefetchDelegate.getPrefetchHandlerFor(e);return l?l.download?l.download(e,n):l.prefetch(e,n,!0):(r=r||e.contents,this.filepoolProvider.downloadOrPrefetchFiles(i,r,!1,!1,t,o))},CoreCourseHelperProvider.prototype.fillContextMenu=function(e,n,t,r,i){var s=this;return this.getModulePrefetchInfo(n,t,r,i).then(function(r){e.size=r.size>0?r.sizeReadable:0,e.prefetchStatusIcon=r.statusIcon,e.prefetchStatus=r.status,r.status!=l.a.NOT_DOWNLOADABLE&&(e.prefetchText=r.downloadTime>0?s.translate.instant("core.lastdownloaded")+": "+r.downloadTimeReadable:s.translate.instant("core.download")),r.status==l.a.DOWNLOADING&&(e.size=0),void 0===e.contextMenuStatusObserver&&i&&(e.contextMenuStatusObserver=s.eventsProvider.on(o.a.PACKAGE_STATUS_CHANGED,function(o){o.componentId==n.id&&o.component==i&&s.fillContextMenu(e,n,t,!1,i)},s.sitesProvider.getCurrentSiteId()))})},CoreCourseHelperProvider.prototype.getCourse=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.coursesProvider.getUserCourse(e,!1,n).then(function(e){return{enrolled:!0,course:e}}).catch(function(){return t.coursesProvider.isGetCoursesByFieldAvailableInSite(n).then(function(o){return o?t.coursesProvider.getCourseByField("id",e,n):t.coursesProvider.getCourse(e,n)}).then(function(e){return{enrolled:!1,course:e}})})},CoreCourseHelperProvider.prototype.getAndOpenCourse=function(e,n,t,o){var r=this,i=this.domUtils.showModalLoading();return this.getCourse(n,o).then(function(e){return e.course}).catch(function(){return{id:n}}).then(function(n){return i.dismiss(),r.openCourse(e,n,t,o)})},CoreCourseHelperProvider.prototype.hasABlockNamed=function(e,n,t){return this.courseProvider.getCourseBlocks(e,t).then(function(e){return e.some(function(e){return e.name==n})}).catch(function(){return!1})},CoreCourseHelperProvider.prototype.initPrefetchCoursesIcons=function(e,n,t){var o=this;return void 0===t&&(t=2),!e||e.length<t?(n.icon="",Promise.resolve(n)):this.determineCoursesStatus(e).then(function(e){var t=o.getCourseStatusIconAndTitleFromStatus(e).icon;return"spinner"==t&&(t="cloud-download"),n.icon=t,n})},CoreCourseHelperProvider.prototype.loadOfflineCompletion=function(e,n,t){var o=this;return this.courseOffline.getCourseManualCompletions(e,t).then(function(e){if(e&&e.length)for(var t=e.length,r=0,i=o.utils.arrayToObject(e,"cmid"),l=0;l<n.length;l++){var s=n[l];if(s.modules&&s.modules.length)for(var a=0;a<s.modules.length;a++){var u=s.modules[a],d=i[u.id];if(d&&void 0!==u.completiondata&&d.timecompleted>=1e3*u.completiondata.timecompleted&&(u.completiondata.state=d.completed,u.completiondata.offline=!0,++r==t))break}}})},CoreCourseHelperProvider.prototype.prefetchCourses=function(e,n){return n.icon="spinner",n.badge="",this.confirmAndPrefetchCourses(e,function(e){n.badge=e.count+" / "+e.total}).then(function(){n.icon="refresh"}).finally(function(){n.badge=""})},CoreCourseHelperProvider.prototype.getCourseDownloadPromise=function(e,n){return n=n||this.sitesProvider.getCurrentSiteId(),this.courseDwnPromises[n]&&this.courseDwnPromises[n][e]},CoreCourseHelperProvider.prototype.getCourseStatusIconAndTitle=function(e,n){var t=this;return this.courseProvider.getCourseStatus(e,n).then(function(e){return t.getCourseStatusIconAndTitleFromStatus(e)})},CoreCourseHelperProvider.prototype.getCourseStatusIconAndTitleFromStatus=function(e){return e==l.a.DOWNLOADED?{icon:"refresh",title:"core.course.refreshcourse"}:e==l.a.DOWNLOADING?{icon:"spinner",title:"core.downloading"}:{icon:"cloud-download",title:"core.course.downloadcourse"}},CoreCourseHelperProvider.prototype.getModuleCourseIdByInstance=function(e,n,t){var o=this;return this.courseProvider.getModuleBasicInfoByInstance(e,n,t).then(function(e){return e.course}).catch(function(e){return o.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0),Promise.reject(null)})},CoreCourseHelperProvider.prototype.getModulePrefetchInfo=function(e,n,t,o){var r=this,i={},a=this.sitesProvider.getCurrentSiteId(),u=[];return t&&this.prefetchDelegate.invalidateModuleStatusCache(e),u.push(this.prefetchDelegate.getModuleDownloadedSize(e,n).then(function(e){i.size=e,i.sizeReadable=r.textUtils.bytesToSize(e,2)})),u.push(this.prefetchDelegate.getModuleStatus(e,n).then(function(e){switch(i.status=e,e){case l.a.NOT_DOWNLOADED:i.statusIcon="cloud-download";break;case l.a.DOWNLOADING:i.statusIcon="spinner";break;case l.a.OUTDATED:i.statusIcon="refresh";break;case l.a.DOWNLOADED:if(!r.prefetchDelegate.canCheckUpdates()){i.statusIcon="refresh";break}default:i.statusIcon=""}})),u.push(this.filepoolProvider.getPackageData(a,o,e.id).then(function(e){if(e&&e.downloadTime&&r.fileHelper.isStateDownloaded(e.status)){var n=r.timeUtils.timestamp();i.downloadTime=e.downloadTime,i.downloadTimeReadable=n-e.downloadTime<604800?s(1e3*e.downloadTime).fromNow():s(1e3*e.downloadTime).calendar()}}).catch(function(){i.downloadTime=0})),Promise.all(u).then(function(){return i})},CoreCourseHelperProvider.prototype.getSectionDownloadId=function(e){return"Section-"+e.id},CoreCourseHelperProvider.prototype.navigateToModuleByInstance=function(e,n,t,o,r,i,l,s){var a=this;void 0===i&&(i=!1);var u=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfoByInstance(e,n,t).then(function(e){a.navigateToModule(parseInt(e.id,10),t,e.course,r,i?n:void 0,l,s)}).catch(function(e){a.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}).finally(function(){u.dismiss()})},CoreCourseHelperProvider.prototype.navigateToModule=function(e,n,t,o,r,i,l){var s=this;n=n||this.sitesProvider.getCurrentSiteId();var a,u=this.domUtils.showModalLoading();return(t&&o?Promise.resolve():t?this.courseProvider.getModuleSectionId(e,n).then(function(e){o=e}):this.courseProvider.getModuleBasicInfo(e,n).then(function(e){t=e.course,o=e.section})).then(function(){return t=Number(t),o=Number(o),s.sitesProvider.getSite(n)}).then(function(i){return a=i,s.courseProvider.getModule(e,t,o,!1,!1,n,r)}).then(function(e){if(e.handlerData=s.moduleDelegate.getModuleDataFor(e.modname,e,t,o,!1),l&&e.handlerData&&e.handlerData.action)return u.dismiss(),e.handlerData.action(new Event("click"),l,e,t,void 0,i);s.logger.warn("navCtrl was not passed to navigateToModule by the link handler for "+e.modname);var r={course:{id:t},module:e,sectionId:o,modParams:i};return t==a.getSiteHomeId()?s.siteHomeProvider.isAvailable().then(function(){s.loginHelper.redirect("CoreSiteHomeIndexPage",r,n)}).finally(function(){u.dismiss()}):(u.dismiss(),s.getAndOpenCourse(l,t,r,n))}).catch(function(e){u.dismiss(),s.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)})},CoreCourseHelperProvider.prototype.openModule=function(e,n,t,o,r){return n.handlerData||(n.handlerData=this.moduleDelegate.getModuleDataFor(n.modname,n,t,o,!1)),!(!n.handlerData||!n.handlerData.action)&&(n.handlerData.action(new Event("click"),e,n,t,{animate:!1},r),!0)},CoreCourseHelperProvider.prototype.prefetchCourse=function(e,n,t,o,i){var s=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.courseDwnPromises[i]&&this.courseDwnPromises[i][e.id]?this.courseDwnPromises[i][e.id]:(this.courseDwnPromises[i]||(this.courseDwnPromises[i]={}),this.courseDwnPromises[i][e.id]=this.courseProvider.setCourseStatus(e.id,l.a.DOWNLOADING,i).then(function(){var i=[],l=n[0];n[0].id!=r.a.ALL_SECTIONS_ID&&(l={id:r.a.ALL_SECTIONS_ID}),i.push(s.prefetchSection(l,e.id,n)),t.forEach(function(n){n.prefetch&&i.push(n.prefetch(e))}),o.forEach(function(n){n.prefetch&&i.push(n.prefetch(e))}),s.coursesProvider.isGetCoursesByFieldAvailable()&&i.push(s.coursesProvider.getCoursesByField("id",e.id));var a=n.find(function(e){return e.modules&&e.modules.length>0});return a&&void 0!==a.modules[0].completion||i.push(s.courseProvider.getActivitiesCompletionStatus(e.id)),i.push(s.filterHelper.getFilters("course",e.id)),s.utils.allPromises(i)}).then(function(){return s.courseProvider.setCourseStatus(e.id,l.a.DOWNLOADED,i)}).catch(function(n){return s.courseProvider.setCoursePreviousStatus(e.id,i).then(function(){return Promise.reject(n)})}).finally(function(){delete s.courseDwnPromises[i][e.id]}),this.courseDwnPromises[i][e.id])},CoreCourseHelperProvider.prototype.prefetchModule=function(e,n,t,o,r){var i=this;return this.domUtils.confirmDownloadSize(t).then(function(){return(r?e.invalidateContent(n.id,o):Promise.resolve()).catch(function(){}).then(function(){return i.prefetchDelegate.prefetchModule(n,o,!0)})})},CoreCourseHelperProvider.prototype.prefetchSection=function(e,n,t){var o=this;if(e.id!=r.a.ALL_SECTIONS_ID)return this.prefetchSingleSectionIfNeeded(e,n).finally(function(){return o.calculateSectionStatus(e,n,!1,!1)});var i,s=[];return e.isDownloading=!0,t.forEach(function(e){e.id!=r.a.ALL_SECTIONS_ID&&s.push(o.prefetchSingleSectionIfNeeded(e,n).finally(function(){return o.calculateSectionStatus(e,n,!1,!1).then(function(e){i=o.filepoolProvider.determinePackagesStatus(i,e.status)})}))}),this.utils.allPromises(s).then(function(){e.downloadStatus=i,e.canCheckUpdates=o.prefetchDelegate.canCheckUpdates(),e.isDownloading=i===l.a.DOWNLOADING}).finally(function(){e.isDownloading=!1})},CoreCourseHelperProvider.prototype.prefetchSingleSectionIfNeeded=function(e,n){var t=this;if(e.id==r.a.ALL_SECTIONS_ID)return Promise.resolve();if(e.hiddenbynumsections)return Promise.resolve();var o=[];e.isDownloading=!0,o.push(this.prefetchDelegate.syncModules(e.modules,n).then(function(){return t.prefetchDelegate.getModulesStatus(e.modules,n,e.id).then(function(o){if(o.status!=l.a.DOWNLOADED&&o.status!=l.a.NOT_DOWNLOADABLE)return t.prefetchSingleSection(e,o,n)},function(n){return e.isDownloading=!1,Promise.reject(n)})}));var i=this.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.summary),s=this.sitesProvider.getCurrentSiteId();return o.push(this.filepoolProvider.addFilesToQueue(s,i,r.a.COMPONENT,n).catch(function(){})),Promise.all(o)},CoreCourseHelperProvider.prototype.prefetchSingleSection=function(e,n,t){if(e.id==r.a.ALL_SECTIONS_ID)return Promise.resolve();if(e.total>0)return Promise.resolve();var o=n[l.a.OUTDATED].concat(n[l.a.NOT_DOWNLOADED]).concat(n[l.a.DOWNLOADING]),i=this.getSectionDownloadId(e);return e.isDownloading=!0,this.prefetchDelegate.prefetchModules(i,o,t,function(n){e.count=n.count,e.total=n.total})},CoreCourseHelperProvider.prototype.sectionHasContent=function(e){return!e.hiddenbynumsections&&(void 0!==e.availabilityinfo&&""!=e.availabilityinfo||""!=e.summary||e.modules&&e.modules.length>0)},CoreCourseHelperProvider.prototype.openCourse=function(e,n,t,o){return o&&o!=this.sitesProvider.getCurrentSiteId()?(t=t||{},Object.assign(t,{course:n}),this.loginHelper.redirect(i.a.OPEN_COURSE,t,o)):this.courseProvider.openCourse(e,n,t)},CoreCourseHelperProvider}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(10),r=t(54),i=(t(37),function(){function CoreFilterProvider(e,n,t,r,i,l){var s=this;this.sitesProvider=t,this.textUtils=r,this.filterDelegate=i,this.appProvider=l,this.ROOT_CACHE_KEY="mmFilter:",this.contextsCache={},this.logger=e.getInstance("CoreFilterProvider"),n.on(o.a.WS_CACHE_INVALIDATED,function(e){delete s.contextsCache[e.siteId]}),n.on(o.a.SITE_STORAGE_DELETED,function(e){delete s.contextsCache[e.siteId]})}return CoreFilterProvider.prototype.canGetAvailableInContext=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.canGetAvailableInContextInSite(e)})},CoreFilterProvider.prototype.canGetAvailableInContextInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_filters_get_available_in_context")},CoreFilterProvider.prototype.formatText=function(e,n,t,o){var r=this;if(!e||"string"!=typeof e)return Promise.resolve("");void 0===(n=n?Object.assign({},n):{}).clean&&(n.clean=!1),void 0===n.filter&&(n.filter=!0),n.contextLevel||(n.filter=!1);return(n.filter?this.filterDelegate.filterText(e,t,n,[],o):Promise.resolve(e)).then(function(e){return n.clean&&(e=r.textUtils.cleanTags(e,n.singleLine)),n.shortenLength>0&&(e=r.textUtils.shortenText(e,n.shortenLength)),n.highlight&&(e=r.textUtils.highlightText(e,n.highlight)),e})},CoreFilterProvider.prototype.getAvailableInContextsCacheKey=function(e){return this.getAvailableInContextsPrefixCacheKey()+JSON.stringify(e)},CoreFilterProvider.prototype.getAvailableInContextsPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"availableInContexts:"},CoreFilterProvider.prototype.getAvailableInContexts=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(o){n=o.getId();var i=t.getFromMemoryCache(e,o);if(i)return i;t.contextsCache[n]=t.contextsCache[n]||{};for(var l=!1,s=!1,a=e.slice(),u=0;u<a.length;u++){if("system"==a[u].contextlevel){l=!0,(s=a.some(function(e){return"course"==e.contextlevel&&e.instanceid==o.getSiteHomeId()}))?a.splice(u,1):a[u]={contextlevel:"course",instanceid:o.getSiteHomeId()};break}}var d={contexts:a},c={cacheKey:t.getAvailableInContextsCacheKey(a),updateFrequency:r.a.FREQUENCY_RARELY};return o.read("core_filters_get_available_in_context",d,c).then(function(r){var i={};return e.forEach(function(e){i[e.contextlevel]=i[e.contextlevel]||{},i[e.contextlevel][e.instanceid]=[]}),1!=e.length||l?(r.filters.forEach(function(e){l&&"course"==e.contextlevel&&e.instanceid==o.getSiteHomeId()&&(s&&(i[e.contextlevel][e.instanceid].push(e),e=Object.assign({},e)),e.contextlevel="system",e.instanceid=0,e.contextid=-1,e.localstate=e.inheritedstate),i[e.contextlevel][e.instanceid].push(e)}),t.storeInMemoryCache(i,n),i):(i[e[0].contextlevel][e[0].instanceid]=r.filters,t.storeInMemoryCache(i,n),i)})})},CoreFilterProvider.prototype.getAvailableInContext=function(e,n,t){return this.getAvailableInContexts([{contextlevel:e,instanceid:n}],t).then(function(t){return t[e][n]})},CoreFilterProvider.prototype.getFromMemoryCache=function(e,n){if(this.contextsCache[n.getId()]){for(var t=this.contextsCache[n.getId()],o=this.appProvider.isOnline(),i={},l=!0,s=0;s<e.length;s++){var a=e[s],u=t[a.contextlevel]&&t[a.contextlevel][a.instanceid];if(!u||o&&!(Date.now()<=u.time+n.getExpirationDelay(r.a.FREQUENCY_RARELY))){l=!1;break}i[a.contextlevel]=i[a.contextlevel]||{},i[a.contextlevel][a.instanceid]=u.filters}if(l)return i}},CoreFilterProvider.prototype.invalidateAllAvailableInContext=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getAvailableInContextsPrefixCacheKey())})},CoreFilterProvider.prototype.invalidateAvailableInContexts=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAvailableInContextsCacheKey(e))})},CoreFilterProvider.prototype.invalidateAvailableInContext=function(e,n,t){return this.invalidateAvailableInContexts([{contextlevel:e,instanceid:n}],t)},CoreFilterProvider.prototype.storeInMemoryCache=function(e,n){for(var t in e){this.contextsCache[n][t]=this.contextsCache[n][t]||{};for(var o in e[t])this.contextsCache[n][t][o]={filters:e[t][o],time:Date.now()}}},CoreFilterProvider}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreConstants(){}return CoreConstants.SECONDS_YEAR=31536e3,CoreConstants.SECONDS_WEEK=604800,CoreConstants.SECONDS_DAY=86400,CoreConstants.SECONDS_HOUR=3600,CoreConstants.SECONDS_MINUTE=60,CoreConstants.WIFI_DOWNLOAD_THRESHOLD=104857600,CoreConstants.DOWNLOAD_THRESHOLD=10485760,CoreConstants.MINIMUM_FREE_SPACE=10485760,CoreConstants.IOS_FREE_SPACE_THRESHOLD=524288e3,CoreConstants.DONT_SHOW_ERROR="CoreDontShowError",CoreConstants.NO_SITE_ID="NoSite",CoreConstants.SETTINGS_RICH_TEXT_EDITOR="CoreSettingsRichTextEditor",CoreConstants.SETTINGS_NOTIFICATION_SOUND="CoreSettingsNotificationSound",CoreConstants.SETTINGS_SYNC_ONLY_ON_WIFI="CoreSettingsSyncOnlyOnWifi",CoreConstants.SETTINGS_DEBUG_DISPLAY="CoreSettingsDebugDisplay",CoreConstants.SETTINGS_REPORT_IN_BACKGROUND="CoreSettingsReportInBackground",CoreConstants.SETTINGS_SEND_ON_ENTER="CoreSettingsSendOnEnter",CoreConstants.SETTINGS_FONT_SIZE="CoreSettingsFontSize",CoreConstants.SETTINGS_COLOR_SCHEME="CoreSettingsColorScheme",CoreConstants.SETTINGS_ANALYTICS_ENABLED="CoreSettingsAnalyticsEnabled",CoreConstants.WS_TIMEOUT=3e4,CoreConstants.WS_TIMEOUT_WIFI=3e4,CoreConstants.WS_PREFIX="local_mobile_",CoreConstants.LOGIN_SSO_CODE=2,CoreConstants.LOGIN_SSO_INAPP_CODE=3,CoreConstants.LOGIN_LAUNCH_DATA="CoreLoginLaunchData",CoreConstants.DOWNLOADED="downloaded",CoreConstants.DOWNLOADING="downloading",CoreConstants.NOT_DOWNLOADED="notdownloaded",CoreConstants.OUTDATED="outdated",CoreConstants.NOT_DOWNLOADABLE="notdownloadable",CoreConstants.RESOURCELIB_DISPLAY_AUTO=0,CoreConstants.RESOURCELIB_DISPLAY_EMBED=1,CoreConstants.RESOURCELIB_DISPLAY_FRAME=2,CoreConstants.RESOURCELIB_DISPLAY_NEW=3,CoreConstants.RESOURCELIB_DISPLAY_DOWNLOAD=4,CoreConstants.RESOURCELIB_DISPLAY_OPEN=5,CoreConstants.RESOURCELIB_DISPLAY_POPUP=6,CoreConstants.FEATURE_GRADE_HAS_GRADE="grade_has_grade",CoreConstants.FEATURE_GRADE_OUTCOMES="outcomes",CoreConstants.FEATURE_ADVANCED_GRADING="grade_advanced_grading",CoreConstants.FEATURE_CONTROLS_GRADE_VISIBILITY="controlsgradevisbility",CoreConstants.FEATURE_PLAGIARISM="plagiarism",CoreConstants.FEATURE_COMPLETION_TRACKS_VIEWS="completion_tracks_views",CoreConstants.FEATURE_COMPLETION_HAS_RULES="completion_has_rules",CoreConstants.FEATURE_NO_VIEW_LINK="viewlink",CoreConstants.FEATURE_IDNUMBER="idnumber",CoreConstants.FEATURE_GROUPS="groups",CoreConstants.FEATURE_GROUPINGS="groupings",CoreConstants.FEATURE_MOD_ARCHETYPE="mod_archetype",CoreConstants.FEATURE_MOD_INTRO="mod_intro",CoreConstants.FEATURE_MODEDIT_DEFAULT_COMPLETION="modedit_default_completion",CoreConstants.FEATURE_COMMENT="comment",CoreConstants.FEATURE_RATE="rate",CoreConstants.FEATURE_BACKUP_MOODLE2="backup_moodle2",CoreConstants.FEATURE_SHOW_DESCRIPTION="showdescription",CoreConstants.FEATURE_USES_QUESTIONS="usesquestions",CoreConstants.MOD_ARCHETYPE_OTHER=0,CoreConstants.MOD_ARCHETYPE_RESOURCE=1,CoreConstants.MOD_ARCHETYPE_ASSIGNMENT=2,CoreConstants.MOD_ARCHETYPE_SYSTEM=3,CoreConstants}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(186),t(11),t(7),t(5),t(3);var o=function(){function CoreIframeUtilsProvider(e,n,t,o,r,i,l,s,a,u,d,c,p,f){this.fileProvider=n,this.sitesProvider=t,this.urlUtils=o,this.textUtils=r,this.utils=i,this.domUtils=l,this.platform=s,this.appProvider=a,this.translate=u,this.network=d,this.zone=c,this.config=p,this.contentLinksHelper=f,this.logger=e.getInstance("CoreUtilsProvider")}return e=CoreIframeUtilsProvider,CoreIframeUtilsProvider.prototype.checkOnlineFrameInOffline=function(e,n){var t=this,o=e.src||e.data;if(o&&o.match(/^https?:\/\//i)&&!this.appProvider.isOnline()){if(e.classList.contains("core-iframe-offline-disabled"))return!0;var r=document.createElement("div");r.setAttribute("text-center",""),r.setAttribute("padding",""),r.classList.add("core-iframe-offline-warning");var i=this.sitesProvider.getCurrentSite(),l=i?i.getInfo().username:void 0;this.contentLinksHelper.canHandleLink(o,void 0,l).then(function(i){if(i){var s=document.createElement("a");if(n)s.style.display="block",s.style.padding="1em",s.style.fontWeight="500",s.style.textAlign="center",s.style.textTransform="uppercase",s.style.cursor="pointer";else{var a=t.config.get("mode");s.setAttribute("ion-button",""),s.classList.add("button","button-"+a,"button-default","button-default-"+a,"button-block","button-block-"+a)}var u=t.translate.instant("core.viewembeddedcontent");s.innerHTML=n?u:'<span class="button-inner">'+u+"</span>",s.onclick=function(e){t.contentLinksHelper.handleLink(o,l),e.preventDefault()},r.appendChild(s)}else r.innerHTML=(n?"":t.domUtils.getConnectionWarningIconHtml())+"<p>"+t.translate.instant("core.networkerroriframemsg")+"</p>";e.parentElement.insertBefore(r,e)}),e.classList.add("core-iframe-offline-disabled"),n&&(e.style.display="none");var s=this.network.onConnect().subscribe(function(){t.zone.run(function(){t.checkOnlineFrameInOffline(e,n)||s.unsubscribe()})});return!0}return e.classList.contains("core-iframe-offline-disabled")&&(e.src=e.src,e.data=e.data,this.domUtils.removeElement(e.parentElement,"div.core-iframe-offline-warning"),e.classList.remove("core-iframe-offline-disabled"),n&&(e.style.display="")),!1},CoreIframeUtilsProvider.prototype.getContentWindowAndDocument=function(e){var n,t=e.contentWindow;try{n=e.contentDocument||t&&t.document}catch(e){}if(!t&&n&&(t=n.defaultView),!t&&e.getSVGDocument){try{n=e.getSVGDocument()}catch(e){}n&&n.defaultView?t=n.defaultView:e.window?t=e.window:e.getWindow&&(t=e.getWindow())}return{window:t,document:n}},CoreIframeUtilsProvider.prototype.redefineWindowOpen=function(n,t,o,r){var i=this;t&&(t.open=function(e,t){if(!i.urlUtils.getUrlScheme(e)){var o=n.src||n.data;if(!o)return i.logger.warn("Cannot get iframe src to open relative url",e,n),null;var l=i.fileProvider.getFileAndDirectoryFromPath(o);if(!l.directory)return i.logger.warn("Cannot get iframe dir path to open relative url",e,n),null;e=i.textUtils.concatenatePaths(l.directory,e)}return"_self"==t?"object"==n.tagName.toLowerCase()?n.setAttribute("data",e):n.setAttribute("src",e):0===e.indexOf("cdvfile://")||0===e.indexOf("file://")?i.utils.openFile(e).catch(function(e){i.domUtils.showErrorModal(e)}):i.contentLinksHelper.handleLink(e,void 0,r,!0,!0).then(function(n){n||(i.sitesProvider.isLoggedIn()?i.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e):i.utils.openInBrowser(e))}),null}),o&&e.FRAME_TAGS.forEach(function(e){Array.from(o.querySelectorAll(e)).forEach(function(e){i.treatFrame(e,!0,r)})})},CoreIframeUtilsProvider.prototype.treatFrame=function(e,n,t){var o=this;if(e){this.checkOnlineFrameInOffline(e,n);var r=this.getContentWindowAndDocument(e);this.redefineWindowOpen(e,r.window,r.document,t),this.treatFrameLinks(e,r.document),e.addEventListener("load",function(){o.checkOnlineFrameInOffline(e,n),r=o.getContentWindowAndDocument(e),o.redefineWindowOpen(e,r.window,r.document,t),o.treatFrameLinks(e,r.document),r.window&&setTimeout(function(){r.window.dispatchEvent(new Event("resize"))},1e3)})}},CoreIframeUtilsProvider.prototype.treatFrameLinks=function(e,n){var t=this;n&&n.addEventListener("click",function(n){if(!n.defaultPrevented){for(var o=n.target;o&&"A"!==o.tagName;)o=o.parentElement;var r=o;r&&!r.treated&&(r.treated=!0,r.addEventListener("click",t.linkClicked.bind(t,e,r)))}},{capture:!0})},CoreIframeUtilsProvider.prototype.linkClicked=function(e,n,t){var o=this;if(!t.defaultPrevented){var r=this.urlUtils.getUrlScheme(n.href);if(n.href&&(!r||"javascript"!=r))if(r&&"file"!=r&&"filesystem"!=r){t.preventDefault();var i=this.urlUtils.getUrlScheme(e.src||e.data);if(i&&"file"!=i&&"filesystem"!=i&&(!n.target||"_self"==n.target))return void("object"==e.tagName.toLowerCase()?e.setAttribute("data",n.href):e.setAttribute("src",n.href));this.sitesProvider.isLoggedIn()?this.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(n.href):this.utils.openInBrowser(n.href)}else"_parent"==n.target||"_top"==n.target||"_blank"==n.target?(t.preventDefault(),this.utils.openFile(n.href).catch(function(e){o.domUtils.showErrorModal(e)})):!this.platform.is("ios")||n.target&&"_self"!=n.target||(t.preventDefault(),"object"==e.tagName.toLowerCase()?e.setAttribute("data",n.href):e.setAttribute("src",n.href))}},CoreIframeUtilsProvider.FRAME_TAGS=["iframe","frame","object","embed"],CoreIframeUtilsProvider;var e}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(54),r=(t(446),this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})}),i=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},l=function(){function CoreUserProvider(e,n,t,o,r,i,l){this.sitesProvider=n,this.utils=t,this.filepoolProvider=o,this.appProvider=r,this.userOffline=i,this.pushNotificationsProvider=l,this.ROOT_CACHE_KEY="mmUser:",this.USERS_TABLE="users",this.siteSchema={name:"CoreUserProvider",version:1,canBeCleared:[this.USERS_TABLE],tables:[{name:this.USERS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"fullname",type:"TEXT"},{name:"profileimageurl",type:"TEXT"}]}]},this.logger=e.getInstance("CoreUserProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=CoreUserProvider,CoreUserProvider.prototype.canSearchParticipants=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.canSearchParticipantsInSite(e)})},CoreUserProvider.prototype.canSearchParticipantsInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_enrol_search_users")},CoreUserProvider.prototype.changeProfilePicture=function(e,n){var t={draftitemid:e,delete:0,userid:n};return this.sitesProvider.getCurrentSite().write("core_user_update_picture",t).then(function(e){return e.success?e.profileimageurl:Promise.reject(null)})},CoreUserProvider.prototype.deleteStoredUser=function(e,n){var t=this;if(isNaN(e))return Promise.reject(null);var o=[];return n=n||this.sitesProvider.getCurrentSiteId(),o.push(this.invalidateUserCache(e,n)),o.push(this.sitesProvider.getSite(n).then(function(n){return n.getDb().deleteRecords(t.USERS_TABLE,{id:e})})),Promise.all(o)},CoreUserProvider.prototype.getParticipants=function(n,t,r,i,l){var s=this;return void 0===t&&(t=0),void 0===r&&(r=e.PARTICIPANTS_LIST_LIMIT),this.sitesProvider.getSite(i).then(function(e){s.logger.debug("Get participants for course '"+n+"' starting at '"+t+"'");var a={courseid:n,options:[{name:"limitfrom",value:t},{name:"limitnumber",value:r},{name:"sortby",value:"siteorder"}]},u={cacheKey:s.getParticipantsListCacheKey(n),updateFrequency:o.a.FREQUENCY_RARELY};return l&&(u.getFromCache=!1,u.emergencyCache=!1),e.read("core_enrol_get_enrolled_users",a,u).then(function(e){var n=e.length>=r;return s.storeUsers(e,i),{participants:e,canLoadMore:n}})})},CoreUserProvider.prototype.getParticipantsListCacheKey=function(e){return this.ROOT_CACHE_KEY+"list:"+e},CoreUserProvider.prototype.getProfile=function(e,n,t,o){var r=this;return void 0===t&&(t=!1),o=o||this.sitesProvider.getCurrentSiteId(),t?this.getUserFromLocalDb(e,o).catch(function(){return r.getUserFromWS(e,n,o)}):this.getUserFromWS(e,n,o).catch(function(){return r.getUserFromLocalDb(e,o)})},CoreUserProvider.prototype.getUserCacheKey=function(e){return this.ROOT_CACHE_KEY+"data:"+e},CoreUserProvider.prototype.getUserFromLocalDb=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.USERS_TABLE,{id:e})})},CoreUserProvider.prototype.getUserFromWS=function(e,n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i,l,s={cacheKey:r.getUserCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n&&n!=t.getSiteHomeId()?(r.logger.debug("Get participant with ID '"+e+"' in course '"+n),i="core_user_get_course_user_profiles",l={userlist:[{userid:e,courseid:n}]}):(r.logger.debug("Get user with ID '"+e+"'"),i="core_user_get_users_by_field",l={field:"id",values:[e]}),t.read(i,l,s).then(function(e){if(0==e.length)return Promise.reject("Cannot retrieve user info.");var n=e.shift();return n.country&&(n.country=r.utils.getCountryName(n.country)),r.storeUser(n.id,n.fullname,n.profileimageurl),n})})},CoreUserProvider.prototype.getUserPreference=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.userOffline.getPreference(e,n).catch(function(){return null}).then(function(o){return o&&!t.appProvider.isOnline()?o.value:t.getUserPreferenceOnline(e,n).then(function(n){return o&&o.value!=o.onlinevalue&&o.onlinevalue==n?o.value:t.userOffline.setPreference(e,n,n).then(function(){return n})})})},CoreUserProvider.prototype.getUserPreferenceCacheKey=function(e){return this.ROOT_CACHE_KEY+"preference:"+e},CoreUserProvider.prototype.getUserPreferenceOnline=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var r={name:e},i={cacheKey:t.getUserPreferenceCacheKey(r.name),updateFrequency:o.a.FREQUENCY_SOMETIMES};return n.read("core_user_get_user_preferences",r,i).then(function(e){return e.preferences[0]?e.preferences[0].value:null})})},CoreUserProvider.prototype.invalidateUserCache=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUserCacheKey(e))})},CoreUserProvider.prototype.invalidateParticipantsList=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getParticipantsListCacheKey(e))})},CoreUserProvider.prototype.invalidateUserPreference=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUserPreferenceCacheKey(e))})},CoreUserProvider.prototype.isParticipantsDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isParticipantsDisabledInSite(e)})},CoreUserProvider.prototype.isParticipantsDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreCourseOptionsDelegate_CoreUserParticipants")},CoreUserProvider.prototype.isPluginEnabledForCourse=function(e,n){return e?this.utils.promiseWorks(this.getParticipants(e,0,1,n)):Promise.reject(null)},CoreUserProvider.prototype.isUpdatePictureDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreUserDelegate_picture")},CoreUserProvider.prototype.logView=function(e,n,t){var o={userid:e},r="core_user_view_user_profile";return n&&(o.courseid=n),this.pushNotificationsProvider.logViewEvent(e,t,"user",r,{courseid:n}),this.sitesProvider.getCurrentSite().write(r,o)},CoreUserProvider.prototype.logParticipantsView=function(e){var n={courseid:e};return this.pushNotificationsProvider.logViewListEvent("user","core_user_view_user_list",n),this.sitesProvider.getCurrentSite().write("core_user_view_user_list",n)},CoreUserProvider.prototype.prefetchProfiles=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r={},i=[];return e.forEach(function(e){null!==e&&(e=Number(e),!isNaN(e)&&!r[e]&&e>0&&(r[e]=!0,i.push(o.getProfile(e,n,!1,t).then(function(e){if(e.profileimageurl)return o.filepoolProvider.addToQueueByUrl(t,e.profileimageurl)}).catch(function(n){o.logger.warn("Ignore error when prefetching user "+e,n)}))))}),Promise.all(i)},CoreUserProvider.prototype.prefetchUserAvatars=function(e,n,t){return r(this,void 0,void 0,function(){var o,l,s=this;return i(this,function(a){switch(a.label){case 0:return t=t||this.sitesProvider.getCurrentSiteId(),o={},l=e.map(function(e){return r(s,void 0,void 0,function(){var r,l;return i(this,function(i){switch(i.label){case 0:if(!(r=e[n])||o[r])return[2];o[r]=!0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.filepoolProvider.addToQueueByUrl(t,r)];case 2:return i.sent(),[3,4];case 3:return l=i.sent(),this.logger.warn("Ignore error when prefetching user avatar "+r,e,l),[3,4];case 4:return[2]}})})}),[4,Promise.all(l)];case 1:return a.sent(),[2]}})})},CoreUserProvider.prototype.searchParticipants=function(n,t,o,r,i,l){var s=this;return void 0===o&&(o=!0),void 0===r&&(r=0),void 0===i&&(i=e.PARTICIPANTS_LIST_LIMIT),this.sitesProvider.getSite(l).then(function(e){return e.read("core_enrol_search_users",{courseid:n,search:t,searchanywhere:o?1:0,page:r,perpage:i},{getFromCache:!1}).then(function(e){var n=e.length>=i;return s.storeUsers(e,l),{participants:e,canLoadMore:n}})})},CoreUserProvider.prototype.storeUser=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={id:e,fullname:n,profileimageurl:t};return o.getDb().insertRecord(r.USERS_TABLE,i)})},CoreUserProvider.prototype.storeUsers=function(e,n){var t=this,o=[];return e.forEach(function(e){void 0===e.id||isNaN(parseInt(e.id,10))||o.push(t.storeUser(parseInt(e.id,10),e.fullname,e.profileimageurl,n))}),Promise.all(o)},CoreUserProvider.prototype.setUserPreference=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r,i=this.appProvider.isOnline();if(i){r=this.updateUserPreferences([{type:e,value:n}],void 0,void 0,t).catch(function(e){return i=!1,Promise.reject(e)})}else r=Promise.resolve();return r.finally(function(){var t=i?n:void 0;return Promise.all([o.userOffline.setPreference(e,n,t),o.invalidateUserPreference(e).catch(function(){})])})},CoreUserProvider.prototype.updateUserPreference=function(e,n,t,o){return this.updateUserPreferences([{type:e,value:n}],void 0,t,o)},CoreUserProvider.prototype.updateUserPreferences=function(e,n,t,o){return this.sitesProvider.getSite(o).then(function(o){var r={userid:t=t||o.getUserId(),preferences:e};return void 0!==n&&(r.emailstop=n?1:0),o.write("core_user_update_user_preferences",r,{responseExpected:!1})})},CoreUserProvider.PARTICIPANTS_LIST_LIMIT=50,CoreUserProvider.PROFILE_REFRESHED="CoreUserProfileRefreshed",CoreUserProvider.PROFILE_PICTURE_UPDATED="CoreUserProfilePictureUpdated",CoreUserProvider;var e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return u});var o=t(0),r=t(1),i=(t(6),t(4),t(10)),l=t(43),s=t(175),a=t(229),u=(t(29),function(){function CoreFormatTextDirective(e,n,t,o,i,l,s,a,u,d,c,p,f,h,m,_,g,v,C,y,P){this.sitesProvider=n,this.domUtils=t,this.textUtils=o,this.translate=i,this.platform=l,this.utils=s,this.urlUtils=a,this.loggerProvider=u,this.filepoolProvider=d,this.appProvider=c,this.contentLinksHelper=p,this.navCtrl=f,this.content=h,this.svComponent=m,this.iframeUtils=_,this.eventsProvider=g,this.filterProvider=v,this.filterHelper=C,this.filterDelegate=y,this.viewContainerRef=P,this.adaptImg=!0,this.element=e.nativeElement,this.element.classList.add("opacity-hide"),this.afterRender=new r.r,this.element.addEventListener("click",this.elementClicked.bind(this))}return CoreFormatTextDirective.prototype.ngOnChanges=function(e){(e.text||e.filter||e.contextLevel||e.contextInstanceId)&&(this.hideShowMore(),this.formatAndRenderContents())},CoreFormatTextDirective.prototype.addExternalContent=function(e){var n=new a.a(e,this.loggerProvider,this.filepoolProvider,this.platform,this.sitesProvider,this.domUtils,this.urlUtils,this.appProvider,this.utils);return n.component=this.component,n.componentId=this.componentId,n.siteId=this.siteId,n.src=e.getAttribute("src"),n.href=e.getAttribute("href"),n.targetSrc=e.getAttribute("target-src"),n.poster=e.getAttribute("poster"),n.ngAfterViewInit(),n},CoreFormatTextDirective.prototype.addMediaAdaptClass=function(e){e.classList.add("core-media-adapt-width")},CoreFormatTextDirective.prototype.adaptImage=function(e){var n=document.createElement("span"),t=e.attributes.getNamedItem("width"),o=parseInt(t&&t.value);isNaN(o)||(e.style.width=t.value.indexOf("%")<0?o+"px":o+"%"),n.classList.add("core-adapted-img-container"),n.style.cssFloat=e.style.cssFloat,e.classList.contains("atto_image_button_right")?n.classList.add("atto_image_button_right"):e.classList.contains("atto_image_button_left")?n.classList.add("atto_image_button_left"):e.classList.contains("atto_image_button_text-top")?n.classList.add("atto_image_button_text-top"):e.classList.contains("atto_image_button_middle")?n.classList.add("atto_image_button_middle"):e.classList.contains("atto_image_button_text-bottom")&&n.classList.add("atto_image_button_text-bottom"),this.domUtils.wrapElement(e,n)},CoreFormatTextDirective.prototype.addMagnifyingGlasses=function(){var e=this,n=Array.from(this.element.querySelectorAll(".core-adapted-img-container > img"));if(n.length){var t=this.getElementWidth(this.element)||window.innerWidth;n.forEach(function(n){if(!n.closest("a")){var o=parseInt(n.getAttribute("width"));if(o||(o=n.naturalWidth),!(o<=t)){var r=e.textUtils.escapeHTML(n.getAttribute("data-original-src")||n.getAttribute("src")),i=e.textUtils.escapeHTML(e.translate.instant("core.openfullimage")),l=document.createElement("a");l.classList.add("core-image-viewer-icon"),l.setAttribute("aria-label",i),l.innerHTML='<ion-icon name="search" class="icon icon-md ion-md-search"></ion-icon>',l.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.domUtils.viewImage(r,n.getAttribute("alt"),e.component,e.componentId,!0)}),n.parentNode.appendChild(l)}}})}},CoreFormatTextDirective.prototype.calculateHeight=function(){var e=this.element.style.maxHeight;this.element.style.maxHeight=null;var n=this.getElementHeight(this.element);this.element.style.maxHeight=e,!n||n>this.maxHeight?this.showMoreDisplayed||this.displayShowMore():this.showMoreDisplayed&&this.hideShowMore()},CoreFormatTextDirective.prototype.displayShowMore=function(){var e=this.utils.isTrueOrOne(this.fullOnClick)||!1,n=document.createElement("div");n.classList.add("core-show-more"),n.innerHTML=this.translate.instant("core.showmore"),this.element.appendChild(n),e&&this.element.classList.add("core-expand-in-fullview"),this.element.classList.add("core-text-formatted"),this.element.classList.add("core-shortened"),this.element.style.maxHeight=this.maxHeight+"px",this.showMoreDisplayed=!0},CoreFormatTextDirective.prototype.elementClicked=function(e){if(!e.defaultPrevented){var n=this.utils.isTrueOrOne(this.fullOnClick)||!1;if(n||this.showMoreDisplayed)if(e.preventDefault(),e.stopPropagation(),n){var t=void 0!==this.filter?this.utils.isTrueOrOne(this.filter):void 0;this.textUtils.expandText(this.fullTitle||this.translate.instant("core.description"),this.text,this.component,this.componentId,void 0,t,this.contextLevel,this.contextInstanceId,this.courseId)}else this.element.classList.toggle("core-shortened")}},CoreFormatTextDirective.prototype.finishRender=function(){this.element.classList.remove("opacity-hide"),this.afterRender.emit()},CoreFormatTextDirective.prototype.formatAndRenderContents=function(){var e=this;if(!this.text)return this.element.innerHTML="",void this.finishRender();this.maxHeight&&!this.element.getAttribute("maxHeight")&&this.element.setAttribute("maxHeight",String(this.maxHeight)),this.element.getAttribute("singleLine")||this.element.setAttribute("singleLine",String(this.utils.isTrueOrOne(this.singleLine))),this.text=this.text?this.text.trim():"",this.formatContents().then(function(n){e.element.classList.add("core-disable-media-adapt"),e.element.innerHTML="",e.maxHeight&&""!=n.div.innerHTML?(e.domUtils.moveChildren(n.div,e.element),e.calculateHeight(),e.addMagnifyingGlasses(),e.loadingChangedListener||(e.loadingChangedListener=e.eventsProvider.on(i.a.CORE_LOADING_CHANGED,function(n){n.loaded&&e.domUtils.closest(e.element.parentElement,"#"+n.uniqueId)&&e.calculateHeight()}))):(e.domUtils.moveChildren(n.div,e.element),e.addMagnifyingGlasses()),n.options.filter&&e.filterDelegate.handleHtml(e.element,n.filters,e.viewContainerRef,n.options,[],e.component,e.componentId,n.siteId),e.element.classList.remove("core-disable-media-adapt"),e.finishRender()})},CoreFormatTextDirective.prototype.formatContents=function(){var e,n=this,t={div:null,filters:[],options:{},siteId:this.siteId};return this.sitesProvider.getSite(this.siteId).catch(function(){}).then(function(o){(e=o)&&(t.siteId=e.getId()),"course"==n.contextLevel&&n.contextInstanceId<=0&&(n.contextInstanceId=e.getSiteHomeId());var r=void 0===n.filter?!(!n.contextLevel||void 0===n.contextInstanceId):n.utils.isTrueOrOne(n.filter);return t.options={clean:n.utils.isTrueOrOne(n.clean),singleLine:n.utils.isTrueOrOne(n.singleLine),highlight:n.highlight,courseId:n.courseId,wsNotFiltered:n.utils.isTrueOrOne(n.wsNotFiltered)},r?n.filterHelper.getFiltersAndFormatText(n.text,n.contextLevel,n.contextInstanceId,t.options,t.siteId).then(function(e){return t.filters=e.filters,e.text}):n.filterProvider.formatText(n.text,t.options,[],t.siteId)}).then(function(o){var r,i,a,u,d,c,p,f,h,m=document.createElement("div"),_=e&&e.isVersionGreaterEqualThan(["3.3.4","3.4"]),g=n.svComponent?n.svComponent.getMasterNav():n.navCtrl;m.innerHTML=o,r=Array.from(m.querySelectorAll("img")),i=Array.from(m.querySelectorAll("a")),a=Array.from(m.querySelectorAll("audio")),u=Array.from(m.querySelectorAll("video")),d=Array.from(m.querySelectorAll("iframe")),c=Array.from(m.querySelectorAll(".button")),p=Array.from(m.querySelectorAll("*[style]")),f=Array.from(m.querySelectorAll("button,input,select,textarea")),h=Array.from(m.querySelectorAll(l.a.FRAME_TAGS.join(",").replace(/iframe,?/,""))),i.forEach(function(e){var t=new s.a(e,n.domUtils,n.utils,n.sitesProvider,n.urlUtils,n.contentLinksHelper,n.navCtrl,n.content,n.svComponent,n.textUtils);t.capture=!0,t.ngOnInit(),n.addExternalContent(e)});var v=[];r&&r.length>0&&r.forEach(function(e){n.addMediaAdaptClass(e);var t=n.addExternalContent(e);t.invalid||v.push(t),n.utils.isTrueOrOne(n.adaptImg)&&!e.classList.contains("icon")&&n.adaptImage(e)}),a.forEach(function(e){n.treatMedia(e)}),u.forEach(function(e){n.treatMedia(e)}),d.forEach(function(t){n.treatIframe(t,e,_,g)}),c.forEach(function(e){e.querySelector("a")&&e.classList.add("core-button-with-inner-link")}),p.forEach(function(e){"A"!=e.tagName&&"IMG"!=e.tagName&&"AUDIO"!=e.tagName&&"VIDEO"!=e.tagName&&"SOURCE"!=e.tagName&&"TRACK"!=e.tagName&&n.addExternalContent(e)}),f.forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation()})}),h.forEach(function(e){n.iframeUtils.treatFrame(e,!1,g)}),n.domUtils.handleBootstrapTooltips(m);return(v.length?n.utils.timeoutPromise(n.utils.allPromises(v.map(function(e){return e.loaded?Promise.resolve():new Promise(function(n){var t=e.onLoad.subscribe(function(){t.unsubscribe(),n()})})})),5e3):Promise.resolve()).catch(function(){}).then(function(){return t.div=m,t})})},CoreFormatTextDirective.prototype.getElementWidth=function(e){var n=this.domUtils.getElementWidth(e);if(!n){var t=this.domUtils.getElementWidth(e.parentNode,!0,!1,!1,!0),o=getComputedStyle(e,null).display;e.style.display="inline-block",n=this.domUtils.getElementWidth(e),t>0&&(!n||n>t)&&(n=t),e.style.display=o}return n},CoreFormatTextDirective.prototype.getElementHeight=function(e){return this.domUtils.getElementHeight(e)||0},CoreFormatTextDirective.prototype.hideShowMore=function(){var e=this.element.querySelector("div.core-show-more");e&&e.remove(),this.element.classList.remove("core-expand-in-fullview"),this.element.classList.remove("core-text-formatted"),this.element.classList.remove("core-shortened"),this.element.style.maxHeight=null,this.showMoreDisplayed=!1},CoreFormatTextDirective.prototype.treatMedia=function(e){var n=this;this.addMediaAdaptClass(e),this.addExternalContent(e);var t=Array.from(e.querySelectorAll("source")),o=Array.from(e.querySelectorAll("track"));t.forEach(function(e){e.setAttribute("target-src",e.getAttribute("src")),e.removeAttribute("src"),n.addExternalContent(e)}),o.forEach(function(e){n.addExternalContent(e)}),e.addEventListener("click",function(e){e.stopPropagation()})},CoreFormatTextDirective.prototype.treatIframe=function(e,n,t,o){var r=this,i=e.src,l=this.sitesProvider.getCurrentSite();if(this.addMediaAdaptClass(e),l&&l.containsUrl(i))l.getAutoLoginUrl(i,!1).then(function(n){e.src=n,r.iframeUtils.treatFrame(e,!1,o)});else{if(i&&t){var s=e.src.match(/https?:\/\/player\.vimeo\.com\/video\/([0-9]+)/);if(s&&s[1]){var a=this.textUtils.concatenatePaths(n.getURL(),"/media/player/vimeo/wsplayer.php?video=")+s[1]+"&token="+n.getToken(),u=void 0,d=void 0;e.width?u=e.width:(u=this.getElementWidth(e))||(u=window.innerWidth),e.height?d=e.height:(d=this.getElementHeight(e))||(d=u),n.isVersionGreaterEqualThan("3.7")||(a+="&width="+u+"&height="+d),e.src=a,e.width||(e.width=u),e.height||(e.height=d),e.parentElement.classList.contains("embed-responsive")&&e.addEventListener("load",function(){if(e.contentDocument){var n=document.createElement("style");n.setAttribute("type","text/css"),n.innerHTML="iframe {width: 100%;height: 100%;}",e.contentDocument.head.appendChild(n)}})}}this.iframeUtils.treatFrame(e,!1,o)}},CoreFormatTextDirective=Object(o.__decorate)([Object(o.__param)(12,Object(r.E)()),Object(o.__param)(13,Object(r.E)()),Object(o.__param)(14,Object(r.E)())],CoreFormatTextDirective)}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return d});var o=t(0),r=t(10),i=t(1057),l=t(42),s=t(195),a=(t.n(s),t(147)),u=(t.n(a),t(99)),d=function(e){function CoreCourseModulePrefetchDelegate(n,t,o,l,s,a,u,d,c){var p=e.call(this,"CoreCourseModulePrefetchDelegate",n,t,d)||this;return p.sitesProvider=t,p.utils=o,p.courseProvider=l,p.filepoolProvider=s,p.timeUtils=a,p.fileProvider=u,p.eventsProvider=d,p.fileHelper=c,p.CHECK_UPDATES_TIMES_TABLE="check_updates_times",p.siteSchema={name:"CoreCourseModulePrefetchDelegate",version:1,tables:[{name:p.CHECK_UPDATES_TIMES_TABLE,columns:[{name:"courseId",type:"INTEGER",primaryKey:!0},{name:"time",type:"INTEGER",notNull:!0}]}]},p.ROOT_CACHE_KEY="mmCourse:",p.statusCache=new i.a,p.handlerNameProperty="modName",p.courseUpdatesPromises={},p.prefetchData={},p.sitesProvider.registerSiteSchema(p.siteSchema),d.on(r.a.LOGOUT,p.clearStatusCache.bind(p)),d.on(r.a.PACKAGE_STATUS_CHANGED,function(e){p.updateStatusCache(e.status,e.component,e.componentId)},p.sitesProvider.getCurrentSiteId()),p}return Object(o.__extends)(CoreCourseModulePrefetchDelegate,e),CoreCourseModulePrefetchDelegate.prototype.canCheckUpdates=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_course_check_updates")},CoreCourseModulePrefetchDelegate.prototype.canModuleUseCheckUpdates=function(e,n){var t=this.getPrefetchHandlerFor(e);return t?t.canUseCheckUpdates?Promise.resolve(t.canUseCheckUpdates(e,n)):Promise.resolve(!0):Promise.resolve(!1)},CoreCourseModulePrefetchDelegate.prototype.clearStatusCache=function(){this.statusCache.clear()},CoreCourseModulePrefetchDelegate.prototype.createToCheckList=function(e,n){var t=this,o={toCheck:[],cannotUse:[]},r=[];return e.forEach(function(e){r.push(t.getModuleStatusAndDownloadTime(e,n).then(function(r){if(r.status==l.a.DOWNLOADED)return t.canModuleUseCheckUpdates(e,n).then(function(n){n?o.toCheck.push({contextlevel:"module",id:e.id,since:r.downloadTime||0}):o.cannotUse.push(e)})}).catch(function(){}))}),Promise.all(r).then(function(){return o.toCheck.sort(function(e,n){return e.id>=n.id?1:-1}),o})},CoreCourseModulePrefetchDelegate.prototype.determineModuleStatus=function(e,n,t){var o=this.getPrefetchHandlerFor(e),r=this.sitesProvider.getCurrentSiteId();if(o)if(n==l.a.DOWNLOADING)this.filepoolProvider.getPackageDownloadPromise(r,o.component,e.id)||o.prefetch(e);else if(o.determineStatus)return t=t||this.canCheckUpdates(),o.determineStatus(e,n,t);return n},CoreCourseModulePrefetchDelegate.prototype.getCourseUpdates=function(e,n){var t=this;if(!this.canCheckUpdates())return Promise.reject(null);var o=s.Md5.hashAsciiStr(n+"#"+JSON.stringify(e)),r=this.sitesProvider.getCurrentSiteId();return this.courseUpdatesPromises[r]&&this.courseUpdatesPromises[r][o]?this.courseUpdatesPromises[r][o]:(this.courseUpdatesPromises[r]||(this.courseUpdatesPromises[r]={}),this.courseUpdatesPromises[r][o]=this.createToCheckList(e,n).then(function(e){var o={};return e.cannotUse.forEach(function(e){o[e.id]=!1}),e.toCheck.length?t.sitesProvider.getSite(r).then(function(r){var i={courseid:n,tocheck:e.toCheck},l={cacheKey:t.getCourseUpdatesCacheKey(n),emergencyCache:!1,uniqueCacheKey:!0};return r.read("core_course_check_updates",i,l).then(function(i){if(!i||void 0===i.instances)return Promise.reject(null);var l={courseId:n,time:t.timeUtils.timestamp()};return r.getDb().insertRecord(t.CHECK_UPDATES_TIMES_TABLE,l).catch(function(){}),t.treatCheckUpdatesResult(e.toCheck,i,o)}).catch(function(s){return r.getDb().getRecord(t.CHECK_UPDATES_TIMES_TABLE,{courseId:n}).then(function(n){return l.getCacheUsingCacheKey=!0,l.omitExpires=!0,r.read("core_course_check_updates",i,l).then(function(r){return r&&void 0!==r.instances?t.treatCheckUpdatesResult(e.toCheck,r,o,n.time):Promise.reject(s)})},function(){return o})})}):o}).finally(function(){delete t.courseUpdatesPromises[r][o]}),this.courseUpdatesPromises[r][o])},CoreCourseModulePrefetchDelegate.prototype.getCourseUpdatesByCourseId=function(e){var n=this;return this.canCheckUpdates()?this.courseProvider.getSections(e,!1,!0,{omitExpires:!0}).then(function(t){return n.getCourseUpdates(n.courseProvider.getSectionsModules(t),e)}):Promise.reject(null)},CoreCourseModulePrefetchDelegate.prototype.getCourseUpdatesCacheKey=function(e){return this.ROOT_CACHE_KEY+"courseUpdates:"+e},CoreCourseModulePrefetchDelegate.prototype.getDownloadSize=function(e,n){var t=this;return this.getModulesStatus(e,n).then(function(e){var o=[],r={size:0,total:!0};return e[l.a.NOT_DOWNLOADED].concat(e[l.a.OUTDATED]).forEach(function(e){o.push(t.getModuleDownloadSize(e,n).then(function(e){r.total=r.total&&e.total,r.size+=e.size}))}),Promise.all(o).then(function(){return r})})},CoreCourseModulePrefetchDelegate.prototype.getModuleDownloadSize=function(e,n,t){var o,r,i=this,l=this.getPrefetchHandlerFor(e);return l?this.isModuleDownloadable(e,n).then(function(s){return s?(r=i.filepoolProvider.getPackageId(l.component,e.id),void 0!==(o=i.statusCache.getValue(r,"downloadSize"))?o:Promise.resolve(l.getDownloadSize(e,n,t)).then(function(e){return i.statusCache.setValue(r,"downloadSize",e)}).catch(function(e){var n=i.statusCache.getValue(r,"downloadSize",!0);return n||Promise.reject(e)})):{size:0,total:!0}}):Promise.resolve({size:0,total:!1})},CoreCourseModulePrefetchDelegate.prototype.getModuleDownloadedSize=function(e,n){var t,o,r=this,i=this.getPrefetchHandlerFor(e);return i?this.isModuleDownloadable(e,n).then(function(l){return l?(o=r.filepoolProvider.getPackageId(i.component,e.id),void 0!==(t=r.statusCache.getValue(o,"downloadedSize"))?t:(i.getDownloadedSize?Promise.resolve(i.getDownloadedSize(e,n)):r.getModuleFiles(e,n).then(function(e){var n=r.sitesProvider.getCurrentSiteId(),t=[],o=0;return e.forEach(function(e){var i=e.url||e.fileurl;t.push(r.filepoolProvider.getFilePathByUrl(n,i).then(function(t){return r.fileProvider.getFileSize(t).catch(function(){return r.filepoolProvider.isFileDownloadingByUrl(n,i).then(function(){return e.filesize}).catch(function(){return 0})}).then(function(e){o+=e})}))}),Promise.all(t).then(function(){return o})})).then(function(e){return r.statusCache.setValue(o,"downloadedSize",e)}).catch(function(){return r.statusCache.getValue(o,"downloadedSize",!0)})):0}):Promise.resolve(0)},CoreCourseModulePrefetchDelegate.prototype.getModuleFiles=function(e,n){var t=this.getPrefetchHandlerFor(e);return t.getFiles?Promise.resolve(t.getFiles(e,n)):t.loadContents?t.loadContents(e,n).then(function(){return e.contents}):Promise.resolve(e.contents||[])},CoreCourseModulePrefetchDelegate.prototype.getModuleStatus=function(e,n,t,o,r){var i=this,s=this.getPrefetchHandlerFor(e),a=this.sitesProvider.getCurrentSiteId(),u=this.canCheckUpdates();if(s){var d,c=s.component,p=this.filepoolProvider.getPackageId(c,e.id),f=this.statusCache.getValue(p,"status"),h=!0;return o||void 0===f?this.isModuleDownloadable(e,n).then(function(o){return o?i.filepoolProvider.getPackageStatus(a,c,e.id).then(function(o){if((f=s.determineStatus?s.determineStatus(e,o,u):o)!=l.a.DOWNLOADED)return f;if(void 0===t)d=i.getCourseUpdatesByCourseId(n);else{if(!1===t)return f;d=Promise.resolve(t)}return d.then(function(t){return t&&!1!==t[e.id]?i.moduleHasUpdates(e,n,t).then(function(n){return n?(f=l.a.OUTDATED,i.filepoolProvider.storePackageStatus(a,f,c,e.id).catch(function(){}).then(function(){return f})):f}).catch(function(){var n=i.statusCache.getValue(p,"status",!0);return i.determineModuleStatus(e,n,u)}):l.a.OUTDATED},function(){return h=!1,i.storeCourseAndSection(p,n,r),o})}):l.a.NOT_DOWNLOADABLE}).then(function(t){return h&&i.updateStatusCache(t,c,e.id,n,r),i.determineModuleStatus(e,t,u)}):(this.storeCourseAndSection(p,n,r),Promise.resolve(this.determineModuleStatus(e,f,u)))}return Promise.resolve(l.a.NOT_DOWNLOADABLE)},CoreCourseModulePrefetchDelegate.prototype.getModulesStatus=function(e,n,t,o,r,i){var s=this;void 0===i&&(i=!0);var a=[],u={total:0},d=l.a.NOT_DOWNLOADABLE;return u[l.a.NOT_DOWNLOADED]=[],u[l.a.DOWNLOADED]=[],u[l.a.DOWNLOADING]=[],u[l.a.OUTDATED]=[],(i?this.getCourseUpdatesByCourseId(n).catch(function(){return!1}):Promise.resolve(!1)).then(function(t){return e.forEach(function(e){var i=s.getPrefetchHandlerFor(e);if(i){if(r&&i.skipListStatus)return;var l=s.filepoolProvider.getPackageId(i.component,e.id);a.push(s.getModuleStatus(e,n,t,o).then(function(n){u[n]&&(d=s.filepoolProvider.determinePackagesStatus(d,n),u[n].push(e),u.total++)}).catch(function(n){var t=s.statusCache.getValue(l,"status",!0);if(void 0===t)return Promise.reject(n);u[t]&&(d=s.filepoolProvider.determinePackagesStatus(d,t),u[t].push(e),u.total++)}))}}),Promise.all(a).then(function(){return u.status=d,u})})},CoreCourseModulePrefetchDelegate.prototype.getModuleStatusAndDownloadTime=function(e,n){var t=this,o=this.getPrefetchHandlerFor(e),r=this.sitesProvider.getCurrentSiteId();if(o){var i=this.filepoolProvider.getPackageId(o.component,e.id),s=this.statusCache.getValue(i,"status");return void 0===s||this.fileHelper.isStateDownloaded(s)?this.isModuleDownloadable(e,n).then(function(n){return n?t.filepoolProvider.getPackageData(r,o.component,e.id).then(function(e){return{status:e.status,downloadTime:e.downloadTime||0}}):{status:l.a.NOT_DOWNLOADABLE}}):Promise.resolve({status:s})}return Promise.resolve({status:l.a.NOT_DOWNLOADABLE})},CoreCourseModulePrefetchDelegate.prototype.getModuleUpdates=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return r.getModuleStatusAndDownloadTime(e,n).then(function(i){return r.fileHelper.isStateDownloaded(i.status)?r.canModuleUseCheckUpdates(e,n).then(function(l){if(!l)return{};var s={courseid:n,tocheck:[{contextlevel:"module",id:e.id,since:i.downloadTime||0}]},a={cacheKey:r.getModuleUpdatesCacheKey(n,e.id)};return t&&(a.getFromCache=!1,a.emergencyCache=!1),o.read("core_course_check_updates",s,a).then(function(e){return e&&e.instances&&e.instances[0]?e.instances[0]:Promise.reject(null)})}):{}})})},CoreCourseModulePrefetchDelegate.prototype.getModuleUpdatesCacheKey=function(e,n){return this.getCourseUpdatesCacheKey(e)+":"+n},CoreCourseModulePrefetchDelegate.prototype.getPrefetchHandlerFor=function(e){return this.getHandler(e.modname,!0)},CoreCourseModulePrefetchDelegate.prototype.invalidateCourseUpdates=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getCourseUpdatesCacheKey(e))},CoreCourseModulePrefetchDelegate.prototype.invalidateModules=function(e,n){var t=this,o=[];return e.forEach(function(e){var r=t.getPrefetchHandlerFor(e);r&&(r.invalidateModule&&o.push(r.invalidateModule(e,n).catch(function(){})),t.invalidateModuleStatusCache(e))}),o.push(this.invalidateCourseUpdates(n)),Promise.all(o)},CoreCourseModulePrefetchDelegate.prototype.invalidateModuleStatusCache=function(e){var n=this.getPrefetchHandlerFor(e);n&&this.statusCache.invalidate(this.filepoolProvider.getPackageId(n.component,e.id))},CoreCourseModulePrefetchDelegate.prototype.invalidateModuleUpdates=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getModuleUpdatesCacheKey(e,n))})},CoreCourseModulePrefetchDelegate.prototype.isBeingDownloaded=function(e){var n=this.sitesProvider.getCurrentSiteId();return!(!this.prefetchData[n]||!this.prefetchData[n][e])},CoreCourseModulePrefetchDelegate.prototype.isModuleDownloadable=function(e,n){var t=this;if(!1===e.uservisible)return Promise.resolve(!1);var o=this.getPrefetchHandlerFor(e);if(o){if("function"==typeof o.isDownloadable){var r=this.filepoolProvider.getPackageId(o.component,e.id),i=this.statusCache.getValue(r,"downloadable");return void 0!==i?Promise.resolve(i):Promise.resolve(o.isDownloadable(e,n)).then(function(e){return t.statusCache.setValue(r,"downloadable",e)}).catch(function(){return!1})}return Promise.resolve(!0)}return Promise.resolve(!1)},CoreCourseModulePrefetchDelegate.prototype.moduleHasUpdates=function(e,n,t){var o=this.getPrefetchHandlerFor(e),r=t[e.id];if(o&&o.hasUpdates)return Promise.resolve(o.hasUpdates(e,n,r));if(!(r&&r.updates&&r.updates.length))return Promise.resolve(!1);if(o&&o.updatesNames&&o.updatesNames.test){for(var i=0,l=r.updates.length;i<l;i++)if(o.updatesNames.test(r.updates[i].name))return Promise.resolve(!0);return Promise.resolve(!1)}return Promise.resolve(!0)},CoreCourseModulePrefetchDelegate.prototype.prefetchModule=function(e,n,t){var o=this.getPrefetchHandlerFor(e);return o?this.syncModule(e,n).then(function(){return o.prefetch(e,n,t)}):Promise.resolve()},CoreCourseModulePrefetchDelegate.prototype.syncModules=function(e,n){var t=this;return Promise.all(e.map(function(e){return t.syncModule(e,n).then(function(){return t.invalidateCourseUpdates(n).catch(function(){})})}))},CoreCourseModulePrefetchDelegate.prototype.syncModule=function(e,n){var t=this,o=this.getPrefetchHandlerFor(e);return o&&o.sync?o.sync(e,n).then(function(n){return t.invalidateModuleStatusCache(e),n}).catch(function(){}):Promise.resolve()},CoreCourseModulePrefetchDelegate.prototype.prefetchModules=function(e,n,t,o){var r=this,i=this.sitesProvider.getCurrentSiteId(),l=this.prefetchData[i]&&this.prefetchData[i][e];if(l)return o&&l.subscriptions.push(l.observable.subscribe(o)),l.promise;var s=0,u=[],d=n.length,c=n.map(function(e){return e.id}),p={observable:new a.BehaviorSubject({count:s,total:d}),promise:void 0,subscriptions:[]};return o&&p.observable.subscribe(o),n.forEach(function(e){var n=r.getPrefetchHandlerFor(e);n&&u.push(r.isModuleDownloadable(e,t).then(function(o){if(o)return n.prefetch(e,t).then(function(){var n=c.indexOf(e.id);n>-1&&(c.splice(n,1),p.observable.next({count:++s,total:d}))})}))}),p.promise=this.utils.allPromises(u).finally(function(){p.subscriptions.forEach(function(e){e.unsubscribe()}),delete r.prefetchData[i][e]}),this.prefetchData[i]||(this.prefetchData[i]={}),this.prefetchData[i][e]=p,p.promise},CoreCourseModulePrefetchDelegate.prototype.removeModuleFiles=function(e,n){var t=this,o=this.getPrefetchHandlerFor(e),r=this.sitesProvider.getCurrentSiteId();return(o&&o.removeFiles?o.removeFiles(e,n):this.getModuleFiles(e,n).then(function(e){var n=[];return e.forEach(function(e){n.push(t.filepoolProvider.removeFileByUrl(r,e.url||e.fileurl).catch(function(){}))}),Promise.all(n)})).then(function(){if(o){var n=t.filepoolProvider.getPackageId(o.component,e.id);return t.statusCache.setValue(n,"downloadedSize",0),t.filepoolProvider.storePackageStatus(r,l.a.NOT_DOWNLOADED,o.component,e.id)}})},CoreCourseModulePrefetchDelegate.prototype.setOnProgress=function(e,n){var t=this.sitesProvider.getCurrentSiteId(),o=this.prefetchData[t]&&this.prefetchData[t][e];o&&o.subscriptions.push(o.observable.subscribe(n))},CoreCourseModulePrefetchDelegate.prototype.storeCourseAndSection=function(e,n,t){n&&this.statusCache.setValue(e,"courseId",n),t&&t>0&&this.statusCache.setValue(e,"sectionId",t)},CoreCourseModulePrefetchDelegate.prototype.treatCheckUpdatesResult=function(e,n,t,o){return this.utils.arrayToObject(n.instances,"id",t),n.warnings.forEach(function(e){"missingcallback"==e.warningcode&&(t[e.itemid]=!1)}),o&&e.forEach(function(e){t[e.id]&&e.since>o&&delete t[e.id]}),t},CoreCourseModulePrefetchDelegate.prototype.updateStatusCache=function(e,n,t,o,i){var l,s=this.filepoolProvider.getPackageId(n,t),a=this.statusCache.getValue(s,"status",!0);l=void 0!==a&&a!==e,this.storeCourseAndSection(s,o,i),l?(o||(o=this.statusCache.getValue(s,"courseId",!0)),i||(i=this.statusCache.getValue(s,"sectionId",!0)),this.statusCache.invalidate(s),this.statusCache.setValue(s,"status",e),i&&this.eventsProvider.trigger(r.a.SECTION_STATUS_CHANGED,{sectionId:i,courseId:o},this.sitesProvider.getCurrentSiteId())):this.statusCache.setValue(s,"status",e)},CoreCourseModulePrefetchDelegate}(u.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4),t(744);var o=t(10),r=function(){function CoreLoadingComponent(e,n,t,o){this.translate=e,this.eventsProvider=t,this.element=n.nativeElement,this.uniqueId="core-loading-content-"+o.getUniqueId("CoreLoadingComponent")}return CoreLoadingComponent.prototype.ngOnInit=function(){this.message||(this.message=this.translate.instant("core.loading")),this.hideUntil&&(this.element.classList.add("core-loading-loaded"),this.content.nativeElement.classList.add("core-loading-content"))},CoreLoadingComponent.prototype.ngOnChanges=function(e){var n=this;e.hideUntil&&(!0===e.hideUntil.currentValue?setTimeout(function(){n.element.classList.add("core-loading-loaded"),setTimeout(function(){n.content.nativeElement.classList.add("core-loading-content"),n.content.nativeElement.classList.remove("core-loading-content-loading")},500)}):(this.element.classList.remove("core-loading-loaded"),this.content.nativeElement.classList.remove("core-loading-content"),this.content.nativeElement.classList.add("core-loading-content-loading")),setTimeout(function(){n.eventsProvider.trigger(o.a.CORE_LOADING_CHANGED,{loaded:e.hideUntil.currentValue,uniqueId:n.uniqueId})}))},CoreLoadingComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(54),r=this&&this.__assign||Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function CoreCoursesProvider(e,n,t){this.sitesProvider=n,this.eventsProvider=t,this.ROOT_CACHE_KEY="mmCourses:",this.logger=e.getInstance("CoreCoursesProvider")}return e=CoreCoursesProvider,CoreCoursesProvider.prototype.canGetAdminAndNavOptions=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_course_get_user_navigation_options")&&this.sitesProvider.wsAvailableInCurrentSite("core_course_get_user_administration_options")},CoreCoursesProvider.prototype.getCategories=function(e,n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={criteria:[{key:0==e?"parent":"id",value:e}],addsubcategories:n?1:0},l={cacheKey:r.getCategoriesCacheKey(e,n),updateFrequency:o.a.FREQUENCY_RARELY};return t.read("core_course_get_categories",i,l)})},CoreCoursesProvider.prototype.getCategoriesCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"categories:"+e+":"+!!n},CoreCoursesProvider.prototype.getCourseIdsForAdminAndNavOptions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(o){var r=o.getSiteHomeId();return 1==e.length?t.getCourseIdsIfEnrolled(e[0],n):(e.length>1&&-1==e.indexOf(r)&&e.push(r),e.sort(function(e,n){return n-e}),e)})},CoreCoursesProvider.prototype.getCourseIdsIfEnrolled=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(o){var r=o.getSiteHomeId();return t.getUserCourses(!0,n).then(function(n){if(e==r||!!n.find(function(n){return n.id==e})){var t=n.map(function(e){return e.id});return t.push(r),t.sort(function(e,n){return n-e}),t}return[e]}).catch(function(){return[e]})})},CoreCoursesProvider.prototype.isDownloadCourseDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isDownloadCoursesDisabledInSite(e)})},CoreCoursesProvider.prototype.isDownloadCourseDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isOfflineDisabled()||e.isFeatureDisabled("NoDelegate_CoreCourseDownload")},CoreCoursesProvider.prototype.isDownloadCoursesDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isDownloadCoursesDisabledInSite(e)})},CoreCoursesProvider.prototype.isDownloadCoursesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isOfflineDisabled()||e.isFeatureDisabled("NoDelegate_CoreCoursesDownload")},CoreCoursesProvider.prototype.isMyCoursesDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isMyCoursesDisabledInSite(e)})},CoreCoursesProvider.prototype.isMyCoursesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_CoreCourses")},CoreCoursesProvider.prototype.isSearchCoursesDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isSearchCoursesDisabledInSite(e)})},CoreCoursesProvider.prototype.isSearchCoursesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreCourseOptionsDelegate_search")},CoreCoursesProvider.prototype.getCourse=function(e,n){return this.getCourses([e],n).then(function(e){return e&&e.length>0?e[0]:Promise.reject(null)})},CoreCoursesProvider.prototype.getCourseEnrolmentMethods=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var r={courseid:e},i={cacheKey:t.getCourseEnrolmentMethodsCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("core_enrol_get_course_enrolment_methods",r,i)})},CoreCoursesProvider.prototype.getCourseEnrolmentMethodsCacheKey=function(e){return this.ROOT_CACHE_KEY+"enrolmentmethods:"+e},CoreCoursesProvider.prototype.getCourseGuestEnrolmentInfo=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var r={instanceid:e},i={cacheKey:t.getCourseGuestEnrolmentInfoCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("enrol_guest_get_instance_info",r,i).then(function(e){return e.instanceinfo})})},CoreCoursesProvider.prototype.getCourseGuestEnrolmentInfoCacheKey=function(e){return this.ROOT_CACHE_KEY+"guestinfo:"+e},CoreCoursesProvider.prototype.getCourses=function(e,n){var t=this;return Array.isArray(e)?0===e.length?Promise.resolve([]):this.sitesProvider.getSite(n).then(function(n){var r={options:{ids:e}},i={cacheKey:t.getCoursesCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("core_course_get_courses",r,i)}):Promise.reject(null)},CoreCoursesProvider.prototype.getCoursesCacheKey=function(e){return this.ROOT_CACHE_KEY+"course:"+JSON.stringify(e)},CoreCoursesProvider.prototype.fixCoursesByFieldParams=function(e,n,t){if("id"==e||"ids"==e){var o=String(n).split(",");return this.getCourseIdsForAdminAndNavOptions(o,t).then(function(e){return e.length>1?{field:"ids",value:e.join(",")}:{field:"id",value:Number(e[0])}})}return Promise.resolve({field:e,value:n})},CoreCoursesProvider.prototype.getCourseByField=function(e,n,t){return this.getCoursesByField(e,n,t).then(function(e){return e&&e.length>0?e[0]:Promise.reject(null)})},CoreCoursesProvider.prototype.getCoursesByField=function(e,n,t){var r=this;t=t||this.sitesProvider.getCurrentSiteId();var i=n,l=!1;return this.fixCoursesByFieldParams(e,n,t).then(function(o){return l=o.field!=e||o.value!=n,e=o.field,n=o.value,r.sitesProvider.getSite(t)}).then(function(t){var s={field:e||"",value:e?n:""},a={cacheKey:r.getCoursesByFieldCacheKey(e,n),updateFrequency:o.a.FREQUENCY_RARELY};return t.read("core_course_get_courses_by_field",s,a).then(function(n){if(n.courses){if("ids"==e&&l){var t=String(i).split(","),o=[];n.courses.forEach(function(e){var n=t.indexOf(String(e.id));-1!=n&&(o.push(e),t.splice(n,1))}),n.courses=o}return n.courses.sort(function(e,n){return void 0===e.sortorder&&void 0===n.sortorder?n.id-e.id:void 0===e.sortorder?1:void 0===n.sortorder?-1:e.sortorder-n.sortorder})}return Promise.reject(null)})})},CoreCoursesProvider.prototype.getCoursesByFieldCacheKey=function(e,n){return e=e||"",n=e?n:"",this.ROOT_CACHE_KEY+"coursesbyfield:"+e+":"+n},CoreCoursesProvider.prototype.getEnrolledCoursesByCustomField=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.read("core_course_get_enrolled_courses_by_timeline_classification",{classification:"customfield",customfieldname:e,customfieldvalue:n},{getFromCache:!1}).then(function(e){return e.courses?e.courses:Promise.reject(null)})})},CoreCoursesProvider.prototype.isGetCoursesByFieldAvailable=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_course_get_courses_by_field")},CoreCoursesProvider.prototype.isGetCoursesByFieldAvailableInSite=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isGetCoursesByFieldAvailable(e)})},CoreCoursesProvider.prototype.getCoursesAdminAndNavOptions=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getCourseIdsForAdminAndNavOptions(e,n).then(function(e){var o,r,i=[];return i.push(t.getUserNavigationOptions(e,n).catch(function(){return{}}).then(function(e){o=e})),i.push(t.getUserAdministrationOptions(e,n).catch(function(){return{}}).then(function(e){r=e})),Promise.all(i).then(function(){return{navOptions:o,admOptions:r}})})},CoreCoursesProvider.prototype.getUserAdministrationOptionsCommonCacheKey=function(){return this.ROOT_CACHE_KEY+"administrationOptions:"},CoreCoursesProvider.prototype.getUserAdministrationOptionsCacheKey=function(e){return this.getUserAdministrationOptionsCommonCacheKey()+e.join(",")},CoreCoursesProvider.prototype.getUserAdministrationOptions=function(e,n){var t=this;return e&&0!=e.length?this.sitesProvider.getSite(n).then(function(n){var r={courseids:e},i={cacheKey:t.getUserAdministrationOptionsCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("core_course_get_user_administration_options",r,i).then(function(e){return t.formatUserAdminOrNavOptions(e.courses)})}):Promise.resolve({})},CoreCoursesProvider.prototype.getUserNavigationOptionsCommonCacheKey=function(){return this.ROOT_CACHE_KEY+"navigationOptions:"},CoreCoursesProvider.prototype.getUserNavigationOptionsCacheKey=function(e){return this.getUserNavigationOptionsCommonCacheKey()+e.join(",")},CoreCoursesProvider.prototype.getUserNavigationOptions=function(e,n){var t=this;return e&&0!=e.length?this.sitesProvider.getSite(n).then(function(n){var r={courseids:e},i={cacheKey:t.getUserNavigationOptionsCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("core_course_get_user_navigation_options",r,i).then(function(e){return t.formatUserAdminOrNavOptions(e.courses)})}):Promise.resolve({})},CoreCoursesProvider.prototype.formatUserAdminOrNavOptions=function(e){var n={};return e.forEach(function(e){var t={};e.options&&e.options.forEach(function(e){t[e.name]=e.available}),n[e.id]=t}),n},CoreCoursesProvider.prototype.getUserCourse=function(e,n,t){return e?this.getUserCourses(n,t).then(function(n){var t;for(var o in n)if(n[o].id==e){t=n[o];break}return t||Promise.reject(null)}):Promise.reject(null)},CoreCoursesProvider.prototype.getUserCourses=function(n,t,i){var l=this;return this.sitesProvider.getSite(t).then(function(t){var s={userid:t.getUserId()},a=i?l.sitesProvider.getReadingStrategyPreSets(i):{omitExpires:!!n},u=r({cacheKey:l.getUserCoursesCacheKey(),getCacheUsingCacheKey:!0,updateFrequency:o.a.FREQUENCY_RARELY},a);return t.isVersionGreaterEqualThan("3.7")&&(s.returnusercount=0),t.read("core_enrol_get_users_courses",s,u).then(function(n){if(l.userCoursesIds){var o=[],r=[],i=Object.keys(l.userCoursesIds),s={};n.forEach(function(e){s[e.id]=!0,l.userCoursesIds[e.id]||o.push(e.id)}),n.length-o.length!=i.length&&i.forEach(function(e){s[e]||r.push(Number(e))}),(o.length||r.length)&&l.eventsProvider.trigger(e.EVENT_MY_COURSES_CHANGED,{added:o,removed:r},t.getId()),l.userCoursesIds=s}else l.userCoursesIds={},n.forEach(function(e){l.userCoursesIds[e.id]=!0});return n})})},CoreCoursesProvider.prototype.getUserCoursesCacheKey=function(){return this.ROOT_CACHE_KEY+"usercourses"},CoreCoursesProvider.prototype.invalidateCategories=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getCategoriesCacheKey(e,n))})},CoreCoursesProvider.prototype.invalidateCourse=function(e,n){return this.invalidateCourses([e],n)},CoreCoursesProvider.prototype.invalidateCourseEnrolmentMethods=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCourseEnrolmentMethodsCacheKey(e))})},CoreCoursesProvider.prototype.invalidateCourseGuestEnrolmentInfo=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCourseGuestEnrolmentInfoCacheKey(e))})},CoreCoursesProvider.prototype.invalidateCoursesAdminAndNavOptions=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getCourseIdsForAdminAndNavOptions(e,n).then(function(e){var o=[];return o.push(t.invalidateUserAdministrationOptionsForCourses(e,n)),o.push(t.invalidateUserNavigationOptionsForCourses(e,n)),Promise.all(o)})},CoreCoursesProvider.prototype.invalidateCourses=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCoursesCacheKey(e))})},CoreCoursesProvider.prototype.invalidateCoursesByField=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.fixCoursesByFieldParams(e,n,t).then(function(r){return e=r.field,n=r.value,o.sitesProvider.getSite(t)}).then(function(t){return t.invalidateWsCacheForKey(o.getCoursesByFieldCacheKey(e,n))})},CoreCoursesProvider.prototype.invalidateUserAdministrationOptions=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getUserAdministrationOptionsCommonCacheKey())})},CoreCoursesProvider.prototype.invalidateUserAdministrationOptionsForCourses=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUserAdministrationOptionsCacheKey(e))})},CoreCoursesProvider.prototype.invalidateUserCourses=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getUserCoursesCacheKey())})},CoreCoursesProvider.prototype.invalidateUserNavigationOptions=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getUserNavigationOptionsCommonCacheKey())})},CoreCoursesProvider.prototype.invalidateUserNavigationOptionsForCourses=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUserNavigationOptionsCacheKey(e))})},CoreCoursesProvider.prototype.isGuestWSAvailable=function(){var e=this.sitesProvider.getCurrentSite();return e&&e.wsAvailable("enrol_guest_get_instance_info")},CoreCoursesProvider.prototype.search=function(n,t,o,r){return void 0===t&&(t=0),o=o||e.SEARCH_PER_PAGE,this.sitesProvider.getSite(r).then(function(e){return e.read("core_course_search_courses",{criterianame:"search",criteriavalue:n,page:t,perpage:o},{getFromCache:!1}).then(function(e){return{total:e.total,courses:e.courses}})})},CoreCoursesProvider.prototype.selfEnrol=function(n,t,o,r){return void 0===t&&(t=""),this.sitesProvider.getSite(r).then(function(r){var i={courseid:n,password:t};return o&&(i.instanceid=o),r.write("enrol_self_enrol_user",i).then(function(n){if(n){if(n.status)return!0;if(n.warnings&&n.warnings.length){var t;return n.warnings.forEach(function(e){"2"!=e.warningcode&&"3"!=e.warningcode&&"4"!=e.warningcode||(t=e.message)}),t?Promise.reject({code:e.ENROL_INVALID_KEY,message:t}):Promise.reject(n.warnings[0])}}return Promise.reject(null)})})},CoreCoursesProvider.prototype.setFavouriteCourse=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("core_course_set_favourite_courses",{courses:[{id:e,favourite:n?1:0}]})})},CoreCoursesProvider.SEARCH_PER_PAGE=20,CoreCoursesProvider.ENROL_INVALID_KEY="CoreCoursesEnrolInvalidKey",CoreCoursesProvider.EVENT_MY_COURSES_CHANGED="courses_my_courses_changed",CoreCoursesProvider.EVENT_MY_COURSES_UPDATED="courses_my_courses_updated",CoreCoursesProvider.EVENT_MY_COURSES_REFRESHED="courses_my_courses_refreshed",CoreCoursesProvider.EVENT_DASHBOARD_DOWNLOAD_ENABLED_CHANGED="dashboard_download_enabled_changed",CoreCoursesProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return y});var o=t(4),r=t(262),i=t(11),l=t(427),s=t(10),a=t(58),u=t(7),d=t(172),c=t(5),p=t(12),f=t(25),h=t(23),m=t(3),_=t(42),g=t(117),v=t(195),C=(t.n(v),this&&this.__assign||Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),y=function(){function CoreSite(e,n,t,_,v,C,y,P){this.id=n,this.siteUrl=t,this.token=_,this.infos=v,this.privateToken=C,this.config=y,this.loggedOut=P,this.MOODLE_RELEASES={3.1:2016052300,3.2:2016120500,3.3:2017051503,3.4:2017111300,3.5:2018051700,3.6:2018120300,3.7:2019052e3},this.UPDATE_FREQUENCIES=[g.a.cache_update_frequency_usually||42e4,g.a.cache_update_frequency_often||12e5,g.a.cache_update_frequency_sometimes||36e5,g.a.cache_update_frequency_rarely||432e5],this.cleanUnicode=!1,this.lastAutoLogin=0,this.offlineDisabled=!1,this.ongoingRequests={},this.requestQueue=[],this.requestQueueTimeout=null;var A=e.get(u.a);this.appProvider=e.get(i.a),this.dbProvider=e.get(l.a),this.domUtils=e.get(c.a),this.eventsProvider=e.get(s.a),this.fileProvider=e.get(a.a),this.http=e.get(r.c),this.textUtils=e.get(p.a),this.timeUtils=e.get(f.a),this.translate=e.get(o.b),this.utils=e.get(m.a),this.urlUtils=e.get(h.a),this.wsProvider=e.get(d.a),this.logger=A.getInstance("CoreWSProvider"),this.setInfo(v),this.calculateOfflineDisabled(),this.id&&this.initDB()}return CoreSite.prototype.initDB=function(){this.db=this.dbProvider.getDB("Site-"+this.id)},CoreSite.prototype.getId=function(){return this.id},CoreSite.prototype.getURL=function(){return this.siteUrl},CoreSite.prototype.getToken=function(){return this.token},CoreSite.prototype.getInfo=function(){return this.infos},CoreSite.prototype.getPrivateToken=function(){return this.privateToken},CoreSite.prototype.getDb=function(){return this.db},CoreSite.prototype.getUserId=function(){if(void 0!==this.infos&&void 0!==this.infos.userid)return this.infos.userid},CoreSite.prototype.getSiteHomeId=function(){return this.infos&&this.infos.siteid||1},CoreSite.prototype.getSiteName=function(){return g.a.sitename?g.a.sitename:this.infos&&this.infos.sitename||""},CoreSite.prototype.setId=function(e){this.id=e,this.initDB()},CoreSite.prototype.setToken=function(e){this.token=e},CoreSite.prototype.setPrivateToken=function(e){this.privateToken=e},CoreSite.prototype.isLoggedOut=function(){return!!this.loggedOut},CoreSite.prototype.getOAuthId=function(){return this.oauthId},CoreSite.prototype.setInfo=function(e){this.infos=e,e&&e.functions&&(e.functionsByName={},e.functions.forEach(function(n){e.functionsByName[n.name]=n}))},CoreSite.prototype.setConfig=function(e){e&&(e.tool_mobile_disabledfeatures=this.textUtils.treatDisabledFeatures(e.tool_mobile_disabledfeatures)),this.config=e,this.calculateOfflineDisabled()},CoreSite.prototype.setLoggedOut=function(e){this.loggedOut=!!e},CoreSite.prototype.setOAuthId=function(e){this.oauthId=e},CoreSite.prototype.isOAuth=function(){return null!=this.oauthId&&void 0!==this.oauthId},CoreSite.prototype.canAccessMyFiles=function(){var e=this.getInfo();return e&&(void 0===e.usercanmanageownfiles||e.usercanmanageownfiles)},CoreSite.prototype.canDownloadFiles=function(){var e=this.getInfo();return e&&e.downloadfiles},CoreSite.prototype.canUseAdvancedFeature=function(e,n){void 0===n&&(n=!0);var t=this.getInfo(),o=!0;if(void 0===t.advancedfeatures)o=n;else for(var r in t.advancedfeatures){var i=t.advancedfeatures[r];i.name===e&&0===parseInt(i.value,10)&&(o=!1)}return o},CoreSite.prototype.canUploadFiles=function(){var e=this.getInfo();return e&&e.uploadfiles},CoreSite.prototype.fetchSiteInfo=function(){return this.cleanUnicode=!1,this.read("core_webservice_get_site_info",{},{getFromCache:!1,saveToCache:!1,skipQueue:!0})},CoreSite.prototype.read=function(e,n,t){return void 0===(t=t||{}).getFromCache&&(t.getFromCache=!0),void 0===t.saveToCache&&(t.saveToCache=!0),void 0===t.reusePending&&(t.reusePending=!0),this.request(e,n,t)},CoreSite.prototype.write=function(e,n,t){return void 0===(t=t||{}).getFromCache&&(t.getFromCache=!1),void 0===t.saveToCache&&(t.saveToCache=!1),void 0===t.emergencyCache&&(t.emergencyCache=!1),this.request(e,n,t)},CoreSite.prototype.request=function(e,n,t,o){var r=this,i=this.token;if(n=n||{},!this.appProvider.isOnline()&&this.offlineDisabled)return Promise.reject(this.wsProvider.createFakeWSError("core.errorofflinedisabled",!0));if(this.getInfo()&&!this.wsAvailable(e,!1)){var l=_.a.WS_PREFIX+e;if(!this.wsAvailable(l,!1))return this.logger.error("WS function '"+e+"' is not available, even in compatibility mode."),Promise.reject(this.utils.createFakeWSError("core.wsfunctionnotavailable",!0));this.logger.info("Using compatibility WS method '"+l+"'"),e=l}var a={wsToken:this.token,siteUrl:this.siteUrl,cleanUnicode:this.cleanUnicode,typeExpected:t.typeExpected,responseExpected:t.responseExpected};a.cleanUnicode&&this.textUtils.hasUnicodeData(n)?this.domUtils.showToast("core.unicodenotsupported",!0,3e3):a.cleanUnicode=!1,this.offlineDisabled&&(t.getFromCache=!1,t.saveToCache=!1,t.emergencyCache=!1),n.moodlewssettingfilter=!1!==t.filter,n.moodlewssettingfileurl=!1!==t.rewriteurls;var u=n;if(null==(n=this.wsProvider.convertValuesToString(n,a.cleanUnicode)))return Promise.reject(this.utils.createFakeWSError("core.unicodenotsupportedcleanerror",!0));var d=this.getCacheId(e,n);if(t.getFromCache&&this.ongoingRequests[d])return this.ongoingRequests[d].then(function(e){return r.utils.clone(e)});var c=this.getFromCache(e,n,t,!1,u).catch(function(){return t.forceOffline?Promise.reject(r.wsProvider.createFakeWSError("core.cannotconnect",!0,{$a:CoreSite.MINIMUM_MOODLE_VERSION})):r.callOrEnqueueRequest(e,n,t,a).then(function(o){return t.saveToCache&&r.saveToCache(e,n,o,t),o}).catch(function(l){if("invalidtoken"==l.errorcode||"accessexception"==l.errorcode&&l.message.indexOf("Invalid token - token expired")>-1){if(i!==r.token&&!o)return t.getFromCache=!1,r.request(e,n,t,!0);if(r.appProvider.isSSOAuthenticationOngoing())return r.appProvider.waitForSSOAuthentication().then(function(){return r.request(e,n,t,!0)});r.eventsProvider.trigger(s.a.SESSION_EXPIRED,{},r.id),l.message=r.translate.instant("core.lostconnection")}else{if("userdeleted"===l.errorcode)return r.eventsProvider.trigger(s.a.USER_DELETED,{params:n},r.id),l.message=r.translate.instant("core.userdeleted"),Promise.reject(l);if("forcepasswordchangenotice"===l.errorcode)r.eventsProvider.trigger(s.a.PASSWORD_CHANGE_FORCED,{},r.id),l.message=r.translate.instant("core.forcepasswordchangenotice");else if("usernotfullysetup"===l.errorcode)r.eventsProvider.trigger(s.a.USER_NOT_FULLY_SETUP,{},r.id),l.message=r.translate.instant("core.usernotfullysetup");else{if("sitepolicynotagreed"===l.errorcode)return r.eventsProvider.trigger(s.a.SITE_POLICY_NOT_AGREED,{},r.id),l.message=r.translate.instant("core.login.sitepolicynotagreederror"),Promise.reject(l);if("dmlwriteexception"===l.errorcode&&r.textUtils.hasUnicodeData(n))return r.cleanUnicode?(l.message=r.translate.instant("core.unicodenotsupported"),Promise.reject(l)):(r.cleanUnicode=!0,r.request(e,n,t));if("required_capability_exception"===l.exception||"nopermission"===l.errorcode||"notingroup"===l.errorcode)return"error/nopermission"===l.message?l.message=r.translate.instant("core.nopermissionerror"):"error/notingroup"===l.message&&(l.message=r.translate.instant("core.notingroup")),r.saveToCache(e,n,l,t),Promise.reject(l);if(t.cacheErrors&&-1!=t.cacheErrors.indexOf(l.errorcode))return r.saveToCache(e,n,l,t),Promise.reject(l);if(void 0!==t.emergencyCache&&!t.emergencyCache)return r.logger.debug("WS call '"+e+"' failed. Emergency cache is forbidden, rejecting."),Promise.reject(l)}}return t.deleteCacheIfWSError&&r.utils.isWebServiceError(l)?(r.deleteFromCache(e,n,t).catch(function(){}),Promise.reject(l)):(r.logger.debug("WS call '"+e+"' failed. Trying to use the emergency cache."),t.omitExpires=!0,t.getFromCache=!0,r.getFromCache(e,n,t,!0,u).catch(function(){return Promise.reject(l)}))})}).then(function(e){return!e||void 0===e.exception&&void 0===e.errorcode?e:Promise.reject(e)});return this.ongoingRequests[d]=c,c.finally(function(){r.ongoingRequests[d]===c&&delete r.ongoingRequests[d]}).then(function(e){return r.utils.clone(e)})},CoreSite.prototype.callOrEnqueueRequest=function(e,n,t,o){if(t.skipQueue||!this.wsAvailable("tool_mobile_call_external_functions"))return this.wsProvider.call(e,n,o);var r=this.getCacheId(e,n);if(t.reusePending){var i=this.requestQueue.find(function(e){return e.cacheId==r});if(i)return i.deferred.promise}var l={cacheId:r,method:e,data:n,preSets:t,wsPreSets:o,deferred:{}};return l.deferred.promise=new Promise(function(e,n){l.deferred.resolve=e,l.deferred.reject=n}),this.enqueueRequest(l)},CoreSite.prototype.enqueueRequest=function(e){return this.requestQueue.push(e),this.requestQueue.length>=CoreSite.REQUEST_QUEUE_LIMIT?this.processRequestQueue():this.requestQueueTimeout||(this.requestQueueTimeout=setTimeout(this.processRequestQueue.bind(this),CoreSite.REQUEST_QUEUE_DELAY)),e.deferred.promise},CoreSite.prototype.processRequestQueue=function(){var e=this;this.logger.debug("Processing request queue ("+this.requestQueue.length+" requests)"),this.requestQueueTimeout&&(clearTimeout(this.requestQueueTimeout),this.requestQueueTimeout=null);var n=this.requestQueue;if(this.requestQueue=[],1!=n.length||CoreSite.REQUEST_QUEUE_FORCE_WS){var t={requests:n.map(function(e){var n={},t={};return Object.keys(e.data).forEach(function(o){var r=e.data[o],i=/^moodlews(setting.*)$/.exec(o);i?("settingfilter"!=i[1]&&"settingfileurl"!=i[1]||(r="true"==r?"1":"0"),t[i[1]]=r):n[o]=r}),C({function:e.method,arguments:JSON.stringify(n)},t)})},o={siteUrl:this.siteUrl,wsToken:this.token};this.wsProvider.call("tool_mobile_call_external_functions",t,o).then(function(t){if(!t||!t.responses)return Promise.reject(null);n.forEach(function(n,r){var i=t.responses[r];if(i)if(i.error)n.deferred.reject(e.textUtils.parseJSON(i.exception));else{var l=e.textUtils.parseJSON(i.data);void 0===o.responseExpected||o.responseExpected||null!=l&&""!==l||(l={}),n.deferred.resolve(l)}else e.enqueueRequest(n)})}).catch(function(e){n.forEach(function(n){n.deferred.reject(e)})})}else this.wsProvider.call(n[0].method,n[0].data,n[0].wsPreSets).then(function(e){n[0].deferred.resolve(e)}).catch(function(e){n[0].deferred.reject(e)})},CoreSite.prototype.wsAvailable=function(e,n){return void 0===n&&(n=!0),void 0!==this.infos&&(!!this.infos.functionsByName[e]||!!n&&this.wsAvailable(_.a.WS_PREFIX+e,!1))},CoreSite.prototype.getCacheId=function(e,n){return v.Md5.hashAsciiStr(e+":"+this.utils.sortAndStringify(n))},CoreSite.prototype.getCacheOldId=function(e,n){return v.Md5.hashAsciiStr(e+":"+JSON.stringify(n))},CoreSite.prototype.getFromCache=function(e,n,t,o,r){var i=this;if(!this.db||!t.getFromCache)return Promise.reject(null);var l=this.getCacheId(e,n);return(t.getCacheUsingCacheKey||o&&t.getEmergencyCacheUsingCacheKey?this.db.getRecords(CoreSite.WS_CACHE_TABLE,{key:t.cacheKey}).then(function(e){if(!e.length)return i.db.getRecord(CoreSite.WS_CACHE_TABLE,{id:l});if(e.length>1)for(var n=0,t=e.length;n<t;n++){var o=e[n];if(o.id==l)return o}return e[0]}):this.db.getRecord(CoreSite.WS_CACHE_TABLE,{id:l}).catch(function(){var n=i.getCacheOldId(e,r||{});return i.db.getRecord(CoreSite.WS_CACHE_TABLE,{id:n}).then(function(e){return i.db.updateRecords(CoreSite.WS_CACHE_TABLE,{id:l},{id:n}),e})})).then(function(e){var n,o=Date.now();if(t.omitExpires=t.omitExpires||t.forceOffline||!i.appProvider.isOnline(),!t.omitExpires&&(n=e.expirationTime+i.getExpirationDelay(t.updateFrequency),o>n))return i.logger.debug("Cached element found, but it is expired"),Promise.reject(null);if(void 0!==e&&void 0!==e.data){if(n){i.logger.info("Cached element found, id: "+l+". Expires in expires in "+(n-o)/1e3+" seconds")}else i.logger.info("Cached element found, id: "+l+". Expiration time ignored.");return i.textUtils.parseJSON(e.data,{})}return Promise.reject(null)})},CoreSite.prototype.saveToCache=function(e,n,t,o){var r=this;if(!this.db)return Promise.reject(null);return(o.uniqueCacheKey?this.deleteFromCache(e,n,o,!0).catch(function(){}):Promise.resolve()).then(function(){var i={id:r.getCacheId(e,n),data:JSON.stringify(t),expirationTime:Date.now()};return o.cacheKey&&(i.key=o.cacheKey),r.db.insertRecord(CoreSite.WS_CACHE_TABLE,i)})},CoreSite.prototype.deleteFromCache=function(e,n,t,o){if(!this.db)return Promise.reject(null);var r=this.getCacheId(e,n);return this.db.deleteRecords(CoreSite.WS_CACHE_TABLE,o?{key:t.cacheKey}:{id:r})},CoreSite.prototype.uploadFile=function(e,n,t){return n.fileArea||(n.fileArea="draft"),this.wsProvider.uploadFile(e,n,{siteUrl:this.siteUrl,wsToken:this.token},t)},CoreSite.prototype.invalidateWsCache=function(){var e=this;return this.db?(this.logger.debug("Invalidate all the cache for site: "+this.id),this.db.updateRecords(CoreSite.WS_CACHE_TABLE,{expirationTime:0}).finally(function(){e.eventsProvider.trigger(s.a.WS_CACHE_INVALIDATED,{},e.getId())})):Promise.reject(null)},CoreSite.prototype.invalidateWsCacheForKey=function(e){return this.db?e?(this.logger.debug("Invalidate cache for key: "+e),this.db.updateRecords(CoreSite.WS_CACHE_TABLE,{expirationTime:0},{key:e})):Promise.resolve():Promise.reject(null)},CoreSite.prototype.invalidateMultipleWsCacheForKey=function(e){var n=this;if(!this.db)return Promise.reject(null);if(!e||!e.length)return Promise.resolve();var t=[];return this.logger.debug("Invalidating multiple cache keys"),e.forEach(function(e){t.push(n.invalidateWsCacheForKey(e))}),Promise.all(t)},CoreSite.prototype.invalidateWsCacheForKeyStartingWith=function(e){if(!this.db)return Promise.reject(null);if(!e)return Promise.resolve();this.logger.debug("Invalidate cache for key starting with: "+e);return this.db.execute("UPDATE "+CoreSite.WS_CACHE_TABLE+" SET expirationTime=0 WHERE key LIKE ?",[e+"%"])},CoreSite.prototype.checkAndFixPluginfileURL=function(e){var n=this;return this.checkTokenPluginFile(e).then(function(){return n.fixPluginfileURL(e)})},CoreSite.prototype.fixPluginfileURL=function(e){return this.urlUtils.fixPluginfileURL(e,this.token,this.siteUrl,this.tokenPluginFileWorks||void 0===this.tokenPluginFileWorks?this.infos&&this.infos.userprivateaccesskey:void 0)},CoreSite.prototype.deleteDB=function(){return this.dbProvider.deleteDB("Site-"+this.id)},CoreSite.prototype.deleteFolder=function(){if(this.fileProvider.isAvailable()){var e=this.fileProvider.getSiteFolder(this.id);return this.fileProvider.removeDir(e).catch(function(){})}return Promise.resolve()},CoreSite.prototype.getSpaceUsage=function(){if(this.fileProvider.isAvailable()){var e=this.fileProvider.getSiteFolder(this.id);return this.fileProvider.getDirectorySize(e).catch(function(){return 0})}return Promise.resolve(0)},CoreSite.prototype.getDocsUrl=function(e){return this.urlUtils.getDocsUrl(this.infos.release?this.infos.release:void 0,e)},CoreSite.prototype.createSiteUrl=function(e,n,t){return this.urlUtils.addParamsToUrl(this.siteUrl+e,n,t)},CoreSite.prototype.checkLocalMobilePlugin=function(e){var n=this,t=this.siteUrl+"/local/mobile/check.php",o=g.a.wsextservice;if(!o)return Promise.resolve({code:0});return this.http.post(t,{service:o}).timeout(this.wsProvider.getRequestTimeout()).toPromise().then(function(t){if(void 0!==t&&"requirecorrectaccess"===t.errorcode)return e?Promise.reject(t.error):(n.siteUrl=n.urlUtils.addOrRemoveWWW(n.siteUrl),n.checkLocalMobilePlugin(!0));if(void 0===t||void 0===t.code)return{code:0,warning:"core.login.localmobileunexpectedresponse"};var r=parseInt(t.code,10);if(!t.error)return{code:r,service:o,coreSupported:!!t.coresupported};switch(r){case 1:return Promise.reject(n.translate.instant("core.login.siteinmaintenance"));case 2:return Promise.reject(n.translate.instant("core.login.webservicesnotenabled"));case 3:return{code:0};case 4:return Promise.reject(n.translate.instant("core.login.mobileservicesnotenabled"));default:return Promise.reject(n.translate.instant("core.unexpectederror"))}},function(){return{code:0}})},CoreSite.prototype.checkIfAppUsesLocalMobile=function(){var e=!1;return this.infos&&this.infos.functions?(this.infos.functions.forEach(function(n){-1!=n.name.indexOf(_.a.WS_PREFIX)&&(e=!0)}),e):e},CoreSite.prototype.checkIfLocalMobileInstalledAndNotUsed=function(){return this.checkIfAppUsesLocalMobile()?Promise.reject(null):this.checkLocalMobilePlugin().then(function(e){return void 0===e.service?Promise.reject(null):e})},CoreSite.prototype.containsUrl=function(e){if(!e)return!1;var n=this.textUtils.addEndingSlash(this.urlUtils.removeProtocolAndWWW(this.siteUrl));return 0==(e=this.textUtils.addEndingSlash(this.urlUtils.removeProtocolAndWWW(e))).indexOf(n)},CoreSite.prototype.getPublicConfig=function(){var e=this,n={siteUrl:this.siteUrl};return this.wsProvider.callAjax("tool_mobile_get_public_config",{},n).catch(function(t){return e.getInfo()&&!e.isVersionGreaterEqualThan("3.8")||!t||"codingerror"!=t.errorcode?Promise.reject(t):(n.noLogin=!0,n.useGet=!0,e.wsProvider.callAjax("tool_mobile_get_public_config",{},n).catch(function(n){return e.getInfo()&&e.isVersionGreaterEqualThan("3.8")?Promise.reject(n):Promise.reject(t)}))}).then(function(n){return n.httpswwwroot&&(e.siteUrl=n.httpswwwroot),n})},CoreSite.prototype.openInBrowserWithAutoLogin=function(e,n){return this.openWithAutoLogin(!1,e,void 0,n)},CoreSite.prototype.openInBrowserWithAutoLoginIfSameSite=function(e,n){return this.openWithAutoLoginIfSameSite(!1,e,void 0,n)},CoreSite.prototype.openInAppWithAutoLogin=function(e,n,t){return this.openWithAutoLogin(!0,e,n,t)},CoreSite.prototype.openInAppWithAutoLoginIfSameSite=function(e,n,t){return this.openWithAutoLoginIfSameSite(!0,e,n,t)},CoreSite.prototype.openWithAutoLogin=function(e,n,t,o){var r=this;return this.getAutoLoginUrl(n).then(function(n){return o?r.domUtils.showAlert(r.translate.instant("core.notice"),o,void 0,3e3).then(function(o){return new Promise(function(i,l){var s=o.didDismiss.subscribe(function(){s&&s.unsubscribe(),i(e?r.utils.openInApp(n,t):r.utils.openInBrowser(n))})})}):e?r.utils.openInApp(n,t):r.utils.openInBrowser(n)})},CoreSite.prototype.openWithAutoLoginIfSameSite=function(e,n,t,o){return this.containsUrl(n)?this.openWithAutoLogin(e,n,t,o):(e?this.utils.openInApp(n,t):this.utils.openInBrowser(n),Promise.resolve(null))},CoreSite.prototype.getConfig=function(e,n){var t={cacheKey:this.getConfigCacheKey()};return n&&(t.getFromCache=!1,t.emergencyCache=!1),this.read("tool_mobile_get_config",{},t).then(function(n){if(e){for(var t in n.settings)if(n.settings[t].name==e)return n.settings[t].value;return Promise.reject(null)}var o={};return n.settings.forEach(function(e){o[e.name]=e.value}),o})},CoreSite.prototype.invalidateConfig=function(){return this.invalidateWsCacheForKey(this.getConfigCacheKey())},CoreSite.prototype.getConfigCacheKey=function(){return"tool_mobile_get_config"},CoreSite.prototype.getStoredConfig=function(e){if(this.config)return e?this.config[e]:this.config},CoreSite.prototype.isFeatureDisabled=function(e){var n=this.getStoredConfig("tool_mobile_disabledfeatures");if(!n)return!1;var t=new RegExp("(,|^)"+this.textUtils.escapeForRegex(e)+"(,|$)","g");return!!n.match(t)},CoreSite.prototype.calculateOfflineDisabled=function(){this.offlineDisabled=this.isFeatureDisabled("NoDelegate_CoreOffline")},CoreSite.prototype.isOfflineDisabled=function(){return this.offlineDisabled},CoreSite.prototype.isVersionGreaterEqualThan=function(e){var n=parseInt(this.getInfo().version,10);if(Array.isArray(e)){if(!e.length)return!1;for(var t=0;t<e.length;t++){var o=this.getVersionNumber(e[t]);if(t==e.length-1)return n>=o;if(n>=o&&n<this.getNextMajorVersionNumber(e[t]))return!0}}else if("string"==typeof e)return n>=this.getVersionNumber(e);return!1},CoreSite.prototype.getAutoLoginUrl=function(e,n){var t=this;if(void 0===n&&(n=!0),!this.privateToken||!this.wsAvailable("tool_mobile_get_autologin_key")||this.lastAutoLogin&&this.timeUtils.timestamp()-this.lastAutoLogin<6*_.a.SECONDS_MINUTE)return Promise.resolve(e);var o,r=this.getUserId(),i={privatetoken:this.privateToken};return n&&(o=this.domUtils.showModalLoading()),this.write("tool_mobile_get_autologin_key",i).then(function(n){return n.autologinurl&&n.key?(t.lastAutoLogin=t.timeUtils.timestamp(),n.autologinurl+"?userid="+r+"&key="+n.key+"&urltogo="+e):e}).catch(function(){return e}).finally(function(){o&&o.dismiss()})},CoreSite.prototype.getVersionNumber=function(e){var n=this.getMajorAndMinor(e);return n?(void 0===this.MOODLE_RELEASES[n.major]&&(n.major=Object.keys(this.MOODLE_RELEASES).slice(-1)),this.MOODLE_RELEASES[n.major]+n.minor):0},CoreSite.prototype.getMajorAndMinor=function(e){var n=e.match(/(\d)+(?:\.(\d)+)?(?:\.(\d)+)?/);return!(!n||!n[1])&&{major:n[1]+"."+(n[2]||"0"),minor:parseInt(n[3],10)||0}},CoreSite.prototype.getNextMajorVersionNumber=function(e){var n,t=this.getMajorAndMinor(e),o=Object.keys(this.MOODLE_RELEASES);return t?-1==(n=o.indexOf(t.major))||n==o.length-1?this.MOODLE_RELEASES[o[n]]:this.MOODLE_RELEASES[o[n+1]]:0},CoreSite.prototype.deleteSiteConfig=function(e){return this.db.deleteRecords(CoreSite.CONFIG_TABLE,{name:e})},CoreSite.prototype.getLocalSiteConfig=function(e,n){return this.db.getRecord(CoreSite.CONFIG_TABLE,{name:e}).then(function(e){return e.value}).catch(function(e){return void 0!==n?n:Promise.reject(e)})},CoreSite.prototype.setLocalSiteConfig=function(e,n){return this.db.insertRecord(CoreSite.CONFIG_TABLE,{name:e,value:n})},CoreSite.prototype.getExpirationDelay=function(e){var n=this.UPDATE_FREQUENCIES[e]||this.UPDATE_FREQUENCIES[CoreSite.FREQUENCY_USUALLY];return this.appProvider.isNetworkAccessLimited()&&(n*=1.5),n},CoreSite.prototype.checkTokenPluginFile=function(e){var n=this;return this.urlUtils.canUseTokenPluginFile(e,this.siteUrl,this.infos&&this.infos.userprivateaccesskey)?void 0!==this.tokenPluginFileWorks?Promise.resolve(this.tokenPluginFileWorks):this.tokenPluginFileWorksPromise?this.tokenPluginFileWorksPromise:this.appProvider.isOnline()?(e=this.fixPluginfileURL(e),this.tokenPluginFileWorksPromise=this.wsProvider.performHead(e).then(function(e){return e.ok}).catch(function(e){return!1}).then(function(e){return n.tokenPluginFileWorks=e,e}),this.tokenPluginFileWorksPromise):Promise.resolve(!0):Promise.resolve(!1)},CoreSite.REQUEST_QUEUE_DELAY=50,CoreSite.REQUEST_QUEUE_LIMIT=10,CoreSite.REQUEST_QUEUE_FORCE_WS=!1,CoreSite.FREQUENCY_USUALLY=0,CoreSite.FREQUENCY_OFTEN=1,CoreSite.FREQUENCY_SOMETIMES=2,CoreSite.FREQUENCY_RARELY=3,CoreSite.WS_CACHE_TABLE="wscache",CoreSite.CONFIG_TABLE="core_site_config",CoreSite.MINIMUM_MOODLE_VERSION="3.1",CoreSite}()},function(e,n,t){"use strict";function View_CoreLoadingComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[["class","core-loading-message"],["role","status"]],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.message)})}function View_CoreLoadingComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"div",[["class","core-loading-container"],["role","status"]],[[24,"@coreShowHideAnimation",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(2,0,null,null,7,"span",[["class","core-loading-spinner"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(4,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,r.b,r.a)),o._15(5,114688,null,0,i.a,[l.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreLoadingComponent_2)),o._15(8,16384,null,0,s.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0);e(n,8,0,t.message)},function(e,n){e(n,0,0,void 0);e(n,4,0,o._29(n,5)._paused)})}function View_CoreLoadingComponent_3(e){return o._42(0,[o._28(null,0),(e()(),o._11(0,null,null,0))],null,null)}function View_CoreLoadingComponent_0(e){return o._42(0,[o._37(402653184,1,{content:0}),(e()(),o._11(16777216,null,null,1,null,View_CoreLoadingComponent_1)),o._15(2,16384,null,0,s.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(4,0,[[1,0],["content",1]],null,4,"div",[["class","core-loading-content"]],[[8,"id",0],[1,"aria-busy",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreLoadingComponent_3)),o._15(7,16384,null,0,s.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.hideUntil);e(n,7,0,t.hideUntil)},function(e,n){var t=n.component;e(n,4,0,t.uniqueId,t.hideUntil)})}t.d(n,"a",function(){return a}),n.b=View_CoreLoadingComponent_0;var o=t(1),r=t(122),i=t(102),l=t(9),s=t(8),a=o._14({encapsulation:2,styles:[],data:{animation:[{type:7,name:"coreShowHideAnimation",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0},offset:null},{type:4,styles:{type:6,styles:{opacity:1},offset:null},timings:"500ms ease-in-out"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{opacity:1},offset:null},{type:4,styles:{type:6,styles:{opacity:0},offset:null},timings:"500ms ease-in-out"}],options:null}],options:{}}]}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreContentLinksHandlerBase(){this.name="CoreContentLinksHandlerBase",this.priority=0,this.checkAllUsers=!1,this.featureName=""}return CoreContentLinksHandlerBase.prototype.getActions=function(e,n,t,o){return[]},CoreContentLinksHandlerBase.prototype.handles=function(e){return this.pattern&&e.search(this.pattern)>=0},CoreContentLinksHandlerBase.prototype.getSiteUrl=function(e){if(this.pattern){var n=e.search(this.pattern);if(n>-1)return e.substr(0,n)}},CoreContentLinksHandlerBase.prototype.isEnabled=function(e,n,t,o){return!0},CoreContentLinksHandlerBase}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=(t(7),t(99)),i=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},l=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},s=function(e){function CorePluginFileDelegate(n,t,o){var r=e.call(this,"CorePluginFileDelegate",n,t,o)||this;return r.handlerNameProperty="component",r}return Object(o.__extends)(CorePluginFileDelegate,e),CorePluginFileDelegate.prototype.fileDeleted=function(e,n,t){var o=this.getHandlerForFile({fileurl:e});return o&&o.fileDeleted?o.fileDeleted(e,n,t):Promise.resolve()},CorePluginFileDelegate.prototype.getDownloadableFile=function(e,n){var t=this.getHandlerForFile(e);return this.getHandlerDownloadableFile(e,t,n)},CorePluginFileDelegate.prototype.getHandlerDownloadableFile=function(e,n,t){return i(this,void 0,void 0,function(){var o,r;return l(this,function(i){switch(i.label){case 0:return[4,this.isFileDownloadable(e,t)];case 1:if(!(o=i.sent()).downloadable)throw o.reason;return n&&n.getDownloadableFile?[4,n.getDownloadableFile(e,t)]:[3,3];case 2:return r=i.sent(),[2,r||e];case 3:return[2,e]}})})},CorePluginFileDelegate.prototype.getComponentRevisionRegExp=function(e){var n=this.getHandler(e[1],!0);if(n&&n.getComponentRevisionRegExp)return n.getComponentRevisionRegExp(e)},CorePluginFileDelegate.prototype.getDownloadableFilesFromHTML=function(e){var n=[];for(var t in this.enabledHandlers){var o=this.enabledHandlers[t];o&&o.getDownloadableFilesFromHTML&&(n=n.concat(o.getDownloadableFilesFromHTML(e)))}return n},CorePluginFileDelegate.prototype.getFilesSize=function(e,n){var t=this,o=[],r={size:0,total:!0};return e.forEach(function(e){o.push(t.getFileSize(e,n).then(function(e){void 0===e?r.total=!1:r.size+=e}))}),Promise.all(o).then(function(){return r})},CorePluginFileDelegate.prototype.getFileSize=function(e,n){return i(this,void 0,void 0,function(){var t,o,r;return l(this,function(i){switch(i.label){case 0:return[4,this.isFileDownloadable(e,n)];case 1:return i.sent().downloadable?(t=this.getHandlerForFile(e),[4,this.getHandlerDownloadableFile(e,t,n)]):[2,0];case 2:if(!(o=i.sent()))return[2,0];if(t&&t.getFileSize)try{return r=t.getFileSize(o,n),[2,r]}catch(e){}return[2,o.filesize]}})})},CorePluginFileDelegate.prototype.getHandlerForFile=function(e){for(var n in this.enabledHandlers){var t=this.enabledHandlers[n];if(t&&t.shouldHandleFile&&t.shouldHandleFile(e))return t}},CorePluginFileDelegate.prototype.isFileDownloadable=function(e,n){var t=this.getHandlerForFile(e);return t&&t.isFileDownloadable?t.isFileDownloadable(e,n):Promise.resolve({downloadable:!0})},CorePluginFileDelegate.prototype.removeRevisionFromUrl=function(e,n){var t=this.getHandler(n[1],!0);if(t&&t.getComponentRevisionRegExp&&t.getComponentRevisionReplace){var o=t.getComponentRevisionRegExp(n);if(o)return e.replace(o,t.getComponentRevisionReplace(n))}return e},CorePluginFileDelegate.prototype.treatDownloadedFile=function(e,n,t){var o=this.getHandlerForFile({fileurl:e});return o&&o.treatDownloadedFile?o.treatDownloadedFile(e,n,t):Promise.resolve()},CorePluginFileDelegate}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(309),t(11),t(7),t(67),t(12),t(435);var o=function(){function CoreFileProvider(e,n,t,o,r,i,l){this.platform=n,this.file=t,this.appProvider=o,this.textUtils=r,this.zip=i,this.mimeUtils=l,this.initialized=!1,this.basePath="",this.isHTMLAPI=!1,this.CHUNK_SIZE=10485760,this.logger=e.getInstance("CoreFileProvider"),n.is("android")&&!Object.getOwnPropertyDescriptor(FileReader.prototype,"onloadend")&&(this.defineGetterSetter(FileReader.prototype,"readyState",function(){return this._localURL?this._readyState:this._realReader.readyState}),this.defineGetterSetter(FileReader.prototype,"error",function(){return this._localURL?this._error:this._realReader.error}),this.defineGetterSetter(FileReader.prototype,"result",function(){return this._localURL?this._result:this._realReader.result}),this.defineEvent("onloadstart"),this.defineEvent("onprogress"),this.defineEvent("onload"),this.defineEvent("onerror"),this.defineEvent("onloadend"),this.defineEvent("onabort"))}return e=CoreFileProvider,CoreFileProvider.prototype.defineEvent=function(e){this.defineGetterSetter(FileReader.prototype,e,function(){return this._realReader[e]||null},function(n){this._realReader[e]=n})},CoreFileProvider.prototype.defineGetterSetter=function(e,n,t,o){if(Object.defineProperty){var r={get:t,configurable:!0};o&&(r.set=o),Object.defineProperty(e,n,r)}else e.__defineGetter__(n,t),o&&e.__defineSetter__(n,o)},CoreFileProvider.prototype.setHTMLBasePath=function(e){this.isHTMLAPI=!0,this.basePath=e},CoreFileProvider.prototype.usesHTMLAPI=function(){return this.isHTMLAPI},CoreFileProvider.prototype.init=function(){var e=this;return this.initialized?Promise.resolve():this.platform.ready().then(function(){if(e.platform.is("android"))e.basePath=e.file.externalApplicationStorageDirectory||e.basePath;else if(e.platform.is("ios"))e.basePath=e.file.documentsDirectory||e.basePath;else if(!e.isAvailable()||""===e.basePath)return e.logger.error("Error getting device OS."),Promise.reject(null);e.initialized=!0,e.logger.debug("FS initialized: "+e.basePath)})},CoreFileProvider.prototype.isAvailable=function(){return void 0!==window.resolveLocalFileSystemURL},CoreFileProvider.prototype.getFile=function(e){var n=this;return this.init().then(function(){return n.logger.debug("Get file: "+e),n.file.resolveLocalFilesystemUrl(n.addBasePathIfNeeded(e))}).then(function(e){return e})},CoreFileProvider.prototype.getDir=function(e){var n=this;return this.init().then(function(){return n.logger.debug("Get directory: "+e),n.file.resolveDirectoryUrl(n.addBasePathIfNeeded(e))})},CoreFileProvider.prototype.getSiteFolder=function(n){return e.SITESFOLDER+"/"+n},CoreFileProvider.prototype.create=function(e,n,t,o){var r=this;return this.init().then(function(){if(n=r.removeStartingSlash(n.replace(r.basePath,"")),o=o||r.basePath,-1==n.indexOf("/"))return e?(r.logger.debug("Create dir "+n+" in "+o),r.file.createDir(o,n,!t)):(r.logger.debug("Create file "+n+" in "+o),r.file.createFile(o,n,!t));var i=n.substr(0,n.indexOf("/")),l=n.substr(n.indexOf("/")+1);return r.logger.debug("Create dir "+i+" in "+o),r.file.createDir(o,i,!0).then(function(n){return r.create(e,l,t,n.toURL())}).catch(function(e){return r.logger.error("Error creating directory "+i+" in "+o),Promise.reject(e)})})},CoreFileProvider.prototype.createDir=function(e,n){return this.create(!0,e,n)},CoreFileProvider.prototype.createFile=function(e,n){return this.create(!1,e,n)},CoreFileProvider.prototype.removeDir=function(e){var n=this;return this.init().then(function(){return e=n.removeStartingSlash(e.replace(n.basePath,"")),n.logger.debug("Remove directory: "+e),n.file.removeRecursively(n.basePath,e)})},CoreFileProvider.prototype.removeFile=function(e){var n=this;return this.init().then(function(){return e=n.removeStartingSlash(e.replace(n.basePath,"")),n.logger.debug("Remove file: "+e),n.file.removeFile(n.basePath,e).catch(function(t){var o=decodeURI(e);return o!=e?n.file.removeFile(n.basePath,o):Promise.reject(t)})})},CoreFileProvider.prototype.removeFileByFileEntry=function(e){return new Promise(function(n,t){e.remove(n,t)})},CoreFileProvider.prototype.getDirectoryContents=function(e){var n=this;return this.init().then(function(){return e=n.removeStartingSlash(e.replace(n.basePath,"")),n.logger.debug("Get contents of dir: "+e),n.file.listDir(n.basePath,e)})},CoreFileProvider.prototype.getSize=function(e){var n=this;return new Promise(function(t,o){if(e.isDirectory){e.createReader().readEntries(function(e){for(var r=[],i=0;i<e.length;i++)r.push(n.getSize(e[i]));Promise.all(r).then(function(e){for(var n=0,r=0;r<e.length;r++){var i=parseInt(e[r]);if(isNaN(i))return void o();n+=i}t(n)},o)},o)}else e.isFile&&e.file(function(e){t(e.size)},o)})},CoreFileProvider.prototype.getDirectorySize=function(e){var n=this;return e=this.removeStartingSlash(e.replace(this.basePath,"")),this.logger.debug("Get size of dir: "+e),this.getDir(e).then(function(e){return n.getSize(e)})},CoreFileProvider.prototype.getFileSize=function(e){var n=this;return e=this.removeStartingSlash(e.replace(this.basePath,"")),this.logger.debug("Get size of file: "+e),this.getFile(e).then(function(e){return n.getSize(e)})},CoreFileProvider.prototype.getFileObjectFromFileEntry=function(e){var n=this;return new Promise(function(t,o){n.logger.debug("Get file object of: "+e.fullPath),e.file(t,o)})},CoreFileProvider.prototype.calculateFreeSpace=function(){var e=this;return this.file.getFreeDiskSpace().then(function(n){return e.platform.is("ios")?Number(n):1024*Number(n)})},CoreFileProvider.prototype.normalizeFileName=function(e){return e=this.textUtils.decodeURIComponent(e)},CoreFileProvider.prototype.readFile=function(n,t){var o=this;switch(void 0===t&&(t=e.FORMATTEXT),n=this.removeStartingSlash(n.replace(this.basePath,"")),this.logger.debug("Read file "+n+" with format "+t),t){case e.FORMATDATAURL:return this.file.readAsDataURL(this.basePath,n);case e.FORMATBINARYSTRING:return this.file.readAsBinaryString(this.basePath,n);case e.FORMATARRAYBUFFER:return this.file.readAsArrayBuffer(this.basePath,n);case e.FORMATJSON:return this.file.readAsText(this.basePath,n).then(function(e){var t=o.textUtils.parseJSON(e,null);return null==t&&null!=e?Promise.reject("Error parsing JSON file: "+n):t});default:return this.file.readAsText(this.basePath,n)}},CoreFileProvider.prototype.readFileData=function(n,t){var o=this;return void 0===t&&(t=e.FORMATTEXT),t=t||e.FORMATTEXT,this.logger.debug("Read file from file data with format "+t),new Promise(function(r,i){var l=new FileReader;l.onloadend=function(n){var l=n.target;if(void 0!==l.result||null!==l.result)if(t==e.FORMATJSON){var s=o.textUtils.parseJSON(l.result,null);null==s&&i("Error parsing JSON file."),r(s)}else r(l.result);else i(void 0!==l.error||null!==l.error?l.error:{code:null,message:"READER_ONLOADEND_ERR"})};var s=!1;switch(l.onloadstart=function(e){s=!0},setTimeout(function(){s||i("Upload cannot start.")},3e3),t){case e.FORMATDATAURL:l.readAsDataURL(n);break;case e.FORMATBINARYSTRING:l.readAsBinaryString(n);break;case e.FORMATARRAYBUFFER:l.readAsArrayBuffer(n);break;default:l.readAsText(n)}})},CoreFileProvider.prototype.writeFile=function(e,n,t){var o=this;return this.init().then(function(){return e=o.removeStartingSlash(e.replace(o.basePath,"")),o.logger.debug("Write file: "+e),o.createFile(e).then(function(r){if(o.isHTMLAPI&&!o.appProvider.isDesktop()&&("string"==typeof n||"[object ArrayBuffer]"==n.toString())){var i=o.mimeUtils.getMimeType(o.mimeUtils.getFileExtension(e));n=new Blob([n],{type:i||"text/plain"})}return o.file.writeFile(o.basePath,e,n,{replace:!t,append:!!t}).then(function(){return r})})})},CoreFileProvider.prototype.writeFileDataInFile=function(e,n,t,o,r){var i=this;void 0===o&&(o=0);var l=e.slice(o=o||0,Math.min(o+this.CHUNK_SIZE,e.size));return this.writeFileDataInFileChunk(l,n,r).then(function(r){return o+=i.CHUNK_SIZE,t&&t({lengthComputable:!0,loaded:o,total:e.size}),o>=e.size?r:i.writeFileDataInFile(e,n,t,o,!0)})},CoreFileProvider.prototype.writeFileDataInFileChunk=function(n,t,o){var r=this;return this.readFileData(n,e.FORMATARRAYBUFFER).then(function(e){return r.writeFile(t,e,o)})},CoreFileProvider.prototype.getExternalFile=function(e){return this.file.resolveLocalFilesystemUrl(e).then(function(e){return e})},CoreFileProvider.prototype.removeExternalFile=function(e){var n=e.substring(0,e.lastIndexOf("/")),t=e.substr(e.lastIndexOf("/")+1);return this.file.removeFile(n,t)},CoreFileProvider.prototype.getBasePath=function(){var e=this;return this.init().then(function(){return"/"==e.basePath.slice(-1)?e.basePath:e.basePath+"/"})},CoreFileProvider.prototype.getBasePathToDownload=function(){var e=this;return this.init().then(function(){return e.platform.is("ios")?e.file.resolveDirectoryUrl(e.basePath).then(function(e){return e.toInternalURL()}):e.basePath})},CoreFileProvider.prototype.getBasePathInstant=function(){return this.basePath?"/"==this.basePath.slice(-1)?this.basePath:this.basePath+"/":this.basePath},CoreFileProvider.prototype.moveDir=function(e,n,t){return this.moveFileOrDir(e,n,!0,t)},CoreFileProvider.prototype.moveFile=function(e,n,t){return this.moveFileOrDir(e,n,!1,t)},CoreFileProvider.prototype.moveFileOrDir=function(e,n,t,o){var r=this,i=t?this.file.moveDir.bind(this.file):this.file.moveFile.bind(this.file);return this.init().then(function(){e=r.removeStartingSlash(e.replace(r.basePath,"")),n=r.removeStartingSlash(n.replace(r.basePath,""));var t=r.getFileAndDirectoryFromPath(n);if(t.directory&&!o)return r.createDir(t.directory)}).then(function(){if(r.isHTMLAPI){for(var t=e.split("/"),o=n.split("/"),l=r.basePath,s=0;s<t.length;s++){var a=t[s];if(o[s]!==a)break;l=r.textUtils.concatenatePaths(l,a+="/"),e=e.replace(a,""),n=n.replace(a,"")}return i(l,e,l,n)}return i(r.basePath,e,r.basePath,n).catch(function(t){var o=decodeURI(e),l=decodeURI(n);return o!=e||l!=n?i(r.basePath,o,r.basePath,l):Promise.reject(t)})})},CoreFileProvider.prototype.copyDir=function(e,n,t){return this.copyFileOrDir(e,n,!0,t)},CoreFileProvider.prototype.copyFile=function(e,n,t){return this.copyFileOrDir(e,n,!1,t)},CoreFileProvider.prototype.copyFileOrDir=function(e,n,t,o){var r,i,l=this,s=t?this.file.copyDir.bind(this.file):this.file.copyFile.bind(this.file);return this.init().then(function(){if(e=l.removeStartingSlash(e.replace(l.basePath,"")),n=l.removeStartingSlash(n.replace(l.basePath,"")),r=l.getFileAndDirectoryFromPath(e),(i=l.getFileAndDirectoryFromPath(n)).directory&&!o)return l.createDir(i.directory)}).then(function(){if(l.isHTMLAPI){var t=l.textUtils.concatenatePaths(l.basePath,r.directory),o=l.textUtils.concatenatePaths(l.basePath,i.directory);return s(t,r.name,o,i.name)}return s(l.basePath,e,l.basePath,n).catch(function(t){var o=decodeURI(e),r=decodeURI(n);return e!=o||n!=r?s(l.basePath,o,l.basePath,r):Promise.reject(t)})})},CoreFileProvider.prototype.getFileAndDirectoryFromPath=function(e){var n={directory:"",name:""};return n.directory=e.substring(0,e.lastIndexOf("/")),n.name=e.substr(e.lastIndexOf("/")+1),n},CoreFileProvider.prototype.getInternalURL=function(e){return e.toInternalURL?e.toInternalURL():e.toURL()},CoreFileProvider.prototype.addBasePathIfNeeded=function(e){return e.indexOf(this.basePath)>-1?e:this.textUtils.concatenatePaths(this.basePath,e)},CoreFileProvider.prototype.removeBasePath=function(e){if(e.indexOf(this.basePath)>-1)return e.replace(this.basePath,"")},CoreFileProvider.prototype.unzipFile=function(e,n,t,o){var r=this;void 0===o&&(o=!0);var i;return this.getFile(e).then(function(e){if(i=e,n&&o)return r.removeDir(n).catch(function(){}).then(function(){return r.createDir(n)})}).then(function(){return n=r.addBasePathIfNeeded(n||r.mimeUtils.removeExtension(e)),r.zip.unzip(i.toURL(),n,t)}).then(function(e){if(-1==e)return Promise.reject("Unzip failed.")})},CoreFileProvider.prototype.replaceInFile=function(e,n,t){var o=this;return this.readFile(e).then(function(r){return void 0!==r&&null!==r&&r.replace?r.match(n)?(r=r.replace(n,t),o.writeFile(e,r)):void 0:Promise.reject(null)})},CoreFileProvider.prototype.getMetadata=function(e){return e&&e.getMetadata?new Promise(function(n,t){e.getMetadata(n,t)}):Promise.reject(null)},CoreFileProvider.prototype.getMetadataFromPath=function(e,n){var t=this;return(n?this.getDir(e):this.getFile(e)).then(function(e){return t.getMetadata(e)})},CoreFileProvider.prototype.removeStartingSlash=function(e){return"/"==e[0]?e.substr(1):e},CoreFileProvider.prototype.copyOrMoveExternalFile=function(e,n,t){var o=this;return this.getExternalFile(e).then(function(e){var r=o.getFileAndDirectoryFromPath(n);return o.createDir(r.directory).then(function(n){return new Promise(function(o,i){t?e.copyTo(n,r.name,o,i):e.moveTo(n,r.name,o,i)})})})},CoreFileProvider.prototype.copyExternalFile=function(e,n){return this.copyOrMoveExternalFile(e,n,!0)},CoreFileProvider.prototype.moveExternalFile=function(e,n){return this.copyOrMoveExternalFile(e,n,!1)},CoreFileProvider.prototype.getUniqueNameInFolder=function(e,n,t){var o=this;return this.getDirectoryContents(e).then(function(e){var r,i={},l=1,s=o.mimeUtils.removeExtension(n),a=o.mimeUtils.getFileExtension(n)||t;if(s=o.textUtils.removeSpecialCharactersForFiles(o.textUtils.decodeURIComponent(s)),e.forEach(function(e){i[e.name.toLowerCase()]=e}),a=a?"."+a:"",r=s+a,void 0===i[r.toLowerCase()])return r;do{r=s+"("+l+")"+a,l++}while(void 0!==i[r]);return r}).catch(function(){return o.textUtils.removeSpecialCharactersForFiles(o.textUtils.decodeURIComponent(n))})},CoreFileProvider.prototype.clearTmpFolder=function(){return this.removeDir(e.TMPFOLDER).catch(function(){})},CoreFileProvider.prototype.removeUnusedFiles=function(e,n){var t=this;return this.getDirectoryContents(e).then(function(e){if(e.length){var o={},r=[];return n.forEach(function(e){e.fullPath&&(o[e.fullPath]=e)}),e.forEach(function(e){o[e.fullPath]||r.push(t.removeFileByFileEntry(e))}),Promise.all(r)}}).catch(function(){})},CoreFileProvider.prototype.isFileInAppFolder=function(e){return-1!=e.indexOf(this.basePath)},CoreFileProvider.prototype.getWWWPath=function(){var e=window.location.href.indexOf("index.html");return-1!=e?window.location.href.substr(0,e):window.location.href},CoreFileProvider.FORMATTEXT=0,CoreFileProvider.FORMATDATAURL=1,CoreFileProvider.FORMATBINARYSTRING=2,CoreFileProvider.FORMATARRAYBUFFER=3,CoreFileProvider.FORMATJSON=4,CoreFileProvider.SITESFOLDER="sites",CoreFileProvider.TMPFOLDER="tmp",CoreFileProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(6);var o=t(54),r=t(117),i=t(10),l=function(){function CoreSitePluginsProvider(e,n,t,o,r,l,s,a,u,d){var c=this;this.sitesProvider=n,this.utils=t,this.langProvider=o,this.appProvider=r,this.platform=l,this.filepoolProvider=s,this.coursesProvider=a,this.textUtils=u,this.eventsProvider=d,this.ROOT_CACHE_KEY="CoreSitePlugins:",this.sitePlugins={},this.sitePluginPromises={},this.hasSitePluginsLoaded=!1,this.sitePluginsFinishedLoading=!1,this.logger=e.getInstance("CoreUserProvider");var p=this.eventsProvider.on(i.a.SITE_PLUGINS_LOADED,function(){c.sitePluginsFinishedLoading=!0,p&&p.off()});this.fetchPluginsDeferred=this.utils.promiseDefer(),d.on(i.a.LOGOUT,function(){c.fetchPluginsDeferred=c.utils.promiseDefer()})}return CoreSitePluginsProvider.prototype.addDefaultArgs=function(e,n){var t=this;return e=e||{},n=n||this.sitesProvider.getCurrentSite(),this.langProvider.getCurrentLanguage().then(function(o){var i=t.utils.clone(e);return i.userid=e.userid||n.getUserId(),i.appid=r.a.app_id,i.appversioncode=r.a.versioncode,i.appversionname=r.a.versionname,i.applang=o,i.appcustomurlscheme=r.a.customurlscheme,i.appisdesktop=t.appProvider.isDesktop(),i.appismobile=t.appProvider.isMobile(),i.appiswide=t.appProvider.isWide(),i.appplatform=i.appisdevice?t.platform.is("ios")?"ios":"android":i.appisdesktop?t.appProvider.isMac()?"mac":t.appProvider.isLinux()?"linux":"windows":"browser",i})},CoreSitePluginsProvider.prototype.callWS=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return t=t||{},t.cacheKey=t.cacheKey||r.getCallWSCacheKey(e,n),o.read(e,n,t)})},CoreSitePluginsProvider.prototype.createDataForJS=function(e,n){var t;return e&&("boolean"==typeof(t=Object.assign({},e.jsResult||{}))&&(t={}),t.INIT_TEMPLATES=this.utils.objectToKeyValueMap(e.templates,"id","html"),t.INIT_OTHERDATA=e.otherdata),n&&(t.CONTENT_TEMPLATES=this.utils.objectToKeyValueMap(n.templates,"id","html"),t.CONTENT_OTHERDATA=n.otherdata),t},CoreSitePluginsProvider.prototype.getCallWSCacheKey=function(e,n){return this.getCallWSCommonCacheKey(e)+":"+this.utils.sortAndStringify(n)},CoreSitePluginsProvider.prototype.getCallWSCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"ws:"+e},CoreSitePluginsProvider.prototype.getContent=function(e,n,t,r,i){var l=this;return this.logger.debug("Get content for component '"+e+"' and method '"+n+"'"),this.sitesProvider.getSite(i).then(function(i){return l.addDefaultArgs(t,i).then(function(i){var s={component:e,method:n,args:l.utils.objectToArrayOfObjects(i,"name","value",!0)};return r=r||{},r.cacheKey=l.getContentCacheKey(e,n,t),r.updateFrequency=void 0!==r.updateFrequency?r.updateFrequency:o.a.FREQUENCY_OFTEN,l.sitesProvider.getCurrentSite().read("tool_mobile_get_content",s,r)}).then(function(e){if(e.otherdata){e.otherdata=l.utils.objectToKeyValueMap(e.otherdata,"name","value");for(var n in e.otherdata){var t=e.otherdata[n];"string"!=typeof t||"{"!=t[0]&&"["!=t[0]||(e.otherdata[n]=l.textUtils.parseJSON(t))}}else e.otherdata={};return e})})},CoreSitePluginsProvider.prototype.getContentCacheKey=function(e,n,t){return this.ROOT_CACHE_KEY+"content:"+e+":"+n+":"+this.utils.sortAndStringify(t)},CoreSitePluginsProvider.prototype.getDownloadParam=function(e,n,t,o){switch(n){case"courseids":return[t];case e+"id":return o&&o.instance}},CoreSitePluginsProvider.prototype.getHandlerUniqueName=function(e,n){return e.addon+"_"+n},CoreSitePluginsProvider.prototype.getSitePluginHandler=function(e){return this.sitePlugins[e]},CoreSitePluginsProvider.prototype.invalidateAllCallWSForMethod=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getCallWSCommonCacheKey(e))})},CoreSitePluginsProvider.prototype.invalidateCallWS=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return t=t||{},o.invalidateWsCacheForKey(t.cacheKey||r.getCallWSCacheKey(e,n))})},CoreSitePluginsProvider.prototype.invalidateContent=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.invalidateWsCacheForKey(r.getContentCacheKey(e,n,t))})},CoreSitePluginsProvider.prototype.isGetContentAvailable=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("tool_mobile_get_content")},CoreSitePluginsProvider.prototype.isHandlerEnabledForCourse=function(e,n,t){return(!t||!t.courses||-1!=t.courses.indexOf(e))&&(!n&&void 0!==n||this.coursesProvider.getUserCourse(e,!0).then(function(){return!0}).catch(function(){return!1}))},CoreSitePluginsProvider.prototype.isHandlerEnabledForUser=function(e,n,t){return(!n||e==this.sitesProvider.getCurrentSite().getUserId())&&(!t||!t.users||-1!=t.users.indexOf(e))},CoreSitePluginsProvider.prototype.loadOtherDataInArgs=function(e,n,t){if(e=e?this.utils.clone(e):{},n=n||{},void 0===t)return e;if(Array.isArray(t))for(var o in t){var r=t[o];e[r]="object"==typeof n[r]&&null!==n[r]?JSON.stringify(n[r]):n[r]}else for(var i in n)e[i]="object"==typeof n[i]&&null!==n[i]?JSON.stringify(n[i]):n[i];return e},CoreSitePluginsProvider.prototype.prefetchFunctions=function(e,n,t,o,r,i,l,s){var a=this;s=s||this.sitesProvider.getCurrentSite();var u=[];for(var d in t.offlinefunctions)if(s.wsAvailable(d)){var c=t.offlinefunctions[d],p=this.getCallWSCacheKey(d,n),f={};if(c.length)for(var h in c){var m=c[h];if(void 0!==n[m])f[m]=n[m];else{var _=this.getDownloadParam(e,m,o,r);void 0!==_&&(f[m]=_)}}else f=n;u.push(this.callWS(d,f,{cacheKey:p}))}else u.push(this.getContent(e,d,n).then(function(n){var t=[];return n.files&&n.files.length&&t.push(a.filepoolProvider.downloadOrPrefetchFiles(s.id,n.files,i,!1,e,r.id,l)),Promise.all(t)}));return Promise.all(u)},CoreSitePluginsProvider.prototype.setSitePluginHandler=function(e,n){this.sitePlugins[e]=n},CoreSitePluginsProvider.prototype.registerSitePluginPromise=function(e,n){this.sitePluginPromises[e]=n},CoreSitePluginsProvider.prototype.setPluginsFetched=function(){this.fetchPluginsDeferred.resolve()},CoreSitePluginsProvider.prototype.sitePluginPromiseExists=function(e){return this.sitePluginPromises.hasOwnProperty(e)},CoreSitePluginsProvider.prototype.sitePluginLoaded=function(e){return this.sitePluginPromises[e]},CoreSitePluginsProvider.prototype.waitFetchPlugins=function(){return this.fetchPluginsDeferred.promise},CoreSitePluginsProvider.COMPONENT="CoreSitePlugins",CoreSitePluginsProvider}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(99),i=(t(586),t(147)),l=(t.n(i),function(e){function CoreBlockDelegate(n,t,o,r,l){var s=e.call(this,"CoreBlockDelegate",n,t,o)||this;return s.defaultHandler=r,s.sitePluginsProvider=l,s.handlerNameProperty="blockName",s.featurePrefix="CoreBlockDelegate_",s.blocksUpdateObservable=new i.Subject,s}return Object(o.__extends)(CoreBlockDelegate,e),CoreBlockDelegate.prototype.areBlocksDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_SiteBlocks")},CoreBlockDelegate.prototype.areBlocksDisabledInCourses=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_CourseBlocks")},CoreBlockDelegate.prototype.areBlocksDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.areBlocksDisabledInSite(e)})},CoreBlockDelegate.prototype.getBlockDisplayData=function(e,n,t,o){return Promise.resolve(this.executeFunctionOnEnabled(n.name,"getDisplayData",[e,n,t,o]))},CoreBlockDelegate.prototype.hasSupportedBlock=function(e){var n=this;return!!(e=e||[]).find(function(e){return n.isBlockSupported(e.name)})},CoreBlockDelegate.prototype.isBlockSupported=function(e){return this.hasHandler(e,!0)},CoreBlockDelegate.prototype.isFeatureDisabled=function(n,t){return this.areBlocksDisabledInSite(t)||e.prototype.isFeatureDisabled.call(this,n,t)},CoreBlockDelegate.prototype.updateData=function(){this.blocksUpdateObservable.next()},CoreBlockDelegate}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=(t(587),function(e){function CoreCourseModuleDelegate(n,t,o,r,i){var l=e.call(this,"CoreCourseModuleDelegate",n,t,o)||this;return l.sitesProvider=t,l.courseProvider=r,l.defaultHandler=i,l.featurePrefix="CoreCourseModuleDelegate_",l.handlerNameProperty="modName",l}return Object(o.__extends)(CoreCourseModuleDelegate,e),CoreCourseModuleDelegate.prototype.getMainComponent=function(e,n,t){var o=this;return Promise.resolve(this.executeFunctionOnEnabled(t.modname,"getMainComponent",[e,n,t])).catch(function(e){o.logger.error("Error getting main component",e)})},CoreCourseModuleDelegate.prototype.getModuleDataFor=function(e,n,t,o,r){return this.executeFunctionOnEnabled(e,"getData",[n,t,o,r])},CoreCourseModuleDelegate.prototype.isModuleDisabled=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return t.isModuleDisabledInSite(e,n)})},CoreCourseModuleDelegate.prototype.isModuleDisabledInSite=function(e,n){var t=this.getHandler(e,!1);return!!t&&(n=n||this.sitesProvider.getCurrentSite(),this.isFeatureDisabled(t,n))},CoreCourseModuleDelegate.prototype.displayRefresherInSingleActivity=function(e){return this.executeFunctionOnEnabled(e,"displayRefresherInSingleActivity")},CoreCourseModuleDelegate.prototype.getModuleIconSrc=function(e,n){return this.executeFunctionOnEnabled(e,"getIconSrc")||this.courseProvider.getModuleIconSrc(e,n)},CoreCourseModuleDelegate.prototype.supportsFeature=function(e,n,t){var o,r=this.enabledHandlers[e];return r&&(r.supportsFeature?o=r.supportsFeature.apply(r,[n]):r.supportedFeatures&&(o=r.supportedFeatures[n])),null===o||void 0===o?t:o},CoreCourseModuleDelegate}(t(99).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreContentLinksDelegate(e,n,t,o){this.sitesProvider=n,this.urlUtils=t,this.utils=o,this.handlers={},this.logger=e.getInstance("CoreContentLinksDelegate")}return CoreContentLinksDelegate.prototype.getActionsFor=function(e,n,t,o){var r=this;return e?this.sitesProvider.getSiteIdsFromUrl(e,!0,t).then(function(t){var i=[],l=[],s=r.urlUtils.extractUrlParams(e),a=function(a){var u=r.handlers[a],d=u.checkAllUsers,c=r.isHandlerEnabled.bind(r,u,e,s,n);if(!u.handles(e))return"continue";l.push(r.utils.filterEnabledSites(t,c,d).then(function(t){if(t.length)return Promise.resolve(u.getActions(t,e,s,n,o)).then(function(e){e&&e.length&&(e.forEach(function(e){e.message=e.message||"core.view",e.icon=e.icon||"eye",e.sites=e.sites||t}),i.push({priority:u.priority,actions:e}))})}))};for(var u in r.handlers)a(u);return r.utils.allPromises(l).catch(function(){}).then(function(){return r.sortActionsByPriority(i)})}):Promise.resolve([])},CoreContentLinksDelegate.prototype.getSiteUrl=function(e){if(e)for(var n in this.handlers){var t=this.handlers[n].getSiteUrl(e);if(t)return t}},CoreContentLinksDelegate.prototype.isHandlerEnabled=function(e,n,t,o,r){return(e.featureName?this.sitesProvider.isFeatureDisabled(e.featureName,r):Promise.resolve(!1)).then(function(i){return!i&&(!e.isEnabled||e.isEnabled(r,n,t,o))})},CoreContentLinksDelegate.prototype.registerHandler=function(e){return void 0!==this.handlers[e.name]?(this.logger.log("Addon '"+e.name+"' already registered"),!1):(this.logger.log("Registered addon '"+e.name+"'"),this.handlers[e.name]=e,!0)},CoreContentLinksDelegate.prototype.sortActionsByPriority=function(e){var n=[];return(e=e.sort(function(e,n){return e.priority<=n.priority?1:-1})).forEach(function(e){n=n.concat(e.actions)}),n},CoreContentLinksDelegate}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreCourseLogHelperProvider(n,t,o,r,i,l){this.sitesProvider=n,this.timeUtils=t,this.textUtils=o,this.utils=r,this.appProvider=i,this.pushNotificationsProvider=l,this.siteSchema={name:"CoreCourseLogHelperProvider",version:1,tables:[{name:e.ACTIVITY_LOG_TABLE,columns:[{name:"component",type:"TEXT"},{name:"componentid",type:"INTEGER"},{name:"ws",type:"TEXT"},{name:"data",type:"TEXT"},{name:"time",type:"INTEGER"}],primaryKeys:["component","componentid","ws","time"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=CoreCourseLogHelperProvider,CoreCourseLogHelperProvider.prototype.deleteLogs=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(e.ACTIVITY_LOG_TABLE,{component:n,componentid:t})})},CoreCourseLogHelperProvider.prototype.deleteWSLogsByComponent=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(e.ACTIVITY_LOG_TABLE,{component:n,componentid:t,ws:o})})},CoreCourseLogHelperProvider.prototype.deleteWSLogs=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(e.ACTIVITY_LOG_TABLE,{ws:n,data:r.utils.sortAndStringify(t)})})},CoreCourseLogHelperProvider.prototype.getAllLogs=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getAllRecords(e.ACTIVITY_LOG_TABLE)})},CoreCourseLogHelperProvider.prototype.getLogs=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(e.ACTIVITY_LOG_TABLE,{component:n,componentid:t})})},CoreCourseLogHelperProvider.prototype.log=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return i.appProvider.isOnline()?i.logOnline(e,n,r.getId()).catch(function(l){return i.utils.isWebServiceError(l)?Promise.reject(l):i.storeOffline(e,n,t,o,r.getId())}):i.storeOffline(e,n,t,o,r.getId())})},CoreCourseLogHelperProvider.prototype.logOnline=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(r){var i=Object.assign({},n);return r.write(e,i).then(function(r){return r.status?o.deleteWSLogs(e,n,t):Promise.reject(o.utils.createFakeWSError(""))})})},CoreCourseLogHelperProvider.prototype.logSingle=function(e,n,t,o,r,i,l,s){return this.pushNotificationsProvider.logViewEvent(o,r,i,e,l,s),this.log(e,n,t,o,s)},CoreCourseLogHelperProvider.prototype.logList=function(e,n,t,o,r,i,l){return this.pushNotificationsProvider.logViewListEvent(r,e,i,l),this.log(e,n,t,o,l)},CoreCourseLogHelperProvider.prototype.storeOffline=function(n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={ws:n,data:l.utils.sortAndStringify(t),component:o,componentid:r,time:l.timeUtils.timestamp()};return i.getDb().insertRecord(e.ACTIVITY_LOG_TABLE,s)})},CoreCourseLogHelperProvider.prototype.syncSite=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t=e.getId();return n.getAllLogs(t).then(function(e){var o=[];return e.forEach(function(e){o.find(function(n){return e.component==n.component&&e.componentid==n.componentid&&e.ws==n.ws&&e.data==n.data})||o.push(e)}),n.syncLogs(o,t)})})},CoreCourseLogHelperProvider.prototype.syncIfNeeded=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r=t.getId();return o.getLogs(e,n,r).then(function(e){var n=[];return e.forEach(function(e){n.find(function(n){return e.ws==n.ws&&e.data==n.data})||n.push(e)}),o.syncLogs(n,r)})})},CoreCourseLogHelperProvider.prototype.syncLogs=function(e,n){var t=this;return Promise.all(e.map(function(e){var o=t.textUtils.parseJSON(e.data);return t.logOnline(e.ws,o,n).catch(function(r){return(t.utils.isWebServiceError(r)?t.deleteWSLogs(e.ws,o,n):Promise.resolve()).catch(function(){}).then(function(){return Promise.reject(r)})}).then(function(){return t.deleteWSLogsByComponent(e.component,e.componentid,e.ws,n)})}))},CoreCourseLogHelperProvider.ACTIVITY_LOG_TABLE="course_activity_log",CoreCourseLogHelperProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(7),t(4);var o=function(){function CoreMimetypeUtilsProvider(e,n,t,o){var r=this;this.translate=t,this.textUtils=o,this.extToMime={},this.mimeToExt={},this.groupsMimeInfo={},this.extensionRegex=/^[a-z0-9]+$/,this.logger=n.getInstance("CoreMimetypeUtilsProvider"),e.get("assets/exttomime.json").subscribe(function(e){r.extToMime=e},function(e){}),e.get("assets/mimetoext.json").subscribe(function(e){r.mimeToExt=e},function(e){})}return CoreMimetypeUtilsProvider.prototype.canBeEmbedded=function(e){return this.isExtensionInGroup(e,["web_image","web_video","web_audio"])},CoreMimetypeUtilsProvider.prototype.cleanExtension=function(e){if(!e)return e;var n=e.indexOf("?");return n>-1&&(e=e.substr(0,n)),(n=e.indexOf("#"))>-1&&(e=e.substr(0,n)),(e=e.replace(/_.{32}$/,""))&&"."==e[0]&&(e=e.substr(1)),e},CoreMimetypeUtilsProvider.prototype.fillGroupMimeInfo=function(e){var n={},t=[];for(var o in this.extToMime){var r=this.extToMime[o];r.type&&r.groups&&-1!=r.groups.indexOf(e)&&(n[r.type]=!0,t.push(o))}this.groupsMimeInfo[e]={mimetypes:Object.keys(n),extensions:t}},CoreMimetypeUtilsProvider.prototype.getExtension=function(e,n){if(e=e||"","application/x-forcedownload"==(e=e.split(";")[0])||"application/forcedownload"==e)return this.guessExtensionFromUrl(n);var t=this.mimeToExt[e];if(t&&t.length){if(t.length>1&&n){var o=this.guessExtensionFromUrl(n);if(-1!=t.indexOf(o))return o}return t[0]}},CoreMimetypeUtilsProvider.prototype.getEmbeddedHtml=function(e,n){var t,o=e.filename||e.name;if(e.mimetype?t=this.getExtension(e.mimetype):(t=this.getFileExtension(o),e.mimetype=this.getMimeType(t)),this.canBeEmbedded(t)){if(e.embedType=this.getExtensionType(t),n=n||e.fileurl||e.toURL&&e.toURL(),"image"==e.embedType)return'<img src="'+n+'">';if("audio"==e.embedType||"video"==e.embedType)return"<"+e.embedType+' controls title="'+o+'" src="'+n+'"><source src="'+n+'" type="'+e.mimetype+'"></'+e.embedType+">"}return""},CoreMimetypeUtilsProvider.prototype.getExtensionIcon=function(e){var n=this.getExtensionIconName(e)||"unknown";return this.getFileIconForType(n)},CoreMimetypeUtilsProvider.prototype.getExtensionIconName=function(e){if(this.extToMime[e]){if(this.extToMime[e].icon)return this.extToMime[e].icon;var n=this.extToMime[e].type.split("/")[0];if("video"==n||"text"==n||"image"==n||"document"==n||"audio"==n)return n}},CoreMimetypeUtilsProvider.prototype.getExtensionType=function(e){if(e=this.cleanExtension(e),this.extToMime[e]&&this.extToMime[e].string)return this.extToMime[e].string},CoreMimetypeUtilsProvider.prototype.getExtensions=function(e){return e=e||"",e=e.split(";")[0],this.mimeToExt[e]||[]},CoreMimetypeUtilsProvider.prototype.getFileIcon=function(e){var n=this.getFileExtension(e),t=this.getExtensionIconName(n)||"unknown";return this.getFileIconForType(t)},CoreMimetypeUtilsProvider.prototype.getFolderIcon=function(){return"assets/img/files/folder-64.png"},CoreMimetypeUtilsProvider.prototype.getFileIconForType=function(e){return"assets/img/files/"+e+"-64.png"},CoreMimetypeUtilsProvider.prototype.guessExtensionFromUrl=function(e){var n,t,o,r=e.split(".");if(r.length>1&&((o=(n=r.pop().toLowerCase()).indexOf("?"))>-1&&(n=n.substr(0,o)),this.extensionRegex.test(n)&&(t=n)),!t||void 0!==this.getMimeType(t))return t;this.logger.warn("Guess file extension: Not valid extension "+t)},CoreMimetypeUtilsProvider.prototype.getFileExtension=function(e){var n,t=e.lastIndexOf(".");if(!(t>-1&&(n=e.substr(t+1).toLowerCase(),n=this.cleanExtension(n),void 0===this.getMimeType(n))))return n;this.logger.warn("Get file extension: Not valid extension "+n)},CoreMimetypeUtilsProvider.prototype.getGroupMimeInfo=function(e,n){return void 0===this.groupsMimeInfo[e]&&this.fillGroupMimeInfo(e),n?this.groupsMimeInfo[e][n]:this.groupsMimeInfo[e]},CoreMimetypeUtilsProvider.prototype.getMimeType=function(e){if(e=this.cleanExtension(e),this.extToMime[e]&&this.extToMime[e].type)return this.extToMime[e].type},CoreMimetypeUtilsProvider.prototype.getMimetypeDescription=function(e,n){var t="assets.mimetypes.",o="",r="",i="";if("object"==typeof e&&"function"==typeof e.file?o=e.name:"object"==typeof e?(o=e.filename||"",r=e.mimetype||""):r=e,o&&(i=this.getFileExtension(o),r||(r=this.getMimeType(i))),!r)return"";i||(i=this.getExtension(r));var l=this.getMimetypeType(r)||"",s=r.split("/"),a={mimetype:r,ext:i||"",mimetype1:s[0],mimetype2:s[1]||""},u={};for(var d in a){var c=a[d];u[d]=c,u[d.toUpperCase()]=c.toUpperCase(),u[this.textUtils.ucFirst(d)]=this.textUtils.ucFirst(c)}var p=r.replace(/\+/g,"_"),f=l.replace(/\+/g,"_"),h=this.translate.instant(t+p,{$a:u}),m=this.translate.instant(t+f,{$a:u}),_=this.translate.instant(t+"default",{$a:u}),g=r;return h!=t+p?g=h:m!=t+f?g=m:_!=t+"default"&&(g=_),n&&(g=this.textUtils.ucFirst(g)),g},CoreMimetypeUtilsProvider.prototype.getMimetypeType=function(e){e=e.split(";")[0];var n=this.mimeToExt[e];if(n)for(var t=0;t<n.length;t++){var o=n[t];if(this.extToMime[o]&&this.extToMime[o].string)return this.extToMime[o].string}},CoreMimetypeUtilsProvider.prototype.getMimetypeIcon=function(e){e=e.split(";")[0];for(var n=this.mimeToExt[e]||[],t="unknown",o=0;o<n.length;o++){var r=this.getExtensionIconName(n[o]);if(r){t=r;break}}return this.getFileIconForType(t)},CoreMimetypeUtilsProvider.prototype.getTranslatedGroupName=function(e){var n="assets.mimetypes.group:"+e,t=this.translate.instant(n);return t!=n?t:e},CoreMimetypeUtilsProvider.prototype.isExtensionInGroup=function(e,n){if(e=this.cleanExtension(e),n&&n.length&&this.extToMime[e]&&this.extToMime[e].groups)for(var t=0;t<this.extToMime[e].groups.length;t++){if(-1!=n.indexOf(this.extToMime[e].groups[t]))return!0}return!1},CoreMimetypeUtilsProvider.prototype.removeExtension=function(e){var n,t=e.lastIndexOf(".");return t>-1&&(n=e.substr(t+1).toLowerCase(),void 0!==this.getMimeType(n))?e.substr(0,t):e},CoreMimetypeUtilsProvider}()},,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(54),r=function(){function CoreGroupsProvider(e,n,t){this.sitesProvider=e,this.translate=n,this.coursesProvider=t,this.ROOT_CACHE_KEY="mmGroups:"}return e=CoreGroupsProvider,CoreGroupsProvider.prototype.activityHasGroups=function(n,t,o){return this.getActivityGroupMode(n,t,o).then(function(n){return n===e.SEPARATEGROUPS||n===e.VISIBLEGROUPS}).catch(function(){return!1})},CoreGroupsProvider.prototype.getActivityAllowedGroups=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId();var l={cmid:e,userid:n},s={cacheKey:i.getActivityAllowedGroupsCacheKey(e,n),updateFrequency:o.a.FREQUENCY_RARELY};return r&&(s.getFromCache=!1,s.emergencyCache=!1),t.read("core_group_get_activity_allowed_groups",l,s).then(function(e){return e&&e.groups?e:Promise.reject(null)})})},CoreGroupsProvider.prototype.getActivityAllowedGroupsCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"allowedgroups:"+e+":"+n},CoreGroupsProvider.prototype.getActivityAllowedGroupsIfEnabled=function(e,n,t,o){var r=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.activityHasGroups(e,t,o).then(function(i){return i?r.getActivityAllowedGroups(e,n,t,o):{groups:[]}})},CoreGroupsProvider.prototype.getActivityGroupInfo=function(n,t,o,r,i){var l=this,s={groups:[]};return this.getActivityGroupMode(n,r,i).then(function(t){return s.separateGroups=t===e.SEPARATEGROUPS,s.visibleGroups=t===e.VISIBLEGROUPS,s.separateGroups||s.visibleGroups?l.getActivityAllowedGroups(n,o,r,i):{groups:[],canaccessallgroups:!1}}).then(function(e){return e.groups.length<=0?(s.separateGroups=!1,s.visibleGroups=!1,s.defaultGroupId=0):(e.canaccessallgroups||void 0===e.canaccessallgroups&&s.visibleGroups?(s.groups.push({id:0,name:l.translate.instant("core.allparticipants")}),s.defaultGroupId=0):s.defaultGroupId=e.groups[0].id,s.groups=s.groups.concat(e.groups)),s})},CoreGroupsProvider.prototype.getActivityGroupMode=function(e,n,t){var r=this;return this.sitesProvider.getSite(n).then(function(n){var i={cmid:e},l={cacheKey:r.getActivityGroupModeCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return t&&(l.getFromCache=!1,l.emergencyCache=!1),n.read("core_group_get_activity_groupmode",i,l).then(function(e){return e&&void 0!==e.groupmode?e.groupmode:Promise.reject(null)})})},CoreGroupsProvider.prototype.getActivityGroupModeCacheKey=function(e){return this.ROOT_CACHE_KEY+"groupmode:"+e},CoreGroupsProvider.prototype.getAllUserGroups=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(t){return e=e||t.getId(),t.isVersionGreaterEqualThan("3.6")?n.getUserGroupsInCourse(0,e):n.coursesProvider.getUserCourses(!1,e).then(function(o){return o.push({id:t.getSiteHomeId()}),n.getUserGroups(o,e)})})},CoreGroupsProvider.prototype.getUserGroups=function(e,n,t){var o=this,r=e.map(function(e){return o.getUserGroupsInCourse("object"==typeof e?e.id:e,n,t)});return Promise.all(r).then(function(e){return[].concat.apply([],e)})},CoreGroupsProvider.prototype.getUserGroupsInCourse=function(e,n,t){var r=this;return this.sitesProvider.getSite(n).then(function(n){var i={userid:t=t||n.getUserId(),courseid:e},l={cacheKey:r.getUserGroupsInCourseCacheKey(e,t),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("core_group_get_course_user_groups",i,l).then(function(e){return e&&e.groups?e.groups:Promise.reject(null)})})},CoreGroupsProvider.prototype.getUserGroupsInCoursePrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"courseGroups:"},CoreGroupsProvider.prototype.getUserGroupsInCourseCacheKey=function(e,n){return this.getUserGroupsInCoursePrefixCacheKey()+e+":"+n},CoreGroupsProvider.prototype.invalidateActivityAllowedGroups=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getActivityAllowedGroupsCacheKey(e,n))})},CoreGroupsProvider.prototype.invalidateActivityGroupMode=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getActivityGroupModeCacheKey(e))})},CoreGroupsProvider.prototype.invalidateActivityGroupInfo=function(e,n,t){var o=[];return o.push(this.invalidateActivityAllowedGroups(e,n,t)),o.push(this.invalidateActivityGroupMode(e,t)),Promise.all(o)},CoreGroupsProvider.prototype.invalidateAllUserGroups=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(t){return t.isVersionGreaterEqualThan("3.6")?n.invalidateUserGroupsInCourse(0,e):t.invalidateWsCacheForKeyStartingWith(n.getUserGroupsInCoursePrefixCacheKey())})},CoreGroupsProvider.prototype.invalidateUserGroups=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId();var r=e.map(function(e){return o.invalidateUserGroupsInCourse("object"==typeof e?e.id:e,n.id,t)});return Promise.all(r)})},CoreGroupsProvider.prototype.invalidateUserGroupsInCourse=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getUserGroupsInCourseCacheKey(e,t))})},CoreGroupsProvider.prototype.validateGroupId=function(e,n){return e>0&&n&&n.groups&&n.groups.length>0&&n.groups.some(function(n){return e==n.id})?e:n.defaultGroupId},CoreGroupsProvider.NOGROUPS=0,CoreGroupsProvider.SEPARATEGROUPS=1,CoreGroupsProvider.VISIBLEGROUPS=2,CoreGroupsProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(6),t(356),t(442),t(4);var o=t(147),r=(t.n(o),function(){function CoreFileUploaderProvider(e,n,t,r,i,l,s,a,u,d,c,p){this.fileProvider=n,this.textUtils=t,this.utils=r,this.sitesProvider=i,this.timeUtils=l,this.mimeUtils=s,this.filepoolProvider=a,this.platform=u,this.translate=d,this.mediaCapture=c,this.camera=p,this.onGetPicture=new o.Subject,this.onAudioCapture=new o.Subject,this.onVideoCapture=new o.Subject,this.logger=e.getInstance("CoreFileUploaderProvider")}return CoreFileUploaderProvider.prototype.addDot=function(e){return"."+e},CoreFileUploaderProvider.prototype.areFileListDifferent=function(e,n){if(e=e||[],n=n||[],e.length!=n.length)return!0;for(var t=0;t<e.length;t++)if((e[t].name||e[t].filename)!=(n[t].name||n[t].filename))return!0;return!1},CoreFileUploaderProvider.prototype.captureAudio=function(e){var n=this;return this.onAudioCapture.next(!0),this.mediaCapture.captureAudio(e).finally(function(){n.onAudioCapture.next(!1)})},CoreFileUploaderProvider.prototype.captureVideo=function(e){var n=this;return this.onVideoCapture.next(!0),this.mediaCapture.captureVideo(e).finally(function(){n.onVideoCapture.next(!1)})},CoreFileUploaderProvider.prototype.clearTmpFiles=function(e){e.forEach(function(e){!e.offline&&e.remove&&e.remove(function(){})})},CoreFileUploaderProvider.prototype.getCameraUploadOptions=function(e,n){var t=this.mimeUtils.guessExtensionFromUrl(e),o=this.mimeUtils.getMimeType(t),r=this.platform.is("ios"),i={deleteAfterUpload:!n,mimeType:o},l=this.fileProvider.getFileAndDirectoryFromPath(e).name;if(!r||"image/jpeg"!=o&&"image/png"!=o)i.fileName=l;else{var s=l.split(".");s[0]+="_"+this.timeUtils.readableTimestamp(),i.fileName=s.join(".")}return n&&(i.deleteAfterUpload=this.fileProvider.isFileInAppFolder(e),this.platform.is("android")&&(i.fileName=i.fileName.replace(/(\.[^\.]*)\?[^\.]*$/,"$1"))),i},CoreFileUploaderProvider.prototype.getFileUploadOptions=function(e,n,t,o,r,i){var l={};return l.fileName=n,l.mimeType=t||this.mimeUtils.getMimeType(this.mimeUtils.getFileExtension(l.fileName)),l.deleteAfterUpload=!!o,l.itemId=i||0,l.fileArea=r,l},CoreFileUploaderProvider.prototype.getMediaUploadOptions=function(e){var n,t={},o=e.name;return n=o.split("."),n[0]+="_"+this.timeUtils.readableTimestamp(),o=n.join("."),t.fileName=o,t.deleteAfterUpload=!0,t.mimeType=e.type?e.type:this.mimeUtils.getMimeType(this.mimeUtils.getFileExtension(t.fileName)),t},CoreFileUploaderProvider.prototype.getPicture=function(e){var n=this;return this.onGetPicture.next(!0),this.camera.getPicture(e).finally(function(){n.onGetPicture.next(!1)})},CoreFileUploaderProvider.prototype.getStoredFiles=function(e){var n=this;return this.fileProvider.getDirectoryContents(e).then(function(e){return n.markOfflineFiles(e)})},CoreFileUploaderProvider.prototype.getStoredFilesFromOfflineFilesObject=function(e,n){var t=[];return e&&(e.online&&e.online.length>0&&(t=this.utils.clone(e.online)),e.offline>0)?this.getStoredFiles(n).then(function(e){return t.concat(e)}).catch(function(){return t}):Promise.resolve(t)},CoreFileUploaderProvider.prototype.isInvalidMimetype=function(e,n,t){var o;if(e&&(t?(o=this.mimeUtils.getExtension(t),-1==e.indexOf(t)&&(t=this.mimeUtils.getMimeType(o))):(o=this.mimeUtils.getFileExtension(n),t=this.mimeUtils.getMimeType(o)),t&&-1==e.indexOf(t)))return o=o||this.translate.instant("core.unknown"),this.translate.instant("core.fileuploader.invalidfiletype",{$a:o})},CoreFileUploaderProvider.prototype.markOfflineFiles=function(e){return e.forEach(function(e){e.offline=!0,e.filename=e.name}),e},CoreFileUploaderProvider.prototype.prepareFiletypeList=function(e){var n=this;if((e=e&&e.trim())&&"*"!=e){var t={},o=[];return e.split(/[;, ]+/g).forEach(function(e){if(e=e.trim())if(-1!=e.indexOf("/"))o.push({name:n.mimeUtils.getMimetypeDescription(e),extlist:n.mimeUtils.getExtensions(e).map(n.addDot).join(" ")}),t[e]=!0;else if(0===e.indexOf(".")){var r=n.mimeUtils.getMimeType(e);o.push({name:!!r&&n.mimeUtils.getMimetypeDescription(r),extlist:e}),r&&(t[r]=!0)}else{var i=n.mimeUtils.getGroupMimeInfo(e,"extensions"),l=n.mimeUtils.getGroupMimeInfo(e,"mimetypes");if(i.length>0)o.push({name:n.mimeUtils.getTranslatedGroupName(e),extlist:i?i.map(n.addDot).join(" "):""}),l.forEach(function(e){e&&(t[e]=!0)});else{e=n.addDot(e);r=n.mimeUtils.getMimeType(e);o.push({name:!!r&&n.mimeUtils.getMimetypeDescription(r),extlist:e}),r&&(t[r]=!0)}}}),{info:o,mimetypes:Object.keys(t)}}},CoreFileUploaderProvider.prototype.storeFilesToUpload=function(e,n){var t=this,o={online:[],offline:0};return n&&n.length?this.fileProvider.removeUnusedFiles(e,n).then(function(){var r=[];return n.forEach(function(n){if(n.filename&&!n.name)o.online.push({filename:n.filename,fileurl:n.fileurl});else if(n.name)if(n.fullPath&&-1!=n.fullPath.indexOf(e))o.offline++;else{var i=t.textUtils.concatenatePaths(e,n.name);r.push(t.fileProvider.copyFile(n.toURL(),i)),o.offline++}else r.push(Promise.reject(null))}),Promise.all(r).then(function(){return o})}):Promise.resolve(o)},CoreFileUploaderProvider.prototype.uploadFile=function(e,n,t,o){var r=this,i=(n=n||{}).deleteAfterUpload,l=this.utils.clone(n);return delete l.deleteAfterUpload,this.sitesProvider.getSite(o).then(function(n){return n.uploadFile(e,l,t)}).then(function(n){return i&&setTimeout(function(){r.fileProvider.removeExternalFile(e)},500),n})},CoreFileUploaderProvider.prototype.uploadOrReuploadFile=function(e,n,t,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l,s,a=e.filename&&!e.name;return a?(s=e.filename,l=this.filepoolProvider.downloadUrl(r,e.url||e.fileurl,!1,t,o,e.timemodified,void 0,void 0,e).then(function(e){return i.fileProvider.getExternalFile(e)})):(s=e.name,l=Promise.resolve(e)),l.then(function(e){var t=i.getFileUploadOptions(e.toURL(),s,e.type,a,"draft",n);return i.uploadFile(e.toURL(),t,void 0,r).then(function(e){return e.itemid})})},CoreFileUploaderProvider.prototype.uploadOrReuploadFiles=function(e,n,t,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),e&&e.length?this.uploadOrReuploadFile(e[0],0,n,t,o).then(function(i){for(var l=[],s=1;s<e.length;s++){l.push(r.uploadOrReuploadFile(e[s],i,n,t,o))}return Promise.all(l).then(function(){return i})}):Promise.resolve(1)},CoreFileUploaderProvider.LIMITED_SIZE_WARNING=1048576,CoreFileUploaderProvider.WIFI_SIZE_WARNING=10485760,CoreFileUploaderProvider}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(99),i=(t(609),function(e){function CoreQuestionDelegate(n,t,o,r){var i=e.call(this,"CoreQuestionDelegate",n,t,o)||this;return i.defaultHandler=r,i.handlerNameProperty="type",i}return Object(o.__extends)(CoreQuestionDelegate,e),CoreQuestionDelegate.prototype.getBehaviourForQuestion=function(e,n){var t=this.getTypeName(e);return this.executeFunctionOnEnabled(t,"getBehaviour",[e,n])||n},CoreQuestionDelegate.prototype.getComponentForQuestion=function(e,n){var t=this.getTypeName(n);return Promise.resolve(this.executeFunctionOnEnabled(t,"getComponent",[e,n]))},CoreQuestionDelegate.prototype.getPreventSubmitMessage=function(e){var n=this.getTypeName(e);return this.executeFunctionOnEnabled(n,"getPreventSubmitMessage",[e])},CoreQuestionDelegate.prototype.getFullTypeName=function(e){return"qtype_"+e},CoreQuestionDelegate.prototype.getTypeName=function(e){return this.getFullTypeName(e.type)},CoreQuestionDelegate.prototype.isCompleteResponse=function(e,n){var t=this.getTypeName(e);return this.executeFunctionOnEnabled(t,"isCompleteResponse",[e,n])},CoreQuestionDelegate.prototype.isGradableResponse=function(e,n){var t=this.getTypeName(e);return this.executeFunctionOnEnabled(t,"isGradableResponse",[e,n])},CoreQuestionDelegate.prototype.isSameResponse=function(e,n,t){var o=this.getTypeName(e);return this.executeFunctionOnEnabled(o,"isSameResponse",[e,n,t])},CoreQuestionDelegate.prototype.isQuestionSupported=function(e){return this.hasHandler(this.getFullTypeName(e),!0)},CoreQuestionDelegate.prototype.prepareAnswersForQuestion=function(e,n,t,o){var r=this.getTypeName(e);return Promise.resolve(this.executeFunctionOnEnabled(r,"prepareAnswers",[e,n,t,o]))},CoreQuestionDelegate.prototype.validateSequenceCheck=function(e,n){var t=this.getTypeName(e);return this.executeFunctionOnEnabled(t,"validateSequenceCheck",[e,n])},CoreQuestionDelegate.prototype.getAdditionalDownloadableFiles=function(e,n){var t=this.getTypeName(e);return this.executeFunctionOnEnabled(t,"getAdditionalDownloadableFiles",[e,n])||[]},CoreQuestionDelegate}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(496),t(482),t(589),t(396);var o=function(){return function CoreCourseComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){function CoreIconComponent(e,n){this.config=n,this.element=e.nativeElement}return CoreIconComponent.prototype.ngOnChanges=function(e){if(e.name&&this.name){var n=this.newElement?this.newElement:this.element;if(this.newElement=document.createElement("ion-icon"),this.name.startsWith("fa-"))this.newElement.classList.add("icon"),this.newElement.classList.add("fa"),this.newElement.classList.add(this.name),this.isTrueProperty(this.fixedWidth)&&this.newElement.classList.add("fa-fw"),this.color&&this.newElement.classList.add("fa-"+this.color);else{var t=this.config.get("iconMode");this.newElement.classList.add("icon"),this.newElement.classList.add("icon-"+t),this.newElement.classList.add("ion-"+t+"-"+this.name)}!this.ariaLabel&&this.newElement.setAttribute("aria-hidden","true"),!this.ariaLabel&&this.newElement.setAttribute("role","presentation"),this.ariaLabel&&this.newElement.setAttribute("aria-label",this.ariaLabel),this.ariaLabel&&this.newElement.setAttribute("title",this.ariaLabel);for(var o=this.element.attributes,r=o.length-1;r>=0;r--)if("class"==o[r].name){if(o[r].value)for(var i=o[r].value.split(" "),l=0;l<i.length;l++)i[l]&&this.newElement.classList.add(i[l])}else this.newElement.setAttribute(o[r].name,o[r].value);this.slash&&this.newElement.classList.add("icon-slash"),n.parentElement.replaceChild(this.newElement,n)}},CoreIconComponent.prototype.isTrueProperty=function(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||"on"===e||""===e:!!e},CoreIconComponent.prototype.ngOnDestroy=function(){this.newElement&&this.newElement.remove()},CoreIconComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=(t(6),function(){function CoreTabComponent(e,n,t,r){this.tabs=e,this.domUtils=t,this.enabled=!0,this.ionSelect=new o.r,this.loaded=!1,this.initialized=!1,this._show=!0,this.element=n.nativeElement,this.element.setAttribute("role","tabpanel"),this.element.setAttribute("tabindex","0"),this.id=this.id||"core-tab-"+r.getUniqueId("CoreTabComponent")}return Object.defineProperty(CoreTabComponent.prototype,"show",{get:function(){return this._show},set:function(e){if(void 0!==e){var n=this._show!=e;this._show=e,this.initialized&&n&&(this.tabs.tabVisibilityChanged(),this.updateAriaHidden())}},enumerable:!0,configurable:!0}),CoreTabComponent.prototype.ngOnInit=function(){var e=this;this.element.setAttribute("aria-labelledby",this.id+"-tab"),this.element.setAttribute("id",this.id),this.tabs.addTab(this),this.initialized=!0,setTimeout(function(){e.updateAriaHidden()},1e3)},CoreTabComponent.prototype.ngOnDestroy=function(){this.tabs.removeTab(this)},CoreTabComponent.prototype.selectTab=function(){var e=this;this.element.classList.add("selected"),this.tabElement=this.tabElement||document.getElementById(this.id+"-tab"),this.updateAriaHidden(),this.tabElement&&this.tabElement.setAttribute("aria-selected",!0),this.loaded=!0,this.ionSelect.emit(this),this.showHideNavBarButtons(!0),this.domUtils.waitElementToExist(function(){return e.content?e.content.getScrollElement():e.element.querySelector("ion-content > .scroll-content")}).then(function(n){n.addEventListener("scroll",function(n){e.tabs.showHideTabs(n.target)}),e.tabs.showHideTabs(n)}).catch(function(){})},CoreTabComponent.prototype.unselectTab=function(){this.updateAriaHidden(),this.tabElement&&this.tabElement.setAttribute("aria-selected",!1),this.element.classList.remove("selected"),this.showHideNavBarButtons(!1)},CoreTabComponent.prototype.getChildrenNavBarButtons=function(){for(var e=this.element.querySelectorAll("core-navbar-buttons"),n=[],t=0;t<e.length;t++){var o=this.domUtils.getInstanceByElement(e[t]);o&&n.push(o)}return n},CoreTabComponent.prototype.showHideNavBarButtons=function(e){var n=this.getChildrenNavBarButtons();for(var t in n)n[t].forceHide(!e)},CoreTabComponent.prototype.updateAriaHidden=function(){this.tabElement||(this.tabElement=document.getElementById(this.id+"-tab")),this.tabElement&&this.tabElement&&this.tabElement.setAttribute("aria-hidden",!this._show)},CoreTabComponent}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(167),t(134);var o=t(54),r=t(440),i=function(){function AddonModAssignProvider(e,n,t,o,r,i,l,s,a,u,d,c){this.sitesProvider=n,this.textUtils=t,this.timeUtils=o,this.appProvider=r,this.utils=i,this.submissionDelegate=l,this.gradesProvider=s,this.filepoolProvider=a,this.assignOffline=u,this.commentsProvider=d,this.logHelper=c,this.ROOT_CACHE_KEY="mmaModAssign:",this.gradingOfflineEnabled={},this.logger=e.getInstance("AddonModAssignProvider")}return e=AddonModAssignProvider,AddonModAssignProvider.prototype.canSubmitOffline=function(n,t){if(!this.isSubmissionOpen(n,t))return!1;var o=t.lastattempt.submission,r=t.lastattempt.teamsubmission;if(r){if(r.status===e.SUBMISSION_STATUS_SUBMITTED)return!1;if(o&&o.status===e.SUBMISSION_STATUS_SUBMITTED)return!1;if(n.preventsubmissionnotingroup&&!t.lastattempt.submissiongroup)return!1}else{if(!o)return!1;if(o.status===e.SUBMISSION_STATUS_SUBMITTED)return!1}return n.submissiondrafts},AddonModAssignProvider.prototype.fixSubmissionStatusParams=function(e,n,t,o){return{isBlind:!!n&&!!o,groupId:e.isVersionGreaterEqualThan("3.5")?t||0:0,userId:n||e.getUserId()}},AddonModAssignProvider.prototype.getAssignment=function(e,n,t,o){return this.getAssignmentByField(e,"cmid",n,t,o)},AddonModAssignProvider.prototype.getAssignmentByField=function(e,n,t,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={courseids:[e],includenotenrolledcourses:1},a={cacheKey:l.getAssignmentCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return r&&(a.getFromCache=!1,a.emergencyCache=!1),i.read("mod_assign_get_assignments",s,a).catch(function(){return delete s.includenotenrolledcourses,i.read("mod_assign_get_assignments",s,a)}).then(function(e){if(e.courses&&e.courses.length)for(var o=e.courses[0].assignments,r=0;r<o.length;r++)if(o[r][n]==t)return o[r];return Promise.reject(null)})})},AddonModAssignProvider.prototype.getAssignmentById=function(e,n,t,o){return this.getAssignmentByField(e,"id",n,t,o)},AddonModAssignProvider.prototype.getAssignmentCacheKey=function(e){return this.ROOT_CACHE_KEY+"assignment:"+e},AddonModAssignProvider.prototype.getAssignmentUserMappings=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={assignmentids:[e]},s={cacheKey:i.getAssignmentUserMappingsCacheKey(e),updateFrequency:o.a.FREQUENCY_OFTEN};return t&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_assign_get_user_mappings",l,s).then(function(t){if(t.assignments&&t.assignments.length){if(!n||n<0)return-1;var o=t.assignments[0];if(o.assignmentid==e)for(var r=o.mappings,i=0;i<r.length;i++)if(r[i].userid==n)return r[i].id}else if(t.warnings&&t.warnings.length)return Promise.reject(t.warnings[0]);return Promise.reject(null)})})},AddonModAssignProvider.prototype.getAssignmentUserMappingsCacheKey=function(e){return this.ROOT_CACHE_KEY+"usermappings:"+e},AddonModAssignProvider.prototype.getAssignmentGrades=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={assignmentids:[e]},i={cacheKey:o.getAssignmentGradesCacheKey(e)};return n&&(i.getFromCache=!1,i.emergencyCache=!1),t.read("mod_assign_get_grades",r,i).then(function(n){if(n.assignments&&n.assignments.length){var t=n.assignments[0];if(t.assignmentid==e)return t.grades}else if(n.warnings&&n.warnings.length)return"3"==n.warnings[0].warningcode?[]:Promise.reject(n.warnings[0]);return Promise.reject(null)})})},AddonModAssignProvider.prototype.getAssignmentGradesCacheKey=function(e){return this.ROOT_CACHE_KEY+"assigngrades:"+e},AddonModAssignProvider.prototype.getSubmissionGradingStatusColor=function(n){return n?n==e.GRADING_STATUS_GRADED||n==e.MARKING_WORKFLOW_STATE_RELEASED?"success":"danger":""},AddonModAssignProvider.prototype.getSubmissionGradingStatusTranslationId=function(n){if(n)return n==e.GRADING_STATUS_GRADED||n==e.GRADING_STATUS_NOT_GRADED||n==e.GRADED_FOLLOWUP_SUBMIT?"addon.mod_assign."+n:"addon.mod_assign.markingworkflowstate"+n},AddonModAssignProvider.prototype.getSubmissionObjectFromAttempt=function(e,n){return n?e.teamsubmission?n.teamsubmission:n.submission:null},AddonModAssignProvider.prototype.getSubmissionPluginAttachments=function(e){var n=[];return e.fileareas&&e.fileareas.forEach(function(e){e&&e.files&&e.files.forEach(function(e){e.filename||(e.filename="/"==e.filepath[0]?e.filepath.substr(1):e.filepath),n.push(e)})}),n},AddonModAssignProvider.prototype.getSubmissionPluginText=function(e,n){var t="";return e.editorfields&&(e.editorfields.forEach(function(e){t+=e.text}),!n&&e.fileareas&&e.fileareas[0]&&(t=this.textUtils.replacePluginfileUrls(t,e.fileareas[0].files))),t},AddonModAssignProvider.prototype.getSubmissions=function(e,n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={assignmentids:[e]},l={cacheKey:r.getSubmissionsCacheKey(e),updateFrequency:o.a.FREQUENCY_OFTEN};return n&&(l.getFromCache=!1,l.emergencyCache=!1),t.read("mod_assign_get_submissions",i,l).then(function(e){return e.warnings.length>0&&"1"==e.warnings[0].warningcode?{canviewsubmissions:!1}:e.assignments&&e.assignments.length?{canviewsubmissions:!0,submissions:e.assignments[0].submissions}:Promise.reject(null)})})},AddonModAssignProvider.prototype.getSubmissionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"submissions:"+e},AddonModAssignProvider.prototype.getSubmissionStatus=function(e,n,t,o,r,i,l){var s=this;return void 0===r&&(r=!0),this.sitesProvider.getSite(l).then(function(l){var a=s.fixSubmissionStatusParams(l,n,t,o),u={assignid:e,userid:a.userId},d={cacheKey:s.getSubmissionStatusCacheKey(e,a.userId,a.groupId,a.isBlind),getCacheUsingCacheKey:!0,filter:r,rewriteurls:r};return a.groupId&&(u.groupid=a.groupId),i&&(d.getFromCache=!1,d.emergencyCache=!1),r||(d.saveToCache=!1),l.read("mod_assign_get_submission_status",u,d)})},AddonModAssignProvider.prototype.getSubmissionStatusWithRetry=function(e,n,t,o,r,i,l){var s=this;return void 0===r&&(r=!0),this.getSubmissionStatus(e.id,n,t,o,r,i,l).then(function(i){return s.getSubmissionObjectFromAttempt(e,i.lastattempt)?i:s.getSubmissionStatus(e.id,n,t,o,r,!0,l).catch(function(){return i})})},AddonModAssignProvider.prototype.getSubmissionStatusCacheKey=function(e,n,t,o){return this.getSubmissionsCacheKey(e)+":"+n+":"+(o?1:0)+":"+t},AddonModAssignProvider.prototype.getSubmissionStatusColor=function(e){switch(e){case"submitted":return"success";case"draft":return"info";case"new":case"noattempt":case"noonlinesubmissions":case"nosubmission":case"gradedfollowupsubmit":return"danger";default:return"light"}},AddonModAssignProvider.prototype.getUnsupportedEditPlugins=function(e){var n=this,t=[],o=[];return e.forEach(function(e){o.push(n.submissionDelegate.isPluginSupportedForEdit(e.type).then(function(n){n||t.push(e.name)}))}),Promise.all(o).then(function(){return t})},AddonModAssignProvider.prototype.listParticipants=function(e,n,t,r){var i=this;return n=n||0,this.sitesProvider.getSite(r).then(function(r){if(!r.wsAvailable("mod_assign_list_participants"))return Promise.reject(null);var l={assignid:e,groupid:n,filter:""},s={cacheKey:i.listParticipantsCacheKey(e,n),updateFrequency:o.a.FREQUENCY_OFTEN};return t&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_assign_list_participants",l,s)})},AddonModAssignProvider.prototype.listParticipantsCacheKey=function(e,n){return this.listParticipantsPrefixCacheKey(e)+":"+n},AddonModAssignProvider.prototype.listParticipantsPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+"participants:"+e},AddonModAssignProvider.prototype.invalidateAllSubmissionData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getSubmissionsCacheKey(e))})},AddonModAssignProvider.prototype.invalidateAssignmentData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAssignmentCacheKey(e))})},AddonModAssignProvider.prototype.invalidateAssignmentUserMappingsData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAssignmentUserMappingsCacheKey(e))})},AddonModAssignProvider.prototype.invalidateAssignmentGradesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAssignmentGradesCacheKey(e))})},AddonModAssignProvider.prototype.invalidateContent=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getAssignment(n,e,!1,t).then(function(e){var r=[];return r.push(o.invalidateAllSubmissionData(e.id,t)),r.push(o.invalidateAssignmentUserMappingsData(e.id,t)),r.push(o.invalidateAssignmentGradesData(e.id,t)),r.push(o.invalidateListParticipantsData(e.id,t)),r.push(o.commentsProvider.invalidateCommentsByInstance("module",e.id,t)),r.push(o.invalidateAssignmentData(n,t)),r.push(o.gradesProvider.invalidateAllCourseGradesData(n)),Promise.all(r)})},AddonModAssignProvider.prototype.invalidateFiles=function(n){return this.filepoolProvider.invalidateFilesByComponent(this.sitesProvider.getCurrentSiteId(),e.COMPONENT,n)},AddonModAssignProvider.prototype.invalidateSubmissionData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getSubmissionsCacheKey(e))})},AddonModAssignProvider.prototype.invalidateSubmissionStatusData=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l=i.fixSubmissionStatusParams(r,n,t,o);return r.invalidateWsCacheForKey(i.getSubmissionStatusCacheKey(e,l.userId,l.groupId,l.isBlind))})},AddonModAssignProvider.prototype.invalidateListParticipantsData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.listParticipantsPrefixCacheKey(e))})},AddonModAssignProvider.prototype.isGradingOfflineEnabled=function(e){var n=this;return void 0!==this.gradingOfflineEnabled[e]?Promise.resolve(this.gradingOfflineEnabled[e]):this.gradesProvider.isGradeItemsAvalaible(e).then(function(t){return n.gradingOfflineEnabled[e]=t,t})},AddonModAssignProvider.prototype.isOutcomesEditEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_assign_submit_grading_form")})},AddonModAssignProvider.prototype.isPluginEnabled=function(e){return!0},AddonModAssignProvider.prototype.isSubmissionOpen=function(n,t){if(!n||!t)return!1;var o,r=this.timeUtils.timestamp(),i=t.lastattempt,l=this.getSubmissionObjectFromAttempt(n,i);return n.cutoffdate&&(o=n.cutoffdate),(!i||!i.locked)&&(o&&i&&i.extensionduedate&&i.extensionduedate>o&&(o=i.extensionduedate),!!(o?n.allowsubmissionsfromdate<=r&&r<=o:n.allowsubmissionsfromdate<=r)&&(!l||!n.submissiondrafts||l.status!=e.SUBMISSION_STATUS_SUBMITTED))},AddonModAssignProvider.prototype.logSubmissionView=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(i){return r.logHelper.logSingle("mod_assign_view_submission_status",{assignid:n},e.COMPONENT,n,t,"assign",{},o)})},AddonModAssignProvider.prototype.logGradingView=function(n,t,o){return this.logHelper.logSingle("mod_assign_view_grading_table",{assignid:n},e.COMPONENT,n,t,"assign",{},o)},AddonModAssignProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_assign_view_assign",{assignid:n},e.COMPONENT,n,t,"assign",{},o)},AddonModAssignProvider.prototype.needsSubmissionToBeGraded=function(n,t){return n.gradingstatus?n.gradingstatus!=e.GRADING_STATUS_GRADED&&n.gradingstatus!=e.MARKING_WORKFLOW_STATE_RELEASED?Promise.resolve(!0):this.getSubmissionStatus(t,n.submitid,void 0,n.blindid).then(function(e){return!e.feedback||!e.feedback.gradeddate||e.feedback.gradeddate<n.timemodified}):Promise.resolve(!0)},AddonModAssignProvider.prototype.saveSubmission=function(e,n,t,o,r,i,l,s){var a=this;s=s||this.sitesProvider.getCurrentSiteId();var u=function(){return a.assignOffline.saveSubmission(e,n,t,r,!i,l,s).then(function(){return!1})};return o&&!this.appProvider.isOnline()?u():this.assignOffline.deleteSubmission(e,l,s).then(function(){return a.saveSubmissionOnline(e,t,s).then(function(){return!0}).catch(function(e){return o&&e&&!a.utils.isWebServiceError(e)?u():Promise.reject(e)})})},AddonModAssignProvider.prototype.saveSubmissionOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_assign_save_submission",{assignmentid:e,plugindata:n}).then(function(e){if(e&&e.length)return Promise.reject(e[0])})})},AddonModAssignProvider.prototype.submitForGrading=function(e,n,t,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();var s=function(){return l.assignOffline.markSubmitted(e,n,!0,t,o,void 0,i).then(function(){return!1})};return r||!this.appProvider.isOnline()?s():this.assignOffline.deleteSubmission(e,void 0,i).then(function(){return l.submitForGradingOnline(e,t,i).then(function(){return!0}).catch(function(e){return e&&!l.utils.isWebServiceError(e)?s():Promise.reject(e)})})},AddonModAssignProvider.prototype.submitForGradingOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_assign_submit_for_grading",{assignmentid:e,acceptsubmissionstatement:n?1:0}).then(function(e){if(e&&e.length)return Promise.reject(e[0])})})},AddonModAssignProvider.prototype.submitGradingForm=function(e,n,t,o,r,i,l,s,a,u,d){var c=this;d=d||this.sitesProvider.getCurrentSiteId();var p=function(){return c.assignOffline.submitGradingForm(e,n,t,o,r,i,l,s,a,u,d).then(function(){return!1})};return this.isGradingOfflineEnabled(d).then(function(t){return t?c.appProvider.isOnline()?c.assignOffline.deleteSubmissionGrade(e,n,d).then(function(){return c.submitGradingFormOnline(e,n,o,r,i,l,s,a,u,d).then(function(){return!0}).catch(function(e){return e&&!c.utils.isWebServiceError(e)?p():Promise.reject(e)})}):p():c.submitGradingFormOnline(e,n,o,r,i,l,s,a,u,d).then(function(){return!0})})},AddonModAssignProvider.prototype.submitGradingFormOnline=function(e,n,t,o,i,l,s,a,u,d){return this.sitesProvider.getSite(d).then(function(d){if(n=n||d.getUserId(),d.wsAvailable("mod_assign_submit_grading_form")){var c={grade:t,attemptnumber:o,addattempt:i?1:0,workflowstate:l,applytoall:s?1:0};for(var p in a)c["outcome_"+p+"["+n+"]"]=a[p];for(var p in u)c[p]=u[p];var f=r.a.serialize(c,!0),h={assignmentid:e,userid:n,jsonformdata:JSON.stringify(f)};return d.write("mod_assign_submit_grading_form",h).then(function(e){if(e&&e.length)return Promise.reject(e[0])})}return d.write("mod_assign_save_grade",h={assignmentid:e,userid:n,grade:t,attemptnumber:o,addattempt:i?1:0,workflowstate:l,applytoall:s?1:0,plugindata:u},{responseExpected:!1})})},AddonModAssignProvider.COMPONENT="mmaModAssign",AddonModAssignProvider.SUBMISSION_COMPONENT="mmaModAssignSubmission",AddonModAssignProvider.UNLIMITED_ATTEMPTS=-1,AddonModAssignProvider.SUBMISSION_STATUS_NEW="new",AddonModAssignProvider.SUBMISSION_STATUS_REOPENED="reopened",AddonModAssignProvider.SUBMISSION_STATUS_DRAFT="draft",AddonModAssignProvider.SUBMISSION_STATUS_SUBMITTED="submitted",AddonModAssignProvider.ATTEMPT_REOPEN_METHOD_NONE="none",AddonModAssignProvider.ATTEMPT_REOPEN_METHOD_MANUAL="manual",AddonModAssignProvider.GRADING_STATUS_GRADED="graded",AddonModAssignProvider.GRADING_STATUS_NOT_GRADED="notgraded",AddonModAssignProvider.MARKING_WORKFLOW_STATE_RELEASED="released",AddonModAssignProvider.NEED_GRADING="needgrading",AddonModAssignProvider.GRADED_FOLLOWUP_SUBMIT="gradedfollowupsubmit",AddonModAssignProvider.WARN_GROUPS_REQUIRED="warnrequired",AddonModAssignProvider.WARN_GROUPS_OPTIONAL="warnoptional",AddonModAssignProvider.SUBMISSION_SAVED_EVENT="addon_mod_assign_submission_saved",AddonModAssignProvider.SUBMITTED_FOR_GRADING_EVENT="addon_mod_assign_submitted_for_grading",AddonModAssignProvider.GRADED_EVENT="addon_mod_assign_graded",AddonModAssignProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=t(1),i=(t(6),t(4),t(569)),l=(t(77),t(147)),s=(t.n(l),function(){function CoreContextMenuComponent(e,n,t,o,r,i){var s=this;this.translate=e,this.popoverCtrl=n,this.domUtils=o,this.coreTab=r,this.hideMenu=!0,this.expanded=!1,this.items=[],this.itemsMovedToParent=[],this.itemsChangedStream=new l.Subject,this.itemsChangedStream.auditTime(250).subscribe(function(){s.hideMenu=!s.items.some(function(e){return!e.hidden}),s.items.sort(function(e,n){return e.priority<=n.priority?1:-1})}),this.uniqueId="core-context-menu-"+i.getUniqueId("CoreContextMenuComponent"),this.instanceId=this.domUtils.storeInstanceByElement(t.nativeElement,this)}return CoreContextMenuComponent.prototype.ngOnInit=function(){this.icon=this.icon||"more",this.ariaLabel=this.ariaLabel||this.title||this.translate.instant("core.displayoptions")},CoreContextMenuComponent.prototype.addItem=function(e){this.parentContextMenu?(this.parentContextMenu.addItem(e),-1==this.itemsMovedToParent.indexOf(e)&&this.itemsMovedToParent.push(e)):-1==this.items.indexOf(e)&&(this.items.push(e),this.itemsChanged())},CoreContextMenuComponent.prototype.itemsChanged=function(){this.parentContextMenu?this.parentContextMenu.itemsChanged():this.itemsChangedStream.next()},CoreContextMenuComponent.prototype.mergeContextMenus=function(e){this.parentContextMenu=e;for(var n=0;n<this.items.length;n++){var t=this.items[n];e.addItem(t),this.itemsMovedToParent.push(t)}this.items=[],this.itemsChanged()},CoreContextMenuComponent.prototype.removeItem=function(e){if(this.parentContextMenu){this.parentContextMenu.removeItem(e);(n=this.itemsMovedToParent.indexOf(e))>=0&&this.itemsMovedToParent.splice(n,1)}else{var n;(n=this.items.indexOf(e))>=0&&this.items.splice(n,1),this.itemsChanged()}},CoreContextMenuComponent.prototype.removeMergedItems=function(){if(this.parentContextMenu)for(var e=0;e<this.itemsMovedToParent.length;e++)this.parentContextMenu.removeItem(this.itemsMovedToParent[e])},CoreContextMenuComponent.prototype.restoreMergedItems=function(){if(this.parentContextMenu)for(var e=0;e<this.itemsMovedToParent.length;e++)this.parentContextMenu.addItem(this.itemsMovedToParent[e])},CoreContextMenuComponent.prototype.showContextMenu=function(e){var n=this;if(!this.expanded){var t=this.popoverCtrl.create(i.a,{title:this.title,items:this.items,id:this.uniqueId,showBackdrop:!0});t.onDidDismiss(function(e){n.expanded=!1,e&&e.onClosed.emit()}),t.present({ev:e}),this.expanded=!0}},CoreContextMenuComponent.prototype.ngOnDestroy=function(){this.domUtils.removeInstanceById(this.instanceId),this.removeMergedItems()},CoreContextMenuComponent=Object(o.__decorate)([Object(o.__param)(4,Object(r.E)())],CoreContextMenuComponent)}())},,function(e,n,t){"use strict";function View_CoreIconComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n"]))],null,null)}t.d(n,"a",function(){return r}),n.b=View_CoreIconComponent_0;var o=t(1),r=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(10),r=function(){function CoreSyncProvider(e,n){var t=this;this.sitesProvider=n,this.SYNC_TABLE="sync",this.siteSchema={name:"CoreSyncProvider",version:1,tables:[{name:this.SYNC_TABLE,columns:[{name:"component",type:"TEXT",notNull:!0},{name:"id",type:"TEXT",notNull:!0},{name:"time",type:"INTEGER"},{name:"warnings",type:"TEXT"}],primaryKeys:["component","id"]}]},this.blockedItems={},this.sitesProvider.registerSiteSchema(this.siteSchema),e.on(o.a.LOGOUT,function(e){t.clearAllBlocks(e.siteId)})}return CoreSyncProvider.prototype.blockOperation=function(e,n,t,o){o=o||this.sitesProvider.getCurrentSiteId();var r=this.getUniqueSyncBlockId(e,n);this.blockedItems[o]||(this.blockedItems[o]={}),this.blockedItems[o][r]||(this.blockedItems[o][r]={}),this.blockedItems[o][r][t=t||"-"]=!0},CoreSyncProvider.prototype.clearAllBlocks=function(e){e?delete this.blockedItems[e]:this.blockedItems={}},CoreSyncProvider.prototype.clearBlocks=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId();var o=this.getUniqueSyncBlockId(e,n);this.blockedItems[t]&&delete this.blockedItems[t][o]},CoreSyncProvider.prototype.getSyncRecord=function(e,n,t){var o=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.getRecord(o.SYNC_TABLE,{component:e,id:n})})},CoreSyncProvider.prototype.insertOrUpdateSyncRecord=function(e,n,t,o){var r=this;return this.sitesProvider.getSiteDb(o).then(function(o){return t.component=e,t.id=n,o.insertRecord(r.SYNC_TABLE,t)})},CoreSyncProvider.prototype.getUniqueSyncBlockId=function(e,n){return e+"#"+n},CoreSyncProvider.prototype.isBlocked=function(e,n,t){if(t=t||this.sitesProvider.getCurrentSiteId(),!this.blockedItems[t])return!1;var o=this.getUniqueSyncBlockId(e,n);return!!this.blockedItems[t][o]&&Object.keys(this.blockedItems[t][o]).length>0},CoreSyncProvider.prototype.unblockOperation=function(e,n,t,o){t=t||"-",o=o||this.sitesProvider.getCurrentSiteId();var r=this.getUniqueSyncBlockId(e,n);this.blockedItems[o]&&this.blockedItems[o][r]&&delete this.blockedItems[o][r][t]},CoreSyncProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreBlockBaseHandler(){this.name="CoreBlockBase",this.blockName="base"}return CoreBlockBaseHandler.prototype.isEnabled=function(){return!0},CoreBlockBaseHandler.prototype.getDisplayData=function(e,n,t,o){},CoreBlockBaseHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=function(){function CoreContextMenuItemComponent(e){this.ctxtMenu=e,this.closeOnClick=!0,this.hasAction=!1,this.destroyed=!1,this.action=new o.r,this.onClosed=new o.r}return CoreContextMenuItemComponent.prototype.ngOnInit=function(){this.priority=this.priority||1,this.closeOnClick=this.getBooleanValue(this.closeOnClick,!0),this.hasAction=this.action.observers.length>0,this.ariaAction=this.ariaAction||this.content,this.hasAction&&(this.href=""),this.captureLink=!(!this.href||!this.captureLink)&&this.captureLink,this.autoLogin=this.autoLogin||"check",this.destroyed||this.ctxtMenu.addItem(this)},CoreContextMenuItemComponent.prototype.getBooleanValue=function(e,n){return void 0===e?n:e&&"false"!==e},CoreContextMenuItemComponent.prototype.ngOnDestroy=function(){this.destroyed=!0,this.ctxtMenu.removeItem(this)},CoreContextMenuItemComponent.prototype.ngOnChanges=function(e){e.hidden&&!e.hidden.firstChange&&this.ctxtMenu.itemsChanged()},CoreContextMenuItemComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var o=function(){function CoreMarkRequiredComponent(e,n,t,o){this.translate=n,this.textUtils=t,this.utils=o,this.coreMarkRequired=!0,this.element=e.nativeElement,this.requiredLabel=this.translate.instant("core.required")}return CoreMarkRequiredComponent.prototype.ngOnInit=function(){this.coreMarkRequired=this.utils.isTrueOrOne(this.coreMarkRequired)},CoreMarkRequiredComponent.prototype.ngAfterViewInit=function(){if(this.coreMarkRequired){(e=this.element.getAttribute("aria-label")||this.textUtils.cleanTags(this.element.innerHTML,!0))&&this.element.setAttribute("aria-label",e+" "+this.requiredLabel)}else{var e;(e=this.element.getAttribute("aria-label"))&&this.element.setAttribute("aria-label",e.replace(" "+this.requiredLabel,""))}},CoreMarkRequiredComponent}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){function CoreNavBarButtonsComponent(e,n,t){this.domUtils=t,this.BUTTON_HIDDEN_CLASS="core-navbar-button-hidden",this.forceHidden=!1,this.element=e.nativeElement,this.logger=n.getInstance("CoreNavBarButtonsComponent"),this.instanceId=this.domUtils.storeInstanceByElement(this.element,this)}return Object.defineProperty(CoreNavBarButtonsComponent.prototype,"hidden",{set:function(e){this._hidden=e,this.showHideAllElements()},enumerable:!0,configurable:!0}),Object.defineProperty(CoreNavBarButtonsComponent.prototype,"buttons",{set:function(e){e.forEach(function(e){e.setRole("bar-button")})},enumerable:!0,configurable:!0}),CoreNavBarButtonsComponent.prototype.ngOnInit=function(){var e=this;this.searchHeader().then(function(n){if(n){var t="ion-buttons",o=void 0;if(e.element.hasAttribute("start")?t+="[start]":e.element.hasAttribute("end")&&(t+="[end]"),o=n.querySelector(t)){e.mergeContextMenus(o);var r=e.element.hasAttribute("prepend");e.movedChildren=e.domUtils.moveChildren(e.element,o,r),e.showHideAllElements()}else e.logger.warn("The header was found, but it didn't have the right ion-buttons.",t)}}).catch(function(){e.logger.warn("Header not found.")})},CoreNavBarButtonsComponent.prototype.forceHide=function(e){this.forceHidden=e,this.showHideAllElements()},CoreNavBarButtonsComponent.prototype.mergeContextMenus=function(e){var n=e.querySelector("core-context-menu");if(n){var t=this.element.querySelector("core-context-menu");if(t){var o=this.domUtils.getInstanceByElement(n),r=this.domUtils.getInstanceByElement(t);o&&r&&o.coreTab===r.coreTab&&(this.mergedContextMenu=r,this.mergedContextMenu.mergeContextMenus(o),t.parentElement.removeChild(t))}}},CoreNavBarButtonsComponent.prototype.searchHeader=function(e){var n=this;void 0===e&&(e=0);for(var t=this.element;t&&t.parentElement;)if(t=this.domUtils.closest(t.parentElement,".ion-page")){var o=this.searchHeaderInPage(t);if(o&&"none"!=getComputedStyle(o,null).display)return Promise.resolve(o)}return e<5?new Promise(function(t,o){setTimeout(function(){n.searchHeader(e+1).then(t,o)},200)}):Promise.reject(null)},CoreNavBarButtonsComponent.prototype.searchHeaderInPage=function(e){for(var n=0;n<e.children.length;n++){var t=e.children[n];if("ION-HEADER"==t.tagName)return t}},CoreNavBarButtonsComponent.prototype.showHideAllElements=function(){var e=this;this.movedChildren&&this.movedChildren.forEach(function(n){e.showHideElement(n)}),this.mergedContextMenu&&(this.forceHidden||this._hidden?this.mergedContextMenu.removeMergedItems():this.mergedContextMenu.restoreMergedItems())},CoreNavBarButtonsComponent.prototype.showHideElement=function(e){e instanceof Element&&(this.forceHidden||this._hidden?e.classList.add(this.BUTTON_HIDDEN_CLASS):e.classList.remove(this.BUTTON_HIDDEN_CLASS))},CoreNavBarButtonsComponent.prototype.ngOnDestroy=function(){this.domUtils.removeInstanceById(this.instanceId),this.movedChildren&&this.movedChildren.forEach(function(e){e.parentElement&&e.parentElement.removeChild(e)}),this.mergedContextMenu&&this.mergedContextMenu.removeMergedItems()},CoreNavBarButtonsComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(186),t(11),t(127),t(7),t(3);var o=t(42),r=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},i=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},l=function(){function CoreCronDelegate(e,n,t,o,r,i){var l=this;this.appProvider=n,this.configProvider=t,this.utils=o,this.CRON_TABLE="cron",this.tableSchema={name:"CoreCronDelegate",version:1,tables:[{name:this.CRON_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"value",type:"INTEGER"}]}]},this.handlers={},this.queuePromise=Promise.resolve(),this.logger=e.getInstance("CoreCronDelegate"),this.appDB=this.appProvider.getDB(),this.dbReady=n.createTablesFromSchema(this.tableSchema).catch(function(){}),r.onConnect().subscribe(function(){i.run(function(){l.startNetworkHandlers()})})}return e=CoreCronDelegate,CoreCronDelegate.prototype.checkAndExecuteHandler=function(n,t,r){var i=this;if(!this.handlers[n]||!this.handlers[n].execute)return this.logger.debug("Cannot execute handler because is invalid: "+n),Promise.reject(null);var l=this.handlerUsesNetwork(n),s=!t&&this.isHandlerSync(n);return l&&!this.appProvider.isOnline()?(this.logger.debug("Cannot execute handler because device is offline: "+n),this.stopHandler(n),Promise.reject(null)):(s?this.configProvider.get(o.a.SETTINGS_SYNC_ONLY_ON_WIFI,!1).then(function(e){return!e||i.appProvider.isWifi()}):Promise.resolve(!0)).then(function(o){return o?(i.queuePromise=i.queuePromise.catch(function(){}).then(function(){return i.executeHandler(n,t,r).then(function(){return i.logger.debug("Execution of handler '"+n+"' was a success."),i.setHandlerLastExecutionTime(n,Date.now()).then(function(){i.scheduleNextExecution(n)})},function(t){return i.logger.error("Execution of handler '"+n+"' failed.",t),i.scheduleNextExecution(n,e.MIN_INTERVAL),Promise.reject(null)})}),i.queuePromise):(i.logger.debug("Cannot execute handler because device is using limited connection: "+n),i.scheduleNextExecution(n,e.MIN_INTERVAL),Promise.reject(null))})},CoreCronDelegate.prototype.executeHandler=function(n,t,o){var r=this;return new Promise(function(i,l){var s;r.logger.debug("Executing handler: "+n),Promise.resolve(r.handlers[n].execute(o,t)).then(i).catch(l).finally(function(){clearTimeout(s)}),s=setTimeout(function(){r.logger.debug("Resolving execution of handler '"+n+"' because it took too long."),i()},e.MAX_TIME_PROCESS)})},CoreCronDelegate.prototype.forceSyncExecution=function(e){var n=[];for(var t in this.handlers)this.isHandlerManualSync(t)&&n.push(this.forceCronHandlerExecution(t,e));return this.utils.allPromises(n)},CoreCronDelegate.prototype.forceCronHandlerExecution=function(e,n){var t=this.handlers[e];return t.running=!0,clearTimeout(t.timeout),delete t.timeout,this.checkAndExecuteHandler(e,!0,n)},CoreCronDelegate.prototype.getHandlerInterval=function(n){if(!this.handlers[n]||!this.handlers[n].getInterval)return e.DEFAULT_INTERVAL;var t=this.appProvider.isDesktop()?e.DESKTOP_MIN_INTERVAL:e.MIN_INTERVAL,o=this.handlers[n].getInterval();return o?Math.max(t,o):e.DEFAULT_INTERVAL},CoreCronDelegate.prototype.getHandlerLastExecutionId=function(e){return"last_execution_"+e},CoreCronDelegate.prototype.getHandlerLastExecutionTime=function(e){return r(this,void 0,void 0,function(){var n,t,o;return i(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:r.sent(),n=this.getHandlerLastExecutionId(e),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.appDB.getRecord(this.CRON_TABLE,{id:n})];case 3:return t=r.sent(),o=parseInt(t.value,10),[2,isNaN(o)?0:o];case 4:return r.sent(),[2,0];case 5:return[2]}})})},CoreCronDelegate.prototype.handlerUsesNetwork=function(e){return!this.handlers[e]||!this.handlers[e].usesNetwork||this.handlers[e].usesNetwork()},CoreCronDelegate.prototype.hasManualSyncHandlers=function(){for(var e in this.handlers)if(this.isHandlerManualSync(e))return!0;return!1},CoreCronDelegate.prototype.hasSyncHandlers=function(){for(var e in this.handlers)if(this.isHandlerSync(e))return!0;return!1},CoreCronDelegate.prototype.isHandlerManualSync=function(e){return this.handlers[e]&&this.handlers[e].canManualSync?this.handlers[e].canManualSync():this.isHandlerSync(e)},CoreCronDelegate.prototype.isHandlerSync=function(e){return!this.handlers[e]||!this.handlers[e].isSync||this.handlers[e].isSync()},CoreCronDelegate.prototype.register=function(e){e&&e.name&&(void 0===this.handlers[e.name]?(this.logger.debug("Register handler '"+e.name+"' in cron."),e.running=!1,this.handlers[e.name]=e,this.startHandler(e.name)):this.logger.debug("The cron handler '"+e.name+"' is already registered."))},CoreCronDelegate.prototype.scheduleNextExecution=function(e,n){var t=this;if(this.handlers[e]&&!this.handlers[e].timeout){(n?Promise.resolve(n):this.getHandlerLastExecutionTime(e).then(function(n){return n+t.getHandlerInterval(e)-Date.now()})).then(function(n){t.logger.debug("Scheduling next execution of handler '"+e+"' in '"+n+"' ms"),n<0&&(n=0),t.handlers[e].timeout=setTimeout(function(){delete t.handlers[e].timeout,t.checkAndExecuteHandler(e).catch(function(){})},n)})}},CoreCronDelegate.prototype.setHandlerLastExecutionTime=function(e,n){return r(this,void 0,void 0,function(){var t,o;return i(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:return r.sent(),t=this.getHandlerLastExecutionId(e),o={id:t,value:n},[2,this.appDB.insertRecord(this.CRON_TABLE,o)]}})})},CoreCronDelegate.prototype.startHandler=function(e){this.handlers[e]?this.handlers[e].running?this.logger.debug("Handler '"+e+"', is already running."):(this.handlers[e].running=!0,this.scheduleNextExecution(e)):this.logger.debug("Cannot start handler '"+e+"', is invalid.")},CoreCronDelegate.prototype.startNetworkHandlers=function(){for(var e in this.handlers)this.handlerUsesNetwork(e)&&this.startHandler(e)},CoreCronDelegate.prototype.stopHandler=function(e){this.handlers[e]?this.handlers[e].running?(this.handlers[e].running=!1,clearTimeout(this.handlers[e].timeout),delete this.handlers[e].timeout):this.logger.debug("Cannot stop handler '"+e+"', it's not running."):this.logger.debug("Cannot stop handler '"+e+"', is invalid.")},CoreCronDelegate.DEFAULT_INTERVAL=36e5,CoreCronDelegate.MIN_INTERVAL=3e5,CoreCronDelegate.DESKTOP_MIN_INTERVAL=6e4,CoreCronDelegate.MAX_TIME_PROCESS=12e4,CoreCronDelegate;var e}()},,,function(e,n,t){"use strict";function View_CoreContextMenuComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"button",[["aria-haspopup","true"],["class","bar-button"],["clear",""],["icon-only",""],["ion-button",""]],[[8,"hidden",0],[1,"aria-label",0],[1,"aria-expanded",0],[1,"aria-controls",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.showContextMenu(t)&&o}return o},r.b,r.a)),o._15(1,1097728,null,0,i.a,[[8,""],l.a,o.p,o.K],{clear:[0,"clear"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(3,0,null,0,1,"core-icon",[],null,null,null,s.b,s.a)),o._15(4,704512,null,0,a.a,[o.p,l.a],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"])),o._28(null,0)],function(e,n){var t=n.component;e(n,1,0,"");e(n,4,0,t.icon)},function(e,n){var t=n.component;e(n,0,0,t.hideMenu,t.ariaLabel,t.expanded,t.uniqueId)})}t.d(n,"a",function(){return u}),n.b=View_CoreContextMenuComponent_0;var o=t(1),r=t(47),i=t(44),l=t(9),s=t(81),a=t(76),u=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";function View_CoreContextMenuItemComponent_0(e){return o._42(0,[],null,null)}t.d(n,"a",function(){return r}),n.b=View_CoreContextMenuItemComponent_0;var o=t(1),r=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";function View_CoreMarkRequiredComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["class","core-input-required-asterisk"],["md","ios-medical"],["name","medical"],["role","img"]],[[8,"title",0],[2,"hide",null]],null,null,null,null)),o._15(1,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null)],function(e,n){e(n,1,0,"medical","ios-medical")},function(e,n){e(n,0,0,n.component.requiredLabel,o._29(n,1)._hidden)})}function View_CoreMarkRequiredComponent_0(e){return o._42(0,[o._28(null,0),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreMarkRequiredComponent_1)),o._15(3,16384,null,0,l.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,[" "])),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.component.coreMarkRequired)},null)}t.d(n,"a",function(){return s}),n.b=View_CoreMarkRequiredComponent_0;var o=t(1),r=t(49),i=t(9),l=t(8),s=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var o=function(){function CoreInputErrorsComponent(e){this.translate=e}return CoreInputErrorsComponent.prototype.ngOnInit=function(){this.formControl&&(this.initErrorMessages(),this.errorKeys=Object.keys(this.errorMessages))},CoreInputErrorsComponent.prototype.initErrorMessages=function(){this.errorMessages=this.errorMessages||{},this.errorMessages.required=this.errorMessages.required||this.translate.instant("core.required"),this.errorMessages.email=this.errorMessages.email||this.translate.instant("core.login.invalidemail"),this.errorMessages.date=this.errorMessages.date||this.translate.instant("core.login.invaliddate"),this.errorMessages.datetime=this.errorMessages.datetime||this.translate.instant("core.login.invaliddate"),this.errorMessages.datetimelocal=this.errorMessages.datetimelocal||this.translate.instant("core.login.invaliddate"),this.errorMessages.time=this.errorMessages.time||this.translate.instant("core.login.invalidtime"),this.errorMessages.url=this.errorMessages.url||this.translate.instant("core.login.invalidurl"),this.errorMessages.max=this.errorMessages.max||"",this.errorMessages.min=this.errorMessages.min||""},CoreInputErrorsComponent.prototype.ngOnChanges=function(e){e.errorText&&(this.errorText=e.errorText.currentValue)},CoreInputErrorsComponent}()},,function(e,n,t){"use strict";function View_CoreNavBarButtonsComponent_0(e){return o._42(0,[o._28(null,0)],null,null)}t.d(n,"a",function(){return r}),n.b=View_CoreNavBarButtonsComponent_0;var o=t(1),r=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(292),t(128);var o=t(54),r=function(){function AddonModDataProvider(n,t,o,r,i,l,s,a){this.sitesProvider=t,this.utils=o,this.filepoolProvider=r,this.dataOffline=i,this.appProvider=l,this.fieldsDelegate=s,this.logHelper=a,this.ROOT_CACHE_KEY=e.COMPONENT+":",this.logger=n.getInstance("AddonModDataProvider")}return e=AddonModDataProvider,AddonModDataProvider.prototype.addEntry=function(e,n,t,o,r,i,l,s){var a=this;void 0===r&&(r=0),void 0===s&&(s=!1),l=l||this.sitesProvider.getCurrentSiteId();var u=function(){return a.dataOffline.saveEntry(e,n,"add",t,r,o,void 0,l).then(function(e){return{newentryid:e,sent:!1}})};if(!this.appProvider.isOnline()||s){var d=this.checkFields(i,o);return d?Promise.resolve({fieldnotifications:d}):u()}return this.addEntryOnline(e,o,r,l).then(function(e){return e.sent=!0,e}).catch(function(e){return a.utils.isWebServiceError(e)?Promise.reject(e):u()})},AddonModDataProvider.prototype.addEntryOnline=function(e,n,t,o){return this.sitesProvider.getSite(o).then(function(o){var r={databaseid:e,data:n};return void 0!==t&&(r.groupid=t),o.write("mod_data_add_entry",r)})},AddonModDataProvider.prototype.approveEntry=function(e,n,t,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.dataOffline.saveEntry(e,n,t?"approve":"disapprove",o,void 0,void 0,void 0,r).then(function(){return{sent:!1}})},s=t?"disapprove":"approve";return this.dataOffline.getEntry(e,n,s,r).then(function(){return i.dataOffline.deleteEntry(e,n,s,r)}).catch(function(){return i.appProvider.isOnline()?i.approveEntryOnline(n,t,r).then(function(){return{sent:!0}}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):l()}):l()})},AddonModDataProvider.prototype.approveEntryOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_data_approve_entry",{entryid:e,approve:n?1:0})})},AddonModDataProvider.prototype.checkFields=function(e,n){var t=this,o=[],r={};return n.forEach(function(e){void 0===r[e.fieldid]&&(r[e.fieldid]=[]),r[e.fieldid].push(e)}),Object.keys(e).forEach(function(n){var i=e[n],l=t.fieldsDelegate.getFieldsNotifications(i,r[i.id]);l&&o.push({fieldname:i.name,notification:l})}),!!o.length&&o},AddonModDataProvider.prototype.deleteEntry=function(e,n,t,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=function(){return r.dataOffline.saveEntry(e,n,"delete",t,void 0,void 0,void 0,o).then(function(){return{sent:!1}})},l=!1;return this.dataOffline.getEntryActions(e,n,o).then(function(t){if(t&&t.length){var i=t.map(function(t){return"add"==t.action&&(l=!0),r.dataOffline.deleteEntry(e,n,t.action,o)});return Promise.all(i)}}).then(function(){if(!l)return r.appProvider.isOnline()?r.deleteEntryOnline(n,o).then(function(){return{sent:!0}}).catch(function(e){return r.utils.isWebServiceError(e)?Promise.reject(e):i()}):i()})},AddonModDataProvider.prototype.deleteEntryOnline=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_data_delete_entry",{entryid:e})})},AddonModDataProvider.prototype.editEntry=function(e,n,t,o,r,i,l){var s=this;void 0===l&&(l=!1),i=i||this.sitesProvider.getCurrentSiteId();var a,u=function(){return s.dataOffline.saveEntry(e,n,"edit",t,void 0,o,void 0,i).then(function(){return{updated:!0,sent:!1}})},d=!1;if(!this.appProvider.isOnline()||l){var c=this.checkFields(r,o);if(c)return Promise.resolve({fieldnotifications:c})}return this.dataOffline.getEntryActions(e,n,i).then(function(t){if(t&&t.length){var o=[];return t.forEach(function(t){"add"==t.action?(d=!0,a=t.groupid,o.push(s.dataOffline.deleteEntry(e,n,t.action,i))):"edit"==t.action&&o.push(s.dataOffline.deleteEntry(e,n,t.action,i))}),Promise.all(o)}}).then(function(){return d?s.addEntry(e,n,t,o,a,r,i,l).then(function(e){return e.updated=!0,e.sent=!0,e}):!s.appProvider.isOnline()||l?u():s.editEntryOnline(n,o,i).then(function(e){return e.sent=!0,e}).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):u()})})},AddonModDataProvider.prototype.editEntryOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_data_update_entry",{entryid:e,data:n})})},AddonModDataProvider.prototype.fetchAllEntries=function(n,t,o,r,i,l,s,a){return void 0===t&&(t=0),void 0===o&&(o="0"),void 0===r&&(r="DESC"),void 0===i&&(i=e.PER_PAGE),void 0===l&&(l=!1),void 0===s&&(s=!1),a=a||this.sitesProvider.getCurrentSiteId(),this.fetchEntriesRecursive(n,t,o,r,i,l,s,[],0,a)},AddonModDataProvider.prototype.fetchEntriesRecursive=function(e,n,t,o,r,i,l,s,a,u){var d=this;return this.getEntries(e,n,t,o,a,r,i,l,u).then(function(c){s=s.concat(c.entries);return r>0&&(a+1)*r<c.totalcount?d.fetchEntriesRecursive(e,n,t,o,r,i,l,s,a+1,u):s})},AddonModDataProvider.prototype.getDatabaseDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"data:"+e},AddonModDataProvider.prototype.getDatabaseDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},AddonModDataProvider.prototype.getDatabaseByKey=function(e,n,t,r,i){var l=this;return void 0===i&&(i=!1),this.sitesProvider.getSite(r).then(function(r){var s={courseids:[e]},a={cacheKey:l.getDatabaseDataCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return i&&(a.omitExpires=!0),r.read("mod_data_get_databases_by_courses",s,a).then(function(e){if(e&&e.databases){var o=e.databases.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModDataProvider.prototype.getDatabase=function(e,n,t,o){return void 0===o&&(o=!1),this.getDatabaseByKey(e,"coursemodule",n,t,o)},AddonModDataProvider.prototype.getDatabaseById=function(e,n,t,o){return void 0===o&&(o=!1),this.getDatabaseByKey(e,"id",n,t,o)},AddonModDataProvider.prototype.getDatabaseAccessInformationDataPrefixCacheKey=function(e){return this.getDatabaseDataPrefixCacheKey(e)+":access:"},AddonModDataProvider.prototype.getDatabaseAccessInformationDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getDatabaseAccessInformationDataPrefixCacheKey(e)+n},AddonModDataProvider.prototype.getDatabaseAccessInformation=function(e,n,t,o,r){var i=this;return void 0===t&&(t=!1),void 0===o&&(o=!1),this.sitesProvider.getSite(r).then(function(r){var l={databaseid:e},s={cacheKey:i.getDatabaseAccessInformationDataCacheKey(e,n)};return void 0!==n&&(l.groupid=n),t?s.omitExpires=!0:o&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_data_get_data_access_information",l,s)})},AddonModDataProvider.prototype.getEntries=function(n,t,r,i,l,s,a,u,d){var c=this;return void 0===t&&(t=0),void 0===r&&(r="0"),void 0===i&&(i="DESC"),void 0===l&&(l=0),void 0===s&&(s=e.PER_PAGE),void 0===a&&(a=!1),void 0===u&&(u=!1),this.sitesProvider.getSite(d).then(function(e){var d={databaseid:n,returncontents:1,page:l,perpage:s,groupid:t,sort:r,order:i},p={cacheKey:c.getEntriesCacheKey(n,t),updateFrequency:o.a.FREQUENCY_SOMETIMES};return a?p.omitExpires=!0:u&&(p.getFromCache=!1,p.emergencyCache=!1),e.read("mod_data_get_entries",d,p).then(function(e){return e.entries.forEach(function(e){e.contents=c.utils.arrayToObject(e.contents,"fieldid")}),e})})},AddonModDataProvider.prototype.getEntriesCacheKey=function(e,n){return void 0===n&&(n=0),this.getEntriesPrefixCacheKey(e)+n},AddonModDataProvider.prototype.getEntriesPrefixCacheKey=function(e){return this.getDatabaseDataPrefixCacheKey(e)+":entries:"},AddonModDataProvider.prototype.getEntry=function(e,n,t,r){var i=this;return void 0===t&&(t=!1),this.sitesProvider.getSite(r).then(function(r){var l={entryid:n,returncontents:1},s={cacheKey:i.getEntryCacheKey(e,n),updateFrequency:o.a.FREQUENCY_SOMETIMES};return t&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_data_get_entry",l,s).then(function(e){return e.entry.contents=i.utils.arrayToObject(e.entry.contents,"fieldid"),e})})},AddonModDataProvider.prototype.getEntryCacheKey=function(e,n){return this.getDatabaseDataPrefixCacheKey(e)+":entry:"+n},AddonModDataProvider.prototype.getFields=function(e,n,t,r){var i=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(r).then(function(r){var l={databaseid:e},s={cacheKey:i.getFieldsCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n?s.omitExpires=!0:t&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_data_get_fields",l,s).then(function(e){return e&&e.fields?e.fields:Promise.reject(null)})})},AddonModDataProvider.prototype.getFieldsCacheKey=function(e){return this.getDatabaseDataPrefixCacheKey(e)+":fields"},AddonModDataProvider.prototype.invalidateContent=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.getDatabase(n,e).then(function(e){var r=[];return r.push(o.invalidateDatabaseData(n,t)),r.push(o.invalidateDatabaseWSData(e.id,t)),r.push(o.invalidateFieldsData(e.id,t)),Promise.all(r)})),r.push(this.invalidateFiles(e,t)),this.utils.allPromises(r)},AddonModDataProvider.prototype.invalidateDatabaseAccessInformationData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getDatabaseAccessInformationDataPrefixCacheKey(e))})},AddonModDataProvider.prototype.invalidateEntriesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getEntriesPrefixCacheKey(e))})},AddonModDataProvider.prototype.invalidateFieldsData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getFieldsCacheKey(e))})},AddonModDataProvider.prototype.invalidateFiles=function(n,t){return this.filepoolProvider.invalidateFilesByComponent(t,e.COMPONENT,n)},AddonModDataProvider.prototype.invalidateDatabaseData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getDatabaseDataCacheKey(e))})},AddonModDataProvider.prototype.invalidateDatabaseWSData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getDatabaseDataPrefixCacheKey(e))})},AddonModDataProvider.prototype.invalidateEntryData=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getEntryCacheKey(e,n))})},AddonModDataProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_data_get_data_access_information")})},AddonModDataProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_data_view_database",{databaseid:n},e.COMPONENT,n,t,"data",{},o)},AddonModDataProvider.prototype.searchEntries=function(n,t,o,r,i,l,s,a,u){var d=this;return void 0===t&&(t=0),void 0===s&&(s=0),void 0===a&&(a=e.PER_PAGE),this.sitesProvider.getSite(u).then(function(e){var u={databaseid:n,groupid:t,returncontents:1,page:s,perpage:a};return void 0!==i&&(u.sort=i),void 0!==l&&(u.order=l),void 0!==o&&(u.search=o),void 0!==r&&(u.advsearch=r),e.read("mod_data_search_entries",u,{getFromCache:!1,saveToCache:!0,emergencyCache:!0}).then(function(e){return e.entries.forEach(function(e){e.contents=d.utils.arrayToObject(e.contents,"fieldid")}),e})})},AddonModDataProvider.COMPONENT="mmaModData",AddonModDataProvider.PER_PAGE=25,AddonModDataProvider.ENTRY_CHANGED="addon_mod_data_entry_changed",AddonModDataProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(10),r=function(){function CoreDelegate(e,n,t,r){var i=this;this.loggerProvider=n,this.sitesProvider=t,this.eventsProvider=r,this.handlers={},this.enabledHandlers={},this.handlerNameProperty="name",this.updatePromises={},this.handlersInitialized=!1,this.logger=this.loggerProvider.getInstance(e),this.handlersInitPromise=new Promise(function(e){i.handlersInitResolve=e}),r&&(r.on(o.a.LOGIN,this.updateHandlers.bind(this)),r.on(o.a.SITE_UPDATED,this.updateHandlers.bind(this)),r.on(o.a.SITE_PLUGINS_LOADED,this.updateHandlers.bind(this)))}return CoreDelegate.prototype.executeFunctionOnEnabled=function(e,n,t){return this.execute(this.enabledHandlers[e],n,t)},CoreDelegate.prototype.executeFunction=function(e,n,t){return this.execute(this.handlers[e],n,t)},CoreDelegate.prototype.execute=function(e,n,t){return e&&e[n]?e[n].apply(e,t):this.defaultHandler&&this.defaultHandler[n]?this.defaultHandler[n].apply(this.defaultHandler,t):void 0},CoreDelegate.prototype.getHandler=function(e,n){return void 0===n&&(n=!1),n?this.enabledHandlers[e]:this.handlers[e]},CoreDelegate.prototype.getHandlerName=function(e){var n=this.getHandler(e,!0);return n?n.name:""},CoreDelegate.prototype.hasFunction=function(e,n,t){void 0===t&&(t=!0);var o=t?this.enabledHandlers[e]:this.handlers[e];return o&&o[n]},CoreDelegate.prototype.hasHandler=function(e,n){return void 0===n&&(n=!1),n?void 0!==this.enabledHandlers[e]:void 0!==this.handlers[e]},CoreDelegate.prototype.isLastUpdateCall=function(e){return!this.lastUpdateHandlersStart||e==this.lastUpdateHandlersStart},CoreDelegate.prototype.registerHandler=function(e){var n=e[this.handlerNameProperty]||e.name;return void 0!==this.handlers[n]?(this.logger.log("Handler '"+e[this.handlerNameProperty]+"' already registered"),!1):(this.logger.log("Registered handler '"+e[this.handlerNameProperty]+"'"),this.handlers[n]=e,!0)},CoreDelegate.prototype.updateHandler=function(e,n){var t,o=this,r=this.sitesProvider.getCurrentSiteId(),i=this.sitesProvider.getCurrentSite();return this.updatePromises[r]&&this.updatePromises[r][e.name]?this.updatePromises[r][e.name]:(this.updatePromises[r]||(this.updatePromises[r]={}),t=this.sitesProvider.isLoggedIn()?this.isFeatureDisabled(e,i)?Promise.resolve(!1):Promise.resolve(e.isEnabled()):Promise.reject(null),this.updatePromises[r][e.name]=t.catch(function(){return!1}).then(function(n){if(o.sitesProvider.getCurrentSiteId()===r){var t=e[o.handlerNameProperty]||e.name;n?o.enabledHandlers[t]=e:delete o.enabledHandlers[t]}}).finally(function(){delete o.updatePromises[r][e.name]}),this.updatePromises[r][e.name])},CoreDelegate.prototype.isFeatureDisabled=function(e,n){return void 0!==this.featurePrefix&&n.isFeatureDisabled(this.featurePrefix+e.name)},CoreDelegate.prototype.updateHandlers=function(){var e=this,n=[],t=Date.now();this.logger.debug("Updating handlers for current site."),this.lastUpdateHandlersStart=t;for(var o in this.handlers)n.push(this.updateHandler(this.handlers[o],t));return Promise.all(n).then(function(){return!0},function(){return!0}).then(function(){e.isLastUpdateCall(t)&&(e.handlersInitialized=!0,e.handlersInitResolve(),e.updateData())})},CoreDelegate.prototype.updateData=function(){},CoreDelegate}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(56),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),i=function(e){function CoreContentLinksModuleIndexHandler(n,t,o,r){var i=e.call(this)||this;i.courseHelper=n,i.addon=t,i.modName=o,i.instanceIdParam=r,i.useModNameToGetModule=!1;var l=r?"/mod/"+o+"/view.php.*([&?]("+r+"|id)=\\d+)":"/mod/"+o+"/view.php.*([&?]id=\\d+)";return i.pattern=new RegExp(l),i.featureName="CoreCourseModuleDelegate_"+t,i}return r(CoreContentLinksModuleIndexHandler,e),CoreContentLinksModuleIndexHandler.prototype.getPageParams=function(e,n,t){},CoreContentLinksModuleIndexHandler.prototype.getActions=function(e,n,t,o){var r=this,i=this.getPageParams(n,t,o=o||t.courseid||t.cid);if(this.instanceIdParam&&void 0!==t[this.instanceIdParam]){var l=parseInt(t[this.instanceIdParam],10);return[{action:function(e,n){r.courseHelper.navigateToModuleByInstance(l,r.modName,e,o,void 0,r.useModNameToGetModule,i,n)}}]}return[{action:function(e,n){r.courseHelper.navigateToModule(parseInt(t.id,10),e,o,void 0,r.useModNameToGetModule?r.modName:void 0,i,n)}}]},CoreContentLinksModuleIndexHandler}(o.a)},,,function(e,n,t){"use strict";t.d(n,"a",function(){return a});var o=t(0),r=t(99),i=t(10),l=t(53),s=t(14),a=function(e){function CoreCourseOptionsDelegate(n,t,o,r,l){var s=e.call(this,"CoreCourseOptionsDelegate",n,t,r)||this;return s.sitesProvider=t,s.utils=o,s.eventsProvider=r,s.coursesProvider=l,s.loaded={},s.lastUpdateHandlersForCoursesStart={},s.coursesHandlers={},s.featurePrefix="CoreCourseOptionsDelegate_",r.on(i.a.LOGOUT,function(){s.clearCoursesHandlers()}),s}return Object(o.__extends)(CoreCourseOptionsDelegate,e),CoreCourseOptionsDelegate.prototype.areHandlersLoaded=function(e){return!!this.loaded[e]},CoreCourseOptionsDelegate.prototype.clearCoursesHandlers=function(e){e?(this.loaded[e]=!1,delete this.coursesHandlers[e]):(this.loaded={},this.coursesHandlers={})},CoreCourseOptionsDelegate.prototype.clearAndInvalidateCoursesOptions=function(e){var n=[];if(this.eventsProvider.trigger(l.a.EVENT_MY_COURSES_REFRESHED),e)n.push(this.coursesProvider.invalidateCoursesAdminAndNavOptions([e])),n.push(this.invalidateCourseHandlers(e));else{n.push(this.coursesProvider.invalidateUserNavigationOptions()),n.push(this.coursesProvider.invalidateUserAdministrationOptions());for(var t in this.coursesHandlers)n.push(this.invalidateCourseHandlers(parseInt(t,10)))}return this.clearCoursesHandlers(e),Promise.all(n)},CoreCourseOptionsDelegate.prototype.getHandlersForAccess=function(e,n,t,o,r){var i=this;return this.loaded[e]||(n=!1),!n&&this.coursesHandlers[e]&&this.coursesHandlers[e].access.type==t.type||(this.coursesHandlers[e]||(this.coursesHandlers[e]={}),this.coursesHandlers[e].access=t,this.coursesHandlers[e].navOptions=o,this.coursesHandlers[e].admOptions=r,this.coursesHandlers[e].deferred=this.utils.promiseDefer(),this.updateHandlersForCourse(e,t,o,r)),this.coursesHandlers[e].deferred.promise.then(function(){return i.coursesHandlers[e].enabledHandlers})},CoreCourseOptionsDelegate.prototype.getHandlersToDisplay=function(e,n,t,o,r,i){return this.getHandlersToDisplayInternal(!1,e,n,t,o,r,i)},CoreCourseOptionsDelegate.prototype.getMenuHandlersToDisplay=function(e,n,t,o,r,i){return this.getHandlersToDisplayInternal(!0,e,n,t,o,r,i)},CoreCourseOptionsDelegate.prototype.getHandlersToDisplayInternal=function(e,n,t,o,r,i,l){var a=this;t.id=parseInt(t.id,10);var u={type:r?s.a.ACCESS_GUEST:s.a.ACCESS_DEFAULT},d=[];return i&&(t.navOptions=i),l&&(t.admOptions=l),this.loadCourseOptions(t,o).then(function(){return a.getHandlersForAccess(t.id,o,u,t.navOptions,t.admOptions)}).then(function(){var o=[];return(e?a.coursesHandlers[t.id].enabledMenuHandlers:a.coursesHandlers[t.id].enabledHandlers).forEach(function(r){var i=e?r.getMenuDisplayData:r.getDisplayData;o.push(Promise.resolve(i.call(r,n,t)).then(function(e){d.push({data:e,priority:r.priority,prefetch:r.prefetch&&r.prefetch.bind(r),name:r.name})}).catch(function(e){a.logger.error("Error getting data for handler",r.name,e)}))}),Promise.all(o)}).then(function(){return d.sort(function(e,n){return n.priority-e.priority}),d})},CoreCourseOptionsDelegate.prototype.hasHandlersForCourse=function(e,n){var t=this;return this.loadCourseOptions(e,n).then(function(){return t.hasHandlersForDefault(e.id,n,e.navOptions,e.admOptions)})},CoreCourseOptionsDelegate.prototype.hasHandlersForDefault=function(e,n,t,o){return this.getHandlersForAccess(e,n,{type:s.a.ACCESS_DEFAULT},t,o).then(function(e){return!(!e||!e.length)})},CoreCourseOptionsDelegate.prototype.hasHandlersForGuest=function(e,n,t,o){return this.getHandlersForAccess(e,n,{type:s.a.ACCESS_GUEST},t,o).then(function(e){return!(!e||!e.length)})},CoreCourseOptionsDelegate.prototype.invalidateCourseHandlers=function(e){var n=[],t=this.coursesHandlers[e];return t?(t.enabledHandlers.forEach(function(o){o&&o.invalidateEnabledForCourse&&n.push(Promise.resolve(o.invalidateEnabledForCourse(e,t.navOptions,t.admOptions)))}),this.utils.allPromises(n)):Promise.resolve()},CoreCourseOptionsDelegate.prototype.isLastUpdateCourseCall=function(e,n){return!this.lastUpdateHandlersForCoursesStart[e]||n==this.lastUpdateHandlersForCoursesStart[e]},CoreCourseOptionsDelegate.prototype.loadCourseOptions=function(e,n){return this.coursesProvider.canGetAdminAndNavOptions()&&(void 0===e.navOptions||void 0===e.admOptions||n)?this.coursesProvider.getCoursesAdminAndNavOptions([e.id]).then(function(n){e.navOptions=n.navOptions[e.id],e.admOptions=n.admOptions[e.id]}):Promise.resolve()},CoreCourseOptionsDelegate.prototype.updateData=function(){for(var e in this.coursesHandlers){var n=this.coursesHandlers[e];this.updateHandlersForCourse(parseInt(e,10),n.access,n.navOptions,n.admOptions)}},CoreCourseOptionsDelegate.prototype.updateHandlersForCourse=function(e,n,t,o){var r=this,i=[],l=[],s=[],a=this.sitesProvider.getCurrentSiteId(),u=Date.now();this.lastUpdateHandlersForCoursesStart[e]=u;var d=function(r){var a=c.enabledHandlers[r];i.push(Promise.resolve(a.isEnabledForCourse(e,n,t,o)).then(function(e){if(!e)return Promise.reject(null);a.isMenuHandler?s.push(a):l.push(a)}).catch(function(){}))},c=this;for(var p in this.enabledHandlers)d(p);return Promise.all(i).then(function(){return!0}).catch(function(){return!0}).finally(function(){r.isLastUpdateCourseCall(e,u)&&r.sitesProvider.getCurrentSiteId()===a&&(r.coursesHandlers[e].enabledHandlers=l,r.coursesHandlers[e].enabledMenuHandlers=s,r.loaded[e]=!0,r.coursesHandlers[e].deferred.resolve())})},CoreCourseOptionsDelegate}(r.a)},function(e,n,t){"use strict";function View_CoreInputErrorsComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.errorMessages[n.parent.parent.context.$implicit])})}function View_CoreInputErrorsComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),o._40(1,null,["\n                    ","\n                "])),o._33(2,{$a:0}),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.login.invalidvaluemax",e(n,2,0,t.formControl.errors.max.max))))})}function View_CoreInputErrorsComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),o._40(1,null,["\n                    ","\n                "])),o._33(2,{$a:0}),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.login.invalidvaluemin",e(n,2,0,t.formControl.errors.min.min))))})}function View_CoreInputErrorsComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"div",[["class","core-input-error"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInputErrorsComponent_5)),o._15(3,16384,null,0,l.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInputErrorsComponent_6)),o._15(6,16384,null,0,l.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInputErrorsComponent_7)),o._15(9,16384,null,0,l.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,3,0,t.errorMessages[n.parent.context.$implicit]);e(n,6,0,!t.errorMessages[n.parent.context.$implicit]&&"max"==n.parent.context.$implicit&&t.formControl.errors.max);e(n,9,0,!t.errorMessages[n.parent.context.$implicit]&&"min"==n.parent.context.$implicit&&t.formControl.errors.min)},null)}function View_CoreInputErrorsComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInputErrorsComponent_4)),o._15(3,16384,null,0,l.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,n.component.formControl.hasError(n.context.$implicit))},null)}function View_CoreInputErrorsComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInputErrorsComponent_3)),o._15(3,802816,null,0,l.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.errorKeys)},null)}function View_CoreInputErrorsComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"div",[["aria-live","assertive"],["class","core-input-error"]],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.errorText)})}function View_CoreInputErrorsComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"div",[["class","core-input-error-container"],["role","alert"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInputErrorsComponent_2)),o._15(3,16384,null,0,l.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInputErrorsComponent_8)),o._15(6,16384,null,0,l.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.formControl&&t.formControl.dirty&&!t.formControl.valid);e(n,6,0,t.errorText)},null)}function View_CoreInputErrorsComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreInputErrorsComponent_1)),o._15(1,16384,null,0,l.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.formControl&&t.formControl.dirty&&!t.formControl.valid||t.errorText)},null)}t.d(n,"a",function(){return s}),n.b=View_CoreInputErrorsComponent_0;var o=t(1),r=t(26),i=t(19),l=t(8),s=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(99),i=t(147),l=(t.n(i),function(e){function CoreUserDelegate(t,o,r,i,l){var s=e.call(this,"CoreUserDelegate",t,o,i)||this;return s.loggerProvider=t,s.sitesProvider=o,s.coursesProvider=r,s.eventsProvider=i,s.utils=l,s.featurePrefix="CoreUserDelegate_",s.userHandlers={},i.on(n.UPDATE_HANDLER_EVENT,function(e){if(e&&e.handler&&s.userHandlers[e.userId]){var n=s.userHandlers[e.userId],t=n.handlers.find(function(n){return n.name==e.handler});if(t){for(var o in e.data)t.data[o]=e.data[o];n.observable.next(n.handlers)}}}),s}return Object(o.__extends)(CoreUserDelegate,e),n=CoreUserDelegate,CoreUserDelegate.prototype.areHandlersLoaded=function(e){return this.userHandlers[e]&&this.userHandlers[e].loaded},CoreUserDelegate.prototype.clearUserHandlers=function(e){var n=this.userHandlers[e];n&&(n.handlers=[],n.observable.next([]),n.loaded=!1)},CoreUserDelegate.prototype.getProfileHandlersFor=function(e,t){var o,r,l,s=this;o=this.coursesProvider.canGetAdminAndNavOptions()?this.coursesProvider.getUserCourses(!0).then(function(e){var n=e.map(function(e){return e.id});return s.coursesProvider.getCoursesAdminAndNavOptions(n).then(function(e){var n=t||s.sitesProvider.getCurrentSiteHomeId();r=e.navOptions[n],l=e.admOptions[n]})}):Promise.resolve(),this.userHandlers[e.id]||(this.userHandlers[e.id]={loaded:!1,handlers:[],observable:new i.BehaviorSubject([])});var a=this.userHandlers[e.id];return a.handlers=[],o.then(function(){var o=[],i=function(i){var u=s.handlers[i],d=u.isEnabledForUser(e,t,r,l);o.push(Promise.resolve(d).then(function(o){o&&a.handlers.push({name:i,data:u.getDisplayData(e,t),priority:u.priority,type:u.type||n.TYPE_NEW_PAGE})}).catch(function(){}))};for(var u in s.enabledHandlers)i(u);return s.utils.allPromises(o).then(function(){a.handlers.sort(function(e,n){return n.priority-e.priority}),a.loaded=!0,a.observable.next(a.handlers)})}).catch(function(){a.loaded=!0,a.observable.next(a.handlers)}),a.observable},CoreUserDelegate.TYPE_COMMUNICATION="communication",CoreUserDelegate.TYPE_NEW_PAGE="newpage",CoreUserDelegate.TYPE_ACTION="action",CoreUserDelegate.UPDATE_HANDLER_EVENT="CoreUserDelegate_update_handler_event",CoreUserDelegate;var n}(r.a))},,function(e,n,t){"use strict";t(0),t(1),t(1570),t(1617),t(377),t(1581),t(228),t(1571),t(443),t(7),t(25);t.d(n,"a",function(){return o});var o=function(){return function CorePipesModule(){}}()},,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function CoreCourseModuleDescriptionComponent(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(56),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),i=function(e){function CoreContentLinksModuleListHandler(n,t,o,r){var i=e.call(this)||this;return i.linkHelper=n,i.translate=t,i.addon=o,i.modName=r,i.pattern=new RegExp("/mod/"+r+"/index.php.*([&?]id=\\d+)"),i.featureName="CoreCourseModuleDelegate_"+o,i}return r(CoreContentLinksModuleListHandler,e),CoreContentLinksModuleListHandler.prototype.getActions=function(e,n,t){var o=this;return[{action:function(e,n){var r={courseId:t.id,modName:o.modName,title:o.title||o.translate.instant("addon.mod_"+o.modName+".modulenameplural")};o.linkHelper.goInSite(n,"CoreCourseListModTypePage",r,e)}}]},CoreContentLinksModuleListHandler}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function CoreEmptyBoxComponent(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(4),t(11),t(18),t(172),t(3);var o=t(42),r=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},i=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},l=function(){function CoreFileHelperProvider(e,n,t,o,r,i,l){this.fileProvider=e,this.filepoolProvider=n,this.sitesProvider=t,this.appProvider=o,this.translate=r,this.utils=i,this.wsProvider=l}return CoreFileHelperProvider.prototype.downloadAndOpenFile=function(e,n,t,r,i,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a=this.getFileUrl(e),u=this.getFileTimemodified(e);return this.downloadFileIfNeeded(e,a,n,t,u,r,i,l).then(function(d){if(d)return 0===d.indexOf("http")?(d+="#moodlemobile-embedded",s.utils.openOnlineFile(d).catch(function(d){if(!s.fileProvider.isAvailable())return Promise.reject(d);return(r?Promise.resolve(r):s.filepoolProvider.getFileStateByUrl(l,a,u)).then(function(r){if(r==o.a.DOWNLOADING)return Promise.reject(s.translate.instant("core.erroropenfiledownloading"));return(r===o.a.NOT_DOWNLOADED?s.downloadFile(a,n,t,u,i,e,l):s.filepoolProvider.getInternalUrlByUrl(l,a)).then(function(e){return s.utils.openFile(e)})})})):s.utils.openFile(d)})},CoreFileHelperProvider.prototype.downloadFileIfNeeded=function(e,n,t,r,i,l,s,a){var u=this;return a=a||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(a).then(function(e){return e.checkAndFixPluginfileURL(n)}).then(function(d){if(u.fileProvider.isAvailable()){return(l?Promise.resolve(l):u.filepoolProvider.getFileStateByUrl(a,n,i)).then(function(l){var c=u.appProvider.isWifi(),p=u.appProvider.isOnline();return l==o.a.DOWNLOADED?u.filepoolProvider.getUrlByUrl(a,n,t,r,i,!1,!1,e):p||u.isStateDownloaded(l)?(s&&s({calculating:!0}),u.filepoolProvider.shouldDownloadBeforeOpen(d,e.filesize).then(function(){if(l!=o.a.DOWNLOADING)return u.downloadFile(n,t,r,i,s,e,a)},function(){return c&&u.downloadFile(n,t,r,i,s,e,a),!u.isStateDownloaded(l)||p?d:u.filepoolProvider.getUrlByUrl(a,n,t,r,i,!1,!1,e)})):Promise.reject(u.translate.instant("core.networkerrormsg"))})}return d})},CoreFileHelperProvider.prototype.downloadFile=function(e,n,t,o,r,i,l){var s=this;return l=l||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(l).then(function(a){return a.canDownloadFiles()?s.filepoolProvider.downloadUrl(l,e,!1,n,t,o,r,void 0,i).catch(function(n){return s.filepoolProvider.getFileStateByUrl(l,e,o).then(function(t){return s.isStateDownloaded(t)?s.filepoolProvider.getInternalUrlByUrl(l,e):Promise.reject(n)})}):Promise.reject(s.translate.instant("core.cannotdownloadfiles"))})},CoreFileHelperProvider.prototype.getFileUrl=function(e){return e.fileurl||e.url},CoreFileHelperProvider.prototype.getFileTimemodified=function(e){return e.timemodified||0},CoreFileHelperProvider.prototype.isStateDownloaded=function(e){return e===o.a.DOWNLOADED||e===o.a.OUTDATED},CoreFileHelperProvider.prototype.shouldOpenInBrowser=function(e){if(!e||!e.isexternalfile||!e.mimetype)return!1;var n=e.mimetype;return-1!=n.indexOf("application/vnd.google-apps.")||"onedrive"==e.repositorytype&&(-1!=n.indexOf("application/vnd.openxmlformats-officedocument")||"text/plain"==n||"document/unknown"==n)},CoreFileHelperProvider.prototype.getTotalFilesSize=function(e){return r(this,void 0,void 0,function(){var n,t,o,r,l;return i(this,function(i){switch(i.label){case 0:n=0,t=0,o=e,i.label=1;case 1:return t<o.length?(r=o[t],l=n,[4,this.getFileSize(r)]):[3,4];case 2:n=l+i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2,n]}})})},CoreFileHelperProvider.prototype.getFileSize=function(e){return r(this,void 0,void 0,function(){var n,t,o,r,l;return i(this,function(i){switch(i.label){case 0:if(e.filesize)return[2,e.filesize];if(!e.filename||e.name)return[3,7];i.label=1;case 1:return i.trys.push([1,5,,7]),n=this.sitesProvider.getCurrentSiteId(),[4,this.filepoolProvider.getFilePathByUrl(n,e.fileurl)];case 2:return t=i.sent(),[4,this.fileProvider.getFile(t)];case 3:return o=i.sent(),[4,this.fileProvider.getFileObjectFromFileEntry(o)];case 4:return l=i.sent(),[2,l.size];case 5:return i.sent(),[4,this.wsProvider.getRemoteFileSize(e.fileurl)];case 6:if(-1===(r=i.sent()))throw new Error("Couldn't determine file size: "+e.fileurl);return[2,r];case 7:return e.name?[4,this.fileProvider.getFileObjectFromFileEntry(e)]:[3,9];case 8:return l=i.sent(),[2,l.size];case 9:throw new Error("Couldn't determine file size: "+e.fileurl)}})})},CoreFileHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreConfigConstants(){}return CoreConfigConstants.app_id="com.moodle.moodlemobile",CoreConfigConstants.appname="Netsen Moodle Mobile",CoreConfigConstants.desktopappname="Netsen Moodle Desktop",CoreConfigConstants.versioncode=3820,CoreConfigConstants.versionname="3.8.2",CoreConfigConstants.cache_update_frequency_usually=42e4,CoreConfigConstants.cache_update_frequency_often=12e5,CoreConfigConstants.cache_update_frequency_sometimes=36e5,CoreConfigConstants.cache_update_frequency_rarely=432e5,CoreConfigConstants.default_lang="en",CoreConfigConstants.languages={ar:"عربي",bg:"Български",ca:"Català",cs:"Čeština",da:"Dansk",de:"Deutsch","de-du":"Deutsch - Du",el:"Ελληνικά",en:"English","en-us":"English - United States",es:"Español","es-mx":"Español - México",eu:"Euskara",fa:"فارسی",fi:"Suomi",fr:"Français",he:"עברית",hi:"हिंदी",hr:"Hrvatski",hu:"magyar",id:"Indonesian",it:"Italiano",ja:"日本語",km:"ខ្មែរ",kn:"ಕನ್ನಡ",ko:"한국어",lt:"Lietuvių",lv:"Latviešu",mr:"मराठी",nl:"Nederlands",no:"Norsk - bokmål",pl:"Polski",pt:"Português - Portugal","pt-br":"Português - Brasil",ro:"Română",ru:"Русский",sl:"Slovenščina","sr-cr":"Српски","sr-lt":"Srpski",sv:"Svenska",tg:"Тоҷикӣ",tr:"Türkçe",uk:"Українська",vi:"Vietnamese","zh-cn":"简体中文","zh-tw":"正體中文"},CoreConfigConstants.wsservice="moodle_mobile_app",CoreConfigConstants.wsextservice="local_mobile",CoreConfigConstants.font_sizes=[62.5,75.89,93.75],CoreConfigConstants.demo_sites={student:{url:"https://school.moodledemo.net",username:"student",password:"moodle"},teacher:{url:"https://school.moodledemo.net",username:"teacher",password:"moodle"}},CoreConfigConstants.customurlscheme="moodlemobile",CoreConfigConstants.siteurl="http://elearning.centrecanadien.com:8081/",CoreConfigConstants.sitename="CCFC",CoreConfigConstants.multisitesdisplay="",CoreConfigConstants.skipssoconfirmation=!1,CoreConfigConstants.forcedefaultlanguage=!1,CoreConfigConstants.privacypolicy="https://moodle.net/moodle-app-privacy/",CoreConfigConstants.notificoncolor="#f98012",CoreConfigConstants.statusbarbg=!1,CoreConfigConstants.statusbarlighttext=!1,CoreConfigConstants.statusbarbgios="#f98012",CoreConfigConstants.statusbarlighttextios=!0,CoreConfigConstants.statusbarbgandroid="#df7310",CoreConfigConstants.statusbarlighttextandroid=!0,CoreConfigConstants.statusbarbgremotetheme="#000000",CoreConfigConstants.statusbarlighttextremotetheme=!0,CoreConfigConstants.enableanalytics=!1,CoreConfigConstants.forceColorScheme="",CoreConfigConstants.compilationtime=1594648492290,CoreConfigConstants.lastcommit="05bfdf0c65697caaf26a0aaef7d3546b54316727",CoreConfigConstants}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(99),i=(t(74),t(610),function(e){function CoreQuestionBehaviourDelegate(n,t,o,r,i){var l=e.call(this,"CoreQuestionBehaviourDelegate",n,t,o)||this;return l.questionDelegate=r,l.defaultHandler=i,l.handlerNameProperty="type",l}return Object(o.__extends)(CoreQuestionBehaviourDelegate,e),CoreQuestionBehaviourDelegate.prototype.determineNewState=function(e,n,t,o,r){return e=this.questionDelegate.getBehaviourForQuestion(o,e),Promise.resolve(this.executeFunctionOnEnabled(e,"determineNewState",[n,t,o,r]))},CoreQuestionBehaviourDelegate.prototype.handleQuestion=function(e,n,t){return n=this.questionDelegate.getBehaviourForQuestion(t,n),Promise.resolve(this.executeFunctionOnEnabled(n,"handleQuestion",[e,t]))},CoreQuestionBehaviourDelegate.prototype.isBehaviourSupported=function(e){return this.hasHandler(e,!0)},CoreQuestionBehaviourDelegate}(r.a))},,,,,function(e,n,t){"use strict";function View_CoreCourseModuleDescriptionComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,0,null,4,2,"ion-note",[["item-end",""]],null,null,null,null,null)),o._15(8,16384,null,0,d.a,[s.a,o.p,o.K],null,null),(e()(),o._40(9,null,["",""])),(e()(),o._40(-1,2,["\n    "]))],null,function(e,n){e(n,9,0,n.component.note)})}function View_CoreCourseModuleDescriptionComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,c.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(3,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(4,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(8,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(10,16777216,null,2,1,"core-format-text",[["fullOnClick","true"]],null,null,null,null,null)),o._15(11,540672,null,0,p.a,[o.p,f.a,h.a,m.a,_.a,g.a,v.a,C.a,y.a,P.a,A.a,b.a,[2,I.a],[2,S.a],[2,E.a],M.a,w.a,k.a,T.a,O.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"],fullOnClick:[4,"fullOnClick"],contextLevel:[5,"contextLevel"],contextInstanceId:[6,"contextInstanceId"],courseId:[7,"courseId"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleDescriptionComponent_2)),o._15(15,16384,null,0,D.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.description,t.component,t.componentId,t.showFull&&"false"!==t.showFull?0:120,"true",t.contextLevel,t.contextInstanceId,t.courseId);e(n,15,0,t.note)},null)}function View_CoreCourseModuleDescriptionComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleDescriptionComponent_1)),o._15(1,16384,null,0,D.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.description)},null)}t.d(n,"a",function(){return x}),n.b=View_CoreCourseModuleDescriptionComponent_0;var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(248),c=t(90),p=t(48),f=t(2),h=t(5),m=t(12),_=t(19),g=t(17),v=t(3),C=t(23),y=t(7),P=t(18),A=t(11),b=t(16),I=t(21),S=t(30),E=t(29),M=t(43),w=t(10),k=t(41),T=t(31),O=t(37),D=t(8),x=o._14({encapsulation:2,styles:[],data:{}})},,function(e,n,t){"use strict";function View_CoreEmptyBoxComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,"img",[["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.image)})}function View_CoreEmptyBoxComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-icon",[],null,null,null,r.b,r.a)),o._15(1,704512,null,0,i.a,[o.p,l.a],{name:[0,"name"]},null)],function(e,n){e(n,1,0,n.component.icon)},null)}function View_CoreEmptyBoxComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],[[2,"padding-top",null]],null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){var t=n.component;e(n,0,0,t.image||t.icon);e(n,1,0,t.message)})}function View_CoreEmptyBoxComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"div",[["class","core-empty-box"]],[[2,"core-empty-box-inline",null]],null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(2,0,null,null,12,"div",[["class","core-empty-box-content"],["padding",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreEmptyBoxComponent_1)),o._15(5,16384,null,0,s.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreEmptyBoxComponent_2)),o._15(8,16384,null,0,s.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreEmptyBoxComponent_3)),o._15(11,16384,null,0,s.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),o._28(null,0),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.image&&!t.icon);e(n,8,0,t.icon);e(n,11,0,t.message)},function(e,n){var t=n.component;e(n,0,0,!t.image&&!t.icon||t.inline)})}t.d(n,"a",function(){return a}),n.b=View_CoreEmptyBoxComponent_0;var o=t(1),r=t(81),i=t(76),l=t(9),s=t(8),a=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0),t(6),t(4);var o=t(10),r=t(117),i=t(42),l=t(195),s=(t.n(l),function(){function CoreLoginHelperProvider(e,n,t,r,i,l,s,a,u,d,c,p,f,h,m,_,g){var v=this;this.sitesProvider=n,this.domUtils=t,this.wsProvider=r,this.translate=i,this.textUtils=l,this.eventsProvider=s,this.appProvider=a,this.utils=u,this.urlUtils=d,this.configProvider=c,this.platform=p,this.initDelegate=f,this.sitePluginsProvider=h,this.location=m,this.alertCtrl=_,this.courseProvider=g,this.isSSOConfirmShown=!1,this.isOpenEditAlertShown=!1,this.waitingForBrowser=!1,this.logger=e.getInstance("CoreLoginHelper"),this.eventsProvider.on(o.a.MAIN_MENU_OPEN,function(){v.pageToLoad&&Date.now()-v.pageToLoad.time<5e3&&(v.loadPageInMainMenu(v.pageToLoad.page,v.pageToLoad.params),delete v.pageToLoad)})}return e=CoreLoginHelperProvider,CoreLoginHelperProvider.prototype.acceptSitePolicy=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.write("core_user_agree_site_policy",{}).then(function(e){if(!e.status){if(e.warnings&&e.warnings.length){for(var n in e.warnings){if("alreadyagreed"==e.warnings[n].warningcode)return}return Promise.reject(e.warnings[0])}return Promise.reject(null)}})})},CoreLoginHelperProvider.prototype.appLaunchedByURL=function(e){var n=this,t=r.a.customurlscheme+"://token=";if(-1==e.indexOf(t))return!1;if(this.appProvider.isSSOAuthenticationOngoing())return!0;this.appProvider.isDesktop()&&this.utils.closeInAppBrowser(!0),this.appProvider.startSSOAuthentication(),this.logger.debug("App launched by URL with an SSO"),e=(e=e.replace(t,"")).replace(/\/?#?\/?$/,"");try{e=atob(e)}catch(e){return this.logger.error("Error decoding parameter received for login SSO"),!1}var o,i;return this.initDelegate.ready().then(function(){return i=n.domUtils.showModalLoading("core.login.authenticating",!0),n.validateBrowserSSOLogin(e)}).then(function(e){return o=e,n.handleSSOLoginAuthentication(o.siteUrl,o.token,o.privateToken,n.getOAuthIdFromParams(e.ssoUrlParams))}).then(function(){o.pageName?n.appProvider.getRootNavController().push(o.pageName,o.pageParams):n.goToSiteInitialPage()}).catch(function(e){e&&(n.treatUserTokenError(o.siteUrl,e),n.sitesProvider.logout())}).finally(function(){i.dismiss(),n.appProvider.finishSSOAuthentication()}),!0},CoreLoginHelperProvider.prototype.canRequestPasswordReset=function(e){return this.requestPasswordReset(e).then(function(){return!0}).catch(function(e){return 1==e.available||void 0!==e.errorcode&&"invalidrecord"!=e.errorcode&&""!=e.errorcode})},CoreLoginHelperProvider.prototype.checkLogout=function(){var e=this.appProvider.getRootNavController();!this.appProvider.isSSOAuthenticationOngoing()&&this.sitesProvider.isLoggedIn()&&this.sitesProvider.getCurrentSite().isLoggedOut()&&"CoreLoginReconnectPage"==e.getActive().name&&this.sitesProvider.logout()},CoreLoginHelperProvider.prototype.confirmAndOpenBrowserForSSOLogin=function(e,n,t,o){var r=this;(this.shouldShowSSOConfirm(n)?this.domUtils.showConfirm(this.translate.instant("core.login.logininsiterequired")):Promise.resolve()).then(function(){r.openBrowserForSSOLogin(e,n,t,o)}).catch(function(){})},CoreLoginHelperProvider.prototype.forgottenPasswordClicked=function(e,n,t,o){var r=this;if(o&&o.forgottenpasswordurl)this.utils.openInApp(o.forgottenpasswordurl);else{var i=this.domUtils.showModalLoading();this.canRequestPasswordReset(n).then(function(o){o?e.push("CoreLoginForgottenPasswordPage",{siteUrl:n,username:t}):r.openForgottenPassword(n)}).finally(function(){i.dismiss()})}},CoreLoginHelperProvider.prototype.formatProfileFieldsForSignup=function(e){if(!e)return[];var n={};return e.forEach(function(e){e.signup&&(n[e.categoryid]||(n[e.categoryid]={id:e.categoryid,name:e.categoryname,fields:[]}),n[e.categoryid].fields.push(e))}),Object.keys(n).map(function(e){return n[e]})},CoreLoginHelperProvider.prototype.getDisabledFeatures=function(e){var n=e&&e.tool_mobile_disabledfeatures;return n?this.textUtils.treatDisabledFeatures(n):""},CoreLoginHelperProvider.prototype.getErrorMessages=function(e,n,t,o,r,i,l,s){var a={};return e&&(a.required=a.requiredTrue=this.translate.instant(e)),n&&(a.email=this.translate.instant(n)),t&&(a.pattern=this.translate.instant(t)),o&&(a.url=this.translate.instant(o)),r&&(a.minlength=this.translate.instant(r)),i&&(a.maxlength=this.translate.instant(i)),l&&(a.min=this.translate.instant(l)),s&&(a.max=this.translate.instant(s)),a},CoreLoginHelperProvider.prototype.getLogoUrl=function(e){return e?e.logourl||e.compactlogourl:null},CoreLoginHelperProvider.prototype.getLogoutLabel=function(e){var n=(e=e||this.sitesProvider.getCurrentSite()).getStoredConfig();return"core.mainmenu."+(n&&"1"==n.tool_mobile_forcelogout?"logout":"changesite")},CoreLoginHelperProvider.prototype.getOAuthIdFromParams=function(e){return e&&void 0!==e.oauthsso?Number(e.oauthsso):void 0},CoreLoginHelperProvider.prototype.getSitePolicy=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.getConfig("sitepolicy",!0).then(function(e){return e||Promise.reject(null)},function(){return n.wsProvider.callAjax("auth_email_get_signup_settings",{},{siteUrl:e.getURL()}).then(function(e){return e.sitepolicy?e.sitepolicy:Promise.reject(null)})})})},CoreLoginHelperProvider.prototype.getFixedSites=function(){return r.a.siteurl},CoreLoginHelperProvider.prototype.getValidIdentityProviders=function(e,n){var t=this;if(this.isFeatureDisabled("NoDelegate_IdentityProviders",e,n))return[];var o=[],r=this.textUtils.concatenatePaths(e.wwwroot,"auth/oauth2/"),i=this.textUtils.concatenatePaths(e.httpswwwroot,"auth/oauth2/");return e.identityproviders&&e.identityproviders.length&&e.identityproviders.forEach(function(l){var s=t.urlUtils.extractUrlParams(l.url);!l.url||-1==l.url.indexOf(i)&&-1==l.url.indexOf(r)||t.isFeatureDisabled("NoDelegate_IdentityProvider_"+s.id,e,n)||o.push(l)}),o},CoreLoginHelperProvider.prototype.goToAddSite=function(e,n){var t,o;if(this.isFixedUrlSet()){t="CoreLoginCredentialsPage",o={siteUrl:"string"==typeof r.a.siteurl?r.a.siteurl:r.a.siteurl[0].url}}else t="CoreLoginSitePage",o={showKeyboard:n};return e?this.appProvider.getRootNavController().setRoot(t,o,{animate:!1}):this.appProvider.getRootNavController().push(t,o)},CoreLoginHelperProvider.prototype.goToNoSitePage=function(e,n,t){return e=e||this.appProvider.getRootNavController(),"CoreLoginSitesPage"==n?e.setRoot(n,t):this.sitesProvider.hasSites().then(function(o){return o?(e.setRoot("CoreLoginSitesPage"),e.push(n,t,{animate:!1})):"CoreLoginSitePage"!=n?(e.setRoot("CoreLoginSitePage"),e.push(n,t,{animate:!1})):e.setRoot(n,t)})},CoreLoginHelperProvider.prototype.goToSiteInitialPage=function(e,n,t,o,r){return this.openMainMenu(e,n,t,o,r)},CoreLoginHelperProvider.prototype.handleSSOLoginAuthentication=function(e,n,t,o){return this.sitesProvider.newSite(e,n,t,!0,o)},CoreLoginHelperProvider.prototype.hasSeveralFixedSites=function(){return r.a.siteurl&&Array.isArray(r.a.siteurl)&&r.a.siteurl.length>1},CoreLoginHelperProvider.prototype.inAppBrowserLoadStart=function(e){},CoreLoginHelperProvider.prototype.isEmailSignupDisabled=function(e,n){return this.isFeatureDisabled("CoreLoginEmailSignup",e,n)},CoreLoginHelperProvider.prototype.isFeatureDisabled=function(e,n,t){void 0===t&&(t=this.getDisabledFeatures(n));var o=new RegExp("(,|^)"+e+"(,|$)","g");return!!t.match(o)},CoreLoginHelperProvider.prototype.isFixedUrlSet=function(){return Array.isArray(r.a.siteurl)?1==r.a.siteurl.length:!!r.a.siteurl},CoreLoginHelperProvider.prototype.isForgottenPasswordDisabled=function(e,n){return this.isFeatureDisabled("NoDelegate_ForgottenPassword",e,n)},CoreLoginHelperProvider.prototype.isSiteLoggedOut=function(e,n){var t=this.sitesProvider.getCurrentSite();return!!t&&(!!t.isLoggedOut()&&(this.eventsProvider.trigger(o.a.SESSION_EXPIRED,{pageName:e,params:n},t.getId()),!0))},CoreLoginHelperProvider.prototype.isSSOEmbeddedBrowser=function(e){return!!this.appProvider.isLinux()||e==i.a.LOGIN_SSO_INAPP_CODE},CoreLoginHelperProvider.prototype.isSSOLoginNeeded=function(e){return e==i.a.LOGIN_SSO_CODE||e==i.a.LOGIN_SSO_INAPP_CODE},CoreLoginHelperProvider.prototype.loadSiteAndPage=function(e,n,t){var o=this,r=this.appProvider.getRootNavController();if(t==i.a.NO_SITE_ID)return r.setRoot(e,n);var l=this.domUtils.showModalLoading();return this.sitesProvider.loadSite(t,e,n).then(function(t){if(t)return o.openMainMenu(r,e,n)}).catch(function(e){return r.setRoot("CoreLoginSitesPage")}).finally(function(){l.dismiss()})},CoreLoginHelperProvider.prototype.loadPageInMainMenu=function(n,t){this.appProvider.isMainMenuOpen()?n==e.OPEN_COURSE?this.courseProvider.openCourse(void 0,t.course,t):this.eventsProvider.trigger(o.a.LOAD_PAGE_MAIN_MENU,{redirectPage:n,redirectParams:t}):this.pageToLoad={page:n,params:t,time:Date.now()}},CoreLoginHelperProvider.prototype.openMainMenu=function(n,t,o,r,i){var l=this;return n=n||this.appProvider.getRootNavController(),this.location.replaceState(""),t==e.OPEN_COURSE?n.setRoot("CoreMainMenuPage").finally(function(){return l.courseProvider.openCourse(void 0,o.course,o)}):n.setRoot("CoreMainMenuPage",{redirectPage:t,redirectParams:o,urlToOpen:i},r)},CoreLoginHelperProvider.prototype.openBrowserForOAuthLogin=function(e,n,t,o,r){if(t=t||e+"/admin/tool/mobile/launch.php",!n||!n.url)return!1;var i=this.urlUtils.extractUrlParams(n.url);if(!i.id)return!1;var l=this.sitesProvider.determineService(e),s=this.prepareForSSOLogin(e,l,t,o,r,{oauthsso:i.id});return this.appProvider.isLinux()?this.utils.openInApp(s):(this.utils.openInBrowser(s),navigator.app&&navigator.app.exitApp()),!0},CoreLoginHelperProvider.prototype.openBrowserForSSOLogin=function(e,n,t,o,r,i){var l=this.prepareForSSOLogin(e,t,o,r,i);if(this.isSSOEmbeddedBrowser(n)){var s={clearsessioncache:"yes",closebuttoncaption:this.translate.instant("core.login.cancel")};this.utils.openInApp(l,s)}else this.utils.openInBrowser(l),navigator.app&&navigator.app.exitApp()},CoreLoginHelperProvider.prototype.openChangePassword=function(e,n){var t=this;this.domUtils.showAlert(this.translate.instant("core.notice"),n,void 0,3e3).then(function(n){var o=n.didDismiss.subscribe(function(){o&&o.unsubscribe(),t.utils.openInApp(e+"/login/change_password.php")})})},CoreLoginHelperProvider.prototype.openForgottenPassword=function(e){this.utils.openInApp(e+"/login/forgot_password.php")},CoreLoginHelperProvider.prototype.openInAppForEdit=function(e,n,t,o){var r=this;if(e&&e===this.sitesProvider.getCurrentSiteId()){var i=this.sitesProvider.getCurrentSite(),l=i&&i.getURL();i&&l&&(this.isOpenEditAlertShown||this.waitingForBrowser||(this.isOpenEditAlertShown=!0,o&&i.invalidateWsCache(),t&&(t=this.translate.instant(t)+"<br>"+this.translate.instant("core.redirectingtosite")),i.openInAppWithAutoLogin(l+n,void 0,t).then(function(){r.waitingForBrowser=!0}).finally(function(){r.isOpenEditAlertShown=!1})))}},CoreLoginHelperProvider.prototype.passwordChangeForced=function(e){var n=this.sitesProvider.getCurrentSite();if(n&&e===n.getId()){var t=this.appProvider.getRootNavController(),o=t.getActive();o&&o.component&&"CoreLoginChangePasswordPage"==o.component.name||t.setRoot("CoreLoginChangePasswordPage",{siteId:e})}},CoreLoginHelperProvider.prototype.prepareForSSOLogin=function(e,n,t,o,l,s){n=n||r.a.wsextservice,t=t||e+"/local/mobile/launch.php";var a=1e3*Math.random(),u=t+"?service="+n;return u+="&passport="+a,u+="&urlscheme="+r.a.customurlscheme,s&&(u=this.urlUtils.addParamsToUrl(u,s)),this.configProvider.set(i.a.LOGIN_LAUNCH_DATA,JSON.stringify({siteUrl:e,passport:a,pageName:o||"",pageParams:l||{},ssoUrlParams:s||{}})),u},CoreLoginHelperProvider.prototype.redirect=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.isLoggedIn()?t&&t!=this.sitesProvider.getCurrentSiteId()?this.sitePluginsProvider.hasSitePluginsLoaded?(this.appProvider.storeRedirect(t,e,n),this.sitesProvider.logout()):this.sitesProvider.logout().then(function(){return o.loadSiteAndPage(e,n,t)}):(this.loadPageInMainMenu(e,n),Promise.resolve()):t?this.loadSiteAndPage(e,n,t):this.appProvider.getRootNavController().setRoot("CoreLoginSitesPage")},CoreLoginHelperProvider.prototype.requestPasswordReset=function(e,n,t){var o={};return n&&(o.username=n),t&&(o.email=t),this.wsProvider.callAjax("core_auth_request_password_reset",o,{siteUrl:e})},CoreLoginHelperProvider.prototype.sessionExpired=function(e){var n=this,t=e&&e.siteId,o=this.sitesProvider.getCurrentSite(),r=o&&o.getURL();o&&r&&(t&&t!==o.getId()||this.sitesProvider.checkSite(r).then(function(i){if(i.warning&&n.domUtils.showErrorModal(i.warning,!0,4e3),n.isSSOLoginNeeded(i.code))n.appProvider.isSSOAuthenticationOngoing()||n.isSSOConfirmShown||n.waitingForBrowser||(n.isSSOConfirmShown=!0,(n.shouldShowSSOConfirm(i.code)?n.domUtils.showConfirm(n.translate.instant("core.login."+(o.isLoggedOut()?"loggedoutssodescription":"reconnectssodescription"))):Promise.resolve()).then(function(){n.waitingForBrowser=!0,n.sitesProvider.unsetCurrentSite(),n.openBrowserForSSOLogin(i.siteUrl,i.code,i.service,i.config&&i.config.launchurl,e.pageName,e.params)}).catch(function(){n.sitesProvider.logout()}).finally(function(){n.isSSOConfirmShown=!1}));else{if(o.isOAuth()){var l=n.getValidIdentityProviders(i.config).find(function(e){return n.urlUtils.extractUrlParams(e.url).id==o.getOAuthId()});if(l){if(!n.appProvider.isSSOAuthenticationOngoing()&&!n.isSSOConfirmShown&&!n.waitingForBrowser){n.isSSOConfirmShown=!0;var s=n.translate.instant("core.login."+(o.isLoggedOut()?"loggedoutssodescription":"reconnectssodescription"));n.domUtils.showConfirm(s).then(function(){n.waitingForBrowser=!0,n.sitesProvider.unsetCurrentSite(),n.openBrowserForOAuthLogin(r,l,i.config.launchurl,e.pageName,e.params)}).catch(function(){n.sitesProvider.logout()}).finally(function(){n.isSSOConfirmShown=!1})}return}}var a=o.getInfo();if(void 0!==a&&void 0!==a.username){var u=n.appProvider.getRootNavController(),d=u.getActive();if(d&&d.component&&"CoreLoginReconnectPage"==d.component.name)return;u.setRoot("CoreLoginReconnectPage",{infoSiteUrl:a.siteurl,siteUrl:i.siteUrl,siteId:t,pageName:e.pageName,pageParams:e.params,siteConfig:i.config})}}}).catch(function(e){o.isLoggedOut()&&(n.domUtils.showErrorModalDefault(e,"core.networkerrormsg",!0),n.sitesProvider.logout())}))},CoreLoginHelperProvider.prototype.shouldShowSSOConfirm=function(e){return!(this.isSSOEmbeddedBrowser(e)||r.a.skipssoconfirmation&&"false"!==String(r.a.skipssoconfirmation))},CoreLoginHelperProvider.prototype.showWorkplaceNoticeModal=function(e){var n;this.platform.is("android")?n="market://details?id=com.moodle.workplace":this.platform.is("ios")&&(n="itms-apps://itunes.apple.com/app/id1470929705"),this.showDownloadAppNoticeModal(e,n)},CoreLoginHelperProvider.prototype.showMoodleAppNoticeModal=function(e){var n;this.appProvider.isWindows()?n="https://download.moodle.org/desktop/download.php?platform=windows":this.appProvider.isLinux()?n="https://download.moodle.org/desktop/download.php?platform=linux&arch="+(this.appProvider.is64Bits()?"64":"32"):this.appProvider.isMac()?n="itms-apps://itunes.apple.com/app/id1255924440":this.platform.is("android")?n="market://details?id=com.moodle.moodlemobile":this.platform.is("ios")&&(n="itms-apps://itunes.apple.com/app/id633359593"),this.showDownloadAppNoticeModal(e,n)},CoreLoginHelperProvider.prototype.showDownloadAppNoticeModal=function(e,n){var t=this,o=[{text:this.translate.instant("core.ok"),role:"cancel"}];n&&o.push({text:this.translate.instant("core.download"),handler:function(){t.utils.openInBrowser(n)}});var r=this.alertCtrl.create({message:e,buttons:o});r.present().then(function(){if(!(t.platform.is("android")||t.platform.is("ios"))){var e=r.pageRef().nativeElement.querySelector(".alert-message");t.domUtils.treatAnchors(e)}})},CoreLoginHelperProvider.prototype.showNotConfirmedModal=function(e,n,t,o){var r,i=this,l=this.translate.instant("core.login.mustconfirm");r=n?this.translate.instant("core.login.emailconfirmsent",{$a:n}):this.translate.instant("core.login.emailconfirmsentnoemail");var s;if(t&&o){var a=this.domUtils.showModalLoading();s=this.wsProvider.callAjax("core_auth_resend_confirmation_email",{},{siteUrl:e}).catch(function(e){return Promise.resolve(e&&"invalidparameter"===e.errorcode)}).finally(function(){a.dismiss()})}else s=Promise.resolve(!1);s.then(function(n){if(n){var s=i.translate.instant("core.login.resendemail"),a=i.translate.instant("core.close");i.domUtils.showConfirm(r,l,s,a).then(function(){var n=i.domUtils.showModalLoading("core.sending",!0);i.wsProvider.callAjax("core_auth_resend_confirmation_email",{username:t,password:o},{siteUrl:e}).then(function(e){var n=i.translate.instant("core.login.emailconfirmsentsuccess");i.domUtils.showAlert(i.translate.instant("core.success"),n)}).catch(function(e){i.domUtils.showErrorModal(e)}).finally(function(){n.dismiss()})}).catch(function(){})}else i.domUtils.showAlert(l,r)})},CoreLoginHelperProvider.prototype.sitePolicyNotAgreed=function(e){if((e=e||this.sitesProvider.getCurrentSiteId())&&e==this.sitesProvider.getCurrentSiteId()&&this.sitesProvider.wsAvailableInCurrentSite("core_user_agree_site_policy")){var n=this.appProvider.getRootNavController(),t=n.getActive();t&&t.component&&"CoreLoginSitePolicyPage"==t.component.name||n.setRoot("CoreLoginSitePolicyPage",{siteId:e})}},CoreLoginHelperProvider.prototype.treatUserTokenError=function(e,n,t,o){"forcepasswordchangenotice"==n.errorcode?this.openChangePassword(e,this.textUtils.getErrorMessageFromError(n)):"usernotconfirmed"==n.errorcode?this.showNotConfirmedModal(e,void 0,t,o):"connecttomoodleapp"==n.errorcode?this.showMoodleAppNoticeModal(this.textUtils.getErrorMessageFromError(n)):"connecttoworkplaceapp"==n.errorcode?this.showWorkplaceNoticeModal(this.textUtils.getErrorMessageFromError(n)):this.domUtils.showErrorModal(n)},CoreLoginHelperProvider.prototype.validateBrowserSSOLogin=function(e){var n=this,t=e.split(":::");return this.configProvider.get(i.a.LOGIN_LAUNCH_DATA).then(function(e){if(null===(e=n.textUtils.parseJSON(e,null)))return Promise.reject(null);var o=e.passport,r=e.siteUrl;n.configProvider.delete(i.a.LOGIN_LAUNCH_DATA);var s=l.Md5.hashAsciiStr(r+o);return s!=t[0]&&(r=-1!=r.indexOf("https://")?r.replace("https://","http://"):r.replace("http://","https://"),s=l.Md5.hashAsciiStr(r+o)),s==t[0]?(n.logger.debug("Signature validated"),{siteUrl:r,token:t[1],privateToken:t[2],pageName:e.pageName,pageParams:e.pageParams,ssoUrlParams:e.ssoUrlParams}):(n.logger.debug("Invalid signature in the URL request yours: "+t[0]+" mine: "+s+" for passport "+o),Promise.reject(n.translate.instant("core.unexpectederror")))})},CoreLoginHelperProvider.OPEN_COURSE="open_course",CoreLoginHelperProvider;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(11);var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},r=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},i=function(){function CoreConfigProvider(e){this.TABLE_NAME="core_config",this.tableSchema={name:"CoreConfigProvider",version:1,tables:[{name:this.TABLE_NAME,columns:[{name:"name",type:"TEXT",unique:!0,notNull:!0},{name:"value"}]}]},this.appDB=e.getDB(),this.dbReady=e.createTablesFromSchema(this.tableSchema).catch(function(){})}return CoreConfigProvider.prototype.delete=function(e){return o(this,void 0,void 0,function(){return r(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[2,this.appDB.deleteRecords(this.TABLE_NAME,{name:e})]}})})},CoreConfigProvider.prototype.get=function(e,n){return o(this,void 0,void 0,function(){var t,o;return r(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.appDB.getRecord(this.TABLE_NAME,{name:e})];case 3:return t=r.sent(),[2,t.value];case 4:if(o=r.sent(),void 0!==n)return[2,n];throw o;case 5:return[2]}})})},CoreConfigProvider.prototype.set=function(e,n){return o(this,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[2,this.appDB.insertRecord(this.TABLE_NAME,{name:e,value:n})]}})})},CoreConfigProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(99),i=(t(592),function(e){function AddonModDataFieldsDelegate(n,t,o,r,i){var l=e.call(this,"AddonModDataFieldsDelegate",n,t,o)||this;return l.utils=r,l.defaultHandler=i,l.handlerNameProperty="type",l}return Object(o.__extends)(AddonModDataFieldsDelegate,e),AddonModDataFieldsDelegate.prototype.getComponentForField=function(e,n){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getComponent",[e,n]))},AddonModDataFieldsDelegate.prototype.getFieldSearchData=function(e,n){return this.executeFunctionOnEnabled(e.type,"getFieldSearchData",[e,n])},AddonModDataFieldsDelegate.prototype.getFieldEditData=function(e,n,t){return this.executeFunctionOnEnabled(e.type,"getFieldEditData",[e,n,t])},AddonModDataFieldsDelegate.prototype.getFieldEditFiles=function(e,n,t){return this.executeFunctionOnEnabled(e.type,"getFieldEditFiles",[e,n,t])},AddonModDataFieldsDelegate.prototype.getFieldsNotifications=function(e,n){return this.executeFunctionOnEnabled(e.type,"getFieldsNotifications",[e,n])},AddonModDataFieldsDelegate.prototype.hasFiles=function(e){return this.hasFunction(e.type,"getFieldEditFiles")},AddonModDataFieldsDelegate.prototype.hasFieldDataChanged=function(e,n,t){return Promise.resolve(this.executeFunctionOnEnabled(e.type,"hasFieldDataChanged",[e,n,t])).then(function(e){return e?Promise.reject(null):Promise.resolve()})},AddonModDataFieldsDelegate.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},AddonModDataFieldsDelegate.prototype.overrideData=function(e,n,t,o){return n=n||{},t?this.executeFunctionOnEnabled(e.type,"overrideData",[n,t,o]):n},AddonModDataFieldsDelegate}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreQuestionProvider(e,n,t,o){this.sitesProvider=n,this.timeUtils=t,this.utils=o,this.QUESTION_TABLE="questions",this.QUESTION_ANSWERS_TABLE="question_answers",this.siteSchema={name:"CoreQuestionProvider",version:1,tables:[{name:this.QUESTION_TABLE,columns:[{name:"component",type:"TEXT",notNull:!0},{name:"attemptid",type:"INTEGER",notNull:!0},{name:"slot",type:"INTEGER",notNull:!0},{name:"componentid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"number",type:"INTEGER"},{name:"state",type:"TEXT"}],primaryKeys:["component","attemptid","slot"]},{name:this.QUESTION_ANSWERS_TABLE,columns:[{name:"component",type:"TEXT",notNull:!0},{name:"attemptid",type:"INTEGER",notNull:!0},{name:"name",type:"TEXT",notNull:!0},{name:"componentid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"questionslot",type:"INTEGER"},{name:"value",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["component","attemptid","name"]}]},this.QUESTION_PREFIX_REGEX=/q\d+:(\d+)_/,this.STATES={todo:{name:"todo",class:"core-question-notyetanswered",status:"notyetanswered",active:!0,finished:!1},invalid:{name:"invalid",class:"core-question-invalidanswer",status:"invalidanswer",active:!0,finished:!1},complete:{name:"complete",class:"core-question-answersaved",status:"answersaved",active:!0,finished:!1},needsgrading:{name:"needsgrading",class:"core-question-requiresgrading",status:"requiresgrading",active:!1,finished:!0},finished:{name:"finished",class:"core-question-complete",status:"complete",active:!1,finished:!0},gaveup:{name:"gaveup",class:"core-question-notanswered",status:"notanswered",active:!1,finished:!0},gradedwrong:{name:"gradedwrong",class:"core-question-incorrect",status:"incorrect",active:!1,finished:!0},gradedpartial:{name:"gradedpartial",class:"core-question-partiallycorrect",status:"partiallycorrect",active:!1,finished:!0},gradedright:{name:"gradedright",class:"core-question-correct",status:"correct",active:!1,finished:!0},mangrwrong:{name:"mangrwrong",class:"core-question-incorrect",status:"incorrect",active:!1,finished:!0},mangrpartial:{name:"mangrpartial",class:"core-question-partiallycorrect",status:"partiallycorrect",active:!1,finished:!0},mangrright:{name:"mangrright",class:"core-question-correct",status:"correct",active:!1,finished:!0},cannotdeterminestatus:{name:"cannotdeterminestatus",class:"core-question-unknown",status:"cannotdeterminestatus",active:!0,finished:!1}},this.logger=e.getInstance("CoreQuestionProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return CoreQuestionProvider.prototype.compareAllAnswers=function(e,n){var t=this.utils.mergeArraysWithoutDuplicates(Object.keys(e),Object.keys(n));for(var o in t){var r=t[o];if(!this.isExtraAnswer(r[0])&&!this.utils.sameAtKeyMissingIsBlank(e,n,r))return!1}return!0},CoreQuestionProvider.prototype.convertAnswersArrayToObject=function(e,n){var t=this,o={};return e.forEach(function(e){if(n){var r=t.removeQuestionPrefix(e.name);o[r]=e.value}else o[e.name]=e.value}),o},CoreQuestionProvider.prototype.getAnswer=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecord(r.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n,name:t})})},CoreQuestionProvider.prototype.getAttemptAnswers=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(o.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n})})},CoreQuestionProvider.prototype.getAttemptQuestions=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(o.QUESTION_TABLE,{component:e,attemptid:n})})},CoreQuestionProvider.prototype.getBasicAnswers=function(e){var n={};for(var t in e)this.isExtraAnswer(t)||(n[t]=e[t]);return n},CoreQuestionProvider.prototype.getBasicAnswersFromArray=function(e){var n=this,t=[];return e.forEach(function(e){n.isExtraAnswer(e.name)&&t.push(e)}),t},CoreQuestionProvider.prototype.getQuestion=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecord(r.QUESTION_TABLE,{component:e,attemptid:n,slot:t})})},CoreQuestionProvider.prototype.getQuestionAnswers=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.getDb().getRecords(i.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n,questionslot:t}).then(function(e){return o?i.getBasicAnswersFromArray(e):e})})},CoreQuestionProvider.prototype.getQuestionSlotFromName=function(e){if(e){var n=e.match(this.QUESTION_PREFIX_REGEX);if(n&&n[1])return parseInt(n[1],10)}return-1},CoreQuestionProvider.prototype.getState=function(e){return this.STATES[e||"cannotdeterminestatus"]},CoreQuestionProvider.prototype.isExtraAnswer=function(e){return"-"==(e=this.removeQuestionPrefix(e))[0]||":"==e[0]},CoreQuestionProvider.prototype.removeAttemptAnswers=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(o.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n})})},CoreQuestionProvider.prototype.removeAttemptQuestions=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(o.QUESTION_TABLE,{component:e,attemptid:n})})},CoreQuestionProvider.prototype.removeAnswer=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(r.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n,name:t})})},CoreQuestionProvider.prototype.removeQuestion=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(r.QUESTION_TABLE,{component:e,attemptid:n,slot:t})})},CoreQuestionProvider.prototype.removeQuestionAnswers=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(r.QUESTION_ANSWERS_TABLE,{component:e,attemptid:n,questionslot:t})})},CoreQuestionProvider.prototype.removeQuestionPrefix=function(e){return e?e.replace(this.QUESTION_PREFIX_REGEX,""):""},CoreQuestionProvider.prototype.saveAnswers=function(e,n,t,o,r,i,l){var s=this;return i=i||this.timeUtils.timestamp(),this.sitesProvider.getSite(l).then(function(l){var a=l.getDb(),u=[];for(var d in r){var c=r[d],p={component:e,componentid:n,attemptid:t,userid:o,questionslot:s.getQuestionSlotFromName(d),name:d,value:c,timemodified:i};u.push(a.insertRecord(s.QUESTION_ANSWERS_TABLE,p))}return Promise.all(u)})},CoreQuestionProvider.prototype.saveQuestion=function(e,n,t,o,r,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){var a={component:e,componentid:n,attemptid:t,userid:o,number:r.number,slot:r.slot,state:i};return l.getDb().insertRecord(s.QUESTION_TABLE,a)})},CoreQuestionProvider.COMPONENT="mmQuestion",CoreQuestionProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModQuizAccessRuleDelegate(n,t,o,r){var i=e.call(this,"AddonModQuizAccessRulesDelegate",n,t,o)||this;return i.utils=r,i.handlerNameProperty="ruleName",i}return Object(o.__extends)(AddonModQuizAccessRuleDelegate,e),AddonModQuizAccessRuleDelegate.prototype.getAccessRuleHandler=function(e){return this.getHandler(e,!0)},AddonModQuizAccessRuleDelegate.prototype.getFixedPreflightData=function(e,n,t,o,r,i){var l=this,s=[];return(e=e||[]).forEach(function(e){s.push(Promise.resolve(l.executeFunctionOnEnabled(e,"getFixedPreflightData",[n,t,o,r,i])))}),this.utils.allPromises(s).catch(function(){})},AddonModQuizAccessRuleDelegate.prototype.getPreflightComponent=function(e,n){return Promise.resolve(this.executeFunctionOnEnabled(e,"getPreflightComponent",[n]))},AddonModQuizAccessRuleDelegate.prototype.isAccessRuleSupported=function(e){return this.hasHandler(e,!0)},AddonModQuizAccessRuleDelegate.prototype.isPreflightCheckRequired=function(e,n,t,o,r){var i=this,l=[],s=!1;return(e=e||[]).forEach(function(e){l.push(i.isPreflightCheckRequiredForRule(e,n,t,o,r).then(function(e){e&&(s=!0)}))}),this.utils.allPromises(l).then(function(){return s}).catch(function(){return s})},AddonModQuizAccessRuleDelegate.prototype.isPreflightCheckRequiredForRule=function(e,n,t,o,r){return Promise.resolve(this.executeFunctionOnEnabled(e,"isPreflightCheckRequired",[n,t,o,r]))},AddonModQuizAccessRuleDelegate.prototype.notifyPreflightCheckPassed=function(e,n,t,o,r,i){var l=this,s=[];return(e=e||[]).forEach(function(e){s.push(Promise.resolve(l.executeFunctionOnEnabled(e,"notifyPreflightCheckPassed",[n,t,o,r,i])))}),this.utils.allPromises(s).catch(function(){})},AddonModQuizAccessRuleDelegate.prototype.notifyPreflightCheckFailed=function(e,n,t,o,r,i){var l=this,s=[];return(e=e||[]).forEach(function(e){s.push(Promise.resolve(l.executeFunctionOnEnabled(e,"notifyPreflightCheckFailed",[n,t,o,r,i])))}),this.utils.allPromises(s).catch(function(){})},AddonModQuizAccessRuleDelegate.prototype.shouldShowTimeLeft=function(e,n,t,o){e=e||[];for(var r in e){if(this.executeFunctionOnEnabled(e[r],"shouldShowTimeLeft",[n,t,o]))return!0}return!1},AddonModQuizAccessRuleDelegate}(t(99).a)},,function(e,n){e.exports=require("electron")},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreFilterDefaultHandler(){this.name="CoreFilterDefaultHandler",this.filterName="default"}return CoreFilterDefaultHandler.prototype.filter=function(e,n,t,o){return e},CoreFilterDefaultHandler.prototype.handleHtml=function(e,n,t,o,r,i,l){},CoreFilterDefaultHandler.prototype.isEnabled=function(){return!0},CoreFilterDefaultHandler.prototype.shouldBeApplied=function(e,n){return!0},CoreFilterDefaultHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModAssignOfflineProvider(n,t,o,r,i){this.sitesProvider=t,this.textUtils=o,this.fileProvider=r,this.timeUtils=i,this.siteSchema={name:"AddonModAssignOfflineProvider",version:1,tables:[{name:e.SUBMISSIONS_TABLE,columns:[{name:"assignid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"plugindata",type:"TEXT"},{name:"onlinetimemodified",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"submitted",type:"INTEGER"},{name:"submissionstatement",type:"INTEGER"}],primaryKeys:["assignid","userid"]},{name:e.SUBMISSIONS_GRADES_TABLE,columns:[{name:"assignid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"grade",type:"REAL"},{name:"attemptnumber",type:"INTEGER"},{name:"addattempt",type:"INTEGER"},{name:"workflowstate",type:"TEXT"},{name:"applytoall",type:"INTEGER"},{name:"outcomes",type:"TEXT"},{name:"plugindata",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["assignid","userid"]}]},this.logger=n.getInstance("AddonModAssignOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModAssignOfflineProvider,AddonModAssignOfflineProvider.prototype.deleteSubmission=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){return t=t||o.getUserId(),o.getDb().deleteRecords(e.SUBMISSIONS_TABLE,{assignid:n,userid:t})})},AddonModAssignOfflineProvider.prototype.deleteSubmissionGrade=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){return t=t||o.getUserId(),o.getDb().deleteRecords(e.SUBMISSIONS_GRADES_TABLE,{assignid:n,userid:t})})},AddonModAssignOfflineProvider.prototype.getAllAssigns=function(e){var n=[];return n.push(this.getAllSubmissions(e)),n.push(this.getAllSubmissionsGrade(e)),Promise.all(n).then(function(e){return e=[].concat.apply([],e),e=e.map(function(e){return e.assignid}),e=e.filter(function(n,t){return e.indexOf(n)==t})})},AddonModAssignOfflineProvider.prototype.getAllSubmissions=function(n){var t=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.getAllRecords(e.SUBMISSIONS_TABLE)}).then(function(e){return e.forEach(function(e){e.plugindata=t.textUtils.parseJSON(e.plugindata,{})}),e})},AddonModAssignOfflineProvider.prototype.getAllSubmissionsGrade=function(n){var t=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.getAllRecords(e.SUBMISSIONS_GRADES_TABLE)}).then(function(e){return e.forEach(function(e){e.outcomes=t.textUtils.parseJSON(e.outcomes,{}),e.plugindata=t.textUtils.parseJSON(e.plugindata,{})}),e})},AddonModAssignOfflineProvider.prototype.getAssignSubmissions=function(n,t){var o=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.getRecords(e.SUBMISSIONS_TABLE,{assignid:n})}).then(function(e){return e.forEach(function(e){e.plugindata=o.textUtils.parseJSON(e.plugindata,{})}),e})},AddonModAssignOfflineProvider.prototype.getAssignSubmissionsGrade=function(n,t){var o=this;return this.sitesProvider.getSiteDb(t).then(function(t){return t.getRecords(e.SUBMISSIONS_GRADES_TABLE,{assignid:n})}).then(function(e){return e.forEach(function(e){e.outcomes=o.textUtils.parseJSON(e.outcomes,{}),e.plugindata=o.textUtils.parseJSON(e.plugindata,{})}),e})},AddonModAssignOfflineProvider.prototype.getSubmission=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return t=t||o.getUserId(),o.getDb().getRecord(e.SUBMISSIONS_TABLE,{assignid:n,userid:t})}).then(function(e){return e.plugindata=r.textUtils.parseJSON(e.plugindata,{}),e})},AddonModAssignOfflineProvider.prototype.getSubmissionFolder=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId();var r=o.fileProvider.getSiteFolder(t.getId());return o.textUtils.concatenatePaths(r,"offlineassign/"+e+"/"+n)})},AddonModAssignOfflineProvider.prototype.getSubmissionGrade=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return t=t||o.getUserId(),o.getDb().getRecord(e.SUBMISSIONS_GRADES_TABLE,{assignid:n,userid:t})}).then(function(e){return e.outcomes=r.textUtils.parseJSON(e.outcomes,{}),e.plugindata=r.textUtils.parseJSON(e.plugindata,{}),e})},AddonModAssignOfflineProvider.prototype.getSubmissionPluginFolder=function(e,n,t,o){var r=this;return this.getSubmissionFolder(e,t,o).then(function(e){return r.textUtils.concatenatePaths(e,n)})},AddonModAssignOfflineProvider.prototype.hasAssignOfflineData=function(e,n){var t=[];return t.push(this.getAssignSubmissions(e,n)),t.push(this.getAssignSubmissionsGrade(e,n)),Promise.all(t).then(function(e){for(var n=0;n<e.length;n++){var t=e[n];if(t&&t.length)return!0}return!1}).catch(function(){return!1})},AddonModAssignOfflineProvider.prototype.markSubmitted=function(n,t,o,r,i,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){return l=l||s.getUserId(),a.getSubmission(n,l,s.getId()).catch(function(){var e=a.timeUtils.timestamp();return{assignid:n,courseid:t,userid:l,onlinetimemodified:i,timecreated:e,timemodified:e}}).then(function(n){return n.submitted=o?1:0,n.submissionstatement=r?1:0,n.plugindata=n.plugindata?JSON.stringify(n.plugindata):"{}",s.getDb().insertRecord(e.SUBMISSIONS_TABLE,n)})})},AddonModAssignOfflineProvider.prototype.saveSubmission=function(n,t,o,r,i,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){l=l||s.getUserId();var u=a.timeUtils.timestamp(),d={assignid:n,courseid:t,plugindata:o?JSON.stringify(o):"{}",userid:l,submitted:i?1:0,timecreated:u,timemodified:u,onlinetimemodified:r};return s.getDb().insertRecord(e.SUBMISSIONS_TABLE,d)})},AddonModAssignOfflineProvider.prototype.submitGradingForm=function(n,t,o,r,i,l,s,a,u,d,c){var p=this;return this.sitesProvider.getSite(c).then(function(c){var f=p.timeUtils.timestamp(),h={assignid:n,userid:t,courseid:o,grade:r,attemptnumber:i,addattempt:l?1:0,workflowstate:s,applytoall:a?1:0,outcomes:u?JSON.stringify(u):"{}",plugindata:d?JSON.stringify(d):"{}",timemodified:f};return c.getDb().insertRecord(e.SUBMISSIONS_GRADES_TABLE,h)})},AddonModAssignOfflineProvider.SUBMISSIONS_TABLE="addon_mod_assign_submissions",AddonModAssignOfflineProvider.SUBMISSIONS_GRADES_TABLE="addon_mod_assign_submissions_grading",AddonModAssignOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(297);var o=t(54),r=function(){function AddonModFeedbackProvider(e,n,t,o,r,i,l){this.sitesProvider=n,this.utils=t,this.filepoolProvider=o,this.feedbackOffline=r,this.appProvider=i,this.logHelper=l,this.ROOT_CACHE_KEY=this.ROOT_CACHE_KEY+"",this.logger=e.getInstance("AddonModFeedbackProvider")}return e=AddonModFeedbackProvider,AddonModFeedbackProvider.prototype.checkDependencyItem=function(e,n){var t=e.find(function(e){return e.id==n.dependitem});if(!t)return!0;switch(t.typ){case"label":return!1;case"multichoice":case"multichoicerated":return this.compareDependItemMultichoice(t,n.dependvalue)}return n.dependvalue==t.rawValue},AddonModFeedbackProvider.prototype.compareDependItemMultichoice=function(n,t){var o,r,i=n.presentation.split(e.MULTICHOICE_TYPE_SEP)||[],l=i.length>0&&i[0]?i[0]:"r";r=(r=(r=i[1]||"").split(e.MULTICHOICE_ADJUST_SEP)[0]||"").split(e.LINE_SEP)||[],"c"===l?void 0===n.rawValue?o=[""]:(n.rawValue=""+n.rawValue,o=n.rawValue.split(e.LINE_SEP)):o=[n.rawValue];for(var s=0;s<r.length;s++)for(var a in o)if(o[a]==s+1){var u=r[s];if("multichoicerated"==n.typ&&(u=u.split(e.MULTICHOICERATED_VALUE_SEP)[1]||""),u.trim()==t)return!0;if(1==o.length)return!1}return!1},AddonModFeedbackProvider.prototype.fillValues=function(n,t,o,r,i){var l=this;return this.getCurrentValues(n,o,r,i).then(function(e){var n={};e.forEach(function(e){n[e.item]=e.value}),t.forEach(function(e){e.hasvalue&&void 0!==n[e.id]&&(e.rawValue=n[e.id])})}).catch(function(){}).then(function(){return l.feedbackOffline.getFeedbackResponses(n,i).then(function(n){var o={};return(n=n.reduce(function(e,n){var t=l.utils.objectToArrayOfObjects(n.responses,"id","value");return e.concat(t)},[]).map(function(e){var n=e.id.split("_");return e.typ=n[0],e.item=parseInt(n[1],0),e})).forEach(function(e){void 0===o[e.item]&&(o[e.item]=[]),o[e.item].push(e.value)}),t.forEach(function(n){n.hasvalue&&void 0!==o[n.id]&&("multichoice"==n.typ&&"c"==n.presentation.split(e.MULTICHOICE_TYPE_SEP)[0]?(o[n.id]=o[n.id].filter(function(e){return e>0}),n.rawValue=o[n.id].join(e.LINE_SEP)):n.rawValue=o[n.id][0])}),t})}).catch(function(){return t})},AddonModFeedbackProvider.prototype.getAllNonRespondents=function(e,n,t,o,r){var i=this;return o=o||this.sitesProvider.getCurrentSiteId(),void 0===r&&(r={page:0,users:[]}),this.getNonRespondents(e,n,r.page,t,o).then(function(l){return r.users.length<l.total&&(r.users=r.users.concat(l.users)),r.users.length<l.total?(r.page++,i.getAllNonRespondents(e,n,t,o,r)):(r.total=l.total,r)})},AddonModFeedbackProvider.prototype.getAllResponsesAnalysis=function(e,n,t,o,r){var i=this;return o=o||this.sitesProvider.getCurrentSiteId(),void 0===r&&(r={page:0,attempts:[],anonattempts:[]}),this.getResponsesAnalysis(e,n,r.page,t,o).then(function(l){return r.anonattempts.length<l.totalanonattempts&&(r.anonattempts=r.anonattempts.concat(l.anonattempts)),r.attempts.length<l.totalattempts&&(r.attempts=r.attempts.concat(l.attempts)),r.anonattempts.length<l.totalanonattempts||r.attempts.length<l.totalattempts?(r.page++,i.getAllResponsesAnalysis(e,n,t,o,r)):(r.totalattempts=l.totalattempts,r.totalanonattempts=l.totalanonattempts,r)})},AddonModFeedbackProvider.prototype.getAnalysis=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={feedbackid:e},l={cacheKey:r.getAnalysisDataCacheKey(e,n)};return n&&(i.groupid=n),t&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_feedback_get_analysis",i,l)})},AddonModFeedbackProvider.prototype.getAnalysisDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getAnalysisDataPrefixCacheKey(e)+n},AddonModFeedbackProvider.prototype.getAnalysisDataPrefixCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":analysis:"},AddonModFeedbackProvider.prototype.getAttempt=function(e,n,t,o,r){var i=this;return o=o||this.sitesProvider.getCurrentSiteId(),void 0===r&&(r={page:0,attemptsLoaded:0,anonAttemptsLoaded:0}),this.getResponsesAnalysis(e,0,r.page,t,o).then(function(l){var s;return(s=l.attempts.find(function(e){return n==e.id}))?s:(s=l.anonattempts.find(function(e){return n==e.id}))?s:(r.anonAttemptsLoaded<l.totalanonattempts&&(r.anonAttemptsLoaded+=l.anonattempts.length),r.attemptsLoaded<l.totalattempts&&(r.attemptsLoaded+=l.attempts.length),r.anonAttemptsLoaded<l.totalanonattempts||r.attemptsLoaded<l.totalattempts?(r.page++,i.getAttempt(e,n,t,o,r)):Promise.reject(null))})},AddonModFeedbackProvider.prototype.getCompletedDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":completed:"},AddonModFeedbackProvider.prototype.getCurrentCompletedTimeModified=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={feedbackid:e},i={cacheKey:o.getCurrentCompletedTimeModifiedDataCacheKey(e)};return n&&(i.getFromCache=!1,i.emergencyCache=!1),t.read("mod_feedback_get_current_completed_tmp",r,i).then(function(e){return e&&void 0!==e.feedback&&void 0!==e.feedback.timemodified?e.feedback.timemodified:0}).catch(function(){return 0})})},AddonModFeedbackProvider.prototype.getCurrentCompletedTimeModifiedDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":completedtime:"},AddonModFeedbackProvider.prototype.getCurrentValues=function(e,n,t,o){var r=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(o).then(function(o){var i={feedbackid:e},l={cacheKey:r.getCurrentValuesDataCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_feedback_get_unfinished_responses",i,l).then(function(e){return e&&void 0!==e.responses?0==e.responses.length?o.read("mod_feedback_get_finished_responses",i,l).then(function(e){return e&&void 0!==e.responses?e.responses:Promise.reject(null)}):e.responses:Promise.reject(null)})})},AddonModFeedbackProvider.prototype.getCurrentValuesDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":currentvalues"},AddonModFeedbackProvider.prototype.getFeedbackAccessInformation=function(e,n,t,o){var r=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(o).then(function(o){var i={feedbackid:e},l={cacheKey:r.getFeedbackAccessInformationDataCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_feedback_get_feedback_access_information",i,l)})},AddonModFeedbackProvider.prototype.getFeedbackAccessInformationDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":access"},AddonModFeedbackProvider.prototype.getFeedbackCacheKey=function(e){return this.ROOT_CACHE_KEY+"feedback:"+e},AddonModFeedbackProvider.prototype.getFeedbackDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},AddonModFeedbackProvider.prototype.getFeedbackDataByKey=function(e,n,t,r,i,l){var s=this;return this.sitesProvider.getSite(r).then(function(r){var a={courseids:[e]},u={cacheKey:s.getFeedbackCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return i?u.omitExpires=!0:l&&(u.getFromCache=!1,u.emergencyCache=!1),r.read("mod_feedback_get_feedbacks_by_courses",a,u).then(function(e){if(e&&e.feedbacks){var o=e.feedbacks.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModFeedbackProvider.prototype.getFeedback=function(e,n,t,o,r){return this.getFeedbackDataByKey(e,"coursemodule",n,t,o,r)},AddonModFeedbackProvider.prototype.getFeedbackById=function(e,n,t,o,r){return this.getFeedbackDataByKey(e,"id",n,t,o,r)},AddonModFeedbackProvider.prototype.getItems=function(e,n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={feedbackid:e},l={cacheKey:r.getItemsDataCacheKey(e),updateFrequency:o.a.FREQUENCY_SOMETIMES};return n&&(l.getFromCache=!1,l.emergencyCache=!1),t.read("mod_feedback_get_items",i,l)})},AddonModFeedbackProvider.prototype.getItemsDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":items"},AddonModFeedbackProvider.prototype.getNonRespondents=function(e,n,t,o,r){var i=this;return void 0===n&&(n=0),void 0===t&&(t=0),this.sitesProvider.getSite(r).then(function(r){var l={feedbackid:e,groupid:n,page:t},s={cacheKey:i.getNonRespondentsDataCacheKey(e,n)};return o&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_feedback_get_non_respondents",l,s)})},AddonModFeedbackProvider.prototype.getNonRespondentsDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getNonRespondentsDataPrefixCacheKey(e)+n},AddonModFeedbackProvider.prototype.getNonRespondentsDataPrefixCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":nonrespondents:"},AddonModFeedbackProvider.prototype.getPageItems=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_feedback_get_page_items",{feedbackid:e,page:n})})},AddonModFeedbackProvider.prototype.getPageItemsWithValues=function(e,n,t,o,r){var i=this;return void 0===t&&(t=!1),void 0===o&&(o=!1),r=r||this.sitesProvider.getCurrentSiteId(),this.getPageItems(e,n,r).then(function(n){return i.fillValues(e,n.items,t,o,r).then(function(e){return n.items=e,n})}).catch(function(){return i.getItems(e,!1,r).then(function(l){return i.fillValues(e,l.items,t,o,r).then(function(e){var t=0,o=[],r=e.filter(function(e){return!(t>n)&&("pagebreak"==e.typ?(t++,!1):t<n?(o.push(e),!1):e&&e.dependitem>0&&o.length>0?i.checkDependencyItem(o,e):e)});return l.hasprevpage=n>0,l.hasnextpage=t>n,l.items=r,l})})})},AddonModFeedbackProvider.prototype.getPageJumpTo=function(e,n,t,o){var r=this;return this.getPageItemsWithValues(e,n,!0,!1,o).then(function(i){return i.items.length>0?n:!!(1==t&&i.hasnextpage||-1==t&&i.hasprevpage)&&r.getPageJumpTo(e,n+t,t,o)})},AddonModFeedbackProvider.prototype.getResponsesAnalysis=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={feedbackid:e,groupid:n||0,page:t||0},s={cacheKey:i.getResponsesAnalysisDataCacheKey(e,n)};return o&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_feedback_get_responses_analysis",l,s)})},AddonModFeedbackProvider.prototype.getResponsesAnalysisDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getResponsesAnalysisDataPrefixCacheKey(e)+n},AddonModFeedbackProvider.prototype.getResponsesAnalysisDataPrefixCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":responsesanalysis:"},AddonModFeedbackProvider.prototype.getResumePage=function(e,n,t,o){var r=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(o).then(function(o){var i={feedbackid:e},l={cacheKey:r.getResumePageDataCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_feedback_launch_feedback",i,l).then(function(e){return e&&void 0!==e.gopage?e.gopage>0?e.gopage:0:Promise.reject(null)})})},AddonModFeedbackProvider.prototype.getResumePageDataCacheKey=function(e){return this.getFeedbackDataPrefixCacheKey(e)+":launch"},AddonModFeedbackProvider.prototype.invalidateAllFeedbackData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getFeedbackDataPrefixCacheKey(e))})},AddonModFeedbackProvider.prototype.invalidateAnalysisData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getAnalysisDataPrefixCacheKey(e))})},AddonModFeedbackProvider.prototype.invalidateContent=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.getFeedback(n,e,t).then(function(e){var r=[];return r.push(o.invalidateFeedbackData(n,t)),r.push(o.invalidateAllFeedbackData(e.id,t)),Promise.all(r)})),r.push(this.invalidateFiles(e,t)),this.utils.allPromises(r)},AddonModFeedbackProvider.prototype.invalidateCurrentValuesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCurrentValuesDataCacheKey(e))})},AddonModFeedbackProvider.prototype.invalidateFeedbackAccessInformationData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getFeedbackAccessInformationDataCacheKey(e))})},AddonModFeedbackProvider.prototype.invalidateFeedbackData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getFeedbackCacheKey(e))})},AddonModFeedbackProvider.prototype.invalidateFiles=function(n,t){return this.filepoolProvider.invalidateFilesByComponent(t,e.COMPONENT,n)},AddonModFeedbackProvider.prototype.invalidateNonRespondentsData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getNonRespondentsDataPrefixCacheKey(e))})},AddonModFeedbackProvider.prototype.invalidateResponsesAnalysisData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getResponsesAnalysisDataPrefixCacheKey(e))})},AddonModFeedbackProvider.prototype.invalidateResumePageData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getResumePageDataCacheKey(e))})},AddonModFeedbackProvider.prototype.isCompleted=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={feedbackid:e},i={cacheKey:o.getCompletedDataCacheKey(e)};return n&&(i.getFromCache=!1,i.emergencyCache=!1),o.utils.promiseWorks(t.read("mod_feedback_get_last_completed",r,i))})},AddonModFeedbackProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_feedback_get_feedbacks_by_courses")&&e.wsAvailable("mod_feedback_get_feedback_access_information")})},AddonModFeedbackProvider.prototype.logView=function(n,t,o,r){void 0===o&&(o=!1);var i={feedbackid:n,moduleviewed:o?1:0};return this.logHelper.logSingle("mod_feedback_view_feedback",i,e.COMPONENT,n,t,"feedback",{moduleviewed:i.moduleviewed},r)},AddonModFeedbackProvider.prototype.processPage=function(e,n,t,o,r,i,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a=function(){return s.feedbackOffline.saveResponses(e,n,t,i,l).then(function(){var t={jumpto:n,completed:!1,offline:!0},i=0;return o?n>0&&(i=-1):r||(i=1),0===i?t:s.getPageItemsWithValues(e,n,!0,!1,l).then(function(o){return 1!=i||o.hasnextpage?s.getPageJumpTo(e,n+i,i,l).then(function(e){return!1===e?-1==i?t.jumpto=0:t.completed=!0:t.jumpto=e,t}):(t.completed=!0,t)})})};return this.appProvider.isOnline()?this.feedbackOffline.deleteFeedbackPageResponses(e,n,l).then(function(){return s.processPageOnline(e,n,t,o,l).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):a()})}):a()},AddonModFeedbackProvider.prototype.processPageOnline=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={feedbackid:e,page:n,responses:i.utils.objectToArrayOfObjects(t,"name","value"),goprevious:o?1:0};return r.write("mod_feedback_process_page",l).catch(function(e){return Promise.reject(i.utils.createFakeWSError(e))}).then(function(n){return i.invalidateCurrentValuesData(e,r.getId()).then(function(){return i.getCurrentValues(e,!1,!1,r.getId())}).catch(function(){}).then(function(){return n})})})},AddonModFeedbackProvider.COMPONENT="mmaModFeedback",AddonModFeedbackProvider.FORM_SUBMITTED="addon_mod_feedback_form_submitted",AddonModFeedbackProvider.LINE_SEP="|",AddonModFeedbackProvider.MULTICHOICE_TYPE_SEP=">>>>>",AddonModFeedbackProvider.MULTICHOICE_ADJUST_SEP="<<<<<",AddonModFeedbackProvider.MULTICHOICE_HIDENOSELECT="h",AddonModFeedbackProvider.MULTICHOICERATED_VALUE_SEP="####",AddonModFeedbackProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(54),r=(t(233),function(){function AddonModForumProvider(e,n,t,o,r,i,l,s,a){this.appProvider=e,this.sitesProvider=n,this.groupsProvider=t,this.filepoolProvider=o,this.userProvider=r,this.translate=i,this.utils=l,this.forumOffline=s,this.logHelper=a,this.ROOT_CACHE_KEY="mmaModForum:"}return e=AddonModForumProvider,AddonModForumProvider.prototype.getCanAddDiscussionCacheKey=function(e,n){return this.getCommonCanAddDiscussionCacheKey(e)+n},AddonModForumProvider.prototype.getCommonCanAddDiscussionCacheKey=function(e){return this.ROOT_CACHE_KEY+"canadddiscussion:"+e+":"},AddonModForumProvider.prototype.getForumDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},AddonModForumProvider.prototype.getDiscussionPostDataCacheKey=function(e,n,t){return this.getForumDiscussionDataCacheKey(e,n)+":post:"+t},AddonModForumProvider.prototype.getForumDiscussionDataCacheKey=function(e,n){return this.getForumDataPrefixCacheKey(e)+":discussion:"+n},AddonModForumProvider.prototype.getForumDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"forum:"+e},AddonModForumProvider.prototype.getAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"accessInformation:"+e},AddonModForumProvider.prototype.getDiscussionPostsCacheKey=function(e){return this.ROOT_CACHE_KEY+"discussion:"+e},AddonModForumProvider.prototype.getDiscussionsListCacheKey=function(n,t){var o=this.ROOT_CACHE_KEY+"discussions:"+n;return t!=e.SORTORDER_LASTPOST_DESC&&(o+=":"+t),o},AddonModForumProvider.prototype.addNewDiscussionOnline=function(e,n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={forumid:e,subject:n,message:t,options:l.utils.objectToArrayOfObjects(o,"name","value")};return r&&(s.groupid=r),i.write("mod_forum_add_discussion",s).then(function(e){return e&&e.discussionid?e.discussionid:Promise.reject(l.utils.createFakeWSError(""))})})},AddonModForumProvider.prototype.canAddDiscussion=function(e,n,t){var o={forumid:e,groupid:n},r={cacheKey:this.getCanAddDiscussionCacheKey(e,n)};return this.sitesProvider.getSite(t).then(function(e){return e.read("mod_forum_can_add_discussion",o,r).then(function(e){return e?(void 0===e.canpindiscussions&&(e.canpindiscussions=!1),void 0===e.cancreateattachment&&(e.cancreateattachment=!0),e):Promise.reject(null)})})},AddonModForumProvider.prototype.canAddDiscussionToAll=function(n,t){return this.canAddDiscussion(n,e.ALL_PARTICIPANTS,t)},AddonModForumProvider.prototype.deletePost=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_forum_delete_post",{postid:e})})},AddonModForumProvider.prototype.extractStartingPost=function(e){var n=e.findIndex(function(e){return 0==e.parent});return n>=0?e.splice(n,1).pop():void 0},AddonModForumProvider.prototype.isAllParticipantsFixed=function(){return this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan(["3.1.5","3.2.2"])},AddonModForumProvider.prototype.isGetDiscussionPostAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_forum_get_discussion_post")},AddonModForumProvider.prototype.isDeletePostAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_forum_delete_post")},AddonModForumProvider.prototype.isUpdatePostAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_forum_update_discussion_post")},AddonModForumProvider.prototype.formatDiscussionsGroups=function(n,t){var o=this;return t=this.utils.clone(t),this.groupsProvider.getActivityAllowedGroups(n).then(function(n){var r=o.translate.instant("core.allparticipants"),i=o.translate.instant("core.allgroups"),l={};return n.groups.forEach(function(e){l[e.id]=e}),t.forEach(function(n){if(n.groupid==e.ALL_PARTICIPANTS)n.groupname=r;else if(n.groupid==e.ALL_GROUPS)n.groupname=i;else{var t=l[n.groupid];t&&(n.groupname=t.name)}}),t}).catch(function(){return t})},AddonModForumProvider.prototype.getCourseForums=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var r={courseids:[e]},i={cacheKey:t.getForumDataCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("mod_forum_get_forums_by_courses",r,i)})},AddonModForumProvider.prototype.getDiscussionPost=function(e,n,t,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={postid:t},a={cacheKey:l.getDiscussionPostDataCacheKey(e,n,t),updateFrequency:o.a.FREQUENCY_USUALLY};return r&&(a.getFromCache=!1,a.emergencyCache=!1),i.read("mod_forum_get_discussion_post",s,a).then(function(e){return e.post?e.post:Promise.reject(null)})})},AddonModForumProvider.prototype.getForum=function(e,n,t){return this.getCourseForums(e,t).then(function(e){var t=e.find(function(e){return e.cmid==n});return t||Promise.reject(null)})},AddonModForumProvider.prototype.getForumById=function(e,n,t){return this.getCourseForums(e,t).then(function(e){var t=e.find(function(e){return e.id==n});return t||Promise.reject(null)})},AddonModForumProvider.prototype.getAccessInformation=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){if(!t.wsAvailable("mod_forum_get_forum_access_information"))return Promise.resolve({});var r={forumid:e},i={cacheKey:o.getAccessInformationCacheKey(e),omitExpires:n};return t.read("mod_forum_get_forum_access_information",r,i)})},AddonModForumProvider.prototype.getDiscussionPosts=function(e,n){var t=this,o={discussionid:e},r={cacheKey:this.getDiscussionPostsCacheKey(e)};return this.sitesProvider.getSite(n).then(function(e){return e.read("mod_forum_get_forum_discussion_posts",o,r).then(function(e){return e?(t.storeUserData(e.posts),e):Promise.reject(null)})})},AddonModForumProvider.prototype.sortDiscussionPosts=function(e,n){e.sort(function(e,t){return e=parseInt(e.created,10),t=parseInt(t.created,10),"ASC"==n?e-t:t-e})},AddonModForumProvider.prototype.isDiscussionListSortingAvailable=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isVersionGreaterEqualThan("3.7")},AddonModForumProvider.prototype.getAvailableSortOrders=function(){var n=[{label:"addon.mod_forum.discussionlistsortbylastpostdesc",value:e.SORTORDER_LASTPOST_DESC}];return this.isDiscussionListSortingAvailable()&&n.push({label:"addon.mod_forum.discussionlistsortbylastpostasc",value:e.SORTORDER_LASTPOST_ASC},{label:"addon.mod_forum.discussionlistsortbycreateddesc",value:e.SORTORDER_CREATED_DESC},{label:"addon.mod_forum.discussionlistsortbycreatedasc",value:e.SORTORDER_CREATED_ASC},{label:"addon.mod_forum.discussionlistsortbyrepliesdesc",value:e.SORTORDER_REPLIES_DESC},{label:"addon.mod_forum.discussionlistsortbyrepliesasc",value:e.SORTORDER_REPLIES_ASC}),n},AddonModForumProvider.prototype.getDiscussions=function(n,t,o,r,i){var l=this;return void 0===o&&(o=0),t=t||e.SORTORDER_LASTPOST_DESC,this.sitesProvider.getSite(i).then(function(i){var s="mod_forum_get_forum_discussions_paginated",a={forumid:n,page:o,perpage:e.DISCUSSIONS_PER_PAGE};if(i.wsAvailable("mod_forum_get_forum_discussions"))s="mod_forum_get_forum_discussions",a.sortorder=t;else{if(t!=e.SORTORDER_LASTPOST_DESC)return Promise.reject(null);a.sortby="timemodified",a.sortdirection="DESC"}var u={cacheKey:l.getDiscussionsListCacheKey(n,t)};return r&&(u.omitExpires=!0),i.read(s,a,u).catch(function(r){if(!l.appProvider.isOnline()&&"mod_forum_get_forum_discussion"==s&&t==e.SORTORDER_LASTPOST_DESC){var a={forumid:n,page:o,perpage:e.DISCUSSIONS_PER_PAGE,sortby:"timemodified",sortdirection:"DESC"},u={cacheKey:l.getDiscussionsListCacheKey(n,t),omitExpires:!0};return i.read("mod_forum_get_forum_discussions_paginated",a,u)}return Promise.reject(r)}).then(function(n){return n?(l.storeUserData(n.discussions),Promise.resolve({discussions:n.discussions,canLoadMore:n.discussions.length>=e.DISCUSSIONS_PER_PAGE})):Promise.reject(null)})})},AddonModForumProvider.prototype.getDiscussionsInPages=function(e,n,t,o,r,i){var l=this;void 0===o&&(o=-1),r=r||0;var s={discussions:[],error:!1};if(!o)return Promise.resolve(s);var a=function(r){return l.getDiscussions(e,n,r,t,i).then(function(e){return s.discussions=s.discussions.concat(e.discussions),o--,e.canLoadMore&&0!==o?a(r+1):s}).catch(function(){return s.error=!0,s})};return a(r)},AddonModForumProvider.prototype.invalidateCanAddDiscussion=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getCommonCanAddDiscussionCacheKey(e))})},AddonModForumProvider.prototype.invalidateContent=function(n,t){var o=this;return this.getForum(t,n).then(function(n){var r=[];return r.push(o.invalidateForumData(t)),r.push(o.invalidateDiscussionsList(n.id)),r.push(o.invalidateCanAddDiscussion(n.id)),r.push(o.invalidateAccessInformation(n.id)),o.getAvailableSortOrders().forEach(function(e){r.push(o.getDiscussionsInPages(n.id,e.value,!0).then(function(e){var t=[];return e.discussions.forEach(function(e){t.push(o.invalidateDiscussionPosts(e.discussion,n.id))}),o.utils.allPromises(t)}))}),o.isDiscussionListSortingAvailable()&&r.push(o.userProvider.invalidateUserPreference(e.PREFERENCE_SORTORDER)),o.utils.allPromises(r)})},AddonModForumProvider.prototype.invalidateAccessInformation=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAccessInformationCacheKey(e))})},AddonModForumProvider.prototype.invalidateDiscussionPosts=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r=[t.invalidateWsCacheForKey(o.getDiscussionPostsCacheKey(e))];return n&&r.push(t.invalidateWsCacheForKeyStartingWith(o.getForumDiscussionDataCacheKey(n,e))),o.utils.allPromises(r)})},AddonModForumProvider.prototype.invalidateDiscussionsList=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return t.utils.allPromises(t.getAvailableSortOrders().map(function(o){return n.invalidateWsCacheForKey(t.getDiscussionsListCacheKey(e,o.value))}))})},AddonModForumProvider.prototype.invalidateFiles=function(n){var t=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.invalidateFilesByComponent(t,e.COMPONENT,n)},AddonModForumProvider.prototype.invalidateForumData=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getForumDataCacheKey(e))},AddonModForumProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_forum_view_forum",{forumid:n},e.COMPONENT,n,t,"forum",{},o)},AddonModForumProvider.prototype.logDiscussionView=function(n,t,o,r){var i={discussionid:n};return this.logHelper.logSingle("mod_forum_view_forum_discussion",i,e.COMPONENT,t,o,"forum",i,r)},AddonModForumProvider.prototype.replyPost=function(e,n,t,o,r,i,l,s,a,u){var d=this;a=a||this.sitesProvider.getCurrentSiteId();var c=function(){return t?d.forumOffline.replyPost(e,n,t,o,r,i,l,s,a).then(function(){return!1}):Promise.reject(d.translate.instant("core.networkerrormsg"))};return!this.appProvider.isOnline()&&u?c():this.forumOffline.deleteReply(e,a).then(function(){return d.replyPostOnline(e,i,l,s,a).then(function(){return!0}).catch(function(e){return u&&!d.utils.isWebServiceError(e)?c():Promise.reject(e)})})},AddonModForumProvider.prototype.replyPostOnline=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={postid:e,subject:n,message:t,options:i.utils.objectToArrayOfObjects(o,"name","value")};return r.write("mod_forum_add_discussion_post",l).then(function(e){return e&&e.postid?e.postid:Promise.reject(i.utils.createFakeWSError(""))})})},AddonModForumProvider.prototype.setLockState=function(e,n,t,o){return this.sitesProvider.getSite(o).then(function(o){return o.write("mod_forum_set_lock_state",{forumid:e,discussionid:n,targetstate:t?0:1})})},AddonModForumProvider.prototype.isSetPinStateAvailableForSite=function(e){return e=e||this.sitesProvider.getCurrentSite(),this.sitesProvider.wsAvailableInCurrentSite("mod_forum_set_pin_state")},AddonModForumProvider.prototype.setPinState=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_forum_set_pin_state",{discussionid:e,targetstate:n?1:0})})},AddonModForumProvider.prototype.toggleFavouriteState=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_forum_toggle_favourite_state",{discussionid:e,targetstate:n?1:0})})},AddonModForumProvider.prototype.storeUserData=function(e){var n={};e.forEach(function(e){var t=parseInt(e.userid);isNaN(t)||n[t]||(n[t]={id:t,fullname:e.userfullname,profileimageurl:e.userpictureurl});var o=parseInt(e.usermodified);isNaN(o)||n[o]||(n[o]={id:o,fullname:e.usermodifiedfullname,profileimageurl:e.usermodifiedpictureurl})}),this.userProvider.storeUsers(this.utils.objectToArray(n))},AddonModForumProvider.prototype.updatePost=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={postid:e,subject:n,message:t,options:i.utils.objectToArrayOfObjects(o,"name","value")};return r.write("mod_forum_update_discussion_post",l).then(function(e){return e&&e.status})})},AddonModForumProvider.COMPONENT="mmaModForum",AddonModForumProvider.DISCUSSIONS_PER_PAGE=10,AddonModForumProvider.NEW_DISCUSSION_EVENT="addon_mod_forum_new_discussion",AddonModForumProvider.REPLY_DISCUSSION_EVENT="addon_mod_forum_reply_discussion",AddonModForumProvider.VIEW_DISCUSSION_EVENT="addon_mod_forum_view_discussion",AddonModForumProvider.CHANGE_DISCUSSION_EVENT="addon_mod_forum_change_discussion_status",AddonModForumProvider.MARK_READ_EVENT="addon_mod_forum_mark_read",AddonModForumProvider.LEAVING_POSTS_PAGE="addon_mod_forum_leaving_posts_page",AddonModForumProvider.PREFERENCE_SORTORDER="forum_discussionlistsortorder",AddonModForumProvider.SORTORDER_LASTPOST_DESC=1,AddonModForumProvider.SORTORDER_LASTPOST_ASC=2,AddonModForumProvider.SORTORDER_CREATED_DESC=3,AddonModForumProvider.SORTORDER_CREATED_ASC=4,AddonModForumProvider.SORTORDER_REPLIES_DESC=5,AddonModForumProvider.SORTORDER_REPLIES_ASC=6,AddonModForumProvider.ALL_PARTICIPANTS=-1,AddonModForumProvider.ALL_GROUPS=-2,AddonModForumProvider;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0),t(6),t(568),t(354),t(490),t(4),t(145);var o=t(42),r=t(117),i=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},l=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},s=function(){function CorePushNotificationsProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h,m,_,g,v){var C=this;this.appProvider=t,this.initDelegate=o,this.pushNotificationsDelegate=r,this.sitesProvider=i,this.badge=l,this.localNotificationsProvider=s,this.utils=a,this.textUtils=u,this.push=d,this.configProvider=c,this.device=p,this.zone=f,this.translate=h,this.platform=m,this.sitesFactory=_,this.filterProvider=g,this.filterDelegate=v,this.appTablesSchema={name:"CorePushNotificationsProvider",version:1,tables:[{name:e.BADGE_TABLE,columns:[{name:"siteid",type:"TEXT"},{name:"addon",type:"TEXT"},{name:"number",type:"INTEGER"}],primaryKeys:["siteid","addon"]},{name:e.PENDING_UNREGISTER_TABLE,columns:[{name:"siteid",type:"TEXT",primaryKey:!0},{name:"siteurl",type:"TEXT"},{name:"token",type:"TEXT"},{name:"info",type:"TEXT"}]}]},this.siteSchema={name:"AddonPushNotificationsProvider",version:1,tables:[{name:e.REGISTERED_DEVICES_TABLE,columns:[{name:"appid",type:"TEXT"},{name:"uuid",type:"TEXT"},{name:"name",type:"TEXT"},{name:"model",type:"TEXT"},{name:"platform",type:"TEXT"},{name:"version",type:"TEXT"},{name:"pushid",type:"TEXT"}],primaryKeys:["appid","uuid"]}]},this.logger=n.getInstance("CorePushNotificationsProvider"),this.appDB=t.getDB(),this.dbReady=t.createTablesFromSchema(this.appTablesSchema).catch(function(){}),this.sitesProvider.registerSiteSchema(this.siteSchema),m.ready().then(function(){C.createDefaultChannel(),h.onLangChange.subscribe(function(e){C.createDefaultChannel()})})}return e=CorePushNotificationsProvider,CorePushNotificationsProvider.prototype.canRegisterOnMoodle=function(){return this.pushID&&this.appProvider.isMobile()},CorePushNotificationsProvider.prototype.cleanSiteCounters=function(n){return i(this,void 0,void 0,function(){return l(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,,4,5]),[4,this.appDB.deleteRecords(e.BADGE_TABLE,{siteid:n})];case 3:return t.sent(),[3,5];case 4:return this.updateAppCounter(),[7];case 5:return[2]}})})},CorePushNotificationsProvider.prototype.createDefaultChannel=function(){var e=this;return this.platform.is("android")?this.push.createChannel({id:"PushPluginChannel",description:this.translate.instant("core.misc"),importance:4}).catch(function(n){e.logger.error("Error changing push channel name",n)}):Promise.resolve()},CorePushNotificationsProvider.prototype.enableAnalytics=function(e){var n=this,t=window;return r.a.enableanalytics&&t.PushNotification&&t.PushNotification.enableAnalytics?new Promise(function(o,r){t.PushNotification.enableAnalytics(o,function(t){n.logger.error("Error enabling or disabling Firebase analytics",e,t),o()},!!e)}):Promise.resolve()},CorePushNotificationsProvider.prototype.getOptions=function(){return(this.localNotificationsProvider.canDisableSound()?this.configProvider.get(o.a.SETTINGS_NOTIFICATION_SOUND,!0):Promise.resolve(!0)).then(function(e){return{android:{sound:!!e,icon:"smallicon",iconColor:r.a.notificoncolor},ios:{alert:"true",badge:!0,sound:!!e},windows:{sound:!!e}}})},CorePushNotificationsProvider.prototype.getPushId=function(){return this.pushID},CorePushNotificationsProvider.prototype.getRegisterData=function(){return{appid:r.a.app_id,name:this.device.manufacturer||"",model:this.device.model,platform:this.device.platform+"-fcm",version:this.device.version,pushid:this.pushID,uuid:this.device.uuid}},CorePushNotificationsProvider.prototype.getSiteCounter=function(e){return this.getAddonBadge(e)},CorePushNotificationsProvider.prototype.logEvent=function(e,n,t){var i=this,l=window;return r.a.enableanalytics&&l.PushNotification&&l.PushNotification.logEvent?this.configProvider.get(o.a.SETTINGS_ANALYTICS_ENABLED,!0).then(function(o){if(o)return new Promise(function(o,r){l.PushNotification.logEvent(o,function(n){i.logger.error("Error logging firebase event",e,n),o()},e,n,!!t)})}):Promise.resolve()},CorePushNotificationsProvider.prototype.logViewEvent=function(e,n,t,o,r,i){return r=r||{},r=this.utils.prefixKeys(r,"moodle"),r.moodleaction=o,r.moodlesiteid=i||this.sitesProvider.getCurrentSiteId(),e&&(r.item_id=e),n&&(r.item_name=n),t&&(r.item_category=t),this.logEvent("view_item",r,!1)},CorePushNotificationsProvider.prototype.logViewListEvent=function(e,n,t,o){return t=t||{},t=this.utils.prefixKeys(t,"moodle"),t.moodleaction=n,t.moodlesiteid=o||this.sitesProvider.getCurrentSiteId(),e&&(t.item_category=e),this.logEvent("view_item_list",t,!1)},CorePushNotificationsProvider.prototype.notificationClicked=function(e){var n=this;this.initDelegate.ready().then(function(){n.pushNotificationsDelegate.clicked(e)})},CorePushNotificationsProvider.prototype.onMessageReceived=function(n){var t=this,o=n?n.additionalData:{};this.sitesProvider.getSite(o.site).then(function(r){if("string"==typeof o.customdata&&(o.customdata=t.textUtils.parseJSON(o.customdata,{})),t.utils.isTrueOrOne(o.foreground)){if(t.localNotificationsProvider.isAvailable()){var i={id:o.notId||1,data:o,title:"",text:"",channel:"PushPluginChannel"},l={clean:!0,singleLine:!0,contextLevel:"system",instanceId:0,filter:!0},s=t.platform.is("android"),a=t.utils.isTrueOrOne(o.extrafeatures);t.filterProvider.canGetAvailableInContext(r.getId()).then(function(e){return e?t.filterProvider.getAvailableInContext(l.contextLevel,l.instanceId,r.getId()):t.filterDelegate.getEnabledFilters(l.contextLevel,l.instanceId)}).catch(function(){return[]}).then(function(u){var d=[];d.push(t.filterProvider.formatText(n.title,l,u,r.getId()).then(function(e){i.title=e}).catch(function(){i.title=n.title})),d.push(t.filterProvider.formatText(n.message,l,u,r.getId()).catch(function(){return n.message}).then(function(e){i.text=a&&s&&t.utils.isFalseOrZero(o.notif)?[{message:e,person:2==o.conversationtype?o.userfromfullname:""}]:e})),a&&s&&(i.icon=n.image,i.iconType=o["image-type"]),Promise.all(d).then(function(){t.localNotificationsProvider.schedule(i,e.COMPONENT,o.site,!0)})})}t.initDelegate.ready().then(function(){o.title=n.title,o.message=n.message,t.pushNotificationsDelegate.received(o)})}else t.notificationClicked(o)})},CorePushNotificationsProvider.prototype.unregisterDeviceOnMoodle=function(n){return i(this,void 0,void 0,function(){var t,o,i,s;return l(this,function(l){switch(l.label){case 0:return n&&this.appProvider.isMobile()?[4,this.dbReady]:[2,Promise.reject(null)];case 1:l.sent(),this.logger.debug("Unregister device on Moodle: '"+n.id+"'"),t={appid:r.a.app_id,uuid:this.device.uuid},l.label=2;case 2:return l.trys.push([2,4,,7]),[4,n.write("core_user_remove_user_device",t)];case 3:if(!(o=l.sent())||!o.removed)throw null;return(i=[]).push(n.getDb().deleteRecords(e.REGISTERED_DEVICES_TABLE,this.getRegisterData())),i.push(this.appDB.deleteRecords(e.PENDING_UNREGISTER_TABLE,{siteid:n.id})),[2,Promise.all(i).catch(function(){})];case 4:return s=l.sent(),this.utils.isWebServiceError(s)?[3,6]:[4,this.appDB.insertRecord(e.PENDING_UNREGISTER_TABLE,{siteid:n.id,siteurl:n.getURL(),token:n.getToken(),info:JSON.stringify(n.getInfo())})];case 5:l.sent(),l.label=6;case 6:throw s;case 7:return[2]}})})},CorePushNotificationsProvider.prototype.updateAddonCounter=function(e,n,t){var o=this;return this.pushNotificationsDelegate.isCounterHandlerRegistered(e)?(t=t||this.sitesProvider.getCurrentSiteId(),this.saveAddonBadge(n,t,e).then(function(){return o.updateSiteCounter(t).then(function(){return n})})):Promise.resolve(0)},CorePushNotificationsProvider.prototype.updateAppCounter=function(){var e=this;return this.sitesProvider.getSitesIds().then(function(n){var t=[];return n.forEach(function(n){t.push(e.getAddonBadge(n))}),Promise.all(t).then(function(n){var t=n.reduce(function(e,n){return e+parseInt(n,10)},0);return e.appProvider.isDesktop()||e.appProvider.isMobile()?e.badge.set(t).then(function(){return t}):t})})},CorePushNotificationsProvider.prototype.updateSiteCounter=function(e){var n=this,t=this.pushNotificationsDelegate.getCounterHandlers(),o=[];for(var r in t)o.push(this.getAddonBadge(e,t[r]));return Promise.all(o).then(function(t){var o=!1,r=t.reduce(function(e,n){return n!=parseInt(n,10)&&(o=!0,n=parseInt(n,10)),e+n},0);return r=o&&r>0?r+"+":r,n.saveAddonBadge(r,e)}).then(function(e){return n.updateAppCounter().then(function(){return e})})},CorePushNotificationsProvider.prototype.registerDevice=function(){var e=this;try{return this.getOptions().then(function(n){var t=e.push.init(n);t.on("notification").subscribe(function(n){e.zone.run(function(){e.logger.log("Received a notification",n),e.onMessageReceived(n)})}),t.on("registration").subscribe(function(n){e.zone.run(function(){e.pushID=n.registrationId,e.sitesProvider.isLoggedIn()&&e.registerDeviceOnMoodle().catch(function(n){e.logger.warn("Can't register device",n)})})}),t.on("error").subscribe(function(n){e.zone.run(function(){e.logger.warn("Error with Push plugin",n)})})})}catch(e){this.logger.warn(e)}return Promise.reject(null)},CorePushNotificationsProvider.prototype.registerDeviceOnMoodle=function(n,t){return i(this,void 0,void 0,function(){var o,r,i;return l(this,function(l){switch(l.label){case 0:return this.logger.debug("Register device on Moodle."),this.canRegisterOnMoodle()?[4,this.dbReady]:[2,Promise.reject(null)];case 1:return l.sent(),o=this.getRegisterData(),[4,this.sitesProvider.getSite(n)];case 2:i=l.sent(),l.label=3;case 3:return l.trys.push([3,,14,16]),t?(r={unregister:!0,register:!0},[3,6]):[3,4];case 4:return[4,this.shouldRegister(o,i)];case 5:r=l.sent(),l.label=6;case 6:return r.unregister?[4,this.unregisterDeviceOnMoodle(i).catch(function(){})]:[3,8];case 7:l.sent(),l.label=8;case 8:return r.register?[4,i.write("core_user_add_user_device",this.utils.clone(o))]:[3,13];case 9:l.sent(),l.label=10;case 10:return l.trys.push([10,12,,13]),[4,i.getDb().insertRecord(e.REGISTERED_DEVICES_TABLE,o)];case 11:return l.sent(),[3,13];case 12:return l.sent(),[3,13];case 13:return[3,16];case 14:return[4,this.appDB.deleteRecords(e.PENDING_UNREGISTER_TABLE,{siteid:i.id}).catch(function(){})];case 15:return l.sent(),[7];case 16:return[2]}})})},CorePushNotificationsProvider.prototype.getAddonBadge=function(n,t){return void 0===t&&(t="site"),i(this,void 0,void 0,function(){var o;return l(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.appDB.getRecord(e.BADGE_TABLE,{siteid:n,addon:t})];case 3:return o=r.sent(),[2,o&&o.number||0];case 4:return r.sent(),[2,0];case 5:return[2]}})})},CorePushNotificationsProvider.prototype.retryUnregisters=function(n){return i(this,void 0,void 0,function(){var t,o=this;return l(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:return r.sent(),n?[4,this.appDB.getRecords(e.PENDING_UNREGISTER_TABLE,{siteid:n})]:[3,3];case 2:return t=r.sent(),[3,5];case 3:return[4,this.appDB.getAllRecords(e.PENDING_UNREGISTER_TABLE)];case 4:t=r.sent(),r.label=5;case 5:return[2,Promise.all(t.map(function(e){var n=o.sitesFactory.makeSite(e.siteid,e.siteurl,e.token,o.textUtils.parseJSON(e.info,{}));return o.unregisterDeviceOnMoodle(n)}))]}})})},CorePushNotificationsProvider.prototype.saveAddonBadge=function(n,t,o){return void 0===o&&(o="site"),i(this,void 0,void 0,function(){var r;return l(this,function(i){switch(i.label){case 0:return[4,this.dbReady];case 1:return i.sent(),t=t||this.sitesProvider.getCurrentSiteId(),r={siteid:t,addon:o,number:n},[4,this.appDB.insertRecord(e.BADGE_TABLE,r)];case 2:return i.sent(),[2,n]}})})},CorePushNotificationsProvider.prototype.shouldRegister=function(n,t){return t.getDb().getRecords(e.REGISTERED_DEVICES_TABLE,{appid:n.appid,uuid:n.uuid}).catch(function(){return[]}).then(function(e){var t=!1,o=!1;return e.forEach(function(e){e.name==n.name&&e.model==n.model&&e.platform==n.platform&&(e.version==n.version&&e.pushid==n.pushid?t=!0:o=!0)}),t?{register:!1,unregister:!1}:o?{register:!0,unregister:!1}:{register:!0,unregister:!0}})},CorePushNotificationsProvider.COMPONENT="CorePushNotificationsProvider",CorePushNotificationsProvider.BADGE_TABLE="addon_pushnotifications_badge",CorePushNotificationsProvider.PENDING_UNREGISTER_TABLE="addon_pushnotifications_pending_unregister",CorePushNotificationsProvider.REGISTERED_DEVICES_TABLE="addon_pushnotifications_registered_devices",CorePushNotificationsProvider;var e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(129),r=(t(74),function(){function CoreQuestionHelperProvider(e,n,t,o,r,i,l,s,a){this.domUtils=e,this.textUtils=n,this.questionProvider=t,this.sitesProvider=o,this.translate=r,this.urlUtils=i,this.utils=l,this.filepoolProvider=s,this.questionDelegate=a,this.lastErrorShown=0}return CoreQuestionHelperProvider.prototype.addBehaviourButton=function(e,n){n&&e&&(e.behaviourButtons||(e.behaviourButtons=[]),e.behaviourButtons.push({id:n.id,name:n.name,value:n.value,disabled:n.disabled}))},CoreQuestionHelperProvider.prototype.extractQbehaviourButtons=function(e,n){var t=this;if(!this.questionDelegate.getPreventSubmitMessage(e)){n=n||'.im-controls input[type="submit"]';var o=this.domUtils.convertToElement(e.html);Array.from(o.querySelectorAll(n)).forEach(function(n){t.addBehaviourButton(e,n)})}},CoreQuestionHelperProvider.prototype.extractQbehaviourCBM=function(e){var n=this,t=this.domUtils.convertToElement(e.html),o=Array.from(t.querySelectorAll('.im-controls .certaintychoices label[for*="certainty"]'));return e.behaviourCertaintyOptions=[],o.forEach(function(t){var o=t.querySelector('input[type="radio"]');o&&(e.behaviourCertaintyOptions.push({id:o.id,name:o.name,value:o.value,text:n.textUtils.cleanTags(t.innerHTML),disabled:o.disabled}),o.checked&&(e.behaviourCertaintySelected=o.value))}),e.localAnswers&&void 0!==e.localAnswers["-certainty"]&&(e.behaviourCertaintySelected=e.localAnswers["-certainty"]),o.length>0},CoreQuestionHelperProvider.prototype.extractQbehaviourRedoButton=function(e){var n='input[type="submit"][name*=redoslot], input[type="submit"][name*=tryagain]';if(!this.searchBehaviourButton(e,"html",".outcome "+n)){if(e.feedbackHtml&&this.searchBehaviourButton(e,"feedbackHtml",n))return;e.infoHtml&&this.searchBehaviourButton(e,"infoHtml",n)}},CoreQuestionHelperProvider.prototype.extractQbehaviourSeenInput=function(e){var n=this.domUtils.convertToElement(e.html),t=n.querySelector('input[type="hidden"][name*=seen]');return!!t&&(e.behaviourSeenInput={name:t.name,value:t.value},t.parentElement.removeChild(t),e.html=n.innerHTML,!0)},CoreQuestionHelperProvider.prototype.extractQuestionComment=function(e){this.extractQuestionLastElementNotInContent(e,".comment","commentHtml")},CoreQuestionHelperProvider.prototype.extractQuestionFeedback=function(e){this.extractQuestionLastElementNotInContent(e,".outcome","feedbackHtml")},CoreQuestionHelperProvider.prototype.extractQuestionInfoBox=function(e,n){this.extractQuestionLastElementNotInContent(e,n,"infoHtml")},CoreQuestionHelperProvider.prototype.extractQuestionLastElementNotInContent=function(e,n,t){for(var o=this.domUtils.convertToElement(e.html),r=Array.from(o.querySelectorAll(n)),i=r.pop();i;){if(!this.domUtils.closest(i,".formulation"))return e[t]=i.innerHTML,i.parentElement.removeChild(i),void(e.html=o.innerHTML);i=r.pop()}},CoreQuestionHelperProvider.prototype.extractQuestionScripts=function(e,n){var t=this;if(e.scriptsCode="",e.initObjects=null,e.amdArgs=null,e.html){var o=e.html.match(/<script[^>]*>[\s\S]*?<\/script>/gm);if(!o)return;o.forEach(function(o){e.scriptsCode+=o,e.html=e.html.replace(o,"");var r=o.match(new RegExp("M.qtype_"+e.type+".init_question\\(.*?}\\);","mg"));if(r){var i=r.pop();i=(i=i.replace("M.qtype_"+e.type+".init_question(","")).substr(0,i.length-2),e.initObjects=t.textUtils.parseJSON(i,null)}var l=new RegExp("require\\(\\[[\"']qtype_"+e.type+"/question[\"']\\], ?function\\(amd\\) ?\\{ ?amd\\.init\\(([\"'](q|question-"+n+"-)"+e.slot+"[\"'].*?)\\);","m"),s=o.match(l);s&&(e.amdArgs=t.textUtils.parseJSON("["+s[1]+"]",null))})}},CoreQuestionHelperProvider.prototype.getAllInputNamesFromHtml=function(e){var n=this,t=this.domUtils.convertToElement("<form>"+e+"</form>").children[0],o={};return Array.from(t.elements).forEach(function(e){var t=e.name||"";t&&!t.match(/_:flagged$/)&&"submit"!=e.type&&"BUTTON"!=e.tagName&&(o[n.questionProvider.removeQuestionPrefix(t)]=!0)}),o},CoreQuestionHelperProvider.prototype.getAnswersFromForm=function(e){if(!e||!e.elements)return{};var n={};return Array.from(e.elements).forEach(function(e){var t=e.name||e.getAttribute("ng-reflect-name")||"";t&&!t.match(/_:flagged$/)&&"submit"!=e.type&&"BUTTON"!=e.tagName&&("checkbox"==e.type?n[t]=!!e.checked:"radio"==e.type?e.checked&&(n[t]=e.value):n[t]=e.value)}),n},CoreQuestionHelperProvider.prototype.getQuestionAttachmentsFromHtml=function(e){var n=this,t=this.domUtils.convertToElement(e);this.domUtils.removeElement(t,"div[id*=filemanager]");var o=[];return Array.from(t.querySelectorAll("a")).forEach(function(e){var t=e.innerHTML;e.href&&t&&(t=n.textUtils.cleanTags(t,!0).trim(),o.push({filename:t,fileurl:e.href}))}),o},CoreQuestionHelperProvider.prototype.getQuestionSequenceCheckFromHtml=function(e){if(e){var n=this.domUtils.convertToElement(e).querySelector("input[name*=sequencecheck]");if(n&&void 0!==n.name&&void 0!==n.value)return{name:n.name,value:n.value}}},CoreQuestionHelperProvider.prototype.getQuestionStateClass=function(e){var n=this.questionProvider.getState(e);return n?n.class:""},CoreQuestionHelperProvider.prototype.getValidationErrorFromHtml=function(e){var n=this.domUtils.convertToElement(e);return this.domUtils.getContentsOfElement(n,".validationerror")},CoreQuestionHelperProvider.prototype.hasDraftFileUrls=function(e){var n=this.sitesProvider.getCurrentSite().getURL();return"/"!=n.slice(-1)&&(n=n+="/"),n+="draftfile.php",-1!=e.indexOf(n)},CoreQuestionHelperProvider.prototype.loadLocalAnswersInHtml=function(e){var n=this,t=this.domUtils.convertToElement("<form>"+e.html+"</form>").children[0];Array.from(t.elements).forEach(function(t){var o=t.name||"";if(o&&!o.match(/_:flagged$/)&&"submit"!=t.type&&"BUTTON"!=t.tagName&&(o=n.questionProvider.removeQuestionPrefix(o),e.localAnswers&&void 0!==e.localAnswers[o]))if("TEXTAREA"==t.tagName)t.innerHTML=e.localAnswers[o];else if("SELECT"==t.tagName){var r=t.querySelector('option[value="'+e.localAnswers[o]+'"]');r&&r.setAttribute("selected","selected")}else"radio"==t.type?t.value==e.localAnswers[o]?t.setAttribute("checked","checked"):t.removeAttribute("checked"):"checkbox"==t.type?n.utils.isTrueOrOne(e.localAnswers[o])?t.setAttribute("checked","checked"):t.removeAttribute("checked"):t.setAttribute("value",e.localAnswers[o])}),e.html=t.innerHTML},CoreQuestionHelperProvider.prototype.prefetchQuestionFiles=function(e,n,t,r,i){var l=this,s=this.filepoolProvider.extractDownloadableFilesFromHtml(e.html);return n||(n=o.a.COMPONENT,t=e.id),s.push.apply(s,this.questionDelegate.getAdditionalDownloadableFiles(e,i)),this.sitesProvider.getSite(r).then(function(e){var o=[];return s.forEach(function(i){!e.canDownloadFiles()&&l.urlUtils.isPluginFileUrl(i)||i.indexOf("theme/image.php")>-1&&i.indexOf("flagged")>-1||o.push(l.filepoolProvider.addToQueueByUrl(r,i,n,t))}),Promise.all(o)})},CoreQuestionHelperProvider.prototype.prepareAnswers=function(e,n,t,o){var r=this,i=[];return(e=e||[]).forEach(function(e){i.push(r.questionDelegate.prepareAnswersForQuestion(e,n,t,o))}),this.utils.allPromises(i).then(function(){return n})},CoreQuestionHelperProvider.prototype.replaceCorrectnessClasses=function(e){this.domUtils.replaceClassesInElement(e,{correct:"core-question-answer-correct",incorrect:"core-question-answer-incorrect"})},CoreQuestionHelperProvider.prototype.replaceFeedbackClasses=function(e){this.domUtils.replaceClassesInElement(e,{outcome:"core-question-feedback-container core-question-feedback-padding",specificfeedback:"core-question-feedback-container core-question-feedback-inline"})},CoreQuestionHelperProvider.prototype.searchBehaviourButton=function(e,n,t){var o=this.domUtils.convertToElement(e[n]),r=o.querySelector(t);return!!r&&(this.addBehaviourButton(e,r),r.parentElement.removeChild(r),e[n]=o.innerHTML,!0)},CoreQuestionHelperProvider.prototype.showComponentError=function(e,n){var t=Date.now();t-this.lastErrorShown>500&&(this.lastErrorShown=t,this.domUtils.showErrorModalDefault(n,"addon.mod_quiz.errorparsequestions",!0)),e&&e.emit()},CoreQuestionHelperProvider.prototype.treatCorrectnessIcons=function(e){Array.from(e.querySelectorAll("img.icon, img.questioncorrectnessicon")).forEach(function(e){if(e.src){var n=document.createElement("i");if(e.src.indexOf("incorrect")>-1)n.className="icon fa fa-remove text-danger fa-fw questioncorrectnessicon";else{if(!(e.src.indexOf("correct")>-1))return;n.className="icon fa fa-check text-success fa-fw questioncorrectnessicon"}n.title=e.title,n.ariaLabel=e.title,e.parentNode.replaceChild(n,e)}});Array.from(e.querySelectorAll(".feedbackspan.accesshide")).forEach(function(e){var n=e.previousSibling;n&&(n.classList.contains("icon")||n.classList.contains("questioncorrectnessicon"))&&(n.classList.add("questioncorrectnessicon"),e.innerHTML&&n.setAttribute("tappable",""))})},CoreQuestionHelperProvider.prototype.treatCorrectnessIconsClicks=function(e,n,t,o,r,i){var l=this,s=Array.from(e.querySelectorAll("i.icon.questioncorrectnessicon[tappable]")),a=this.translate.instant("core.question.feedback");s.forEach(function(e){var s=e.parentElement.querySelector(".feedbackspan.accesshide");s&&e.addEventListener("click",function(e){l.textUtils.expandText(a,s.innerHTML,n,t,[],!0,o,r,i)})})},CoreQuestionHelperProvider}())},,,,function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(42),r=t(1059),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),l=function(e){function CoreCourseActivityPrefetchHandlerBase(){return null!==e&&e.apply(this,arguments)||this}return i(CoreCourseActivityPrefetchHandlerBase,e),CoreCourseActivityPrefetchHandlerBase.prototype.download=function(e,n,t){return this.prefetch(e,n,!1,t)},CoreCourseActivityPrefetchHandlerBase.prototype.prefetch=function(e,n,t,o){return Promise.resolve()},CoreCourseActivityPrefetchHandlerBase.prototype.prefetchPackage=function(e,n,t,o,r){for(var i=this,l=[],s=5;s<arguments.length;s++)l[s-5]=arguments[s];if(r=r||this.sitesProvider.getCurrentSiteId(),!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));if(this.isDownloading(e.id,r))return this.getOngoingDownload(e.id,r);var a=this.setDownloading(e.id,r).then(function(){return Promise.all([i.courseProvider.getModuleBasicInfo(e.id,r),i.courseProvider.getModule(e.id,n,void 0,!1,!0,r),i.filterHelper.getFilters("module",e.id,{courseId:n})])}).then(function(){return o.apply(o,[e,n,t,r].concat(l))}).then(function(n){return"string"!=typeof n&&(n=""),i.setDownloaded(e.id,r,n)}).catch(function(n){return i.setPreviousStatusAndReject(e.id,n,r)});return this.addOngoingDownload(e.id,a,r)},CoreCourseActivityPrefetchHandlerBase.prototype.setDownloaded=function(e,n,t){return n=n||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.storePackageStatus(n,o.a.DOWNLOADED,this.component,e,t)},CoreCourseActivityPrefetchHandlerBase.prototype.setDownloading=function(e,n){return n=n||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.storePackageStatus(n,o.a.DOWNLOADING,this.component,e)},CoreCourseActivityPrefetchHandlerBase.prototype.setPreviousStatusAndReject=function(e,n,t){return t=t||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.setPackagePreviousStatus(t,this.component,e).then(function(){return Promise.reject(n)})},CoreCourseActivityPrefetchHandlerBase}(r.a)},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(147),r=(t.n(o),function(){function CorePushNotificationsDelegate(e,n,t){this.sitesProvider=n,this.utils=t,this.observables={},this.clickHandlers={},this.counterHandlers={},this.logger=e.getInstance("CorePushNotificationsDelegate"),this.observables.receive=new o.Subject}return CorePushNotificationsDelegate.prototype.clicked=function(e){if(e){var n=[],t=[],o=function(o){var i=r.clickHandlers[o];n.push(r.isFeatureDisabled(i,e.site).then(function(n){if(!n)return Promise.resolve(i.handles(e)).then(function(e){e&&t.push(i)})}))},r=this;for(var i in this.clickHandlers)o(i);return this.utils.allPromises(n).catch(function(){}).then(function(){(t=t.sort(function(e,n){return e.priority<=n.priority?1:-1}))[0]&&t[0].handleClick(e)})}},CorePushNotificationsDelegate.prototype.isFeatureDisabled=function(e,n){return e.featureName?this.sitesProvider.isFeatureDisabled(e.featureName,n):Promise.resolve(!1)},CorePushNotificationsDelegate.prototype.received=function(e){this.observables.receive.next(e)},CorePushNotificationsDelegate.prototype.on=function(e){if(void 0===this.observables[e]){var n=Object.keys(this.observables).join(", ");return this.logger.warn("'"+e+"' event name is not allowed. Use one of the following: '"+n+"'."),new o.Subject}return this.observables[e]},CorePushNotificationsDelegate.prototype.registerClickHandler=function(e){return void 0!==this.clickHandlers[e.name]?(this.logger.log("Addon '"+e.name+"' already registered"),!1):(this.logger.log("Registered addon '"+e.name+"'"),this.clickHandlers[e.name]=e,!0)},CorePushNotificationsDelegate.prototype.registerCounterHandler=function(e){void 0===this.counterHandlers[e]?(this.logger.debug("Registered handler '"+e+"' as badge counter handler."),this.counterHandlers[e]=e):this.logger.log("Handler '"+e+"' as badge counter handler already registered.")},CorePushNotificationsDelegate.prototype.isCounterHandlerRegistered=function(e){return void 0!==this.counterHandlers[e]},CorePushNotificationsDelegate.prototype.getCounterHandlers=function(){return this.counterHandlers},CorePushNotificationsDelegate}())},,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreSyncBaseProvider(e,n,t,o,r,i,l,s){this.sitesProvider=t,this.appProvider=o,this.syncProvider=r,this.textUtils=i,this.translate=l,this.timeUtils=s,this.component="core",this.syncInterval=3e5,this.syncPromises={},this.logger=n.getInstance(e),this.component=e}return CoreSyncBaseProvider.prototype.addOngoingSync=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=this.getUniqueSyncId(e);return this.syncPromises[t]||(this.syncPromises[t]={}),this.syncPromises[t][r]=n,n.finally(function(){delete o.syncPromises[t][r]})},CoreSyncBaseProvider.prototype.getOngoingSync=function(e,n){if(n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,n)){var t=this.getUniqueSyncId(e);return this.syncPromises[n][t]}},CoreSyncBaseProvider.prototype.getReadableSyncTime=function(e,n){var t=this;return this.getSyncTime(e,n).then(function(e){return t.getReadableTimeFromTimestamp(e)})},CoreSyncBaseProvider.prototype.getReadableTimeFromTimestamp=function(e){return e?this.timeUtils.userDate(e):this.translate.instant("core.never")},CoreSyncBaseProvider.prototype.getSyncTime=function(e,n){return this.syncProvider.getSyncRecord(this.component,e,n).then(function(e){return e.time}).catch(function(){return 0})},CoreSyncBaseProvider.prototype.getSyncWarnings=function(e,n){var t=this;return this.syncProvider.getSyncRecord(this.component,e,n).then(function(e){return t.textUtils.parseJSON(e.warnings,[])}).catch(function(){return[]})},CoreSyncBaseProvider.prototype.getUniqueSyncId=function(e){return this.component+"#"+e},CoreSyncBaseProvider.prototype.isSyncing=function(e,n){n=n||this.sitesProvider.getCurrentSiteId();var t=this.getUniqueSyncId(e);return!(!this.syncPromises[n]||!this.syncPromises[n][t])},CoreSyncBaseProvider.prototype.isSyncNeeded=function(e,n){var t=this;return this.getSyncTime(e,n).then(function(e){return Date.now()-t.syncInterval>=e})},CoreSyncBaseProvider.prototype.setSyncTime=function(e,n,t){return t=void 0!==t?t:Date.now(),this.syncProvider.insertOrUpdateSyncRecord(this.component,e,{time:t},n)},CoreSyncBaseProvider.prototype.setSyncWarnings=function(e,n,t){var o=JSON.stringify(n||[]);return this.syncProvider.insertOrUpdateSyncRecord(this.component,e,{warnings:o},t)},CoreSyncBaseProvider.prototype.syncOnSites=function(e,n,t,o){if(!this.appProvider.isOnline())return this.logger.debug("Cannot sync '"+e+"' because device is offline."),Promise.reject(null);var r;return o?(this.logger.debug("Try to sync '"+e+"' in site '"+o+"'."),r=Promise.resolve([o])):(this.logger.debug("Try to sync '"+e+"' in all sites."),r=this.sitesProvider.getLoggedInSitesIds()),t=t||[],r.then(function(e){var o=[];return e.forEach(function(e){o.push(n.apply(n,[e].concat(t)))}),Promise.all(o)})},CoreSyncBaseProvider.prototype.waitForSync=function(e,n){var t=this.getOngoingSync(e,n);return t?t.catch(function(){}):Promise.resolve()},CoreSyncBaseProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(6),t(356),t(4);var o=t(58),r=t(73),i=(t(445),function(){function CoreFileUploaderHelperProvider(e,n,t,o,r,i,l,s,a,u,d,c){this.appProvider=n,this.translate=t,this.fileUploaderProvider=o,this.domUtils=r,this.textUtils=i,this.fileProvider=l,this.utils=s,this.actionSheetCtrl=a,this.uploaderDelegate=u,this.camera=d,this.platform=c,this.logger=e.getInstance("CoreFileUploaderProvider")}return CoreFileUploaderHelperProvider.prototype.confirmUploadFile=function(e,n,t,o,i){if(0==e)return Promise.resolve();if(!t&&!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.fileuploader.errormustbeonlinetoupload"));if(o=void 0===o?r.a.WIFI_SIZE_WARNING:o,i=void 0===i?r.a.LIMITED_SIZE_WARNING:i,e<0)return this.domUtils.showConfirm(this.translate.instant("core.fileuploader.confirmuploadunknownsize"));if(e>=o||this.appProvider.isNetworkAccessLimited()&&e>=i){var l=this.textUtils.bytesToSize(e,2);return this.domUtils.showConfirm(this.translate.instant("core.fileuploader.confirmuploadfile",{size:l}))}return n?this.domUtils.showConfirm(this.translate.instant("core.areyousure")):Promise.resolve()},CoreFileUploaderHelperProvider.prototype.copyAndUploadFile=function(e,n,t){var r=this;t=t||e.name;var i=this.domUtils.showModalLoading("core.fileuploader.readingfile",!0);return this.fileProvider.getUniqueNameInFolder(o.a.TMPFOLDER,t).then(function(n){var t=r.textUtils.concatenatePaths(o.a.TMPFOLDER,n);return r.fileProvider.writeFileDataInFile(e,t,function(e){r.showProgressModal(i,"core.fileuploader.readingfileperc",e)})}).catch(function(e){return r.logger.error("Error reading file to upload.",e),i.dismiss(),Promise.reject(r.translate.instant("core.fileuploader.errorreadingfile"))}).then(function(o){return i.dismiss(),n?r.uploadGenericFile(o.toURL(),t,e.type,!0):o})},CoreFileUploaderHelperProvider.prototype.copyToTmpFolder=function(e,n,t,r,i){var l,s=this,a=i&&i.fileName||this.fileProvider.getFileAndDirectoryFromPath(e).name;return(void 0!==t&&-1!=t?this.fileProvider.getExternalFile(e).then(function(e){return s.fileProvider.getFileObjectFromFileEntry(e).then(function(e){e.size>t&&(l=e)})}).catch(function(){}):Promise.resolve()).then(function(){return l?s.errorMaxBytes(t,l.name):s.fileProvider.getUniqueNameInFolder(o.a.TMPFOLDER,a,r)}).then(function(t){var r=s.textUtils.concatenatePaths(o.a.TMPFOLDER,t);return n?s.fileProvider.moveExternalFile(e,r):s.fileProvider.copyExternalFile(e,r)})},CoreFileUploaderHelperProvider.prototype.errorMaxBytes=function(e,n){var t=this.translate.instant("core.fileuploader.maxbytesfile",{$a:{file:n,size:this.textUtils.bytesToSize(e,2)}});return this.domUtils.showErrorModal(t),Promise.reject(null)},CoreFileUploaderHelperProvider.prototype.filePickerClosed=function(){this.filePickerDeferred&&(this.filePickerDeferred.reject(this.domUtils.createCanceledError()),this.filePickerDeferred=void 0)},CoreFileUploaderHelperProvider.prototype.fileUploaded=function(e){this.filePickerDeferred&&(this.filePickerDeferred.resolve(e),this.filePickerDeferred=void 0),this.actionSheet&&this.actionSheet.dismiss()},CoreFileUploaderHelperProvider.prototype.selectAndUploadFile=function(e,n,t){return this.selectFileWithPicker(e,!1,n,t,!0)},CoreFileUploaderHelperProvider.prototype.selectFile=function(e,n,t,o){return this.selectFileWithPicker(e,n,t,o,!1)},CoreFileUploaderHelperProvider.prototype.selectFileWithPicker=function(e,n,t,o,r){var i=this,l=[{text:this.translate.instant("core.cancel"),role:"cancel",handler:function(){i.filePickerClosed()}}],s=this.uploaderDelegate.getHandlers(o);return this.filePickerDeferred=this.utils.promiseDefer(),s.sort(function(e,n){return e.priority<=n.priority?1:-1}),s.forEach(function(t){l.push({text:i.translate.instant(t.title),icon:t.icon,cssClass:t.class,handler:function(){return!!t.action&&(n||i.appProvider.isOnline()?(t.action(e,r,n,t.mimetypes).then(function(t){return t.treated?t.result:t.fileEntry?i.uploadFileEntry(t.fileEntry,t.delete,e,r,n):t.path?i.fileProvider.getFile(t.path).catch(function(){return i.fileProvider.getExternalFile(t.path)}).then(function(o){return i.uploadFileEntry(o,t.delete,e,r,n)}):Promise.reject("No file received")}).then(function(e){i.fileUploaded(e)}).catch(function(e){e&&i.domUtils.showErrorModal(e)}),!1):(i.domUtils.showErrorModal("core.fileuploader.errormustbeonlinetoupload",!0),!1))}})}),this.actionSheet=this.actionSheetCtrl.create({title:t||this.translate.instant("core.fileuploader."+(r?"uploadafile":"selectafile")),buttons:l}),this.actionSheet.present(),setTimeout(function(){s.forEach(function(t){t.afterRender&&t.afterRender(e,r,n,t.mimetypes)})},500),this.filePickerDeferred.promise},CoreFileUploaderHelperProvider.prototype.showConfirmAndUploadInSite=function(e,n,t){var o=this;return this.fileProvider.getFileObjectFromFileEntry(e).then(function(r){return o.confirmUploadFile(r.size).then(function(){return o.uploadGenericFile(e.toURL(),r.name,r.type,n,t).then(function(){o.domUtils.showToast("core.fileuploader.fileuploaded",!0,void 0,"core-toast-success")})}).catch(function(e){return e&&o.domUtils.showErrorModal(e),Promise.reject(null)})},function(){return o.domUtils.showErrorModal("core.fileuploader.errorreadingfile",!0),Promise.reject(null)})},CoreFileUploaderHelperProvider.prototype.treatCaptureError=function(e,n){if(e){if("string"==typeof e)return this.logger.error("Error while recording audio/video: "+e),e.indexOf("No Activity found")>-1?Promise.reject(this.translate.instant("core.fileuploader.errornoapp")):Promise.reject(this.translate.instant(n));if(3!=e.code){this.logger.error("Error while recording audio/video",e);var t=20==e.code?this.translate.instant("core.fileuploader.errornoapp"):e.message||this.translate.instant(n);return Promise.reject(t)}this.logger.debug("Cancelled")}return Promise.reject(null)},CoreFileUploaderHelperProvider.prototype.treatImageError=function(e,n){if(e){if("string"!=typeof e)return Promise.reject(this.translate.instant(n));if(e.toLowerCase().indexOf("error")>-1||e.toLowerCase().indexOf("unable")>-1)return this.logger.error("Error getting image: "+e),Promise.reject(e);this.logger.debug("Cancelled")}return Promise.reject(null)},CoreFileUploaderHelperProvider.prototype.uploadAudioOrVideo=function(e,n,t,o){var r=this;this.logger.debug("Trying to record a "+(e?"audio":"video")+" file");var i={limit:1,mimetypes:o};return(e?this.fileUploaderProvider.captureAudio(i):this.fileUploaderProvider.captureVideo(i)).then(function(e){var i=e[0],l=i.fullPath,s=r.fileUploaderProvider.isInvalidMimetype(o,l);if(s)return Promise.reject(s);r.appProvider.isMobile()&&-1==l.indexOf("file://")&&(l="file://"+l);var a=r.fileUploaderProvider.getMediaUploadOptions(i);return t?r.uploadFile(l,n,!0,a):r.copyToTmpFolder(l,!0,n,void 0,a)},function(n){return r.treatCaptureError(n,e?"core.fileuploader.errorcapturingaudio":"core.fileuploader.errorcapturingvideo")})},CoreFileUploaderHelperProvider.prototype.uploadGenericFile=function(e,n,t,o,r){var i=this.fileUploaderProvider.getFileUploadOptions(e,n,t,o);return this.uploadFile(e,-1,!1,i,r)},CoreFileUploaderHelperProvider.prototype.uploadImage=function(e,n,t,o){var r=this;this.logger.debug("Trying to capture an image with camera");var i={quality:50,destinationType:this.camera.DestinationType.FILE_URI,correctOrientation:!0};if(e){var l=!o||this.utils.indexOfRegexp(o,/^image\//)>-1,s=!o||this.utils.indexOfRegexp(o,/^video\//)>-1;i.sourceType=this.camera.PictureSourceType.PHOTOLIBRARY,i.popoverOptions={x:10,y:10,width:this.platform.width()-200,height:this.platform.height()-200,arrowDir:this.camera.PopoverArrowDirection.ARROW_ANY},l&&!s?i.mediaType=this.camera.MediaType.PICTURE:!l&&s?i.mediaType=this.camera.MediaType.VIDEO:this.platform.is("ios")&&(i.mediaType=this.camera.MediaType.ALLMEDIA)}else o&&(o.indexOf("image/jpeg")>-1?i.encodingType=this.camera.EncodingType.JPEG:o.indexOf("image/png")>-1&&(i.encodingType=this.camera.EncodingType.PNG));return this.fileUploaderProvider.getPicture(i).then(function(i){var l=r.fileUploaderProvider.isInvalidMimetype(o,i);if(l)return Promise.reject(l);var s=r.fileUploaderProvider.getCameraUploadOptions(i,e);return t?r.uploadFile(i,n,!0,s):r.copyToTmpFolder(i,!e,n,"jpg",s)},function(n){return r.treatImageError(n,e?"core.fileuploader.errorgettingimagealbum":"core.fileuploader.errorcapturingimage")})},CoreFileUploaderHelperProvider.prototype.uploadFileEntry=function(e,n,t,o,r,i){var l=this;return this.fileProvider.getFileObjectFromFileEntry(e).then(function(s){return l.uploadFileObject(s,t,o,r,i).then(function(t){return n&&l.fileProvider.removeFileByFileEntry(e),t})})},CoreFileUploaderHelperProvider.prototype.uploadFileObject=function(e,n,t,o,r){var i=this;return-1!=n&&e.size>n?this.errorMaxBytes(n,e.name):this.confirmUploadFile(e.size,!1,o).then(function(){return i.copyAndUploadFile(e,t,r)})},CoreFileUploaderHelperProvider.prototype.uploadFile=function(e,n,t,o,r){var i,l=this,s=this.translate.instant("core.error"),a=this.translate.instant("core.retry"),u=this.translate.instant("core.fileuploader.uploading"),d=function(i){return l.domUtils.showConfirm(i,s,a).then(function(){return l.uploadFile(e,n,t,o,r)},function(){return o.deleteAfterUpload&&l.fileProvider.removeExternalFile(e),Promise.reject(null)})};return this.appProvider.isOnline()?(t?this.fileProvider.getExternalFile(e).then(function(e){return l.fileProvider.getFileObjectFromFileEntry(e).then(function(e){return(i=e).size})}).catch(function(){}):Promise.resolve(0)).then(function(e){return-1!=n&&e>n?l.errorMaxBytes(n,i.name):e>0?l.confirmUploadFile(e):void 0}).then(function(){var n=l.domUtils.showModalLoading(u);return l.fileUploaderProvider.uploadFile(e,o,function(e){l.showProgressModal(n,"core.fileuploader.uploadingperc",e)},r).catch(function(e){return l.logger.error("Error uploading file.",e),n.dismiss(),"string"!=typeof e&&(e=l.translate.instant("core.fileuploader.errorwhileuploading")),d(e)}).finally(function(){n.dismiss()})}):d(this.translate.instant("core.fileuploader.errormustbeonlinetoupload"))},CoreFileUploaderHelperProvider.prototype.showProgressModal=function(e,n,t){if(t&&t.lengthComputable){var o=Math.min(t.loaded/t.total*100,100);o>=0&&(e.setContent(this.translate.instant(n,{$a:o.toFixed(1)})),e._cmp&&e._cmp.changeDetectorRef&&e._cmp.changeDetectorRef.detectChanges())}},CoreFileUploaderHelperProvider}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(4);var o=t(15),r=(t.n(o),t(426),t(6),t(11)),i=(t(127),t(117)),l=function(){function CoreLangProvider(e,n,t,o,l){var s=this;this.translate=e,this.configProvider=n,this.globalization=o,this.config=l,this.fallbackLanguage="en",this.defaultLanguage=i.a.default_lang||"en",this.customStrings={},this.sitePluginsStrings={},e.setDefaultLang(this.fallbackLanguage),e.use(this.defaultLanguage),t.ready().then(function(){r.a.isAutomated()?s.changeCurrentLanguage("en"):s.getCurrentLanguage().then(function(e){s.changeCurrentLanguage(e)})}),e.onLangChange.subscribe(function(e){t.setLang(e.lang,!0),t.setDir(s.translate.instant("core.thisdirection"),!0)})}return CoreLangProvider.prototype.addSitePluginsStrings=function(e,n,t){e=e.replace(/_/g,"-"),this.sitePluginsStrings[e]||(this.sitePluginsStrings[e]={});for(var o in n){var r=t+o,i=n[o];this.customStrings[e]&&this.customStrings[e][r]||(i=(i=(i=i.replace(/\$a->/gm,"$a.")).replace(/{([^ ]+)}/gm,"{{$1}}")).replace(/{{{([^ ]+)}}}/gm,"{{$1}}"),this.loadString(this.sitePluginsStrings,e,r,i))}},CoreLangProvider.prototype.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},CoreLangProvider.prototype.changeCurrentLanguage=function(e){var n=this,t=[];return t.push(new Promise(function(t,o){var r=n.translate.use(e).subscribe(function(o){var i=n.translate.instant("core.parentlanguage");if(""!=i&&"core.parentlanguage"!=i&&i!=e)var l=n.translate.use(i).subscribe(function(e){o=Object.assign(e,o),t(o),setTimeout(function(){l.unsubscribe()})},function(e){t(o),setTimeout(function(){l.unsubscribe()})});else t(o);setTimeout(function(){r.unsubscribe()})},function(e){o(e),setTimeout(function(){r.unsubscribe()})})})),t.push(this.configProvider.set("current_language",e)),o.locale("en"==e?"en-gb":e),this.config.set("monthNames",o.months().map(this.capitalize.bind(this))),this.config.set("monthShortNames",o.monthsShort().map(this.capitalize.bind(this))),this.config.set("dayNames",o.weekdays().map(this.capitalize.bind(this))),this.config.set("dayShortNames",o.weekdaysShort().map(this.capitalize.bind(this))),this.currentLanguage=e,Promise.all(t).finally(function(){(n.loadLangStrings(n.customStrings,e)||n.loadLangStrings(n.sitePluginsStrings,e))&&n.translate.onLangChange.emit({lang:e,translations:n.translate.translations[e]})})},CoreLangProvider.prototype.clearCustomStrings=function(){this.unloadStrings(this.customStrings),this.customStrings={},this.customStringsRaw=""},CoreLangProvider.prototype.clearSitePluginsStrings=function(){this.unloadStrings(this.sitePluginsStrings),this.sitePluginsStrings={}},CoreLangProvider.prototype.getAllCustomStrings=function(){return this.customStrings},CoreLangProvider.prototype.getAllSitePluginsStrings=function(){return this.sitePluginsStrings},CoreLangProvider.prototype.getCurrentLanguage=function(){var e=this;return void 0!==this.currentLanguage?Promise.resolve(this.currentLanguage):this.configProvider.get("current_language").then(function(e){return e}).catch(function(){if(i.a.default_lang&&i.a.forcedefaultlanguage)return i.a.default_lang;try{return e.globalization.getPreferredLanguage().then(function(n){var t=n.value.toLowerCase();return t.indexOf("-")>-1&&i.a.languages&&void 0===i.a.languages[t]&&(t=t.substr(0,t.indexOf("-"))),void 0===i.a.languages[t]?e.defaultLanguage:t}).catch(function(){return e.defaultLanguage})}catch(n){return Promise.resolve(e.defaultLanguage)}}).then(function(n){return e.currentLanguage=n,n})},CoreLangProvider.prototype.getDefaultLanguage=function(){return this.defaultLanguage},CoreLangProvider.prototype.getFallbackLanguage=function(){return this.fallbackLanguage},CoreLangProvider.prototype.getTranslationTable=function(e){var n=this;return new Promise(function(t,o){var r=n.translate.getTranslation(e).subscribe(function(e){t(e),r.unsubscribe()},function(e){o(e),r.unsubscribe()})})},CoreLangProvider.prototype.loadCustomStrings=function(e){var n=this;if(e!=this.customStringsRaw&&(this.clearCustomStrings(),e)){var t=!1;e.split(/(?:\r\n|\r|\n)/).forEach(function(e){var o,r=e.split("|");if(!(r.length<3)){(o=r[2].replace(/_/g,"-"))==n.currentLanguage&&(t=!0),n.customStrings[o]||(n.customStrings[o]={});var i=r[0].replace(/^mm\.core/,"core").replace(/^mm\./,"core.").replace(/^mma\./,"addon.").replace(/^core\.sidemenu/,"core.mainmenu").replace(/^addon\.grades/,"core.grades").replace(/^addon\.participants/,"core.user");n.loadString(n.customStrings,o,i,r[1])}}),this.customStringsRaw=e,t&&this.translate.onLangChange.emit({lang:this.currentLanguage,translations:this.translate.translations[this.currentLanguage]})}},CoreLangProvider.prototype.loadLangStrings=function(e,n){var t=!1;if(e[n])for(var o in e[n]){var r=e[n][o];r.applied||(r.original=this.translate.translations[n][o],this.translate.translations[n][o]=r.value,r.applied=!0,t=!0)}return t},CoreLangProvider.prototype.loadString=function(e,n,t,o){n=n.replace(/_/g,"-"),this.translate.translations[n]?(e[n][t]={original:this.translate.translations[n][t],value:o,applied:!0},this.translate.translations[n][t]=o):e[n][t]={value:o,applied:!1}},CoreLangProvider.prototype.unloadStrings=function(e){for(var n in e)if(this.translate.translations[n]){var t=e[n];for(var o in t){var r=t[o];r.original?this.translate.translations[n][o]=r.original:delete this.translate.translations[n][o]}}},CoreLangProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return u});t(0),t(6),t(355),t(354),t(4),t(11),t(127);var o=t(10),r=(t(7),t(12),t(3),t(42)),i=t(117),l=t(147),s=(t.n(l),this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})}),a=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},u=function(){function CoreLocalNotificationsProvider(e,n,t,r,i,l,s,a,u,d,c,p){var f=this;this.localNotifications=n,this.platform=t,this.appProvider=r,this.utils=i,this.configProvider=l,this.textUtils=s,this.translate=a,this.alertCtrl=u,this.push=c,this.zone=p,this.SITES_TABLE="notification_sites",this.COMPONENTS_TABLE="notification_components",this.TRIGGERED_TABLE="notifications_triggered",this.tablesSchema={name:"CoreLocalNotificationsProvider",version:1,tables:[{name:this.SITES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"code",type:"INTEGER",notNull:!0}]},{name:this.COMPONENTS_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0},{name:"code",type:"INTEGER",notNull:!0}]},{name:this.TRIGGERED_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"at",type:"INTEGER",notNull:!0}]}]},this.codes={},this.codeRequestsQueue={},this.observables={},this.currentNotification={title:"",texts:[],ids:[],timeouts:[]},this.logger=e.getInstance("CoreLocalNotificationsProvider"),this.appDB=r.getDB(),this.dbReady=r.createTablesFromSchema(this.tablesSchema).catch(function(){}),t.ready().then(function(){f.triggerSubscription=n.on("trigger").subscribe(function(e){f.trigger(e),f.handleEvent("trigger",e)}),f.clickSubscription=n.on("click").subscribe(function(e){f.handleEvent("click",e)}),f.clearSubscription=n.on("clear").subscribe(function(e){f.handleEvent("clear",e)}),f.cancelSubscription=n.on("cancel").subscribe(function(e){f.handleEvent("cancel",e)}),f.addSubscription=n.on("schedule").subscribe(function(e){f.handleEvent("schedule",e)}),f.updateSubscription=n.on("update").subscribe(function(e){f.handleEvent("update",e)}),f.createDefaultChannel(),a.onLangChange.subscribe(function(e){f.createDefaultChannel()})}),d.on(o.a.SITE_DELETED,function(e){e&&f.cancelSiteNotifications(e.id)})}return CoreLocalNotificationsProvider.prototype.cancel=function(e,n,t){var o=this;return this.getUniqueNotificationId(e,n,t).then(function(e){return o.localNotifications.cancel(e)})},CoreLocalNotificationsProvider.prototype.cancelSiteNotifications=function(e){var n=this;return this.isAvailable()?e?this.localNotifications.getScheduled().then(function(t){var o=[];return t.forEach(function(t){"string"==typeof t.data&&(t.data=n.textUtils.parseJSON(t.data)),"object"==typeof t.data&&t.data.siteId===e&&o.push(t.id)}),n.localNotifications.cancel(o)}):Promise.reject(null):Promise.resolve()},CoreLocalNotificationsProvider.prototype.canDisableSound=function(){return this.isAvailable()&&!this.appProvider.isDesktop()&&this.platform.is("android")&&this.platform.version().major<8},CoreLocalNotificationsProvider.prototype.createDefaultChannel=function(){var e=this;return this.platform.is("android")?this.push.createChannel({id:"default-channel-id",description:this.translate.instant("addon.calendar.calendarreminders"),importance:4}).catch(function(n){e.logger.error("Error changing channel name",n)}):Promise.resolve()},CoreLocalNotificationsProvider.prototype.getCode=function(e,n){return s(this,void 0,void 0,function(){var t,o,r,i;return a(this,function(l){switch(l.label){case 0:return[4,this.dbReady];case 1:if(l.sent(),t=e+"#"+n,void 0!==this.codes[t])return[2,this.codes[t]];l.label=2;case 2:return l.trys.push([2,4,,7]),[4,this.appDB.getRecord(e,{id:n})];case 3:return o=l.sent(),this.codes[t]=o.code,[2,o.code];case 4:return l.sent(),[4,this.appDB.getRecords(e,void 0,"code DESC")];case 5:return r=l.sent(),i=0,r.length>0&&(i=r[0].code+1),[4,this.appDB.insertRecord(e,{id:n,code:i})];case 6:return l.sent(),this.codes[t]=i,[2,i];case 7:return[2]}})})},CoreLocalNotificationsProvider.prototype.getComponentCode=function(e){return this.requestCode(this.COMPONENTS_TABLE,e)},CoreLocalNotificationsProvider.prototype.getSiteCode=function(e){return this.requestCode(this.SITES_TABLE,e)},CoreLocalNotificationsProvider.prototype.getUniqueNotificationId=function(e,n,t){var o=this;return t&&n?this.getSiteCode(t).then(function(t){return o.getComponentCode(n).then(function(n){return(1e8*t+1e7*n+e)%2147483647})}):Promise.reject(null)},CoreLocalNotificationsProvider.prototype.handleEvent=function(e,n){n&&n.data&&(this.logger.debug("Notification event: "+e+". Data:",n.data),this.notifyEvent(e,n.data))},CoreLocalNotificationsProvider.prototype.isAvailable=function(){var e=window;return this.appProvider.isDesktop()||!!(e.cordova&&e.cordova.plugins&&e.cordova.plugins.notification&&e.cordova.plugins.notification.local)},CoreLocalNotificationsProvider.prototype.isTriggered=function(e){return s(this,void 0,void 0,function(){var n,t;return a(this,function(o){switch(o.label){case 0:return[4,this.dbReady];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.appDB.getRecord(this.TRIGGERED_TABLE,{id:e.id})];case 3:return n=o.sent(),"number"!=typeof(t=e.trigger&&e.trigger.at||0)&&(t=t.getTime()),[2,n.at===t];case 4:return o.sent(),[2,this.localNotifications.isTriggered(e.id)];case 5:return[2]}})})},CoreLocalNotificationsProvider.prototype.notifyClick=function(e){this.notifyEvent("click",e)},CoreLocalNotificationsProvider.prototype.notifyEvent=function(e,n){var t=this;this.zone.run(function(){var o=n.component;o&&t.observables[e]&&t.observables[e][o]&&t.observables[e][o].next(n)})},CoreLocalNotificationsProvider.prototype.processNextRequest=function(){var e,n=this,t=Object.keys(this.codeRequestsQueue)[0];void 0!==t&&("object"==typeof(e=this.codeRequestsQueue[t])&&void 0!==e.table&&void 0!==e.id?this.getCode(e.table,e.id).then(function(n){e.promises.forEach(function(e){e.resolve(n)})}).catch(function(n){e.promises.forEach(function(e){e.reject(n)})}):Promise.resolve()).finally(function(){delete n.codeRequestsQueue[t],n.processNextRequest()})},CoreLocalNotificationsProvider.prototype.registerClick=function(e,n){return this.registerObserver("click",e,n)},CoreLocalNotificationsProvider.prototype.registerObserver=function(e,n,t){var o=this;return this.logger.debug("Register observer '"+n+"' for event '"+e+"'."),void 0===this.observables[e]&&(this.observables[e]={}),void 0===this.observables[e][n]&&(this.observables[e][n]=new l.Subject),this.observables[e][n].subscribe(t),{off:function(){o.observables[e][n].unsubscribe(t)}}},CoreLocalNotificationsProvider.prototype.removeTriggered=function(e){return s(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[2,this.appDB.deleteRecords(this.TRIGGERED_TABLE,{id:e})]}})})},CoreLocalNotificationsProvider.prototype.requestCode=function(e,n){var t=this.utils.promiseDefer(),o=e+"#"+n,r=0==Object.keys(this.codeRequestsQueue).length;return void 0!==this.codeRequestsQueue[o]?this.codeRequestsQueue[o].promises.push(t):this.codeRequestsQueue[o]={table:e,id:n,promises:[t]},r&&this.processNextRequest(),t.promise},CoreLocalNotificationsProvider.prototype.rescheduleAll=function(){var e=this;return this.localNotifications.getScheduled().then(function(n){var t=[];return n.forEach(function(n){n.data=n.data?e.textUtils.parseJSON(n.data,{}):{},t.push(e.scheduleNotification(n))}),Promise.all(t)})},CoreLocalNotificationsProvider.prototype.schedule=function(e,n,t,o){var r=this;return(o?Promise.resolve(e.id):this.getUniqueNotificationId(e.id,n,t)).then(function(o){if(e.id=o,e.data=e.data||{},e.data.component=n,e.data.siteId=t,r.platform.is("android")){e.icon=e.icon||"res://icon",e.smallIcon=e.smallIcon||"res://smallicon",e.color=e.color||i.a.notificoncolor;var l=e.led||{};e.led={color:l.color||"FF9900",on:l.on||1e3,off:l.off||1e3}}return r.scheduleNotification(e)})},CoreLocalNotificationsProvider.prototype.scheduleNotification=function(e){var n=this;return this.isTriggered(e).then(function(t){return n.localNotifications.cancel(e.id).finally(function(){if(!t){return(n.canDisableSound()?n.configProvider.get(r.a.SETTINGS_NOTIFICATION_SOUND,!0):Promise.resolve(!0)).then(function(t){t?delete e.sound:e.sound=null,e.foreground=!0,n.removeTriggered(e.id),n.localNotifications.schedule(e)})}})})},CoreLocalNotificationsProvider.prototype.showNotificationPopover=function(e){var n=this;if(e&&e.title&&e.text){var t=function(e){if(void 0===e&&(e=!1),!e&&n.alertNotification&&n.currentNotification.ids.length>1){n.currentNotification.texts.shift(),n.currentNotification.ids.shift(),clearTimeout(n.currentNotification.timeouts.shift());var t="<p>"+n.currentNotification.texts.join("</p><p>")+"</p>";n.alertNotification.setMessage(t)}else n.alertNotification&&!e&&n.alertNotification.dismiss(),n.alertNotification=null,n.currentNotification.title="",n.currentNotification.texts=[],n.currentNotification.ids=[],n.currentNotification.timeouts.forEach(function(e){clearTimeout(e)}),n.currentNotification.timeouts=[]};if(this.alertNotification&&this.currentNotification.title==e.title){if(-1!=this.currentNotification.ids.indexOf(e.id))return;this.currentNotification.texts.push(e.text),this.currentNotification.ids.push(e.id),this.currentNotification.texts.length>3&&(this.currentNotification.texts.shift(),this.currentNotification.ids.shift(),clearTimeout(this.currentNotification.timeouts.shift()))}else this.currentNotification.timeouts.forEach(function(e){clearTimeout(e)}),this.currentNotification.timeouts=[],this.currentNotification.title=e.title,this.currentNotification.texts=[e.text],this.currentNotification.ids=[e.id];var o="<p>"+this.currentNotification.texts.join("</p><p>")+"</p>";this.alertNotification?(this.alertNotification.setTitle(this.currentNotification.title),this.alertNotification.setMessage(o)):this.alertNotification=this.alertCtrl.create({title:this.currentNotification.title,message:o,cssClass:"core-inapp-notification",enableBackdropDismiss:!1,buttons:[{text:this.translate.instant("core.dismiss"),role:"cancel",handler:function(){t(!0)}}]}),this.alertNotification.present(),this.currentNotification.timeouts.push(setTimeout(function(){t()},4e3))}},CoreLocalNotificationsProvider.prototype.trigger=function(e){return s(this,void 0,void 0,function(){var n;return a(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),n={id:e.id,at:e.trigger&&e.trigger.at?e.trigger.at:Date.now()},[2,this.appDB.insertRecord(this.TRIGGERED_TABLE,n)]}})})},CoreLocalNotificationsProvider.prototype.updateComponentName=function(e,n){return s(this,void 0,void 0,function(){var t,o;return a(this,function(r){switch(r.label){case 0:return[4,this.dbReady];case 1:return r.sent(),t=this.COMPONENTS_TABLE+"#"+e,o=this.COMPONENTS_TABLE+"#"+n,[2,this.appDB.updateRecords(this.COMPONENTS_TABLE,{id:o},{id:t})]}})})},CoreLocalNotificationsProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(99),i=(t(585),function(e){function AddonModAssignFeedbackDelegate(n,t,o,r){var i=e.call(this,"AddonModAssignFeedbackDelegate",n,t,o)||this;return i.defaultHandler=r,i.handlerNameProperty="type",i}return Object(o.__extends)(AddonModAssignFeedbackDelegate,e),AddonModAssignFeedbackDelegate.prototype.discardPluginFeedbackData=function(e,n,t,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"discardDraft",[e,n,o]))},AddonModAssignFeedbackDelegate.prototype.getComponentForPlugin=function(e,n){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getComponent",[e,n]))},AddonModAssignFeedbackDelegate.prototype.getPluginDraftData=function(e,n,t,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getDraft",[e,n,o]))},AddonModAssignFeedbackDelegate.prototype.getPluginFiles=function(e,n,t,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getPluginFiles",[e,n,t,o]))},AddonModAssignFeedbackDelegate.prototype.getPluginName=function(e){return this.executeFunctionOnEnabled(e.type,"getPluginName",[e])},AddonModAssignFeedbackDelegate.prototype.hasPluginDataChanged=function(e,n,t,o,r){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"hasDataChanged",[e,n,t,o,r]))},AddonModAssignFeedbackDelegate.prototype.hasPluginDraftData=function(e,n,t,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"hasDraftData",[e,n,o]))},AddonModAssignFeedbackDelegate.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},AddonModAssignFeedbackDelegate.prototype.prefetch=function(e,n,t,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"prefetch",[e,n,t,o]))},AddonModAssignFeedbackDelegate.prototype.preparePluginFeedbackData=function(e,n,t,o,r){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"prepareFeedbackData",[e,n,t,o,r]))},AddonModAssignFeedbackDelegate.prototype.saveFeedbackDraft=function(e,n,t,o,r){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"saveDraft",[e,n,t,o,r]))},AddonModAssignFeedbackDelegate}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=(t(388),function(){function CoreCommentsProvider(e,n,t,o){this.sitesProvider=e,this.utils=n,this.appProvider=t,this.commentsOffline=o,this.ROOT_CACHE_KEY="mmComments:"}return e=CoreCommentsProvider,CoreCommentsProvider.prototype.addComment=function(e,n,t,o,r,i,l){var s=this;void 0===i&&(i=""),l=l||this.sitesProvider.getCurrentSiteId();var a=function(){return s.commentsOffline.saveComment(e,n,t,o,r,i,l).then(function(){return!1})};return this.appProvider.isOnline()?this.addCommentOnline(e,n,t,o,r,i,l).then(function(e){return e}).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):a()}):a()},CoreCommentsProvider.prototype.addCommentOnline=function(e,n,t,o,r,i,l){var s=this;void 0===i&&(i="");return this.addCommentsOnline([{contextlevel:n,instanceid:t,component:o,itemid:r,area:i,content:e}],l).then(function(e){return s.invalidateCommentsData(n,t,o,r,i,l).catch(function(){}).then(function(){return e})})},CoreCommentsProvider.prototype.addCommentsOnline=function(e,n){return e&&e.length?this.sitesProvider.getSite(n).then(function(n){return n.write("core_comment_add_comments",{comments:e})}):Promise.resolve()},CoreCommentsProvider.prototype.areCommentsDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_CoreComments")},CoreCommentsProvider.prototype.areCommentsDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.areCommentsDisabledInSite(e)})},CoreCommentsProvider.prototype.deleteComment=function(e,n){var t=this;if(n=n||this.sitesProvider.getCurrentSiteId(),!e.id)return this.commentsOffline.removeComment(e.contextlevel,e.instanceid,e.component,e.itemid,e.area,n).then(function(){return!1});var o=function(){return t.commentsOffline.deleteComment(e.id,e.contextlevel,e.instanceid,e.component,e.itemid,e.area,n).then(function(){return!1})};return this.appProvider.isOnline()?this.deleteCommentsOnline([e.id],e.contextlevel,e.instanceid,e.component,e.itemid,e.area,n).then(function(){return!0}).catch(function(e){return t.utils.isWebServiceError(e)?Promise.reject(e):o()}):o()},CoreCommentsProvider.prototype.deleteCommentsOnline=function(e,n,t,o,r,i,l){var s=this;return void 0===i&&(i=""),this.sitesProvider.getSite(l).then(function(a){return a.write("core_comment_delete_comments",{comments:e}).then(function(e){return s.invalidateCommentsData(n,t,o,r,i,l).catch(function(){})})})},CoreCommentsProvider.prototype.isAddCommentsAvailable=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return!n.areCommentsDisabledInSite(e)&&e.wsAvailable("core_comment_add_comments")})},CoreCommentsProvider.prototype.getCommentsCacheKey=function(e,n,t,o,r){return void 0===r&&(r=""),this.getCommentsPrefixCacheKey(e,n)+":"+t+":"+o+":"+r},CoreCommentsProvider.prototype.getCommentsPrefixCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"comments:"+e+":"+n},CoreCommentsProvider.prototype.getComments=function(n,t,r,i,l,s,a){var u=this;return void 0===l&&(l=""),void 0===s&&(s=0),this.sitesProvider.getSite(a).then(function(a){var d={contextlevel:n,instanceid:t,component:r,itemid:i,area:l,page:s},c={cacheKey:u.getCommentsCacheKey(n,t,r,i,l),updateFrequency:o.a.FREQUENCY_SOMETIMES};return a.read("core_comment_get_comments",d,c).then(function(n){return n.comments?(void 0===n.count&&n.comments.length>e.pageSize&&(e.pageSize=n.comments.length),n):Promise.reject(null)})})},CoreCommentsProvider.prototype.getCommentsCount=function(n,t,o,r,i,l){var s=this;void 0===i&&(i=""),l=l||this.sitesProvider.getCurrentSiteId();var a=!1,u=function(e){return s.getComments(n,t,o,r,i,e,l).then(function(e){return void 0!==e.count?(a=!0,e.count):e.comments?e.comments.length||0:-1}).catch(function(){return-1})};return u(0).then(function(n){return a||n<e.pageSize?n+"":e.pageSizeOK&&n>=e.pageSize?e.pageSize-1+"+":u(1).then(function(t){return t>0?(e.pageSizeOK=!0,e.pageSize-1+"+"):n+""})})},CoreCommentsProvider.prototype.invalidateCommentsData=function(e,n,t,o,r,i){var l=this;return void 0===r&&(r=""),this.sitesProvider.getSite(i).then(function(i){return l.utils.allPromises([i.invalidateWsCacheForKeyStartingWith(l.getCommentsCacheKey(e,n,t,o,r)+":"),i.invalidateWsCacheForKey(l.getCommentsCacheKey(e,n,t,o,r))])})},CoreCommentsProvider.prototype.invalidateCommentsByInstance=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(o.getCommentsPrefixCacheKey(e,n))})},CoreCommentsProvider.REFRESH_COMMENTS_EVENT="core_comments_refresh_comments",CoreCommentsProvider.COMMENTS_COUNT_CHANGED_EVENT="core_comments_count_changed",CoreCommentsProvider.pageSize=1,CoreCommentsProvider.pageSizeOK=!1,CoreCommentsProvider;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(7),t(3);var o=function(){function CoreInitDelegate(e,n,t){this.utils=t,this.initProcesses={},this.logger=e.getInstance("CoreInitDelegate")}return e=CoreInitDelegate,CoreInitDelegate.prototype.executeInitProcesses=function(){var e=this,n=[];void 0===this.readiness&&this.initReadiness();for(var t in this.initProcesses)n.push(this.initProcesses[t]);n.sort(function(e,n){return n.priority-e.priority}),n=n.map(function(n){return{context:e,func:e.prepareProcess,params:[n],blocking:!!n.blocking}}),this.utils.executeOrderedPromises(n).finally(this.readiness.resolve)},CoreInitDelegate.prototype.initReadiness=function(){var e=this;this.readiness=this.utils.promiseDefer(),this.readiness.promise.then(function(){return e.readiness.resolved=!0})},CoreInitDelegate.prototype.isReady=function(){return this.readiness.resolved},CoreInitDelegate.prototype.prepareProcess=function(e){var n;this.logger.debug("Executing init process '"+e.name+"'");try{n=e.load()}catch(n){return void this.logger.error("Error while calling the init process '"+e.name+"'. "+n)}return n},CoreInitDelegate.prototype.ready=function(){return void 0===this.readiness&&this.initReadiness(),this.readiness.promise},CoreInitDelegate.prototype.registerProcess=function(n){void 0===n.priority&&(n.priority=e.DEFAULT_PRIORITY),void 0===this.initProcesses[n.name]?(this.logger.log("Registering process '"+n.name+"'."),this.initProcesses[n.name]=n):this.logger.log("Process '"+n.name+"' already registered.")},CoreInitDelegate.DEFAULT_PRIORITY=100,CoreInitDelegate.MAX_RECOMMENDED_PRIORITY=600,CoreInitDelegate;var e}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return CoreCompileProvider});var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__angular_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__angular_platform_browser_dynamic__=__webpack_require__(593),__WEBPACK_IMPORTED_MODULE_3_ionic_angular__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_4__ngx_translate_core__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_5__providers_logger__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_6__app_app_module__=__webpack_require__(535),__WEBPACK_IMPORTED_MODULE_7__core_block_block_module__=__webpack_require__(594),__WEBPACK_IMPORTED_MODULE_8__core_contentlinks_contentlinks_module__=__webpack_require__(595),__WEBPACK_IMPORTED_MODULE_9__core_course_course_module__=__webpack_require__(596),__WEBPACK_IMPORTED_MODULE_10__core_courses_courses_module__=__webpack_require__(598),__WEBPACK_IMPORTED_MODULE_11__core_fileuploader_fileuploader_module__=__webpack_require__(600),__WEBPACK_IMPORTED_MODULE_12__core_filter_filter_module__=__webpack_require__(601),__WEBPACK_IMPORTED_MODULE_13__core_grades_grades_module__=__webpack_require__(602),__WEBPACK_IMPORTED_MODULE_14__core_h5p_h5p_module__=__webpack_require__(603),__WEBPACK_IMPORTED_MODULE_15__core_login_login_module__=__webpack_require__(606),__WEBPACK_IMPORTED_MODULE_16__core_mainmenu_mainmenu_module__=__webpack_require__(607),__WEBPACK_IMPORTED_MODULE_17__core_question_question_module__=__webpack_require__(608),__WEBPACK_IMPORTED_MODULE_18__core_sharedfiles_sharedfiles_module__=__webpack_require__(611),__WEBPACK_IMPORTED_MODULE_19__core_sitehome_sitehome_module__=__webpack_require__(612),__WEBPACK_IMPORTED_MODULE_20__core_user_user_module__=__webpack_require__(613),__WEBPACK_IMPORTED_MODULE_21__core_pushnotifications_pushnotifications_module__=__webpack_require__(616),__WEBPACK_IMPORTED_MODULE_22__core_emulator_emulator_module__=__webpack_require__(617),__WEBPACK_IMPORTED_MODULE_23__core_editor_editor_module__=__webpack_require__(623),__WEBPACK_IMPORTED_MODULE_24__core_search_search_module__=__webpack_require__(624),__WEBPACK_IMPORTED_MODULE_25__core_siteplugins_providers_siteplugins__=__webpack_require__(59),__WEBPACK_IMPORTED_MODULE_26__angular_platform_browser__=__webpack_require__(80),__WEBPACK_IMPORTED_MODULE_27__angular_forms__=__webpack_require__(24),__WEBPACK_IMPORTED_MODULE_28__angular_common_http__=__webpack_require__(262),__WEBPACK_IMPORTED_MODULE_29__configconstants__=__webpack_require__(117),__WEBPACK_IMPORTED_MODULE_30__core_constants__=__webpack_require__(42),__WEBPACK_IMPORTED_MODULE_31_moment__=__webpack_require__(15),__WEBPACK_IMPORTED_MODULE_31_moment___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_31_moment__),__WEBPACK_IMPORTED_MODULE_32_ts_md5_dist_md5__=__webpack_require__(195),__WEBPACK_IMPORTED_MODULE_32_ts_md5_dist_md5___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_32_ts_md5_dist_md5__),__WEBPACK_IMPORTED_MODULE_33__classes_base_sync__=__webpack_require__(149),__WEBPACK_IMPORTED_MODULE_34__classes_utils_url__=__webpack_require__(1619),__WEBPACK_IMPORTED_MODULE_35__classes_cache__=__webpack_require__(1057),__WEBPACK_IMPORTED_MODULE_36__classes_delegate__=__webpack_require__(99),__WEBPACK_IMPORTED_MODULE_37__core_contentlinks_classes_base_handler__=__webpack_require__(56),__WEBPACK_IMPORTED_MODULE_38__core_contentlinks_classes_module_grade_handler__=__webpack_require__(454),__WEBPACK_IMPORTED_MODULE_39__core_contentlinks_classes_module_index_handler__=__webpack_require__(100),__WEBPACK_IMPORTED_MODULE_40__core_course_classes_activity_prefetch_handler__=__webpack_require__(143),__WEBPACK_IMPORTED_MODULE_41__core_course_classes_resource_prefetch_handler__=__webpack_require__(244),__WEBPACK_IMPORTED_MODULE_42__components_components_module__=__webpack_require__(27),__WEBPACK_IMPORTED_MODULE_43__directives_directives_module__=__webpack_require__(33),__WEBPACK_IMPORTED_MODULE_44__pipes_pipes_module__=__webpack_require__(107),__WEBPACK_IMPORTED_MODULE_45__core_course_components_components_module__=__webpack_require__(75),__WEBPACK_IMPORTED_MODULE_46__core_course_directives_directives_module__=__webpack_require__(1954),__WEBPACK_IMPORTED_MODULE_47__core_courses_components_components_module__=__webpack_require__(277),__WEBPACK_IMPORTED_MODULE_48__core_siteplugins_directives_directives_module__=__webpack_require__(1955),__WEBPACK_IMPORTED_MODULE_49__core_sitehome_components_components_module__=__webpack_require__(1559),__WEBPACK_IMPORTED_MODULE_50__core_user_components_components_module__=__webpack_require__(483),__WEBPACK_IMPORTED_MODULE_51__core_question_components_components_module__=__webpack_require__(1565),__WEBPACK_IMPORTED_MODULE_52__core_block_components_components_module__=__webpack_require__(271),__WEBPACK_IMPORTED_MODULE_53__core_editor_components_components_module__=__webpack_require__(199),__WEBPACK_IMPORTED_MODULE_54__core_search_components_components_module__=__webpack_require__(315),__WEBPACK_IMPORTED_MODULE_55__core_course_components_unsupported_module_unsupported_module__=__webpack_require__(396),__WEBPACK_IMPORTED_MODULE_56__core_course_formats_singleactivity_components_singleactivity__=__webpack_require__(450),__WEBPACK_IMPORTED_MODULE_57__core_siteplugins_components_module_index_module_index__=__webpack_require__(392),__WEBPACK_IMPORTED_MODULE_58__core_siteplugins_components_block_block__=__webpack_require__(455),__WEBPACK_IMPORTED_MODULE_59__core_siteplugins_components_course_option_course_option__=__webpack_require__(456),__WEBPACK_IMPORTED_MODULE_60__core_siteplugins_components_course_format_course_format__=__webpack_require__(457),__WEBPACK_IMPORTED_MODULE_61__core_siteplugins_components_question_question__=__webpack_require__(458),__WEBPACK_IMPORTED_MODULE_62__core_siteplugins_components_question_behaviour_question_behaviour__=__webpack_require__(459),__WEBPACK_IMPORTED_MODULE_63__core_siteplugins_components_user_profile_field_user_profile_field__=__webpack_require__(460),__WEBPACK_IMPORTED_MODULE_64__core_siteplugins_components_quiz_access_rule_quiz_access_rule__=__webpack_require__(461),__WEBPACK_IMPORTED_MODULE_65__core_siteplugins_components_assign_feedback_assign_feedback__=__webpack_require__(462),__WEBPACK_IMPORTED_MODULE_66__core_siteplugins_components_assign_submission_assign_submission__=__webpack_require__(463),__WEBPACK_IMPORTED_MODULE_67__addon_badges_badges_module__=__webpack_require__(626),__WEBPACK_IMPORTED_MODULE_68__addon_calendar_calendar_module__=__webpack_require__(627),__WEBPACK_IMPORTED_MODULE_69__addon_competency_competency_module__=__webpack_require__(628),__WEBPACK_IMPORTED_MODULE_70__addon_files_files_module__=__webpack_require__(629),__WEBPACK_IMPORTED_MODULE_71__addon_messageoutput_messageoutput_module__=__webpack_require__(630),__WEBPACK_IMPORTED_MODULE_72__addon_messages_messages_module__=__webpack_require__(631),__WEBPACK_IMPORTED_MODULE_73__addon_mod_assign_assign_module__=__webpack_require__(634),__WEBPACK_IMPORTED_MODULE_74__addon_mod_book_book_module__=__webpack_require__(645),__WEBPACK_IMPORTED_MODULE_75__addon_mod_chat_chat_module__=__webpack_require__(646),__WEBPACK_IMPORTED_MODULE_76__addon_mod_choice_choice_module__=__webpack_require__(647),__WEBPACK_IMPORTED_MODULE_77__addon_mod_feedback_feedback_module__=__webpack_require__(648),__WEBPACK_IMPORTED_MODULE_78__addon_mod_folder_folder_module__=__webpack_require__(650),__WEBPACK_IMPORTED_MODULE_79__addon_mod_forum_forum_module__=__webpack_require__(651),__WEBPACK_IMPORTED_MODULE_80__addon_mod_glossary_glossary_module__=__webpack_require__(654),__WEBPACK_IMPORTED_MODULE_81__addon_mod_imscp_imscp_module__=__webpack_require__(656),__WEBPACK_IMPORTED_MODULE_82__addon_mod_lesson_lesson_module__=__webpack_require__(657),__WEBPACK_IMPORTED_MODULE_83__addon_mod_lti_lti_module__=__webpack_require__(658),__WEBPACK_IMPORTED_MODULE_84__addon_mod_page_page_module__=__webpack_require__(659),__WEBPACK_IMPORTED_MODULE_85__addon_mod_quiz_quiz_module__=__webpack_require__(660),__WEBPACK_IMPORTED_MODULE_86__addon_mod_resource_resource_module__=__webpack_require__(664),__WEBPACK_IMPORTED_MODULE_87__addon_mod_scorm_scorm_module__=__webpack_require__(665),__WEBPACK_IMPORTED_MODULE_88__addon_mod_survey_survey_module__=__webpack_require__(666),__WEBPACK_IMPORTED_MODULE_89__addon_mod_url_url_module__=__webpack_require__(668),__WEBPACK_IMPORTED_MODULE_90__addon_mod_wiki_wiki_module__=__webpack_require__(669),__WEBPACK_IMPORTED_MODULE_91__addon_mod_workshop_workshop_module__=__webpack_require__(671),__WEBPACK_IMPORTED_MODULE_92__addon_notes_notes_module__=__webpack_require__(676),__WEBPACK_IMPORTED_MODULE_93__addon_notifications_notifications_module__=__webpack_require__(677),__WEBPACK_IMPORTED_MODULE_94__addon_remotethemes_remotethemes_module__=__webpack_require__(678),__WEBPACK_IMPORTED_MODULE_95__addon_mod_assign_components_components_module__=__webpack_require__(1542),__WEBPACK_IMPORTED_MODULE_96__addon_mod_workshop_components_components_module__=__webpack_require__(484),CoreCompileProvider=function(){function CoreCompileProvider(e,n,t){this.injector=e,this.OTHER_PROVIDERS=[__WEBPACK_IMPORTED_MODULE_4__ngx_translate_core__.b,__WEBPACK_IMPORTED_MODULE_28__angular_common_http__.c,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.h,__WEBPACK_IMPORTED_MODULE_26__angular_platform_browser__.c,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.a,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.b,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.e,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.f,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.i,__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.m,__WEBPACK_IMPORTED_MODULE_27__angular_forms__.d],this.IMPORTS=[__WEBPACK_IMPORTED_MODULE_3_ionic_angular__.d,__WEBPACK_IMPORTED_MODULE_4__ngx_translate_core__.a.forChild(),__WEBPACK_IMPORTED_MODULE_42__components_components_module__.a,__WEBPACK_IMPORTED_MODULE_43__directives_directives_module__.a,__WEBPACK_IMPORTED_MODULE_44__pipes_pipes_module__.a,__WEBPACK_IMPORTED_MODULE_45__core_course_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_47__core_courses_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_49__core_sitehome_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_50__core_user_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_46__core_course_directives_directives_module__.a,__WEBPACK_IMPORTED_MODULE_48__core_siteplugins_directives_directives_module__.a,__WEBPACK_IMPORTED_MODULE_51__core_question_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_95__addon_mod_assign_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_96__addon_mod_workshop_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_52__core_block_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_53__core_editor_components_components_module__.a,__WEBPACK_IMPORTED_MODULE_54__core_search_components_components_module__.a],this.logger=n.getInstance("CoreCompileProvider"),this.compiler=t.createCompiler()}return CoreCompileProvider.prototype.createAndCompileComponent=function(e,n,t){void 0===t&&(t=[]);var o=Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__.l)({template:e})(n),r=this.IMPORTS.concat(t),i=Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__.z)({imports:r,declarations:[o]})(function(){return function class_1(){}}());try{return this.compiler.compileModuleAndAllComponentsAsync(i).then(function(e){for(var n in e.componentFactories){var t=e.componentFactories[n];if(t.componentType==o)return t}})}catch(e){return Promise.reject({message:"Template has some errors and cannot be displayed.",debuginfo:e})}},CoreCompileProvider.prototype.evalInContext=function(javascript){return eval(javascript)},CoreCompileProvider.prototype.executeJavascript=function(e,n){try{return this.evalInContext.call(e,n)}catch(e){this.logger.error("Error evaluating javascript",e)}},CoreCompileProvider.prototype.injectLibraries=function(e,n){void 0===n&&(n=[]);var t=__WEBPACK_IMPORTED_MODULE_6__app_app_module__.b.concat(__WEBPACK_IMPORTED_MODULE_8__core_contentlinks_contentlinks_module__.a).concat(__WEBPACK_IMPORTED_MODULE_9__core_course_course_module__.a).concat(__WEBPACK_IMPORTED_MODULE_10__core_courses_courses_module__.a).concat(__WEBPACK_IMPORTED_MODULE_11__core_fileuploader_fileuploader_module__.a).concat(__WEBPACK_IMPORTED_MODULE_13__core_grades_grades_module__.a).concat(__WEBPACK_IMPORTED_MODULE_15__core_login_login_module__.a).concat(__WEBPACK_IMPORTED_MODULE_16__core_mainmenu_mainmenu_module__.a).concat(__WEBPACK_IMPORTED_MODULE_18__core_sharedfiles_sharedfiles_module__.a).concat(__WEBPACK_IMPORTED_MODULE_19__core_sitehome_sitehome_module__.a).concat([__WEBPACK_IMPORTED_MODULE_25__core_siteplugins_providers_siteplugins__.a]).concat(__WEBPACK_IMPORTED_MODULE_20__core_user_user_module__.a).concat(__WEBPACK_IMPORTED_MODULE_17__core_question_question_module__.a).concat(__WEBPACK_IMPORTED_MODULE_22__core_emulator_emulator_module__.b).concat(this.OTHER_PROVIDERS).concat(n).concat(__WEBPACK_IMPORTED_MODULE_67__addon_badges_badges_module__.a).concat(__WEBPACK_IMPORTED_MODULE_68__addon_calendar_calendar_module__.a).concat(__WEBPACK_IMPORTED_MODULE_69__addon_competency_competency_module__.a).concat(__WEBPACK_IMPORTED_MODULE_70__addon_files_files_module__.a).concat(__WEBPACK_IMPORTED_MODULE_71__addon_messageoutput_messageoutput_module__.a).concat(__WEBPACK_IMPORTED_MODULE_72__addon_messages_messages_module__.a).concat(__WEBPACK_IMPORTED_MODULE_73__addon_mod_assign_assign_module__.a).concat(__WEBPACK_IMPORTED_MODULE_74__addon_mod_book_book_module__.a).concat(__WEBPACK_IMPORTED_MODULE_75__addon_mod_chat_chat_module__.a).concat(__WEBPACK_IMPORTED_MODULE_76__addon_mod_choice_choice_module__.a).concat(__WEBPACK_IMPORTED_MODULE_77__addon_mod_feedback_feedback_module__.a).concat(__WEBPACK_IMPORTED_MODULE_78__addon_mod_folder_folder_module__.a).concat(__WEBPACK_IMPORTED_MODULE_79__addon_mod_forum_forum_module__.a).concat(__WEBPACK_IMPORTED_MODULE_80__addon_mod_glossary_glossary_module__.a).concat(__WEBPACK_IMPORTED_MODULE_81__addon_mod_imscp_imscp_module__.a).concat(__WEBPACK_IMPORTED_MODULE_82__addon_mod_lesson_lesson_module__.a).concat(__WEBPACK_IMPORTED_MODULE_83__addon_mod_lti_lti_module__.a).concat(__WEBPACK_IMPORTED_MODULE_84__addon_mod_page_page_module__.a).concat(__WEBPACK_IMPORTED_MODULE_85__addon_mod_quiz_quiz_module__.a).concat(__WEBPACK_IMPORTED_MODULE_86__addon_mod_resource_resource_module__.a).concat(__WEBPACK_IMPORTED_MODULE_87__addon_mod_scorm_scorm_module__.a).concat(__WEBPACK_IMPORTED_MODULE_88__addon_mod_survey_survey_module__.a).concat(__WEBPACK_IMPORTED_MODULE_89__addon_mod_url_url_module__.a).concat(__WEBPACK_IMPORTED_MODULE_90__addon_mod_wiki_wiki_module__.a).concat(__WEBPACK_IMPORTED_MODULE_91__addon_mod_workshop_workshop_module__.a).concat(__WEBPACK_IMPORTED_MODULE_92__addon_notes_notes_module__.a).concat(__WEBPACK_IMPORTED_MODULE_93__addon_notifications_notifications_module__.a).concat(__WEBPACK_IMPORTED_MODULE_21__core_pushnotifications_pushnotifications_module__.a).concat(__WEBPACK_IMPORTED_MODULE_94__addon_remotethemes_remotethemes_module__.a).concat(__WEBPACK_IMPORTED_MODULE_7__core_block_block_module__.a).concat(__WEBPACK_IMPORTED_MODULE_12__core_filter_filter_module__.a).concat(__WEBPACK_IMPORTED_MODULE_14__core_h5p_h5p_module__.a).concat(__WEBPACK_IMPORTED_MODULE_23__core_editor_editor_module__.a).concat(__WEBPACK_IMPORTED_MODULE_24__core_search_search_module__.a);for(var o in t){var r=t[o];if("function"==typeof r&&r.name)try{e[r.name]=this.injector.get(r)}catch(e){this.logger.warn("Error injecting provider",r.name,e)}}e.CoreCompileProvider=this,e.injector=this.injector,e.Validators=__WEBPACK_IMPORTED_MODULE_27__angular_forms__.u,e.CoreConfigConstants=__WEBPACK_IMPORTED_MODULE_29__configconstants__.a,e.CoreConstants=__WEBPACK_IMPORTED_MODULE_30__core_constants__.a,e.moment=__WEBPACK_IMPORTED_MODULE_31_moment__,e.Md5=__WEBPACK_IMPORTED_MODULE_32_ts_md5_dist_md5__.Md5,e.CoreSyncBaseProvider=__WEBPACK_IMPORTED_MODULE_33__classes_base_sync__.a,e.CoreUrl=__WEBPACK_IMPORTED_MODULE_34__classes_utils_url__.a,e.CoreCache=__WEBPACK_IMPORTED_MODULE_35__classes_cache__.a,e.CoreDelegate=__WEBPACK_IMPORTED_MODULE_36__classes_delegate__.a,e.CoreContentLinksHandlerBase=__WEBPACK_IMPORTED_MODULE_37__core_contentlinks_classes_base_handler__.a,e.CoreContentLinksModuleGradeHandler=__WEBPACK_IMPORTED_MODULE_38__core_contentlinks_classes_module_grade_handler__.a,e.CoreContentLinksModuleIndexHandler=__WEBPACK_IMPORTED_MODULE_39__core_contentlinks_classes_module_index_handler__.a,e.CoreCourseActivityPrefetchHandlerBase=__WEBPACK_IMPORTED_MODULE_40__core_course_classes_activity_prefetch_handler__.a,e.CoreCourseResourcePrefetchHandlerBase=__WEBPACK_IMPORTED_MODULE_41__core_course_classes_resource_prefetch_handler__.a,e.CoreCourseUnsupportedModuleComponent=__WEBPACK_IMPORTED_MODULE_55__core_course_components_unsupported_module_unsupported_module__.a,e.CoreCourseFormatSingleActivityComponent=__WEBPACK_IMPORTED_MODULE_56__core_course_formats_singleactivity_components_singleactivity__.a,e.CoreSitePluginsModuleIndexComponent=__WEBPACK_IMPORTED_MODULE_57__core_siteplugins_components_module_index_module_index__.a,e.CoreSitePluginsBlockComponent=__WEBPACK_IMPORTED_MODULE_58__core_siteplugins_components_block_block__.a,e.CoreSitePluginsCourseOptionComponent=__WEBPACK_IMPORTED_MODULE_59__core_siteplugins_components_course_option_course_option__.a,e.CoreSitePluginsCourseFormatComponent=__WEBPACK_IMPORTED_MODULE_60__core_siteplugins_components_course_format_course_format__.a,e.CoreSitePluginsQuestionComponent=__WEBPACK_IMPORTED_MODULE_61__core_siteplugins_components_question_question__.a,e.CoreSitePluginsQuestionBehaviourComponent=__WEBPACK_IMPORTED_MODULE_62__core_siteplugins_components_question_behaviour_question_behaviour__.a,e.CoreSitePluginsUserProfileFieldComponent=__WEBPACK_IMPORTED_MODULE_63__core_siteplugins_components_user_profile_field_user_profile_field__.a,e.CoreSitePluginsQuizAccessRuleComponent=__WEBPACK_IMPORTED_MODULE_64__core_siteplugins_components_quiz_access_rule_quiz_access_rule__.a,e.CoreSitePluginsAssignFeedbackComponent=__WEBPACK_IMPORTED_MODULE_65__core_siteplugins_components_assign_feedback_assign_feedback__.a,e.CoreSitePluginsAssignSubmissionComponent=__WEBPACK_IMPORTED_MODULE_66__core_siteplugins_components_assign_submission_assign_submission__.a},CoreCompileProvider.prototype.instantiateDynamicComponent=function(e,n,t){return t=t||this.injector,this.createAndCompileComponent(e,n).then(function(e){if(e)return e.create(t,void 0,void 0,t.get(__WEBPACK_IMPORTED_MODULE_1__angular_core__.B))})},CoreCompileProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(1),i=(t(6),t(59),t(147)),l=(t.n(i),function(){function CoreSitePluginsPluginContentComponent(e,n,t,o){this.domUtils=e,this.sitePluginsProvider=n,this.navCtrl=t,this.onContentLoaded=new r.r,this.onLoadingContent=new r.r,this.invalidateObservable=new i.Subject,this.differ=o.find([]).create()}return CoreSitePluginsPluginContentComponent.prototype.ngOnInit=function(){this.fetchContent()},CoreSitePluginsPluginContentComponent.prototype.ngDoCheck=function(){if(this.data&&this.jsData){this.differ.diff(this.data)&&(this.jsData=Object.assign(this.jsData,this.data))}},CoreSitePluginsPluginContentComponent.prototype.fetchContent=function(e){var n=this;return this.onLoadingContent.emit(e),this.forceCompile=!1,this.sitePluginsProvider.getContent(this.component,this.method,this.args,this.preSets).then(function(t){n.content=t.templates.length?t.templates[0].html:"",n.javascript=t.javascript,n.otherData=t.otherdata,n.data=n.data||{},n.forceCompile=!0,n.jsData=Object.assign(n.data,n.sitePluginsProvider.createDataForJS(n.initResult,t)),n.jsData.fetchContent=n.fetchContent.bind(n),n.jsData.openContent=n.openContent.bind(n),n.jsData.refreshContent=n.refreshContent.bind(n),n.jsData.updateContent=n.updateContent.bind(n),n.onContentLoaded.emit(e)}).catch(function(t){n.content="<div></div>",n.onContentLoaded.emit(e),n.domUtils.showErrorModalDefault(t,"core.errorloadingcontent",!0)}).finally(function(){n.dataLoaded=!0})},CoreSitePluginsPluginContentComponent.prototype.openContent=function(e,n,t,o,r,i){!0===r&&(r=this.data),this.navCtrl.push("CoreSitePluginsPluginPage",{title:e,component:t||this.component,method:o||this.method,args:n,initResult:this.initResult,jsData:r,preSets:i})},CoreSitePluginsPluginContentComponent.prototype.refreshContent=function(e){var n=this;return void 0===e&&(e=!0),e&&(this.dataLoaded=!1),this.invalidateObservable.next(),this.sitePluginsProvider.invalidateContent(this.component,this.method,this.args).finally(function(){return n.fetchContent(!0)})},CoreSitePluginsPluginContentComponent.prototype.updateContent=function(e,n,t,o,r){this.component=n||this.component,this.method=t||this.method,this.args=e,this.dataLoaded=!1,this.preSets=r||this.preSets,o&&Object.assign(this.data,o),this.fetchContent()},CoreSitePluginsPluginContentComponent.prototype.callComponentFunction=function(e,n){if(this.compileComponent)return this.compileComponent.callComponentFunction(e,n)},CoreSitePluginsPluginContentComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)())],CoreSitePluginsPluginContentComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function CoreBlockPreRenderedComponent(n){return e.call(this,n,"CoreBlockPreRenderedComponent")||this}return Object(o.__extends)(CoreBlockPreRenderedComponent,e),CoreBlockPreRenderedComponent.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.courseId="course"==this.contextLevel?this.instanceId:void 0,this.fetchContentDefaultError="Error getting "+this.block.contents.title+" data."},CoreBlockPreRenderedComponent}(t(197).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return c});var o=t(0),r=t(1),i=t(2),l=t(14),s=t(51),a=t(10),u=t(186),d=t(11),c=function(e){function CoreCourseModuleMainActivityComponent(n,t,o){void 0===o&&(o="CoreCourseModuleMainResourceComponent");var c=e.call(this,n,o)||this;c.content=t,c.sitesProvider=n.get(i.a),c.courseProvider=n.get(l.a),c.appProvider=n.get(d.a),c.eventsProvider=n.get(a.a),c.modulePrefetchDelegate=n.get(s.a);var p=n.get(u.a),f=n.get(r.D);return c.onlineObserver=p.onchange().subscribe(function(){f.run(function(){c.isOnline=c.appProvider.isOnline()})}),c}return Object(o.__extends)(CoreCourseModuleMainActivityComponent,e),CoreCourseModuleMainActivityComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.hasOffline=!1,this.syncIcon="spinner",this.siteId=this.sitesProvider.getCurrentSiteId(),this.moduleName=this.courseProvider.translateModuleName(this.moduleName),this.syncEventName&&(this.syncObserver=this.eventsProvider.on(this.syncEventName,function(e){n.autoSyncEventReceived(e)},this.siteId))},CoreCourseModuleMainActivityComponent.prototype.isRefreshSyncNeeded=function(e){return!1},CoreCourseModuleMainActivityComponent.prototype.autoSyncEventReceived=function(e){this.isRefreshSyncNeeded(e)&&this.showLoadingAndRefresh(!1)},CoreCourseModuleMainActivityComponent.prototype.refreshContent=function(e,n){var t=this;if(void 0===e&&(e=!1),void 0===n&&(n=!1),!this.module)return Promise.resolve();this.refreshIcon="spinner",this.syncIcon="spinner";var o;try{o=this.invalidateContent()}catch(e){this.logger.error(e),o=Promise.resolve()}return o.catch(function(){}).then(function(){return t.loadContent(!0,e,n)}).finally(function(){t.refreshIcon="refresh",t.syncIcon="sync"})},CoreCourseModuleMainActivityComponent.prototype.showLoadingAndFetch=function(e,n){var t=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),this.refreshIcon="spinner",this.syncIcon="spinner",this.loaded=!1,this.domUtils.scrollToTop(this.content),this.loadContent(!1,e,n).finally(function(){t.refreshIcon="refresh",t.syncIcon="sync"})},CoreCourseModuleMainActivityComponent.prototype.showLoadingAndRefresh=function(e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.refreshIcon="spinner",this.syncIcon="spinner",this.loaded=!1,this.domUtils.scrollToTop(this.content),this.refreshContent(e,n)},CoreCourseModuleMainActivityComponent.prototype.fetchContent=function(e,n,t){return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),Promise.resolve()},CoreCourseModuleMainActivityComponent.prototype.loadContent=function(e,n,t){var o=this;if(void 0===n&&(n=!1),void 0===t&&(t=!1),this.isOnline=this.appProvider.isOnline(),!this.module)return Promise.resolve();var r;try{r=this.fetchContent(e,n,t)}catch(e){this.logger.error(e),r=Promise.resolve()}return r.catch(function(t){if(!e)return o.refreshContent(n);o.domUtils.showErrorModalDefault(t,o.fetchContentDefaultError,!0)}).finally(function(){o.loaded=!0,o.refreshIcon="refresh",o.syncIcon="sync"})},CoreCourseModuleMainActivityComponent.prototype.showStatus=function(e,n){},CoreCourseModuleMainActivityComponent.prototype.setStatusListener=function(){var e=this;return void 0===this.statusObserver?(this.statusObserver=this.eventsProvider.on(a.a.PACKAGE_STATUS_CHANGED,function(n){if(n.componentId===e.module.id&&n.component===e.component){var t=e.currentStatus;e.currentStatus=n.status,e.showStatus(e.currentStatus,t)}},this.siteId),this.modulePrefetchDelegate.getModuleStatus(this.module,this.courseId).then(function(n){e.currentStatus=n,e.showStatus(n)})):Promise.resolve()},CoreCourseModuleMainActivityComponent.prototype.sync=function(){return Promise.resolve(!0)},CoreCourseModuleMainActivityComponent.prototype.hasSyncSucceed=function(e){return!0},CoreCourseModuleMainActivityComponent.prototype.syncActivity=function(e){var n=this;return void 0===e&&(e=!1),this.sync().then(function(e){return e.warnings&&e.warnings.length&&n.domUtils.showErrorModal(e.warnings[0]),n.hasSyncSucceed(e)}).catch(function(t){return e&&n.domUtils.showErrorModalDefault(t,"core.errorsync",!0),!1})},CoreCourseModuleMainActivityComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.onlineObserver&&this.onlineObserver.unsubscribe(),this.syncObserver&&this.syncObserver.off(),this.statusObserver&&this.statusObserver.off()},CoreCourseModuleMainActivityComponent}(t(268).a)},,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(380);var o=t(54),r=function(){function AddonMessagesProvider(n,t,o,r,i,l,s,a,u){this.sitesProvider=t,this.appProvider=o,this.userProvider=r,this.messagesOffline=i,this.utils=l,this.timeUtils=s,this.emulatorHelper=a,this.eventsProvider=u,this.ROOT_CACHE_KEY="mmaMessages:",this.LIMIT_MESSAGES=e.LIMIT_MESSAGES,this.logger=n.getInstance("AddonMessagesProvider")}return e=AddonMessagesProvider,AddonMessagesProvider.prototype.addContact=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.write("core_message_create_contacts",{userids:[e]}).then(function(){return t.invalidateAllContactsCache(n.getUserId(),n.getId())})})},AddonMessagesProvider.prototype.blockContact=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r;if(t.wsAvailable("core_message_block_user")){var i={userid:t.getUserId(),blockeduserid:n};r=t.write("core_message_block_user",i)}else{r=t.write("core_message_block_contacts",i={userids:[n]})}return r.then(function(){return o.invalidateAllMemberInfo(n,t).finally(function(){o.eventsProvider.trigger(e.MEMBER_INFO_CHANGED_EVENT,{userId:n,userBlocked:!0},t.id)})})})},AddonMessagesProvider.prototype.confirmContactRequest=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={userid:n,requesteduserid:t.getUserId()};return t.write("core_message_confirm_contact_request",r).then(function(){return o.utils.allPromises([o.invalidateAllMemberInfo(n,t),o.invalidateContactsCache(t.id),o.invalidateUserContacts(t.id),o.refreshContactRequestsCount(t.id)]).finally(function(){o.eventsProvider.trigger(e.MEMBER_INFO_CHANGED_EVENT,{userId:n,contactRequestConfirmed:!0},t.id)})})})},AddonMessagesProvider.prototype.createContactRequest=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={userid:t.getUserId(),requesteduserid:n};return t.write("core_message_create_contact_request",r).then(function(){return o.invalidateAllMemberInfo(n,t).finally(function(){o.eventsProvider.trigger(e.MEMBER_INFO_CHANGED_EVENT,{userId:n,contactRequestCreated:!0},t.id)})})})},AddonMessagesProvider.prototype.declineContactRequest=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={userid:n,requesteduserid:t.getUserId()};return t.write("core_message_decline_contact_request",r).then(function(){return o.utils.allPromises([o.invalidateAllMemberInfo(n,t),o.refreshContactRequestsCount(t.id)]).finally(function(){o.eventsProvider.trigger(e.MEMBER_INFO_CHANGED_EVENT,{userId:n,contactRequestDeclined:!0},t.id)})})})},AddonMessagesProvider.prototype.deleteConversation=function(e,n,t){return this.deleteConversations([e],n,t)},AddonMessagesProvider.prototype.deleteConversations=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId();return n.write("core_message_delete_conversations_by_id",{userid:t,conversationids:e}).then(function(){var t=[];return e.forEach(function(e){t.push(o.messagesOffline.deleteConversationMessages(e,n.getId()).catch(function(){}))}),Promise.all(t)})})},AddonMessagesProvider.prototype.deleteMessage=function(e,n){return e.id?n?this.deleteMessageForAllOnline(e.id):this.deleteMessageOnline(e.id,e.read):e.conversationid?this.messagesOffline.deleteConversationMessage(e.conversationid,e.text,e.timecreated):this.messagesOffline.deleteMessage(e.touserid,e.smallmessage,e.timecreated)},AddonMessagesProvider.prototype.deleteMessageOnline=function(e,n,t){var o=this,r={messageid:e,userid:t||this.sitesProvider.getCurrentSiteUserId()};return void 0!==n&&(r.read=n),this.sitesProvider.getCurrentSite().write("core_message_delete_message",r).then(function(){return o.invalidateDiscussionCache(t)})},AddonMessagesProvider.prototype.deleteMessageForAllOnline=function(e,n){var t=this,o={messageid:e,userid:n||this.sitesProvider.getCurrentSiteUserId()};return this.sitesProvider.getCurrentSite().write("core_message_delete_message_for_all_users",o).then(function(){return t.invalidateDiscussionCache(n)})},AddonMessagesProvider.prototype.formatConversation=function(n,t){var o=n.messages.length,r=o?n.messages[o-1]:null;if(n.lastmessage=r?r.text:null,n.lastmessagedate=r?r.timecreated:null,n.sentfromcurrentuser=r?r.useridfrom==t:null,n.type!=e.MESSAGE_CONVERSATION_TYPE_GROUP){var i=n.type==e.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL,l=n.members.reduce(function(e,n){return!e&&(i&&n.id!=t||!i&&n.id==t)&&(e=n),e},null);n.name=n.name?n.name:l.fullname,n.imageurl=n.imageurl?n.imageurl:l.profileimageurl,n.userid=l.id,n.showonlinestatus=l.showonlinestatus,n.isonline=l.isonline,n.isblocked=l.isblocked,n.otherUser=l}return n},AddonMessagesProvider.prototype.getCacheKeyForBlockedContacts=function(e){return this.ROOT_CACHE_KEY+"blockedContacts:"+e},AddonMessagesProvider.prototype.getCacheKeyForContacts=function(){return this.ROOT_CACHE_KEY+"contacts"},AddonMessagesProvider.prototype.getCacheKeyForUserContacts=function(){return this.ROOT_CACHE_KEY+"userContacts"},AddonMessagesProvider.prototype.getCacheKeyForContactRequests=function(){return this.ROOT_CACHE_KEY+"contactRequests"},AddonMessagesProvider.prototype.getCacheKeyForContactRequestsCount=function(){return this.ROOT_CACHE_KEY+"contactRequestsCount"},AddonMessagesProvider.prototype.getCacheKeyForDiscussion=function(e){return this.ROOT_CACHE_KEY+"discussion:"+e},AddonMessagesProvider.prototype.getCacheKeyForMessageCount=function(e){return this.ROOT_CACHE_KEY+"count:"+e},AddonMessagesProvider.prototype.getCacheKeyForUnreadConversationCounts=function(){return this.ROOT_CACHE_KEY+"unreadConversationCounts"},AddonMessagesProvider.prototype.getCacheKeyForDiscussions=function(){return this.ROOT_CACHE_KEY+"discussions"},AddonMessagesProvider.prototype.getCacheKeyForConversation=function(e,n){return this.ROOT_CACHE_KEY+"conversation:"+e+":"+n},AddonMessagesProvider.prototype.getCacheKeyForConversationBetweenUsers=function(e,n){return this.ROOT_CACHE_KEY+"conversationBetweenUsers:"+e+":"+n},AddonMessagesProvider.prototype.getCacheKeyForConversationMembers=function(e,n){return this.ROOT_CACHE_KEY+"conversationMembers:"+e+":"+n},AddonMessagesProvider.prototype.getCacheKeyForConversationMessages=function(e,n){return this.ROOT_CACHE_KEY+"conversationMessages:"+e+":"+n},AddonMessagesProvider.prototype.getCacheKeyForConversations=function(e,n,t){return this.getCommonCacheKeyForUserConversations(e)+":"+n+":"+t},AddonMessagesProvider.prototype.getCacheKeyForConversationCounts=function(){return this.ROOT_CACHE_KEY+"conversationCounts"},AddonMessagesProvider.prototype.getCacheKeyForMemberInfo=function(e,n){return this.ROOT_CACHE_KEY+"memberInfo:"+e+":"+n},AddonMessagesProvider.prototype.getCacheKeyForSelfConversation=function(e){return this.ROOT_CACHE_KEY+"selfconversation:"+e},AddonMessagesProvider.prototype.getCommonCacheKeyForUserConversations=function(e){return this.getRootCacheKeyForConversations()+e},AddonMessagesProvider.prototype.getRootCacheKeyForConversations=function(){return this.ROOT_CACHE_KEY+"conversations:"},AddonMessagesProvider.prototype.getAllContacts=function(e){var n=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.getContacts(e).then(function(t){return n.getBlockedContacts(e).then(function(e){return t.blocked=e.users,n.storeUsersFromAllContacts(t),t}).catch(function(){return t.blocked=[],n.storeUsersFromAllContacts(t),t})})},AddonMessagesProvider.prototype.getBlockedContacts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t=e.getUserId(),r={userid:t},i={cacheKey:n.getCacheKeyForBlockedContacts(t),updateFrequency:o.a.FREQUENCY_OFTEN};return e.read("core_message_get_blocked_users",r,i)})},AddonMessagesProvider.prototype.getContacts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t={cacheKey:n.getCacheKeyForContacts(),updateFrequency:o.a.FREQUENCY_OFTEN};return e.read("core_message_get_contacts",void 0,t).then(function(e){var n={online:[],offline:[],strangers:[]},t=function(t){n[t]||(n[t]=[]),e[t].forEach(function(e){e.id>0&&n[t].push(e)})};for(var o in e)t(o);return n})})},AddonMessagesProvider.prototype.getUserContacts=function(n,t,r){var i=this;return void 0===n&&(n=0),void 0===t&&(t=e.LIMIT_CONTACTS),this.sitesProvider.getSite(r).then(function(e){var r={userid:e.getUserId(),limitfrom:n,limitnum:t<=0?0:t+1},l={cacheKey:i.getCacheKeyForUserContacts(),updateFrequency:o.a.FREQUENCY_OFTEN};return e.read("core_message_get_user_contacts",r,l).then(function(n){return n&&n.length?(i.userProvider.storeUsers(n,e.id),t<=0?{contacts:n,canLoadMore:!1}:{contacts:n.slice(0,t),canLoadMore:n.length>t}):{contacts:[],canLoadMore:!1}})})},AddonMessagesProvider.prototype.getContactRequests=function(n,t,r){var i=this;return void 0===n&&(n=0),void 0===t&&(t=e.LIMIT_CONTACTS),this.sitesProvider.getSite(r).then(function(e){var r={userid:e.getUserId(),limitfrom:n,limitnum:t<=0?0:t+1},l={cacheKey:i.getCacheKeyForContactRequests(),updateFrequency:o.a.FREQUENCY_OFTEN};return e.read("core_message_get_contact_requests",r,l).then(function(n){return n&&n.length?(i.userProvider.storeUsers(n,e.id),t<=0?{requests:n,canLoadMore:!1}:{requests:n.slice(0,t),canLoadMore:n.length>t}):{requests:[],canLoadMore:!1}})})},AddonMessagesProvider.prototype.getContactRequestsCount=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o={userid:n.getUserId()},r={cacheKey:t.getCacheKeyForContactRequestsCount(),typeExpected:"number"};return n.read("core_message_get_received_contact_requests_count",o,r).then(function(o){return t.eventsProvider.trigger(e.CONTACT_REQUESTS_COUNT_EVENT,{count:o},n.id),o})})},AddonMessagesProvider.prototype.getConversation=function(e,n,t,o,r,i,l,s,a,u){var d=this;return void 0===o&&(o=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===l&&(l=2),void 0===s&&(s=!0),this.sitesProvider.getSite(a).then(function(a){u=u||a.getUserId();var c={cacheKey:d.getCacheKeyForConversation(u,e)};return a.read("core_message_get_conversation",{userid:u,conversationid:e,includecontactrequests:n?1:0,includeprivacyinfo:t?1:0,messageoffset:o,messagelimit:r,memberoffset:i,memberlimit:l,newestmessagesfirst:s?1:0},c).then(function(e){return d.formatConversation(e,u)})})},AddonMessagesProvider.prototype.getConversationBetweenUsers=function(e,n,t,o,r,i,l,s,a,u,d){var c=this;return void 0===o&&(o=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===l&&(l=2),void 0===s&&(s=!0),this.sitesProvider.getSite(a).then(function(a){u=u||a.getUserId();var p={cacheKey:c.getCacheKeyForConversationBetweenUsers(u,e),omitExpires:!!d};return a.read("core_message_get_conversation_between_users",{userid:u,otheruserid:e,includecontactrequests:n?1:0,includeprivacyinfo:t?1:0,messageoffset:o,messagelimit:r,memberoffset:i,memberlimit:l,newestmessagesfirst:s?1:0},p).then(function(e){return c.formatConversation(e,u)})})},AddonMessagesProvider.prototype.getConversationMembers=function(e,n,t,r,i,l){var s=this;return void 0===n&&(n=0),this.sitesProvider.getSite(i).then(function(i){l=l||i.getUserId(),void 0!==t&&null!==t||(t=s.LIMIT_MESSAGES);var a={cacheKey:s.getCacheKeyForConversationMembers(l,e),updateFrequency:o.a.FREQUENCY_SOMETIMES};return i.read("core_message_get_conversation_members",{userid:l,conversationid:e,limitfrom:n,limitnum:t<1?t:t+1,includecontactrequests:r?1:0,includeprivacyinfo:1},a).then(function(e){return t<1?{canLoadMore:!1,members:e}:{canLoadMore:e.length>t,members:e.slice(0,t)}})})},AddonMessagesProvider.prototype.getConversationMessages=function(e,n,t,o,r,i,l,s){var a=this;return void 0===t&&(t=0),void 0===r&&(r=!0),void 0===i&&(i=0),this.sitesProvider.getSite(l).then(function(l){s=s||l.getUserId(),void 0!==o&&null!==o||(o=a.LIMIT_MESSAGES);var u={cacheKey:a.getCacheKeyForConversationMessages(s,e)},d={currentuserid:s,convid:e,limitfrom:t,limitnum:o<1?o:o+1,newest:r?1:0,timefrom:i};return t>0&&(u.getFromCache=!1,u.saveToCache=!1,u.emergencyCache=!1),l.read("core_message_get_conversation_messages",d,u).then(function(r){o<1?(r.canLoadMore=!1,r.messages=r.messages):(r.canLoadMore=r.messages.length>o,r.messages=r.messages.slice(0,o));var i;return r.messages.forEach(function(e){e.timecreated=e.timecreated?1e3*e.timecreated:0,i||e.useridfrom==s||(i=e)}),a.appProvider.isDesktop()&&0===t&&i&&a.storeLastReceivedMessageIfNeeded(e,i,l.getId()),n?r:a.messagesOffline.getConversationMessages(e).then(function(e){return e.forEach(function(e){e.pending=!0,e.useridfrom=s}),r.messages=r.messages.concat(e),r})})})},AddonMessagesProvider.prototype.getConversations=function(n,t,o,r,i,l,s){var a=this;return void 0===o&&(o=0),this.sitesProvider.getSite(r).then(function(r){i=i||r.getUserId();var u={cacheKey:a.getCacheKeyForConversations(i,n,t)},d={userid:i,limitfrom:o,limitnum:a.LIMIT_MESSAGES+1};return l?u.omitExpires=!0:s&&(u.getFromCache=!1,u.emergencyCache=!1),void 0!==n&&null!=n&&(d.type=n),void 0!==t&&null!=t&&(d.favourites=t?1:0),r.isVersionGreaterEqualThan("3.7")&&n!=e.MESSAGE_CONVERSATION_TYPE_GROUP&&(d.mergeself=1),r.read("core_message_get_conversations",d,u).catch(function(e){return d.mergeself?(delete d.mergeself,r.read("core_message_get_conversations",d,u)):Promise.reject(e)}).then(function(e){var n=e.conversations.slice(0,a.LIMIT_MESSAGES).map(function(e){return a.formatConversation(e,i)}),t=n[0],l=t&&t.messages[0];return a.appProvider.isDesktop()&&0===o&&l&&!t.sentfromcurrentuser&&a.storeLastReceivedMessageIfNeeded(t.id,l,r.getId()),{conversations:n,canLoadMore:e.conversations.length>a.LIMIT_MESSAGES}})})},AddonMessagesProvider.prototype.getConversationCounts=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o={cacheKey:t.getCacheKeyForConversationCounts()};return n.read("core_message_get_conversation_counts",{},o).then(function(n){return{favourites:n.favourites,individual:n.types[e.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL],group:n.types[e.MESSAGE_CONVERSATION_TYPE_GROUP],self:n.types[e.MESSAGE_CONVERSATION_TYPE_SELF]||0}})})},AddonMessagesProvider.prototype.getDiscussion=function(e,n,t,o,r,i,l,s){var a=this;return void 0===t&&(t=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===l&&(l=!0),this.sitesProvider.getSite(s).then(function(u){var d,c,p={messages:[],canLoadMore:!1},f={cacheKey:a.getCacheKeyForDiscussion(e)},h={useridto:u.getUserId(),useridfrom:e,limitnum:a.LIMIT_MESSAGES};return(t>0||o>0||r>0||i>0)&&(f.getFromCache=!1,f.saveToCache=!1,f.emergencyCache=!1),a.getRecentMessages(h,f,t,o,l,u.getId()).then(function(n){return p.messages=n,h.useridto=e,h.useridfrom=u.getUserId(),d=n.length>0,a.getRecentMessages(h,f,r,i,l,s)}).then(function(t){return p.messages=p.messages.concat(t),c=t.length>0,p.messages.length>a.LIMIT_MESSAGES?(p.canLoadMore=!0,p.messages=a.sortMessages(p.messages),p.messages=p.messages.slice(-a.LIMIT_MESSAGES)):p.canLoadMore=!(p.messages.length!=a.LIMIT_MESSAGES||d&&c),n?p:a.messagesOffline.getMessages(e).then(function(e){return e.forEach(function(e){e.pending=!0,e.text=e.smallmessage}),p.messages=p.messages.concat(e),p})})})},AddonMessagesProvider.prototype.getDiscussions=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t={},o=e.getUserId(),r={useridto:o,useridfrom:0,limitnum:n.LIMIT_MESSAGES},i={cacheKey:n.getCacheKeyForDiscussions()},l=function(e,n,r){void 0===t[n]&&(t[n]={fullname:r,profileimageurl:""},e.timeread||e.pending||e.useridfrom==o||(t[n].unread=!0));var i=t[n].message;(void 0===i||!i.pending&&e.pending||i.pending==e.pending&&(i.timecreated<e.timecreated||i.timecreated==e.timecreated&&i.id<e.id))&&(t[n].message={id:e.id,user:n,message:e.text,timecreated:e.timecreated,pending:!!e.pending})};return n.getRecentMessages(r,i,void 0,void 0,void 0,e.getId()).then(function(e){return e.forEach(function(e){l(e,e.useridfrom,e.userfromfullname)}),r.useridfrom=r.useridto,r.useridto=0,n.getRecentMessages(r,i)}).then(function(t){return t.forEach(function(e){l(e,e.useridto,e.usertofullname)}),n.messagesOffline.getAllMessages(e.getId())}).then(function(o){return o.forEach(function(e){e.pending=!0,e.text=e.smallmessage,l(e,e.touserid,"")}),n.getDiscussionsUserImg(t,e.getId()).then(function(e){return n.storeUsersFromDiscussions(e),e})})})},AddonMessagesProvider.prototype.getDiscussionsUserImg=function(e,n){var t=[],o=function(o){e[o].profileimageurl||t.push(r.userProvider.getProfile(e[o].message.user,0,!0,n).then(function(n){e[o].profileimageurl=n.profileimageurl}).catch(function(){}))},r=this;for(var i in e)o(i);return Promise.all(t).then(function(){return e})},AddonMessagesProvider.prototype.getMemberInfo=function(e,n,t){var r=this;return this.sitesProvider.getSite(n).then(function(n){t=t||n.getUserId();var i={cacheKey:r.getCacheKeyForMemberInfo(t,e),updateFrequency:o.a.FREQUENCY_OFTEN};return n.read("core_message_get_member_info",{referenceuserid:t,userids:[e],includecontactrequests:1,includeprivacyinfo:1},i).then(function(e){return!e||e.length<1?Promise.reject(null):e[0]})})},AddonMessagesProvider.prototype.getMessagePreferencesCacheKey=function(){return this.ROOT_CACHE_KEY+"messagePreferences"},AddonMessagesProvider.prototype.getMessagePreferences=function(e){var n=this;return this.logger.debug("Get message preferences"),this.sitesProvider.getSite(e).then(function(e){var t={cacheKey:n.getMessagePreferencesCacheKey(),updateFrequency:o.a.FREQUENCY_SOMETIMES};return e.read("core_message_get_user_message_preferences",{},t).then(function(e){return e.preferences?(e.preferences.blocknoncontacts=e.blocknoncontacts,e.preferences):Promise.reject(null)})})},AddonMessagesProvider.prototype.getMessages=function(e,n,t,o){var r=this;return void 0===t&&(t=!0),e.type="conversations",e.newestfirst=1,this.sitesProvider.getSite(o).then(function(o){var i=o.getUserId();return o.read("core_message_get_messages",e,n).then(function(n){return n.messages.forEach(function(n){n.read=0==e.read?0:1,n.timecreated=n.timecreated?1e3*n.timecreated:0,n.timeread=n.timeread?1e3*n.timeread:0}),t&&r.appProvider.isDesktop()&&!e.read&&e.useridto==i&&0===e.limitfrom&&r.storeLastReceivedMessageIfNeeded(e.useridfrom,n.messages[0],o.getId()),n})})},AddonMessagesProvider.prototype.getRecentMessages=function(e,n,t,o,r,i){var l=this;return void 0===t&&(t=0),void 0===o&&(o=0),void 0===r&&(r=!0),t=t||0,o=o||0,e.read=0,e.limitfrom=t,this.getMessages(e,n,r,i).then(function(t){var s=t.messages;return s?s.length>=e.limitnum?s:(e.limitnum=e.limitnum-s.length,e.read=1,e.limitfrom=o,l.getMessages(e,n,r,i).then(function(e){return e.messages&&(s=s.concat(e.messages)),s}).catch(function(){return s})):Promise.reject(null)})},AddonMessagesProvider.prototype.getSelfConversation=function(e,n,t,o,r){var i=this;return void 0===e&&(e=0),void 0===n&&(n=1),void 0===t&&(t=!0),this.sitesProvider.getSite(o).then(function(o){r=r||o.getUserId();var l={cacheKey:i.getCacheKeyForSelfConversation(r)};return o.read("core_message_get_self_conversation",{userid:r,messageoffset:e,messagelimit:n,newestmessagesfirst:t?1:0},l).then(function(e){return i.formatConversation(e,r)})})},AddonMessagesProvider.prototype.getUnreadConversationCounts=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(o){var r;if(t.isGroupMessagingEnabled()){var i={cacheKey:t.getCacheKeyForUnreadConversationCounts()};r=o.read("core_message_get_unread_conversation_counts",{},i).then(function(n){return{favourites:n.favourites,individual:n.types[e.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL],group:n.types[e.MESSAGE_CONVERSATION_TYPE_GROUP],self:n.types[e.MESSAGE_CONVERSATION_TYPE_SELF]||0}})}else if(t.isMessageCountEnabled()){var l={useridto:o.getUserId()};i={cacheKey:t.getCacheKeyForMessageCount(o.getUserId()),typeExpected:"number"};r=o.read("core_message_get_unread_conversations_count",l,i).then(function(e){return{favourites:0,individual:e,group:0,self:0}})}else{l={read:0,limitfrom:0,limitnum:t.LIMIT_MESSAGES+1,useridto:o.getUserId(),useridfrom:0};r=t.getMessages(l,void 0,!1,n).then(function(e){var n={};e.messages.forEach(function(e){n[e.useridto]=1});var o=Object.keys(n).length;return{favourites:0,individual:o,group:0,self:0,orMore:o>t.LIMIT_MESSAGES}})}return r.then(function(n){return t.eventsProvider.trigger(e.UNREAD_CONVERSATION_COUNTS_EVENT,n,o.id),n})})},AddonMessagesProvider.prototype.getUnreadReceivedMessages=function(e,n,t,o){var r=this;return void 0===e&&(e=!0),void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(o).then(function(i){var l={read:0,limitfrom:0,limitnum:r.LIMIT_MESSAGES,useridto:i.getUserId(),useridfrom:0},s={};return n?s.omitExpires=!0:t&&(s.getFromCache=!1,s.emergencyCache=!1),r.getMessages(l,s,e,o)})},AddonMessagesProvider.prototype.invalidateAllContactsCache=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.invalidateContactsCache(n).then(function(){return t.invalidateBlockedContactsCache(e,n)})},AddonMessagesProvider.prototype.invalidateBlockedContactsCache=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCacheKeyForBlockedContacts(e))})},AddonMessagesProvider.prototype.invalidateContactsCache=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCacheKeyForContacts())})},AddonMessagesProvider.prototype.invalidateUserContacts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCacheKeyForUserContacts())})},AddonMessagesProvider.prototype.invalidateContactRequestsCache=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCacheKeyForContactRequests())})},AddonMessagesProvider.prototype.invalidateContactRequestsCountCache=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCacheKeyForContactRequestsCount())})},AddonMessagesProvider.prototype.invalidateConversation=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getCacheKeyForConversation(t,e))})},AddonMessagesProvider.prototype.invalidateConversationBetweenUsers=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getCacheKeyForConversationBetweenUsers(t,e))})},AddonMessagesProvider.prototype.invalidateConversationMembers=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getCacheKeyForConversationMembers(t,e))})},AddonMessagesProvider.prototype.invalidateConversationMessages=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getCacheKeyForConversationMessages(t,e))})},AddonMessagesProvider.prototype.invalidateConversations=function(e,n){var t=this;return this.sitesProvider.getSite(e).then(function(e){return n=n||e.getUserId(),e.invalidateWsCacheForKeyStartingWith(t.getCommonCacheKeyForUserConversations(n))})},AddonMessagesProvider.prototype.invalidateConversationCounts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCacheKeyForConversationCounts())})},AddonMessagesProvider.prototype.invalidateDiscussionCache=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCacheKeyForDiscussion(e))})},AddonMessagesProvider.prototype.invalidateDiscussionsCache=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t=[];return t.push(e.invalidateWsCacheForKey(n.getCacheKeyForDiscussions())),t.push(n.invalidateContactsCache(e.getId())),Promise.all(t)})},AddonMessagesProvider.prototype.invalidateMemberInfo=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getCacheKeyForMemberInfo(t,e))})},AddonMessagesProvider.prototype.invalidateMessagePreferences=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getMessagePreferencesCacheKey())})},AddonMessagesProvider.prototype.invalidateAllMemberInfo=function(e,n){var t=this;return this.utils.allPromises([this.invalidateMemberInfo(e,n.id),this.invalidateUserContacts(n.id),this.invalidateContactRequestsCache(n.id),this.invalidateConversations(n.id),this.getConversationBetweenUsers(e,void 0,void 0,void 0,void 0,void 0,void 0,void 0,n.id,void 0,!0).then(function(e){return t.utils.allPromises([t.invalidateConversation(e.id),t.invalidateConversationMembers(e.id,n.id)])}).catch(function(){})])},AddonMessagesProvider.prototype.invalidateSelfConversation=function(e,n){var t=this;return this.sitesProvider.getSite(e).then(function(e){return n=n||e.getUserId(),e.invalidateWsCacheForKey(t.getCacheKeyForSelfConversation(n))})},AddonMessagesProvider.prototype.invalidateUnreadConversationCounts=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isGroupMessagingEnabled()?e.invalidateWsCacheForKey(n.getCacheKeyForUnreadConversationCounts()):n.isMessageCountEnabled()?e.invalidateWsCacheForKey(n.getCacheKeyForMessageCount(e.getUserId())):void 0})},AddonMessagesProvider.prototype.isBlocked=function(e,n){return this.isGroupMessagingEnabled()?this.getMemberInfo(e,n).then(function(e){return e.isblocked}):this.getBlockedContacts(n).then(function(n){return!(!n.users||n.users.length<1)&&n.users.some(function(n){return e==n.id})})},AddonMessagesProvider.prototype.isContact=function(e,n){return this.isGroupMessagingEnabled()?this.getMemberInfo(e,n).then(function(e){return e.iscontact}):this.getContacts(n).then(function(n){return["online","offline"].some(function(t){return!!(n[t]&&n[t].length>0)&&n[t].some(function(n){return e==n.id})})})},AddonMessagesProvider.prototype.isGroupMessagingEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_conversations")},AddonMessagesProvider.prototype.isGroupMessagingEnabledInSite=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("core_message_get_conversations")}).catch(function(){return!1})},AddonMessagesProvider.prototype.isMarkAllMessagesReadEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_mark_all_messages_as_read")},AddonMessagesProvider.prototype.isMessageCountEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_unread_conversations_count")},AddonMessagesProvider.prototype.isMessagePreferencesEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_user_message_preferences")},AddonMessagesProvider.prototype.isMessagingEnabledForSite=function(e){return this.isPluginEnabled(e).then(function(e){if(!e)return Promise.reject(null)})},AddonMessagesProvider.prototype.isMuteConversationEnabled=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_message_mute_conversations")},AddonMessagesProvider.prototype.isMuteConversationEnabledInSite=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isMuteConversationEnabled(e)}).catch(function(){return!1})},AddonMessagesProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canUseAdvancedFeature("messaging")})},AddonMessagesProvider.prototype.isSearchMessagesEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_data_for_messagearea_search_messages")},AddonMessagesProvider.prototype.isSelfConversationEnabled=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_message_get_self_conversation")},AddonMessagesProvider.prototype.isSelfConversationEnabledInSite=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isSelfConversationEnabled(e)}).catch(function(){return!1})},AddonMessagesProvider.prototype.markMessageRead=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o={messageid:e,timeread:t.timeUtils.timestamp()};return n.write("core_message_mark_message_read",o)})},AddonMessagesProvider.prototype.markAllConversationMessagesRead=function(e){var n={userid:this.sitesProvider.getCurrentSiteUserId(),conversationid:e};return this.sitesProvider.getCurrentSite().write("core_message_mark_all_conversation_messages_as_read",n,{responseExpected:!1})},AddonMessagesProvider.prototype.markAllMessagesRead=function(e){var n={useridto:this.sitesProvider.getCurrentSiteUserId(),useridfrom:e};return this.sitesProvider.getCurrentSite().write("core_message_mark_all_messages_as_read",n,{typeExpected:"boolean"})},AddonMessagesProvider.prototype.muteConversation=function(e,n,t,o){return this.muteConversations([e],n,t,o)},AddonMessagesProvider.prototype.muteConversations=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){o=o||t.getUserId();return t.write(n?"core_message_mute_conversations":"core_message_unmute_conversations",{userid:o,conversationids:e}).then(function(){var n=[];return e.forEach(function(e){n.push(r.invalidateConversation(e,t.getId(),o))}),Promise.all(n).catch(function(){})})})},AddonMessagesProvider.prototype.refreshContactRequestsCount=function(e){var n=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.invalidateContactRequestsCountCache(e).then(function(){return n.getContactRequestsCount(e)})},AddonMessagesProvider.prototype.refreshUnreadConversationCounts=function(e){var n=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.invalidateUnreadConversationCounts(e).then(function(){return n.getUnreadConversationCounts(e)})},AddonMessagesProvider.prototype.removeContact=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.write("core_message_delete_contacts",{userids:[n]},{responseExpected:!1}).then(function(){return o.isGroupMessagingEnabled()?o.utils.allPromises([o.invalidateUserContacts(t.id),o.invalidateAllMemberInfo(n,t)]).then(function(){o.eventsProvider.trigger(e.MEMBER_INFO_CHANGED_EVENT,{userId:n,contactRemoved:!0},t.id)}):o.invalidateContactsCache(t.id)})})},AddonMessagesProvider.prototype.searchContacts=function(e,n,t){var o=this;return void 0===n&&(n=100),this.sitesProvider.getSite(t).then(function(t){return t.read("core_message_search_contacts",{searchtext:e,onlymycourses:0},{getFromCache:!1}).then(function(e){return n&&e.length>n&&(e=e.splice(0,n)),o.userProvider.storeUsers(e),e})})},AddonMessagesProvider.prototype.searchMessages=function(n,t,o,r,i){var l=this;return void 0===o&&(o=0),void 0===r&&(r=e.LIMIT_SEARCH),this.sitesProvider.getSite(i).then(function(e){var i={userid:t||e.getUserId(),search:n,limitfrom:o,limitnum:r<=0?0:r+1};return e.read("core_message_data_for_messagearea_search_messages",i,{getFromCache:!1}).then(function(n){return n.contacts&&n.contacts.length?(n.contacts.forEach(function(e){e.id=e.userid}),l.userProvider.storeUsers(n.contacts,e.id),r<=0?{messages:n.contacts,canLoadMore:!1}:{messages:n.contacts.slice(0,r),canLoadMore:n.contacts.length>r}):{messages:[],canLoadMore:!1}})})},AddonMessagesProvider.prototype.searchUsers=function(n,t,o,r){var i=this;return void 0===t&&(t=0),void 0===o&&(o=e.LIMIT_SEARCH),this.sitesProvider.getSite(r).then(function(e){var r={userid:e.getUserId(),search:n,limitfrom:t,limitnum:o<=0?0:o+1};return e.read("core_message_message_search_users",r,{getFromCache:!1}).then(function(n){var t=n.contacts||[],r=n.noncontacts||[];return i.userProvider.storeUsers(t,e.id),i.userProvider.storeUsers(r,e.id),o<=0?{contacts:t,nonContacts:r,canLoadMoreContacts:!1,canLoadMoreNonContacts:!1}:{contacts:t.slice(0,o),nonContacts:r.slice(0,o),canLoadMoreContacts:t.length>o,canLoadMoreNonContacts:r.length>o}})})},AddonMessagesProvider.prototype.sendMessage=function(e,n,t){var o=this,r=function(){return o.messagesOffline.saveMessage(e,n,t).then(function(e){return{sent:!1,message:e}})};return t=t||this.sitesProvider.getCurrentSiteId(),this.appProvider.isOnline()?this.messagesOffline.hasMessages(e,t).catch(function(){return!0}).then(function(t){return t?r():o.sendMessageOnline(e,n).then(function(e){return{sent:!0,message:e}}).catch(function(e){return o.utils.isWebServiceError(e)?Promise.reject(e):r()})}):r()},AddonMessagesProvider.prototype.sendMessageOnline=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();return this.sendMessagesOnline([{touserid:e,text:n,textformat:1}],t).then(function(n){return n&&n[0]&&-1===n[0].msgid?Promise.reject(o.utils.createFakeWSError(n[0].errormessage)):o.invalidateDiscussionCache(e,t).catch(function(){}).then(function(){return n[0]})})},AddonMessagesProvider.prototype.sendMessagesOnline=function(e,n){return this.sitesProvider.getSite(n).then(function(n){return n.write("core_message_send_instant_messages",{messages:e})})},AddonMessagesProvider.prototype.sendMessageToConversation=function(e,n,t){var o=this,r=function(){return o.messagesOffline.saveConversationMessage(e,n,t).then(function(e){return{sent:!1,message:e}})};return t=t||this.sitesProvider.getCurrentSiteId(),this.appProvider.isOnline()?this.messagesOffline.hasConversationMessages(e.id,t).catch(function(){return!0}).then(function(t){return t?r():o.sendMessageToConversationOnline(e.id,n).then(function(e){return{sent:!0,message:e}}).catch(function(e){return o.utils.isWebServiceError(e)?Promise.reject(e):r()})}):r()},AddonMessagesProvider.prototype.sendMessageToConversationOnline=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();return this.sendMessagesToConversationOnline(e,[{text:n,textformat:1}],t).then(function(n){return o.invalidateConversationMessages(e,t).catch(function(){}).then(function(){return n[0]})})},AddonMessagesProvider.prototype.sendMessagesToConversationOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){var o={conversationid:e,messages:n.map(function(e){return{text:e.text,textformat:void 0!==e.textformat?e.textformat:1}})};return t.write("core_message_send_messages_to_conversation",o)})},AddonMessagesProvider.prototype.setFavouriteConversation=function(e,n,t,o){return this.setFavouriteConversations([e],n,t,o)},AddonMessagesProvider.prototype.setFavouriteConversations=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){o=o||t.getUserId();return t.write(n?"core_message_set_favourite_conversations":"core_message_unset_favourite_conversations",{userid:o,conversations:e}).then(function(){var n=[];return e.forEach(function(e){n.push(r.invalidateConversation(e,t.getId(),o))}),Promise.all(n).catch(function(){})})})},AddonMessagesProvider.prototype.sortConversations=function(e){return e.sort(function(e,n){var t=Number(e.lastmessagedate),o=Number(n.lastmessagedate);return t==o&&e.id?e.id<=n.id?1:-1:t<=o?1:-1})},AddonMessagesProvider.prototype.sortMessages=function(e){return e.sort(function(e,n){if(e.pending&&!n.pending)return 1;if(!e.pending&&n.pending)return-1;var t=parseInt(e.timecreated,10),o=parseInt(n.timecreated,10);return t==o&&e.id?e.id>=n.id?1:-1:t>=o?1:-1})},AddonMessagesProvider.prototype.storeLastReceivedMessageIfNeeded=function(n,t,o){var r=this,i=e.PUSH_SIMULATION_COMPONENT;return this.emulatorHelper.getLastReceivedNotification(i,o).then(function(e){if((!(n>0)||t&&e)&&!(t&&e&&t.timecreated<=e.timecreated))return r.emulatorHelper.storeLastReceivedNotification(i,t,o)})},AddonMessagesProvider.prototype.storeUsersFromAllContacts=function(e){for(var n in e)this.userProvider.storeUsers(e[n])},AddonMessagesProvider.prototype.storeUsersFromDiscussions=function(e,n){var t=[];for(var o in e)t.push({id:o,fullname:e[o].fullname,profileimageurl:e[o].profileimageurl});this.userProvider.storeUsers(t,n)},AddonMessagesProvider.prototype.unblockContact=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r;if(t.wsAvailable("core_message_unblock_user")){var i={userid:t.getUserId(),unblockeduserid:n};r=t.write("core_message_unblock_user",i)}else{r=t.write("core_message_unblock_contacts",i={userids:[n]},{responseExpected:!1})}return r.then(function(){return o.invalidateAllMemberInfo(n,t).finally(function(){o.eventsProvider.trigger(e.MEMBER_INFO_CHANGED_EVENT,{userId:n,userUnblocked:!0},t.id)})})})},AddonMessagesProvider.NEW_MESSAGE_EVENT="addon_messages_new_message_event",AddonMessagesProvider.READ_CHANGED_EVENT="addon_messages_read_changed_event",AddonMessagesProvider.OPEN_CONVERSATION_EVENT="addon_messages_open_conversation_event",AddonMessagesProvider.SPLIT_VIEW_LOAD_EVENT="addon_messages_split_view_load_event",AddonMessagesProvider.UPDATE_CONVERSATION_LIST_EVENT="addon_messages_update_conversation_list_event",AddonMessagesProvider.MEMBER_INFO_CHANGED_EVENT="addon_messages_member_changed_event",AddonMessagesProvider.UNREAD_CONVERSATION_COUNTS_EVENT="addon_messages_unread_conversation_counts_event",AddonMessagesProvider.CONTACT_REQUESTS_COUNT_EVENT="addon_messages_contact_requests_count_event",AddonMessagesProvider.POLL_INTERVAL=1e4,AddonMessagesProvider.PUSH_SIMULATION_COMPONENT="AddonMessagesPushSimulation",AddonMessagesProvider.MESSAGE_PRIVACY_COURSEMEMBER=0,AddonMessagesProvider.MESSAGE_PRIVACY_ONLYCONTACTS=1,AddonMessagesProvider.MESSAGE_PRIVACY_SITE=2,AddonMessagesProvider.MESSAGE_CONVERSATION_TYPE_INDIVIDUAL=1,AddonMessagesProvider.MESSAGE_CONVERSATION_TYPE_GROUP=2,AddonMessagesProvider.MESSAGE_CONVERSATION_TYPE_SELF=3,AddonMessagesProvider.LIMIT_CONTACTS=50,AddonMessagesProvider.LIMIT_MESSAGES=50,AddonMessagesProvider.LIMIT_INITIAL_USER_SEARCH=3,AddonMessagesProvider.LIMIT_SEARCH=50,AddonMessagesProvider.NOTIFICATION_PREFERENCES_KEY="message_provider_moodle_instantmessage",AddonMessagesProvider;var e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(54),r=function(){function CoreTagProvider(e,n){this.sitesProvider=e,this.translate=n,this.ROOT_CACHE_KEY="CoreTag:"}return e=CoreTagProvider,CoreTagProvider.prototype.areTagsAvailable=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.areTagsAvailableInSite(e)})},CoreTagProvider.prototype.areTagsAvailableInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_tag_get_tagindex_per_area")&&e.wsAvailable("core_tag_get_tag_cloud")&&e.wsAvailable("core_tag_get_tag_collections")&&!e.isFeatureDisabled("NoDelegate_CoreTag")},CoreTagProvider.prototype.getTagCloud=function(n,t,r,i,l,s,a,u,d){var c=this;return void 0===n&&(n=0),void 0===t&&(t=!1),void 0===r&&(r="name"),void 0===i&&(i=""),void 0===l&&(l=0),void 0===s&&(s=0),void 0===a&&(a=!0),u=u||e.SEARCH_LIMIT,this.sitesProvider.getSite(d).then(function(e){var d={tagcollid:n,isstandard:t,limit:u,sort:r,search:i,fromctx:l,ctx:s,rec:a},p={updateFrequency:o.a.FREQUENCY_SOMETIMES,cacheKey:c.getTagCloudKey(n,t,r,i,l,s,a),getFromCache:""!=i};return e.read("core_tag_get_tag_cloud",d,p)})},CoreTagProvider.prototype.getTagCollections=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t={updateFrequency:o.a.FREQUENCY_RARELY,cacheKey:n.getTagCollectionsKey()};return e.read("core_tag_get_tag_collections",null,t).then(function(e){return e&&e.collections?e.collections:Promise.reject(null)})})},CoreTagProvider.prototype.getTagIndexPerArea=function(e,n,t,r,i,l,s,a,u){var d=this;return void 0===n&&(n=""),void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===l&&(l=0),void 0===s&&(s=!0),void 0===a&&(a=0),this.sitesProvider.getSite(u).then(function(u){var c={tagindex:{id:e,tag:n,tc:t,ta:r,excl:!0,from:i,ctx:l,rec:s,page:a}},p={updateFrequency:o.a.FREQUENCY_OFTEN,cacheKey:d.getTagIndexPerAreaKey(e,n,t,r,i,l,s)};return u.read("core_tag_get_tagindex_per_area",c,p).catch(function(t){return t&&"notagsfound"==t.errorcode&&(t.message=d.translate.instant("core.tag.notagsfound",{$a:n||e||""})),Promise.reject(t)}).then(function(e){return e&&e.length?e:Promise.reject(null)})})},CoreTagProvider.prototype.invalidateTagCloud=function(e,n,t,o,r,i,l,s){var a=this;return void 0===e&&(e=0),void 0===n&&(n=!1),void 0===t&&(t="name"),void 0===o&&(o=""),void 0===r&&(r=0),void 0===i&&(i=0),void 0===l&&(l=!0),this.sitesProvider.getSite(s).then(function(s){var u=a.getTagCloudKey(e,n,t,o,r,i,l);return s.invalidateWsCacheForKey(u)})},CoreTagProvider.prototype.invalidateTagCollections=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t=n.getTagCollectionsKey();return e.invalidateWsCacheForKey(t)})},CoreTagProvider.prototype.invalidateTagIndexPerArea=function(e,n,t,o,r,i,l,s){var a=this;return void 0===n&&(n=""),void 0===t&&(t=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===l&&(l=!0),this.sitesProvider.getSite(s).then(function(s){var u=a.getTagIndexPerAreaKey(e,n,t,o,r,i,l);return s.invalidateWsCacheForKey(u)})},CoreTagProvider.prototype.getTagCloudKey=function(e,n,t,o,r,i,l){return this.ROOT_CACHE_KEY+"cloud:"+e+":"+(n?1:0)+":"+t+":"+o+":"+r+":"+i+":"+(l?1:0)},CoreTagProvider.prototype.getTagCollectionsKey=function(){return this.ROOT_CACHE_KEY+"collections"},CoreTagProvider.prototype.getTagIndexPerAreaKey=function(e,n,t,o,r,i,l){return this.ROOT_CACHE_KEY+"index:"+e+":"+n+":"+t+":"+o+":"+r+":"+i+":"+(l?1:0)},CoreTagProvider.SEARCH_LIMIT=150,CoreTagProvider;var e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonCompetencyProvider(e,n,t){this.sitesProvider=n,this.pushNotificationsProvider=t,this.ROOT_CACHE_KEY="mmaCompetency:",this.logger=e.getInstance("AddonCompetencyProvider")}return e=AddonCompetencyProvider,AddonCompetencyProvider.prototype.allCompetenciesDisabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.isFeatureDisabled("CoreMainMenuDelegate_AddonCompetency")&&e.isFeatureDisabled("CoreCourseOptionsDelegate_AddonCompetency")&&e.isFeatureDisabled("CoreUserDelegate_AddonCompetency")})},AddonCompetencyProvider.prototype.getLearningPlansCacheKey=function(e){return this.ROOT_CACHE_KEY+"userplans:"+e},AddonCompetencyProvider.prototype.getLearningPlanCacheKey=function(e){return this.ROOT_CACHE_KEY+"learningplan:"+e},AddonCompetencyProvider.prototype.getCompetencyInPlanCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"plancompetency:"+e+":"+n},AddonCompetencyProvider.prototype.getCompetencyInCourseCacheKey=function(e,n,t){return this.ROOT_CACHE_KEY+"coursecompetency:"+t+":"+e+":"+n},AddonCompetencyProvider.prototype.getCompetencySummaryCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"competencysummary:"+n+":"+e},AddonCompetencyProvider.prototype.getCourseCompetenciesCacheKey=function(e){return this.ROOT_CACHE_KEY+"coursecompetencies:"+e},AddonCompetencyProvider.prototype.isPluginForCourseEnabled=function(e,n){return this.sitesProvider.isLoggedIn()?this.getCourseCompetencies(e,0,n).catch(function(){return!1}):Promise.resolve(!1)},AddonCompetencyProvider.prototype.getLearningPlans=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){e=e||n.getUserId(),t.logger.debug("Get plans for user "+e);var r={userid:e},i={cacheKey:t.getLearningPlansCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("tool_lp_data_for_plans_page",r,i).then(function(e){return e.plans?e.plans:Promise.reject(null)})})},AddonCompetencyProvider.prototype.getLearningPlan=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){t.logger.debug("Get plan "+e);var r={planid:e},i={cacheKey:t.getLearningPlanCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("tool_lp_data_for_plan_page",r,i).then(function(e){return e.plan?e:Promise.reject(null)})})},AddonCompetencyProvider.prototype.getCompetencyInPlan=function(e,n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){r.logger.debug("Get competency "+n+" in plan "+e);var i={planid:e,competencyid:n},l={cacheKey:r.getCompetencyInPlanCacheKey(e,n),updateFrequency:o.a.FREQUENCY_SOMETIMES};return t.read("tool_lp_data_for_user_competency_summary_in_plan",i,l).then(function(e){return e.usercompetencysummary?e:Promise.reject(null)})})},AddonCompetencyProvider.prototype.getCompetencyInCourse=function(e,n,t,r,i){var l=this;return this.sitesProvider.getSite(r).then(function(r){t=t||r.getUserId(),l.logger.debug("Get competency "+n+" in course "+e);var s={courseid:e,competencyid:n,userid:t},a={cacheKey:l.getCompetencyInCourseCacheKey(e,n,t),updateFrequency:o.a.FREQUENCY_SOMETIMES};return i&&(a.getFromCache=!1,a.emergencyCache=!1),r.read("tool_lp_data_for_user_competency_summary_in_course",s,a).then(function(e){return e.usercompetencysummary?e:Promise.reject(null)})})},AddonCompetencyProvider.prototype.getCompetencySummary=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId(),i.logger.debug("Get competency "+e+" summary for user"+n);var l={competencyid:e,userid:n},s={cacheKey:i.getCompetencySummaryCacheKey(e,n),updateFrequency:o.a.FREQUENCY_SOMETIMES};return r&&(s.getFromCache=!1,s.emergencyCache=!1),t.read("tool_lp_data_for_user_competency_summary",l,s).then(function(e){return e.competency?e:Promise.reject(null)})})},AddonCompetencyProvider.prototype.getCourseCompetencies=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(t).then(function(n){i.logger.debug("Get course competencies for course "+e);var t={courseid:e},l={cacheKey:i.getCourseCompetenciesCacheKey(e),updateFrequency:o.a.FREQUENCY_SOMETIMES};return r&&(l.getFromCache=!1,l.emergencyCache=!1),n.read("tool_lp_data_for_course_competencies_page",t,l).then(function(e){return e.competencies?e:Promise.reject(null)})}).then(function(o){if(!n||n==i.sitesProvider.getCurrentSiteUserId())return o;var r;return r=o.competencies.map(function(o){return i.getCompetencyInCourse(e,o.competency.id,n,t)}),Promise.all(r).then(function(e){return e.forEach(function(e,n){o.competencies[n].usercompetencycourse=e.usercompetencysummary.usercompetencycourse}),o})})},AddonCompetencyProvider.prototype.invalidateLearningPlans=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return e=e||n.getUserId(),n.invalidateWsCacheForKey(t.getLearningPlansCacheKey(e))})},AddonCompetencyProvider.prototype.invalidateLearningPlan=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getLearningPlanCacheKey(e))})},AddonCompetencyProvider.prototype.invalidateCompetencyInPlan=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getCompetencyInPlanCacheKey(e,n))})},AddonCompetencyProvider.prototype.invalidateCompetencyInCourse=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return t=t||o.getUserId(),o.invalidateWsCacheForKey(r.getCompetencyInCourseCacheKey(e,n,t))})},AddonCompetencyProvider.prototype.invalidateCompetencySummary=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getCompetencySummaryCacheKey(e,n))})},AddonCompetencyProvider.prototype.invalidateCourseCompetencies=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(n){return n.invalidateWsCacheForKey(o.getCourseCompetenciesCacheKey(e))}).then(function(){if(n&&n!=o.sitesProvider.getCurrentSiteUserId())return o.getCourseCompetencies(e,0,t).then(function(r){var i=r.competencies.map(function(r){return o.invalidateCompetencyInCourse(e,r.competency.id,n,t)});return Promise.all(i)})})},AddonCompetencyProvider.prototype.logCompetencyInPlanView=function(n,t,o,r,i,l){var s=this;return n&&t?this.sitesProvider.getSite(l).then(function(a){i=i||a.getUserId();var u={planid:n,competencyid:t,userid:i},d=o==e.STATUS_COMPLETE?"core_competency_user_competency_plan_viewed":"core_competency_user_competency_viewed_in_plan";return s.pushNotificationsProvider.logViewEvent(t,r,"competency",d,{planid:n,planstatus:o,userid:i},l),a.write(d,u,{typeExpected:"boolean"}).then(function(e){if(!e)return Promise.reject(null)})}):Promise.reject(null)},AddonCompetencyProvider.prototype.logCompetencyInCourseView=function(e,n,t,o,r){var i=this;return e&&n?this.sitesProvider.getSite(r).then(function(l){o=o||l.getUserId();var s={courseid:e,competencyid:n,userid:o},a="core_competency_user_competency_viewed_in_course";return i.pushNotificationsProvider.logViewEvent(n,t,"competency",a,{courseid:e,userid:o},r),l.write(a,s,{typeExpected:"boolean"}).then(function(e){if(!e)return Promise.reject(null)})}):Promise.reject(null)},AddonCompetencyProvider.prototype.logCompetencyView=function(e,n,t){var o=this;return e?this.sitesProvider.getSite(t).then(function(r){var i={id:e},l="core_competency_competency_viewed";return o.pushNotificationsProvider.logViewEvent(e,n,"competency",l,{},t),r.write(l,i,{typeExpected:"boolean"}).then(function(e){if(!e)return Promise.reject(null)})}):Promise.reject(null)},AddonCompetencyProvider.STATUS_DRAFT=0,AddonCompetencyProvider.STATUS_ACTIVE=1,AddonCompetencyProvider.STATUS_COMPLETE=2,AddonCompetencyProvider.STATUS_WAITING_FOR_REVIEW=3,AddonCompetencyProvider.STATUS_IN_REVIEW=4,AddonCompetencyProvider.REVIEW_STATUS_IDLE=0,AddonCompetencyProvider.REVIEW_STATUS_WAITING_FOR_REVIEW=1,AddonCompetencyProvider.REVIEW_STATUS_IN_REVIEW=2,AddonCompetencyProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(99),i=(t(590),function(e){function AddonModAssignSubmissionDelegate(n,t,o,r){var i=e.call(this,"AddonModAssignSubmissionDelegate",n,t,o)||this;return i.defaultHandler=r,i.handlerNameProperty="type",i}return Object(o.__extends)(AddonModAssignSubmissionDelegate,e),AddonModAssignSubmissionDelegate.prototype.canPluginEditOffline=function(e,n,t){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"canEditOffline",[e,n,t]))},AddonModAssignSubmissionDelegate.prototype.clearTmpData=function(e,n,t,o){return this.executeFunctionOnEnabled(t.type,"clearTmpData",[e,n,t,o])},AddonModAssignSubmissionDelegate.prototype.copyPluginSubmissionData=function(e,n,t,o,r){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"copySubmissionData",[e,n,t,o,r]))},AddonModAssignSubmissionDelegate.prototype.deletePluginOfflineData=function(e,n,t,o,r){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"deleteOfflineData",[e,n,t,o,r]))},AddonModAssignSubmissionDelegate.prototype.getComponentForPlugin=function(e,n,t){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getComponent",[e,n,t]))},AddonModAssignSubmissionDelegate.prototype.getPluginFiles=function(e,n,t,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getPluginFiles",[e,n,t,o]))},AddonModAssignSubmissionDelegate.prototype.getPluginName=function(e){return this.executeFunctionOnEnabled(e.type,"getPluginName",[e])},AddonModAssignSubmissionDelegate.prototype.getPluginSizeForCopy=function(e,n){return Promise.resolve(this.executeFunctionOnEnabled(n.type,"getSizeForCopy",[e,n]))},AddonModAssignSubmissionDelegate.prototype.getPluginSizeForEdit=function(e,n,t,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"getSizeForEdit",[e,n,t,o]))},AddonModAssignSubmissionDelegate.prototype.hasPluginDataChanged=function(e,n,t,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"hasDataChanged",[e,n,t,o]))},AddonModAssignSubmissionDelegate.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},AddonModAssignSubmissionDelegate.prototype.isPluginSupportedForEdit=function(e){return Promise.resolve(this.executeFunctionOnEnabled(e,"isEnabledForEdit"))},AddonModAssignSubmissionDelegate.prototype.isPluginEmpty=function(e,n){return this.executeFunctionOnEnabled(n.type,"isEmpty",[e,n])},AddonModAssignSubmissionDelegate.prototype.prefetch=function(e,n,t,o){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"prefetch",[e,n,t,o]))},AddonModAssignSubmissionDelegate.prototype.preparePluginSubmissionData=function(e,n,t,o,r,i,l,s){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"prepareSubmissionData",[e,n,t,o,r,i,l,s]))},AddonModAssignSubmissionDelegate.prototype.preparePluginSyncData=function(e,n,t,o,r,i){return Promise.resolve(this.executeFunctionOnEnabled(t.type,"prepareSyncData",[e,n,t,o,r,i]))},AddonModAssignSubmissionDelegate}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(54),r=(t(130),t(263),function(){function AddonModQuizProvider(e,n,t,o,r,i,l,s,a,u,d,c,p,f){this.sitesProvider=n,this.utils=t,this.translate=o,this.textUtils=r,this.gradesHelper=i,this.questionDelegate=l,this.filepoolProvider=s,this.timeUtils=a,this.accessRulesDelegate=u,this.quizOfflineProvider=d,this.domUtils=c,this.logHelper=p,this.pushNotificationsProvider=f,this.ROOT_CACHE_KEY="mmaModQuiz:",this.logger=e.getInstance("AddonModQuizProvider")}return e=AddonModQuizProvider,AddonModQuizProvider.prototype.formatGrade=function(e,n){return void 0===e||-1==e||null===e?this.translate.instant("addon.mod_quiz.notyetgraded"):this.utils.formatFloat(this.textUtils.roundToDecimals(e,n))},AddonModQuizProvider.prototype.getAllQuestionsData=function(e,n,t,o,r,i,l){var s=this,a=[],u={},d=this.isNavigationSequential(e);return o||(o=this.getPagesFromLayout(n.layout)),o.forEach(function(e){d&&e<n.currentpage||a.push(s.getAttemptData(n.id,e,t,r,i,l).then(function(e){e.questions.forEach(function(e){u[e.slot]=e})}))}),Promise.all(a).then(function(){return u})},AddonModQuizProvider.prototype.getAttemptAccessInformationCacheKey=function(e,n){return this.getAttemptAccessInformationCommonCacheKey(e)+":"+n},AddonModQuizProvider.prototype.getAttemptAccessInformationCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptAccessInformation:"+e},AddonModQuizProvider.prototype.getAttemptAccessInformation=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={quizid:e,attemptid:n},s={cacheKey:i.getAttemptAccessInformationCacheKey(e,n)};return t?s.omitExpires=!0:o&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_quiz_get_attempt_access_information",l,s)})},AddonModQuizProvider.prototype.getAttemptDataCacheKey=function(e,n){return this.getAttemptDataCommonCacheKey(e)+":"+n},AddonModQuizProvider.prototype.getAttemptDataCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptData:"+e},AddonModQuizProvider.prototype.getAttemptData=function(e,n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={attemptid:e,page:n,preflightdata:l.utils.objectToArrayOfObjects(t,"name","value",!0)},a={cacheKey:l.getAttemptDataCacheKey(e,n)};return o?a.omitExpires=!0:r&&(a.getFromCache=!1,a.emergencyCache=!1),i.read("mod_quiz_get_attempt_data",s,a)})},AddonModQuizProvider.prototype.getAttemptDueDate=function(n,t){var o=[];if(n.timelimit&&o.push(parseInt(t.timestart,10)+parseInt(n.timelimit,10)),n.timeclose&&o.push(parseInt(n.timeclose,10)),!o.length)return 0;var r=Math.min.apply(null,o);if(!r)return 0;switch(t.state){case e.ATTEMPT_IN_PROGRESS:return 1e3*r;case e.ATTEMPT_OVERDUE:return 1e3*(r+parseInt(n.graceperiod,10));default:return this.logger.warn("Unexpected state when getting due date: "+t.state),0}},AddonModQuizProvider.prototype.getAttemptDueDateWarning=function(n,t){var o=this.getAttemptDueDate(n,t);return t.state===e.ATTEMPT_OVERDUE?this.translate.instant("addon.mod_quiz.overduemustbesubmittedby",{$a:this.timeUtils.userDate(o)}):o?this.translate.instant("addon.mod_quiz.mustbesubmittedby",{$a:this.timeUtils.userDate(o)}):void 0},AddonModQuizProvider.prototype.getAttemptReadableState=function(n,t){if(t.finishedOffline)return[this.translate.instant("addon.mod_quiz.finishnotsynced")];switch(t.state){case e.ATTEMPT_IN_PROGRESS:return[this.translate.instant("addon.mod_quiz.stateinprogress")];case e.ATTEMPT_OVERDUE:var o=[],r=this.getAttemptDueDate(n,t);return o.push(this.translate.instant("addon.mod_quiz.stateoverdue")),r&&o.push(this.translate.instant("addon.mod_quiz.stateoverduedetails",{$a:this.timeUtils.userDate(r)})),o;case e.ATTEMPT_FINISHED:return[this.translate.instant("addon.mod_quiz.statefinished"),this.translate.instant("addon.mod_quiz.statefinisheddetails",{$a:this.timeUtils.userDate(1e3*t.timefinish)})];case e.ATTEMPT_ABANDONED:return[this.translate.instant("addon.mod_quiz.stateabandoned")];default:return[]}},AddonModQuizProvider.prototype.getAttemptReadableStateName=function(n){switch(n){case e.ATTEMPT_IN_PROGRESS:return this.translate.instant("addon.mod_quiz.stateinprogress");case e.ATTEMPT_OVERDUE:return this.translate.instant("addon.mod_quiz.stateoverdue");case e.ATTEMPT_FINISHED:return this.translate.instant("addon.mod_quiz.statefinished");case e.ATTEMPT_ABANDONED:return this.translate.instant("addon.mod_quiz.stateabandoned");default:return""}},AddonModQuizProvider.prototype.getAttemptReviewCacheKey=function(e,n){return this.getAttemptReviewCommonCacheKey(e)+":"+n},AddonModQuizProvider.prototype.getAttemptReviewCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptReview:"+e},AddonModQuizProvider.prototype.getAttemptReview=function(e,n,t,o){var r=this;return void 0===n&&(n=-1),this.sitesProvider.getSite(o).then(function(o){var i={attemptid:e,page:n},l={cacheKey:r.getAttemptReviewCacheKey(e,n),cacheErrors:["noreview"]};return t&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_quiz_get_attempt_review",i,l)})},AddonModQuizProvider.prototype.getAttemptSummaryCacheKey=function(e){return this.ROOT_CACHE_KEY+"attemptSummary:"+e},AddonModQuizProvider.prototype.getAttemptSummary=function(e,n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={attemptid:e,preflightdata:l.utils.objectToArrayOfObjects(n,"name","value",!0)},a={cacheKey:l.getAttemptSummaryCacheKey(e)};return t?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),i.read("mod_quiz_get_attempt_summary",s,a).then(function(n){return n&&n.questions?t&&r?l.quizOfflineProvider.loadQuestionsLocalStates(e,n.questions,i.getId()):n.questions:Promise.reject(null)})})},AddonModQuizProvider.prototype.getCombinedReviewOptionsCacheKey=function(e,n){return this.getCombinedReviewOptionsCommonCacheKey(e)+":"+n},AddonModQuizProvider.prototype.getCombinedReviewOptionsCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"combinedReviewOptions:"+e},AddonModQuizProvider.prototype.getCombinedReviewOptions=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){o=o||t.getUserId();var i={quizid:e,userid:o},l={cacheKey:r.getCombinedReviewOptionsCacheKey(e,o)};return n&&(l.getFromCache=!1,l.emergencyCache=!1),t.read("mod_quiz_get_combined_review_options",i,l).then(function(e){return e&&e.someoptions&&e.alloptions?(e.someoptions=r.utils.objectToKeyValueMap(e.someoptions,"name","value"),e.alloptions=r.utils.objectToKeyValueMap(e.alloptions,"name","value"),e):Promise.reject(null)})})},AddonModQuizProvider.prototype.getFeedbackForGradeCacheKey=function(e,n){return this.getFeedbackForGradeCommonCacheKey(e)+":"+n},AddonModQuizProvider.prototype.getFeedbackForGradeCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"feedbackForGrade:"+e},AddonModQuizProvider.prototype.getFeedbackForGrade=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={quizid:e,grade:n},s={cacheKey:i.getFeedbackForGradeCacheKey(e,n),updateFrequency:o.a.FREQUENCY_RARELY};return t&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_quiz_get_quiz_feedback_for_grade",l,s)})},AddonModQuizProvider.prototype.getGradeDecimals=function(e){return void 0===e.questiondecimalpoints&&(e.questiondecimalpoints=-1),-1==e.questiondecimalpoints?e.decimalpoints:e.questiondecimalpoints},AddonModQuizProvider.prototype.getGradeFromGradebook=function(e,n,t,o,r){return this.gradesHelper.getGradeModuleItems(e,n,r,null,o,t).then(function(e){return e.shift()})},AddonModQuizProvider.prototype.getLastFinishedAttemptFromList=function(e){if(e&&e.length)for(var n=e.length-1;n>=0;n--){var t=e[n];if(this.isAttemptFinished(t.state))return t}},AddonModQuizProvider.prototype.getPreventSubmitMessages=function(e){var n=this,t=[];return e.forEach(function(e){if("random"==e.type||n.questionDelegate.isQuestionSupported(e.type)){var o=n.questionDelegate.getPreventSubmitMessage(e);o&&(o=n.translate.instant(o),t.push(n.translate.instant("core.question.questionmessage",{$a:e.slot,$b:o})))}else t.push(n.translate.instant("core.question.questionmessage",{$a:e.slot,$b:n.translate.instant("core.question.errorquestionnotsupported",{$a:e.type})}))}),t},AddonModQuizProvider.prototype.getQuizDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"quiz:"+e},AddonModQuizProvider.prototype.getQuizByField=function(e,n,t,r,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){var a={courseids:[e]},u={cacheKey:s.getQuizDataCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return r?u.omitExpires=!0:i&&(u.getFromCache=!1,u.emergencyCache=!1),l.read("mod_quiz_get_quizzes_by_courses",a,u).then(function(e){if(e&&e.quizzes)for(var o in e.quizzes){var r=e.quizzes[o];if(r[n]==t)return r}return Promise.reject(null)})})},AddonModQuizProvider.prototype.getQuiz=function(e,n,t,o,r){return this.getQuizByField(e,"coursemodule",n,t,o,r)},AddonModQuizProvider.prototype.getQuizById=function(e,n,t,o,r){return this.getQuizByField(e,"id",n,t,o,r)},AddonModQuizProvider.prototype.getQuizAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"quizAccessInformation:"+e},AddonModQuizProvider.prototype.getQuizAccessInformation=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={quizid:e},l={cacheKey:r.getQuizAccessInformationCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_quiz_get_quiz_access_information",i,l)})},AddonModQuizProvider.prototype.getQuizGradeMethod=function(n){switch("string"==typeof n&&(n=parseInt(n,10)),n){case e.GRADEHIGHEST:return this.translate.instant("addon.mod_quiz.gradehighest");case e.GRADEAVERAGE:return this.translate.instant("addon.mod_quiz.gradeaverage");case e.ATTEMPTFIRST:return this.translate.instant("addon.mod_quiz.attemptfirst");case e.ATTEMPTLAST:return this.translate.instant("addon.mod_quiz.attemptlast");default:return""}},AddonModQuizProvider.prototype.getQuizRequiredQtypesCacheKey=function(e){return this.ROOT_CACHE_KEY+"quizRequiredQtypes:"+e},AddonModQuizProvider.prototype.getQuizRequiredQtypes=function(e,n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={quizid:e},l={cacheKey:r.getQuizRequiredQtypesCacheKey(e),updateFrequency:o.a.FREQUENCY_SOMETIMES};return n&&(l.getFromCache=!1,l.emergencyCache=!1),t.read("mod_quiz_get_quiz_required_qtypes",i,l).then(function(e){return e&&e.questiontypes?e.questiontypes:Promise.reject(null)})})},AddonModQuizProvider.prototype.getPagesFromLayout=function(e){for(var n=e.split(","),t=[],o=0,r=0;r<n.length;r++)"0"==n[r]&&(t.push(o),o++);return t},AddonModQuizProvider.prototype.getPagesFromLayoutAndQuestions=function(e,n){for(var t=e.split(","),o=[],r=0,i=!1,l=0;l<t.length;l++){var s=Number(t[l]);0==s?(r++,i=!1):!i&&n[s]&&(o.push(r),i=!0)}return o},AddonModQuizProvider.prototype.getUnsupportedQuestions=function(e){var n=this,t=[];return e.forEach(function(e){"random"==e||n.questionDelegate.isQuestionSupported(e)||t.push(e)}),t},AddonModQuizProvider.prototype.getUnsupportedRules=function(e){var n=this,t=[];return e.forEach(function(e){n.accessRulesDelegate.isAccessRuleSupported(e)||t.push(e)}),t},AddonModQuizProvider.prototype.getUserAttemptsCacheKey=function(e,n){return this.getUserAttemptsCommonCacheKey(e)+":"+n},AddonModQuizProvider.prototype.getUserAttemptsCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userAttempts:"+e},AddonModQuizProvider.prototype.getUserAttempts=function(e,n,t,r,i,l,s){var a=this;return void 0===n&&(n="all"),void 0===t&&(t=!0),this.sitesProvider.getSite(l).then(function(l){s=s||l.getUserId();var u={quizid:e,userid:s,status:n,includepreviews:t?1:0},d={cacheKey:a.getUserAttemptsCacheKey(e,s),updateFrequency:o.a.FREQUENCY_SOMETIMES};return r?d.omitExpires=!0:i&&(d.getFromCache=!1,d.emergencyCache=!1),l.read("mod_quiz_get_user_attempts",u,d).then(function(e){return e&&e.attempts?e.attempts:Promise.reject(null)})})},AddonModQuizProvider.prototype.getUserBestGradeCacheKey=function(e,n){return this.getUserBestGradeCommonCacheKey(e)+":"+n},AddonModQuizProvider.prototype.getUserBestGradeCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userBestGrade:"+e},AddonModQuizProvider.prototype.getUserBestGrade=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){o=o||t.getUserId();var i={quizid:e,userid:o},l={cacheKey:r.getUserBestGradeCacheKey(e,o)};return n&&(l.getFromCache=!1,l.emergencyCache=!1),t.read("mod_quiz_get_user_best_grade",i,l)})},AddonModQuizProvider.prototype.invalidateAllQuizData=function(e,n,t,o,r){o=o||this.sitesProvider.getCurrentSiteId();var i=[];return i.push(this.invalidateAttemptAccessInformation(e,o)),i.push(this.invalidateCombinedReviewOptionsForUser(e,o,r)),i.push(this.invalidateFeedback(e,o)),i.push(this.invalidateQuizAccessInformation(e,o)),i.push(this.invalidateQuizRequiredQtypes(e,o)),i.push(this.invalidateUserAttemptsForUser(e,o,r)),i.push(this.invalidateUserBestGradeForUser(e,o,r)),t&&(i.push(this.invalidateAttemptData(t,o)),i.push(this.invalidateAttemptReview(t,o)),i.push(this.invalidateAttemptSummary(t,o))),n&&i.push(this.invalidateGradeFromGradebook(n,o,r)),Promise.all(i)},AddonModQuizProvider.prototype.invalidateAttemptAccessInformation=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getAttemptAccessInformationCommonCacheKey(e))})},AddonModQuizProvider.prototype.invalidateAttemptAccessInformationForAttempt=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getAttemptAccessInformationCacheKey(e,n))})},AddonModQuizProvider.prototype.invalidateAttemptData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getAttemptDataCommonCacheKey(e))})},AddonModQuizProvider.prototype.invalidateAttemptDataForPage=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getAttemptDataCacheKey(e,n))})},AddonModQuizProvider.prototype.invalidateAttemptReview=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getAttemptReviewCommonCacheKey(e))})},AddonModQuizProvider.prototype.invalidateAttemptReviewForPage=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getAttemptReviewCacheKey(e,n))})},AddonModQuizProvider.prototype.invalidateAttemptSummary=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAttemptSummaryCacheKey(e))})},AddonModQuizProvider.prototype.invalidateCombinedReviewOptions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getCombinedReviewOptionsCommonCacheKey(e))})},AddonModQuizProvider.prototype.invalidateCombinedReviewOptionsForUser=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getCombinedReviewOptionsCacheKey(e,t))})},AddonModQuizProvider.prototype.invalidateContent=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getQuiz(n,e,!0,!1,t).then(function(e){return o.getUserAttempts(e.id,"all",!0,!1,!1,t).then(function(r){return o.invalidateAllQuizData(e.id,n,r.length?r[r.length-1].id:void 0,t)})})},AddonModQuizProvider.prototype.invalidateFeedback=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getFeedbackForGradeCommonCacheKey(e))})},AddonModQuizProvider.prototype.invalidateFeedbackForGrade=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getFeedbackForGradeCacheKey(e,n))})},AddonModQuizProvider.prototype.invalidateFiles=function(n){return this.filepoolProvider.invalidateFilesByComponent(this.sitesProvider.getCurrentSiteId(),e.COMPONENT,n)},AddonModQuizProvider.prototype.invalidateGradeFromGradebook=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(r){return t=t||r.getUserId(),o.gradesHelper.invalidateGradeModuleItems(e,t,null,n)})},AddonModQuizProvider.prototype.invalidateQuizAccessInformation=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getQuizAccessInformationCacheKey(e))})},AddonModQuizProvider.prototype.invalidateQuizRequiredQtypes=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getQuizRequiredQtypesCacheKey(e))})},AddonModQuizProvider.prototype.invalidateUserAttempts=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getUserAttemptsCommonCacheKey(e))})},AddonModQuizProvider.prototype.invalidateUserAttemptsForUser=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getUserAttemptsCacheKey(e,t))})},AddonModQuizProvider.prototype.invalidateUserBestGrade=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getUserBestGradeCommonCacheKey(e))})},AddonModQuizProvider.prototype.invalidateUserBestGradeForUser=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getUserBestGradeCacheKey(e,t))})},AddonModQuizProvider.prototype.invalidateQuizData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getQuizDataCacheKey(e))})},AddonModQuizProvider.prototype.isAttemptFinished=function(n){return n==e.ATTEMPT_FINISHED||n==e.ATTEMPT_ABANDONED},AddonModQuizProvider.prototype.isAttemptFinishedOffline=function(e,n){return this.quizOfflineProvider.getAttemptById(e,n).then(function(e){return!!e.finished}).catch(function(){return!1})},AddonModQuizProvider.prototype.isAttemptTimeNearlyOver=function(n,t){if(t.state!=e.ATTEMPT_IN_PROGRESS)return!0;var o=this.getAttemptDueDate(n,t),r=n.autosaveperiod||0;return o>0&&Date.now()+r>=o},AddonModQuizProvider.prototype.isLastAttemptOfflineUnfinished=function(e,n,t){return this.quizOfflineProvider.getQuizAttempts(e.id,n,t).then(function(e){var n=e.pop();return n&&!n.finished}).catch(function(){return!1})},AddonModQuizProvider.prototype.isNavigationSequential=function(e){return"sequential"==e.navmethod},AddonModQuizProvider.prototype.isPluginEnabled=function(e){return!0},AddonModQuizProvider.prototype.isQuestionBlocked=function(e){return!!this.domUtils.convertToElement(e.html).querySelector(".mod_quiz-blocked_question_warning")},AddonModQuizProvider.prototype.isQuizOffline=function(e){return!!e.allowofflineattempts&&!this.sitesProvider.getCurrentSite().isOfflineDisabled()},AddonModQuizProvider.prototype.loadFinishedOfflineData=function(e,n){if(e.length){var t=e[e.length-1];return this.isAttemptFinishedOffline(t.id,n).then(function(e){t.finishedOffline=e})}return Promise.resolve()},AddonModQuizProvider.prototype.logViewAttempt=function(e,n,t,o,r,i){var l=this;return void 0===n&&(n=0),void 0===t&&(t={}),this.sitesProvider.getSite(i).then(function(s){var a={attemptid:e,page:n,preflightdata:l.utils.objectToArrayOfObjects(t,"name","value",!0)},u=[];return u.push(s.write("mod_quiz_view_attempt",a)),o&&u.push(l.quizOfflineProvider.setAttemptCurrentPage(e,n,s.getId())),r&&l.pushNotificationsProvider.logViewEvent(r.id,r.name,"quiz","mod_quiz_view_attempt",{attemptid:e,page:n},i),Promise.all(u)})},AddonModQuizProvider.prototype.logViewAttemptReview=function(n,t,o,r){var i={attemptid:n};return this.logHelper.logSingle("mod_quiz_view_attempt_review",i,e.COMPONENT,t,o,"quiz",i,r)},AddonModQuizProvider.prototype.logViewAttemptSummary=function(n,t,o,r,i){var l={attemptid:n,preflightdata:this.utils.objectToArrayOfObjects(t,"name","value",!0)};return this.logHelper.logSingle("mod_quiz_view_attempt_summary",l,e.COMPONENT,o,r,"quiz",{attemptid:n},i)},AddonModQuizProvider.prototype.logViewQuiz=function(n,t,o){return this.logHelper.logSingle("mod_quiz_view_quiz",{quizid:n},e.COMPONENT,n,t,"quiz",{},o)},AddonModQuizProvider.prototype.processAttempt=function(e,n,t,o,r,i,l,s){return l?this.processAttemptOffline(e,n,t,o,r,s):this.processAttemptOnline(n.id,t,o,r,i,s)},AddonModQuizProvider.prototype.processAttemptOnline=function(e,n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={attemptid:e,data:l.utils.objectToArrayOfObjects(n,"name","value"),finishattempt:o?1:0,timeup:r?1:0,preflightdata:l.utils.objectToArrayOfObjects(t,"name","value")};return i.write("mod_quiz_process_attempt",s).then(function(e){return e&&e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e&&e.state?e.state:Promise.reject(null)})})},AddonModQuizProvider.prototype.processAttemptOffline=function(e,n,t,o,r,i){var l=this;return this.getAttemptSummary(n.id,o,!0,!1,!0,i).then(function(o){var s=l.utils.arrayToObject(o,"slot");return l.quizOfflineProvider.processAttempt(e,n,s,t,r,i)})},AddonModQuizProvider.prototype.quizHasGrades=function(e){return e.grade>=5e-6&&e.sumgrades>=5e-6},AddonModQuizProvider.prototype.rescaleGrade=function(e,n,t){void 0===t&&(t=!0);var o,r=parseFloat(e);return isNaN(r)||(o=n.sumgrades>=5e-6?r*n.grade/n.sumgrades:0),"question"===t?this.formatGrade(o,this.getGradeDecimals(n)):t?this.formatGrade(o,n.decimalpoints):null===o?null:void 0!==o?String(o):void 0},AddonModQuizProvider.prototype.saveAttempt=function(e,n,t,o,r,i){try{return r?this.processAttemptOffline(e,n,t,o,!1,i):this.saveAttemptOnline(n.id,t,o,i)}catch(e){return this.logger.error(e),Promise.reject(null)}},AddonModQuizProvider.prototype.saveAttemptOnline=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={attemptid:e,data:r.utils.objectToArrayOfObjects(n,"name","value"),preflightdata:r.utils.objectToArrayOfObjects(t,"name","value")};return o.write("mod_quiz_save_attempt",i).then(function(e){return e&&e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e&&e.status?void 0:Promise.reject(null)})})},AddonModQuizProvider.prototype.shouldShowTimeLeft=function(n,t,o){var r=this.timeUtils.timestamp();return t.state==e.ATTEMPT_IN_PROGRESS&&this.accessRulesDelegate.shouldShowTimeLeft(n,t,o,r)},AddonModQuizProvider.prototype.startAttempt=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={quizid:e,preflightdata:r.utils.objectToArrayOfObjects(n,"name","value",!0),forcenew:t?1:0};return o.write("mod_quiz_start_attempt",i).then(function(e){return e&&e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e&&e.attempt?e.attempt:Promise.reject(null)})})},AddonModQuizProvider.COMPONENT="mmaModQuiz",AddonModQuizProvider.ATTEMPT_FINISHED_EVENT="addon_mod_quiz_attempt_finished",AddonModQuizProvider.GRADEHIGHEST=1,AddonModQuizProvider.GRADEAVERAGE=2,AddonModQuizProvider.ATTEMPTFIRST=3,AddonModQuizProvider.ATTEMPTLAST=4,AddonModQuizProvider.QUESTION_OPTIONS_MAX_ONLY=1,AddonModQuizProvider.QUESTION_OPTIONS_MARK_AND_MAX=2,AddonModQuizProvider.ATTEMPT_IN_PROGRESS="inprogress",AddonModQuizProvider.ATTEMPT_OVERDUE="overdue",AddonModQuizProvider.ATTEMPT_FINISHED="finished",AddonModQuizProvider.ATTEMPT_ABANDONED="abandoned",AddonModQuizProvider.QUIZ_SHOW_TIME_BEFORE_DEADLINE=3600,AddonModQuizProvider;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreGradesProvider(e,n,t,o){this.sitesProvider=n,this.coursesProvider=t,this.pushNotificationsProvider=o,this.ROOT_CACHE_KEY="mmGrades:",this.logger=e.getInstance("CoreGradesProvider")}return CoreGradesProvider.prototype.getCourseGradesCacheKey=function(e,n){return this.getCourseGradesPrefixCacheKey(e)+n},CoreGradesProvider.prototype.getCourseGradesItemsCacheKey=function(e,n,t){return t=t||0,this.getCourseGradesPrefixCacheKey(e)+n+":"+t},CoreGradesProvider.prototype.getCourseGradesPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+"items:"+e+":"},CoreGradesProvider.prototype.getCoursesGradesCacheKey=function(){return this.ROOT_CACHE_KEY+"coursesgrades"},CoreGradesProvider.prototype.getGradeItems=function(e,n,t,o,r){var i=this;return void 0===r&&(r=!1),o=o||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(o).then(function(l){return n=n||l.getUserId(),i.isGradeItemsAvalaible(o).then(function(l){return l?i.getCourseGradesItems(e,n,t,o,r).catch(function(){return i.getCourseGradesTable(e,n,o,r)}):i.getCourseGradesTable(e,n,o,r)})})},CoreGradesProvider.prototype.getCourseGradesItems=function(e,n,t,o,r){var i=this;return void 0===r&&(r=!1),this.sitesProvider.getSite(o).then(function(o){n=n||o.getUserId(),t=t||0,i.logger.debug("Get grades for course '"+e+"' and user '"+n+"'");var l={courseid:e,userid:n,groupid:t},s={cacheKey:i.getCourseGradesItemsCacheKey(e,n,t)};return r&&(s.getFromCache=0,s.emergencyCache=0),o.read("gradereport_user_get_grade_items",l,s).then(function(e){return e&&e.usergrades&&e.usergrades[0]?e.usergrades[0].gradeitems:Promise.reject(null)})})},CoreGradesProvider.prototype.getCourseGradesTable=function(e,n,t,o){var r=this;return void 0===o&&(o=!1),this.sitesProvider.getSite(t).then(function(t){n=n||t.getUserId(),r.logger.debug("Get grades for course '"+e+"' and user '"+n+"'");var i={courseid:e,userid:n},l={cacheKey:r.getCourseGradesCacheKey(e,n)};return o&&(l.getFromCache=0,l.emergencyCache=0),t.read("gradereport_user_get_grades_table",i,l).then(function(e){return e&&e.tables&&e.tables[0]?e.tables[0]:Promise.reject(null)})})},CoreGradesProvider.prototype.getCoursesGrades=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){n.logger.debug("Get course grades");var t={cacheKey:n.getCoursesGradesCacheKey()};return e.read("gradereport_overview_get_course_grades",void 0,t).then(function(e){return e&&e.grades?e.grades:Promise.reject(null)})})},CoreGradesProvider.prototype.invalidateAllCourseGradesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getCourseGradesPrefixCacheKey(e))})},CoreGradesProvider.prototype.invalidateCourseGradesData=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKey(o.getCourseGradesCacheKey(e,n))})},CoreGradesProvider.prototype.invalidateCoursesGradesData=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getCoursesGradesCacheKey())})},CoreGradesProvider.prototype.invalidateCourseGradesItemsData=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.invalidateWsCacheForKey(r.getCourseGradesItemsCacheKey(e,n,t))})},CoreGradesProvider.prototype.isCourseGradesEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){if(!e.wsAvailable("gradereport_overview_get_course_grades"))return!1;return-1!==(e.getStoredConfig("mygradesurl")||"").indexOf("/grade/report/overview/")})},CoreGradesProvider.prototype.isPluginEnabledForCourse=function(e,n){return e?this.coursesProvider.getUserCourse(e,!0,n).then(function(e){return!(e&&void 0!==e.showgrades&&0==e.showgrades)}):Promise.reject(null)},CoreGradesProvider.prototype.isGradeItemsAvalaible=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("gradereport_user_get_grade_items")})},CoreGradesProvider.prototype.logCourseGradesView=function(e,n,t){var o=this;n=n||this.sitesProvider.getCurrentSiteUserId();var r="gradereport_user_view_grade_report";return t?this.pushNotificationsProvider.logViewEvent(e,t,"grades",r,{userid:n}):this.coursesProvider.getUserCourse(e,!0).catch(function(){return{}}).then(function(t){o.pushNotificationsProvider.logViewEvent(e,t.fullname||"","grades",r,{userid:n})}),this.sitesProvider.getCurrentSite().write(r,{courseid:e,userid:n})},CoreGradesProvider.prototype.logCoursesGradesView=function(e){e||(e=this.sitesProvider.getCurrentSiteHomeId());var n={courseid:e};return this.pushNotificationsProvider.logViewListEvent("grades","gradereport_overview_view_grade_report",n),this.sitesProvider.getCurrentSite().write("gradereport_overview_view_grade_report",n)},CoreGradesProvider.TYPE_NONE=0,CoreGradesProvider.TYPE_VALUE=1,CoreGradesProvider.TYPE_SCALE=2,CoreGradesProvider.TYPE_TEXT=3,CoreGradesProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var o=t(169),r=t(54),i=(t(286),function(){function AddonModLessonProvider(n,t,o,r,i,l,s,a,u){this.sitesProvider=t,this.utils=o,this.translate=r,this.textUtils=i,this.domUtils=l,this.lessonOfflineProvider=s,this.logHelper=a,this.eventsProvider=u,this.siteSchema={name:"AddonModLessonProvider",version:1,tables:[{name:e.PASSWORD_TABLE,columns:[{name:"lessonid",type:"INTEGER",primaryKey:!0},{name:"password",type:"TEXT"},{name:"timemodified",type:"INTEGER"}]}]},this.ROOT_CACHE_KEY="mmaModLesson:",this.logger=n.getInstance("AddonModLessonProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModLessonProvider,AddonModLessonProvider.prototype.addAnswerAndResponseToFeedback=function(e,n,t,o,r){return e+='<tr><td class="cell c0 lastcol">'+(t?n:this.textUtils.cleanTags(n))+"</td></tr>",o&&o.trim()?e+='<tr><td class="cell c0 lastcol '+r+'"><em>'+this.translate.instant("addon.mod_lesson.response")+"</em>: <br/>"+o+"</td></tr>":e+='<tr><td class="cell c0 lastcol"></td></tr>',e},AddonModLessonProvider.prototype.addMessage=function(e,n,t){e.push({message:this.translate.instant(n,t)})},AddonModLessonProvider.prototype.addResultValueEolPage=function(e,n,t,o){var r="";if(o){r=this.translate.instant("addon.mod_lesson."+n,"boolean"!=typeof t?{$a:t}:void 0)}e.data[n]={name:n,value:t,message:r}},AddonModLessonProvider.prototype.answerPageIsContent=function(e){if(e.qtype==this.translate.instant("addon.mod_lesson.branchtable"))return!0;if(e.answerdata&&!this.answerPageIsQuestion(e)&&e.answerdata.answers&&e.answerdata.answers[0]){return!!this.domUtils.convertToElement(e.answerdata.answers[0][0]).querySelector('input[type="button"]')}return!1},AddonModLessonProvider.prototype.answerPageIsQuestion=function(e){if(!e.answerdata)return!1;if(e.answerdata.score)return!0;if(e.answerdata.answers)for(var n=0;n<e.answerdata.answers.length;n++){if(e.answerdata.answers[n][1])return!0}return!1},AddonModLessonProvider.prototype.calculateOfflineData=function(e,n,t,o,r,i){n=n||{};var l,s=o||n.reviewmode,a=[],u="";return n.canmanage||(e.ongoing&&!s&&a.push(this.getOngoingScoreMessage(e,n,t,o,r,i).then(function(e){u=e})),e.progressbar&&a.push(this.calculateProgress(e.id,n,t,o,r,i).then(function(e){l=e}))),Promise.all(a).then(function(){return{reviewmode:s,progress:l,ongoingscore:u}})},AddonModLessonProvider.prototype.calculateProgress=function(e,n,t,o,r,i){var l=this;if(i=i||this.sitesProvider.getCurrentSiteId(),o)return Promise.resolve(100);var s,a=n.attemptscount;return(r?Promise.resolve():this.getPages(e,t,!0,!1,i).then(function(e){r=l.createPagesIndex(e)})).then(function(){return l.getPagesIdsWithQuestionAttempts(e,a,!1,i)}).then(function(n){return s=n,l.getContentPagesViewedIds(e,a,i)}).then(function(e){var t={},o=n.firstpageid;for(s=l.utils.mergeArraysWithoutDuplicates(s,e);o;)o=l.validPageAndView(r,r[o],t,s);return 100*l.textUtils.roundToDecimals(s.length/Object.keys(t).length,2)})},AddonModLessonProvider.prototype.checkAnswer=function(n,t,o,r,i){var l={answerid:0,noanswer:!1,correctanswer:!1,isessayquestion:!1,response:"",newpageid:0,studentanswer:"",userresponse:null,feedback:"",nodefaultresponse:!1,inmediatejump:!1};switch(t.page.qtype){case e.LESSON_PAGE_BRANCHTABLE:l.inmediatejump=!0,l.newpageid=this.getNewPageId(t.page.id,o.jumpto,r);break;case e.LESSON_PAGE_ESSAY:this.checkAnswerEssay(t,o,l);break;case e.LESSON_PAGE_MATCHING:this.checkAnswerMatching(t,o,l);break;case e.LESSON_PAGE_MULTICHOICE:this.checkAnswerMultichoice(n,t,o,i,l);break;case e.LESSON_PAGE_NUMERICAL:this.checkAnswerNumerical(n,t,o,i,l);break;case e.LESSON_PAGE_SHORTANSWER:this.checkAnswerShort(n,t,o,i,l);break;case e.LESSON_PAGE_TRUEFALSE:this.checkAnswerTruefalse(n,t,o,i,l)}return l},AddonModLessonProvider.prototype.checkAnswerEssay=function(e,n,t){var o;if(t.isessayquestion=!0,!n)return t.inmediatejump=!0,void(t.newpageid=e.page.id);(o=void 0!==n["answer_editor[text]"]?n["answer_editor[text]"]:"object"==typeof n.answer_editor?n.answer_editor.text:void 0!==n["answer[text]"]?n["answer[text]"]:"object"==typeof n.answer?n.answer.text:n.answer)&&""!==o.trim()?(e.answers.forEach(function(e){t.answerid=e.id,t.newpageid=e.jumpto}),t.userresponse={sent:0,graded:0,score:0,answer:o,answerformat:1,response:"",responseformat:1},t.studentanswerformat=1,t.studentanswer=o):t.noanswer=!0},AddonModLessonProvider.prototype.checkAnswerMatching=function(e,n,t){if(!n)return t.inmediatejump=!0,void(t.newpageid=e.page.id);var o=this.getUserResponseMatching(n),r=this.utils.clone(e.answers),i=r.shift(),l=r.shift(),s={};r.forEach(function(e){""===e.answer&&""===e.response||(s[e.id]=e)});var a=[],u=0;t.studentanswer="",t.studentanswerformat=1;for(var d in o){var c=o[d];if(!c)return void(t.noanswer=!0);if(c=this.textUtils.decodeHTML(c),a.push(c),void 0!==s[d]){var p=s[d];t.studentanswer+="<br />"+p.answer+" = "+c,p.response&&p.response.trim()==c.trim()&&u++}}t.userresponse=a.join(","),u==Object.keys(s).length?(t.correctanswer=!0,t.response=i.answer,t.answerid=i.id,t.newpageid=i.jumpto):(t.correctanswer=!1,t.response=l.answer,t.answerid=l.id,t.newpageid=l.jumpto)},AddonModLessonProvider.prototype.checkAnswerMultichoice=function(n,t,o,r,i){var l=this;if(!o)return i.inmediatejump=!0,void(i.newpageid=t.page.id);var s=this.getUsedAnswersMultichoice(t);if(t.page.qoption){var a=this.getUserResponseMultichoice(o);if(!a||!Array.isArray(a))return void(i.noanswer=!0);i.userresponse=a.join(",");var u,d,c=[],p=[],f=0,h=0,m=0,_=0;i.studentanswer="",i.studentanswerformat=1,s.forEach(function(e){for(var n in a){if(a[n]==e.id){c.push(e.answer),p.push(e.response);break}}}),i.studentanswer=c.join(e.MULTIANSWER_DELIMITER),s.forEach(function(e){var o=l.isAnswerCorrect(n,t.page.id,e,r);a.forEach(function(n){n==e.id&&(o?f++:(void 0===d&&(d=e.jumpto),_||(_=e.id)))}),o&&(h++,void 0===u&&(u=e.jumpto),m||(m=e.id))}),a.length==h&&f==h?(i.correctanswer=!0,i.response=p.join(e.MULTIANSWER_DELIMITER),i.newpageid=u,i.answerid=m):(i.correctanswer=!1,i.response=p.join(e.MULTIANSWER_DELIMITER),i.newpageid=d,i.answerid=_)}else{if(void 0===o.answerid||!o.answerid&&0!==Number(o.answerid))return void(i.noanswer=!0);i.answerid=o.answerid;for(var g in t.answers){var v=t.answers[g];if(v.id==o.answerid){i.correctanswer=this.isAnswerCorrect(n,t.page.id,v,r),i.newpageid=v.jumpto,i.response=v.response,i.userresponse=i.studentanswer=v.answer;break}}}},AddonModLessonProvider.prototype.checkAnswerNumerical=function(e,n,t,o,r){var i=parseFloat(t.answer);if(r.response="",r.newpageid=0,t.answer&&!isNaN(i)){r.useranswer=i,r.studentanswer=r.userresponse=r.useranswer;for(var l in n.answers){var s=n.answers[l],a=void 0,u=void 0;if(s.answer&&-1!=s.answer.indexOf(":")){var d=s.answer.split(":");u=parseFloat(d[0]),a=parseFloat(d[1])}else a=u=parseFloat(s.answer);if(r.useranswer>=u&&r.useranswer<=a){r.newpageid=s.jumpto,r.response=s.response,r.correctanswer=this.isAnswerCorrect(e,n.page.id,s,o),r.answerid=s.id;break}}this.checkOtherAnswers(e,n,r)}else r.noanswer=!0},AddonModLessonProvider.prototype.checkAnswerShort=function(e,n,t,o,r){var i=!(!t.answer||!t.answer.trim)&&t.answer.trim();if(i){for(var l in n.answers){var s=n.answers[l],a=n.page.qoption,u=s.answer,d=!1,c=void 0;if(a?(c="","/i"==u.substr(-2)&&(u=u.substr(0,u.length-2),c="i")):(u=u.replace("*","#####"),u=(u=this.textUtils.escapeForRegex(u)).replace("#####",".*")),this.isAnswerCorrect(e,n.page.id,s,o))a?i.match(new RegExp("^"+u+"$",c))&&(d=!0):i.match(new RegExp("^"+u+"$","i"))&&(d=!0),d&&(r.correctanswer=!0);else if(a){switch(u.substr(0,2)){case"--":u=u.substr(2),i.match(new RegExp("^"+u+"$",c))||(d=!0);break;case"++":u=u.substr(2);var p=i.match(new RegExp(u,"g"+c));if(p){d=!0;for(var f=p[0].length,h=[],m=[],_=0;_<f;_++)h.push(p[0][_]),m.push('<span class="incorrect matches">'+p[0][_]+"</span>");i=i.replace(h,m)}break;default:i.match(new RegExp("^"+u+"$",c))&&(d=!0)}r.correctanswer=!1}else i.match(new RegExp("^"+u+"$","i"))&&(d=!0);if(d){r.newpageid=s.jumpto,r.response=s.response,r.answerid=s.id;break}}this.checkOtherAnswers(e,n,r),r.userresponse=i,r.studentanswer=this.textUtils.s(i)}else r.noanswer=!0},AddonModLessonProvider.prototype.checkAnswerTruefalse=function(e,n,t,o,r){if(t.answerid){r.answerid=t.answerid;for(var i in n.answers){var l=n.answers[i];if(l.id==t.answerid){r.correctanswer=this.isAnswerCorrect(e,n.page.id,l,o),r.newpageid=l.jumpto,r.response=l.response,r.studentanswer=r.userresponse=l.answer;break}}}else r.noanswer=!0},AddonModLessonProvider.prototype.checkOtherAnswers=function(n,t,o){if(0==o.answerid){var r=t.answers[t.answers.length-1]||{};"string"==typeof r.answer&&-1!=r.answer.indexOf(e.LESSON_OTHER_ANSWERS)&&(o.newpageid=r.jumpto,o.response=r.response,n.custom&&(o.correctanswer=r.score>0),o.answerid=r.id)}},AddonModLessonProvider.prototype.createPagesIndex=function(e){var n={};return e.forEach(function(e){n[e.page.id]=e.page}),n},AddonModLessonProvider.prototype.finishRetake=function(n,t,r,i,l,s,a,u){var d=this;if(s){var c=a.attemptscount;return this.lessonOfflineProvider.finishRetake(n.id,t,c,!0,i,u).then(function(){return d.lessonGrade(n,c,r,l,void 0,u).catch(function(){return{}})}).then(function(e){var t,s={data:{},messages:[],warnings:[]},c=[],p=!0;return d.addResultValueEolPage(s,"offline",!0),d.addResultValueEolPage(s,"gradeinfo",e),n.custom&&!a.canmanage&&e.nquestions<n.minquestions&&(p=!1,d.addMessage(s.messages,"addon.mod_lesson.numberofpagesviewednotice",{$a:{nquestions:e.nquestions,minquestions:n.minquestions}})),a.canmanage?n.grade!=o.a.TYPE_NONE&&d.addResultValueEolPage(s,"displayofgrade",!0,!0):p&&(c.push(d.calculateProgress(n.id,a,r,l,void 0,u).then(function(e){d.addResultValueEolPage(s,"progresscompleted",e)})),e.attempts?(n.custom||(d.addResultValueEolPage(s,"numberofpagesviewed",e.nquestions,!0),n.minquestions&&e.nquestions<n.minquestions&&d.addResultValueEolPage(s,"youshouldview",n.minquestions,!0),d.addResultValueEolPage(s,"numberofcorrectanswers",e.earned,!0)),t={score:e.earned,grade:e.total},e.nmanual?(t.tempmaxgrade=e.total-e.manualpoints,t.essayquestions=e.nmanual,d.addResultValueEolPage(s,"displayscorewithessays",t,!0)):d.addResultValueEolPage(s,"displayscorewithoutessays",t,!0),n.grade!=o.a.TYPE_NONE&&(t={grade:d.textUtils.roundToDecimals(e.grade*n.grade/100,1),total:n.grade},d.addResultValueEolPage(s,"yourcurrentgradeisoutof",t,!0))):n.timelimit?i&&d.addResultValueEolPage(s,"eolstudentoutoftimenoanswers",!0,!0):d.addResultValueEolPage(s,"welldone",!0,!0)),n.modattempts&&a.canmanage&&d.addResultValueEolPage(s,"modattemptsnoteacher",!0,!0),p&&d.addResultValueEolPage(s,"gradelesson",1),s})}return this.finishRetakeOnline(n.id,r,i,l,u).then(function(o){return d.eventsProvider.trigger(e.DATA_SENT_EVENT,{lessonId:n.id,type:"finish",courseId:t,outOfTime:i,review:l},d.sitesProvider.getCurrentSiteId()),o})},AddonModLessonProvider.prototype.finishRetakeOnline=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={lessonid:e,outoftime:t?1:0,review:o?1:0};return"string"==typeof n&&(l.password=n),r.write("mod_lesson_finish_attempt",l).then(function(e){var n={};return e.data.forEach(function(e){e.value&&"string"==typeof e.value&&"1"!==e.value&&(e.value=i.textUtils.parseJSON(e.value)),n[e.name]=e}),e.data=n,e})})},AddonModLessonProvider.prototype.getAccessInformation=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={lessonid:e},l={cacheKey:r.getAccessInformationCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_lesson_get_lesson_access_information",i,l)})},AddonModLessonProvider.prototype.getAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"accessInfo:"+e},AddonModLessonProvider.prototype.getContentPagesViewed=function(n,t,o){var r=[],i=e.TYPE_STRUCTURE,l={online:[],offline:[]};return r.push(this.getContentPagesViewedOnline(n,t,!1,!1,o).then(function(e){l.online=e})),r.push(this.lessonOfflineProvider.getRetakeAttemptsForType(n,t,i,o).catch(function(){return[]}).then(function(e){l.offline=e})),Promise.all(r).then(function(){return l})},AddonModLessonProvider.prototype.getContentPagesViewedCacheKey=function(e,n){return this.getContentPagesViewedCommonCacheKey(e)+":"+n},AddonModLessonProvider.prototype.getContentPagesViewedCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"contentPagesViewed:"+e},AddonModLessonProvider.prototype.getContentPagesViewedIds=function(e,n,t){return this.getContentPagesViewed(e,n,t).then(function(e){var n={};return e.online.concat(e.offline).forEach(function(e){n[e.pageid]||(n[e.pageid]=!0)}),Object.keys(n).map(function(e){return Number(e)})})},AddonModLessonProvider.prototype.getContentPagesViewedOnline=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={lessonid:e,lessonattempt:n},s={cacheKey:i.getContentPagesViewedCacheKey(e,n)};return t?s.omitExpires=!0:o&&(s.getFromCache=!1,s.emergencyCache=!1),r.read("mod_lesson_get_content_pages_viewed",l,s).then(function(e){return e.pages})})},AddonModLessonProvider.prototype.getLastContentPageViewed=function(e,n,t){return this.getContentPagesViewed(e,n,t).then(function(e){var n,t=0;return e.online.forEach(function(e){e.timeseen>t&&(n=e,t=e.timeseen)}),e.offline.forEach(function(e){e.timemodified>t&&(n=e,t=e.timemodified)}),n}).catch(function(){})},AddonModLessonProvider.prototype.getLastPageSeen=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r;return this.lessonOfflineProvider.getLastQuestionPageAttempt(e,n,t).then(function(i){return i&&(r=i.newpageid),o.getLastContentPageViewed(e,n,t).then(function(e){return e&&(i?e.timemodified>i.timemodified&&(r=e.newpageid||e.pageid):r=e.newpageid||e.pageid),r})})},AddonModLessonProvider.prototype.getLesson=function(e,n,t,o,r){return this.getLessonByField(e,"coursemodule",n,t,o,r)},AddonModLessonProvider.prototype.getLessonByField=function(e,n,t,o,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){var a={courseids:[e]},u={cacheKey:s.getLessonDataCacheKey(e),updateFrequency:r.a.FREQUENCY_RARELY};return o?u.omitExpires=!0:i&&(u.getFromCache=!1,u.emergencyCache=!1),l.read("mod_lesson_get_lessons_by_courses",a,u).then(function(e){if(e&&e.lessons){var o=e.lessons.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModLessonProvider.prototype.getLessonById=function(e,n,t,o,r){return this.getLessonByField(e,"id",n,t,o,r)},AddonModLessonProvider.prototype.getLessonDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"lesson:"+e},AddonModLessonProvider.prototype.getLessonWithPassword=function(e,n,t,o,r,i){var l=this;return void 0===t&&(t=!0),this.sitesProvider.getSite(i).then(function(i){var s={lessonid:e},a={cacheKey:l.getLessonWithPasswordCacheKey(e)};return"string"==typeof n&&(s.password=n),o?a.omitExpires=!0:r&&(a.getFromCache=!1,a.emergencyCache=!1),i.read("mod_lesson_get_lesson",s,a).then(function(n){return void 0===n.lesson.ongoing&&(l.removeStoredPassword(e,i.id),t)?l.invalidateLessonWithPassword(e,i.id).catch(function(){}).then(function(){return Promise.reject(l.translate.instant("addon.mod_lesson.loginfail"))}):n.lesson})})},AddonModLessonProvider.prototype.getLessonWithPasswordCacheKey=function(e){return this.ROOT_CACHE_KEY+"lessonWithPswrd:"+e},AddonModLessonProvider.prototype.getNewPageId=function(e,n,t){return t&&t[e]&&t[e][n]?t[e][n].calculatedjump:n||e},AddonModLessonProvider.prototype.getOngoingScoreMessage=function(e,n,t,o,r,i){var l=this;if(n.canmanage)return Promise.resolve(this.translate.instant("addon.mod_lesson.teacherongoingwarning"));var s=n.attemptscount;return o&&s--,this.lessonGrade(e,s,t,o,r,i).then(function(n){var t={};return e.custom?(t.score=n.earned,t.currenthigh=n.total,l.translate.instant("addon.mod_lesson.ongoingcustom",{$a:t})):(t.correct=n.earned,t.viewed=n.attempts,l.translate.instant("addon.mod_lesson.ongoingnormal",{$a:t}))})},AddonModLessonProvider.prototype.getPageAnswers=function(e,n,t,o,r){return this.getPageData(e,n,t,o,!0,!0,!1,void 0,void 0,r).then(function(e){return e.answers})},AddonModLessonProvider.prototype.getPagesAnswers=function(e,n,t,o,r){var i=this,l={},s=[];return n.forEach(function(n){s.push(i.getPageAnswers(e,n,t,o,r).then(function(e){e.forEach(function(e){e.pageid=n,l[e.id]=e})}))}),Promise.all(s).then(function(){return l})},AddonModLessonProvider.prototype.getPageData=function(e,n,t,o,r,i,l,s,a,u){var d=this;return this.sitesProvider.getSite(u).then(function(c){var p={lessonid:e.id,pageid:Number(n),review:o?1:0,returncontents:r?1:0},f={cacheKey:d.getPageDataCacheKey(e.id,n)};return"string"==typeof t&&(p.password=t),i?f.omitExpires=!0:l&&(f.getFromCache=!1,f.emergencyCache=!1),o&&(f.getFromCache=!1,f.saveToCache=!1,f.emergencyCache=!1),c.read("mod_lesson_get_page_data",p,f).then(function(n){return i&&s&&n.page?d.calculateOfflineData(e,s,t,o,void 0,u).then(function(r){return Object.assign(n,r),d.getPageViewMessages(e,s,n.page,o,a,t,u)}).then(function(e){return n.messages=e,n}):n})})},AddonModLessonProvider.prototype.getPageDataCacheKey=function(e,n){return this.getPageDataCommonCacheKey(e)+":"+n},AddonModLessonProvider.prototype.getPageDataCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"pageData:"+e},AddonModLessonProvider.prototype.getPages=function(e,n,t,o,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={lessonid:e},a={cacheKey:l.getPagesCacheKey(e),updateFrequency:r.a.FREQUENCY_SOMETIMES};return"string"==typeof n&&(s.password=n),t?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),i.read("mod_lesson_get_pages",s,a).then(function(e){return e.pages})})},AddonModLessonProvider.prototype.getPagesCacheKey=function(e){return this.ROOT_CACHE_KEY+"pages:"+e},AddonModLessonProvider.prototype.getPagesPossibleJumps=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={lessonid:e},l={cacheKey:r.getPagesPossibleJumpsCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_lesson_get_pages_possible_jumps",i,l).then(function(e){if(e.jumps){var n={};return e.jumps.forEach(function(e){void 0===n[e.pageid]&&(n[e.pageid]={}),n[e.pageid][e.jumpto]=e}),n}return Promise.reject(null)})})},AddonModLessonProvider.prototype.getPagesPossibleJumpsCacheKey=function(e){return this.ROOT_CACHE_KEY+"pagesJumps:"+e},AddonModLessonProvider.prototype.getPageProcessMessages=function(e,n,t,o,r){var i=[];return n.canmanage&&(this.lessonDisplayTeacherWarning(r)&&this.addMessage(i,"addon.mod_lesson.teacherjumpwarning",{$a:{cluster:this.translate.instant("addon.mod_lesson.clusterjump"),unseen:this.translate.instant("addon.mod_lesson.unseenpageinbranch")}}),e.timelimit&&this.addMessage(i,"addon.mod_lesson.teachertimerwarning")),t.attemptsremaining>0&&e.review&&!o&&this.addMessage(i,"addon.mod_lesson.attemptsremaining",{$a:t.attemptsremaining}),i},AddonModLessonProvider.prototype.getPagesIdsWithQuestionAttempts=function(e,n,t,o,r){return this.getQuestionsAttempts(e,n,t,void 0,o,r).then(function(e){var n={};return e.online.concat(e.offline).forEach(function(e){n[e.pageid]||(n[e.pageid]=!0)}),Object.keys(n).map(function(e){return Number(e)})})},AddonModLessonProvider.prototype.getPageViewMessages=function(n,t,r,i,l,s,a){var u=this,d=[],c=Promise.resolve();if(t.canmanage)n.timelimit&&this.addMessage(d,"addon.mod_lesson.teachertimerwarning"),this.lessonDisplayTeacherWarning(l)&&this.addMessage(d,"addon.mod_lesson.teacherjumpwarning",{$a:{cluster:this.translate.instant("addon.mod_lesson.clusterjump"),unseen:this.translate.instant("addon.mod_lesson.unseenpageinbranch")}});else if(r.qtype==e.LESSON_PAGE_BRANCHTABLE&&n.minquestions){c=this.lessonGrade(n,t.attemptscount,s,i,void 0,a).then(function(e){e.attempts&&(e.nquestions<n.minquestions&&u.addMessage(d,"addon.mod_lesson.numberofpagesviewednotice",{$a:{nquestions:e.nquestions,minquestions:n.minquestions}}),i||n.retake||(u.addMessage(d,"addon.mod_lesson.numberofcorrectanswers",{$a:e.earned}),n.grade!=o.a.TYPE_NONE&&u.addMessage(d,"addon.mod_lesson.yourcurrentgradeisoutof",{$a:{grade:u.textUtils.roundToDecimals(e.grade*n.grade/100,1),total:n.grade}})))}).catch(function(){})}return c.then(function(){return d})},AddonModLessonProvider.prototype.getQuestionsAttempts=function(e,n,t,o,r,i){var l=[],s={online:[],offline:[]};return l.push(this.getQuestionsAttemptsOnline(e,n,t,o,!1,!1,r,i).then(function(e){s.online=e})),l.push(this.lessonOfflineProvider.getQuestionsAttempts(e,n,t,o,r).catch(function(){return[]}).then(function(e){s.offline=e})),Promise.all(l).then(function(){return s})},AddonModLessonProvider.prototype.getQuestionsAttemptsCacheKey=function(e,n,t){return this.getQuestionsAttemptsCommonCacheKey(e)+":"+t+":"+n},AddonModLessonProvider.prototype.getQuestionsAttemptsCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"questionsAttempts:"+e},AddonModLessonProvider.prototype.getQuestionsAttemptsOnline=function(e,n,t,o,r,i,l,s){var a=this;return this.sitesProvider.getSite(l).then(function(l){s=s||l.getUserId();var u={lessonid:e,attempt:n,userid:s},d={cacheKey:a.getQuestionsAttemptsCacheKey(e,n,s)};return r?d.omitExpires=!0:i&&(d.getFromCache=!1,d.emergencyCache=!1),l.read("mod_lesson_get_questions_attempts",u,d).then(function(e){return o||t?e.attempts.filter(function(e){return!(t&&!e.correct)&&(!o||e.pageid==o)}):e.attempts})})},AddonModLessonProvider.prototype.getRetakesOverview=function(e,n,t,o,i){var l=this;return n=n||0,this.sitesProvider.getSite(i).then(function(i){var s={lessonid:e,groupid:n},a={cacheKey:l.getRetakesOverviewCacheKey(e,n),updateFrequency:r.a.FREQUENCY_OFTEN};return t?a.omitExpires=!0:o&&(a.getFromCache=!1,a.emergencyCache=!1),i.read("mod_lesson_get_attempts_overview",s,a).then(function(e){return e.data})})},AddonModLessonProvider.prototype.getRetakesOverviewCacheKey=function(e,n){return this.getRetakesOverviewCommonCacheKey(e)+":"+n},AddonModLessonProvider.prototype.getRetakesOverviewCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"retakesOverview:"+e},AddonModLessonProvider.prototype.getStoredPassword=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(e.PASSWORD_TABLE,{lessonid:n}).then(function(e){return e.password})})},AddonModLessonProvider.prototype.getSubpagesOf=function(e,n,t){var o=[];for(n=e[n].nextpageid,t=t||[];n&&-1==t.indexOf(e[n].qtype);)o.push(e[n]),n=e[n].nextpageid;return o},AddonModLessonProvider.prototype.getTimers=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){r=r||o.getUserId();var l={lessonid:e,userid:r},s={cacheKey:i.getTimersCacheKey(e,r)};return n?s.omitExpires=!0:t&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("mod_lesson_get_user_timers",l,s).then(function(e){return e.timers})})},AddonModLessonProvider.prototype.getTimersCacheKey=function(e,n){return this.getTimersCommonCacheKey(e)+":"+n},AddonModLessonProvider.prototype.getTimersCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"timers:"+e},AddonModLessonProvider.prototype.getUsedAnswersMultichoice=function(e){return this.utils.clone(e.answers).filter(function(e){return""!==e.answer})},AddonModLessonProvider.prototype.getUserResponseMatching=function(e){if(e.response)return e.response;var n={};for(var t in e){var o=t.match(/^response\[(\d+)\]/);o&&o.length>1&&(n[o[1]]=e[t])}return n},AddonModLessonProvider.prototype.getUserResponseMultichoice=function(e){if(e.answer)return Array.isArray(e.answer)?e.answer.map(function(e){return parseInt(e,10)}):e.answer;var n=[];for(var t in e){var o=t.match(/^answer\[(\d+)\]/);o&&o.length>1&&n.push(parseInt(o[1],10))}return n},AddonModLessonProvider.prototype.getUserRetake=function(e,n,t,o,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){t=t||l.getUserId();var a={lessonid:e,userid:t,lessonattempt:n},u={cacheKey:s.getUserRetakeCacheKey(e,t,n),updateFrequency:r.a.FREQUENCY_SOMETIMES};return o?u.omitExpires=!0:i&&(u.getFromCache=!1,u.emergencyCache=!1),l.read("mod_lesson_get_user_attempt",a,u)})},AddonModLessonProvider.prototype.getUserRetakeCacheKey=function(e,n,t){return this.getUserRetakeUserCacheKey(e,n)+":"+t},AddonModLessonProvider.prototype.getUserRetakeUserCacheKey=function(e,n){return this.getUserRetakeLessonCacheKey(e)+":"+n},AddonModLessonProvider.prototype.getUserRetakeLessonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userRetake:"+e},AddonModLessonProvider.prototype.getPreventAccessReason=function(e,n,t){var o;if(e&&e.preventaccessreasons)for(var r=0;r<e.preventaccessreasons.length;r++){var i=e.preventaccessreasons[r];if("lessonopen"==i.reason||"lessonclosed"==i.reason)return i;"passwordprotectedlesson"==i.reason?n||(o=i):"noretake"==i.reason&&t||o||(o=i)}return o},AddonModLessonProvider.prototype.jumptoIsCorrect=function(n,t,o){if(!t)return!1;if(t==e.LESSON_NEXTPAGE)return!0;if(t==e.LESSON_UNSEENBRANCHPAGE)return!0;if(t==e.LESSON_RANDOMPAGE)return!0;if(t==e.LESSON_CLUSTERJUMP)return!0;if(t==e.LESSON_EOL)return!0;for(var r=o[n].nextpageid;r;){if(t==r)return!0;r=o[r].nextpageid}return!1},AddonModLessonProvider.prototype.invalidateAccessInformation=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAccessInformationCacheKey(e))})},AddonModLessonProvider.prototype.invalidateContentPagesViewed=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getContentPagesViewedCommonCacheKey(e))})},AddonModLessonProvider.prototype.invalidateContentPagesViewedForRetake=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getContentPagesViewedCacheKey(e,n))})},AddonModLessonProvider.prototype.invalidateLessonData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getLessonDataCacheKey(e))})},AddonModLessonProvider.prototype.invalidateLessonWithPassword=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getLessonWithPasswordCacheKey(e))})},AddonModLessonProvider.prototype.invalidatePageData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getPageDataCommonCacheKey(e))})},AddonModLessonProvider.prototype.invalidatePageDataForPage=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getPageDataCacheKey(e,n))})},AddonModLessonProvider.prototype.invalidatePages=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getPagesCacheKey(e))})},AddonModLessonProvider.prototype.invalidatePagesPossibleJumps=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getPagesPossibleJumpsCacheKey(e))})},AddonModLessonProvider.prototype.invalidateQuestionsAttempts=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getQuestionsAttemptsCommonCacheKey(e))})},AddonModLessonProvider.prototype.invalidateQuestionsAttemptsForRetake=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){return o=o||t.getUserId(),t.invalidateWsCacheForKey(r.getQuestionsAttemptsCacheKey(e,n,o))})},AddonModLessonProvider.prototype.invalidateRetakesOverview=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getRetakesOverviewCommonCacheKey(e))})},AddonModLessonProvider.prototype.invalidateRetakesOverviewForGroup=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getRetakesOverviewCacheKey(e,n))})},AddonModLessonProvider.prototype.invalidateTimers=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getTimersCommonCacheKey(e))})},AddonModLessonProvider.prototype.invalidateTimersForUser=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getTimersCacheKey(e,t))})},AddonModLessonProvider.prototype.invalidateUserRetake=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return t=t||o.getUserId(),o.invalidateWsCacheForKey(r.getUserRetakeCacheKey(e,t,n))})},AddonModLessonProvider.prototype.invalidateUserRetakesForLesson=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getUserRetakeLessonCacheKey(e))})},AddonModLessonProvider.prototype.invalidateUserRetakesForUser=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n=n||t.getUserId(),t.invalidateWsCacheForKeyStartingWith(o.getUserRetakeUserCacheKey(e,n))})},AddonModLessonProvider.prototype.isAnswerCorrect=function(e,n,t,o){return e.custom?t.score>0:this.jumptoIsCorrect(n,t.jumpto,o)},AddonModLessonProvider.prototype.isLessonOffline=function(e){return!!e.allowofflineattempts},AddonModLessonProvider.prototype.isPasswordProtected=function(e){if(e&&e.preventaccessreasons)for(var n=0;n<e.preventaccessreasons.length;n++){if("passwordprotectedlesson"==e.preventaccessreasons[n].reason)return!0}return!1},AddonModLessonProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_lesson_get_lesson_access_information")})},AddonModLessonProvider.prototype.isQuestionPage=function(n){return n==e.TYPE_QUESTION},AddonModLessonProvider.prototype.launchRetake=function(n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={lessonid:n,review:r?1:0};return"string"==typeof t&&(s.password=t),"number"==typeof o&&(s.pageid=o),i.write("mod_lesson_launch_attempt",s).then(function(t){return l.eventsProvider.trigger(e.DATA_SENT_EVENT,{lessonId:n,type:"launch"},l.sitesProvider.getCurrentSiteId()),t})})},AddonModLessonProvider.prototype.leftDuringTimed=function(n){return n&&n.lastpageseen&&n.lastpageseen!=e.LESSON_EOL&&n.leftduringtimedsession},AddonModLessonProvider.prototype.lessonDisplayTeacherWarning=function(n){if(!n)return!1;for(var t in n)for(var o in n[t]){var r=Number(o);if(r==e.LESSON_CLUSTERJUMP||r==e.LESSON_UNSEENBRANCHPAGE)return!0}return!1},AddonModLessonProvider.prototype.lessonGrade=function(n,t,o,r,i,l,s){var a=this,u=0,d=0,c=0,p=0,f=0,h=0,m=0;return this.getQuestionsAttempts(n.id,t,!1,void 0,l,s).then(function(t){var s=t.online.concat(t.offline);if(s.length){var p={};return(i?Promise.resolve():a.getPages(n.id,o,!0,!1,l).then(function(e){i=a.createPagesIndex(e)})).then(function(){var e=[];s.forEach(function(n){p[n.pageid]||(p[n.pageid]=[],e.push(n.pageid)),p[n.pageid].push(n)});for(var t in p){var i=p[t].sort(function(e,n){return(e.timeseen||e.timemodified)-(n.timeseen||n.timemodified)});p[t]=i.slice(0,n.maxattempts)}return a.getPagesAnswers(n,e,o,r,l)}).then(function(t){f=Object.keys(p).length;for(var o in p){var r=p[o],l=r[r.length-1];n.custom?i[l.pageid].qtype==e.LESSON_PAGE_ESSAY?(l.useranswer&&void 0!==l.useranswer.score&&(m+=l.useranswer.score),d++,c+=t[l.answerid].score):l.answerid&&(m+=t[l.answerid].score):(r.forEach(function(e){m+=e.correct?1:0}),i[l.pageid].qtype==e.LESSON_PAGE_ESSAY&&(d++,c++)),u+=r.length}if(n.custom){var s={};for(var a in t){var _=t[a];void 0===s[_.pageid]?s[_.pageid]=_.score:s[_.pageid]<_.score&&(s[_.pageid]=_.score)}for(var o in s)h+=s[o]}else h=n.minquestions&&f<n.minquestions?u+(n.minquestions-f):u})}}).then(function(){return h&&(p=a.textUtils.roundToDecimals(100*m/h,5)),{nquestions:f,attempts:u,total:h,earned:m,grade:p,nmanual:d,manualpoints:c}})},AddonModLessonProvider.prototype.logViewLesson=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(l){var s={lessonid:n};return"string"==typeof t&&(s.password=t),i.logHelper.logSingle("mod_lesson_view_lesson",s,e.COMPONENT,n,o,"lesson",{},r)})},AddonModLessonProvider.prototype.processPage=function(n,t,o,r,i,l,s,a,u,d){var c=this;d=d||this.sitesProvider.getCurrentSiteId();var p,f,h=o.page.id;return s?this.getPages(n.id,i,!0,!1,d).then(function(e){return f=c.createPagesIndex(e),o.answers.length?c.recordAttempt(n,t,o,r,l,a,u,f,d):{nodefaultresponse:!0,newpageid:r.newpageid}}).then(function(e){return p=e,p.newpageid=c.getNewPageId(o.page.id,p.newpageid,u),c.calculateOfflineData(n,a,i,l,f,d)}).then(function(e){return p.warnings=[],p.displaymenu=o.displaymenu,p.messages=c.getPageProcessMessages(n,a,p,l,u),p.sent=!1,Object.assign(p,e),p}):this.processPageOnline(n.id,h,r,i,l,d).then(function(o){return c.eventsProvider.trigger(e.DATA_SENT_EVENT,{lessonId:n.id,type:"process",courseId:t,pageId:h,review:l},c.sitesProvider.getCurrentSiteId()),o.sent=!0,o})},AddonModLessonProvider.prototype.processPageOnline=function(e,n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={lessonid:e,pageid:n,data:l.utils.objectToArrayOfObjects(t,"name","value",!0),review:r?1:0};return"string"==typeof o&&(s.password=o),i.write("mod_lesson_process_page",s)})},AddonModLessonProvider.prototype.recordAttempt=function(n,t,o,r,i,l,s,a,u){var d=this,c=this.checkAnswer(n,o,r,s,a),p=l.attemptscount;if(c.inmediatejump)return o.page.qtype==e.LESSON_PAGE_BRANCHTABLE?this.lessonOfflineProvider.processPage(n.id,t,p,o.page,r,c.newpageid,c.answerid,!1,c.userresponse,u).then(function(){return c}):Promise.resolve(c);var f,h=Promise.resolve(),m=!1;return c.attemptsremaining=0,c.maxattemptsreached=!1,c.noanswer?(c.newpageid=o.page.id,c.feedback=this.translate.instant("addon.mod_lesson.noanswer")):(l.canmanage||(h=this.getQuestionsAttempts(n.id,p,!1,o.page.id,u).then(function(l){if((f=l.online.length+l.offline.length)>=n.maxattempts)return c.maxattemptsreached=!0,c.feedback=d.translate.instant("addon.mod_lesson.maximumnumberofattemptsreached"),c.newpageid=e.LESSON_NEXTPAGE,void(m=!0);var a;if(!i&&(n.retake||!n.retake&&!p)){var h=d.getNewPageId(o.page.id,c.newpageid,s);a=d.lessonOfflineProvider.processPage(n.id,t,p,o.page,r,h,c.answerid,c.correctanswer,c.userresponse,u),f++}return c.correctanswer||c.newpageid||(f>=n.maxattempts?(n.maxattempts>1&&(c.maxattemptsreached=!0),c.newpageid=e.LESSON_NEXTPAGE):n.maxattempts>1&&(c.attemptsremaining=n.maxattempts-f)),a})),h=h.then(function(){if(!m&&(c.response||(n.feedback||c.noanswer||n.review&&!c.correctanswer&&!c.isessayquestion?c.response=d.translate.instant(c.isessayquestion?"addon.mod_lesson.defaultessayresponse":c.correctanswer?"addon.mod_lesson.thatsthecorrectanswer":"addon.mod_lesson.thatsthewronganswer"):c.nodefaultresponse=!0),c.response)){var t=void 0;!n.review||c.correctanswer||c.isessayquestion?(c.feedback="",t=Promise.resolve()):(t=void 0===f?d.getQuestionsAttempts(n.id,p,!1,o.page.id,u).then(function(e){f=e.online.length+e.offline.length}):Promise.resolve()).then(function(){c.feedback='<div class="box feedback">'+d.translate.instant("addon.mod_lesson."+(1==f?"firstwrong":"secondpluswrong"))+"</div>"});var r="response";return c.correctanswer?r+=" correct":c.isessayquestion||(r+=" incorrect"),t.then(function(){if(c.feedback+='<div class="box generalbox boxaligncenter p-y-1">'+o.page.contents+"</div>",c.feedback+='<div class="correctanswer generalbox"><em>'+d.translate.instant("addon.mod_lesson.youranswer")+'</em> : <div class="studentanswer m-t-2 m-b-2"><table class="generaltable"><tbody>',o.page.qoption)for(var n=c.studentanswer?c.studentanswer.split(e.MULTIANSWER_DELIMITER):[],t=c.response?c.response.split(e.MULTIANSWER_DELIMITER):[],i=0;i<n.length;i++)c.feedback=d.addAnswerAndResponseToFeedback(c.feedback,n[i],c.studentanswerformat,t[i],r);else c.feedback=d.addAnswerAndResponseToFeedback(c.feedback,c.studentanswer,c.studentanswerformat,c.response,r);c.feedback+="</tbody></table></div></div>"})}})),h.then(function(){return c})},AddonModLessonProvider.prototype.removeStoredPassword=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(e.PASSWORD_TABLE,{lessonid:n})})},AddonModLessonProvider.prototype.storePassword=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){var r={lessonid:n,password:t,timemodified:Date.now()};return o.getDb().insertRecord(e.PASSWORD_TABLE,r)})},AddonModLessonProvider.prototype.validPageAndView=function(n,t,o,r){if(t.qtype!=e.LESSON_PAGE_ENDOFCLUSTER&&t.qtype!=e.LESSON_PAGE_ENDOFBRANCH&&(o[t.id]=1),t.qtype==e.LESSON_PAGE_CLUSTER){this.getSubpagesOf(n,t.id,[e.LESSON_PAGE_ENDOFCLUSTER]).forEach(function(e){var n=r.indexOf(e.id);-1!=n&&(delete r[n],-1==r.indexOf(t.id)&&r.push(t.id))})}return t.nextpageid},AddonModLessonProvider.COMPONENT="mmaModLesson",AddonModLessonProvider.DATA_SENT_EVENT="addon_mod_lesson_data_sent",AddonModLessonProvider.LESSON_THISPAGE=0,AddonModLessonProvider.LESSON_UNSEENPAGE=1,AddonModLessonProvider.LESSON_UNANSWEREDPAGE=2,AddonModLessonProvider.LESSON_NEXTPAGE=-1,AddonModLessonProvider.LESSON_EOL=-9,AddonModLessonProvider.LESSON_UNSEENBRANCHPAGE=-50,AddonModLessonProvider.LESSON_RANDOMPAGE=-60,AddonModLessonProvider.LESSON_RANDOMBRANCH=-70,AddonModLessonProvider.LESSON_CLUSTERJUMP=-80,AddonModLessonProvider.TYPE_QUESTION=0,AddonModLessonProvider.TYPE_STRUCTURE=1,AddonModLessonProvider.LESSON_PAGE_SHORTANSWER=1,AddonModLessonProvider.LESSON_PAGE_TRUEFALSE=2,AddonModLessonProvider.LESSON_PAGE_MULTICHOICE=3,AddonModLessonProvider.LESSON_PAGE_MATCHING=5,AddonModLessonProvider.LESSON_PAGE_NUMERICAL=8,AddonModLessonProvider.LESSON_PAGE_ESSAY=10,AddonModLessonProvider.LESSON_PAGE_BRANCHTABLE=20,AddonModLessonProvider.LESSON_PAGE_ENDOFBRANCH=21,AddonModLessonProvider.LESSON_PAGE_CLUSTER=30,AddonModLessonProvider.LESSON_PAGE_ENDOFCLUSTER=31,AddonModLessonProvider.MULTIANSWER_DELIMITER="@^#|",AddonModLessonProvider.LESSON_OTHER_ANSWERS="@#wronganswer#@",AddonModLessonProvider.PASSWORD_TABLE="addon_mod_lesson_password",AddonModLessonProvider;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=t(10),i=t(99),l=t(147),s=(t.n(l),function(e){function CoreMainMenuDelegate(n,t,o){var i=e.call(this,"CoreMainMenuDelegate",n,t,o)||this;return i.loggerProvider=n,i.sitesProvider=t,i.eventsProvider=o,i.loaded=!1,i.siteHandlers=new l.BehaviorSubject([]),i.featurePrefix="CoreMainMenuDelegate_",o.on(r.a.LOGOUT,i.clearSiteHandlers.bind(i)),i}return Object(o.__extends)(CoreMainMenuDelegate,e),CoreMainMenuDelegate.prototype.areHandlersLoaded=function(){return this.loaded},CoreMainMenuDelegate.prototype.clearSiteHandlers=function(){this.loaded=!1,this.siteHandlers.next([])},CoreMainMenuDelegate.prototype.getHandlers=function(){return this.siteHandlers},CoreMainMenuDelegate.prototype.updateData=function(){var e=[];for(var n in this.enabledHandlers){var t=this.enabledHandlers[n],o=t.getDisplayData();e.push({name:n,data:o,priority:t.priority})}e.sort(function(e,n){return n.priority-e.priority});var r=e.map(function(e){return e.data.name=e.name,e.data.priority=e.priority,e.data});this.loaded=!0,this.siteHandlers.next(r)},CoreMainMenuDelegate}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return a});t(0),t(4),t(439),t(11),t(7),t(67),t(12);var o=t(42),r=t(195),i=(t.n(r),t(440)),l=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},s=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},a=function(){function CoreWSProvider(e,n,t,o,r,i,l,s){this.http=e,this.translate=n,this.appProvider=t,this.textUtils=o,this.fileProvider=r,this.fileTransfer=i,this.mimeUtils=l,this.mimeTypeCache={},this.ongoingCalls={},this.retryCalls=[],this.retryTimeout=0,this.logger=s.getInstance("CoreWSProvider")}return CoreWSProvider.prototype.addToRetryQueue=function(e,n,t,o){var r={method:e,siteUrl:n,ajaxData:t,preSets:o,deferred:{}};return r.deferred.promise=new Promise(function(e,n){r.deferred.resolve=e,r.deferred.reject=n}),this.retryCalls.push(r),r.deferred.promise},CoreWSProvider.prototype.call=function(e,n,t){var o;return t?this.appProvider.isOnline()?(t.typeExpected=t.typeExpected||"object",void 0===t.responseExpected&&(t.responseExpected=!0),n=Object.assign({},n),n.wsfunction=e,n.wstoken=t.wsToken,o=t.siteUrl+"/webservice/rest/server.php?moodlewsrestformat=json",this.retryCalls.length>0?(this.logger.warn("Calls locked, trying later..."),this.addToRetryQueue(e,o,n,t)):this.performPost(e,o,n,t)):Promise.reject(this.createFakeWSError("core.networkerrormsg",!0)):Promise.reject(this.createFakeWSError("core.unexpectederror",!0))},CoreWSProvider.prototype.callAjax=function(e,n,t){var o={methodname:e,args:n},r=this.getPromiseHttp("ajax",t.siteUrl,o);return r||(r=this.performAjax(e,n,t),r=this.setPromiseHttp(r,"ajax",t.siteUrl,o)),r},CoreWSProvider.prototype.convertValuesToString=function(e,n){var t=Array.isArray(e)?[]:{};for(var o in e){var r=e[o];if(null!=r){if("object"==typeof r){if(null==(r=this.convertValuesToString(r,n)))return null}else if("string"==typeof r){if(n){var i=this.textUtils.stripUnicode(r);if(i!=r&&0==i.trim().length)return null;r=i}}else if("boolean"==typeof r)r="moodlewssettingfilter"==o||"moodlewssettingfileurl"==o?r?"true":"false":r?"1":"0";else{if("number"!=typeof r)continue;r=String(r)}Array.isArray(t)?t.push(r):t[o]=r}}return t},CoreWSProvider.prototype.createFakeWSError=function(e,n,t){return n&&(e=this.translate.instant(e,t)),{message:e}},CoreWSProvider.prototype.downloadFile=function(e,n,t,o){var r=this;if(this.logger.debug("Downloading file",e,n,t),!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));var i=n+".tmp";return this.fileProvider.createFile(i).then(function(l){var s=r.fileTransfer.create();return s.onProgress(o),s.download(e,l.toURL(),!0).then(function(){var o;if(t){var l=r.mimeUtils.getFileExtension(n);o=l&&"gdoc"!=l&&"gsheet"!=l&&"gslides"!=l&&"gdraw"!=l&&"php"!=l?Promise.resolve(l):r.getRemoteFileMimeType(e).then(function(t){if(t){var o=r.mimeUtils.getExtension(t,e);if(o&&(!l||"application/json"!=t))return l&&(n=r.mimeUtils.removeExtension(n)),n+="."+o,o}return l})}else o=Promise.resolve("");return o.then(function(t){return r.fileProvider.moveFile(i,n).then(function(o){return o.extension=t,o.path=n,r.logger.debug("Success downloading file "+e+" to "+n+" with extension "+t),o})})})}).catch(function(t){return r.logger.error("Error downloading "+e+" to "+n,t),Promise.reject(t)})},CoreWSProvider.prototype.getPromiseHttp=function(e,n,t){var o=this.getQueueItemId(e,n,t);return void 0!==this.ongoingCalls[o]&&this.ongoingCalls[o]},CoreWSProvider.prototype.getRemoteFileMimeType=function(e,n){var t=this;return this.mimeTypeCache[e]&&!n?Promise.resolve(this.mimeTypeCache[e]):this.performHead(e).then(function(n){var o=n.headers.get("Content-Type");return o&&(o=o.split(";")[0]),t.mimeTypeCache[e]=o,o||""}).catch(function(){return""})},CoreWSProvider.prototype.getRemoteFileSize=function(e){return this.performHead(e).then(function(e){var n=parseInt(e.headers.get("Content-Length"),10);return n||-1}).catch(function(){return-1})},CoreWSProvider.prototype.getRequestTimeout=function(){return this.appProvider.isNetworkAccessLimited()?o.a.WS_TIMEOUT:o.a.WS_TIMEOUT_WIFI},CoreWSProvider.prototype.getQueueItemId=function(e,n,t){return t&&(n+="###"+i.a.serialize(t)),e+"#"+r.Md5.hashAsciiStr(n)},CoreWSProvider.prototype.performAjax=function(e,n,t){function rejectWithError(e,n){return void 0===n&&(n=e.errorcode?"invalidrecord"==e.errorcode?-1:1:0),e.available=n,Promise.reject(e)}var o,r=this;if(void 0===t.siteUrl)return rejectWithError(this.createFakeWSError("core.unexpectederror",!0));if(!this.appProvider.isOnline())return rejectWithError(this.createFakeWSError("core.networkerrormsg",!0));void 0===t.responseExpected&&(t.responseExpected=!0);var i=t.noLogin?"service-nologin.php":"service.php",l=JSON.stringify([{index:0,methodname:e,args:this.convertValuesToString(n)}]),s=t.siteUrl+"/lib/ajax/"+i+"?info="+e;return t.noLogin&&t.useGet?(s+="&args="+encodeURIComponent(l),o=this.http.get(s).timeout(this.getRequestTimeout()).toPromise()):o=this.http.post(s,l).timeout(this.getRequestTimeout()).toPromise(),o.then(function(e){return e||t.responseExpected||(e=[{}]),e&&"object"==typeof e?e.error?rejectWithError(e):(e=e[0]).error?rejectWithError(e.exception):e.data:rejectWithError(r.createFakeWSError("core.serverconnection",!0))},function(e){var n=404==e.status?-1:0;return rejectWithError(r.createFakeWSError("core.serverconnection",!0),n)})},CoreWSProvider.prototype.performHead=function(e){var n=this.getPromiseHttp("head",e);return n||(n=this.http.head(e,{observe:"response",responseType:"blob"}).timeout(this.getRequestTimeout()).toPromise(),n=this.setPromiseHttp(n,"head",e)),n},CoreWSProvider.prototype.performPost=function(e,n,t,o){var r=this,i={};"number"!=o.typeExpected&&"boolean"!=o.typeExpected&&"string"!=o.typeExpected||(i.responseType="text");return this.http.post(n+"&wsfunction="+e,t,i).timeout(this.getRequestTimeout()).toPromise().then(function(n){if(n||o.responseExpected||(n={}),!n)return Promise.reject(r.createFakeWSError("core.serverconnection",!0));if(typeof n!=o.typeExpected){if("string"!=typeof n)return r.logger.warn('Response of type "'+typeof n+'" received, expecting "'+o.typeExpected+'"'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0));if("number"==o.typeExpected){if(n=Number(n),isNaN(n))return r.logger.warn('Response expected type "'+o.typeExpected+'" cannot be parsed to number'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0))}else{if("boolean"!=o.typeExpected)return r.logger.warn('Response of type "'+typeof n+'" received, expecting "'+o.typeExpected+'"'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0));if("true"===n)n=!0;else{if("false"!==n)return r.logger.warn('Response expected type "'+o.typeExpected+'" is not true or false'),Promise.reject(r.createFakeWSError("core.errorinvalidresponse",!0));n=!1}}}return void 0!==n.exception?("tool_mobile_get_content"==e&&r.logger.error("Error calling WS",e,n),Promise.reject(n)):void 0!==n.debuginfo?Promise.reject(r.createFakeWSError("Error. "+n.message)):n},function(i){if(429==i.status){var l=r.addToRetryQueue(e,n,t,o);return 0==r.retryTimeout?(r.retryTimeout=parseInt(i.headers.get("Retry-After"),10)||5,r.logger.warn(i.statusText+". Retrying in "+r.retryTimeout+" seconds. "+r.retryCalls.length+" calls left."),setTimeout(function(){r.logger.warn("Retrying now with "+r.retryCalls.length+" calls to process."),r.retryTimeout=0,r.processRetryQueue()},1e3*r.retryTimeout)):r.logger.warn("Calls locked, trying later..."),l}return Promise.reject(r.createFakeWSError("core.serverconnection",!0))})},CoreWSProvider.prototype.processRetryQueue=function(){var e=this;if(this.retryCalls.length>0&&0==this.retryTimeout){var n=this.retryCalls.shift();setTimeout(function(){n.deferred.resolve(e.performPost(n.method,n.siteUrl,n.ajaxData,n.preSets)),e.processRetryQueue()},200)}else this.logger.warn("Retry queue has stopped with "+this.retryCalls.length+" calls and "+this.retryTimeout+" timeout secs.")},CoreWSProvider.prototype.setPromiseHttp=function(e,n,t,o){var r,i=this,l=this.getQueueItemId(n,t,o);return this.ongoingCalls[l]=e,r=setTimeout(function(){delete i.ongoingCalls[l]},this.getRequestTimeout()),e.finally(function(){delete i.ongoingCalls[l],clearTimeout(r)})},CoreWSProvider.prototype.syncCall=function(e,n,t){var o,r,l={error:!0,message:""};if(!t)return l.message=this.translate.instant("core.unexpectederror"),l;if(!this.appProvider.isOnline())return l.message=this.translate.instant("core.networkerrormsg"),l;if(t.typeExpected=t.typeExpected||"object",void 0===t.responseExpected&&(t.responseExpected=!0),null==(n=this.convertValuesToString(n||{},t.cleanUnicode)))return l.message=this.translate.instant("core.unicodenotsupportedcleanerror"),l;n.wsfunction=e,n.wstoken=t.wsToken,o=t.siteUrl+"/webservice/rest/server.php?moodlewsrestformat=json",n=i.a.serialize(n),(r=new window.XMLHttpRequest).open("post",o,!1),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.send(n),n="response"in r?r.response:r.responseText;var s=Math.max(1223===r.status?204:r.status,0);return s<200||s>=300?(l.message=n,l):((n=this.textUtils.parseJSON(n))&&n.data||t.responseExpected||(n={}),n?typeof n!=t.typeExpected&&(this.logger.warn('Response of type "'+typeof n+'" received, expecting "'+t.typeExpected+'"'),l.message=this.translate.instant("core.errorinvalidresponse")):l.message=this.translate.instant("core.serverconnection"),void 0===n.exception&&void 0===n.debuginfo||(l.message=n.message),""!==l.message?l:n)},CoreWSProvider.prototype.uploadFile=function(e,n,t,o){var r=this;if(this.logger.debug("Trying to upload file: "+e),!e||!n||!t)return Promise.reject(null);if(!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));var i=t.siteUrl+"/webservice/upload.php",l=this.fileTransfer.create();return l.onProgress(o),n.httpMethod="POST",n.params={token:t.wsToken,filearea:n.fileArea||"draft",itemid:n.itemId||0},n.chunkedMode=!1,n.headers={Connection:"close"},l.upload(e,i,n,!0).then(function(n){var t=r.textUtils.parseJSON(n.response,null,r.logger.error.bind(r.logger,"Error parsing response from upload"));return null===t?Promise.reject(r.translate.instant("core.errorinvalidresponse")):t?"object"!=typeof t?(r.logger.warn('Upload file: Response of type "'+typeof t+'" received, expecting "object"'),Promise.reject(r.translate.instant("core.errorinvalidresponse"))):void 0!==t.exception?Promise.reject(t.message):t&&void 0!==t.error?Promise.reject(t.error):t[0]&&void 0!==t[0].error?Promise.reject(t[0].error):(r.logger.debug("Successfully uploaded file",e),t[0]):Promise.reject(r.translate.instant("core.serverconnection"))}).catch(function(n){return r.logger.error("Error while uploading file",e,n),Promise.reject(r.translate.instant("core.errorinvalidresponse"))})},CoreWSProvider.prototype.getText=function(e){return l(this,void 0,void 0,function(){var n;return s(this,function(t){switch(t.label){case 0:return[4,this.http.get(e,{responseType:"text"}).toPromise()];case 1:return"string"!=typeof(n=t.sent())?[2,Promise.reject(null)]:[2,n]}})})},CoreWSProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonCourseCompletionProvider(e,n,t,o){this.sitesProvider=n,this.coursesProvider=t,this.utils=o,this.ROOT_CACHE_KEY="mmaCourseCompletion:",this.logger=e.getInstance("AddonCourseCompletionProvider")}return AddonCourseCompletionProvider.prototype.canMarkSelfCompleted=function(e,n){var t=!1,o=!1;return this.sitesProvider.getCurrentSiteUserId()==e&&(n.completions.forEach(function(e){1===e.type&&(t=!0,o=e.complete)}),t&&!o)},AddonCourseCompletionProvider.prototype.getCompletedStatusText=function(e){if(e.completed)return"addon.coursecompletion.completed";var n=!1;return e.completions.forEach(function(e){(e.timecompleted||e.complete)&&(n=!0)}),n?"addon.coursecompletion.inprogress":"addon.coursecompletion.notyetstarted"},AddonCourseCompletionProvider.prototype.getCompletion=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){n=n||r.getUserId(),t=t||{},i.logger.debug("Get completion for course "+e+" and user "+n);var l={courseid:e,userid:n};return t.cacheKey=i.getCompletionCacheKey(e,n),t.updateFrequency=t.updateFrequency||o.a.FREQUENCY_SOMETIMES,t.cacheErrors=["notenroled"],r.read("core_completion_get_course_completion_status",l,t).then(function(e){return e.completionstatus?e.completionstatus:Promise.reject(null)})})},AddonCourseCompletionProvider.prototype.getCompletionCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"view:"+e+":"+n},AddonCourseCompletionProvider.prototype.invalidateCourseCompletion=function(e,n){return n=n||this.sitesProvider.getCurrentSiteUserId(),this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getCompletionCacheKey(e,n))},AddonCourseCompletionProvider.prototype.isPluginViewEnabled=function(){return this.sitesProvider.isLoggedIn()},AddonCourseCompletionProvider.prototype.isPluginViewEnabledForCourse=function(e,n){return void 0===n&&(n=!0),e?this.coursesProvider.getUserCourse(e,n).then(function(e){if(e){if(void 0!==e.enablecompletion&&0==e.enablecompletion)return!1;if(void 0!==e.completionhascriteria&&0==e.completionhascriteria)return!1}return!0}):Promise.reject(null)},AddonCourseCompletionProvider.prototype.isPluginViewEnabledForUser=function(e,n){var t=this,o=this.sitesProvider.getCurrentSiteUserId();return(n&&n!=o?Promise.reject(null):this.coursesProvider.getUserCourse(e,!0).then(function(e){return!(!e||void 0===e.completionhascriteria)||Promise.reject(null)})).catch(function(){var o={emergencyCache:0};return t.getCompletion(e,n,o).then(function(){return!0}).catch(function(r){return!t.utils.isWebServiceError(r)&&(o.omitExpires=!0,t.getCompletion(e,n,o).then(function(){return!0}).catch(function(){return!1}))})})},AddonCourseCompletionProvider.prototype.markCourseAsSelfCompleted=function(e){var n={courseid:e};return this.sitesProvider.getCurrentSite().write("core_completion_mark_course_self_completed",n).then(function(e){if(!e.status)return Promise.reject(null)})},AddonCourseCompletionProvider}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(1),i=(t(6),t(117)),l=(t(29),function(){function CoreLinkDirective(e,n,t,o,r,i,l,s,a,u){this.domUtils=n,this.utils=t,this.sitesProvider=o,this.urlUtils=r,this.contentLinksHelper=i,this.navCtrl=l,this.content=s,this.svComponent=a,this.textUtils=u,this.autoLogin="check",this.element=e.nativeElement||e}return CoreLinkDirective.prototype.ngOnInit=function(){var e=this;this.inApp=this.utils.isTrueOrOne(this.inApp);var n=this.navCtrl;!this.svComponent||this.navCtrl&&this.navCtrl!==this.svComponent.getDetailsNav()||(n=this.svComponent.getMasterNav()),this.element.addEventListener("click",function(t){if(!t.defaultPrevented){var o=e.element.getAttribute("href");o&&(t.preventDefault(),t.stopPropagation(),e.utils.isTrueOrOne(e.capture)?(o=e.textUtils.decodeURI(o),e.contentLinksHelper.handleLink(o,void 0,n,!0,!0).then(function(n){n||e.navigate(o)})):e.navigate(o))}})},CoreLinkDirective.prototype.navigate=function(e){var n=this,t=i.a.customurlscheme+"://link=";0===e.indexOf("cdvfile://")||0===e.indexOf("file://")||0===e.indexOf("filesystem:")?this.utils.openFile(e).catch(function(e){n.domUtils.showErrorModal(e)}):"#"==e.charAt(0)?"/"==(e=e.substr(1)).charAt(0)||this.domUtils.scrollToElementBySelector(this.content,"#"+e+", [name='"+e+"']"):0===e.indexOf(t)?(e=t+encodeURIComponent(e.replace(t,"")),this.utils.openInBrowser(e)):this.sitesProvider.isLoggedIn()?(this.urlUtils.isAbsoluteURL(e)||(e="/"==e.charAt(0)?this.sitesProvider.getCurrentSite().getURL()+e:this.sitesProvider.getCurrentSite().getURL()+"/"+e),"yes"==this.autoLogin?this.inApp?this.sitesProvider.getCurrentSite().openInAppWithAutoLogin(e):this.sitesProvider.getCurrentSite().openInBrowserWithAutoLogin(e):"no"==this.autoLogin?this.inApp?this.utils.openInApp(e):this.utils.openInBrowser(e):this.inApp?this.sitesProvider.getCurrentSite().openInAppWithAutoLoginIfSameSite(e):this.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e)):this.inApp?this.utils.openInApp(e):this.utils.openInBrowser(e)},CoreLinkDirective=Object(o.__decorate)([Object(o.__param)(6,Object(r.E)()),Object(o.__param)(7,Object(r.E)()),Object(o.__param)(8,Object(r.E)())],CoreLinkDirective)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(190);var o=t(54),r=function(){function AddonModWorkshopProvider(e,n,t,o,r,i){this.appProvider=e,this.filepoolProvider=n,this.sitesProvider=t,this.utils=o,this.workshopOffline=r,this.logHelper=i,this.ROOT_CACHE_KEY="mmaModWorkshop:"}return e=AddonModWorkshopProvider,AddonModWorkshopProvider.prototype.getWorkshopDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"workshop:"+e},AddonModWorkshopProvider.prototype.getWorkshopDataPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+e},AddonModWorkshopProvider.prototype.getWorkshopAccessInformationDataCacheKey=function(e){return this.getWorkshopDataPrefixCacheKey(e)+":access"},AddonModWorkshopProvider.prototype.getUserPlanDataCacheKey=function(e){return this.getWorkshopDataPrefixCacheKey(e)+":userplan"},AddonModWorkshopProvider.prototype.getSubmissionsDataCacheKey=function(e,n,t){return void 0===n&&(n=0),void 0===t&&(t=0),this.getWorkshopDataPrefixCacheKey(e)+":submissions:"+n+":"+t},AddonModWorkshopProvider.prototype.getSubmissionDataCacheKey=function(e,n){return this.getWorkshopDataPrefixCacheKey(e)+":submission:"+n},AddonModWorkshopProvider.prototype.getGradesDataCacheKey=function(e){return this.getWorkshopDataPrefixCacheKey(e)+":grades"},AddonModWorkshopProvider.prototype.getGradesReportDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getWorkshopDataPrefixCacheKey(e)+":report:"+n},AddonModWorkshopProvider.prototype.getSubmissionAssessmentsDataCacheKey=function(e,n){return this.getWorkshopDataPrefixCacheKey(e)+":assessments:"+n},AddonModWorkshopProvider.prototype.getReviewerAssessmentsDataCacheKey=function(e,n){return void 0===n&&(n=0),this.getWorkshopDataPrefixCacheKey(e)+":reviewerassessments:"+n},AddonModWorkshopProvider.prototype.getAssessmentDataCacheKey=function(e,n){return this.getWorkshopDataPrefixCacheKey(e)+":assessment:"+n},AddonModWorkshopProvider.prototype.getAssessmentFormDataCacheKey=function(e,n,t){return void 0===t&&(t="assessment"),this.getWorkshopDataPrefixCacheKey(e)+":assessmentsform:"+n+":"+t},AddonModWorkshopProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_workshop_get_workshops_by_courses")&&e.wsAvailable("mod_workshop_get_workshop_access_information")})},AddonModWorkshopProvider.prototype.getWorkshopByKey=function(n,t,r,i,l){var s=this;return void 0===l&&(l=!1),this.sitesProvider.getSite(i).then(function(i){var a={courseids:[n]},u={cacheKey:s.getWorkshopDataCacheKey(n),updateFrequency:o.a.FREQUENCY_RARELY};return l&&(u.omitExpires=!0),i.read("mod_workshop_get_workshops_by_courses",a,u).then(function(e){if(e&&e.workshops){var n=e.workshops.find(function(e){return e[t]==r});if(n)return n}return Promise.reject(null)}).then(function(n){return void 0===n.submissiontypetext&&(n.nattachments>0?(n.submissiontypetext=e.SUBMISSION_TYPE_AVAILABLE,n.submissiontypefile=e.SUBMISSION_TYPE_AVAILABLE):(n.submissiontypetext=e.SUBMISSION_TYPE_REQUIRED,n.submissiontypefile=e.SUBMISSION_TYPE_DISABLED)),n})})},AddonModWorkshopProvider.prototype.getWorkshop=function(e,n,t,o){return void 0===o&&(o=!1),this.getWorkshopByKey(e,"coursemodule",n,t,o)},AddonModWorkshopProvider.prototype.getWorkshopById=function(e,n,t,o){return void 0===o&&(o=!1),this.getWorkshopByKey(e,"id",n,t,o)},AddonModWorkshopProvider.prototype.invalidateWorkshopData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getWorkshopDataCacheKey(e))})},AddonModWorkshopProvider.prototype.invalidateWorkshopWSData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getWorkshopDataPrefixCacheKey(e))})},AddonModWorkshopProvider.prototype.getWorkshopAccessInformation=function(e,n,t,o){var r=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(o).then(function(o){var i={workshopid:e},l={cacheKey:r.getWorkshopAccessInformationDataCacheKey(e)};return n?l.omitExpires=!0:t&&(l.getFromCache=0,l.emergencyCache=0),o.read("mod_workshop_get_workshop_access_information",i,l)})},AddonModWorkshopProvider.prototype.invalidateWorkshopAccessInformationData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getWorkshopAccessInformationDataCacheKey(e))})},AddonModWorkshopProvider.prototype.getUserPlanPhases=function(e,n,t,r){var i=this;return void 0===n&&(n=!1),void 0===t&&(t=!1),this.sitesProvider.getSite(r).then(function(r){var l={workshopid:e},s={cacheKey:i.getUserPlanDataCacheKey(e),updateFrequency:o.a.FREQUENCY_OFTEN};return n?s.omitExpires=!0:t&&(s.getFromCache=0,s.emergencyCache=0),r.read("mod_workshop_get_user_plan",l,s).then(function(e){return e&&e.userplan&&e.userplan.phases?i.utils.arrayToObject(e.userplan.phases,"code"):Promise.reject(null)})})},AddonModWorkshopProvider.prototype.invalidateUserPlanPhasesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUserPlanDataCacheKey(e))})},AddonModWorkshopProvider.prototype.getSubmissions=function(e,n,t,r,i,l){var s=this;return void 0===n&&(n=0),void 0===t&&(t=0),void 0===r&&(r=!1),void 0===i&&(i=!1),this.sitesProvider.getSite(l).then(function(l){var a={workshopid:e,userid:n,groupid:t},u={cacheKey:s.getSubmissionsDataCacheKey(e,n,t),updateFrequency:o.a.FREQUENCY_OFTEN};return r?u.omitExpires=!0:i&&(u.getFromCache=0,u.emergencyCache=0),l.read("mod_workshop_get_submissions",a,u).then(function(e){return e&&e.submissions?e.submissions:Promise.reject(null)})})},AddonModWorkshopProvider.prototype.invalidateSubmissionsData=function(e,n,t,o){var r=this;return void 0===n&&(n=0),void 0===t&&(t=0),this.sitesProvider.getSite(o).then(function(o){return o.invalidateWsCacheForKey(r.getSubmissionsDataCacheKey(e,n,t))})},AddonModWorkshopProvider.prototype.getSubmission=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={submissionid:n},i={cacheKey:o.getSubmissionDataCacheKey(e,n)};return t.read("mod_workshop_get_submission",r,i).then(function(e){return e&&e.submission?e.submission:Promise.reject(null)})})},AddonModWorkshopProvider.prototype.invalidateSubmissionData=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getSubmissionDataCacheKey(e,n))})},AddonModWorkshopProvider.prototype.getGrades=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o={workshopid:e},r={cacheKey:t.getGradesDataCacheKey(e)};return n.read("mod_workshop_get_grades",o,r)})},AddonModWorkshopProvider.prototype.invalidateGradesData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getGradesDataCacheKey(e))})},AddonModWorkshopProvider.prototype.getGradesReport=function(n,t,r,i,l,s,a){var u=this;return void 0===t&&(t=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===l&&(l=!1),void 0===s&&(s=!1),this.sitesProvider.getSite(a).then(function(a){var d={workshopid:n,groupid:t,page:r,perpage:i||e.PER_PAGE},c={cacheKey:u.getGradesReportDataCacheKey(n,t),updateFrequency:o.a.FREQUENCY_OFTEN};return l?c.omitExpires=!0:s&&(c.getFromCache=0,c.emergencyCache=0),a.read("mod_workshop_get_grades_report",d,c).then(function(e){return e&&e.report?e.report:Promise.reject(null)})})},AddonModWorkshopProvider.prototype.fetchAllGradeReports=function(n,t,o,r,i,l){return void 0===t&&(t=0),void 0===o&&(o=0),void 0===r&&(r=!1),void 0===i&&(i=!1),l=l||this.sitesProvider.getCurrentSiteId(),o=o||e.PER_PAGE,this.fetchGradeReportsRecursive(n,t,o,r,i,[],0,l)},AddonModWorkshopProvider.prototype.fetchGradeReportsRecursive=function(e,n,t,o,r,i,l,s){var a=this;return this.getGradesReport(e,n,l,t,o,r,s).then(function(u){Array.prototype.push.apply(i,u.grades);return(l+1)*t<u.totalcount?a.fetchGradeReportsRecursive(e,n,t,o,r,i,l+1,s):i})},AddonModWorkshopProvider.prototype.invalidateGradeReportData=function(e,n,t){var o=this;return void 0===n&&(n=0),this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getGradesReportDataCacheKey(e,n))})},AddonModWorkshopProvider.prototype.getSubmissionAssessments=function(e,n,t,o,r){var i=this;return void 0===t&&(t=!1),void 0===o&&(o=!1),this.sitesProvider.getSite(r).then(function(r){var l={submissionid:n},s={cacheKey:i.getSubmissionAssessmentsDataCacheKey(e,n)};return t?s.omitExpires=!0:o&&(s.getFromCache=0,s.emergencyCache=0),r.read("mod_workshop_get_submission_assessments",l,s).then(function(e){return e&&e.assessments?e.assessments:Promise.reject(null)})})},AddonModWorkshopProvider.prototype.invalidateSubmissionAssesmentsData=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getSubmissionAssessmentsDataCacheKey(e,n))})},AddonModWorkshopProvider.prototype.addSubmission=function(e,n,t,o,r,i,l,s){var a=this;void 0===s&&(s=!1),i=i||this.sitesProvider.getCurrentSiteId();var u=function(){return a.workshopOffline.saveSubmission(e,n,t,o,{},l,"add",i).then(function(){return!1})};return(l?this.workshopOffline.deleteSubmissionAction(e,l,"add",i):Promise.resolve()).then(function(){return!a.appProvider.isOnline()&&s?u():a.addSubmissionOnline(e,t,o,r,i).catch(function(e){return s&&!a.utils.isWebServiceError(e)?u():Promise.reject(e)})})},AddonModWorkshopProvider.prototype.addSubmissionOnline=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.write("mod_workshop_add_submission",{workshopid:e,title:n,content:t,attachmentsid:o||0}).then(function(e){return e&&e.submissionid?e.submissionid:Promise.reject(i.utils.createFakeWSError(""))})})},AddonModWorkshopProvider.prototype.updateSubmission=function(e,n,t,o,r,i,l,s){var a=this;void 0===s&&(s=!1),l=l||this.sitesProvider.getCurrentSiteId();var u=function(){return a.workshopOffline.saveSubmission(e,t,o,r,i,n,"update",l).then(function(){return!1})};return this.workshopOffline.deleteSubmissionAction(e,n,"update",l).then(function(){return!a.appProvider.isOnline()&&s?u():a.updateSubmissionOnline(n,o,r,i,l).catch(function(e){return s&&!a.utils.isWebServiceError(e)?u():Promise.reject(e)})})},AddonModWorkshopProvider.prototype.updateSubmissionOnline=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.write("mod_workshop_update_submission",{submissionid:e,title:n,content:t,attachmentsid:o||0}).then(function(n){return n&&n.status?Promise.resolve(e):Promise.reject(i.utils.createFakeWSError(""))})})},AddonModWorkshopProvider.prototype.deleteSubmission=function(e,n,t,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=function(){return r.workshopOffline.saveSubmission(e,t,"","",0,n,"delete",o).then(function(){return!1})};return this.workshopOffline.deleteSubmissionAction(e,n,"delete",o).then(function(){return r.appProvider.isOnline()?r.deleteSubmissionOnline(n,o).catch(function(e){return r.utils.isWebServiceError(e)?Promise.reject(e):i()}):i()})},AddonModWorkshopProvider.prototype.deleteSubmissionOnline=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.write("mod_workshop_delete_submission",{submissionid:e}).then(function(n){return n&&n.status?Promise.resolve(e):Promise.reject(t.utils.createFakeWSError(""))})})},AddonModWorkshopProvider.prototype.getReviewerAssessments=function(e,n,t,o,r){var i=this;return void 0===t&&(t=!1),void 0===o&&(o=!1),this.sitesProvider.getSite(r).then(function(r){var l={workshopid:e},s={cacheKey:i.getReviewerAssessmentsDataCacheKey(e,n)};return n&&(l.userid=n),t?s.omitExpires=!0:o&&(s.getFromCache=0,s.emergencyCache=0),r.read("mod_workshop_get_reviewer_assessments",l,s).then(function(e){return e&&e.assessments?e.assessments:Promise.reject(null)})})},AddonModWorkshopProvider.prototype.invalidateReviewerAssesmentsData=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getReviewerAssessmentsDataCacheKey(e,n))})},AddonModWorkshopProvider.prototype.getAssessment=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={assessmentid:n},i={cacheKey:o.getAssessmentDataCacheKey(e,n)};return t.read("mod_workshop_get_assessment",r,i).then(function(e){return e&&e.assessment?e.assessment:Promise.reject(null)})})},AddonModWorkshopProvider.prototype.invalidateAssessmentData=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getAssessmentDataCacheKey(e,n))})},AddonModWorkshopProvider.prototype.getAssessmentForm=function(e,n,t,r,i,l){var s=this;return void 0===t&&(t="assessment"),void 0===r&&(r=!1),void 0===i&&(i=!1),this.sitesProvider.getSite(l).then(function(l){var a={assessmentid:n,mode:t||"assessment"},u={cacheKey:s.getAssessmentFormDataCacheKey(e,n,t),updateFrequency:o.a.FREQUENCY_RARELY};return r?u.omitExpires=!0:i&&(u.getFromCache=0,u.emergencyCache=0),l.read("mod_workshop_get_assessment_form_definition",a,u).then(function(e){return e?(e.fields=s.parseFields(e.fields),e.options=s.utils.objectToKeyValueMap(e.options,"name","value"),e.current=s.parseFields(e.current),e):Promise.reject(null)})})},AddonModWorkshopProvider.prototype.parseFields=function(e){var n=[];return e.forEach(function(e){var t=e.name.split("_"),o=t[0],r=t[3],i=t[6]||!1;parseInt(r,10)==r&&(n[r]||(n[r]={number:parseInt(r,10)+1}),i&&parseInt(i,10)==i?(n[r].fields||(n[r].fields=[]),n[r].fields[i]||(n[r].fields[i]={number:parseInt(i,10)+1}),n[r].fields[i][o]=e.value):n[r][o]=e.value)}),n},AddonModWorkshopProvider.prototype.invalidateAssessmentFormData=function(e,n,t,o){var r=this;return void 0===t&&(t="assessment"),this.sitesProvider.getSite(o).then(function(o){return o.invalidateWsCacheForKey(r.getAssessmentFormDataCacheKey(e,n,t))})},AddonModWorkshopProvider.prototype.updateAssessment=function(e,n,t,o,r,i){var l=this;void 0===i&&(i=!1),r=r||this.sitesProvider.getCurrentSiteId();var s=function(){return l.workshopOffline.saveAssessment(e,n,t,o,r).then(function(){return!1})};return this.workshopOffline.deleteAssessment(e,n,r).then(function(){return!l.appProvider.isOnline()&&i?s():l.updateAssessmentOnline(n,o,r).catch(function(e){return i&&!l.utils.isWebServiceError(e)?s():Promise.reject(e)})})},AddonModWorkshopProvider.prototype.updateAssessmentOnline=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={assessmentid:e,data:o.utils.objectToArrayOfObjects(n,"name","value")};return t.write("mod_workshop_update_assessment",r).then(function(e){return e&&e.status?e.rawgrade:Promise.reject(o.utils.createFakeWSError(""))})})},AddonModWorkshopProvider.prototype.evaluateSubmission=function(e,n,t,o,r,i,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a=function(){return s.workshopOffline.saveEvaluateSubmission(e,n,t,o,r,i,l).then(function(){return!1})};return this.workshopOffline.deleteEvaluateSubmission(e,n,l).then(function(){return s.appProvider.isOnline()?s.evaluateSubmissionOnline(n,o,r,i,l).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):a()}):a()})},AddonModWorkshopProvider.prototype.evaluateSubmissionOnline=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.write("mod_workshop_evaluate_submission",{submissionid:e,feedbacktext:n||"",feedbackformat:1,published:t?1:0,gradeover:o}).then(function(e){return e&&e.status?Promise.resolve(!0):Promise.reject(i.utils.createFakeWSError(""))})})},AddonModWorkshopProvider.prototype.evaluateAssessment=function(e,n,t,o,r,i,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a=function(){return s.workshopOffline.saveEvaluateAssessment(e,n,t,o,r,i,l).then(function(){return!1})};return this.workshopOffline.deleteEvaluateAssessment(e,n,l).then(function(){return s.appProvider.isOnline()?s.evaluateAssessmentOnline(n,o,r,i,l).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):a()}):a()})},AddonModWorkshopProvider.prototype.evaluateAssessmentOnline=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.write("mod_workshop_evaluate_assessment",{assessmentid:e,feedbacktext:n||"",feedbackformat:1,weight:t,gradinggradeover:o}).then(function(e){return e&&e.status?Promise.resolve(!0):Promise.reject(i.utils.createFakeWSError(""))})})},AddonModWorkshopProvider.prototype.invalidateContent=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getWorkshop(n,e,t,!0).then(function(e){return o.invalidateContentById(e.id,n,t)})},AddonModWorkshopProvider.prototype.invalidateContentById=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId();var o=[this.invalidateWorkshopData(n,t),this.invalidateWorkshopWSData(e,t)];return Promise.all(o)},AddonModWorkshopProvider.prototype.invalidateFiles=function(n,t){return this.filepoolProvider.invalidateFilesByComponent(t,e.COMPONENT,n)},AddonModWorkshopProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_workshop_view_workshop",{workshopid:n},e.COMPONENT,n,t,"workshop",o)},AddonModWorkshopProvider.prototype.logViewSubmission=function(n,t,o,r){var i={submissionid:n};return this.logHelper.logSingle("mod_workshop_view_submission",i,e.COMPONENT,t,o,"workshop",i,r)},AddonModWorkshopProvider.COMPONENT="mmaModWorkshop",AddonModWorkshopProvider.PER_PAGE=10,AddonModWorkshopProvider.PHASE_SETUP=10,AddonModWorkshopProvider.PHASE_SUBMISSION=20,AddonModWorkshopProvider.PHASE_ASSESSMENT=30,AddonModWorkshopProvider.PHASE_EVALUATION=40,AddonModWorkshopProvider.PHASE_CLOSED=50,AddonModWorkshopProvider.EXAMPLES_VOLUNTARY=0,AddonModWorkshopProvider.EXAMPLES_BEFORE_SUBMISSION=1,AddonModWorkshopProvider.EXAMPLES_BEFORE_ASSESSMENT=2,AddonModWorkshopProvider.SUBMISSION_TYPE_DISABLED=0,AddonModWorkshopProvider.SUBMISSION_TYPE_AVAILABLE=1,AddonModWorkshopProvider.SUBMISSION_TYPE_REQUIRED=2,AddonModWorkshopProvider.SUBMISSION_CHANGED="addon_mod_workshop_submission_changed",AddonModWorkshopProvider.ASSESSMENT_SAVED="addon_mod_workshop_assessment_saved",AddonModWorkshopProvider.ASSESSMENT_INVALIDATED="addon_mod_workshop_assessment_invalidated",AddonModWorkshopProvider;var e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreFileSessionProvider(e){this.sitesProvider=e,this.files={}}return CoreFileSessionProvider.prototype.addFile=function(e,n,t,o){o=o||this.sitesProvider.getCurrentSiteId(),this.initFileArea(e,n,o),this.files[o][e][n].push(t)},CoreFileSessionProvider.prototype.clearFiles=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId(),this.files[t]&&this.files[t][e]&&this.files[t][e][n]&&(this.files[t][e][n]=[])},CoreFileSessionProvider.prototype.getFiles=function(e,n,t){return t=t||this.sitesProvider.getCurrentSiteId(),this.files[t]&&this.files[t][e]&&this.files[t][e][n]?this.files[t][e][n]:[]},CoreFileSessionProvider.prototype.initFileArea=function(e,n,t){this.files[t]||(this.files[t]={}),this.files[t][e]||(this.files[t][e]={}),this.files[t][e][n]||(this.files[t][e][n]=[])},CoreFileSessionProvider.prototype.removeFile=function(e,n,t,o){if(o=o||this.sitesProvider.getCurrentSiteId(),this.files[o]&&this.files[o][e]&&this.files[o][e][n]){var r=this.files[o][e][n].indexOf(t);-1!=r&&this.files[o][e][n].splice(r,1)}},CoreFileSessionProvider.prototype.removeFileByIndex=function(e,n,t,o){o=o||this.sitesProvider.getCurrentSiteId(),this.files[o]&&this.files[o][e]&&this.files[o][e][n]&&t>=0&&t<this.files[o][e][n].length&&this.files[o][e][n].splice(t,1)},CoreFileSessionProvider.prototype.setFiles=function(e,n,t,o){o=o||this.sitesProvider.getCurrentSiteId(),this.initFileArea(e,n,o),this.files[o][e][n]=t},CoreFileSessionProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=(t(567),function(e){function CoreCourseFormatDelegate(n,t,o,r){var i=e.call(this,"CoreCoursesCourseFormatDelegate",n,t,o)||this;return i.sitesProvider=t,i.defaultHandler=r,i.featurePrefix="CoreCourseFormatDelegate_",i.handlerNameProperty="format",i}return Object(o.__extends)(CoreCourseFormatDelegate,e),CoreCourseFormatDelegate.prototype.canViewAllSections=function(e){return this.executeFunctionOnEnabled(e.format,"canViewAllSections",[e])},CoreCourseFormatDelegate.prototype.displayEnableDownload=function(e){return this.executeFunctionOnEnabled(e.format,"displayEnableDownload",[e])},CoreCourseFormatDelegate.prototype.displayRefresher=function(e,n){return this.executeFunctionOnEnabled(e.format,"displayRefresher",[e,n])},CoreCourseFormatDelegate.prototype.displaySectionSelector=function(e){return this.executeFunctionOnEnabled(e.format,"displaySectionSelector",[e])},CoreCourseFormatDelegate.prototype.getAllSectionsComponent=function(e,n){var t=this;return Promise.resolve(this.executeFunctionOnEnabled(n.format,"getAllSectionsComponent",[e,n])).catch(function(e){t.logger.error("Error getting all sections component",e)})},CoreCourseFormatDelegate.prototype.getCourseFormatComponent=function(e,n){var t=this;return Promise.resolve(this.executeFunctionOnEnabled(n.format,"getCourseFormatComponent",[e,n])).catch(function(e){t.logger.error("Error getting course format component",e)})},CoreCourseFormatDelegate.prototype.getCourseSummaryComponent=function(e,n){var t=this;return Promise.resolve(this.executeFunctionOnEnabled(n.format,"getCourseSummaryComponent",[e,n])).catch(function(e){t.logger.error("Error getting course summary component",e)})},CoreCourseFormatDelegate.prototype.getCourseTitle=function(e,n){return this.executeFunctionOnEnabled(e.format,"getCourseTitle",[e,n])},CoreCourseFormatDelegate.prototype.getCurrentSection=function(e,n){return Promise.resolve(this.executeFunctionOnEnabled(e.format,"getCurrentSection",[e,n])).catch(function(){return n[0]})},CoreCourseFormatDelegate.prototype.getSectionSelectorComponent=function(e,n){var t=this;return Promise.resolve(this.executeFunctionOnEnabled(n.format,"getSectionSelectorComponent",[e,n])).catch(function(e){t.logger.error("Error getting section selector component",e)})},CoreCourseFormatDelegate.prototype.getSingleSectionComponent=function(e,n){var t=this;return Promise.resolve(this.executeFunctionOnEnabled(n.format,"getSingleSectionComponent",[e,n])).catch(function(e){t.logger.error("Error getting single section component",e)})},CoreCourseFormatDelegate.prototype.invalidateData=function(e,n){return this.executeFunctionOnEnabled(e.format,"invalidateData",[e,n])},CoreCourseFormatDelegate.prototype.openCourse=function(e,n,t){return this.executeFunctionOnEnabled(n.format,"openCourse",[e,n,t])},CoreCourseFormatDelegate.prototype.shouldRefreshWhenCompletionChanges=function(e){return Promise.resolve(this.executeFunctionOnEnabled(e.format,"shouldRefreshWhenCompletionChanges",[e]))},CoreCourseFormatDelegate}(t(99).a))},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(1),r=t(24),i=function(){function AddonModDataFieldPluginComponent(e){this.fb=e,this.gotoEntry=new o.r}return AddonModDataFieldPluginComponent.prototype.addControl=function(e,n){this.form&&("search"==this.mode&&this.form.addControl(e,this.fb.control(this.search[e]||null)),"edit"==this.mode&&this.form.addControl(e,this.fb.control(n,this.field.required?r.u.required:null)))},AddonModDataFieldPluginComponent.prototype.ngOnInit=function(){this.init()},AddonModDataFieldPluginComponent.prototype.init=function(){},AddonModDataFieldPluginComponent.prototype.isShowOrListMode=function(){return"list"==this.mode||"show"==this.mode},AddonModDataFieldPluginComponent.prototype.ngOnChanges=function(e){this.isShowOrListMode()&&e.value&&this.updateValue(e.value.currentValue)},AddonModDataFieldPluginComponent.prototype.updateValue=function(e){this.value=e},AddonModDataFieldPluginComponent}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(1),i=(t(6),t(46)),l=(t(29),function(){function CoreUserAvatarComponent(e,n,t,o,r,l){var s=this;this.navCtrl=e,this.sitesProvider=n,this.utils=t,this.appProvider=o,this.svComponent=l,this.linkProfile=!0,this.checkOnline=!1,this.timetoshowusers=3e5,this.currentUserId=this.sitesProvider.getCurrentSiteUserId(),this.pictureObs=r.on(i.a.PROFILE_PICTURE_UPDATED,function(e){e.userId==s.userId&&(s.avatarUrl=e.picture)},this.sitesProvider.getCurrentSiteId())}return CoreUserAvatarComponent.prototype.ngOnInit=function(){this.setFields()},CoreUserAvatarComponent.prototype.ngOnChanges=function(e){e&&this.setFields()},CoreUserAvatarComponent.prototype.setFields=function(){var e=this.profileUrl||this.user&&(this.user.profileimageurl||this.user.userprofileimageurl||this.user.userpictureurl||this.user.profileimageurlsmall);"string"==typeof e&&(this.avatarUrl=e),this.fullname=this.fullname||this.user&&(this.user.fullname||this.user.userfullname),this.userId=this.userId||this.user&&(this.user.userid||this.user.id),this.courseId=this.courseId||this.user&&this.user.courseid},CoreUserAvatarComponent.prototype.isOnline=function(){if(this.utils.isFalseOrZero(this.user.isonline))return!1;if(this.user.lastaccess){var e=(new Date).getTime()-this.timetoshowusers;return 1e3*this.user.lastaccess>=e}return this.user.isonline&&this.appProvider.isOnline()},CoreUserAvatarComponent.prototype.gotoProfile=function(e){if(this.linkProfile&&this.userId){e.preventDefault(),e.stopPropagation();(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreUserProfilePage",{userId:this.userId,courseId:this.courseId})}},CoreUserAvatarComponent.prototype.ngOnDestroy=function(){this.pictureObs&&this.pictureObs.off()},CoreUserAvatarComponent=Object(o.__decorate)([Object(o.__param)(5,Object(r.E)())],CoreUserAvatarComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(153),t(167);var o=t(78),r=(t(134),function(){function AddonModAssignHelperProvider(e,n,t,o,r,i,l,s,a,u){this.sitesProvider=n,this.fileProvider=t,this.assignProvider=o,this.utils=r,this.assignOffline=i,this.feedbackDelegate=l,this.submissionDelegate=s,this.fileUploaderProvider=a,this.groupsProvider=u,this.logger=e.getInstance("AddonModAssignHelperProvider")}return AddonModAssignHelperProvider.prototype.canEditSubmissionOffline=function(e,n){if(!n)return Promise.resolve(!1);if(n.status==o.a.SUBMISSION_STATUS_NEW||n.status==o.a.SUBMISSION_STATUS_REOPENED)return Promise.resolve(!0);for(var t=[],r=!0,i=0;i<n.plugins.length;i++){t.push(this.submissionDelegate.canPluginEditOffline(e,n,n.plugins[i]).then(function(e){e||(r=!1)}))}return Promise.all(t).then(function(){return r})},AddonModAssignHelperProvider.prototype.clearSubmissionPluginTmpData=function(e,n,t){var o=this;n.plugins.forEach(function(r){o.submissionDelegate.clearTmpData(e,n,r,t)})},AddonModAssignHelperProvider.prototype.copyPreviousAttempt=function(e,n){var t=this,o={},r=[];return n.plugins.forEach(function(n){r.push(t.submissionDelegate.copyPluginSubmissionData(e,n,o))}),Promise.all(r).then(function(){if(Object.keys(o).length)return t.assignProvider.saveSubmissionOnline(e.id,o)})},AddonModAssignHelperProvider.prototype.createEmptyFeedback=function(){return{grade:void 0,gradefordisplay:void 0,gradeddate:void 0}},AddonModAssignHelperProvider.prototype.createEmptySubmission=function(){return{id:void 0,userid:void 0,attemptnumber:void 0,timecreated:void 0,timemodified:void 0,status:void 0,groupid:void 0}},AddonModAssignHelperProvider.prototype.deleteStoredSubmissionFiles=function(e,n,t,o){var r=this;return this.assignOffline.getSubmissionPluginFolder(e,n,t,o).then(function(e){return r.fileProvider.removeDir(e)})},AddonModAssignHelperProvider.prototype.discardFeedbackPluginData=function(e,n,t,o){var r=this,i=[];return t.plugins.forEach(function(t){i.push(r.feedbackDelegate.discardPluginFeedbackData(e,n,t,o))}),Promise.all(i)},AddonModAssignHelperProvider.prototype.isSubmissionEmpty=function(e,n){if(!n)return!0;for(var t=0,o=n.plugins;t<o.length;t++){if(!this.submissionDelegate.isPluginEmpty(e,o[t]))return!1}return!0},AddonModAssignHelperProvider.prototype.getParticipants=function(e,n,t,o){var r=this;return n=n||0,o=o||this.sitesProvider.getCurrentSiteId(),this.assignProvider.listParticipants(e.id,n,t,o).then(function(i){return n||i&&i.length>0?i:r.groupsProvider.getActivityGroupInfo(e.cmid,!1,void 0,o).then(function(n){var i=[],l={};return n.groups.forEach(function(n){i.push(r.assignProvider.listParticipants(e.id,n.id,t,o).then(function(e){e.forEach(function(e){l[e.id]=e})}))}),Promise.all(i).then(function(){return r.utils.objectToArray(l)})})})},AddonModAssignHelperProvider.prototype.getPluginConfig=function(e,n,t){var o={};return e.configs.forEach(function(e){e.subtype==n&&e.plugin==t&&(o[e.name]=e.value)}),o},AddonModAssignHelperProvider.prototype.getPluginsEnabled=function(e,n){var t=[];return e.configs.forEach(function(e){e.subtype==n&&"enabled"==e.name&&1===parseInt(e.value,10)&&t.push({type:e.plugin})}),t},AddonModAssignHelperProvider.prototype.getStoredSubmissionFiles=function(e,n,t,o){var r=this;return this.assignOffline.getSubmissionPluginFolder(e,n,t,o).then(function(e){return r.fileProvider.getDirectoryContents(e)})},AddonModAssignHelperProvider.prototype.getSubmissionSizeForCopy=function(e,n){var t=this,o=[],r=0;return n.plugins.forEach(function(n){o.push(t.submissionDelegate.getPluginSizeForCopy(e,n).then(function(e){r+=e}))}),Promise.all(o).then(function(){return r})},AddonModAssignHelperProvider.prototype.getSubmissionSizeForEdit=function(e,n,t){var o=this,r=[],i=0;return n.plugins.forEach(function(l){r.push(o.submissionDelegate.getPluginSizeForEdit(e,n,l,t).then(function(e){i+=e}))}),Promise.all(r).then(function(){return i})},AddonModAssignHelperProvider.prototype.getSubmissionsUserData=function(e,n,t,r,i){var l=this;return this.getParticipants(e,t).then(function(t){var s=e.blindmarking&&!e.revealidentities,a=[],u=[],d=l.utils.arrayToObject(t,"id");return n.forEach(function(n){if(n.submitid=n.userid>0?n.userid:n.blindid,!(n.submitid<=0)){var t=d[n.submitid];if(t){delete d[n.submitid],s||(n.userfullname=t.fullname,n.userprofileimageurl=t.profileimageurl),n.manyGroups=!!t.groups&&t.groups.length>1,n.noGroups=!!t.groups&&0==t.groups.length,t.groupname&&(n.groupid=t.groupid,n.groupname=t.groupname);var o;n.userid>0&&s&&(delete n.userid,o=l.assignProvider.getAssignmentUserMappings(e.id,n.submitid,r,i).then(function(e){n.blindid=e})),o=o||Promise.resolve(),a.push(o.then(function(){(n.userfullname||n.blindid)&&u.push(n)}))}}}),Promise.all(a).then(function(){return l.utils.objectToArray(d).forEach(function(e){var n=l.createEmptySubmission();n.submitid=e.id,s?n.blindid=e.id:(n.userid=e.id,n.userfullname=e.fullname,n.userprofileimageurl=e.profileimageurl),n.manyGroups=!!e.groups&&e.groups.length>1,n.noGroups=!!e.groups&&0==e.groups.length,e.groupname&&(n.groupid=e.groupid,n.groupname=e.groupname),n.status=e.submitted?o.a.SUBMISSION_STATUS_SUBMITTED:o.a.SUBMISSION_STATUS_NEW,u.push(n)}),u})})},AddonModAssignHelperProvider.prototype.hasFeedbackDataChanged=function(e,n,t,o){var r=this,i=[],l=!1;return t.plugins.forEach(function(s){i.push(r.prepareFeedbackPluginData(e.id,o,t).then(function(t){return r.feedbackDelegate.hasPluginDataChanged(e,n,s,t,o).then(function(e){e&&(l=!0)})}).catch(function(){}))}),this.utils.allPromises(i).then(function(){return l})},AddonModAssignHelperProvider.prototype.hasSubmissionDataChanged=function(e,n,t){var o=this,r=[],i=!1;return n.plugins.forEach(function(l){r.push(o.submissionDelegate.hasPluginDataChanged(e,n,l,t).then(function(e){e&&(i=!0)}).catch(function(){}))}),this.utils.allPromises(r).then(function(){return i})},AddonModAssignHelperProvider.prototype.prepareFeedbackPluginData=function(e,n,t,o){var r=this,i={},l=[];return t.plugins.forEach(function(t){l.push(r.feedbackDelegate.preparePluginFeedbackData(e,n,t,i,o))}),Promise.all(l).then(function(){return i})},AddonModAssignHelperProvider.prototype.prepareSubmissionPluginData=function(e,n,t,o){var r=this,i={},l=[];return n.plugins.forEach(function(s){l.push(r.submissionDelegate.preparePluginSubmissionData(e,n,s,t,i,o))}),Promise.all(l).then(function(){return i})},AddonModAssignHelperProvider.prototype.storeSubmissionFiles=function(e,n,t,o,r){var i=this;return this.assignOffline.getSubmissionPluginFolder(e,n,o,r).then(function(e){return i.fileUploaderProvider.storeFilesToUpload(e,t)})},AddonModAssignHelperProvider.prototype.uploadFile=function(e,n,t,r){return this.fileUploaderProvider.uploadOrReuploadFile(n,t,o.a.COMPONENT,e,r)},AddonModAssignHelperProvider.prototype.uploadFiles=function(e,n,t){return this.fileUploaderProvider.uploadOrReuploadFiles(n,o.a.COMPONENT,e,t)},AddonModAssignHelperProvider.prototype.uploadOrStoreFiles=function(e,n,t,o,r,i){return o?this.storeSubmissionFiles(e,n,t,r,i):this.uploadFiles(e,t,i)},AddonModAssignHelperProvider}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(169);var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},r=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},i=function(){function CoreGradesHelperProvider(e,n,t,o,r,i,l,s,a,u,d){this.coursesProvider=n,this.gradesProvider=t,this.sitesProvider=o,this.textUtils=r,this.courseProvider=i,this.domUtils=l,this.urlUtils=s,this.utils=a,this.linkHelper=u,this.courseHelper=d,this.logger=e.getInstance("CoreGradesHelperProvider")}return CoreGradesHelperProvider.prototype.formatGradeRow=function(e){var n={};for(var t in e)if(void 0!==e[t].content&&null!==e[t].content){var o=String(e[t].content);"itemname"==t?(this.setRowIcon(n,o),n.link=this.getModuleLink(o),n.rowclass+=e[t].class.indexOf("hidden")>=0?" hidden":"",n.rowclass+=e[t].class.indexOf("dimmed_text")>=0?" dimmed_text":"",o=o.replace(/<\/span>/gi,"\n"),o=this.textUtils.cleanTags(o)):o=this.textUtils.replaceNewLines(o,"<br>"),"&nbsp;"==o&&(o=""),n[t]=o.trim()}return n},CoreGradesHelperProvider.prototype.formatGradeRowForTable=function(e){var n={};for(var t in e)if(void 0!==e[t].content&&null!==e[t].content){var o=String(e[t].content);"itemname"==t?(n.id=parseInt(e[t].id.split("_")[1],10),n.colspan=e[t].colspan,n.rowspan=e.leader&&e.leader.rowspan||1,this.setRowIcon(n,o),n.rowclass=e[t].class.indexOf("leveleven")<0?"odd":"even",n.rowclass+=e[t].class.indexOf("hidden")>=0?" hidden":"",n.rowclass+=e[t].class.indexOf("dimmed_text")>=0?" dimmed_text":"",o=o.replace(/<\/span>/gi,"\n"),o=this.textUtils.cleanTags(o),t="gradeitem"):o=this.textUtils.replaceNewLines(o,"<br>"),"&nbsp;"==o&&(o=""),n[t]=o.trim()}return n},CoreGradesHelperProvider.prototype.formatGradeItem=function(e){for(var n in e){var t=n.indexOf("formatted");t>0&&(e[n.substr(0,t)]=e[n])}return e},CoreGradesHelperProvider.prototype.formatGradesTable=function(e){var n=this,t=e.maxdepth,o={columns:[],rows:[]},r={gradeitem:!0,weight:!1,grade:!1,range:!1,percentage:!1,lettergrade:!1,rank:!1,average:!1,feedback:!1,contributiontocoursetotal:!1};o.rows=e.tabledata.map(function(e){return n.formatGradeRowForTable(e)});var i=o.rows.find(function(e){return"leader"!=e.itemtype&&(void 0!==e.grade||void 0!==e.percentage)});i&&void 0!==i.grade?r.grade=!0:i&&void 0!==i.percentage?r.percentage=!0:(i=o.rows.find(function(e){return"leader"!=e.itemtype}),r.grade=!0);for(var l in r)void 0!==i[l]&&o.columns.push({name:l,colspan:"gradeitem"==l?t:1,hiddenPhone:!r[l]});return o},CoreGradesHelperProvider.prototype.getGradesCourseData=function(e){return o(this,void 0,void 0,function(){var n,t,o,i;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.coursesProvider.getUserCourses(void 0,void 0,0)];case 1:return o=r.sent(),i=this.utils.arrayToObject(o,"id"),n=this.addCourseData(e,i),[3,3];case 2:return r.sent(),n=!0,[3,3];case 3:return n?(t=this.coursesProvider.isGetCoursesByFieldAvailable()?this.coursesProvider.getCoursesByField("ids",e.map(function(e){return e.courseid}).join(",")):this.coursesProvider.getUserCourses(void 0,void 0,2),[4,t]):[3,5];case 4:o=r.sent(),i=this.utils.arrayToObject(o,"id"),this.addCourseData(e,i),r.label=5;case 5:return[2,e.filter(function(e){return void 0!==e.courseFullName})]}})})},CoreGradesHelperProvider.prototype.addCourseData=function(e,n){for(var t=!1,o=0,r=e;o<r.length;o++){var i=r[o];i.courseid in n?i.courseFullName=n[i.courseid].fullname:t=!0}return t},CoreGradesHelperProvider.prototype.getGradeItem=function(e,n,t,o,r){var i=this;return void 0===r&&(r=!1),this.gradesProvider.getCourseGradesTable(e,t,o,r).then(function(e){return e?i.getGradesTableRow(e,n):Promise.reject(null)})},CoreGradesHelperProvider.prototype.getGradeLabelFromValue=function(e,n){if(n=Number(n),!e||!n||n<=0)return"";for(var t in e)if(e[t].value==n)return e[t].label;return""},CoreGradesHelperProvider.prototype.getGradeModuleItems=function(e,n,t,o,r,i){var l=this;return void 0===i&&(i=!1),this.gradesProvider.getGradeItems(e,t,o,r,i).then(function(e){return e?void 0!==e.tabledata?l.getModuleGradesTableRows(e,n):e.filter(function(e){return e.cmid==n}).map(function(e){return l.formatGradeItem(e)}):Promise.reject(null)})},CoreGradesHelperProvider.prototype.getGradeValueFromLabel=function(e,n){if(!e||!n)return 0;for(var t in e)if(e[t].label==n)return e[t].value<0?0:e[t].value;return 0},CoreGradesHelperProvider.prototype.getModuleLink=function(e){var n=this.domUtils.toDom(e)[0],t=!!n.attributes.href&&n.attributes.href.value;return!(!t||t.indexOf("/mod/")<0)&&t},CoreGradesHelperProvider.prototype.getGradesTableRow=function(e,n){if(e.tabledata){var t=e.tabledata.find(function(e){return e.itemname&&e.itemname.id&&"row"==e.itemname.id.substr(0,3)&&parseInt(e.itemname.id.split("_")[1],10)==n});if(t)return this.formatGradeRow(t)}return""},CoreGradesHelperProvider.prototype.getModuleGradesTableRows=function(e,n){var t=this;if(e.tabledata){var o=/href="([^"]*\/mod\/[^"|^\/]*\/[^"|^\.]*\.php[^"]*)/;return e.tabledata.filter(function(e){if(e.itemname&&e.itemname.content){var r=e.itemname.content.match(o);if(r&&r.length){var i=t.urlUtils.extractUrlParams(r[1]);return i&&i.id==n}}return!1}).map(function(e){return t.formatGradeRow(e)})}return[]},CoreGradesHelperProvider.prototype.goToGrades=function(e,n,t,o,r){var i,l=this,s=this.domUtils.showModalLoading();return this.sitesProvider.getSite(r).then(function(e){return r=e.id,i=e.getUserId(),t?l.gradesProvider.isGradeItemsAvalaible(r).then(function(e){if(!e)return Promise.reject(null)}):Promise.reject(null)}).then(function(){return l.gradesProvider.getGradeItems(e,n,void 0,r).then(function(i){var s=i.find(function(e){return t==e.cmid});if(s){return l.linkHelper.goInSite(o,"CoreGradesGradePage",{courseId:e,userId:n,gradeId:s.id},r).catch(function(){})}return Promise.reject(null)})}).catch(function(){if(n&&n!=i){return l.linkHelper.goInSite(o,"CoreGradesCoursePage",{course:{id:e},userId:n},r).catch(function(){})}if(!l.courseProvider.currentViewIsCourse(o,e))return l.courseHelper.getCourse(e,r).then(function(e){return l.linkHelper.goInSite(o,"CoreCourseSectionPage",{course:e.course,selectedTab:"CoreGrades"},r).catch(function(){})});l.courseProvider.selectCourseTab("CoreGrades")}).catch(function(){return l.linkHelper.goInSite(o,"CoreGradesCoursePage",{course:{id:e}},r)}).finally(function(){s.dismiss()})},CoreGradesHelperProvider.prototype.invalidateGradeModuleItems=function(e,n,t,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(o).then(function(i){return n=n||i.getUserId(),r.gradesProvider.isGradeItemsAvalaible(o).then(function(i){return i?r.gradesProvider.invalidateCourseGradesItemsData(e,n,t,o):r.gradesProvider.invalidateCourseGradesData(e,n,o)})})},CoreGradesHelperProvider.prototype.setRowIcon=function(e,n){if((n=n.replace("%2F","/").replace("%2f","/")).indexOf("/agg_mean")>-1)e.itemtype="agg_mean",e.image="assets/img/grades/agg_mean.png";else if(n.indexOf("/agg_sum")>-1)e.itemtype="agg_sum",e.image="assets/img/grades/agg_sum.png";else if(n.indexOf("/outcomes")>-1||n.indexOf("fa-tasks")>-1)e.itemtype="outcome",e.icon="fa-tasks";else if(n.indexOf("i/folder")>-1||n.indexOf("fa-folder")>-1)e.itemtype="category",e.icon="fa-folder";else if(n.indexOf("/manual_item")>-1||n.indexOf("fa-square-o")>-1)e.itemtype="manual",e.icon="fa-square-o";else if(n.indexOf("/mod/")>-1){var t=n.match(/mod\/([^\/]*)\//);void 0!==t[1]&&(e.itemtype="mod",e.itemmodule=t[1],e.image=this.courseProvider.getModuleIconSrc(t[1],this.domUtils.convertToElement(n).querySelector("img").getAttribute("src")))}else if(e.rowspan&&e.rowspan>1)e.itemtype="category",e.icon="fa-folder";else if(n.indexOf("src=")>-1){e.itemtype="unknown";var o=n.match(/src="([^"]*)"/);e.image=o[1]}else if(n.indexOf("<i ")>-1){e.itemtype="unknown";o=n.match(/<i class="(?:[^"]*?\s)?(fa-[a-z0-9-]+)/);e.icon=o?o[1]:""}return e},CoreGradesHelperProvider.prototype.makeGradesMenu=function(e,n,t,o,r){var i=this;if(void 0===t&&(t=""),void 0===o&&(o=""),e<0)return r?Promise.resolve(this.utils.makeMenuFromList(r,t,void 0,o)):n?this.courseProvider.getModuleBasicGradeInfo(n).then(function(e){return e.scale?i.utils.makeMenuFromList(e.scale,t,void 0,o):[]}):Promise.resolve([]);if(e>0){var l=[];t&&l.push({label:t,value:o});for(var s=e;s>=0;s--)l.push({label:s+" / "+e,value:s});return Promise.resolve(l)}return Promise.resolve([])},CoreGradesHelperProvider}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(54),r=t(42),i=(t(275),t(4),t(15)),l=(t.n(i),function(){function AddonCalendarProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h){this.sitesProvider=t,this.groupsProvider=o,this.coursesProvider=r,this.textUtils=i,this.timeUtils=l,this.urlUtils=s,this.localNotificationsProvider=a,this.configProvider=u,this.utils=d,this.calendarOffline=c,this.appProvider=p,this.translate=f,this.userProvider=h,this.ROOT_CACHE_KEY="mmaCalendar:",this.weekDays=[{shortname:"addon.calendar.sun",fullname:"addon.calendar.sunday"},{shortname:"addon.calendar.mon",fullname:"addon.calendar.monday"},{shortname:"addon.calendar.tue",fullname:"addon.calendar.tuesday"},{shortname:"addon.calendar.wed",fullname:"addon.calendar.wednesday"},{shortname:"addon.calendar.thu",fullname:"addon.calendar.thursday"},{shortname:"addon.calendar.fri",fullname:"addon.calendar.friday"},{shortname:"addon.calendar.sat",fullname:"addon.calendar.saturday"}],this.siteSchema={name:"AddonCalendarProvider",version:3,canBeCleared:[e.EVENTS_TABLE],tables:[{name:e.EVENTS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"name",type:"TEXT",notNull:!0},{name:"description",type:"TEXT"},{name:"format",type:"INTEGER"},{name:"eventtype",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"timestart",type:"INTEGER"},{name:"timeduration",type:"INTEGER"},{name:"categoryid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"instance",type:"INTEGER"},{name:"modulename",type:"TEXT"},{name:"timemodified",type:"INTEGER"},{name:"repeatid",type:"INTEGER"},{name:"visible",type:"INTEGER"},{name:"uuid",type:"TEXT"},{name:"sequence",type:"INTEGER"},{name:"subscriptionid",type:"INTEGER"},{name:"location",type:"TEXT"},{name:"eventcount",type:"INTEGER"},{name:"timesort",type:"INTEGER"},{name:"category",type:"TEXT"},{name:"course",type:"TEXT"},{name:"subscription",type:"TEXT"},{name:"canedit",type:"INTEGER"},{name:"candelete",type:"INTEGER"},{name:"deleteurl",type:"TEXT"},{name:"editurl",type:"TEXT"},{name:"viewurl",type:"TEXT"},{name:"formattedtime",type:"TEXT"},{name:"isactionevent",type:"INTEGER"},{name:"url",type:"TEXT"},{name:"islastday",type:"INTEGER"},{name:"popupname",type:"TEXT"},{name:"mindaytimestamp",type:"INTEGER"},{name:"maxdaytimestamp",type:"INTEGER"},{name:"draggable",type:"INTEGER"}]},{name:e.REMINDERS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"eventid",type:"INTEGER"},{name:"time",type:"INTEGER"}],uniqueKeys:[["eventid","time"]]}],migrate:function(n,t,o){if(t<3){var r=e.EVENTS_TABLE,i="addon_calendar_events_2";return n.tableExists(i).catch(function(){return i="addon_calendar_events",n.tableExists(i)}).then(function(){return n.getAllRecords(i).then(function(e){var t=[];return e.forEach(function(e){t.push(n.insertRecord(r,e))}),Promise.all(t)})}).then(function(){return n.dropTable(i)}).catch(function(){})}}},this.logger=n.getInstance("AddonCalendarProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonCalendarProvider,AddonCalendarProvider.prototype.canDeleteEvents=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.canDeleteEventsInSite(e)}).catch(function(){return!1})},AddonCalendarProvider.prototype.canDeleteEventsInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_calendar_delete_calendar_events")},AddonCalendarProvider.prototype.canEditEvents=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.canEditEventsInSite(e)}).catch(function(){return!1})},AddonCalendarProvider.prototype.canEditEventsInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isVersionGreaterEqualThan("3.7.1")},AddonCalendarProvider.prototype.canViewMonth=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.canViewMonthInSite(e)}).catch(function(){return!1})},AddonCalendarProvider.prototype.canViewMonthInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_calendar_get_calendar_monthly_view")},AddonCalendarProvider.prototype.cleanExpiredEvents=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(o){if(!t.canViewMonthInSite(o))return o.getDb().getRecordsSelect(e.EVENTS_TABLE,"timestart + timeduration < ?",[t.timeUtils.timestamp()]).then(function(e){return Promise.all(e.map(function(e){return t.deleteLocalEvent(e.id,n)}))})})},AddonCalendarProvider.prototype.deleteEvent=function(e,n,t,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.calendarOffline.markDeleted(e,n,t,r).then(function(){return!1})};return o||!this.appProvider.isOnline()?l():this.calendarOffline.unmarkDeleted(e,r).then(function(){return i.deleteEventOnline(e,t,r).then(function(){return!0}).catch(function(e){return e&&!i.utils.isWebServiceError(e)?l():Promise.reject(e)})})},AddonCalendarProvider.prototype.deleteEventOnline=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("core_calendar_delete_calendar_events",{events:[{eventid:e,repeat:n?1:0}]},{responseExpected:!1})})},AddonCalendarProvider.prototype.deleteLocalEvent=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(r){t=r.getId();var i=[];return i.push(r.getDb().deleteRecords(e.EVENTS_TABLE,{id:n})),i.push(r.getDb().getRecords(e.REMINDERS_TABLE,{eventid:n}).then(function(e){return Promise.all(e.map(function(e){return o.deleteEventReminder(e.id,t)}))})),Promise.all(i).catch(function(){})})},AddonCalendarProvider.prototype.formatEventTime=function(e,n,t,o,l,s){var a=this;void 0===t&&(t=!0),void 0===l&&(l=0);var u,d=1e3*e.timestart,c=1e3*(e.timestart+e.timeduration);if(e.timeduration){if(!i(d).isSame(c,"day")){var p=this.timeUtils.userDate(d,n),f=this.timeUtils.userDate(c,n),h=[],m=this.getDayRepresentation(d,!1)+", ",_=this.getDayRepresentation(c,!1)+", ";return!m||o&&i(o).isSame(d,"day")||h.push(this.getViewUrl("day",e.timestart,void 0,s).then(function(e){m=a.urlUtils.buildLink(e,m)})),!_||o&&i(o).isSame(c,"day")||h.push(this.getViewUrl("day",c/1e3,void 0,s).then(function(e){_=a.urlUtils.buildLink(e,_)})),Promise.all(h).then(function(){return m+p+" <strong>&raquo;</strong> "+_+f})}u=e.timeduration==r.a.SECONDS_DAY?this.translate.instant("addon.calendar.allday"):this.timeUtils.userDate(d,n)+" <strong>&raquo;</strong> "+this.timeUtils.userDate(c,n)}else u=this.timeUtils.userDate(d,n);return l?Promise.resolve(u):o&&i(o).isSame(d,"day")?Promise.resolve(this.getDayRepresentation(d,t)+", "+u):this.getViewUrl("day",e.timestart,void 0,s).then(function(e){return a.urlUtils.buildLink(e,a.getDayRepresentation(d,t))+", "+u})},AddonCalendarProvider.prototype.getAccessInformation=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o={},r={cacheKey:t.getAccessInformationCacheKey(e)};return e&&(o.courseid=e),n.read("core_calendar_get_calendar_access_information",o,r)})},AddonCalendarProvider.prototype.getAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"accessInformation:"+(e||0)},AddonCalendarProvider.prototype.getAllEventsFromLocalDb=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getAllRecords(e.EVENTS_TABLE)})},AddonCalendarProvider.prototype.getAllowedEventTypes=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o={},r={cacheKey:t.getAllowedEventTypesCacheKey(e)};return e&&(o.courseid=e),n.read("core_calendar_get_allowed_event_types",o,r).then(function(e){var n={};return e.allowedeventtypes&&e.allowedeventtypes.map(function(e){n[e]=!0}),n})})},AddonCalendarProvider.prototype.getAllowedEventTypesCacheKey=function(e){return this.ROOT_CACHE_KEY+"allowedEventTypes:"+(e||0)},AddonCalendarProvider.prototype.getCalendarLookAhead=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.userProvider.getUserPreference("calendar_lookahead").catch(function(e){}).then(function(n){return null!=n?n:e.getStoredConfig("calendar_lookahead")})})},AddonCalendarProvider.prototype.getCalendarTimeFormat=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return t.userProvider.getUserPreference("calendar_timeformat").catch(function(e){}).then(function(o){return o&&"0"!==o||(o=n.getStoredConfig("calendar_site_timeformat")),o===e.CALENDAR_TF_12?o=t.translate.instant("core.strftimetime12"):o===e.CALENDAR_TF_24&&(o=t.translate.instant("core.strftimetime24")),o&&"0"!==o?o:t.translate.instant("core.strftimetime")})})},AddonCalendarProvider.prototype.getDayRepresentation=function(e,n){if(void 0===n&&(n=!0),!n)return this.timeUtils.userDate(e,"core.strftimedayshort");var t=i(e),o=i();return t.isSame(o,"day")?this.translate.instant("addon.calendar.today"):t.isSame(o.clone().subtract(1,"days"),"day")?this.translate.instant("addon.calendar.yesterday"):t.isSame(o.clone().add(1,"days"),"day")?this.translate.instant("addon.calendar.tomorrow"):this.timeUtils.userDate(e,"core.strftimedayshort")},AddonCalendarProvider.prototype.getDefaultNotificationTime=function(n){n=n||this.sitesProvider.getCurrentSiteId();return this.configProvider.get(e.DEFAULT_NOTIFICATION_TIME_SETTING+"#"+n,e.DEFAULT_NOTIFICATION_TIME)},AddonCalendarProvider.prototype.getEvent=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var r={cacheKey:t.getEventCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("core_calendar_get_calendar_events",{options:{userevents:0,siteevents:0},events:{eventids:[e]}},r).then(function(n){return n.events.find(function(n){return n.id==e})||t.getEventFromLocalDb(e)}).catch(function(){return t.getEventFromLocalDb(e)})})},AddonCalendarProvider.prototype.getEventById=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var r={cacheKey:t.getEventCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("core_calendar_get_calendar_event_by_id",{eventid:e},r).then(function(e){return e.event}).catch(function(n){return t.getEventFromLocalDb(e).catch(function(){return Promise.reject(n)})})})},AddonCalendarProvider.prototype.getEventCacheKey=function(e){return this.ROOT_CACHE_KEY+"events:"+e},AddonCalendarProvider.prototype.getEventFromLocalDb=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(e.EVENTS_TABLE,{id:n}).then(function(n){return o.isGetEventByIdAvailableInSite(t)&&(n.descriptionformat=n.format,n.iscourseevent=n.eventtype==e.TYPE_COURSE,n.iscategoryevent=n.eventtype==e.TYPE_CATEGORY,n.normalisedeventtype=o.getEventType(n),n.category=o.textUtils.parseJSON(n.category,null),n.course=o.textUtils.parseJSON(n.course,null),n.subscription=o.textUtils.parseJSON(n.subscription,null)),n})})},AddonCalendarProvider.prototype.addEventReminder=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={eventid:n.id,time:t};return o.getDb().insertRecord(e.REMINDERS_TABLE,i).then(function(e){return r.scheduleEventNotification(n,e,t,o.getId())})})},AddonCalendarProvider.prototype.getEventType=function(e){return e.modulename?"course":e.eventtype},AddonCalendarProvider.prototype.deleteEventReminder=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return o.localNotificationsProvider.isAvailable()&&o.localNotificationsProvider.cancel(n,e.COMPONENT,t.getId()),t.getDb().deleteRecords(e.REMINDERS_TABLE,{id:n})})},AddonCalendarProvider.prototype.getDayEvents=function(e,n,t,r,i,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(u){var d={year:e,month:n,day:t};r&&(d.courseid=r),i&&(d.categoryid=i);var c={cacheKey:a.getDayEventsCacheKey(e,n,t,r,i),updateFrequency:o.a.FREQUENCY_SOMETIMES};return l&&(c.getFromCache=!1,c.emergencyCache=!1),u.read("core_calendar_get_calendar_day_view",d,c).then(function(e){return a.storeEventsInLocalDB(e.events,s),e})})},AddonCalendarProvider.prototype.getDayEventsPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"day:"},AddonCalendarProvider.prototype.getDayEventsDayPrefixCacheKey=function(e,n,t){return this.getDayEventsPrefixCacheKey()+e+":"+n+":"+t+":"},AddonCalendarProvider.prototype.getDayEventsCacheKey=function(e,n,t,o,r){return this.getDayEventsDayPrefixCacheKey(e,n,t)+(o||"")+":"+(r||"")},AddonCalendarProvider.prototype.getEventReminders=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.REMINDERS_TABLE,{eventid:n},"time ASC")})},AddonCalendarProvider.prototype.getEventsList=function(n,t,i,l){var s=this;return void 0===t&&(t=0),void 0===i&&(i=e.DAYS_INTERVAL),n=n||this.timeUtils.timestamp(),this.sitesProvider.getSite(l).then(function(e){l=e.getId();var a,u,d=[];return d.push(s.coursesProvider.getUserCourses(!1,l).then(function(n){(a=n).push({id:e.getSiteHomeId()})})),d.push(s.groupsProvider.getAllUserGroups(l).then(function(e){u=e})),Promise.all(d).then(function(){var d=n+r.a.SECONDS_DAY*t,c={options:{userevents:1,siteevents:1,timestart:d,timeend:d+r.a.SECONDS_DAY*i-1},events:{courseids:[],groupids:[]}};c.events.courseids=a.map(function(e){return e.id}),c.events.groupids=u.map(function(e){return e.id});var p={cacheKey:s.getEventsListCacheKey(t,i),getCacheUsingCacheKey:!0,uniqueCacheKey:!0,updateFrequency:o.a.FREQUENCY_SOMETIMES};return e.read("core_calendar_get_calendar_events",c,p).then(function(n){return s.canViewMonthInSite(e)||s.storeEventsInLocalDB(n.events,l),n.events})})})},AddonCalendarProvider.prototype.getEventsListPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"events:"},AddonCalendarProvider.prototype.getEventsListCacheKey=function(e,n){return this.getEventsListPrefixCacheKey()+e+":"+n},AddonCalendarProvider.prototype.getLocalEventsByRepeatIdFromLocalDb=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.EVENTS_TABLE,{repeatid:n})})},AddonCalendarProvider.prototype.getMonthlyEvents=function(n,t,r,i,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(u){var d={year:n,month:t};u.isVersionGreaterEqualThan("3.5")&&(d.mini=1),r&&(d.courseid=r),i&&(d.categoryid=i);var c={cacheKey:a.getMonthlyEventsCacheKey(n,t,r,i),updateFrequency:o.a.FREQUENCY_SOMETIMES};return l&&(c.getFromCache=!1,c.emergencyCache=!1),u.read("core_calendar_get_calendar_monthly_view",d,c).then(function(n){return n.weeks.forEach(function(e){e.days.forEach(function(e){a.storeEventsInLocalDB(e.events,s)})}),a.appProvider.isOnline()&&a.configProvider.set(e.STARTING_WEEK_DAY,n.daynames[0].dayno),n})})},AddonCalendarProvider.prototype.getMonthlyEventsPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"monthly:"},AddonCalendarProvider.prototype.getMonthlyEventsMonthPrefixCacheKey=function(e,n){return this.getMonthlyEventsPrefixCacheKey()+e+":"+n+":"},AddonCalendarProvider.prototype.getMonthlyEventsCacheKey=function(e,n,t,o){return this.getMonthlyEventsMonthPrefixCacheKey(e,n)+(t||"")+":"+(o||"")},AddonCalendarProvider.prototype.getUpcomingEvents=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(r).then(function(l){var s={};e&&(s.courseid=e),n&&(s.categoryid=n);var a={cacheKey:i.getUpcomingEventsCacheKey(e,n),updateFrequency:o.a.FREQUENCY_SOMETIMES};return t&&(a.getFromCache=!1,a.emergencyCache=!1),l.read("core_calendar_get_calendar_upcoming_view",s,a).then(function(e){return i.storeEventsInLocalDB(e.events,r),e})})},AddonCalendarProvider.prototype.getUpcomingEventsPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"upcoming:"},AddonCalendarProvider.prototype.getUpcomingEventsCacheKey=function(e,n){return this.getUpcomingEventsPrefixCacheKey()+(e||"")+":"+(n||"")},AddonCalendarProvider.prototype.getViewUrl=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i=r.textUtils.concatenatePaths(o.getURL(),"calendar/view.php?view="+e);return n&&(i+="&time="+n),t&&(i+="&course="+t),i})},AddonCalendarProvider.prototype.getWeekDays=function(e){return e=e||0,this.weekDays.slice(e).concat(this.weekDays.slice(0,e))},AddonCalendarProvider.prototype.invalidateAccessInformation=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAccessInformationCacheKey(e))})},AddonCalendarProvider.prototype.invalidateAllowedEventTypes=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAllowedEventTypesCacheKey(e))})},AddonCalendarProvider.prototype.invalidateAllDayEvents=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getDayEventsPrefixCacheKey())})},AddonCalendarProvider.prototype.invalidateDayEvents=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.invalidateWsCacheForKeyStartingWith(r.getDayEventsDayPrefixCacheKey(e,n,t))})},AddonCalendarProvider.prototype.invalidateEventsList=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(t){e=t.getId();var o=[];return o.push(n.coursesProvider.invalidateUserCourses(e)),o.push(n.groupsProvider.invalidateAllUserGroups(e)),o.push(t.invalidateWsCacheForKeyStartingWith(n.getEventsListPrefixCacheKey())),Promise.all(o)})},AddonCalendarProvider.prototype.invalidateEvent=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getEventCacheKey(e))})},AddonCalendarProvider.prototype.invalidateAllMonthlyEvents=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getMonthlyEventsPrefixCacheKey())})},AddonCalendarProvider.prototype.invalidateMonthlyEvents=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(o.getMonthlyEventsMonthPrefixCacheKey(e,n))})},AddonCalendarProvider.prototype.invalidateAllUpcomingEvents=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getUpcomingEventsPrefixCacheKey())})},AddonCalendarProvider.prototype.invalidateUpcomingEvents=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKeyStartingWith(o.getUpcomingEventsCacheKey(e,n))})},AddonCalendarProvider.prototype.invalidateLookAhead=function(e){return this.userProvider.invalidateUserPreference("calendar_lookahead",e)},AddonCalendarProvider.prototype.invalidateTimeFormat=function(e){return this.userProvider.invalidateUserPreference("calendar_timeformat",e)},AddonCalendarProvider.prototype.isCalendarDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_AddonCalendar")},AddonCalendarProvider.prototype.isDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isCalendarDisabledInSite(e)})},AddonCalendarProvider.prototype.isGetEventByIdAvailable=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isGetEventByIdAvailableInSite(e)}).catch(function(){return!1})},AddonCalendarProvider.prototype.isGetEventByIdAvailableInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_calendar_get_calendar_event_by_id")},AddonCalendarProvider.prototype.scheduleAllSitesEventsNotifications=function(){var e=this,n=this.localNotificationsProvider.isAvailable();return this.sitesProvider.getSitesIds().then(function(t){var o=[];return t.forEach(function(t){o.push(e.cleanExpiredEvents(t).then(function(){if(n)return e.isDisabled(t).then(function(n){if(!n)return e.getEventsList(void 0,void 0,void 0,t).then(function(n){return e.scheduleEventsNotifications(n,t)})})}))}),Promise.all(o)})},AddonCalendarProvider.prototype.scheduleEventNotification=function(n,t,o,r){var i=this;if(this.localNotificationsProvider.isAvailable()){if(r=r||this.sitesProvider.getCurrentSiteId(),0===o)return this.localNotificationsProvider.cancel(t,e.COMPONENT,r);return(-1==o?this.getDefaultNotificationTime(r).then(function(o){return 0==o?i.localNotificationsProvider.cancel(t,e.COMPONENT,r):n.timestart-60*o}):Promise.resolve(o)).then(function(o){if((o*=1e3)<=(new Date).getTime())return i.localNotificationsProvider.cancel(t,e.COMPONENT,r);var l={id:t,title:n.name,text:i.timeUtils.userDate(1e3*n.timestart,"core.strftimedaydatetime",!0),icon:"file://assets/img/icons/calendar.png",trigger:{at:new Date(o)},data:{eventid:n.id,reminderid:t,siteid:r}};return i.localNotificationsProvider.schedule(l,e.COMPONENT,r)})}return Promise.resolve()},AddonCalendarProvider.prototype.scheduleEventsNotifications=function(e,n){var t=this;return this.localNotificationsProvider.isAvailable()?(n=n||this.sitesProvider.getCurrentSiteId(),Promise.all(e.map(function(e){return 1e3*(e.timestart+e.timeduration)<=(new Date).getTime()?t.deleteLocalEvent(e.id,n):t.getEventReminders(e.id,n).then(function(o){return Promise.all(o.map(function(o){return t.scheduleEventNotification(e,o.id,o.time,n)}))})}))):Promise.resolve([])},AddonCalendarProvider.prototype.setDefaultNotificationTime=function(n,t){t=t||this.sitesProvider.getCurrentSiteId();return this.configProvider.set(e.DEFAULT_NOTIFICATION_TIME_SETTING+"#"+t,n)},AddonCalendarProvider.prototype.storeEventInLocalDb=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(r){return t=r.getId(),o.getEventFromLocalDb(n.id,r.id).catch(function(){return o.getEventReminders(n.id,t).then(function(e){0==e.length&&o.addEventReminder(n,-1,t)})}).then(function(){var t={id:n.id,name:n.name,description:n.description,format:n.descriptionformat||n.format,eventtype:n.eventtype,courseid:n.courseid,timestart:n.timestart,timeduration:n.timeduration,categoryid:n.categoryid,groupid:n.groupid,userid:n.userid,instance:n.instance,modulename:n.modulename,timemodified:n.timemodified,repeatid:n.repeatid,visible:n.visible,uuid:n.uuid,sequence:n.sequence,subscriptionid:n.subscriptionid,location:n.location,eventcount:n.eventcount,timesort:n.timesort,category:n.category?JSON.stringify(n.category):void 0,course:n.course?JSON.stringify(n.course):void 0,subscription:n.subscription?JSON.stringify(n.subscription):void 0,canedit:n.canedit?1:0,candelete:n.candelete?1:0,deleteurl:n.deleteurl,editurl:n.editurl,viewurl:n.viewurl,isactionevent:n.isactionevent?1:0,url:n.url,islastday:n.islastday?1:0,popupname:n.popupname,mindaytimestamp:n.mindaytimestamp,maxdaytimestamp:n.maxdaytimestamp,draggable:n.draggable};return r.getDb().insertRecord(e.EVENTS_TABLE,t)})})},AddonCalendarProvider.prototype.storeEventsInLocalDB=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(o){return n=o.getId(),Promise.all(e.map(function(e){return t.storeEventInLocalDb(e,n)}))})},AddonCalendarProvider.prototype.submitEvent=function(e,n,t,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.calendarOffline.saveEvent(e,n,t,r).then(function(e){return{sent:!1,event:e}})};return o||!this.appProvider.isOnline()?l():this.calendarOffline.deleteEvent(e,r).then(function(){return i.submitEventOnline(e,n,r).then(function(e){return{sent:!0,event:e}}).catch(function(e){return e&&!i.utils.isWebServiceError(e)?l():Promise.reject(e)})})},AddonCalendarProvider.prototype.submitEventOnline=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){n.id=e||0,n.userid=t.getUserId(),n.visible=1,n.instance=0,e>0?n._qf__core_calendar_local_event_forms_update=1:n._qf__core_calendar_local_event_forms_create=1;var r={formdata:o.utils.objectToGetParams(n)};return t.write("core_calendar_submit_create_update_form",r).then(function(e){return e.validationerror?Promise.reject({message:o.translate.instant("core.invalidformdata"),errorcode:"validationerror"}):e.event})})},AddonCalendarProvider.DAYS_INTERVAL=30,AddonCalendarProvider.COMPONENT="AddonCalendarEvents",AddonCalendarProvider.DEFAULT_NOTIFICATION_TIME_CHANGED="AddonCalendarDefaultNotificationTimeChangedEvent",AddonCalendarProvider.DEFAULT_NOTIFICATION_TIME_SETTING="mmaCalendarDefaultNotifTime",AddonCalendarProvider.DEFAULT_NOTIFICATION_TIME=60,AddonCalendarProvider.STARTING_WEEK_DAY="addon_calendar_starting_week_day",AddonCalendarProvider.NEW_EVENT_EVENT="addon_calendar_new_event",AddonCalendarProvider.NEW_EVENT_DISCARDED_EVENT="addon_calendar_new_event_discarded",AddonCalendarProvider.EDIT_EVENT_EVENT="addon_calendar_edit_event",AddonCalendarProvider.DELETED_EVENT_EVENT="addon_calendar_deleted_event",AddonCalendarProvider.UNDELETED_EVENT_EVENT="addon_calendar_undeleted_event",AddonCalendarProvider.FILTER_CHANGED_EVENT="addon_calendar_filter_changed_event",AddonCalendarProvider.TYPE_CATEGORY="category",AddonCalendarProvider.TYPE_COURSE="course",AddonCalendarProvider.TYPE_GROUP="group",AddonCalendarProvider.TYPE_SITE="site",AddonCalendarProvider.TYPE_USER="user",AddonCalendarProvider.ALL_TYPES=[e.TYPE_SITE,e.TYPE_CATEGORY,e.TYPE_COURSE,e.TYPE_GROUP,e.TYPE_USER],AddonCalendarProvider.CALENDAR_TF_24="%H:%M",AddonCalendarProvider.CALENDAR_TF_12="%I:%M %p",AddonCalendarProvider.EVENTS_TABLE="addon_calendar_events_3",AddonCalendarProvider.REMINDERS_TABLE="addon_calendar_reminders",AddonCalendarProvider;var e}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(6),t(53),t(4);var o=t(570),r=function(){function CoreCoursesHelperProvider(e,n,t,o,r,i){this.coursesProvider=e,this.utils=n,this.courseCompletionProvider=t,this.translate=o,this.popoverCtrl=r,this.sitesProvider=i}return CoreCoursesHelperProvider.prototype.getCoursesForPopover=function(e){var n=this;return this.coursesProvider.getUserCourses(!1).then(function(t){t.unshift({id:-1,fullname:n.translate.instant("core.fulllistofcourses"),category:-1});var o;if(e){var r=t.find(function(n){return n.id==e});r&&(o=r.category)}return{courses:t,categoryId:o}})},CoreCoursesHelperProvider.prototype.loadCourseExtraInfo=function(e,n,t){void 0===t&&(t=!1),n?(e.displayname=n.displayname,e.categoryname=t?n.categoryname:null,e.courseImage=!(!n.overviewfiles||!n.overviewfiles[0])&&n.overviewfiles[0].fileurl):(delete e.displayname,e.courseImage=!1)},CoreCoursesHelperProvider.prototype.loadCoursesExtraInfo=function(e,n){var t=this;if(void 0===n&&(n=!1),!e.length)return Promise.resolve();var o={},r=!1,i=this.sitesProvider.getCurrentSite(),l=[],s=[];if(i.isVersionGreaterEqualThan("3.8")&&l.push(i.getConfig().then(function(e){for(var n=0;n<10;n++)s[n]=e["core_admin_coursecolor"+(n+1)]||null}).catch(function(){})),this.coursesProvider.isGetCoursesByFieldAvailable()&&(n||void 0===e[0].overviewfiles&&void 0===e[0].displayname)){var a=e.map(function(e){return e.id}).join(",");r=!0,l.push(this.coursesProvider.getCoursesByField("ids",a).then(function(e){o=t.utils.arrayToObject(e,"id")}))}return Promise.all(l).then(function(){e.forEach(function(e){t.loadCourseExtraInfo(e,r?o[e.id]:e,n),e.courseImage||(e.colorNumber=e.id%10,e.color=s.length&&s[e.colorNumber])})})},CoreCoursesHelperProvider.prototype.getUserCoursesWithOptions=function(e,n,t,o){var r=this;return void 0===e&&(e="fullname"),void 0===n&&(n=0),void 0===o&&(o=!1),this.coursesProvider.getUserCourses().then(function(i){var l=[],s=i.map(function(e){return e.id});return r.coursesProvider.canGetAdminAndNavOptions()&&l.push(r.coursesProvider.getCoursesAdminAndNavOptions(s).then(function(e){i.forEach(function(n){n.navOptions=e.navOptions[n.id],n.admOptions=e.admOptions[n.id]})})),l.push(r.loadCoursesExtraInfo(i,o)),Promise.all(l).then(function(){if(i.length<=0)return[];switch(t){case"isfavourite":i=i.filter(function(e){return!!e.isfavourite})}switch(e){case"fullname":i.sort(function(e,n){var t=e.fullname.toLowerCase(),o=n.fullname.toLowerCase();return t.localeCompare(o)});break;case"lastaccess":i.sort(function(e,n){return n.lastaccess-e.lastaccess});break;case"timemodified":i.sort(function(e,n){return n.timemodified-e.timemodified})}return i=n>0?i.slice(0,n):i,Promise.all(i.map(function(e){return void 0!==e.completed?Promise.resolve(e):void 0!==e.enablecompletion&&0==e.enablecompletion?Promise.resolve(e):r.courseCompletionProvider.getCompletion(e.id).catch(function(){}).then(function(n){return e.completed=n&&n.completed,e})}))})})},CoreCoursesHelperProvider.prototype.selectCourse=function(e,n,t){var r=this;return new Promise(function(i,l){var s=r.popoverCtrl.create(o.a,{courses:n,courseId:t});s.onDidDismiss(function(e){i(e?{courseId:e.id,categoryId:e.category}:{})}),s.present({ev:e})})},CoreCoursesHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModWorkshopOfflineProvider(n,t,o,r){this.fileProvider=n,this.sitesProvider=t,this.textUtils=o,this.timeUtils=r,this.siteSchema={name:"AddonModWorkshopOfflineProvider",version:1,tables:[{name:e.SUBMISSIONS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"submissionid",type:"INTEGER"},{name:"action",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"title",type:"TEXT"},{name:"content",type:"TEXT"},{name:"attachmentsid",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["workshopid","submissionid","action"]},{name:e.ASSESSMENTS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"assessmentid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"inputdata",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["workshopid","assessmentid"]},{name:e.EVALUATE_SUBMISSIONS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"submissionid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"feedbacktext",type:"TEXT"},{name:"published",type:"INTEGER"},{name:"gradeover",type:"TEXT"}],primaryKeys:["workshopid","submissionid"]},{name:e.EVALUATE_ASSESSMENTS_TABLE,columns:[{name:"workshopid",type:"INTEGER"},{name:"assessmentid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"feedbacktext",type:"TEXT"},{name:"weight",type:"INTEGER"},{name:"gradinggradeover",type:"TEXT"}],primaryKeys:["workshopid","assessmentid"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModWorkshopOfflineProvider,AddonModWorkshopOfflineProvider.prototype.getAllWorkshops=function(e){var n=[this.getAllSubmissions(e),this.getAllAssessments(e),this.getAllEvaluateSubmissions(e),this.getAllEvaluateAssessments(e)];return Promise.all(n).then(function(e){var n={};return e.forEach(function(e){e.forEach(function(e){n[e.workshopid]=!0})}),Object.keys(n).map(function(e){return parseInt(e,10)})})},AddonModWorkshopOfflineProvider.prototype.hasWorkshopOfflineData=function(e,n){var t=[this.getSubmissions(e,n),this.getAssessments(e,n),this.getEvaluateSubmissions(e,n),this.getEvaluateAssessments(e,n)];return Promise.all(t).then(function(e){return e.some(function(e){return e&&e.length})}).catch(function(){return!1})},AddonModWorkshopOfflineProvider.prototype.deleteSubmissionAction=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){var i={workshopid:n,submissionid:t,action:o};return r.getDb().deleteRecords(e.SUBMISSIONS_TABLE,i)})},AddonModWorkshopOfflineProvider.prototype.deleteAllSubmissionActions=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){var r={workshopid:n,submissionid:t};return o.getDb().deleteRecords(e.SUBMISSIONS_TABLE,r)})},AddonModWorkshopOfflineProvider.prototype.getAllSubmissions=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.SUBMISSIONS_TABLE).then(function(e){return e.forEach(t.parseSubmissionRecord.bind(t)),e})})},AddonModWorkshopOfflineProvider.prototype.getSubmissions=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={workshopid:n};return t.getDb().getRecords(e.SUBMISSIONS_TABLE,r).then(function(e){return e.forEach(o.parseSubmissionRecord.bind(o)),e})})},AddonModWorkshopOfflineProvider.prototype.getSubmissionActions=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={workshopid:n,submissionid:t};return o.getDb().getRecords(e.SUBMISSIONS_TABLE,i).then(function(e){return e.forEach(r.parseSubmissionRecord.bind(r)),e})})},AddonModWorkshopOfflineProvider.prototype.getSubmissionAction=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={workshopid:n,submissionid:t,action:o};return r.getDb().getRecord(e.SUBMISSIONS_TABLE,l).then(function(e){return i.parseSubmissionRecord(e),e})})},AddonModWorkshopOfflineProvider.prototype.saveSubmission=function(n,t,o,r,i,l,s,a){var u=this;return this.sitesProvider.getSite(a).then(function(a){var d=u.timeUtils.timestamp(),c={workshopid:n,courseid:t,title:o,content:r,attachmentsid:JSON.stringify(i),action:s,submissionid:l||-d,timemodified:d};return a.getDb().insertRecord(e.SUBMISSIONS_TABLE,c)})},AddonModWorkshopOfflineProvider.prototype.parseSubmissionRecord=function(e){e.attachmentsid=this.textUtils.parseJSON(e.attachmentsid)},AddonModWorkshopOfflineProvider.prototype.deleteAssessment=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){var r={workshopid:n,assessmentid:t};return o.getDb().deleteRecords(e.ASSESSMENTS_TABLE,r)})},AddonModWorkshopOfflineProvider.prototype.getAllAssessments=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.ASSESSMENTS_TABLE).then(function(e){return e.forEach(t.parseAssessmentRecord.bind(t)),e})})},AddonModWorkshopOfflineProvider.prototype.getAssessments=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={workshopid:n};return t.getDb().getRecords(e.ASSESSMENTS_TABLE,r).then(function(e){return e.forEach(o.parseAssessmentRecord.bind(o)),e})})},AddonModWorkshopOfflineProvider.prototype.getAssessment=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={workshopid:n,assessmentid:t};return o.getDb().getRecord(e.ASSESSMENTS_TABLE,i).then(function(e){return r.parseAssessmentRecord(e),e})})},AddonModWorkshopOfflineProvider.prototype.saveAssessment=function(n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={workshopid:n,courseid:o,inputdata:JSON.stringify(r),assessmentid:t,timemodified:l.timeUtils.timestamp()};return i.getDb().insertRecord(e.ASSESSMENTS_TABLE,s)})},AddonModWorkshopOfflineProvider.prototype.parseAssessmentRecord=function(e){e.inputdata=this.textUtils.parseJSON(e.inputdata)},AddonModWorkshopOfflineProvider.prototype.deleteEvaluateSubmission=function(n,t,o){var r={workshopid:n,submissionid:t};return this.sitesProvider.getSite(o).then(function(n){return n.getDb().deleteRecords(e.EVALUATE_SUBMISSIONS_TABLE,r)})},AddonModWorkshopOfflineProvider.prototype.getAllEvaluateSubmissions=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.EVALUATE_SUBMISSIONS_TABLE).then(function(e){return e.forEach(t.parseEvaluateSubmissionRecord.bind(t)),e})})},AddonModWorkshopOfflineProvider.prototype.getEvaluateSubmissions=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={workshopid:n};return t.getDb().getRecords(e.EVALUATE_SUBMISSIONS_TABLE,r).then(function(e){return e.forEach(o.parseEvaluateSubmissionRecord.bind(o)),e})})},AddonModWorkshopOfflineProvider.prototype.getEvaluateSubmission=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={workshopid:n,submissionid:t};return o.getDb().getRecord(e.EVALUATE_SUBMISSIONS_TABLE,i).then(function(e){return r.parseEvaluateSubmissionRecord(e),e})})},AddonModWorkshopOfflineProvider.prototype.saveEvaluateSubmission=function(n,t,o,r,i,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){var u={workshopid:n,courseid:o,submissionid:t,timemodified:a.timeUtils.timestamp(),feedbacktext:r,published:Number(i),gradeover:JSON.stringify(l)};return s.getDb().insertRecord(e.EVALUATE_SUBMISSIONS_TABLE,u)})},AddonModWorkshopOfflineProvider.prototype.parseEvaluateSubmissionRecord=function(e){e.published=Boolean(e.published),e.gradeover=this.textUtils.parseJSON(e.gradeover)},AddonModWorkshopOfflineProvider.prototype.deleteEvaluateAssessment=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){var r={workshopid:n,assessmentid:t};return o.getDb().deleteRecords(e.EVALUATE_ASSESSMENTS_TABLE,r)})},AddonModWorkshopOfflineProvider.prototype.getAllEvaluateAssessments=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.EVALUATE_ASSESSMENTS_TABLE).then(function(e){return e.forEach(t.parseEvaluateAssessmentRecord.bind(t)),e})})},AddonModWorkshopOfflineProvider.prototype.getEvaluateAssessments=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={workshopid:n};return t.getDb().getRecords(e.EVALUATE_ASSESSMENTS_TABLE,r).then(function(e){return e.forEach(o.parseEvaluateAssessmentRecord.bind(o)),e})})},AddonModWorkshopOfflineProvider.prototype.getEvaluateAssessment=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={workshopid:n,assessmentid:t};return o.getDb().getRecord(e.EVALUATE_ASSESSMENTS_TABLE,i).then(function(e){return r.parseEvaluateAssessmentRecord(e),e})})},AddonModWorkshopOfflineProvider.prototype.saveEvaluateAssessment=function(n,t,o,r,i,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){var u={workshopid:n,courseid:o,assessmentid:t,timemodified:a.timeUtils.timestamp(),feedbacktext:r,weight:i,gradinggradeover:JSON.stringify(l)};return s.getDb().insertRecord(e.EVALUATE_ASSESSMENTS_TABLE,u)})},AddonModWorkshopOfflineProvider.prototype.parseEvaluateAssessmentRecord=function(e){e.gradinggradeover=this.textUtils.parseJSON(e.gradinggradeover)},AddonModWorkshopOfflineProvider.prototype.getWorkshopFolder=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=t.fileProvider.getSiteFolder(n.getId());return t.textUtils.concatenatePaths(o,"offlineworkshop/"+e+"/")})},AddonModWorkshopOfflineProvider.prototype.getSubmissionFolder=function(e,n,t,o){var r=this;return this.getWorkshopFolder(e,o).then(function(e){return r.textUtils.concatenatePaths(e+="submission/",t?"update_"+n:"add")})},AddonModWorkshopOfflineProvider.prototype.getAssessmentFolder=function(e,n,t){var o=this;return this.getWorkshopFolder(e,t).then(function(e){return e+="assessment/",o.textUtils.concatenatePaths(e,String(n))})},AddonModWorkshopOfflineProvider.SUBMISSIONS_TABLE="addon_mod_workshop_submissions",AddonModWorkshopOfflineProvider.ASSESSMENTS_TABLE="addon_mod_workshop_assessments",AddonModWorkshopOfflineProvider.EVALUATE_SUBMISSIONS_TABLE="addon_mod_workshop_evaluate_submissions",AddonModWorkshopOfflineProvider.EVALUATE_ASSESSMENTS_TABLE="addon_mod_workshop_evaluate_assessments",AddonModWorkshopOfflineProvider;var e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(99),i=function(e){function CoreUserProfileFieldDelegate(n,t,o){var r=e.call(this,"CoreUserProfileFieldDelegate",n,t,o)||this;return r.loggerProvider=n,r.sitesProvider=t,r.eventsProvider=o,r.handlerNameProperty="type",r}return Object(o.__extends)(CoreUserProfileFieldDelegate,e),CoreUserProfileFieldDelegate.prototype.getComponent=function(e,n,t){var o,r=this,i=n.type||n.datatype;return o=t?this.executeFunction(i,"getComponent",[e]):this.executeFunctionOnEnabled(i,"getComponent",[e]),Promise.resolve(o).catch(function(e){r.logger.error("Error getting component for field",i,e)})},CoreUserProfileFieldDelegate.prototype.getDataForField=function(e,n,t,o){var r=e.type||e.datatype,i=this.getHandler(r,!n);if(i){var l="profile_field_"+e.shortname;if(i.getData)return Promise.resolve(i.getData(e,n,t,o));if(e.shortname&&void 0!==o[l])return Promise.resolve({type:r,name:l,value:o[l]})}return Promise.reject(null)},CoreUserProfileFieldDelegate.prototype.getDataForFields=function(e,n,t,o){var r=this;void 0===n&&(n=!1),void 0===t&&(t="");var i=[],l=[];return e?(e.forEach(function(e){l.push(r.getDataForField(e,n,t,o).then(function(e){e&&i.push(e)}).catch(function(){}))}),Promise.all(l).then(function(){return i})):Promise.resolve([])},CoreUserProfileFieldDelegate}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(99),i=function(e){function AddonWorkshopAssessmentStrategyDelegate(n,t,o){var r=e.call(this,"AddonWorkshopAssessmentStrategyDelegate",n,t,o)||this;return r.loggerProvider=n,r.sitesProvider=t,r.eventsProvider=o,r.handlerNameProperty="strategyName",r}return Object(o.__extends)(AddonWorkshopAssessmentStrategyDelegate,e),AddonWorkshopAssessmentStrategyDelegate.prototype.isPluginSupported=function(e){return this.hasHandler(e,!0)},AddonWorkshopAssessmentStrategyDelegate.prototype.getComponentForPlugin=function(e,n){return this.executeFunctionOnEnabled(n,"getComponent",[e])},AddonWorkshopAssessmentStrategyDelegate.prototype.getOriginalValues=function(e,n,t){return Promise.resolve(this.executeFunctionOnEnabled(e,"getOriginalValues",[n,t])||[])},AddonWorkshopAssessmentStrategyDelegate.prototype.hasDataChanged=function(e,n,t){return this.executeFunctionOnEnabled(e.strategy,"hasDataChanged",[n,t])||!1},AddonWorkshopAssessmentStrategyDelegate.prototype.prepareAssessmentData=function(e,n,t){return Promise.resolve(this.executeFunctionOnEnabled(e,"prepareAssessmentData",[n,t]))},AddonWorkshopAssessmentStrategyDelegate}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),t(156),function(){function CoreCompileHtmlComponent(e,n,t,o,i,l,s){this.compileProvider=e,this.cdr=n,this.navCtrl=o,this.domUtils=l,this.utils=s,this.extraImports=[],this.extraProviders=[],this.created=new r.r,this.compiling=new r.r,this.creatingComponent=!1,this.pendingCalls={},this.element=t.nativeElement,this.differ=i.find([]).create()}return CoreCompileHtmlComponent.prototype.ngDoCheck=function(){if(this.componentInstance&&!this.creatingComponent){var e=this.differ.diff(this.jsData);e&&(this.setInputData(),this.componentInstance.ngOnChanges&&this.componentInstance.ngOnChanges(this.domUtils.createChangesFromKeyValueDiff(e)))}},CoreCompileHtmlComponent.prototype.ngOnChanges=function(e){var n=this;(e.text||e.javascript||e.forceCompile&&this.utils.isTrueOrOne(this.forceCompile))&&this.text&&(this.creatingComponent=!0,this.compiling.emit(!0),this.compileProvider.createAndCompileComponent(this.text,this.getComponentClass(),this.extraImports).then(function(e){n.componentRef&&n.componentRef.destroy(),e&&(n.componentRef=n.container.createComponent(e),n.created.emit(n.componentRef.instance)),n.loaded=!0}).catch(function(e){n.domUtils.showErrorModal(e),n.loaded=!0}).finally(function(){n.creatingComponent=!1,n.compiling.emit(!1)}))},CoreCompileHtmlComponent.prototype.ngOnDestroy=function(){this.componentRef&&this.componentRef.destroy()},CoreCompileHtmlComponent.prototype.getComponentClass=function(){var e=this;return function(){function CoreCompileHtmlFakeComponent(){e.componentInstance=this,this.dataObject={},this.dataArray=[],e.compileProvider.injectLibraries(this,e.extraProviders),this.ChangeDetectorRef=e.cdr,this.NavController=e.navCtrl,this.componentContainer=e.element,e.setInputData()}return CoreCompileHtmlFakeComponent.prototype.ngOnInit=function(){e.javascript&&e.compileProvider.executeJavascript(this,e.javascript);for(var n in e.pendingCalls){var t=e.pendingCalls[n];"function"==typeof this[n]?Promise.resolve(this[n].apply(this,t.params)).then(t.defer.resolve).catch(t.defer.reject):t.defer.resolve()}e.pendingCalls={}},CoreCompileHtmlFakeComponent.prototype.ngAfterContentInit=function(){},CoreCompileHtmlFakeComponent.prototype.ngAfterViewInit=function(){},CoreCompileHtmlFakeComponent.prototype.ngOnDestroy=function(){},CoreCompileHtmlFakeComponent}()},CoreCompileHtmlComponent.prototype.setInputData=function(){if(this.componentInstance)for(var e in this.jsData)this.componentInstance[e]=this.jsData[e]},CoreCompileHtmlComponent.prototype.callComponentFunction=function(e,n,t){if(void 0===t&&(t=!0),this.componentInstance){if("function"==typeof this.componentInstance[e])return this.componentInstance[e].apply(this.componentInstance,n)}else if(t){if(this.pendingCalls[e])return this.pendingCalls[e].params=n,this.pendingCalls[e].defer.promise;var o=this.utils.promiseDefer();return this.pendingCalls[e]={params:n,defer:o},o.promise}},CoreCompileHtmlComponent=Object(o.__decorate)([Object(o.__param)(3,Object(r.E)())],CoreCompileHtmlComponent)}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0);var o=t(7),r=t(5),i=t(3),l=t(12),s=function(){function CoreBlockBaseComponent(e,n){void 0===n&&(n="AddonBlockComponent"),this.domUtils=e.get(r.a),this.utils=e.get(i.a),this.textUtils=e.get(l.a);var t=e.get(o.a);this.logger=t.getInstance(n)}return CoreBlockBaseComponent.prototype.ngOnInit=function(){var e=this;this.loaded=!1,this.block.configs&&this.block.configs.length>0&&(this.block.configs.map(function(n){return n.value=e.textUtils.parseJSON(n.value),n}),this.block.configs=this.utils.arrayToObject(this.block.configs,"name")),this.loadContent()},CoreBlockBaseComponent.prototype.doRefresh=function(e,n,t){return void 0===t&&(t=!1),this.loaded?this.refreshContent(t).finally(function(){e&&e.complete(),n&&n()}):Promise.resolve()},CoreBlockBaseComponent.prototype.refreshContent=function(e){var n=this;void 0===e&&(e=!1);var t;try{t=this.invalidateContent()}catch(e){this.logger.error(e),t=Promise.resolve()}return t.catch(function(){}).then(function(){return n.loadContent(!0,e)})},CoreBlockBaseComponent.prototype.invalidateContent=function(){return Promise.resolve()},CoreBlockBaseComponent.prototype.loadContent=function(e,n){var t=this;void 0===n&&(n=!1);var o;try{o=this.fetchContent(e)}catch(e){this.logger.error(e),o=Promise.resolve()}return o.catch(function(e){t.domUtils.showErrorModalDefault(e,t.fetchContentDefaultError,!0)}).finally(function(){t.loaded=!0})},CoreBlockBaseComponent.prototype.fetchContent=function(e){return Promise.resolve()},CoreBlockBaseComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0);var o=t(1),r=t(5),i=t(12),l=t(139),s=function(){function CoreQuestionBaseComponent(e,n,t){this.injector=t,this.logger=e.getInstance(n),this.questionHelper=t.get(l.a),this.domUtils=t.get(r.a),this.textUtils=t.get(i.a),this.realElement=t.get(o.p).nativeElement}return CoreQuestionBaseComponent.prototype.initCalculatedComponent=function(){var e=this.initInputTextComponent();if(e){var n={},t=e.querySelector("select[name*=unit]"),o=t&&Array.from(t.querySelectorAll("option"));if(t&&o&&o.length){n.id=t.id,n.name=t.name,n.disabled=t.disabled,n.options=[];for(var r in o){var i=o[r];if(void 0===i.value)return this.logger.warn("Aborting because couldn't find input.",this.question.name),this.questionHelper.showComponentError(this.onAbort);var l={value:i.value,label:i.innerHTML};i.selected&&(n.selected=l.value),n.options.push(l)}n.selected||(n.selected=n.options[0].value);var s=e.querySelector('label[for="'+t.id+'"]');n.accessibilityLabel=s&&s.innerHTML,this.question.select=n;var a=e.querySelector('input[type="text"][name*=answer]');return this.question.selectFirst=e.innerHTML.indexOf(a.outerHTML)>e.innerHTML.indexOf(t.outerHTML),e}var u=Array.from(e.querySelectorAll('input[type="radio"]'));if(!u.length)return e;this.question.options=[];for(var r in u){var d=u[r],c=e.querySelector('label[for="'+(l={id:d.id,name:d.name,value:d.value,checked:d.checked,disabled:d.disabled}).id+'"]');if(this.question.optionsName=l.name,!c||(l.text=c.innerText,void 0===l.name||void 0===l.value||void 0===l.text))return this.logger.warn("Aborting because of an error parsing options.",this.question.name,l.name),this.questionHelper.showComponentError(this.onAbort);d.checked&&(this.question.unit=l.value),this.question.options.push(l)}var p=e.querySelector('input[type="text"][name*=answer]');this.question.optionsFirst=e.innerHTML.indexOf(p.outerHTML)>e.innerHTML.indexOf(u[0].outerHTML)}},CoreQuestionBaseComponent.prototype.initComponent=function(){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);this.realElement.classList.add("core-question-container");var e=this.domUtils.convertToElement(this.question.html);return this.question.text=this.domUtils.getContentsOfElement(e,".qtext"),void 0===this.question.text?(this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort)):e},CoreQuestionBaseComponent.prototype.initEssayComponent=function(){var e=this.initComponent();if(e){var n=e.querySelector("textarea[name*=_answer]");if(this.question.allowsAttachments=!!e.querySelector("div[id*=filemanager]"),this.question.isMonospaced=!!e.querySelector(".qtype_essay_monospaced"),this.question.isPlainText=this.question.isMonospaced||!!e.querySelector(".qtype_essay_plain"),this.question.hasDraftFiles=this.questionHelper.hasDraftFileUrls(e.innerHTML),n){var t=e.querySelector('input[type="hidden"][name*=answerformat]'),o=n.innerHTML;this.question.textarea={id:n.id,name:n.name,text:o?this.textUtils.decodeHTML(o):""},t&&(this.question.formatInput={name:t.name,value:t.value})}else this.question.answer=this.domUtils.getContentsOfElement(e,".qtype_essay_response"),this.question.attachments=this.questionHelper.getQuestionAttachmentsFromHtml(this.domUtils.getContentsOfElement(e,".attachments"))}},CoreQuestionBaseComponent.prototype.initOriginalTextComponent=function(e){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var n=this.domUtils.convertToElement(this.question.html),t=n.querySelector(e);if(!t)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.domUtils.removeElement(t,"input[name*=sequencecheck]"),this.domUtils.removeElement(t,".validationerror"),this.questionHelper.replaceCorrectnessClasses(n),this.questionHelper.replaceFeedbackClasses(n),this.questionHelper.treatCorrectnessIcons(n),this.question.text=t.innerHTML},CoreQuestionBaseComponent.prototype.initInputTextComponent=function(){var e=this.initComponent();if(e){var n=e.querySelector('input[type="text"][name*=answer]');if(!n)return this.logger.warn("Aborting because couldn't find input.",this.question.name),this.questionHelper.showComponentError(this.onAbort);if(this.question.input={id:n.id,name:n.name,value:n.value,readOnly:n.readOnly,isInline:!!this.domUtils.closest(n,".qtext")},n.classList.contains("incorrect")?(this.question.input.correctClass="core-question-incorrect",this.question.input.correctIcon="fa-remove",this.question.input.correctIconColor="danger"):n.classList.contains("correct")?(this.question.input.correctClass="core-question-correct",this.question.input.correctIcon="fa-check",this.question.input.correctIconColor="success"):n.classList.contains("partiallycorrect")?(this.question.input.correctClass="core-question-partiallycorrect",this.question.input.correctIcon="fa-check-square",this.question.input.correctIconColor="warning"):(this.question.input.correctClass="",this.question.input.correctIcon="",this.question.input.correctIconColor=""),this.question.input.isInline){var t=e.querySelector(".qtext");this.questionHelper.replaceCorrectnessClasses(t),this.questionHelper.treatCorrectnessIcons(t),this.question.text=t.innerHTML}}return e},CoreQuestionBaseComponent.prototype.initMatchComponent=function(){var e=this.initComponent();if(e){var n=Array.from(e.querySelectorAll("table.answer tr"));if(!n||!n.length)return this.logger.warn("Aborting because couldn't find any row.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.rows=[];for(var t in n){var o=n[t],r={},i=Array.from(o.querySelectorAll("td"));if(!i||i.length<2)return this.logger.warn("Aborting because couldn't the right columns.",this.question.name),this.questionHelper.showComponentError(this.onAbort);r.text=i[0].innerHTML;var l=i[1].querySelector("select"),s=Array.from(i[1].querySelectorAll("option"));if(!l||!s||!s.length)return this.logger.warn("Aborting because couldn't find select or options.",this.question.name),this.questionHelper.showComponentError(this.onAbort);r.id=l.id,r.name=l.name,r.disabled=l.disabled,r.selected=!1,r.options=[],i[1].className.indexOf("incorrect")>=0?r.isCorrect=0:i[1].className.indexOf("correct")>=0&&(r.isCorrect=1);for(var a in s){var u=s[a];if(void 0===u.value)return this.logger.warn("Aborting because couldn't find the value of an option.",this.question.name),this.questionHelper.showComponentError(this.onAbort);var d={value:u.value,label:u.innerHTML,selected:u.selected};d.selected&&(r.selected=d.value),r.options.push(d)}var c=i[1].querySelector("label.accesshide");r.accessibilityLabel=c&&c.innerHTML,this.question.rows.push(r)}this.question.loaded=!0}return e},CoreQuestionBaseComponent.prototype.initMultichoiceComponent=function(){var e=this.initComponent();if(e){this.question.prompt=this.domUtils.getContentsOfElement(e,".prompt");var n=Array.from(e.querySelectorAll('input[type="radio"]'));if(!(n&&n.length||(this.question.multi=!0,(n=Array.from(e.querySelectorAll('input[type="checkbox"]')))&&n.length)))return this.logger.warn("Aborting because of no radio and checkbox found.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.options=[],this.question.disabled=!0;for(var t in n){var o=n[t],r={id:o.id,name:o.name,value:o.value,checked:o.checked,disabled:o.disabled},i=o.parentElement;if("-1"!=r.value){this.question.optionsName=r.name,this.question.disabled=this.question.disabled&&o.disabled;var l=e.querySelector('label[for="'+r.id+'"]');if(!l||(r.text=l.innerHTML,void 0===r.name||void 0===r.value||void 0===r.text))return this.logger.warn("Aborting because of an error parsing options.",this.question.name,r.name),this.questionHelper.showComponentError(this.onAbort);if(o.checked&&(this.question.multi||(this.question.singleChoiceModel=r.value),i)){i&&i.className.indexOf("incorrect")>=0?r.isCorrect=0:i&&i.className.indexOf("correct")>=0&&(r.isCorrect=1);var s=i.querySelector(".specificfeedback");s&&(r.feedback=s.innerHTML)}this.question.options.push(r)}}}return e},CoreQuestionBaseComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(250);var o=function(){return function CoreEditorComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),function(){function CoreDynamicComponent(e,n,t,o,r,i,l){this.factoryResolver=n,this.navCtrl=o,this.cdr=r,this.element=i,this.domUtils=l,this.logger=e.getInstance("CoreDynamicComponent"),this.differ=t.find([]).create()}return Object.defineProperty(CoreDynamicComponent.prototype,"dynamicComponent",{set:function(e){this.container=e,this.createComponent()},enumerable:!0,configurable:!0}),CoreDynamicComponent.prototype.ngOnInit=function(){this.createComponent()},CoreDynamicComponent.prototype.ngOnChanges=function(e){e.component&&!this.component?(this.lastComponent=void 0,this.instance=void 0,this.container&&this.container.clear()):!e.component||this.instance&&this.component==this.lastComponent||this.createComponent()},CoreDynamicComponent.prototype.ngDoCheck=function(){if(this.instance){var e=this.differ.diff(this.data);e&&(this.setInputData(),this.instance.ngOnChanges&&this.instance.ngOnChanges(this.domUtils.createChangesFromKeyValueDiff(e)))}},CoreDynamicComponent.prototype.callComponentFunction=function(e,n){if(this.instance&&"function"==typeof this.instance[e])return this.instance[e].apply(this.instance,n)},CoreDynamicComponent.prototype.createComponent=function(){if(this.lastComponent=this.component,!this.component||!this.container)return!1;if(this.instance)return!0;if(this.component instanceof r.o)this.container.insert(this.component.hostView),this.instance=this.component.instance,this.instance.ChangeDetectorRef=this.cdr,this.instance.NavController=this.navCtrl,this.instance.componentContainer=this.element.nativeElement;else try{var e=this.factoryResolver.resolveComponentFactory(this.component),n=this.container.createComponent(e);this.instance=n.instance}catch(e){return this.logger.error("Error creating component",e),!1}return this.setInputData(),!0},CoreDynamicComponent.prototype.setInputData=function(){for(var e in this.data)this.instance[e]=this.data[e]},CoreDynamicComponent=Object(o.__decorate)([Object(o.__param)(3,Object(r.E)())],CoreDynamicComponent)}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(1),r=(t(6),t(4),t(42)),i=t(117),l=function(){function CoreTabsComponent(e,n,t,r,i,l,s){var a=this;this.content=n,this.domUtils=t,this.appProvider=r,this.configProvider=i,this.selectedIndex=0,this.hideUntil=!0,this.parentScrollable=!1,this.ionChange=new o.r,this.tabs=[],this.maxSlides=3,this.slidesShown=this.maxSlides,this.numTabsShown=0,this.direction="ltr",this.description="",this.lastScroll=0,this.initialized=!1,this.afterViewInitTriggered=!1,this.tabsShown=!0,this.isDestroyed=!1,this.isCurrentView=!0,this.shouldSlideToInitial=!1,this.hasSliddenToInitial=!1,this.selectHistory=[],this.isInTransition=!1,this.tabBarElement=e.nativeElement,this.direction=l.isRTL?"rtl":"ltr",this.languageChangedSubscription=s.onLangChange.subscribe(function(e){setTimeout(function(){a.direction=l.isRTL?"rtl":"ltr"})})}return e=CoreTabsComponent,CoreTabsComponent.prototype.ngOnInit=function(){this.originalTabsContainer=this.originalTabsRef.nativeElement,this.topTabsElement=this.topTabs.nativeElement},CoreTabsComponent.prototype.ngAfterViewInit=function(){this.isDestroyed||(this.afterViewInitTriggered=!0,!this.initialized&&this.hideUntil&&this.initializeTabs(),this.resizeFunction=this.calculateSlides.bind(this),window.addEventListener("resize",this.resizeFunction))},CoreTabsComponent.prototype.ngOnChanges=function(e){var n=this;!this.initialized&&this.hideUntil&&this.afterViewInitTriggered&&setTimeout(function(){n.initializeTabs()})},CoreTabsComponent.prototype.ionViewDidEnter=function(){this.isCurrentView=!0,this.calculateSlides(),this.registerBackButtonAction()},CoreTabsComponent.prototype.registerBackButtonAction=function(){var e=this;this.unregisterBackButtonAction=this.appProvider.registerBackButtonAction(function(){if(e.selectHistory.length>1){var n=e.selectHistory[e.selectHistory.length-2];return e.selectHistory=e.selectHistory.filter(function(t){return e.selected!=t&&n!=t}),e.selectTab(n),!0}return e.selected!=e.firstSelectedTab&&(e.selectHistory=[],e.selectTab(e.firstSelectedTab),!0)},750)},CoreTabsComponent.prototype.ionViewDidLeave=function(){this.unregisterBackButtonAction&&this.unregisterBackButtonAction(),this.isCurrentView=!1},CoreTabsComponent.prototype.addTab=function(e){var n=this;-1==this.getIndex(e)&&(this.tabs.push(e),this.sortTabs(),setTimeout(function(){n.calculateSlides()}),this.initialized&&this.tabs.length>1&&0==this.tabBarHeight&&setTimeout(function(){n.calculateTabBarHeight()},50))},CoreTabsComponent.prototype.calculateSlides=function(){var e=this;this.isCurrentView&&this.tabsShown&&this.initialized&&this.calculateMaxSlides().then(function(){e.updateSlides()})},CoreTabsComponent.prototype.calculateTabBarHeight=function(){this.tabBarHeight=this.topTabsElement.offsetHeight,this.tabsShown?(this.topTabsElement.style.transform="translateY(-"+this.lastScroll+"px)",this.originalTabsContainer.style.transform="translateY(-"+this.lastScroll+"px)",this.originalTabsContainer.style.paddingBottom=this.tabBarHeight-this.lastScroll+"px"):this.tabBarElement.classList.add("tabs-hidden")},CoreTabsComponent.prototype.getIndex=function(e){for(var n=0;n<this.tabs.length;n++){var t=this.tabs[n];if(t===e||void 0!==t.id&&t.id===e.id)return n}return-1},CoreTabsComponent.prototype.getSelected=function(){return this.tabs[this.selected]},CoreTabsComponent.prototype.initializeTabs=function(){var e=this.selectedIndex||0,n=this.tabs[e];if(n&&n.enabled&&n.show||(n=this.tabs.find(function(n,t){return!(!n.enabled||!n.show)&&(e=t,!0)})),n&&(this.firstSelectedTab=e,this.selectTab(e)),this.calculateTabBarHeight(),this.content)if(this.parentScrollable)this.originalTabsContainer.classList.add("no-scroll");else{var t=this.content.getScrollElement();t&&t.classList.add("no-scroll")}this.initialized=!0,this.calculateSlides()},CoreTabsComponent.prototype.slideChanged=function(){var e=this.slides.getActiveIndex();this.isInTransition=!1,this.slidesShown>=this.numTabsShown?(this.showPrevButton=!1,this.showNextButton=!1):void 0!==e?(this.showPrevButton=e>0,this.showNextButton=e<this.numTabsShown-this.slidesShown):(this.showPrevButton=!1,this.showNextButton=this.numTabsShown>this.slidesShown),this.shouldSlideToInitial&&e!=this.selected&&(this.shouldSlideToInitial=!1),this.updateAriaHidden()},CoreTabsComponent.prototype.updateSlides=function(){var e=this;if(this.numTabsShown=this.tabs.reduce(function(e,n){return n.show?e+1:e},0),this.slidesShown=Math.min(this.maxSlides,this.numTabsShown),this.slideChanged(),this.calculateTabBarHeight(),this.slides.update(),this.slides.resize(),!this.hasSliddenToInitial&&this.selected&&this.selected>=this.slidesShown)return this.hasSliddenToInitial=!0,this.shouldSlideToInitial=!0,void setTimeout(function(){e.shouldSlideToInitial&&(e.slides.slideTo(e.selected,0),e.shouldSlideToInitial=!1,e.updateAriaHidden())},400);this.selected&&(this.hasSliddenToInitial=!0),setTimeout(function(){e.slideChanged()},400)},CoreTabsComponent.prototype.calculateMaxSlides=function(){var n=this;return new Promise(function(t,o){if(n.maxSlides=3,n.slides){var l=n.domUtils.getElementWidth(n.slides.getNativeElement())||n.slides.renderedWidth;l?n.configProvider.get(r.a.SETTINGS_FONT_SIZE,i.a.font_sizes[0].toString()).then(function(o){n.maxSlides=Math.floor(l/(o/i.a.font_sizes[0]*e.MIN_TAB_WIDTH)),t()}):t()}else t()})},CoreTabsComponent.prototype.slideNext=function(){if(this.showNextButton){if(this.isInTransition)return;if(this.slides.isBeginning())this.slides.slideTo(this.maxSlides);else{var e=this.slides.getActiveIndex();if(void 0!==e){var n=e+this.maxSlides;this.isInTransition=!0,this.slides.slideTo(n<this.numTabsShown?n:this.numTabsShown-1)}}}},CoreTabsComponent.prototype.slidePrev=function(){if(this.showPrevButton){if(this.isInTransition)return;if(this.slides.isEnd())this.slides.slideTo(this.numTabsShown-2*this.maxSlides);else{var e=this.slides.getActiveIndex();if(void 0!==e){var n=e-this.maxSlides;this.isInTransition=!0,this.slides.slideTo(n>=0?n:0)}}}},CoreTabsComponent.prototype.showHideTabs=function(e){if(this.tabBarHeight){var n=parseInt(e.scrollTop,10);if(0==n)return this.topTabsElement.style.transform="",this.originalTabsContainer.style.transform="",this.originalTabsContainer.style.paddingBottom=this.tabBarHeight+"px",this.tabBarElement.classList.remove("tabs-hidden"),this.tabsShown=!0,void(this.lastScroll=0);n!=this.lastScroll&&(this.tabsShown&&n>this.tabBarHeight?(this.tabsShown=!1,this.tabBarElement.classList.add("tabs-hidden")):!this.tabsShown&&n<=this.tabBarHeight&&(this.tabsShown=!0,this.tabBarElement.classList.remove("tabs-hidden"),this.calculateSlides()),this.tabsShown&&e.scrollHeight>e.clientHeight+(this.tabBarHeight-n)&&(this.topTabsElement.style.transform="translateY(-"+n+"px)",this.originalTabsContainer.style.transform="translateY(-"+n+"px)",this.originalTabsContainer.style.paddingBottom=this.tabBarHeight-n+"px"),this.lastScroll=parseInt(e.scrollTop,10))}},CoreTabsComponent.prototype.removeTab=function(e){var n=this.getIndex(e);this.tabs.splice(n,1),this.calculateSlides()},CoreTabsComponent.prototype.selectTab=function(e){if(e!=this.selected){(e<0||e>=this.tabs.length)&&(e=0);var n=this.getSelected(),t=this.tabs[e];t&&t.enabled&&t.show&&(n&&n.unselectTab(),this.selected&&(this.slides.slideTo(e),this.updateAriaHidden()),this.selectHistory.push(e),this.selected=e,t.selectTab(),this.ionChange.emit(t))}},CoreTabsComponent.prototype.sortTabs=function(){var e=this;if(this.originalTabsContainer){var n=[];this.tabs.forEach(function(t,o){var r=Array.prototype.indexOf.call(e.originalTabsContainer.children,t.element);-1!=r&&(n[r]=t)}),this.tabs=n}},CoreTabsComponent.prototype.tabVisibilityChanged=function(){this.calculateSlides()},CoreTabsComponent.prototype.updateAriaHidden=function(){this.tabs.forEach(function(e,n){e.updateAriaHidden()})},CoreTabsComponent.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},CoreTabsComponent.MIN_TAB_WIDTH=107,CoreTabsComponent;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreRatingOfflineProvider(n,t){this.sitesProvider=n,this.utils=t,this.siteSchema={name:"CoreRatingOfflineProvider",version:1,tables:[{name:e.RATINGS_TABLE,columns:[{name:"component",type:"TEXT"},{name:"ratingarea",type:"TEXT"},{name:"contextlevel",type:"INTEGER"},{name:"instanceid",type:"INTEGER"},{name:"itemid",type:"INTEGER"},{name:"itemsetid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"scaleid",type:"INTEGER"},{name:"rating",type:"INTEGER"},{name:"rateduserid",type:"INTEGER"},{name:"aggregation",type:"INTEGER"}],primaryKeys:["component","ratingarea","contextlevel","instanceid","itemid"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=CoreRatingOfflineProvider,CoreRatingOfflineProvider.prototype.getRating=function(n,t,o,r,i,l){return this.sitesProvider.getSite(l).then(function(l){var s={contextlevel:n,instanceid:t,component:o,ratingarea:r,itemid:i};return l.getDb().getRecord(e.RATINGS_TABLE,s)})},CoreRatingOfflineProvider.prototype.addRating=function(n,t,o,r,i,l,s,a,u,d,c,p){return this.sitesProvider.getSite(p).then(function(p){var f={component:n,ratingarea:t,contextlevel:o,instanceid:r,itemid:i,itemsetid:l,courseid:s,scaleid:a,rating:u,rateduserid:d,aggregation:c};return p.getDb().insertRecord(e.RATINGS_TABLE,f)})},CoreRatingOfflineProvider.prototype.deleteRating=function(n,t,o,r,i,l){return this.sitesProvider.getSite(l).then(function(l){var s={component:n,ratingarea:t,contextlevel:o,instanceid:r,itemid:i};return l.getDb().deleteRecords(e.RATINGS_TABLE,s)})},CoreRatingOfflineProvider.prototype.getItemSets=function(n,t,o,r,i,l){return this.sitesProvider.getSite(l).then(function(l){var s={component:n,ratingarea:t};return null!=o&&null!=r&&(s.contextlevel=o,s.instanceId=r),null!=i&&(s.itemSetId=i),l.getDb().getRecords(e.RATINGS_TABLE,s,void 0,"DISTINCT contextlevel, instanceid, itemsetid, courseid").then(function(e){return e.map(function(e){return{component:n,ratingArea:t,contextLevel:e.contextlevel,instanceId:e.instanceid,itemSetId:e.itemsetid,courseId:e.courseid}})})})},CoreRatingOfflineProvider.prototype.getRatings=function(n,t,o,r,i,l){return this.sitesProvider.getSite(l).then(function(l){var s={component:n,ratingarea:t,contextlevel:o,instanceid:r,itemsetid:i};return l.getDb().getRecords(e.RATINGS_TABLE,s)})},CoreRatingOfflineProvider.prototype.hasRatings=function(n,t,o,r,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){var a={component:n,ratingarea:t};return null!=o&&null!=r&&(a.contextlevel=o,a.instanceId=r),null!=i&&(a.itemsetid=i),s.utils.promiseWorks(l.getDb().recordExists(e.RATINGS_TABLE,a))})},CoreRatingOfflineProvider.RATINGS_TABLE="rating_ratings",CoreRatingOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(176),r=(t(190),t(193),function(){function AddonModWorkshopHelperProvider(e,n,t,o,r,i,l,s,a){this.translate=e,this.fileProvider=n,this.uploaderProvider=t,this.sitesProvider=o,this.textUtils=r,this.utils=i,this.workshopProvider=l,this.workshopOffline=s,this.strategyDelegate=a}return AddonModWorkshopHelperProvider.prototype.getTask=function(e,n){for(var t in e)if(e[t].code==n)return e[t];return!1},AddonModWorkshopHelperProvider.prototype.isTaskDone=function(e,n){var t=this.getTask(e,n);return!t||!!t.completed},AddonModWorkshopHelperProvider.prototype.canSubmit=function(e,n,t){var r=e.useexamples&&e.examplesmode==o.a.EXAMPLES_BEFORE_SUBMISSION,i=n.canmanageexamples||e.examplesmode==o.a.EXAMPLES_VOLUNTARY||this.isTaskDone(t,"examples");return e.phase>o.a.PHASE_SETUP&&n.cansubmit&&(!r||i)},AddonModWorkshopHelperProvider.prototype.canAssess=function(e,n){return!(e.useexamples&&e.examplesmode==o.a.EXAMPLES_BEFORE_ASSESSMENT)||n.canmanageexamples},AddonModWorkshopHelperProvider.prototype.getUserSubmission=function(e,n){var t=this;return void 0===n&&(n=0),this.workshopProvider.getSubmissions(e).then(function(e){n=n||t.sitesProvider.getCurrentSiteUserId();for(var o in e)if(e[o].authorid==n)return e[o];return!1})},AddonModWorkshopHelperProvider.prototype.getSubmissionById=function(e,n,t){var o=this;return this.workshopProvider.getSubmission(e,n,t).catch(function(){return o.workshopProvider.getSubmissions(e,void 0,void 0,void 0,void 0,t).then(function(e){for(var t in e)if(e[t].id==n)return e[t];return!1})})},AddonModWorkshopHelperProvider.prototype.getReviewerAssessmentById=function(e,n,t,o){var r=this;return void 0===t&&(t=0),this.workshopProvider.getAssessment(e,n,o).catch(function(i){return r.workshopProvider.getReviewerAssessments(e,t,void 0,void 0,o).then(function(e){for(var t in e)if(e[t].id==n)return e[t];return Promise.reject(i)})}).then(function(t){return r.workshopProvider.getAssessmentForm(e,n,void 0,void 0,void 0,o).then(function(e){return t.form=e,t})})},AddonModWorkshopHelperProvider.prototype.getReviewerAssessments=function(e,n,t,o,r){var i=this;return void 0===n&&(n=0),void 0===t&&(t=!1),void 0===o&&(o=!1),r=r||this.sitesProvider.getCurrentSiteId(),this.workshopProvider.getReviewerAssessments(e,n,t,o,r).then(function(n){var t=n.map(function(n){return i.getSubmissionById(e,n.submissionid,r).then(function(e){n.submission=e})});return Promise.all(t).then(function(){return n})})},AddonModWorkshopHelperProvider.prototype.deleteSubmissionStoredFiles=function(e,n,t,o){var r=this;return this.workshopOffline.getSubmissionFolder(e,n,t,o).then(function(e){return r.fileProvider.removeDir(e).catch(function(){})})},AddonModWorkshopHelperProvider.prototype.storeSubmissionFiles=function(e,n,t,o,r){var i=this;return this.workshopOffline.getSubmissionFolder(e,n,t,r).then(function(e){return i.uploaderProvider.storeFilesToUpload(e,o)})},AddonModWorkshopHelperProvider.prototype.uploadOrStoreSubmissionFiles=function(e,n,t,r,i,l){return i?this.storeSubmissionFiles(e,n,r,t,l):this.uploaderProvider.uploadOrReuploadFiles(t,o.a.COMPONENT,e,l)},AddonModWorkshopHelperProvider.prototype.getStoredSubmissionFiles=function(e,n,t,o){var r=this;return this.workshopOffline.getSubmissionFolder(e,n,t,o).then(function(e){return r.uploaderProvider.getStoredFiles(e).catch(function(){return[]})})},AddonModWorkshopHelperProvider.prototype.getSubmissionFilesFromOfflineFilesObject=function(e,n,t,o,r){var i=this;return this.workshopOffline.getSubmissionFolder(n,t,o,r).then(function(n){return i.uploaderProvider.getStoredFilesFromOfflineFilesObject(e,n)})},AddonModWorkshopHelperProvider.prototype.deleteAssessmentStoredFiles=function(e,n,t){var o=this;return this.workshopOffline.getAssessmentFolder(e,n,t).then(function(e){return o.fileProvider.removeDir(e).catch(function(){})})},AddonModWorkshopHelperProvider.prototype.storeAssessmentFiles=function(e,n,t,o){var r=this;return this.workshopOffline.getAssessmentFolder(e,n,o).then(function(e){return r.uploaderProvider.storeFilesToUpload(e,t)})},AddonModWorkshopHelperProvider.prototype.uploadOrStoreAssessmentFiles=function(e,n,t,r,i){return r?this.storeAssessmentFiles(e,n,t,i):this.uploaderProvider.uploadOrReuploadFiles(t,o.a.COMPONENT,e,i)},AddonModWorkshopHelperProvider.prototype.getStoredAssessmentFiles=function(e,n,t){var o=this;return this.workshopOffline.getAssessmentFolder(e,n,t).then(function(e){return o.uploaderProvider.getStoredFiles(e).catch(function(){return[]})})},AddonModWorkshopHelperProvider.prototype.getAssessmentFilesFromOfflineFilesObject=function(e,n,t,o){var r=this;return this.workshopOffline.getAssessmentFolder(n,t,o).then(function(n){return r.uploaderProvider.getStoredFilesFromOfflineFilesObject(e,n)})},AddonModWorkshopHelperProvider.prototype.filterSubmissionActions=function(e,n){return e.filter(function(e){return n?e.submissionid==n:e.submissionid<0})},AddonModWorkshopHelperProvider.prototype.applyOfflineData=function(e,n){n.length&&!e&&(e={});var t,o=!0,r=!1;if(n.forEach(function(n){switch(n.action){case"add":e.id=n.submissionid,o=!1;case"update":e.title=n.title,e.content=n.content,e.title=n.title,e.courseid=n.courseid,e.submissionmodified=parseInt(n.timemodified,10)/1e3,e.offline=!0,r=n.attachmentsid,t=n.workshopid;break;case"delete":e.deleted=!0,e.submissionmodified=parseInt(n.timemodified,10)/1e3}}),n.length){if(r)return this.getSubmissionFilesFromOfflineFilesObject(r,t,e.id,o).then(function(n){return e.attachmentfiles=n,e});e.attachmentfiles=[]}return Promise.resolve(e)},AddonModWorkshopHelperProvider.prototype.prepareAssessmentData=function(e,n,t,o,r,i){return 2!=e.overallfeedbackmode||t?this.strategyDelegate.prepareAssessmentData(e.strategy,n,r).then(function(e){return e.feedbackauthor=t,e.feedbackauthorattachmentsid=i||0,e.nodims=r.dimenssionscount,e}):Promise.reject({feedbackauthor:this.translate.instant("core.err_required")})},AddonModWorkshopHelperProvider.prototype.realGradeValueHelper=function(e,n,t){return null==e?null:0==n?"0":(e=this.textUtils.roundToDecimals(n*e/100,t),this.utils.formatFloat(e))},AddonModWorkshopHelperProvider.prototype.realGradeValue=function(e,n){return n.grade=this.realGradeValueHelper(n.grade,e.grade,e.gradedecimals),n.gradinggrade=this.realGradeValueHelper(n.gradinggrade,e.gradinggrade,e.gradedecimals),n.gradinggradeover=this.realGradeValueHelper(n.gradinggradeover,e.gradinggrade,e.gradedecimals),n},AddonModWorkshopHelperProvider.prototype.showGrade=function(e){return void 0!==e&&null!==e},AddonModWorkshopHelperProvider}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(54),r=(t(258),function(){function AddonModGlossaryProvider(n,t,o,r,i,l,s,a){this.appProvider=n,this.sitesProvider=t,this.filepoolProvider=o,this.translate=r,this.textUtils=i,this.utils=l,this.glossaryOffline=s,this.logHelper=a,this.ROOT_CACHE_KEY="mmaModGlossary:",this.siteSchema={name:"AddonModGlossaryProvider",version:1,tables:[{name:e.ENTRIES_TABLE,columns:[{name:"entryid",type:"INTEGER",primaryKey:!0},{name:"glossaryid",type:"INTEGER"},{name:"pagefrom",type:"INTEGER"}]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModGlossaryProvider,AddonModGlossaryProvider.prototype.getCourseGlossariesCacheKey=function(e){return this.ROOT_CACHE_KEY+"courseGlossaries:"+e},AddonModGlossaryProvider.prototype.getCourseGlossaries=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var r={courseids:[e]},i={cacheKey:t.getCourseGlossariesCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n.read("mod_glossary_get_glossaries_by_courses",r,i).then(function(e){return e.glossaries})})},AddonModGlossaryProvider.prototype.invalidateCourseGlossaries=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=t.getCourseGlossariesCacheKey(e);return n.invalidateWsCacheForKey(o)})},AddonModGlossaryProvider.prototype.getEntriesByAuthorCacheKey=function(e,n,t,o){return this.ROOT_CACHE_KEY+"entriesByAuthor:"+e+":"+n+":"+t+":"+o},AddonModGlossaryProvider.prototype.getEntriesByAuthor=function(e,n,t,r,i,l,s,a,u){var d=this;return this.sitesProvider.getSite(u).then(function(u){var c={id:e,letter:n,field:t,sort:r,from:i,limit:l},p={cacheKey:d.getEntriesByAuthorCacheKey(e,n,t,r),omitExpires:s,forceOffline:a,updateFrequency:o.a.FREQUENCY_SOMETIMES};return u.read("mod_glossary_get_entries_by_author",c,p)})},AddonModGlossaryProvider.prototype.invalidateEntriesByAuthor=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l=i.getEntriesByAuthorCacheKey(e,n,t,o);return r.invalidateWsCacheForKey(l)})},AddonModGlossaryProvider.prototype.getEntriesByCategory=function(e,n,t,r,i,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){var u={id:e,categoryid:n,from:t,limit:r},d={cacheKey:a.getEntriesByCategoryCacheKey(e,n),omitExpires:i,forceOffline:l,updateFrequency:o.a.FREQUENCY_SOMETIMES};return s.read("mod_glossary_get_entries_by_category",u,d)})},AddonModGlossaryProvider.prototype.invalidateEntriesByCategory=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r=o.getEntriesByCategoryCacheKey(e,n);return t.invalidateWsCacheForKey(r)})},AddonModGlossaryProvider.prototype.getEntriesByCategoryCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"entriesByCategory:"+e+":"+n},AddonModGlossaryProvider.prototype.getEntriesByDateCacheKey=function(e,n,t){return this.ROOT_CACHE_KEY+"entriesByDate:"+e+":"+n+":"+t},AddonModGlossaryProvider.prototype.getEntriesByDate=function(e,n,t,r,i,l,s,a){var u=this;return this.sitesProvider.getSite(a).then(function(a){var d={id:e,order:n,sort:t,from:r,limit:i},c={cacheKey:u.getEntriesByDateCacheKey(e,n,t),omitExpires:l,forceOffline:s,updateFrequency:o.a.FREQUENCY_SOMETIMES};return a.read("mod_glossary_get_entries_by_date",d,c)})},AddonModGlossaryProvider.prototype.invalidateEntriesByDate=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i=r.getEntriesByDateCacheKey(e,n,t);return o.invalidateWsCacheForKey(i)})},AddonModGlossaryProvider.prototype.getEntriesByLetterCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"entriesByLetter:"+e+":"+n},AddonModGlossaryProvider.prototype.getEntriesByLetter=function(n,t,r,i,l,s,a){var u=this;return this.sitesProvider.getSite(a).then(function(a){var d={id:n,letter:t,from:r,limit:i},c={cacheKey:u.getEntriesByLetterCacheKey(n,t),omitExpires:l,forceOffline:s,updateFrequency:o.a.FREQUENCY_SOMETIMES};return a.read("mod_glossary_get_entries_by_letter",d,c).then(function(t){return i==e.LIMIT_ENTRIES&&u.storeEntries(n,t.entries,r,a.getId()).catch(function(){}),t})})},AddonModGlossaryProvider.prototype.invalidateEntriesByLetter=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r=o.getEntriesByLetterCacheKey(e,n);return t.invalidateWsCacheForKey(r)})},AddonModGlossaryProvider.prototype.getEntriesBySearchCacheKey=function(e,n,t,o,r){return this.ROOT_CACHE_KEY+"entriesBySearch:"+e+":"+t+":"+o+":"+r+":"+n},AddonModGlossaryProvider.prototype.getEntriesBySearch=function(e,n,t,r,i,l,s,a,u,d){var c=this;return this.sitesProvider.getSite(d).then(function(d){var p={id:e,query:n,fullsearch:t,order:r,sort:i,from:l,limit:s},f={cacheKey:c.getEntriesBySearchCacheKey(e,n,t,r,i),omitExpires:a,forceOffline:u,updateFrequency:o.a.FREQUENCY_SOMETIMES};return d.read("mod_glossary_get_entries_by_search",p,f)})},AddonModGlossaryProvider.prototype.invalidateEntriesBySearch=function(e,n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s=l.getEntriesBySearchCacheKey(e,n,t,o,r);return i.invalidateWsCacheForKey(s)})},AddonModGlossaryProvider.prototype.getCategoriesCacheKey=function(e){return this.ROOT_CACHE_KEY+"categories:"+e},AddonModGlossaryProvider.prototype.getAllCategories=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return o.getCategories(n,0,e.LIMIT_CATEGORIES,[],t)})},AddonModGlossaryProvider.prototype.getCategories=function(e,n,t,r,i){var l=this,s={id:e,from:n,limit:t},a={cacheKey:this.getCategoriesCacheKey(e),updateFrequency:o.a.FREQUENCY_SOMETIMES};return i.read("mod_glossary_get_categories",s,a).then(function(o){r=r.concat(o.categories);return n+t<o.count?(n+=t,l.getCategories(e,n,t,r,i)):r})},AddonModGlossaryProvider.prototype.invalidateCategories=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getCategoriesCacheKey(e))})},AddonModGlossaryProvider.prototype.getEntryCacheKey=function(e){return this.ROOT_CACHE_KEY+"getEntry:"+e},AddonModGlossaryProvider.prototype.getEntry=function(n,t){var r=this;return this.sitesProvider.getSite(t).then(function(i){var l={id:n},s={cacheKey:r.getEntryCacheKey(n),updateFrequency:o.a.FREQUENCY_RARELY};return i.read("mod_glossary_get_entry_by_id",l,s).then(function(e){return e&&e.entry?e:Promise.reject(null)}).catch(function(o){var l,s=function(o,i){return r.getEntriesByLetter(l,"ALL",o,e.LIMIT_ENTRIES,!1,!0,t).then(function(e){for(var t=0;t<e.entries.length;t++){var r=e.entries[t];if(r.id==n)return{entry:r,from:o}}var l=o+e.entries.length;return l<e.count&&i?s(l,!0):Promise.reject(null)})};return r.getStoredDataForEntry(n,i.getId()).then(function(e){return l=e.glossaryId,void 0!==e.from?s(e.from,!1).catch(function(){return s(0,!0)}):s(0,!0)}).catch(function(){return Promise.reject(o)})})})},AddonModGlossaryProvider.prototype.getStoredDataForEntry=function(n,t){return this.sitesProvider.getSite(t).then(function(t){var o={entryid:n};return t.getDb().getRecord(e.ENTRIES_TABLE,o).then(function(e){return{glossaryId:e.glossaryid,from:e.pagefrom}})})},AddonModGlossaryProvider.prototype.fetchEntries=function(n,t,o,r,i,l,s){void 0===o&&(o=0),void 0===i&&(i=!1),void 0===l&&(l=!1),r=r||e.LIMIT_ENTRIES,s=s||this.sitesProvider.getCurrentSiteId();var a=t.slice();return a.push(o),a.push(r),a.push(i),a.push(l),a.push(s),n.apply(this,a)},AddonModGlossaryProvider.prototype.fetchAllEntries=function(n,t,o,r,i){var l=this;void 0===o&&(o=!1),void 0===r&&(r=!1),i=i||this.sitesProvider.getCurrentSiteId();var s=[],a=e.LIMIT_ENTRIES,u=function(){return l.fetchEntries(n,t,s.length,a,o,r,i).then(function(e){return Array.prototype.push.apply(s,e.entries),s.length<e.count?u():s})};return u()},AddonModGlossaryProvider.prototype.invalidateEntry=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getEntryCacheKey(e))})},AddonModGlossaryProvider.prototype.invalidateEntries=function(e,n){var t=this,o=[];return e.forEach(function(e){o.push(t.getEntryCacheKey(e.id))}),this.sitesProvider.getSite(n).then(function(e){return e.invalidateMultipleWsCacheForKey(o)})},AddonModGlossaryProvider.prototype.invalidateContent=function(e,n){var t=this;return this.getGlossary(n,e).then(function(e){return t.invalidateGlossaryEntries(e).finally(function(){return t.utils.allPromises([t.invalidateCourseGlossaries(n),t.invalidateCategories(e.id)])})})},AddonModGlossaryProvider.prototype.invalidateGlossaryEntries=function(n,t,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=[];return t||i.push(this.fetchAllEntries(this.getEntriesByLetter,[n.id,"ALL"],!0,!1,o).then(function(e){return r.invalidateEntries(e,o)})),n.browsemodes.forEach(function(t){switch(t){case"letter":i.push(r.invalidateEntriesByLetter(n.id,"ALL",o));break;case"cat":i.push(r.invalidateEntriesByCategory(n.id,e.SHOW_ALL_CATEGORIES,o));break;case"date":i.push(r.invalidateEntriesByDate(n.id,"CREATION","DESC",o)),i.push(r.invalidateEntriesByDate(n.id,"UPDATE","DESC",o));break;case"author":i.push(r.invalidateEntriesByAuthor(n.id,"ALL","LASTNAME","ASC",o))}}),this.utils.allPromises(i)},AddonModGlossaryProvider.prototype.invalidateFiles=function(n,t){return this.filepoolProvider.invalidateFilesByComponent(t,e.COMPONENT,n)},AddonModGlossaryProvider.prototype.getGlossary=function(e,n,t){return this.getCourseGlossaries(e,t).then(function(e){var t=e.find(function(e){return e.coursemodule==n});return t||Promise.reject(null)})},AddonModGlossaryProvider.prototype.getGlossaryById=function(e,n,t){return this.getCourseGlossaries(e,t).then(function(e){var t=e.find(function(e){return e.id==n});return t||Promise.reject(null)})},AddonModGlossaryProvider.prototype.addEntry=function(e,n,t,o,r,i,l,s,a,u,d){var c=this;s=s||this.sitesProvider.getCurrentSiteId();var p=function(){return(d?c.isConceptUsed(e,n,a&&a.timecreated,s):Promise.resolve(!1)).then(function(u){return u?Promise.reject(c.translate.instant("addon.mod_glossary.errconceptalreadyexists")):c.glossaryOffline.addNewEntry(e,n,t,o,i,r,l,s,void 0,a).then(function(){return!1})})};if(!this.appProvider.isOnline()&&u)return p();return(a?this.glossaryOffline.deleteNewEntry(e,a.concept,a.timecreated,s):Promise.resolve()).then(function(){return c.addEntryOnline(e,n,t,r,i,s).then(function(e){return e}).catch(function(e){return u&&!c.utils.isWebServiceError(e)?p():Promise.reject(e)})})},AddonModGlossaryProvider.prototype.addEntryOnline=function(e,n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={glossaryid:e,concept:n,definition:t,definitionformat:1,options:l.utils.objectToArrayOfObjects(o||{},"name","value")};return r&&s.options.push({name:"attachmentsid",value:r}),i.isVersionGreaterEqualThan("3.2.2")||(s.definition=l.textUtils.cleanTags(s.definition)),i.write("mod_glossary_add_entry",s).then(function(e){return e&&e.entryid?e.entryid:Promise.reject(l.utils.createFakeWSError(""))})})},AddonModGlossaryProvider.prototype.isConceptUsed=function(e,n,t,o){var r=this;return this.glossaryOffline.isConceptUsed(e,n,t,o).then(function(t){return!!t||r.fetchAllEntries(r.getEntriesByLetter,[e,"ALL"],!0,!1,o).then(function(e){return e.some(function(e){return e.concept==n})})}).catch(function(){return!1})},AddonModGlossaryProvider.prototype.isPluginEnabledForEditing=function(){return this.sitesProvider.getCurrentSite().wsAvailable("mod_glossary_add_entry")},AddonModGlossaryProvider.prototype.logView=function(n,t,o,r){return this.logHelper.logSingle("mod_glossary_view_glossary",{id:n,mode:t},e.COMPONENT,n,o,"glossary",{mode:t},r)},AddonModGlossaryProvider.prototype.logEntryView=function(n,t,o,r){return this.logHelper.logSingle("mod_glossary_view_entry",{id:n},e.COMPONENT,t,o,"glossary",{entryid:n},r)},AddonModGlossaryProvider.prototype.storeEntries=function(e,n,t,o){var r=this,i=[];return n.forEach(function(n){i.push(r.storeEntryId(e,n.id,t,o))}),Promise.all(i)},AddonModGlossaryProvider.prototype.storeEntryId=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){var i={entryid:t,glossaryid:n,pagefrom:o};return r.getDb().insertRecord(e.ENTRIES_TABLE,i)})},AddonModGlossaryProvider.COMPONENT="mmaModGlossary",AddonModGlossaryProvider.LIMIT_ENTRIES=25,AddonModGlossaryProvider.LIMIT_CATEGORIES=10,AddonModGlossaryProvider.SHOW_ALL_CATEGORIES=0,AddonModGlossaryProvider.SHOW_NOT_CATEGORISED=-1,AddonModGlossaryProvider.ADD_ENTRY_EVENT="addon_mod_glossary_add_entry",AddonModGlossaryProvider.ENTRIES_TABLE="addon_mod_glossary_entry_glossaryid",AddonModGlossaryProvider;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function CoreTagAreaDelegate(n,t,o){var r=e.call(this,"CoreTagAreaDelegate",n,t,o)||this;return r.handlerNameProperty="type",r}return Object(o.__extends)(CoreTagAreaDelegate,e),CoreTagAreaDelegate.prototype.getDisplayNameKey=function(e,n){return("core"==e?"core.tag":"addon."+e)+".tagarea_"+n},CoreTagAreaDelegate.prototype.parseContent=function(e,n,t){var o=e+"/"+n;return Promise.resolve(this.executeFunctionOnEnabled(o,"parseContent",[t]))},CoreTagAreaDelegate.prototype.getComponent=function(e,n,t){var o=e+"/"+n;return Promise.resolve(this.executeFunctionOnEnabled(o,"getComponent",[t]))},CoreTagAreaDelegate}(t(99).a)},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonBlogProvider(e,n,t,o){this.sitesProvider=n,this.utils=t,this.pushNotificationsProvider=o,this.ROOT_CACHE_KEY="addonBlog:",this.logger=e.getInstance("AddonBlogProvider")}return e=AddonBlogProvider,AddonBlogProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("core_blog_get_entries")&&e.canUseAdvancedFeature("enableblogs")})},AddonBlogProvider.prototype.getEntriesCacheKey=function(e){return void 0===e&&(e={}),this.ROOT_CACHE_KEY+this.utils.sortAndStringify(e)},AddonBlogProvider.prototype.getEntries=function(n,t,r){var i=this;return void 0===n&&(n={}),void 0===t&&(t=0),this.sitesProvider.getSite(r).then(function(r){var l={filters:i.utils.objectToArrayOfObjects(n,"name","value"),page:t,perpage:e.ENTRIES_PER_PAGE},s={cacheKey:i.getEntriesCacheKey(n),updateFrequency:o.a.FREQUENCY_SOMETIMES};return r.read("core_blog_get_entries",l,s)})},AddonBlogProvider.prototype.invalidateEntries=function(e,n){var t=this;return void 0===e&&(e={}),this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getEntriesCacheKey(e))})},AddonBlogProvider.prototype.logView=function(e,n){var t=this;return void 0===e&&(e={}),this.pushNotificationsProvider.logViewListEvent("blog","core_blog_view_entries",e,n),this.sitesProvider.getSite(n).then(function(n){var o={filters:t.utils.objectToArrayOfObjects(e,"name","value")};return n.write("core_blog_view_entries",o)})},AddonBlogProvider.ENTRIES_PER_PAGE=10,AddonBlogProvider.COMPONENT="blog",AddonBlogProvider;var e}()},,,,,,function(e,n,t){"use strict";function View_CoreUserAvatarComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"alt",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoProfile(t)&&o}return o},null,null)),o._15(1,4734976,null,0,r.a,[o.p,i.a,l.a,s.a,a.a,u.a,d.a,c.a,p.a],{siteId:[0,"siteId"],src:[1,"src"]},null),o._33(2,{$a:0}),o._32(131072,f.a,[h.a,o.i])],function(e,n){var t=n.component;e(n,1,0,t.siteId||null,t.avatarUrl)},function(e,n){var t=n.component;e(n,0,0,o._41(n,0,0,o._29(n,3).transform("core.pictureof",e(n,2,0,t.fullname))))})}function View_CoreUserAvatarComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"img",[["role","presentation"],["src","assets/img/user-avatar.png"]],[[8,"alt",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoProfile(t)&&o}return o},null,null)),o._33(1,{$a:0}),o._32(131072,f.a,[h.a,o.i])],null,function(e,n){var t=n.component;e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.pictureof",e(n,1,0,t.fullname))))})}function View_CoreUserAvatarComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,"span",[["class","contact-status online"]],null,null,null,null,null))],null,null)}function View_CoreUserAvatarComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,"img",[["alt",""],["class","core-avatar-extra-icon"],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.extraIcon)})}function View_CoreUserAvatarComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreUserAvatarComponent_1)),o._15(1,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreUserAvatarComponent_2)),o._15(4,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreUserAvatarComponent_3)),o._15(7,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreUserAvatarComponent_4)),o._15(10,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),o._28(null,0)],function(e,n){var t=n.component;e(n,1,0,t.avatarUrl);e(n,4,0,!t.avatarUrl);e(n,7,0,t.checkOnline&&t.isOnline());e(n,10,0,t.extraIcon)},null)}t.d(n,"a",function(){return _}),n.b=View_CoreUserAvatarComponent_0;var o=t(1),r=t(229),i=t(7),l=t(18),s=t(17),a=t(2),u=t(5),d=t(23),c=t(11),p=t(3),f=t(26),h=t(19),m=t(8),_=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(1),r=t(42),i=function(){function CoreFileComponent(e,n,t,r,i,l,s,a,u,d,c){this.sitesProvider=e,this.utils=n,this.domUtils=t,this.filepoolProvider=r,this.appProvider=i,this.fileHelper=l,this.mimeUtils=s,this.eventsProvider=a,this.textUtils=u,this.pluginFileDelegate=d,this.urlUtils=c,this.canDownload=!0,this.showSize=!0,this.showTime=!0,this.onDelete=new o.r}return CoreFileComponent.prototype.ngOnInit=function(){var e=this;this.canDelete=this.utils.isTrueOrOne(this.canDelete),this.alwaysDownload=this.utils.isTrueOrOne(this.alwaysDownload),this.canDownload=this.utils.isTrueOrOne(this.canDownload),this.fileUrl=this.fileHelper.getFileUrl(this.file),this.timemodified=this.fileHelper.getFileTimemodified(this.file),this.siteId=this.sitesProvider.getCurrentSiteId(),this.fileSize=this.file.filesize,this.fileName=this.file.filename,this.utils.isTrueOrOne(this.showSize)&&this.fileSize>=0&&(this.fileSizeReadable=this.textUtils.bytesToSize(this.fileSize,2)),this.showTime=this.utils.isTrueOrOne(this.showTime)&&this.timemodified>0,this.file.isexternalfile&&(this.alwaysDownload=!0),this.fileIcon=this.mimeUtils.getFileIcon(this.file.filename),this.canDownload&&(this.calculateState(),this.filepoolProvider.getFileEventNameByUrl(this.siteId,this.fileUrl).then(function(n){e.observer=e.eventsProvider.on(n,function(){e.calculateState()})}).catch(function(){}))},CoreFileComponent.prototype.calculateState=function(){var e=this;return this.filepoolProvider.getFileStateByUrl(this.siteId,this.fileUrl,this.timemodified).then(function(n){e.canDownload=e.sitesProvider.getCurrentSite().canDownloadFiles(),e.state=n,e.isDownloading=e.canDownload&&n===r.a.DOWNLOADING})},CoreFileComponent.prototype.openFile=function(){var e=this;return this.fileHelper.downloadAndOpenFile(this.file,this.component,this.componentId,this.state,function(n){n&&n.calculating&&(e.isDownloading=!0)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"core.errordownloading",!0)})},CoreFileComponent.prototype.download=function(e,n){var t=this;void 0===n&&(n=!1),e&&e.preventDefault(),e&&e.stopPropagation(),this.isDownloading&&!n||(this.canDownload&&this.state&&this.state!=r.a.NOT_DOWNLOADABLE?this.appProvider.isOnline()||n&&(!n||this.fileHelper.isStateDownloaded(this.state))?n?this.openFile().catch(function(e){t.domUtils.showErrorModalDefault(e,"core.errordownloading",!0)}):this.pluginFileDelegate.getFileSize({fileurl:this.fileUrl,filesize:this.fileSize},this.siteId).then(function(e){return(e?t.domUtils.confirmDownloadSize({size:e,total:!0}):Promise.resolve()).then(function(){return t.filepoolProvider.invalidateFileByUrl(t.siteId,t.fileUrl).finally(function(){t.isDownloading=!0,t.filepoolProvider.addToQueueByUrl(t.siteId,t.fileUrl,t.component,t.componentId,t.timemodified,void 0,void 0,0,t.file).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.errordownloading",!0),t.calculateState()})})}).catch(function(){})}).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.errordownloading",!0)}):this.domUtils.showErrorModal("core.networkerrormsg",!0):this.file.toURL?this.utils.openFile(this.file.toURL()):this.fileUrl&&(0===this.fileUrl.indexOf("http")?this.utils.openOnlineFile(this.urlUtils.unfixPluginfileURL(this.fileUrl)):this.utils.openFile(this.fileUrl)))},CoreFileComponent.prototype.delete=function(e){e.preventDefault(),e.stopPropagation(),this.canDelete&&this.onDelete.emit()},CoreFileComponent.prototype.ngOnDestroy=function(){this.observer&&this.observer.off()},CoreFileComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},r=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},i=function(){function CoreEditorOfflineProvider(e,n,t,o){this.sitesProvider=n,this.textUtils=t,this.utils=o,this.DRAFT_TABLE="editor_draft",this.siteSchema={name:"CoreEditorProvider",version:1,tables:[{name:this.DRAFT_TABLE,columns:[{name:"contextlevel",type:"TEXT"},{name:"contextinstanceid",type:"INTEGER"},{name:"elementid",type:"TEXT"},{name:"extraparams",type:"TEXT"},{name:"drafttext",type:"TEXT",notNull:!0},{name:"pageinstance",type:"TEXT",notNull:!0},{name:"timecreated",type:"INTEGER",notNull:!0},{name:"timemodified",type:"INTEGER",notNull:!0},{name:"originalcontent",type:"TEXT"}],primaryKeys:["contextlevel","contextinstanceid","elementid","extraparams"]}]},this.logger=e.getInstance("CoreEditorProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return CoreEditorOfflineProvider.prototype.deleteDraft=function(e,n,t,i,l){return o(this,void 0,void 0,function(){var o,s;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.sitesProvider.getSiteDb(l)];case 1:return o=r.sent(),s=this.fixDraftPrimaryData(e,n,t,i),[2,o.deleteRecords(this.DRAFT_TABLE,s)];case 2:return r.sent(),[3,3];case 3:return[2]}})})},CoreEditorOfflineProvider.prototype.fixDraftPrimaryData=function(e,n,t,o){return{contextlevel:e,contextinstanceid:n,elementid:t,extraparams:this.utils.sortAndStringify(o||{})}},CoreEditorOfflineProvider.prototype.getDraft=function(e,n,t,i,l){return o(this,void 0,void 0,function(){var o,s;return r(this,function(r){switch(r.label){case 0:return[4,this.sitesProvider.getSiteDb(l)];case 1:return o=r.sent(),s=this.fixDraftPrimaryData(e,n,t,i),[2,o.getRecord(this.DRAFT_TABLE,s)]}})})},CoreEditorOfflineProvider.prototype.resumeDraft=function(e,n,t,i,l,s,a){return o(this,void 0,void 0,function(){var o,u;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,7,,9]),[4,this.getDraft(e,n,t,i,a)];case 1:o=r.sent(),r.label=2;case 2:return r.trys.push([2,5,,6]),[4,this.sitesProvider.getSiteDb(a)];case 3:return u=r.sent(),o.pageinstance=l,o.timemodified=Date.now(),s&&o.originalcontent!=s&&(o.originalcontent=s,o.drafttext=""),[4,u.insertRecord(this.DRAFT_TABLE,o)];case 4:return r.sent(),[3,6];case 5:return r.sent(),[3,6];case 6:return[2,o];case 7:return r.sent(),[4,this.saveDraft(e,n,t,i,l,"",s,a)];case 8:return r.sent(),[3,9];case 9:return[2]}})})},CoreEditorOfflineProvider.prototype.saveDraft=function(e,n,t,i,l,s,a,u){return o(this,void 0,void 0,function(){var o,d,c,p;return r(this,function(r){switch(r.label){case 0:o=Date.now(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.getDraft(e,n,t,i,u)];case 2:return d=r.sent(),o=d.timecreated,[3,4];case 3:return r.sent(),[3,4];case 4:if(d){if(d.pageinstance!=l)throw this.logger.warning("Discarding draft because of pageinstance. Context '"+e+"' '"+n+"', element '"+t+"'"),null;a||(a=d.originalcontent)}return[4,this.sitesProvider.getSiteDb(u)];case 5:return c=r.sent(),p=this.fixDraftPrimaryData(e,n,t,i),p.drafttext=(s||"").trim(),p.pageinstance=l,p.timecreated=o,p.timemodified=Date.now(),a&&(p.originalcontent=a),[4,c.insertRecord(this.DRAFT_TABLE,p)];case 6:return r.sent(),[2]}})})},CoreEditorOfflineProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4),t(128),t(292);var o=t(98),r=function(){function AddonModDataHelperProvider(e,n,t,o,r,i,l,s,a,u,d,c){this.sitesProvider=e,this.dataProvider=n,this.translate=t,this.fieldsDelegate=o,this.dataOffline=r,this.fileUploaderProvider=i,this.textUtils=l,this.eventsProvider=s,this.utils=a,this.domUtils=u,this.courseProvider=d,this.ratingOffline=c}return AddonModDataHelperProvider.prototype.applyOfflineActions=function(e,n,t){var o=this,r=[];return n.forEach(function(n){switch(e.timemodified=n.timemodified,e.hasOffline=!0,n.action){case"approve":e.approved=!0;break;case"disapprove":e.approved=!1;break;case"delete":e.deleted=!0;break;case"add":case"edit":e.groupid=n.groupid;var i={};n.fields.forEach(function(e){void 0===i[e.fieldid]&&(i[e.fieldid]={}),e.subfield?i[e.fieldid][e.subfield]=o.textUtils.parseJSON(e.value):i[e.fieldid][""]=o.textUtils.parseJSON(e.value)}),t.forEach(function(n){o.fieldsDelegate.hasFiles(n)?r.push(o.getStoredFiles(e.dataid,e.id,n.id).then(function(t){e.contents[n.id]=o.fieldsDelegate.overrideData(n,e.contents[n.id],i[n.id],t),e.contents[n.id].fieldid=n.id})):(e.contents[n.id]=o.fieldsDelegate.overrideData(n,e.contents[n.id],i[n.id]),e.contents[n.id].fieldid=n.id)})}}),Promise.all(r).then(function(){return e})},AddonModDataHelperProvider.prototype.approveOrDisapproveEntry=function(e,n,t,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();var s=this.domUtils.showModalLoading("core.sending",!0);this.getActivityCourseIdIfNotSet(e,r,i).then(function(o){return l.dataProvider.approveEntry(e,n,t,o,i).catch(function(e){return l.domUtils.showErrorModalDefault(e,"addon.mod_data.errorapproving",!0),Promise.reject(null)})}).then(function(){var t=[];return t.push(l.dataProvider.invalidateEntryData(e,n,i)),t.push(l.dataProvider.invalidateEntriesData(e,i)),Promise.all(t).catch(function(){})}).then(function(){l.eventsProvider.trigger(o.a.ENTRY_CHANGED,{dataId:e,entryId:n},i),l.domUtils.showToast(t?"addon.mod_data.recordapproved":"addon.mod_data.recorddisapproved",!0,3e3)}).catch(function(){}).finally(function(){s.dismiss()})},AddonModDataHelperProvider.prototype.displayShowFields=function(e,n,t,o,r,i){if(!e)return"";var l,s;n.forEach(function(n){l=(l="[["+n.name+"]]").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),l=new RegExp(l,"gi"),e=e.replace(l,s='<addon-mod-data-field-plugin [field]="fields['+n.id+']" [value]="entries['+t.id+"].contents["+n.id+']" mode="'+r+'" [database]="data" (gotoEntry)="gotoEntry('+t.id+')"></addon-mod-data-field-plugin>')});for(var a in i)l=new RegExp("##"+a+"##","gi"),i[a]?(s="moreurl"==a?this.sitesProvider.getCurrentSite().getURL()+"/mod/data/view.php?d={{data.id}}&rid="+t.id:"approvalstatus"==a?this.translate.instant("addon.mod_data."+(t.approved?"approved":"notapproved")):'<addon-mod-data-action action="'+a+'" [entry]="entries['+t.id+']" mode="'+r+'" [database]="data" [module]="module" [offset]="'+o+'" [group]="group" ></addon-mod-data-action>',e=e.replace(l,s)):e=e.replace(l,"");return e},AddonModDataHelperProvider.prototype.fetchEntries=function(e,n,t,r,i,l,s,a,u,d){var c=this;return void 0===t&&(t=0),void 0===l&&(l="0"),void 0===s&&(s="DESC"),void 0===a&&(a=0),void 0===u&&(u=o.a.PER_PAGE),this.sitesProvider.getSite(d).then(function(o){var d,p={},f={entries:[],totalcount:0,offlineEntries:[]},h=c.dataOffline.getDatabaseEntries(e.id,o.id).then(function(n){f.hasOfflineActions=!!n.length,n.forEach(function(n){void 0===p[n.entryid]&&(p[n.entryid]=[]),p[n.entryid].push(n),"add"!=n.action||0!=a||r||i||n.groupid&&t&&n.groupid!=t||f.offlineEntries.push({id:n.entryid,canmanageentry:!0,approved:!e.approval||e.manageapproved,dataid:e.id,groupid:n.groupid,timecreated:-n.entryid,timemodified:-n.entryid,userid:o.getUserId(),fullname:o.getInfo().fullname,contents:{}})}),f.offlineEntries.sort(function(e,n){return n.timecreated-e.timecreated})}),m=c.ratingOffline.hasRatings("mod_data","entry","module",e.coursemodule).then(function(e){f.hasOfflineRatings=e});return d=r||i?c.dataProvider.searchEntries(e.id,t,r,i,l,s,a,u,o.id).then(function(e){f.entries=e.entries,f.totalcount=e.totalcount,f.maxcount=e.maxcount}):c.dataProvider.getEntries(e.id,t,l,s,a,u,!1,!1,o.id).then(function(e){f.entries=e.entries,f.totalcount=e.totalcount}),Promise.all([h,m,d]).then(function(){var e=[];return f.entries.forEach(function(t){e.push(c.applyOfflineActions(t,p[t.id]||[],n))}),f.offlineEntries.forEach(function(t){e.push(c.applyOfflineActions(t,p[t.id]||[],n))}),Promise.all(e)}).then(function(){return f})})},AddonModDataHelperProvider.prototype.fetchEntry=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return r.dataOffline.getEntryActions(e.id,t,o.id).then(function(i){return(t>0?r.dataProvider.getEntry(e.id,t,!1,o.id):Promise.resolve({entry:{id:t,userid:o.getUserId(),groupid:0,dataid:e.id,timecreated:-t,timemodified:-t,approved:!e.approval||e.manageapproved,canmanageentry:!0,fullname:o.getInfo().fullname,contents:{}}})).then(function(e){return r.applyOfflineActions(e.entry,i,n).then(function(){return e})})})})},AddonModDataHelperProvider.prototype.getActions=function(e,n,t){return{more:!0,moreurl:!0,user:!0,userpicture:!0,timeadded:!0,timemodified:!0,tags:!0,edit:t.canmanageentry&&!t.deleted,delete:t.canmanageentry,approve:e.approval&&n.canapprove&&!t.approved&&!t.deleted,disapprove:e.approval&&n.canapprove&&t.approved&&!t.deleted,approvalstatus:e.approval,comments:e.comments,delcheck:!1,export:!1}},AddonModDataHelperProvider.prototype.getActivityCourseIdIfNotSet=function(e,n,t){return n?Promise.resolve(n):this.courseProvider.getModuleBasicInfoByInstance(e,"data",t).then(function(e){return e.course})},AddonModDataHelperProvider.prototype.getDefaultTemplate=function(e,n){if("listtemplateheader"==e||"listtemplatefooter"==e)return"";var t=[];return"listtemplate"==e&&t.push("##delcheck##<br />"),t.push('<div class="defaulttemplate">','<table class="mod-data-default-template ##approvalstatus##">',"<tbody>"),n.forEach(function(e){t.push('<tr class="">','<td class="template-field cell c0" style="">',e.name,": </td>",'<td class="template-token cell c1 lastcol" style="">[[',e.name,"]]</td>","</tr>")}),"listtemplate"==e?t.push('<tr class="lastrow">','<td class="controls template-field cell c0 lastcol" style="" colspan="2">',"##edit##  ##more##  ##delete##  ##approve##  ##disapprove##  ##export##","</td>","</tr>"):"singletemplate"==e?t.push('<tr class="lastrow">','<td class="controls template-field cell c0 lastcol" style="" colspan="2">',"##edit##  ##delete##  ##approve##  ##disapprove##  ##export##","</td>","</tr>"):"asearchtemplate"==e&&t.push('<tr class="searchcontrols">','<td class="template-field cell c0" style="">Author first name: </td>','<td class="template-token cell c1 lastcol" style="">##firstname##</td>',"</tr>",'<tr class="searchcontrols lastrow">','<td class="template-field cell c0" style="">Author surname: </td>','<td class="template-token cell c1 lastcol" style="">##lastname##</td>',"</tr>"),t.push("</tbody>","</table>","</div>"),"listtemplate"==e&&t.push("<hr />"),t.join("")},AddonModDataHelperProvider.prototype.getEditDataFromForm=function(e,n,t,o,r,i,l){var s=this;if(void 0===i&&(i=!1),!e)return Promise.resolve({});l=l||this.sitesProvider.getCurrentSiteId();var a=[],u=[];return n.forEach(function(n){u.push(Promise.resolve(s.fieldsDelegate.getFieldEditData(n,e,r[n.id])).then(function(e){if(e){var n=[];return e.forEach(function(e){var r;r=t&&e.files?s.uploadOrStoreFiles(t,0,o,e.fieldid,e.files,i,l).then(function(n){delete e.files,e.value=n}):Promise.resolve(),n.push(r.then(function(){e.value&&(e.value=JSON.stringify(e.value)),void 0===e.subfield&&(e.subfield=""),a.push(e)}))}),Promise.all(n)}}))}),Promise.all(u).then(function(){return a})},AddonModDataHelperProvider.prototype.getEditTmpFiles=function(e,n,t,o){var r=this;if(!e)return Promise.resolve([]);var i=n.map(function(n){return Promise.resolve(r.fieldsDelegate.getFieldEditFiles(n,e,o[n.id]))});return Promise.all(i).then(function(e){return e.reduce(function(e,n){return e.concat(n)},[])})},AddonModDataHelperProvider.prototype.getStoredFiles=function(e,n,t,o){var r=this;return this.dataOffline.getEntryFieldFolder(e,n,t,o).then(function(e){return r.fileUploaderProvider.getStoredFiles(e).catch(function(){return[]})})},AddonModDataHelperProvider.prototype.getTemplate=function(e,n,t){var o=e[n]||this.getDefaultTemplate(n,t);return"listtemplateheader"!=n&&"listtemplatefooter"!=n&&(o=this.domUtils.fixHtml(o)),o=o.replace(/<a ([^>]*href="[^>]*)>/gi,function(e,n){return'<a core-link capture="true" '+n+">"})},AddonModDataHelperProvider.prototype.hasEditDataChanged=function(e,n,t,o){var r=this,i=n.map(function(n){return r.fieldsDelegate.hasFieldDataChanged(n,e,o[n.id])});return Promise.all(i).then(function(){return!1}).catch(function(){return!0})},AddonModDataHelperProvider.prototype.showDeleteEntryModal=function(e,n,t,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId(),this.domUtils.showDeleteConfirm("addon.mod_data.confirmdeleterecord").then(function(){var l=i.domUtils.showModalLoading();return i.getActivityCourseIdIfNotSet(e,t,r).then(function(t){return i.dataProvider.deleteEntry(e,n,t,r)}).catch(function(e){return i.domUtils.showErrorModalDefault(e,"addon.mod_data.errordeleting",!0),Promise.reject(null)}).then(function(){return i.utils.allPromises([i.dataProvider.invalidateEntryData(e,n,r),i.dataProvider.invalidateEntriesData(e,r)]).catch(function(){})}).then(function(){i.eventsProvider.trigger(o.a.ENTRY_CHANGED,{dataId:e,entryId:n,deleted:!0},r),i.domUtils.showToast("addon.mod_data.recorddeleted",!0,3e3)}).finally(function(){l.dismiss()})}).catch(function(){})},AddonModDataHelperProvider.prototype.storeFiles=function(e,n,t,o,r){var i=this;return this.dataOffline.getEntryFieldFolder(e,n,t,r).then(function(e){return i.fileUploaderProvider.storeFilesToUpload(e,o)})},AddonModDataHelperProvider.prototype.uploadOrStoreFiles=function(e,n,t,r,i,l,s){return void 0===n&&(n=0),i.length?l?this.storeFiles(e,t,r,i,s):this.fileUploaderProvider.uploadOrReuploadFiles(i,o.a.COMPONENT,n,s):Promise.resolve(0)},AddonModDataHelperProvider}()},,function(e,n,t){"use strict";function View_CoreCompileHtmlComponent_0(e){return o._42(0,[o._37(402653184,1,{container:0}),(e()(),o._16(1,0,null,null,2,"core-loading",[],null,null,null,r.b,r.a)),o._15(2,638976,null,0,i.a,[l.a,o.p,s.a,a.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._16(3,16777216,[[1,3],["dynamicComponent",1]],0,0,null,null,null,null,null,null,null))],function(e,n){e(n,2,0,n.component.loaded)},null)}t.d(n,"a",function(){return u}),n.b=View_CoreCompileHtmlComponent_0;var o=t(1),r=t(55),i=t(52),l=t(19),s=t(10),a=t(3),u=(t(156),o._14({encapsulation:2,styles:[],data:{}}))},,function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(54),r=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},i=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},l=function(){function AddonModBookProvider(e,n,t,o,r,i,l,s,a,u){this.sitesProvider=n,this.textUtils=t,this.fileProvider=o,this.filepoolProvider=r,this.wsProvider=i,this.utils=l,this.courseProvider=s,this.domUtils=a,this.logHelper=u,this.ROOT_CACHE_KEY="mmaModBook:",this.logger=e.getInstance("AddonModBookProvider")}return e=AddonModBookProvider,AddonModBookProvider.prototype.getBook=function(e,n,t){return this.getBookByField(e,"coursemodule",n,t)},AddonModBookProvider.prototype.getBookByField=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={courseids:[e]},s={cacheKey:i.getBookDataCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return r.read("mod_book_get_books_by_courses",l,s).then(function(e){if(e&&e.books){var o=e.books.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModBookProvider.prototype.getBookDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"book:"+e},AddonModBookProvider.prototype.getChapterContent=function(n,t,o){var l=this,s=n[t]?n[t].indexUrl:void 0,a=this.sitesProvider.getCurrentSiteId();return s?this.fileProvider.isAvailable()?this.filepoolProvider.downloadUrl(a,s,!1,e.COMPONENT,o).then(function(e){return r(l,void 0,void 0,function(){var o;return i(this,function(r){switch(r.label){case 0:return[4,this.wsProvider.getText(e)];case 1:return o=r.sent(),[2,this.domUtils.restoreSourcesInHtml(o,n[t].paths)]}})})}):this.sitesProvider.getCurrentSite().checkAndFixPluginfileURL(s):(this.logger.debug("Could not locate the index chapter"),Promise.reject(null))},AddonModBookProvider.prototype.getContentsMap=function(e){var n=this,t={};return e?(e.forEach(function(e){if(n.isFileDownloadable(e)){var o=void 0,r=void 0,i=void 0,l=void 0;(r=e.filepath.match(/\/(\d+)\//))&&r[1]&&(i=e.filepath=="/"+(o=r[1])+"/",t[o]=t[o]||{paths:{}},"index.html"==e.filename&&i?(t[o].indexUrl=e.fileurl,t[o].tags=e.tags):(l=i?e.fileurl.split("mod_book/chapter"+e.filepath)[1]||e.filename:e.filepath.replace("/"+o+"/","")+e.filename,t[o].paths[n.textUtils.decodeURIComponent(l)]=e.fileurl))}}),t):t},AddonModBookProvider.prototype.getFirstChapter=function(e){if(e&&e.length)return e[0].id},AddonModBookProvider.prototype.getNextChapter=function(e,n){for(var t,o=0;o<e.length;o++)if(e[o].id==n&&void 0!==e[o+1]){t=e[o+1];break}return t},AddonModBookProvider.prototype.getPreviousChapter=function(e,n){for(var t,o=0;o<e.length&&e[o].id!=n;o++)t=e[o];return t},AddonModBookProvider.prototype.getToc=function(e){return e&&e.length?this.textUtils.parseJSON(e[0].content,[]):[]},AddonModBookProvider.prototype.getTocList=function(e){var n=function(e,n,t){void 0===t&&(t=""),e.hidden=!!parseInt(e.hidden,10);var o=t+(e.hidden?"x.":n+".");return{id:e.href.replace("/index.html",""),title:e.title,level:e.level,number:o,hidden:e.hidden}},t=[],o=1;return this.getToc(e).forEach(function(e){var r=n(e,o);if(t.push(r),e.subitems){var i=1;e.subitems.forEach(function(e){t.push(n(e,i,r.number)),i++})}o++}),t},AddonModBookProvider.prototype.invalidateBookData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getBookDataCacheKey(e))})},AddonModBookProvider.prototype.invalidateContent=function(n,t,o){o=o||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.invalidateBookData(t,o)),r.push(this.filepoolProvider.invalidateFilesByComponent(o,e.COMPONENT,n)),r.push(this.courseProvider.invalidateModule(n,o)),this.utils.allPromises(r)},AddonModBookProvider.prototype.isFileDownloadable=function(e){return"file"===e.type},AddonModBookProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},AddonModBookProvider.prototype.logView=function(n,t,o,r){return this.logHelper.logSingle("mod_book_view_book",{bookid:n,chapterid:t},e.COMPONENT,n,o,"book",{chapterid:t},r)},AddonModBookProvider.COMPONENT="mmaModBook",AddonModBookProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonModPageProvider(e,n,t,o,r,i){this.sitesProvider=n,this.courseProvider=t,this.utils=o,this.filepoolProvider=r,this.logHelper=i,this.ROOT_CACHE_KEY="mmaModPage:",this.logger=e.getInstance("AddonModPageProvider")}return e=AddonModPageProvider,AddonModPageProvider.prototype.getPageData=function(e,n,t){return this.getPageByKey(e,"coursemodule",n,t)},AddonModPageProvider.prototype.getPageByKey=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={courseids:[e]},s={cacheKey:i.getPageCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return r.read("mod_page_get_pages_by_courses",l,s).then(function(e){if(e&&e.pages){var o=e.pages.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModPageProvider.prototype.getPageCacheKey=function(e){return this.ROOT_CACHE_KEY+"page:"+e},AddonModPageProvider.prototype.invalidateContent=function(n,t,o){var r=[];return r.push(this.invalidatePageData(t,o)),r.push(this.filepoolProvider.invalidateFilesByComponent(o,e.COMPONENT,n)),r.push(this.courseProvider.invalidateModule(n,o)),this.utils.allPromises(r)},AddonModPageProvider.prototype.invalidatePageData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getPageCacheKey(e))})},AddonModPageProvider.prototype.isGetPageWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_page_get_pages_by_courses")},AddonModPageProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},AddonModPageProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_page_view_page",{pageid:n},e.COMPONENT,n,t,"page",{},o)},AddonModPageProvider.COMPONENT="mmaModPage",AddonModPageProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonModResourceProvider(e,n,t,o,r,i){this.sitesProvider=n,this.courseProvider=t,this.filepoolProvider=o,this.utils=r,this.logHelper=i,this.ROOT_CACHE_KEY="mmaModResource:",this.logger=e.getInstance("AddonModResourceProvider")}return e=AddonModResourceProvider,AddonModResourceProvider.prototype.getResourceCacheKey=function(e){return this.ROOT_CACHE_KEY+"resource:"+e},AddonModResourceProvider.prototype.getResourceDataByKey=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={courseids:[e]},s={cacheKey:i.getResourceCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return r.read("mod_resource_get_resources_by_courses",l,s).then(function(e){if(e&&e.resources){var o=e.resources.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModResourceProvider.prototype.getResourceData=function(e,n,t){return this.getResourceDataByKey(e,"coursemodule",n,t)},AddonModResourceProvider.prototype.invalidateContent=function(n,t,o){o=o||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.invalidateResourceData(t,o)),r.push(this.filepoolProvider.invalidateFilesByComponent(o,e.COMPONENT,n)),r.push(this.courseProvider.invalidateModule(n,o,"resource")),this.utils.allPromises(r)},AddonModResourceProvider.prototype.invalidateResourceData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getResourceCacheKey(e))})},AddonModResourceProvider.prototype.isGetResourceWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_resource_get_resources_by_courses")},AddonModResourceProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},AddonModResourceProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_resource_view_resource",{resourceid:n},e.COMPONENT,n,t,"resource",{},o)},AddonModResourceProvider.COMPONENT="mmaModResource",AddonModResourceProvider;var e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function CoreTagFeedComponent(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(6),t(197)),i=function(e){function CoreBlockOnlyTitleComponent(n,t,o){var r=e.call(this,n,"CoreBlockOnlyTitleComponent")||this;return r.navCtrl=t,r.linkHelper=o,r}return Object(o.__extends)(CoreBlockOnlyTitleComponent,e),CoreBlockOnlyTitleComponent.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.fetchContentDefaultError="Error getting "+this.block.contents.title+" data."},CoreBlockOnlyTitleComponent.prototype.gotoBlock=function(){this.linkHelper.goInSite(this.navCtrl,this.link,this.linkParams,void 0,!0)},CoreBlockOnlyTitleComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreTagHelperProvider(e){this.domUtils=e}return CoreTagHelperProvider.prototype.parseFeedContent=function(e){var n=[],t=this.domUtils.convertToElement(e);return Array.from(t.querySelectorAll("ul.tag_feed > li.media")).forEach(function(e){var t={details:[]};Array.from(e.querySelectorAll("div.media-body > div")).forEach(function(e){if(e.classList.contains("media-heading")){t.heading=e.innerText.trim();var n=e.querySelector("a");n&&(t.url=n.getAttribute("href"))}else{var o=[""];Array.from(e.childNodes).forEach(function(e){if(e.nodeType==Node.TEXT_NODE)o[o.length-1]+=e.textContent;else if(e.nodeType==Node.ELEMENT_NODE){var n=e;"BR"==n.tagName?o.push(""):o[o.length-1]+=n.innerText}}),(r=t.details).push.apply(r,o.map(function(e){return e.trim()}).filter(function(e){return""!=e}))}var r});var o=e.querySelector("div.itemimage img");o&&(o.classList.contains("userpicture")?t.avatarUrl=o.getAttribute("src"):t.iconUrl=o.getAttribute("src")),t.heading&&t.url&&n.push(t)}),n},CoreTagHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreFormatDatePipe(e,n){this.timeUtils=n,this.logger=e.getInstance("CoreFormatDatePipe")}return CoreFormatDatePipe.prototype.transform=function(e,n,t){if(e=e||Date.now(),n=n||"strftimedaydatetime","string"==typeof e){var o=parseInt(e,10);if(isNaN(o))return this.logger.error("Invalid value received",e),e;e=o}return 0!=n.indexOf("strf")&&0!=n.indexOf("df")||(n="core."+n),void 0===t&&(t=0!=n.indexOf("core.df")),this.timeUtils.userDate(e,n,t)},CoreFormatDatePipe}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=(t(6),function(){function CoreExternalContentDirective(e,n,t,r,i,l,s,a,u){this.filepoolProvider=t,this.platform=r,this.sitesProvider=i,this.domUtils=l,this.urlUtils=s,this.appProvider=a,this.utils=u,this.onLoad=new o.r,this.loaded=!1,this.initialized=!1,this.invalid=!1,this.element=e.nativeElement||e,this.logger=n.getInstance("CoreExternalContentDirective")}return CoreExternalContentDirective.prototype.ngAfterViewInit=function(){this.checkAndHandleExternalContent(),this.initialized=!0},CoreExternalContentDirective.prototype.ngOnChanges=function(e){e&&this.initialized&&this.checkAndHandleExternalContent()},CoreExternalContentDirective.prototype.addSource=function(e){if("SOURCE"===this.element.tagName){var n=document.createElement("source"),t=this.element.getAttribute("type");n.setAttribute("src",e),t&&(this.platform.is("android")&&"video/quicktime"==t?n.setAttribute("type","video/mp4"):n.setAttribute("type",t)),this.element.parentNode.insertBefore(n,this.element)}},CoreExternalContentDirective.prototype.checkAndHandleExternalContent=function(){var e,n,t=this,o=this.sitesProvider.getCurrentSite(),r=this.siteId||o&&o.getId(),i=this.element.tagName;if(this.handleInlineStyles(r).catch(function(e){t.logger.error("Error treating inline styles.",t.element)}),"A"===i)e="href",n=this.href;else if("IMG"===i)e="src",n=this.src;else{if("AUDIO"!==i&&"VIDEO"!==i&&"SOURCE"!==i&&"TRACK"!==i)return void(this.invalid=!0);e="src",n=this.targetSrc||this.src,"VIDEO"===i&&this.poster&&this.handleExternalContent("poster",this.poster,r).catch(function(){})}if(n&&0===n.indexOf("data:"))return this.invalid=!0,this.onLoad.emit(),void(this.loaded=!0);this.handleExternalContent(e,n,r).catch(function(){"IMG"===i&&(n?t.waitForLoad():(t.onLoad.emit(),t.loaded=!0))})},CoreExternalContentDirective.prototype.handleExternalContent=function(e,n,t){var o=this,r=this.element.tagName;if("VIDEO"==r&&"poster"!=e){var i=this.element;i.textTracks&&(i.textTracks.onaddtrack=function(e){var n=e.track;n&&(n.oncuechange=function(){var e=o.platform.is("tablet")||o.platform.is("android")?90:80;Array.from(n.cues).forEach(function(n){n.snapToLines=!1,n.line=e,n.size=100}),n.oncuechange=null})})}return n&&n.match(/^https?:\/\//i)&&("A"!==r||this.urlUtils.isDownloadableUrl(n))?this.sitesProvider.getSite(t).then(function(i){if(!i.canDownloadFiles()&&o.urlUtils.isPluginFileUrl(n))return o.element.parentElement.removeChild(o.element),Promise.reject(null);var l="IMG"==r||"TRACK"==r||"poster"==e;return("src"===e&&"SOURCE"!==r&&"TRACK"!==r&&"VIDEO"!==r&&"AUDIO"!==r?o.filepoolProvider.getSrcByUrl(t,n,o.component,o.componentId,0,!0,l):o.filepoolProvider.getUrlByUrl(t,n,o.component,o.componentId,0,!0,l)).then(function(i){if(i.match(/^https?:\/\//i)&&(i+="#moodlemobile-embedded"),o.logger.debug("Using URL "+i+" for "+n),"SOURCE"===r?o.addSource(i):("IMG"===r&&(o.loaded=!1,o.waitForLoad()),o.element.setAttribute(e,i),o.element.setAttribute("data-original-"+e,n)),0===i.indexOf("http")&&"poster"!=e&&("VIDEO"==r||"AUDIO"==r||"A"==r||"SOURCE"==r)){var l="A"==r?"click":"play",s=o.element;if("SOURCE"==r&&!(s=o.domUtils.closest(o.element,"video,audio")))return;s.addEventListener(l,function(){o.appProvider.isWifi()&&o.filepoolProvider.getUrlByUrl(t,n,o.component,o.componentId,0,!1)})}})}):(this.logger.debug("Ignoring non-downloadable URL: "+n),"SOURCE"===r&&this.addSource(n),Promise.reject(null))},CoreExternalContentDirective.prototype.handleInlineStyles=function(e){var n=this,t=this.element.getAttribute("style");if(!t)return Promise.resolve();var o=t.match(/https?:\/\/[^"'\) ;]*/g);if(!o||!o.length)return Promise.resolve();var r=[];return(o=this.utils.uniqueArray(o)).forEach(function(o){r.push(n.filepoolProvider.getUrlByUrl(e,o,n.component,n.componentId,0,!0,!0).then(function(e){n.logger.debug("Using URL "+e+" for "+o+" in inline styles"),t=t.replace(new RegExp(o,"gi"),e)}))}),this.utils.allPromises(r).then(function(){n.element.setAttribute("style",t)})},CoreExternalContentDirective.prototype.waitForLoad=function(){var e=this,n=function(){e.element.removeEventListener("load",n),e.element.removeEventListener("error",n),e.onLoad.emit(),e.loaded=!0};this.element.addEventListener("load",n),this.element.addEventListener("error",n)},CoreExternalContentDirective}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=(t(203),function(){function CoreRatingProvider(e,n,t,o,r,i){this.appProvider=e,this.eventsProvider=n,this.sitesProvider=t,this.userProvider=o,this.utils=r,this.ratingOffline=i,this.ROOT_CACHE_KEY="CoreRating:"}return e=CoreRatingProvider,CoreRatingProvider.prototype.isAddRatingWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_rating_add_rating")},CoreRatingProvider.prototype.addRating=function(n,t,o,r,i,l,s,a,u,d,c,p){var f=this;p=p||this.sitesProvider.getCurrentSiteId();var h=function(){return f.ratingOffline.addRating(n,t,o,r,i,l,s,a,u,d,c,p).then(function(){return f.eventsProvider.trigger(e.RATING_SAVED_EVENT,{component:n,ratingArea:t,contextLevel:o,instanceId:r,itemSetId:l,itemId:i},p),null})};return this.appProvider.isOnline()?this.ratingOffline.deleteRating(n,t,o,r,i,p).then(function(){return f.addRatingOnline(n,t,o,r,i,a,u,d,c,p).catch(function(e){return f.utils.isWebServiceError(e)?Promise.reject(e):h()})}):h()},CoreRatingProvider.prototype.addRatingOnline=function(n,t,o,r,i,l,s,a,u,d){var c=this;return this.sitesProvider.getSite(d).then(function(d){return d.write("core_rating_add_rating",{contextlevel:o,instanceid:r,component:n,ratingarea:t,itemid:i,scaleid:l,rating:s,rateduserid:a,aggregation:u}).then(function(s){return c.invalidateRatingItems(o,r,n,t,i,l).then(function(){return c.eventsProvider.trigger(e.AGGREGATE_CHANGED_EVENT,{contextLevel:o,instanceId:r,component:n,ratingArea:t,itemId:i,aggregate:s.aggregate,count:s.count}),s})})})},CoreRatingProvider.prototype.getItemRatings=function(e,n,t,r,i,l,s,a,u,d){var c=this;return void 0===s&&(s="timemodified"),void 0===d&&(d=!1),this.sitesProvider.getSite(u).then(function(u){var p={contextlevel:e,instanceid:n,component:t,ratingarea:r,itemid:i,scaleid:l,sort:s},f={cacheKey:c.getItemRatingsCacheKey(e,n,t,r,i,l,s),updateFrequency:o.a.FREQUENCY_RARELY};return d&&(f.getFromCache=!1,f.emergencyCache=!1),u.read("core_rating_get_item_ratings",p,f).then(function(e){if(!e||!e.ratings)return Promise.reject(null);var n=e.ratings.map(function(e){return c.userProvider.getProfile(e.userid,a,!0,u.id).then(function(n){e.userpictureurl=n.profileimageurl}).catch(function(){e.userpictureurl=null})});return Promise.all(n).then(function(){return e.ratings})})})},CoreRatingProvider.prototype.invalidateRatingItems=function(e,n,t,o,r,i,l,s){var a=this;return void 0===l&&(l="timemodified"),this.sitesProvider.getSite(s).then(function(s){var u=a.getItemRatingsCacheKey(e,n,t,o,r,i,l);return s.invalidateWsCacheForKey(u)})},CoreRatingProvider.prototype.isRatingDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_CoreRating")},CoreRatingProvider.prototype.isRatingDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isRatingDisabledInSite(e)})},CoreRatingProvider.prototype.mergeRatingInfos=function(e){var n=null,t={},o={};return e.forEach(function(e){e&&(n||(n=Object.assign({},e)),(e.scales||[]).forEach(function(e){t[e.id]=e}),(e.ratings||[]).forEach(function(e){o[e.itemid]=e}))}),n&&(n.scales=this.utils.objectToArray(t),n.ratings=this.utils.objectToArray(o)),n},CoreRatingProvider.prototype.prefetchRatings=function(e,n,t,o,r,i){var l=this;return r&&r.ratings?this.sitesProvider.getSite(i).then(function(i){var s=r.ratings.map(function(s){return l.getItemRatings(e,n,r.component,r.ratingarea,s.itemid,t,void 0,o,i.id,!0).then(function(e){var n=e.map(function(e){return e.userid});return l.userProvider.prefetchProfiles(n,o,i.id)})});return Promise.all(s)}):Promise.resolve()},CoreRatingProvider.prototype.getItemRatingsCacheKey=function(e,n,t,o,r,i,l){return""+this.ROOT_CACHE_KEY+e+":"+n+":"+t+":"+o+":"+r+":"+i+":"+l},CoreRatingProvider.AGGREGATE_NONE=0,CoreRatingProvider.AGGREGATE_AVERAGE=1,CoreRatingProvider.AGGREGATE_COUNT=2,CoreRatingProvider.AGGREGATE_MAXIMUM=3,CoreRatingProvider.AGGREGATE_MINIMUM=4,CoreRatingProvider.AGGREGATE_SUM=5,CoreRatingProvider.UNSET_RATING=-999,CoreRatingProvider.AGGREGATE_CHANGED_EVENT="core_rating_aggregate_changed",CoreRatingProvider.RATING_SAVED_EVENT="core_rating_rating_saved",CoreRatingProvider;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreSiteHomeProvider(e,n,t,o){this.sitesProvider=n,this.courseProvider=t,this.forumProvider=o,this.logger=e.getInstance("CoreSiteHomeProvider")}return CoreSiteHomeProvider.prototype.getNewsForum=function(e){return this.forumProvider.getCourseForums(e).then(function(e){for(var n=0;n<e.length;n++)if("news"==e[n].type)return e[n];return Promise.reject(null)})},CoreSiteHomeProvider.prototype.invalidateNewsForum=function(e){return this.forumProvider.invalidateForumData(e)},CoreSiteHomeProvider.prototype.isAvailable=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){if(n.isDisabledInSite(e))return!1;var t=e.getSiteHomeId();return n.logger.debug("Using WS call to check if site home is available."),n.courseProvider.getSections(t,!1,!0,{emergencyCache:!1},e.id).then(function(e){if(!e||!e.length)return Promise.reject(null);for(var n=0;n<e.length;n++){var t=e[n];if(t.summary||t.modules&&t.modules.length)return!0}return Promise.reject(null)}).catch(function(){var n=e.getStoredConfig();if(n&&n.frontpageloggedin){if(n.frontpageloggedin.split(",").length>0)return!0}return!1})}).catch(function(){return!1})},CoreSiteHomeProvider.prototype.isDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isDisabledInSite(e)})},CoreSiteHomeProvider.prototype.isDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_CoreSiteHome")},CoreSiteHomeProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(136),r=function(){function AddonModForumOfflineProvider(n,t,o){this.fileProvider=n,this.sitesProvider=t,this.textUtils=o,this.siteSchema={name:"AddonModForumOfflineProvider",version:1,tables:[{name:e.DISCUSSIONS_TABLE,columns:[{name:"forumid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"subject",type:"TEXT"},{name:"message",type:"TEXT"},{name:"options",type:"TEXT"},{name:"groupid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["forumid","userid","timecreated"]},{name:e.REPLIES_TABLE,columns:[{name:"postid",type:"INTEGER"},{name:"discussionid",type:"INTEGER"},{name:"forumid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"subject",type:"TEXT"},{name:"message",type:"TEXT"},{name:"options",type:"TEXT"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["postid","userid"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModForumOfflineProvider,AddonModForumOfflineProvider.prototype.deleteNewDiscussion=function(n,t,o,r){return this.sitesProvider.getSite(o).then(function(o){var i={forumid:n,userid:r||o.getUserId(),timecreated:t};return o.getDb().deleteRecords(e.DISCUSSIONS_TABLE,i)})},AddonModForumOfflineProvider.prototype.getNewDiscussion=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){var l={forumid:n,userid:r||o.getUserId(),timecreated:t};return o.getDb().getRecord(e.DISCUSSIONS_TABLE,l).then(function(e){return e.options=i.textUtils.parseJSON(e.options),e})})},AddonModForumOfflineProvider.prototype.getAllNewDiscussions=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.DISCUSSIONS_TABLE).then(t.parseRecordOptions.bind(t))})},AddonModForumOfflineProvider.prototype.hasNewDiscussions=function(e,n,t){return this.getNewDiscussions(e,n,t).then(function(e){return!!e.length}).catch(function(){return!1})},AddonModForumOfflineProvider.prototype.getNewDiscussions=function(n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={forumid:n,userid:o||t.getUserId()};return t.getDb().getRecords(e.DISCUSSIONS_TABLE,i).then(r.parseRecordOptions.bind(r))})},AddonModForumOfflineProvider.prototype.addNewDiscussion=function(n,t,r,i,l,s,a,u,d,c){return this.sitesProvider.getSite(d).then(function(d){var p={forumid:n,name:t,courseid:r,subject:i,message:l,options:JSON.stringify(s||{}),groupid:a||o.a.ALL_PARTICIPANTS,userid:c||d.getUserId(),timecreated:u||(new Date).getTime()};return d.getDb().insertRecord(e.DISCUSSIONS_TABLE,p)})},AddonModForumOfflineProvider.prototype.deleteReply=function(n,t,o){return this.sitesProvider.getSite(t).then(function(t){var r={postid:n,userid:o||t.getUserId()};return t.getDb().deleteRecords(e.REPLIES_TABLE,r)})},AddonModForumOfflineProvider.prototype.getAllReplies=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.REPLIES_TABLE).then(t.parseRecordOptions.bind(t))})},AddonModForumOfflineProvider.prototype.hasForumReplies=function(e,n,t){return this.getForumReplies(e,n,t).then(function(e){return!!e.length}).catch(function(){return!1})},AddonModForumOfflineProvider.prototype.getForumReplies=function(n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={forumid:n,userid:o||t.getUserId()};return t.getDb().getRecords(e.REPLIES_TABLE,i).then(r.parseRecordOptions.bind(r))})},AddonModForumOfflineProvider.prototype.hasDiscussionReplies=function(e,n,t){return this.getDiscussionReplies(e,n,t).then(function(e){return!!e.length}).catch(function(){return!1})},AddonModForumOfflineProvider.prototype.getDiscussionReplies=function(n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={discussionid:n,userid:o||t.getUserId()};return t.getDb().getRecords(e.REPLIES_TABLE,i).then(r.parseRecordOptions.bind(r))})},AddonModForumOfflineProvider.prototype.replyPost=function(n,t,o,r,i,l,s,a,u,d){return this.sitesProvider.getSite(u).then(function(u){var c={postid:n,discussionid:t,forumid:o,name:r,courseid:i,subject:l,message:s,options:JSON.stringify(a||{}),userid:d||u.getUserId(),timecreated:(new Date).getTime()};return u.getDb().insertRecord(e.REPLIES_TABLE,c)})},AddonModForumOfflineProvider.prototype.getForumFolder=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=t.fileProvider.getSiteFolder(n.getId());return t.textUtils.concatenatePaths(o,"offlineforum/"+e)})},AddonModForumOfflineProvider.prototype.getNewDiscussionFolder=function(e,n,t){var o=this;return this.getForumFolder(e,t).then(function(e){return o.textUtils.concatenatePaths(e,"newdisc_"+n)})},AddonModForumOfflineProvider.prototype.getReplyFolder=function(e,n,t,o){var r=this;return this.getForumFolder(e,t).then(function(e){return r.sitesProvider.getSite(t).then(function(t){return o=o||t.getUserId(),r.textUtils.concatenatePaths(e,"reply_"+n+"_"+o)})})},AddonModForumOfflineProvider.prototype.parseRecordOptions=function(e){var n=this;return e.forEach(function(e){e.options=n.textUtils.parseJSON(e.options)}),e},AddonModForumOfflineProvider.DISCUSSIONS_TABLE="addon_mod_forum_discussions",AddonModForumOfflineProvider.REPLIES_TABLE="addon_mod_forum_replies",AddonModForumOfflineProvider;var e}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return AddonModScormProvider});var __WEBPACK_IMPORTED_MODULE_0_tslib__=__webpack_require__(0),__WEBPACK_IMPORTED_MODULE_1__angular_core__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_2__ngx_translate_core__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_3__providers_events__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_4__providers_filepool__=__webpack_require__(18),__WEBPACK_IMPORTED_MODULE_5__providers_logger__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_6__providers_sites__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_7__providers_sync__=__webpack_require__(82),__WEBPACK_IMPORTED_MODULE_8__providers_ws__=__webpack_require__(172),__WEBPACK_IMPORTED_MODULE_9__providers_utils_text__=__webpack_require__(12),__WEBPACK_IMPORTED_MODULE_10__providers_utils_time__=__webpack_require__(25),__WEBPACK_IMPORTED_MODULE_11__providers_utils_utils__=__webpack_require__(3),__WEBPACK_IMPORTED_MODULE_12__scorm_offline__=__webpack_require__(264),__WEBPACK_IMPORTED_MODULE_13__classes_site__=__webpack_require__(54),__WEBPACK_IMPORTED_MODULE_14__core_constants__=__webpack_require__(42),__WEBPACK_IMPORTED_MODULE_15__core_course_providers_log_helper__=__webpack_require__(66),AddonModScormProvider=function(){function AddonModScormProvider(e,n,t,o,r,i,l,s,a,u,d,c){this.translate=n,this.sitesProvider=t,this.wsProvider=o,this.textUtils=r,this.utils=i,this.filepoolProvider=l,this.scormOfflineProvider=s,this.timeUtils=a,this.syncProvider=u,this.eventsProvider=d,this.logHelper=c,this.VALID_STATUSES=["notattempted","passed","completed","failed","incomplete","browsed","suspend"],this.STATUSES={passed:"passed",completed:"completed",failed:"failed",incomplete:"incomplete",browsed:"browsed","not attempted":"notattempted",p:"passed",c:"completed",f:"failed",i:"incomplete",b:"browsed",n:"notattempted"},this.ROOT_CACHE_KEY="mmaModScorm:",this.logger=e.getInstance("AddonModScormProvider")}return AddonModScormProvider_1=AddonModScormProvider,AddonModScormProvider.prototype.calculateScormGrade=function(e,n){if(!n||!Object.keys(n).length)return-1;switch(e.whatgrade){case AddonModScormProvider_1.FIRSTATTEMPT:return n[1]?n[1].grade:-1;case AddonModScormProvider_1.LASTATTEMPT:var t=0;return Object.keys(n).forEach(function(e){t=Math.max(Number(e),t)}),t>0?n[t].grade:-1;case AddonModScormProvider_1.HIGHESTATTEMPT:var o=0;for(var r in n)o=Math.max(n[r].grade,o);return o;case AddonModScormProvider_1.AVERAGEATTEMPT:var i=0,l=0;for(var r in n)i+=n[r].grade,l++;return Math.round(i/l);default:return-1}},AddonModScormProvider.prototype.calculateScormSize=function(e){return e.packagesize?Promise.resolve(e.packagesize):this.wsProvider.getRemoteFileSize(this.getPackageUrl(e))},AddonModScormProvider.prototype.countAttemptsLeft=function(e,n){return 0==e.maxattempt?Number.MAX_VALUE:(n=Number(n),isNaN(n)?-1:e.maxattempt-n)},AddonModScormProvider.prototype.determineAttemptAndMode=function(e,n,t,o,r){if(n==AddonModScormProvider_1.MODEBROWSE){if(!e.hidebrowse)return 0==t&&(t=1,o=!0),{mode:n,attempt:t,newAttempt:o};n=AddonModScormProvider_1.MODENORMAL}return e.forcenewattempt==AddonModScormProvider_1.SCORM_FORCEATTEMPT_ALWAYS?{mode:AddonModScormProvider_1.MODENORMAL,attempt:t+1,newAttempt:!0}:(0==t?o=!0:r?o=!1:e.forcenewattempt&&(o=!0),o&&(0==e.maxattempt||t<e.maxattempt)?(t++,n=AddonModScormProvider_1.MODENORMAL):n=r?AddonModScormProvider_1.MODENORMAL:AddonModScormProvider_1.MODEREVIEW,{mode:n,attempt:t,newAttempt:o})},AddonModScormProvider.prototype.displayTocInPlayer=function(e){return 3!==e.hidetoc},AddonModScormProvider.prototype.evalPrerequisites=function(prerequisites,trackData){var _this=this,stack=[];prerequisites=prerequisites.replace(/&amp;/gi,"&"),prerequisites=prerequisites.replace(/(&|\||\(|\)|\~)/gi,"\t$1\t"),prerequisites=prerequisites.replace(/&/gi,"&&"),prerequisites=prerequisites.replace(/\|/gi,"||");var elements=prerequisites.trim().split("\t");return elements.forEach(function(e){if(e=e.trim()){if(!e.match(/^(&&|\|\||\(|\))$/gi)){var n=/^(\d+)\*\{(.+)\}$/,t=/^(.+)(\=|\<\>)(.+)$/,o=void 0;if(n.test(e)){var r=(o=e.match(n))[1],i=0;o[2].split(",").forEach(function(e){e=e.trim(),void 0===trackData[e]||"completed"!=trackData[e].status&&"passed"!=trackData[e].status||i++}),e=i>=r?"true":"false"}else if("~"==e)e="!";else if(t.test(e))if(o=e.match(t),e=o[1].trim(),void 0!==trackData[e]){var l=o[3].trim().replace(/(\'|\")/gi);void 0!==_this.STATUSES[l]&&(l=_this.STATUSES[l]),e="('"+trackData[e].status+"' "+("<>"==o[2]?"!=":"==")+" '"+l+"')"}else e="false";else e=void 0===trackData[e]||"completed"!=trackData[e].status&&"passed"!=trackData[e].status?"false":"true"}stack.push(" "+e+" ")}}),eval(stack.join("")+";")},AddonModScormProvider.prototype.formatGrade=function(e,n){return void 0===n||-1==n?this.translate.instant("core.none"):e.grademethod!==AddonModScormProvider_1.GRADESCOES&&e.maxgrade>0?(n=n/e.maxgrade*100,this.translate.instant("core.percentagenumber",{$a:this.textUtils.roundToDecimals(n,2)})):String(n)},AddonModScormProvider.prototype.formatTocToArray=function(e,n){var t=this;if(void 0===n&&(n=0),!e||!e.length)return[];var o=[];return e.forEach(function(e){e.level=n,o.push(e),o=o.concat(t.formatTocToArray(e.children,n+1))}),o},AddonModScormProvider.prototype.getAccessInformation=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){if(!t.wsAvailable("mod_scorm_get_scorm_access_information"))return Promise.resolve({});var r={scormid:e},i={cacheKey:o.getAccessInformationCacheKey(e),omitExpires:n};return t.read("mod_scorm_get_scorm_access_information",r,i)})},AddonModScormProvider.prototype.getAccessInformationCacheKey=function(e){return this.ROOT_CACHE_KEY+"accessInfo:"+e},AddonModScormProvider.prototype.getAttemptCount=function(e,n,t,o,r){var i=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(o).then(function(l){r=r||l.getUserId();var s={lastAttempt:{number:0,offline:!1}},a=[];return a.push(i.getAttemptCountOnline(e,n,t,o,r).then(function(e){s.online=[];for(var n=1;n<=e;n++)s.online.push(n);e>s.lastAttempt.number&&(s.lastAttempt.number=e,s.lastAttempt.offline=!1)})),a.push(i.scormOfflineProvider.getAttempts(e,o,r).then(function(e){s.offline=e.map(function(e){return e.attempt>=s.lastAttempt.number&&(s.lastAttempt.number=e.attempt,s.lastAttempt.offline=!0),e.attempt})})),Promise.all(a).then(function(){var e=s.online.length;return s.offline.forEach(function(n){-1==s.online.indexOf(n)&&e++}),s.total=e,s})})},AddonModScormProvider.prototype.getAttemptCountCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"attemptcount:"+e+":"+n},AddonModScormProvider.prototype.getAttemptCountOnline=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){r=r||o.getUserId();var l={scormid:e,userid:r,ignoremissingcompletion:n?1:0},s={cacheKey:i.getAttemptCountCacheKey(e,r),updateFrequency:__WEBPACK_IMPORTED_MODULE_13__classes_site__.a.FREQUENCY_SOMETIMES};return t&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("mod_scorm_get_scorm_attempt_count",l,s).then(function(e){return e&&void 0!==e.attemptscount?e.attemptscount:Promise.reject(null)})})},AddonModScormProvider.prototype.getAttemptGrade=function(e,n,t,o){var r={scos:0,values:0,max:0,sum:0};return this.getScormUserData(e.id,n,void 0,t,!1,o).then(function(n){for(var t in n){var o=n[t].userdata;if("completed"!=o.status&&"passed"!=o.status||r.scos++,o.score_raw||void 0!==e.scormtype&&"sco"==e.scormtype&&void 0!==o.score_raw){var i=parseFloat(o.score_raw);r.values++,r.sum+=i,r.max=Math.max(i,r.max)}}var l=0;switch(e.grademethod){case AddonModScormProvider_1.GRADEHIGHEST:l=r.max;break;case AddonModScormProvider_1.GRADEAVERAGE:l=r.values>0?r.sum/r.values:0;break;case AddonModScormProvider_1.GRADESUM:l=r.sum;break;case AddonModScormProvider_1.GRADESCOES:l=r.scos;break;default:l=r.max}return l})},AddonModScormProvider.prototype.getOrganizations=function(e,n){return this.getScos(e,void 0,!1,n).then(function(e){var n=[];return e.forEach(function(e){""==e.organization&&"/"==e.parent&&""==e.scormtype&&n.push({identifier:e.identifier,title:e.title,sortorder:e.sortorder})}),n})},AddonModScormProvider.prototype.getOrganizationToc=function(e,n,t,o,r){return this.getScosWithData(e,n,t,o,!1,r).then(function(e){var n={},o=[];return e.forEach(function(r,i){r.children=[],n[r.identifier]=i,"/"!==r.parent&&(r.parent==t?o.push(r):e[n[r.parent]].children.push(r))}),o})},AddonModScormProvider.prototype.getPackageUrl=function(e){return e.packageurl?e.packageurl:e.reference?e.reference:""},AddonModScormProvider.prototype.getScormUserData=function(e,n,t,o,r,i){var l=this;if(i=i||this.sitesProvider.getCurrentSiteId(),o){return(t?Promise.resolve(t):this.getScos(e,void 0,void 0,i)).then(function(t){return l.scormOfflineProvider.getScormUserData(e,n,t,i)})}return this.getScormUserDataOnline(e,n,r,i)},AddonModScormProvider.prototype.getScormUserDataCacheKey=function(e,n){return this.getScormUserDataCommonCacheKey(e)+":"+n},AddonModScormProvider.prototype.getScormUserDataCommonCacheKey=function(e){return this.ROOT_CACHE_KEY+"userdata:"+e},AddonModScormProvider.prototype.getScormUserDataOnline=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={scormid:e,attempt:n},l={cacheKey:r.getScormUserDataCacheKey(e,n)};return t&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_scorm_get_scorm_user_data",i,l).then(function(e){if(e&&e.data){var n={};return e.data.forEach(function(e){e.defaultdata=r.utils.objectToKeyValueMap(e.defaultdata,"element","value"),e.userdata=r.utils.objectToKeyValueMap(e.userdata,"element","value"),n[e.scoid]=e}),n}return Promise.reject(null)})})},AddonModScormProvider.prototype.getScosCacheKey=function(e){return this.ROOT_CACHE_KEY+"scos:"+e},AddonModScormProvider.prototype.getScos=function(e,n,t,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(o).then(function(o){var i={scormid:e},l={cacheKey:r.getScosCacheKey(e),updateFrequency:__WEBPACK_IMPORTED_MODULE_13__classes_site__.a.FREQUENCY_SOMETIMES};return t&&(l.getFromCache=!1,l.emergencyCache=!1),o.read("mod_scorm_get_scorm_scoes",i,l).then(function(e){return e&&e.scoes?n?e.scoes.filter(function(e){return e.organization==n}):e.scoes:Promise.reject(null)})})},AddonModScormProvider.prototype.getScosWithData=function(e,n,t,o,r,i){var l=this;return this.getScos(e,t,r,i).then(function(t){return l.getScormUserData(e,n,t,o,r,i).then(function(e){var n={};return t.forEach(function(t){n[t.identifier]=e[t.id].userdata}),t.forEach(function(t){var o=e[t.id].userdata;o&&(t.isvisible=void 0===o.isvisible||o.isvisible&&"false"!==o.isvisible,t.prereq=void 0===o.prerequisites||l.evalPrerequisites(o.prerequisites,n),t.status=void 0===o.status||""===o.status?"notattempted":o.status,t.exitvar=void 0===o.exitvar?"cmi.core.exit":o.exitvar,t.exitvalue=o[t.exitvar],t.score_raw=o.score_raw)}),t})})},AddonModScormProvider.prototype.getScoSrc=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r,i=n.launch;if(n.extradata&&n.extradata.length)for(var l=0;l<n.extradata.length;l++){var s=n.extradata[l];if("parameters"==s.element){r=s.value;break}}if(r){var a=i.indexOf("?")>-1?"&":"?";"?"==r.charAt(0)&&(r=r.substr(1)),i+=a+r}return this.isExternalLink(i)?Promise.resolve(i):this.filepoolProvider.getPackageDirUrlByUrl(t,e.moduleurl).then(function(e){return o.textUtils.concatenatePaths(e,i)})},AddonModScormProvider.prototype.getScormFolder=function(e,n){return n=n||this.sitesProvider.getCurrentSiteId(),this.filepoolProvider.getPackageDirPathByUrl(n,e)},AddonModScormProvider.prototype.getScormFileList=function(e){var n=[];return this.isScormUnsupported(e)||e.warningMessage||n.push({fileurl:this.getPackageUrl(e),filepath:"/",filename:e.reference,filesize:e.packagesize,type:"file",timemodified:0}),n},AddonModScormProvider.prototype.getScoStatusIcon=function(e,n){var t="",o="",r="",i=e.status;return e.isvisible&&(this.VALID_STATUSES.indexOf(i)>=0?("sco"==e.scormtype?(t=i,o=i):(t="asset",o="assetlaunched"),n||(n=this.isStatusIncomplete(i)),n&&"suspend"==e.exitvalue&&(t="suspend",r=" - "+this.translate.instant("addon.mod_scorm.suspended"))):(n=!0,o=t="sco"==e.scormtype?"notattempted":"asset")),""==t&&(t="notattempted",o="notattempted",r=""),e.incomplete=n,{icon:AddonModScormProvider_1.STATUS_TO_ICON[t],description:this.translate.instant("addon.mod_scorm."+o)+r}},AddonModScormProvider.prototype.getScormDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"scorm:"+e},AddonModScormProvider.prototype.getScormByField=function(e,n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={courseids:[e]},a={cacheKey:l.getScormDataCacheKey(e),updateFrequency:__WEBPACK_IMPORTED_MODULE_13__classes_site__.a.FREQUENCY_RARELY};return r&&(a.omitExpires=!0),i.read("mod_scorm_get_scorms_by_courses",s,a).then(function(e){if(e&&e.scorms){var r=e.scorms.find(function(e){return e[n]==t});if(r){if(void 0===r.timeopen)for(var i in e.warnings){var l=e.warnings[i];if(l.itemid===r.id){r.warningMessage=l.message;break}}return r.moduleurl=o,r}}return Promise.reject(null)})})},AddonModScormProvider.prototype.getScorm=function(e,n,t,o,r){return this.getScormByField(e,"coursemodule",n,t,o,r)},AddonModScormProvider.prototype.getScormById=function(e,n,t,o,r){return this.getScormByField(e,"id",n,t,o,r)},AddonModScormProvider.prototype.getScormGradeMethod=function(e){if(1==e.maxattempt)switch(parseInt(e.grademethod,10)){case AddonModScormProvider_1.GRADEHIGHEST:return this.translate.instant("addon.mod_scorm.gradehighest");case AddonModScormProvider_1.GRADEAVERAGE:return this.translate.instant("addon.mod_scorm.gradeaverage");case AddonModScormProvider_1.GRADESUM:return this.translate.instant("addon.mod_scorm.gradesum");case AddonModScormProvider_1.GRADESCOES:return this.translate.instant("addon.mod_scorm.gradescoes");default:return""}else switch(parseInt(e.whatgrade,10)){case AddonModScormProvider_1.HIGHESTATTEMPT:return this.translate.instant("addon.mod_scorm.highestattempt");case AddonModScormProvider_1.AVERAGEATTEMPT:return this.translate.instant("addon.mod_scorm.averageattempt");case AddonModScormProvider_1.FIRSTATTEMPT:return this.translate.instant("addon.mod_scorm.firstattempt");case AddonModScormProvider_1.LASTATTEMPT:return this.translate.instant("addon.mod_scorm.lastattempt");default:return""}},AddonModScormProvider.prototype.invalidateAccessInformation=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getAccessInformationCacheKey(e))})},AddonModScormProvider.prototype.invalidateAllScormData=function(e,n,t){var o=[];return o.push(this.invalidateAttemptCount(e,n,t)),o.push(this.invalidateScos(e,n)),o.push(this.invalidateScormUserData(e,n)),o.push(this.invalidateAccessInformation(e,n)),Promise.all(o)},AddonModScormProvider.prototype.invalidateAttemptCount=function(e,n,t){var o=this;return this.sitesProvider.getSite(n).then(function(n){return t=t||n.getUserId(),n.invalidateWsCacheForKey(o.getAttemptCountCacheKey(e,t))})},AddonModScormProvider.prototype.invalidateContent=function(e,n,t,o){var r=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getScorm(n,e,void 0,!1,t).then(function(n){var i=[];return i.push(r.invalidateAllScormData(n.id,t,o)),i.push(r.filepoolProvider.invalidateFilesByComponent(t,AddonModScormProvider_1.COMPONENT,e,!0)),Promise.all(i)})},AddonModScormProvider.prototype.invalidateScormData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getScormDataCacheKey(e))})},AddonModScormProvider.prototype.invalidateScormUserData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getScormUserDataCommonCacheKey(e))})},AddonModScormProvider.prototype.invalidateScos=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getScosCacheKey(e))})},AddonModScormProvider.prototype.isAttemptIncomplete=function(e,n,t,o,r){var i=this;return this.getScosWithData(e,n,void 0,t,o,r).then(function(e){for(var n in e){var t=e[n];if(t.isvisible&&t.launch&&i.isStatusIncomplete(t.status))return!0}return!1})},AddonModScormProvider.prototype.isExternalLink=function(e){return!!(e=e.toLowerCase()).match(/https?:\/\//)||"www."==e.substr(0,4)},AddonModScormProvider.prototype.isScormClosed=function(e){var n=this.timeUtils.timestamp();return e.timeclose>0&&n>e.timeclose},AddonModScormProvider.prototype.isScormDownloadable=function(e){return void 0!==e.protectpackagedownloads&&!1===e.protectpackagedownloads},AddonModScormProvider.prototype.isScormOpen=function(e){var n=this.timeUtils.timestamp();return!(e.timeopen>0&&e.timeopen>n)},AddonModScormProvider.prototype.isScormUnsupported=function(e){return this.isScormValidVersion(e)?this.isScormDownloadable(e)?this.isValidPackageUrl(this.getPackageUrl(e))?void 0:"addon.mod_scorm.errorpackagefile":"addon.mod_scorm.errornotdownloadable":"addon.mod_scorm.errorinvalidversion"},AddonModScormProvider.prototype.isScormValidVersion=function(e){return"SCORM_1.2"==e.version},AddonModScormProvider.prototype.isStatusIncomplete=function(e){return!e||"notattempted"==e||"incomplete"==e||"browsed"==e},AddonModScormProvider.prototype.isValidPackageUrl=function(e){return!!e&&!(e.indexOf("imsmanifest.xml")>-1)},AddonModScormProvider.prototype.logLaunchSco=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(i){return r.logHelper.logSingle("mod_scorm_launch_sco",{scormid:e,scoid:n},AddonModScormProvider_1.COMPONENT,e,t,"scorm",{scoid:n},o)})},AddonModScormProvider.prototype.logView=function(e,n,t){return this.logHelper.logSingle("mod_scorm_view_scorm",{scormid:e},AddonModScormProvider_1.COMPONENT,e,n,"scorm",{},t)},AddonModScormProvider.prototype.saveTracks=function(e,n,t,o,r,i,l){var s=this;if(l=l||this.sitesProvider.getCurrentSiteId(),r){return(i?Promise.resolve(i):this.getScormUserData(o.id,n,void 0,r,!1,l)).then(function(r){return s.scormOfflineProvider.saveTracks(o,e,n,t,r,l)})}return this.saveTracksOnline(o.id,e,n,t,l).then(function(){s.updateUserDataAfterSave(o.id,n,t,l),s.eventsProvider.trigger(AddonModScormProvider_1.DATA_SENT_EVENT,{scormId:o.id,scoId:e,attempt:n},s.sitesProvider.getCurrentSiteId())})},AddonModScormProvider.prototype.saveTracksOnline=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){if(!o||!o.length)return Promise.resolve();var l={scoid:n,attempt:t,tracks:o};return i.syncProvider.blockOperation(AddonModScormProvider_1.COMPONENT,e,"saveTracksOnline",r.id),r.write("mod_scorm_insert_scorm_tracks",l).then(function(e){return e&&e.trackids?e.trackids:Promise.reject(null)}).finally(function(){i.syncProvider.unblockOperation(AddonModScormProvider_1.COMPONENT,e,"saveTracksOnline",r.id)})})},AddonModScormProvider.prototype.saveTracksSync=function(e,n,t,o,r,i){if(r)return this.scormOfflineProvider.saveTracksSync(o,e,n,t,i);var l=this.saveTracksSyncOnline(e,n,t);return l&&(this.updateUserDataAfterSave(o.id,n,t),this.eventsProvider.trigger(AddonModScormProvider_1.DATA_SENT_EVENT,{scormId:o.id,scoId:e,attempt:n},this.sitesProvider.getCurrentSiteId())),l},AddonModScormProvider.prototype.saveTracksSyncOnline=function(e,n,t){var o,r={scoid:e,attempt:n,tracks:t},i=this.sitesProvider.getCurrentSite(),l={siteUrl:i.getURL(),wsToken:i.getToken()},s="mod_scorm_insert_scorm_tracks";if(!t||!t.length)return!0;if(!i.wsAvailable(s,!1)){if(!i.wsAvailable(__WEBPACK_IMPORTED_MODULE_14__core_constants__.a.WS_PREFIX+s,!1))return this.logger.error('WS function "'+s+'" is not available, even in compatibility mode.'),!1;s=__WEBPACK_IMPORTED_MODULE_14__core_constants__.a.WS_PREFIX+s}return!(!(o=this.wsProvider.syncCall(s,r,l))||o.error||!o.trackids)},AddonModScormProvider.prototype.shouldDownloadMainFile=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId();var o=AddonModScormProvider_1.COMPONENT;return void 0===n?this.filepoolProvider.getPackageData(t,o,e.coursemodule).then(function(n){return!(n.status==__WEBPACK_IMPORTED_MODULE_14__core_constants__.a.OUTDATED||n.status==__WEBPACK_IMPORTED_MODULE_14__core_constants__.a.DOWNLOADING&&n.previous==__WEBPACK_IMPORTED_MODULE_14__core_constants__.a.OUTDATED)||n.extra!=e.sha1hash}).catch(function(){return!0}):n?this.filepoolProvider.getPackageExtra(t,o,e.coursemodule).then(function(n){return e.sha1hash!=n}).catch(function(){return!0}):Promise.resolve(!0)},AddonModScormProvider.prototype.updateUserDataAfterSave=function(e,n,t,o){if(!t||!t.length)return Promise.resolve();for(var r=!1,i=0,l=t.length;i<l;i++){var s=t[i];if(s.element&&s.element.indexOf(".")>-1){r=!0;break}}return r?this.getScormUserDataOnline(e,n,!0,o):Promise.resolve()},AddonModScormProvider.COMPONENT="mmaModScorm",AddonModScormProvider.GRADESCOES=0,AddonModScormProvider.GRADEHIGHEST=1,AddonModScormProvider.GRADEAVERAGE=2,AddonModScormProvider.GRADESUM=3,AddonModScormProvider.HIGHESTATTEMPT=0,AddonModScormProvider.AVERAGEATTEMPT=1,AddonModScormProvider.FIRSTATTEMPT=2,AddonModScormProvider.LASTATTEMPT=3,AddonModScormProvider.MODEBROWSE="browse",AddonModScormProvider.MODENORMAL="normal",AddonModScormProvider.MODEREVIEW="review",AddonModScormProvider.SCORM_FORCEATTEMPT_NO=0,AddonModScormProvider.SCORM_FORCEATTEMPT_ONCOMPLETE=1,AddonModScormProvider.SCORM_FORCEATTEMPT_ALWAYS=2,AddonModScormProvider.SKIPVIEW_NEVER=0,AddonModScormProvider.SKIPVIEW_FIRST=1,AddonModScormProvider.SKIPVIEW_ALWAYS=2,AddonModScormProvider.LAUNCH_NEXT_SCO_EVENT="addon_mod_scorm_launch_next_sco",AddonModScormProvider.LAUNCH_PREV_SCO_EVENT="addon_mod_scorm_launch_prev_sco",AddonModScormProvider.UPDATE_TOC_EVENT="addon_mod_scorm_update_toc",AddonModScormProvider.GO_OFFLINE_EVENT="addon_mod_scorm_go_offline",AddonModScormProvider.DATA_SENT_EVENT="addon_mod_scorm_data_sent",AddonModScormProvider.STATUS_TO_ICON={assetc:"fa-file-archive-o",asset:"fa-file-archive-o",browsed:"fa-book",completed:"fa-check-square-o",failed:"fa-times",incomplete:"fa-pencil-square-o",minus:"fa-minus",notattempted:"fa-square-o",passed:"fa-check",plus:"fa-plus",popdown:"fa-window-close-o",popup:"fa-window-restore",suspend:"fa-pause",wait:"fa-clock-o"},AddonModScormProvider;var AddonModScormProvider_1}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var o=t(10),r=(t(289),t(54)),i=function(){function AddonModWikiProvider(e,n,t,r,i,l,s,a,u){var d=this;this.sitesProvider=n,this.appProvider=t,this.filepoolProvider=r,this.utils=i,this.translate=l,this.wikiOffline=s,this.logHelper=u,this.ROOT_CACHE_KEY="mmaModWiki:",this.subwikiListsCache={},this.logger=e.getInstance("AddonModWikiProvider"),a.on(o.a.LOGIN,function(){d.clearSubwikiList()})}return e=AddonModWikiProvider,AddonModWikiProvider.prototype.clearSubwikiList=function(e){void 0===e?this.subwikiListsCache={}:delete this.subwikiListsCache[e]},AddonModWikiProvider.prototype.editPage=function(e,n,t,o){return this.sitesProvider.getSite(o).then(function(o){var r={pageid:e,content:n};return t&&(r.section=t),o.write("mod_wiki_edit_page",r).then(function(e){return e.pageid||Promise.reject(null)})})},AddonModWikiProvider.prototype.getPageContents=function(e,n,t,o){var i=this;return this.sitesProvider.getSite(o).then(function(o){var l={pageid:e},s={cacheKey:i.getPageContentsCacheKey(e),updateFrequency:r.a.FREQUENCY_SOMETIMES};return n?s.omitExpires=!0:t&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("mod_wiki_get_page_contents",l,s).then(function(e){return e.page||Promise.reject(null)})})},AddonModWikiProvider.prototype.getPageContentsCacheKey=function(e){return this.ROOT_CACHE_KEY+"page:"+e},AddonModWikiProvider.prototype.getPageForEditing=function(e,n,t,o){return this.sitesProvider.getSite(o).then(function(o){var r={pageid:e};return n&&(r.section=n),t&&o.isVersionGreaterEqualThan("3.2")&&(r.lockonly=1),o.write("mod_wiki_get_page_for_editing",r).then(function(e){return e.pagesection||Promise.reject(null)})})},AddonModWikiProvider.prototype.getSubwikiFiles=function(e,n,t,o,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){var a={wikiid:e,groupid:n=n||-1,userid:t=t||0},u={cacheKey:s.getSubwikiFilesCacheKey(e,n,t),updateFrequency:r.a.FREQUENCY_SOMETIMES};return o?u.omitExpires=!0:i&&(u.getFromCache=!1,u.emergencyCache=!1),l.read("mod_wiki_get_subwiki_files",a,u).then(function(e){return e.files||Promise.reject(null)})})},AddonModWikiProvider.prototype.getSubwikiFilesCacheKey=function(e,n,t){return this.getSubwikiFilesCacheKeyPrefix(e)+":"+n+":"+t},AddonModWikiProvider.prototype.getSubwikiFilesCacheKeyPrefix=function(e){return this.ROOT_CACHE_KEY+"subwikifiles:"+e},AddonModWikiProvider.prototype.getSubwikiList=function(e){return this.subwikiListsCache[e]},AddonModWikiProvider.prototype.getSubwikiPages=function(e,n,t,o,i,l,s,a,u){var d=this;return void 0===o&&(o="title"),void 0===i&&(i="ASC"),this.sitesProvider.getSite(u).then(function(u){var c={wikiid:e,groupid:n=n||-1,userid:t=t||0,options:{sortby:o=o||"title",sortdirection:i=i||"ASC",includecontent:(l=l||!1)?1:0}},p={cacheKey:d.getSubwikiPagesCacheKey(e,n,t),updateFrequency:r.a.FREQUENCY_SOMETIMES};return s?p.omitExpires=!0:a&&(p.getFromCache=!1,p.emergencyCache=!1),u.read("mod_wiki_get_subwiki_pages",c,p).then(function(e){return e.pages||Promise.reject(null)})})},AddonModWikiProvider.prototype.getSubwikiPagesCacheKey=function(e,n,t){return this.getSubwikiPagesCacheKeyPrefix(e)+":"+n+":"+t},AddonModWikiProvider.prototype.getSubwikiPagesCacheKeyPrefix=function(e){return this.ROOT_CACHE_KEY+"subwikipages:"+e},AddonModWikiProvider.prototype.getSubwikis=function(e,n,t,o){var i=this;return this.sitesProvider.getSite(o).then(function(o){var l={wikiid:e},s={cacheKey:i.getSubwikisCacheKey(e),updateFrequency:r.a.FREQUENCY_RARELY};return n?s.omitExpires=!0:t&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("mod_wiki_get_subwikis",l,s).then(function(e){return e.subwikis||Promise.reject(null)})})},AddonModWikiProvider.prototype.getSubwikisCacheKey=function(e){return this.ROOT_CACHE_KEY+"subwikis:"+e},AddonModWikiProvider.prototype.getWiki=function(e,n,t,o){return this.getWikiByField(e,"coursemodule",n,t,o)},AddonModWikiProvider.prototype.getWikiByField=function(e,n,t,o,i){var l=this;return this.sitesProvider.getSite(i).then(function(o){var i={courseids:[e]},s={cacheKey:l.getWikiDataCacheKey(e),updateFrequency:r.a.FREQUENCY_RARELY};return o.read("mod_wiki_get_wikis_by_courses",i,s).then(function(e){if(e.wikis){var o=e.wikis.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModWikiProvider.prototype.getWikiById=function(e,n,t,o){return this.getWikiByField(e,"id",n,t,o)},AddonModWikiProvider.prototype.getWikiDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"wiki:"+e},AddonModWikiProvider.prototype.getWikiFileList=function(e,n,t,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=[];return this.getSubwikis(e.id,n,t,o).then(function(e){var l=[];return e.forEach(function(e){l.push(r.getSubwikiFiles(e.wikiid,e.groupid,e.userid,n,t,o).then(function(e){i=i.concat(e)}))}),Promise.all(l).then(function(){return i})})},AddonModWikiProvider.prototype.getWikiPageList=function(e,n,t,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=[];return this.getSubwikis(e.id,n,t,o).then(function(e){var l=[];return e.forEach(function(e){l.push(r.getSubwikiPages(e.wikiid,e.groupid,e.userid,void 0,void 0,void 0,n,t,o).then(function(e){i=i.concat(e)}))}),Promise.all(l).then(function(){return i})})},AddonModWikiProvider.prototype.invalidateContent=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getWiki(n,e,!1,t).then(function(e){var r=[];return r.push(o.invalidateWikiData(n,t)),r.push(o.invalidateSubwikis(e.id,t)),r.push(o.invalidateSubwikiPages(e.id,t)),r.push(o.invalidateSubwikiFiles(e.id,t)),Promise.all(r)})},AddonModWikiProvider.prototype.invalidateFiles=function(n,t){return this.filepoolProvider.invalidateFilesByComponent(t,e.COMPONENT,n)},AddonModWikiProvider.prototype.invalidatePage=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getPageContentsCacheKey(e))})},AddonModWikiProvider.prototype.invalidateSubwikiFiles=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getSubwikiFilesCacheKeyPrefix(e))})},AddonModWikiProvider.prototype.invalidateSubwikiPages=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKeyStartingWith(t.getSubwikiPagesCacheKeyPrefix(e))})},AddonModWikiProvider.prototype.invalidateSubwikis=function(e,n){var t=this;return this.clearSubwikiList(e),this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getSubwikisCacheKey(e))})},AddonModWikiProvider.prototype.invalidateWikiData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getWikiDataCacheKey(e))})},AddonModWikiProvider.prototype.isTitleUsed=function(e,n,t,o,r,i){var l=this;return this.getSubwikis(e,o,r,i).then(function(e){return e.find(function(e){return e.id==n})||Promise.reject(null)}).then(function(n){return l.getSubwikiPages(e,n.groupid,n.userid,void 0,void 0,!1,o,r,i)}).then(function(e){return!!e.find(function(e){return e.title==t})}).catch(function(){return!1})},AddonModWikiProvider.prototype.logPageView=function(n,t,o,r){var i={pageid:n};return this.logHelper.logSingle("mod_wiki_view_page",i,e.COMPONENT,t,o,"wiki",i,r)},AddonModWikiProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_wiki_view_wiki",{wikiid:n},e.COMPONENT,n,t,"wiki",{},o)},AddonModWikiProvider.prototype.newPage=function(e,n,t,o,r,i,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a=function(){return(o?s.isTitleUsed(o,t,e,!0,!1,l).catch(function(){return!1}).then(function(e){if(e)return Promise.reject(s.translate.instant("addon.mod_wiki.pageexists"))}):Promise.resolve()).then(function(){return s.wikiOffline.saveNewPage(e,n,t,o,r,i,l).then(function(){return-1})})};return this.appProvider.isOnline()?this.wikiOffline.deleteNewPage(e,t,o,r,i,l).then(function(){return s.newPageOnline(e,n,t,o,r,i,l).catch(function(e){return s.utils.isWebServiceError(e)?Promise.reject(e):a()})}):a()},AddonModWikiProvider.prototype.newPageOnline=function(e,n,t,o,r,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){var a={title:e,content:n,contentformat:"html"};return t=s.wikiOffline.convertToPositiveNumber(t),o=s.wikiOffline.convertToPositiveNumber(o),t&&t>0?a.subwikiid=t:o&&(a.wikiid=o,a.userid=s.wikiOffline.convertToPositiveNumber(r),a.groupid=s.wikiOffline.convertToPositiveNumber(i)),l.write("mod_wiki_new_page",a).then(function(e){return e.pageid||Promise.reject(null)})})},AddonModWikiProvider.prototype.setSubwikiList=function(e,n,t,o,r,i){this.subwikiListsCache[e]={count:t,subwikiSelected:o,userSelected:r,groupSelected:i,subwikis:n}},AddonModWikiProvider.prototype.sortPagesByTitle=function(e,n){return e.sort(function(e,t){var o=e.title>=t.title?1:-1;return n&&(o=-o),o})},AddonModWikiProvider.prototype.wikiHasSubwiki=function(e,n,t,o,r){return this.getSubwikis(e,t,o,r).then(function(e){return!!e.find(function(e){return e.id==n})}).catch(function(){return!1})},AddonModWikiProvider.COMPONENT="mmaModWiki",AddonModWikiProvider.PAGE_CREATED_EVENT="addon_mod_wiki_page_created",AddonModWikiProvider.RENEW_LOCK_TIME=3e4,AddonModWikiProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(149)),i=(t(231),t(203),this&&this.__assign||Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++){n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),l=function(e){function CoreRatingSyncProvider(n,t,o,r,i,l,s,a,u,d,c){var p=e.call(this,"CoreRatingSyncProvider",r,i,t,l,s,n,a)||this;return p.eventsProvider=o,p.utils=u,p.ratingProvider=d,p.ratingOffline=c,p}return Object(o.__extends)(CoreRatingSyncProvider,e),n=CoreRatingSyncProvider,CoreRatingSyncProvider.prototype.syncRatings=function(e,t,o,r,l,s,a){var u=this;return a=a||this.sitesProvider.getCurrentSiteId(),this.ratingOffline.getItemSets(e,t,o,r,l,a).then(function(o){var r=[],l=o.map(function(o){return(s?u.syncItemSet(e,t,o.contextLevel,o.instanceId,o.itemSetId,a):u.syncItemSetIfNeeded(e,t,o.contextLevel,o.instanceId,o.itemSetId,a)).then(function(e){e.updated&&u.eventsProvider.trigger(n.SYNCED_EVENT,i({},o,{warnings:e.warnings}),a),r.push(i({itemSet:o},e))})});return Promise.all(l).then(function(){return r})})},CoreRatingSyncProvider.prototype.syncItemSetIfNeeded=function(e,n,t,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();var s=this.getItemSetSyncId(e,n,t,o,r);return this.isSyncNeeded(s,i).then(function(s){if(s)return l.syncItemSet(e,n,t,o,r,i)})},CoreRatingSyncProvider.prototype.syncItemSet=function(e,n,t,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();var s=this.getItemSetSyncId(e,n,t,o,r);if(this.isSyncing(s,i))return this.getOngoingSync(s,i);this.logger.debug("Try to sync ratings of component '"+e+"' rating area '"+n+"' context level '"+t+"' instance "+o+" item set "+r);var a=[],u=[];return this.ratingOffline.getRatings(e,n,t,o,r,i).then(function(t){if(t.length){if(!l.appProvider.isOnline())return Promise.reject(null);var o=t.map(function(t){return l.ratingProvider.addRatingOnline(e,n,t.contextlevel,t.instanceid,t.itemid,t.scaleid,t.rating,t.rateduserid,t.aggregation,i).catch(function(e){if(!l.utils.isWebServiceError(e))return Promise.reject(e);u.push(l.textUtils.getErrorMessageFromError(e))}).then(function(){return a.push(t.itemid),l.ratingOffline.deleteRating(e,n,t.contextlevel,t.instanceid,t.itemid,i).finally(function(){return l.ratingProvider.invalidateRatingItems(t.contextlevel,t.instanceid,e,n,t.itemid,t.scaleid,void 0,i)})})});return Promise.all(o).then(function(){return{updated:a,warnings:u}})}})},CoreRatingSyncProvider.prototype.getItemSetSyncId=function(e,n,t,o,r){return"itemSet#"+e+"#"+n+"#"+t+"#"+o+"#"+r},CoreRatingSyncProvider.SYNCED_EVENT="core_rating_synced",CoreRatingSyncProvider;var n}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonModImscpProvider(e,n,t,o,r,i,l){this.appProvider=e,this.courseProvider=n,this.filepoolProvider=t,this.sitesProvider=o,this.textUtils=r,this.utils=i,this.logHelper=l,this.ROOT_CACHE_KEY="mmaModImscp:"}return e=AddonModImscpProvider,AddonModImscpProvider.prototype.getToc=function(e){return e&&e.length?JSON.parse(e[0].content):[]},AddonModImscpProvider.prototype.createItemList=function(e){var n=[];return this.getToc(e).forEach(function(e){n.push({href:e.href,title:e.title,level:e.level}),e.subitems.forEach(function(e){n.push({href:e.href,title:e.title,level:e.level})})}),n},AddonModImscpProvider.prototype.getPreviousItem=function(e,n){var t=this.getItemPosition(e,n);if(-1!=t)for(var o=t-1;o>=0;o--)if(e[o]&&e[o].href)return e[o].href;return""},AddonModImscpProvider.prototype.getNextItem=function(e,n){var t=this.getItemPosition(e,n);if(-1!=t)for(var o=t+1;o<e.length;o++)if(e[o]&&e[o].href)return e[o].href;return""},AddonModImscpProvider.prototype.getItemPosition=function(e,n){for(var t=0;t<e.length;t++)if(e[t].href==n)return t;return-1},AddonModImscpProvider.prototype.checkSpecialFiles=function(e){return"imsmanifest.xml"==e},AddonModImscpProvider.prototype.getImscpDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"imscp:"+e},AddonModImscpProvider.prototype.getImscpByKey=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={courseids:[e]},s={cacheKey:i.getImscpDataCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return r.read("mod_imscp_get_imscps_by_courses",l,s).then(function(e){if(e&&e.imscps){var o=e.imscps.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModImscpProvider.prototype.getImscp=function(e,n,t){return this.getImscpByKey(e,"coursemodule",n,t)},AddonModImscpProvider.prototype.getFileUrlFromContents=function(e,n){var t,o=this;return e.forEach(function(e){if("file"==e.type&&!t){var r=o.textUtils.concatenatePaths(e.filepath,e.filename),i="/"===r.charAt(0)?r.substr(1):"/"+r;r!==n&&i!==n||(t=e.fileurl)}}),t},AddonModImscpProvider.prototype.getIframeSrc=function(e,n){var t=this;if(!n){var o=this.getToc(e.contents);if(!o.length)return Promise.reject(null);n=o[0].href}var r=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getPackageDirUrlByUrl(r,e.url).then(function(e){return t.textUtils.concatenatePaths(e,n)}).catch(function(){if(t.appProvider.isOnline()){var o=t.getFileUrlFromContents(e.contents,n);if(o)return t.sitesProvider.getSite(r).then(function(e){return e.checkAndFixPluginfileURL(o)})}return Promise.reject(null)})},AddonModImscpProvider.prototype.invalidateContent=function(n,t,o){o=o||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.invalidateImscpData(t,o)),r.push(this.filepoolProvider.invalidateFilesByComponent(o,e.COMPONENT,n)),r.push(this.courseProvider.invalidateModule(n,o)),this.utils.allPromises(r)},AddonModImscpProvider.prototype.invalidateImscpData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getImscpDataCacheKey(e))})},AddonModImscpProvider.prototype.isFileDownloadable=function(e){return"file"===e.type&&!this.checkSpecialFiles(e.filename)},AddonModImscpProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canDownloadFiles()})},AddonModImscpProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_imscp_view_imscp",{imscpid:n},e.COMPONENT,n,t,"imscp",{},o)},AddonModImscpProvider.COMPONENT="mmaModImscp",AddonModImscpProvider;var e}()},,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(1059),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),i=function(e){function CoreCourseResourcePrefetchHandlerBase(){return null!==e&&e.apply(this,arguments)||this}return r(CoreCourseResourcePrefetchHandlerBase,e),CoreCourseResourcePrefetchHandlerBase.prototype.download=function(e,n,t){return this.downloadOrPrefetch(e,n,!1,t)},CoreCourseResourcePrefetchHandlerBase.prototype.downloadOrPrefetch=function(e,n,t,o){var r=this;if(!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.networkerrormsg"));var i=this.sitesProvider.getCurrentSiteId();if(this.isDownloading(e.id,i))return this.getOngoingDownload(e.id,i);var l=this.courseProvider.getModuleBasicInfo(e.id,i).then(function(){return r.loadContents(e,n,!0)}).then(function(){return r.getIntroFiles(e,n,!0)}).then(function(l){var s=t?r.filepoolProvider.prefetchPackage.bind(r.filepoolProvider):r.filepoolProvider.downloadPackage.bind(r.filepoolProvider),a=r.getContentDownloadableFiles(e),u=[];if(o)u.push(r.filepoolProvider.downloadOrPrefetchFiles(i,l,t,!1,r.component,e.id)),u.push(s(i,a,r.component,e.id,void 0,o));else{var d=l.concat(a);u.push(s(i,d,r.component,e.id))}return u.push(r.filterHelper.getFilters("module",e.id,{courseId:n})),Promise.all(u)});return this.addOngoingDownload(e.id,l,i)},CoreCourseResourcePrefetchHandlerBase.prototype.getFiles=function(e,n,t){var o=this;return this.loadContents(e,n).then(function(){return o.getIntroFiles(e,n).then(function(n){return n.concat(o.getContentDownloadableFiles(e))})})},CoreCourseResourcePrefetchHandlerBase.prototype.invalidateContent=function(e,n){var t=[],o=this.sitesProvider.getCurrentSiteId();return t.push(this.courseProvider.invalidateModule(e)),t.push(this.filepoolProvider.invalidateFilesByComponent(o,this.component,e)),Promise.all(t)},CoreCourseResourcePrefetchHandlerBase.prototype.loadContents=function(e,n,t){return this.courseProvider.loadModuleContents(e,n,void 0,!1,t)},CoreCourseResourcePrefetchHandlerBase.prototype.prefetch=function(e,n,t,o){return this.downloadOrPrefetch(e,n,!0,o)},CoreCourseResourcePrefetchHandlerBase}(o.a)},,,,,function(e,n,t){"use strict";function View_CoreFileComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.fileSizeReadable)})}function View_CoreFileComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._34(2,1)],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,e(n,2,0,o._29(n.parent,0),1e3*t.timemodified)))})}function View_CoreFileComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.delete(t)&&o}return o},r.b,r.a)),o._15(1,1097728,[[2,4]],0,i.a,[[8,""],l.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n        "]))],function(e,n){e(n,1,0,"danger","");e(n,5,0,"trash")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.delete")));e(n,4,0,o._29(n,5)._hidden)})}function View_CoreFileComponent_0(e){return o._42(0,[o._32(0,d.a,[c.a,p.a]),(e()(),o._16(1,0,null,null,26,"a",[["class","item-media item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.download(t,!0)&&o}return o},f.b,f.a)),o._15(2,1097728,null,3,h.a,[m.a,l.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(6,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(8,0,null,0,0,"img",[["alt",""],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null)),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,2,1,null,View_CoreFileComponent_1)),o._15(14,16384,null,0,v.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,2,1,null,View_CoreFileComponent_2)),o._15(17,16384,null,0,v.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n\n    "])),(e()(),o._16(19,0,null,4,7,"div",[["class","buttons"],["item-end",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(21,0,null,null,1,"core-download-refresh",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.download()&&o}return o},C.b,C.a)),o._15(22,49152,null,0,y.a,[],{status:[0,"status"],enabled:[1,"enabled"],loading:[2,"loading"],canTrustDownload:[3,"canTrustDownload"]},{action:"action"}),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreFileComponent_3)),o._15(25,16384,null,0,v.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,2,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,14,0,t.fileSizeReadable);e(n,17,0,t.showTime);e(n,22,0,t.state,t.canDownload,t.isDownloading,!t.alwaysDownload);e(n,25,0,!t.isDownloading&&t.canDelete)},function(e,n){var t=n.component;e(n,8,0,t.fileIcon);e(n,11,0,t.fileName)})}t.d(n,"a",function(){return P}),n.b=View_CoreFileComponent_0;var o=t(1),r=t(47),i=t(44),l=t(9),s=t(26),a=t(19),u=t(49),d=t(228),c=t(7),p=t(25),f=t(32),h=t(22),m=t(20),_=t(28),g=t(34),v=t(8),C=t(524),y=t(328),P=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var o=t(0),r=t(1),i=(t(6),t(10)),l=(t(216),this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})}),s=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},a=function(){function CoreEditorRichTextEditorComponent(e,n,t,o,i,l,s,a,u,d){var c=this;this.domUtils=e,this.urlUtils=n,this.sitesProvider=t,this.filepoolProvider=o,this.content=i,this.events=s,this.utils=a,this.platform=u,this.editorOffline=d,this.placeholder="",this.name="core-rich-text-editor",this.DRAFT_AUTOSAVE_FREQUENCY=3e4,this.RESTORE_MESSAGE_CLEAR_TIME=6e3,this.SAVE_MESSAGE_CLEAR_TIME=2e3,this.kbHeight=0,this.minHeight=200,this.rteEnabled=!1,this.editorSupported=!0,this.isPhone=this.platform.is("mobile")&&!this.platform.is("tablet"),this.toolbarHidden=this.isPhone,this.numToolbarButtons=6,this.toolbarArrows=!1,this.toolbarPrevHidden=!0,this.toolbarNextHidden=!1,this.toolbarStyles={b:"false",i:"false",u:"false",strike:"false",p:"false",h3:"false",h4:"false",h5:"false",ul:"false",ol:"false"},this.isCurrentView=!0,this.toolbarButtonWidth=40,this.toolbarArrowWidth=28,this.lastDraft="",this.draftWasRestored=!1,this.maximizeEditorSize=function(){c.content.resize();var e=c.utils.promiseDefer();return setTimeout(function(){var n=c.domUtils.getContentHeight(c.content);c.platform.is("android")||(n-=c.kbHeight),n<=0?e.resolve(0):setTimeout(function(){var n;c.platform.is("android")?n=c.domUtils.getContentHeight(c.content)-c.getSurroundingHeight(c.element):c.platform.is("ios")&&c.kbHeight>0&&c.platform.version().major<12?(n=window.innerHeight-c.getSurroundingHeight(c.element),c.element.getBoundingClientRect().top<40&&window.scrollTo(window.scrollX,window.scrollY-40)):n=c.domUtils.getContentHeight(c.content)-c.kbHeight-c.getSurroundingHeight(c.element),c.element.style.height=n>c.minHeight?c.domUtils.formatPixelsSize(n-1):"",e.resolve(n)},100)},100),e.promise},this.updateToolbarStyles=function(){var e=window.getSelection().focusNode;if(e){for(var n=1==e.nodeType?e:e.parentElement,t={};null!=n&&n!==c.editorElement;){var o=n.tagName.toLowerCase();c.toolbarStyles[o]&&(t[o]="true"),n=n.parentElement}for(var o in c.toolbarStyles)c.toolbarStyles[o]="false";n===c.editorElement&&Object.assign(c.toolbarStyles,t)}},this.contentChanged=new r.r,this.element=l.nativeElement,this.pageInstance="app_"+Date.now()}return CoreEditorRichTextEditorComponent.prototype.ngAfterContentInit=function(){var e=this;this.domUtils.isRichTextEditorEnabled().then(function(n){e.rteEnabled=!!n}),this.editorSupported=this.domUtils.isRichTextEditorSupported(),this.editorElement=this.editor.nativeElement,this.setContent(this.control.value),this.originalContent=this.control.value,this.lastDraft=this.control.value,this.editorElement.onchange=this.onChange.bind(this),this.editorElement.onkeyup=this.onChange.bind(this),this.editorElement.onpaste=this.onChange.bind(this),this.editorElement.oninput=this.onChange.bind(this),this.editorElement.onkeydown=this.moveCursor.bind(this),this.valueChangeSubscription=this.control.valueChanges.subscribe(function(n){e.draftWasRestored&&e.originalContent==n?e.control.setValue(e.lastDraft,{emitEvent:!1}):(e.setContent(n),e.originalContent=n,e.infoMessage=null,e.lastDraft=n,e.editorOffline.saveDraft(e.contextLevel,e.contextInstanceId,e.elementId,e.draftExtraParams,e.pageInstance,n,n))}),document.execCommand("DefaultParagraphSeparator",!1,"p"),window.addEventListener("resize",this.maximizeEditorSize),document.addEventListener("selectionchange",this.updateToolbarStyles);var n=0;this.initHeightInterval=setInterval(function(){e.maximizeEditorSize().then(function(t){(n>=5||0!=t)&&clearInterval(e.initHeightInterval),n++})},750),this.keyboardObs=this.events.on(i.a.KEYBOARD_CHANGE,function(n){e.kbHeight=n,e.maximizeEditorSize()}),this.updateToolbarButtons(),this.elementId&&(this.elementId="id_"+this.elementId,this.element.setAttribute("id",this.elementId)),this.shouldAutoSaveDrafts()&&(this.restoreDraft(),this.autoSaveDrafts(),this.deleteDraftOnSubmitOrCancel())},CoreEditorRichTextEditorComponent.prototype.getSurroundingHeight=function(e){for(var n=0;e.parentNode&&"ION-CONTENT"!=e.parentNode.tagName;){var t=e.parentNode;if(e.tagName&&"CORE-LOADING"!=e.tagName)for(var o=0;o<t.childNodes.length;o++){var r=t.childNodes[o];r.tagName&&r!=e&&(n+=this.domUtils.getElementHeight(r,!1,!0,!0))}e=t}var i=getComputedStyle(e);if(n+=this.domUtils.getComputedStyleMeasure(i,"paddingTop")+this.domUtils.getComputedStyleMeasure(i,"paddingBottom"),e&&e.parentNode&&"ION-CONTENT"==e.parentNode.tagName){var l=getComputedStyle(e);n-=this.domUtils.getComputedStyleMeasure(l,"paddingTop")+this.domUtils.getComputedStyleMeasure(l,"paddingBottom")}return n},CoreEditorRichTextEditorComponent.prototype.onChange=function(e){this.rteEnabled?this.isNullOrWhiteSpace(this.editorElement.innerText)?this.clearText():(this.restoreExternalContent(),this.control.setValue(this.editorElement.innerHTML,{emitEvent:!1}),this.control.markAsDirty(),this.textarea.value=this.editorElement.innerHTML,this.treatExternalContent()):this.isNullOrWhiteSpace(this.textarea.value)?this.clearText():(this.control.setValue(this.textarea.value,{emitEvent:!1}),this.control.markAsDirty()),this.contentChanged.emit(this.control.value)},CoreEditorRichTextEditorComponent.prototype.moveCursor=function(e){if(this.rteEnabled&&("ArrowLeft"==e.key||"ArrowRight"==e.key)){this.stopBubble(e);var n="ArrowLeft"==e.key?-1:1,t=this.getCurrentCursorPosition(this.editorElement);this.setCurrentCursorPosition(this.editorElement,t+n)}},CoreEditorRichTextEditorComponent.prototype.getCurrentCursorPosition=function(e){var n,t=window.getSelection(),o=-1;if(t.focusNode&&e.contains(t.focusNode))for(n=t.focusNode,o=t.focusOffset;n&&!n.isSameNode(e);)if(n.previousSibling)o+=(n=n.previousSibling).textContent.length;else if(null===(n=n.parentNode))break;return o},CoreEditorRichTextEditorComponent.prototype.setCurrentCursorPosition=function(e,n){var t=function(e,n,o){if(0===o.count)n.setEnd(e,0);else if(e&&o.count>0)if(e.hasChildNodes())for(var r=0;r<e.childNodes.length&&(n=t(e.childNodes[r],n,o),0!==o.count);r++);else e.textContent.length<o.count?o.count-=e.textContent.length:(n.setEnd(e,o.count),o.count=0);return n},o=document.createRange();if(void 0===n)o.selectNode(e),o.selectNodeContents(e);else{if(n<0||n>e.textContent.length)return;o.selectNode(e),o.setStart(e,0),o=t(e,o,{count:n})}if(o){var r=window.getSelection();o.collapse(!1),r.removeAllRanges(),r.addRange(o)}},CoreEditorRichTextEditorComponent.prototype.toggleEditor=function(e){this.stopBubble(e),this.setContent(this.control.value),this.rteEnabled=!this.rteEnabled,this.rteEnabled?(this.editorElement.removeAttribute("hidden"),this.textarea.getNativeElement().setAttribute("hidden",""),this.editorElement.focus()):(this.editorElement.setAttribute("hidden",""),this.textarea.getNativeElement().removeAttribute("hidden"),this.textarea.setFocus())},CoreEditorRichTextEditorComponent.prototype.treatExternalContent=function(){var e=this;if(this.sitesProvider.isLoggedIn()){var n=Array.from(this.editorElement.querySelectorAll("img")),t=this.sitesProvider.getCurrentSiteId(),o=this.sitesProvider.getCurrentSite().canDownloadFiles();n.forEach(function(n){if(!n.getAttribute("data-original-src")){var r=n.src;if(r&&e.urlUtils.isDownloadableUrl(r)&&(o||!e.urlUtils.isPluginFileUrl(r)))return e.filepoolProvider.getSrcByUrl(t,r,e.component,e.componentId).then(function(e){n.getAttribute("data-original-src")||(n.setAttribute("data-original-src",n.src),n.setAttribute("src",e))})}})}},CoreEditorRichTextEditorComponent.prototype.restoreExternalContent=function(){Array.from(this.editorElement.querySelectorAll("img")).forEach(function(e){var n=e.getAttribute("data-original-src");n&&(e.setAttribute("src",n),e.removeAttribute("data-original-src"))})},CoreEditorRichTextEditorComponent.prototype.isNullOrWhiteSpace=function(e){return null==e||void 0===e||(e=e.replace(/[\n\r]/g,""),0===(e=e.split(" ").join("")).length)},CoreEditorRichTextEditorComponent.prototype.setContent=function(e){this.isNullOrWhiteSpace(e)?(this.editorElement.innerHTML="<p></p>",this.textarea.value=""):(this.editorElement.innerHTML=e,this.textarea.value=e,this.treatExternalContent())},CoreEditorRichTextEditorComponent.prototype.clearText=function(){var e=this;this.setContent(null),this.control.setValue(null,{emitEvent:!1}),setTimeout(function(){e.rteEnabled&&e.setCurrentCursorPosition(e.editorElement)},1)},CoreEditorRichTextEditorComponent.prototype.buttonAction=function(e,n,t){this.stopBubble(e),n&&("block"==t?document.execCommand("formatBlock",!1,"<"+n+">"):(t&&(this.toolbarStyles[t]="true"==this.toolbarStyles[t]?"false":"true"),document.execCommand(n,!1)))},CoreEditorRichTextEditorComponent.prototype.focusRTE=function(e){this.rteEnabled?this.editorElement.focus():this.textarea.setFocus()},CoreEditorRichTextEditorComponent.prototype.hideToolbar=function(e){this.stopBubble(e),this.isPhone&&(this.toolbarHidden=!0)},CoreEditorRichTextEditorComponent.prototype.showToolbar=function(e){this.stopBubble(e),this.editorElement.focus(),this.toolbarHidden=!1},CoreEditorRichTextEditorComponent.prototype.stopBubble=function(e){e.preventDefault(),e.stopPropagation()},CoreEditorRichTextEditorComponent.prototype.mouseDownAction=function(e){var n=window.getSelection().toString();this.rteEnabled&&document.activeElement==this.editorElement&&""!=n||this.stopBubble(e)},CoreEditorRichTextEditorComponent.prototype.toolbarNext=function(e){if(this.stopBubble(e),!this.toolbarNextHidden){var n=this.toolbarSlides.getActiveIndex()||0;this.toolbarSlides.slideTo(n+this.numToolbarButtons)}this.updateToolbarArrows()},CoreEditorRichTextEditorComponent.prototype.toolbarPrev=function(e){if(this.stopBubble(e),!this.toolbarPrevHidden){var n=this.toolbarSlides.getActiveIndex()||0;this.toolbarSlides.slideTo(n-this.numToolbarButtons)}this.updateToolbarArrows()},CoreEditorRichTextEditorComponent.prototype.updateToolbarButtons=function(){if(this.isCurrentView){var e=this.domUtils.getElementWidth(this.toolbar.nativeElement);this.toolbarSlides._init&&e?(e>this.toolbarSlides.length()*this.toolbarButtonWidth?(this.numToolbarButtons=this.toolbarSlides.length(),this.toolbarArrows=!1):(this.numToolbarButtons=Math.floor((e-2*this.toolbarArrowWidth)/this.toolbarButtonWidth),this.toolbarArrows=!0),this.toolbarSlides.update(),this.updateToolbarArrows()):setTimeout(this.updateToolbarButtons.bind(this),100)}},CoreEditorRichTextEditorComponent.prototype.updateToolbarArrows=function(){var e=this.toolbarSlides.getActiveIndex()||0;this.toolbarPrevHidden=e<=0,this.toolbarNextHidden=e+this.numToolbarButtons>=this.toolbarSlides.length()},CoreEditorRichTextEditorComponent.prototype.shouldAutoSaveDrafts=function(){return!!this.sitesProvider.getCurrentSite()&&(void 0===this.autoSave||this.utils.isTrueOrOne(this.autoSave))&&void 0!==this.contextLevel&&void 0!==this.contextInstanceId&&void 0!==this.elementId},CoreEditorRichTextEditorComponent.prototype.restoreDraft=function(){return l(this,void 0,void 0,function(){var e,n;return s(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.editorOffline.resumeDraft(this.contextLevel,this.contextInstanceId,this.elementId,this.draftExtraParams,this.pageInstance,this.originalContent)];case 1:return void 0===(e=t.sent())?[2]:("<p></p>"!=(n=e.drafttext)&&"<p><br></p>"!=n&&"<br>"!=n&&"<p>&nbsp;</p>"!=n&&"<p><br>&nbsp;</p>"!=n||(n=""),""!==n&&n!=this.control.value&&(this.control.setValue(n,{emitEvent:!1}),this.setContent(n),this.lastDraft=n,this.draftWasRestored=!0,this.originalContent=e.originalcontent,e.drafttext!=e.originalcontent&&this.showMessage("core.editor.textrecovered",this.RESTORE_MESSAGE_CLEAR_TIME)),[3,3]);case 2:return t.sent(),[3,3];case 3:return[2]}})})},CoreEditorRichTextEditorComponent.prototype.autoSaveDrafts=function(){var e=this;this.autoSaveInterval=setInterval(function(){return l(e,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:if(e=this.control.value,this.lastDraft==e)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.editorOffline.saveDraft(this.contextLevel,this.contextInstanceId,this.elementId,this.draftExtraParams,this.pageInstance,e,this.originalContent)];case 2:return n.sent(),this.lastDraft=e,this.showMessage("core.editor.autosavesucceeded",this.SAVE_MESSAGE_CLEAR_TIME),[3,4];case 3:return n.sent(),[3,4];case 4:return[2]}})})},this.DRAFT_AUTOSAVE_FREQUENCY)},CoreEditorRichTextEditorComponent.prototype.deleteDraftOnSubmitOrCancel=function(){var e=this;this.resetObs=this.events.on(i.a.FORM_ACTION,function(n){return l(e,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:if(e=this.element.closest("form"),!n.form||!e||n.form!=e)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.editorOffline.deleteDraft(this.contextLevel,this.contextInstanceId,this.elementId,this.draftExtraParams)];case 2:return t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}})})},this.sitesProvider.getCurrentSiteId())},CoreEditorRichTextEditorComponent.prototype.showMessage=function(e,n){var t=this;clearTimeout(this.hideMessageTimeout),this.infoMessage=e,this.hideMessageTimeout=setTimeout(function(){t.hideMessageTimeout=null,t.infoMessage=null},n)},CoreEditorRichTextEditorComponent.prototype.ionViewDidEnter=function(){this.isCurrentView=!0,this.updateToolbarButtons()},CoreEditorRichTextEditorComponent.prototype.ionViewDidLeave=function(){this.isCurrentView=!1},CoreEditorRichTextEditorComponent.prototype.ngOnDestroy=function(){this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe(),window.removeEventListener("resize",this.maximizeEditorSize),document.removeEventListener("selectionchange",this.updateToolbarStyles),clearInterval(this.initHeightInterval),this.keyboardObs&&this.keyboardObs.off(),clearInterval(this.autoSaveInterval),clearTimeout(this.hideMessageTimeout),this.resetObs&&this.resetObs.off()},CoreEditorRichTextEditorComponent=Object(o.__decorate)([Object(o.__param)(4,Object(r.E)())],CoreEditorRichTextEditorComponent)}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(135),r=(t(4),function(){function AddonModFeedbackHelperProvider(e,n,t,o,r,i,l,s,a,u){this.feedbackProvider=e,this.userProvider=n,this.textUtils=t,this.translate=o,this.timeUtils=r,this.domUtils=i,this.courseProvider=l,this.linkHelper=s,this.sitesProvider=a,this.utils=u,this.MODE_RESPONSETIME=1,this.MODE_COURSE=2,this.MODE_CATEGORY=3}return AddonModFeedbackHelperProvider.prototype.getPageView=function(e,n,t,o,r){for(var i,l,s=r.getActive();!s.isFirst()&&s.name.startsWith(o)&&(l=s.getNavParams(),(i=l.get(t)?l.get(t):l.get("module").instance)&&i==n);){if(s.name==e)return s;s=r.getPrevious(s)}return null},AddonModFeedbackHelperProvider.prototype.getNonRespondents=function(e,n,t){var o=this;return this.feedbackProvider.getNonRespondents(e,n,t).then(function(e){return o.addImageProfileToAttempts(e.users).then(function(n){return e.users=n,e})})},AddonModFeedbackHelperProvider.prototype.getPageItemsResponses=function(e){var n={};return e.forEach(function(e){var t=!1;if(e.hasError=!1,"captcha"==e.typ){var o=e.value||"";t=!!o,n[e.typ+"_"+e.id]=1,n["g-recaptcha-response"]=o,n.recaptcha_element="dummyvalue",e.isEmpty=!(!e.required||t)}else if(e.hasvalue){var r,i,l=e.typ+"_"+e.id;"multichoice"==e.typ&&"c"==e.subtype?(n[r=l+"[0]"]=0,e.choices.forEach(function(e,o){r=l+"["+(o+1)+"]",i=e.checked?e.value:0,!t&&i&&(t=!0),n[r]=i})):(r="multichoice"==e.typ&&"r"!=e.subtype?l+"[0]":l,"multichoice"==e.typ||"multichoicerated"==e.typ?i=e.value||0:"numeric"==e.typ?""!=(i=e.value||0==e.value?e.value:"")&&(""!=e.rangefrom&&i<e.rangefrom||""!=e.rangeto&&i>e.rangeto)&&(e.hasError=!0):i=e.value||0==e.value?e.value:"",t=!!i,n[r]=i),e.isEmpty=!(!e.required||t)}}),n},AddonModFeedbackHelperProvider.prototype.getResponsesAnalysis=function(e,n,t){var o=this;return this.feedbackProvider.getResponsesAnalysis(e,n,t).then(function(e){return o.addImageProfileToAttempts(e.attempts).then(function(n){return e.attempts=n,e})})},AddonModFeedbackHelperProvider.prototype.handleShowEntriesLink=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(n.id,t).then(function(r){var i;return void 0===n.showcompleted?(i={module:r,courseId:r.course},o.linkHelper.goInSite(e,"AddonModFeedbackRespondentsPage",i,t)):o.feedbackProvider.getAttempt(r.instance,n.showcompleted,!0,t).then(function(n){return i={moduleId:r.id,attempt:n,feedbackId:r.instance,courseId:r.course},o.linkHelper.goInSite(e,"AddonModFeedbackAttemptPage",i,t)})}).finally(function(){r.dismiss()})},AddonModFeedbackHelperProvider.prototype.addImageProfileToAttempts=function(e){var n=this,t=e.map(function(e){return n.userProvider.getProfile(e.userid,e.courseid,!0).then(function(n){e.profileimageurl=n.profileimageurl}).catch(function(){})});return Promise.all(t).then(function(){return e})},AddonModFeedbackHelperProvider.prototype.openFeature=function(e,n,t,o,r){void 0===r&&(r=0);var i=e&&"analysis"!=e?"AddonModFeedback"+e+"Page":"AddonModFeedbackIndexPage",l={module:t,moduleId:t.id,courseId:o,feedbackId:t.instance,group:r};if("AddonModFeedbackIndexPage"==i){l.tab="analysis"==e?"analysis":"overview";var s=this.getPageView(i,t.instance,"feedbackId","AddonModFeedback",n);if(s)return n.popTo(s)}return n.push(i,l)},AddonModFeedbackHelperProvider.prototype.getItemFormLabel=function(e){return e.template="label",e.name="",e.presentation=this.textUtils.replacePluginfileUrls(e.presentation,e.itemfiles),e},AddonModFeedbackHelperProvider.prototype.getItemFormInfo=function(e){e.template="label";var n=parseInt(e.presentation,10);if(n==this.MODE_COURSE||n==this.MODE_CATEGORY)e.presentation=e.otherdata,e.value=void 0!==e.rawValue?e.rawValue:e.otherdata;else{if(n!=this.MODE_RESPONSETIME)return!1;e.value="__CURRENT__TIMESTAMP__";var t=void 0!==e.rawValue?1e3*e.rawValue:(new Date).getTime();e.presentation=this.timeUtils.userDate(t)}return e},AddonModFeedbackHelperProvider.prototype.getItemFormNumeric=function(e){e.template="numeric";var n=e.presentation.split(o.a.LINE_SEP)||[];return n[0]=n.length>0?parseInt(n[0],10):void 0,n[1]=n.length>1?parseInt(n[1],10):void 0,e.rangefrom="number"!=typeof n[0]||isNaN(n[0])?"":n[0],e.rangeto="number"!=typeof n[1]||isNaN(n[1])?"":n[1],e.value=void 0!==e.rawValue?parseFloat(e.rawValue):"",e.postfix=this.getNumericBoundariesForDisplay(e.rangefrom,e.rangeto),e},AddonModFeedbackHelperProvider.prototype.getItemFormTextfield=function(e){return e.template="textfield",e.length=e.presentation.split(o.a.LINE_SEP)[1]||255,e.value=void 0!==e.rawValue?e.rawValue:"",e},AddonModFeedbackHelperProvider.prototype.getItemFormTextarea=function(e){return e.template="textarea",e.value=void 0!==e.rawValue?e.rawValue:"",e},AddonModFeedbackHelperProvider.prototype.getItemFormMultichoice=function(e){var n=e.presentation.split(o.a.MULTICHOICE_TYPE_SEP)||[];if(e.subtype=n.length>0&&n[0]?n[0]:"r",e.template="multichoice-"+e.subtype,e.presentation=n.length>1?n[1]:"","d"!=e.subtype&&(n=e.presentation.split(o.a.MULTICHOICE_ADJUST_SEP)||[],e.presentation=n.length>0?n[0]:""),e.choices=e.presentation.split(o.a.LINE_SEP)||[],e.choices=e.choices.map(function(e,n){var t=e.split(o.a.MULTICHOICERATED_VALUE_SEP)||[""];return e=1==t.length?t[0]:"("+t[0]+") "+t[1],{value:n+1,label:e}}),"r"===e.subtype&&-1==e.options.search(o.a.MULTICHOICE_HIDENOSELECT))e.choices.unshift({value:0,label:this.translate.instant("addon.mod_feedback.not_selected")}),e.value=void 0!==e.rawValue?parseInt(e.rawValue,10):0;else if("d"===e.subtype)e.choices.unshift({value:0,label:""}),e.value=void 0!==e.rawValue?parseInt(e.rawValue,10):0;else if("c"===e.subtype)if(void 0===e.rawValue)e.value="";else{e.rawValue=""+e.rawValue;var t=e.rawValue.split(o.a.LINE_SEP);e.choices.forEach(function(e){for(var n in t)if(e.value==t[n])return void(e.checked=!0)})}else e.value=void 0!==e.rawValue?parseInt(e.rawValue,10):"";return e},AddonModFeedbackHelperProvider.prototype.getItemFormCaptcha=function(e){var n=this.textUtils.parseJSON(e.otherdata);return n&&n.length>3&&(e.captcha={recaptchapublickey:n[3]}),e.template="captcha",e.value="",e},AddonModFeedbackHelperProvider.prototype.getItemForm=function(e,n){switch(e.typ){case"label":return this.getItemFormLabel(e);case"info":return this.getItemFormInfo(e);case"numeric":return this.getItemFormNumeric(e);case"textfield":return this.getItemFormTextfield(e);case"textarea":return this.getItemFormTextarea(e);case"multichoice":case"multichoicerated":return this.getItemFormMultichoice(e);case"pagebreak":if(!n)return!1;break;case"captcha":return this.getItemFormCaptcha(e);default:return!1}return e},AddonModFeedbackHelperProvider.prototype.getNumericBoundariesForDisplay=function(e,n){var t="number"==typeof e,o="number"==typeof n;return!t&&o?" ("+this.translate.instant("addon.mod_feedback.maximal")+": "+this.utils.formatFloat(n)+")":t&&!o?" ("+this.translate.instant("addon.mod_feedback.minimal")+": "+this.utils.formatFloat(e)+")":t||o?" ("+this.utils.formatFloat(e)+" - "+this.utils.formatFloat(n)+")":""},AddonModFeedbackHelperProvider}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(6),t(4);var o=t(168),r=(t(263),t(130),function(){function AddonModQuizHelperProvider(e,n,t,o,r,i,l,s,a,u){this.domUtils=e,this.translate=n,this.utils=t,this.accessRuleDelegate=o,this.quizProvider=r,this.modalCtrl=i,this.quizOfflineProvider=l,this.courseHelper=s,this.sitesProvider=a,this.linkHelper=u}return AddonModQuizHelperProvider.prototype.getAndCheckPreflightData=function(e,n,t,o,r,i,l,s,a){var u=this,d=n&&n.activerulenames,c=!1;return this.accessRuleDelegate.isPreflightCheckRequired(d,e,o,i,s).then(function(r){if(c=r,r)return u.getPreflightData(e,n,o,i,l,s).then(function(e){Object.assign(t,e)})}).then(function(){return u.accessRuleDelegate.getFixedPreflightData(d,e,t,o,i,s)}).then(function(){return u.validatePreflightData(e,n,t,o,r,i,s).catch(function(d){return i?Promise.reject(d):a&&!c?Promise.reject(d):(setTimeout(function(){u.domUtils.showErrorModalDefault(d,"core.error",!0)},100),u.getAndCheckPreflightData(e,n,t,o,r,i,l,s,!0))})})},AddonModQuizHelperProvider.prototype.getPreflightData=function(e,n,t,o,r,i){var l=this,s=[],a=n&&n.activerulenames;if(a.forEach(function(e){l.accessRuleDelegate.isAccessRuleSupported(e)||s.push(e)}),s.length)return Promise.reject(this.translate.instant("addon.mod_quiz.errorrulesnotsupported")+" "+JSON.stringify(s));var u=this.modalCtrl.create("AddonModQuizPreflightModalPage",{title:r,quiz:e,attempt:t,prefetch:!!o,siteId:i,rules:a});return u.present(),new Promise(function(e,n){u.onDidDismiss(function(t){void 0!==t?e(t):n(l.domUtils.createCanceledError())})})},AddonModQuizHelperProvider.prototype.getQuestionMarkFromHtml=function(e){var n=this.domUtils.convertToElement(e);return this.domUtils.getContentsOfElement(n,".grade")},AddonModQuizHelperProvider.prototype.getQuizIdByAttemptId=function(e,n){return this.quizProvider.getAttemptReview(e,void 0,!1,n).then(function(e){return e.attempt&&e.attempt.quiz?e.attempt.quiz:Promise.reject(null)})},AddonModQuizHelperProvider.prototype.handleReviewLink=function(e,n,t,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteId();var s=this.domUtils.showModalLoading();return(r?Promise.resolve(r):this.getQuizIdByAttemptId(n)).then(function(e){return r=e,o||l.courseHelper.getModuleCourseIdByInstance(r,"quiz",i)}).then(function(o){var s={quizId:r,attemptId:n,courseId:o,page:isNaN(t)?-1:t};return l.linkHelper.goInSite(e,"AddonModQuizReviewPage",s,i)}).catch(function(e){l.domUtils.showErrorModalDefault(e,"An error occurred while loading the required data.")}).finally(function(){s.dismiss()})},AddonModQuizHelperProvider.prototype.setAttemptCalculatedData=function(e,n,t,r){n.rescaledGrade=this.quizProvider.rescaleGrade(n.sumgrades,e,!1),n.finished=this.quizProvider.isAttemptFinished(n.state),n.readableState=this.quizProvider.getAttemptReadableState(e,n),n.readableMark=e.showMarkColumn&&n.finished?this.quizProvider.formatGrade(n.sumgrades,e.decimalpoints):"",e.showGradeColumn&&n.finished?(n.readableGrade=this.quizProvider.formatGrade(n.rescaledGrade,e.decimalpoints),n.highlightGrade=t&&!n.preview&&n.state==o.a.ATTEMPT_FINISHED&&n.readableGrade==r):n.readableGrade=""},AddonModQuizHelperProvider.prototype.setQuizCalculatedData=function(e,n){e.sumGradesFormatted=this.quizProvider.formatGrade(e.sumgrades,e.decimalpoints),e.gradeFormatted=this.quizProvider.formatGrade(e.grade,e.decimalpoints),e.showAttemptColumn=1!=e.attempts,e.showGradeColumn=n.someoptions.marks>=o.a.QUESTION_OPTIONS_MARK_AND_MAX&&this.quizProvider.quizHasGrades(e),e.showMarkColumn=e.showGradeColumn&&e.grade!=e.sumgrades,e.showFeedbackColumn=e.hasfeedback&&n.alloptions.overallfeedback},AddonModQuizHelperProvider.prototype.validatePreflightData=function(e,n,t,r,i,l,s){var a,u=this,d=n&&n.activerulenames;if(r)if(r.state==o.a.ATTEMPT_OVERDUE||r.finishedOffline)a=this.quizProvider.getAttemptSummary(r.id,t,i,!0,!1,s);else{a=this.quizProvider.getAttemptData(r.id,r.currentpage,t,i,!0,s).then(function(){if(i)return u.quizOfflineProvider.getAttemptById(r.id).then(function(e){r.currentpage=e.currentpage}).catch(function(){})})}else a=this.quizProvider.startAttempt(e.id,t,!1,s).then(function(e){r=e});return a.then(function(){return u.accessRuleDelegate.notifyPreflightCheckPassed(d,e,r,t,l,s),r}).catch(function(n){return u.utils.isWebServiceError(n)&&u.accessRuleDelegate.notifyPreflightCheckFailed(d,e,r,t,l,s),Promise.reject(n)})},AddonModQuizHelperProvider}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(149)),i=t(136),l=(t(280),t(233),function(e){function AddonModForumSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h,m,_,g){var v=e.call(this,"AddonModForumSyncProvider",l,s,t,a,u,n,d)||this;return v.eventsProvider=r,v.groupsProvider=i,v.uploaderProvider=c,v.utils=p,v.forumProvider=f,v.forumHelper=h,v.forumOffline=m,v.logHelper=_,v.ratingSync=g,v.componentTranslate=o.translateModuleName("forum"),v}return Object(o.__extends)(AddonModForumSyncProvider,e),n=AddonModForumSyncProvider,AddonModForumSyncProvider.prototype.syncAllForums=function(e,n){return this.syncOnSites("all forums",this.syncAllForumsFunc.bind(this),[n],e)},AddonModForumSyncProvider.prototype.syncAllForumsFunc=function(e,t){var o=this,r=[];return r.push(this.forumOffline.getAllNewDiscussions(e).then(function(r){var i={};return r.forEach(function(r){void 0===i[r.forumid]&&(i[r.forumid]=t?o.syncForumDiscussions(r.forumid,r.userid,e):o.syncForumDiscussionsIfNeeded(r.forumid,r.userid,e),i[r.forumid].then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{forumId:r.forumid,userId:r.userid,warnings:t.warnings},e)}))}),Promise.all(o.utils.objectToArray(i))})),r.push(this.forumOffline.getAllReplies(e).then(function(r){var i={};return r.forEach(function(r){void 0===i[r.discussionid]&&(i[r.discussionid]=t?o.syncDiscussionReplies(r.discussionid,r.userid,e):o.syncDiscussionRepliesIfNeeded(r.discussionid,r.userid,e),i[r.discussionid].then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{forumId:r.forumid,discussionId:r.discussionid,userId:r.userid,warnings:t.warnings},e)}))}),Promise.all(o.utils.objectToArray(i))})),r.push(this.syncRatings(void 0,void 0,t,e)),Promise.all(r)},AddonModForumSyncProvider.prototype.syncForumDiscussionsIfNeeded=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=this.getForumSyncId(e,n);return this.isSyncNeeded(r,t).then(function(r){if(r)return o.syncForumDiscussions(e,n,t)})},AddonModForumSyncProvider.prototype.syncForumDiscussions=function(e,n,t){var o=this;n=n||this.sitesProvider.getCurrentSiteUserId(),t=t||this.sitesProvider.getCurrentSiteId();var r=this.getForumSyncId(e,n);if(this.isSyncing(r,t))return this.getOngoingSync(r,t);if(this.syncProvider.isBlocked(i.a.COMPONENT,r,t))return this.logger.debug("Cannot sync forum "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync forum "+e+" for user "+n);var l={warnings:[],updated:!1},s=this.logHelper.syncIfNeeded(i.a.COMPONENT,e,t).catch(function(){}).then(function(){return o.forumOffline.getNewDiscussions(e,t,n).catch(function(){return[]})}).then(function(r){if(r.length){if(!o.appProvider.isOnline())return Promise.reject(null);var s=[];return r.forEach(function(r){var a;a=r.groupid==i.a.ALL_GROUPS?o.forumProvider.getForumById(r.courseid,r.forumid,t).then(function(e){return o.groupsProvider.getActivityAllowedGroups(e.cmid).then(function(e){return e.groups.map(function(e){return e.id})})}):Promise.resolve([r.groupid]),s.push(a.then(function(i){var s=[];return Promise.all(i.map(function(i){return o.uploadAttachments(e,r,!0,t,n).then(function(n){var l=o.utils.clone(r.options||{});return l.attachmentsid=n,o.forumProvider.addNewDiscussionOnline(e,r.subject,r.message,l,i,t)}).catch(function(e){s.push(e)})})).then(function(){if(s.length==i.length)for(var a=0;a<s.length;a++)if(!o.utils.isWebServiceError(s[a]))return Promise.reject(s[a]);return l.updated=!0,o.deleteNewDiscussion(e,r.timecreated,t,n).then(function(){s.length==i.length&&l.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:r.name,error:o.textUtils.getErrorMessageFromError(s[0])}))})})}))}),Promise.all(s)}}).then(function(){if(l.updated){var n=[o.forumProvider.invalidateDiscussionsList(e,t),o.forumProvider.invalidateCanAddDiscussion(e,t)];return Promise.all(n).catch(function(){})}}).then(function(){return o.setSyncTime(r,t).catch(function(){})}).then(function(){return l});return this.addOngoingSync(r,s,t)},AddonModForumSyncProvider.prototype.syncRatings=function(e,n,t,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.ratingSync.syncRatings("mod_forum","post","module",e,n,t,o).then(function(e){var n=!1,t=[],i=[];return e.forEach(function(e){e.updated.length&&(n=!0,i.push(r.forumProvider.invalidateDiscussionPosts(e.itemSet.itemSetId,void 0,o))),e.warnings.length&&i.push(r.forumProvider.getForum(e.itemSet.courseId,e.itemSet.instanceId,o).then(function(n){e.warnings.forEach(function(e){t.push(r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:n.name,error:e}))})}))}),r.utils.allPromises(i).then(function(){return{updated:n,warnings:t}})})},AddonModForumSyncProvider.prototype.syncForumReplies=function(e,n,t){var o=this;return this.forumOffline.getForumReplies(e,t,n).catch(function(){return[]}).then(function(e){if(!e.length)return{warnings:[],updated:!1};if(!o.appProvider.isOnline())return Promise.reject(null);var r={};return e.forEach(function(e){void 0===r[e.discussionid]&&(r[e.discussionid]=o.syncDiscussionReplies(e.discussionid,n,t))}),Promise.all(o.utils.objectToArray(r)).then(function(e){return e.reduce(function(e,n){return{warnings:e.warnings.concat(n.warnings),updated:e.updated||n.updated}},{warnings:[],updated:!1})})})},AddonModForumSyncProvider.prototype.syncDiscussionRepliesIfNeeded=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=this.getDiscussionSyncId(e,n);return this.isSyncNeeded(r,t).then(function(r){if(r)return o.syncDiscussionReplies(e,n,t)})},AddonModForumSyncProvider.prototype.syncDiscussionReplies=function(e,n,t){var o=this;n=n||this.sitesProvider.getCurrentSiteUserId(),t=t||this.sitesProvider.getCurrentSiteId();var r=this.getDiscussionSyncId(e,n);if(this.isSyncing(r,t))return this.getOngoingSync(r,t);if(this.syncProvider.isBlocked(i.a.COMPONENT,r,t))return this.logger.debug("Cannot sync forum discussion "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync forum discussion "+e+" for user "+n);var l,s={warnings:[],updated:!1},a=this.forumOffline.getDiscussionReplies(e,t,n).catch(function(){return[]}).then(function(e){if(e.length){if(!o.appProvider.isOnline())return Promise.reject(null);var r=[];return e.forEach(function(e){l=e.forumid,e.options=e.options||{};var i=o.uploadAttachments(l,e,!1,t,n).then(function(n){return e.options.attachmentsid=n,o.forumProvider.replyPostOnline(e.postid,e.subject,e.message,e.options,t)});r.push(i.then(function(){return s.updated=!0,o.deleteReply(l,e.postid,t,n)}).catch(function(r){return o.utils.isWebServiceError(r)?(s.updated=!0,o.deleteReply(l,e.postid,t,n).then(function(){s.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:e.name,error:o.textUtils.getErrorMessageFromError(r)}))})):Promise.reject(r)}))}),Promise.all(r)}}).then(function(){var n=[];return l&&n.push(o.forumProvider.invalidateDiscussionsList(l,t)),n.push(o.forumProvider.invalidateDiscussionPosts(e,l,t)),o.utils.allPromises(n).catch(function(){})}).then(function(){return o.setSyncTime(r,t).catch(function(){})}).then(function(){return s});return this.addOngoingSync(r,a,t)},AddonModForumSyncProvider.prototype.deleteNewDiscussion=function(e,n,t,o){var r=[];return r.push(this.forumOffline.deleteNewDiscussion(e,n,t,o)),r.push(this.forumHelper.deleteNewDiscussionStoredFiles(e,n,t).catch(function(){})),Promise.all(r)},AddonModForumSyncProvider.prototype.deleteReply=function(e,n,t,o){var r=[];return r.push(this.forumOffline.deleteReply(n,t,o)),r.push(this.forumHelper.deleteReplyStoredFiles(e,n,t,o).catch(function(){})),Promise.all(r)},AddonModForumSyncProvider.prototype.uploadAttachments=function(e,n,t,o,r){var l=this,s=n&&n.options&&n.options.attachmentsid;if(s){var a=s.online||[],u=void 0;return s.offline?(u=t?this.forumHelper.getNewDiscussionStoredFiles(e,n.timecreated,o):this.forumHelper.getReplyStoredFiles(e,n.postid,o,r)).then(function(e){a=a.concat(e)}).catch(function(){}):u=Promise.resolve(),u.then(function(){return l.uploaderProvider.uploadOrReuploadFiles(a,i.a.COMPONENT,e,o)})}return Promise.resolve()},AddonModForumSyncProvider.prototype.getForumSyncId=function(e,n){return n=n||this.sitesProvider.getCurrentSiteUserId(),"forum#"+e+"#"+n},AddonModForumSyncProvider.prototype.getDiscussionSyncId=function(e,n){return n=n||this.sitesProvider.getCurrentSiteUserId(),"discussion#"+e+"#"+n},AddonModForumSyncProvider.AUTO_SYNCED="addon_mod_forum_autom_synced",AddonModForumSyncProvider.MANUAL_SYNCED="addon_mod_forum_manual_synced",AddonModForumSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){function CoreFabDirective(e,n){this.content=n,this.element=e.nativeElement}return CoreFabDirective.prototype.ngOnInit=function(){this.content&&(this.content.getNativeElement().classList.add("has-fab"),this.content.getFixedElement().appendChild(this.element))},CoreFabDirective.prototype.ngOnDestroy=function(){this.content&&this.content.getNativeElement().classList.remove("has-fab")},CoreFabDirective}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonNotificationsProvider(e,n,t,o,r,i,l,s){this.appProvider=n,this.sitesProvider=t,this.timeUtils=o,this.userProvider=r,this.emulatorHelper=i,this.messageProvider=l,this.textUtils=s,this.ROOT_CACHE_KEY="mmaNotifications:",this.logger=e.getInstance("AddonNotificationsProvider")}return e=AddonNotificationsProvider,AddonNotificationsProvider.prototype.formatNotificationsData=function(e,n){var t=this,o=e.map(function(e){if(e.mobiletext=e.component&&"mod_forum"==e.component?e.smallmessage:e.fullmessage,e.moodlecomponent=e.component,e.notification=1,e.notif=1,void 0!==n&&(e.read=n),"string"==typeof e.customdata&&(e.customdata=t.textUtils.parseJSON(e.customdata,{})),e.customdata&&e.customdata.courseid)e.courseid=e.customdata.courseid;else if(!e.courseid){var o=e.fullmessagehtml.match(/course\/view\.php\?id=([^"]*)/);o&&o[1]&&(e.courseid=parseInt(o[1],10))}return e.useridfrom>0?t.userProvider.getProfile(e.useridfrom,e.courseid,!0).then(function(n){return e.profileimageurlfrom=n.profileimageurl,e.userfromfullname=n.fullname,e}).catch(function(){}):Promise.resolve(e)});return Promise.all(o)},AddonNotificationsProvider.prototype.getNotificationPreferencesCacheKey=function(){return this.ROOT_CACHE_KEY+"notificationPreferences"},AddonNotificationsProvider.prototype.getNotificationPreferences=function(e){var n=this;return this.logger.debug("Get notification preferences"),this.sitesProvider.getSite(e).then(function(e){var t={cacheKey:n.getNotificationPreferencesCacheKey(),updateFrequency:o.a.FREQUENCY_SOMETIMES};return e.read("core_message_get_user_notification_preferences",{},t).then(function(e){return e.preferences})})},AddonNotificationsProvider.prototype.getNotificationsCacheKey=function(){return this.ROOT_CACHE_KEY+"list"},AddonNotificationsProvider.prototype.getNotifications=function(n,t,o,r,i,l,s){var a=this;return void 0===o&&(o=0),void 0===r&&(r=!0),o=o||e.LIST_LIMIT,this.logger.debug("Get "+(n?"read":"unread")+" notifications from "+t+". Limit: "+o),this.sitesProvider.getSite(s).then(function(u){var d={useridto:u.getUserId(),useridfrom:0,type:"notifications",read:n?1:0,newestfirst:1,limitfrom:t,limitnum:o},c={cacheKey:a.getNotificationsCacheKey(),omitExpires:i,getFromCache:i||!l,emergencyCache:i||!l};return u.read("core_message_get_messages",d,c).then(function(o){if(o.messages){var i=o.messages;return a.formatNotificationsData(i,n).then(function(){return a.appProvider.isDesktop()&&r&&!n&&0===t&&a.emulatorHelper.storeLastReceivedNotification(e.PUSH_SIMULATION_COMPONENT,i[0],s),i})}return Promise.reject(null)})})},AddonNotificationsProvider.prototype.getPopupNotifications=function(n,t,o,r,i,l){var s=this;return void 0===o&&(o=!0),t=t||e.LIST_LIMIT,this.logger.debug("Get popup notifications from "+n+". Limit: "+t),this.sitesProvider.getSite(l).then(function(a){var u={useridto:a.getUserId(),newestfirst:1,offset:n,limit:t+1},d={cacheKey:s.getNotificationsCacheKey(),omitExpires:r,getFromCache:r||!i,emergencyCache:r||!i};return a.read("message_popup_get_popup_notifications",u,d).then(function(r){if(r.notifications){var i={canLoadMore:r.notifications.length>t,notifications:r.notifications.slice(0,t)};return s.formatNotificationsData(i.notifications).then(function(){var t=i.notifications[0];return s.appProvider.isDesktop()&&o&&0===n&&t&&!t.read&&s.emulatorHelper.storeLastReceivedNotification(e.PUSH_SIMULATION_COMPONENT,t,l),i})}return Promise.reject(null)})})},AddonNotificationsProvider.prototype.getReadNotifications=function(e,n,t,o,r,i){return void 0===t&&(t=!0),this.getNotifications(!0,e,n,t,o,r,i)},AddonNotificationsProvider.prototype.getUnreadNotifications=function(e,n,t,o,r,i){return void 0===t&&(t=!0),this.getNotifications(!1,e,n,t,o,r,i)},AddonNotificationsProvider.prototype.getUnreadNotificationsCount=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(r){if(r.wsAvailable("message_popup_get_unread_popup_notification_count")){n=n||r.getUserId();return r.read("message_popup_get_unread_popup_notification_count",{useridto:n},{getFromCache:!1,emergencyCache:!1,saveToCache:!1,typeExpected:"number"}).catch(function(){return 0})}return o.getUnreadNotifications(0,e.LIST_LIMIT+1,!1,!1,!1,t).then(function(n){return n.length>e.LIST_LIMIT?e.LIST_LIMIT+"+":n.length}).catch(function(){return 0})})},AddonNotificationsProvider.prototype.isPopupAvailable=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("message_popup_get_popup_notifications")})},AddonNotificationsProvider.prototype.markAllNotificationsAsRead=function(){var e={useridto:this.sitesProvider.getCurrentSiteUserId()};return this.sitesProvider.getCurrentSite().write("core_message_mark_all_notifications_as_read",e)},AddonNotificationsProvider.prototype.markNotificationRead=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){if(n.wsAvailable("core_message_mark_notification_read")){var o={notificationid:e,timeread:t.timeUtils.timestamp()};return n.write("core_message_mark_notification_read",o)}return t.messageProvider.markMessageRead(e,n.id)})},AddonNotificationsProvider.prototype.invalidateNotificationPreferences=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getNotificationPreferencesCacheKey())})},AddonNotificationsProvider.prototype.invalidateNotificationsList=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getNotificationsCacheKey())})},AddonNotificationsProvider.prototype.isMarkAllNotificationsAsReadEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_mark_all_notifications_as_read")},AddonNotificationsProvider.prototype.isPreciseNotificationCountEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("message_popup_get_unread_popup_notification_count")},AddonNotificationsProvider.prototype.isNotificationPreferencesEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_message_get_user_notification_preferences")},AddonNotificationsProvider.READ_CHANGED_EVENT="addon_notifications_read_changed_event",AddonNotificationsProvider.READ_CRON_EVENT="addon_notifications_read_cron_event",AddonNotificationsProvider.PUSH_SIMULATION_COMPONENT="AddonNotificationsPushSimulation",AddonNotificationsProvider.LIST_LIMIT=20,AddonNotificationsProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),t(29),function(){function CoreIframeComponent(e,n,t,o,i,l,s,a){this.iframeUtils=n,this.domUtils=t,this.sanitizer=o,this.navCtrl=i,this.urlUtils=l,this.utils=s,this.svComponent=a,this.loaded=new r.r,this.IFRAME_TIMEOUT=15e3,this.logger=e.getInstance("CoreIframe"),this.loaded=new r.r}return CoreIframeComponent.prototype.ngOnInit=function(){var e=this,n=this.iframe&&this.iframe.nativeElement;this.iframeWidth=this.domUtils.formatPixelsSize(this.iframeWidth)||"100%",this.iframeHeight=this.domUtils.formatPixelsSize(this.iframeHeight)||"100%",this.allowFullscreen=this.utils.isTrueOrOne(this.allowFullscreen),this.loading=!this.src||!!this.src.match(/^https?:\/\//i);var t=this.svComponent?this.svComponent.getMasterNav():this.navCtrl;this.iframeUtils.treatFrame(n,!1,t),this.loading&&(n.addEventListener("load",function(){e.loading=!1,e.loaded.emit(n)}),n.addEventListener("error",function(){e.loading=!1,e.domUtils.showErrorModal("core.errorloadingcontent",!0)}),setTimeout(function(){e.loading=!1},this.IFRAME_TIMEOUT))},CoreIframeComponent.prototype.ngOnChanges=function(e){if(e.src){var n=this.urlUtils.getYoutubeEmbedUrl(e.src.currentValue);this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(n||e.src.currentValue)}},CoreIframeComponent=Object(o.__decorate)([Object(o.__param)(7,Object(r.E)())],CoreIframeComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModGlossaryOfflineProvider(n,t,o,r){this.fileProvider=n,this.sitesProvider=t,this.textUtils=o,this.utils=r,this.siteSchema={name:"AddonModGlossaryOfflineProvider",version:1,tables:[{name:e.ENTRIES_TABLE,columns:[{name:"glossaryid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"concept",type:"TEXT"},{name:"definition",type:"TEXT"},{name:"definitionformat",type:"TEXT"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"options",type:"TEXT"},{name:"attachments",type:"TEXT"}],primaryKeys:["glossaryid","concept","timecreated"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModGlossaryOfflineProvider,AddonModGlossaryOfflineProvider.prototype.deleteNewEntry=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){var i={glossaryid:n,concept:t,timecreated:o};return r.getDb().deleteRecords(e.ENTRIES_TABLE,i)})},AddonModGlossaryOfflineProvider.prototype.getAllNewEntries=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.ENTRIES_TABLE).then(function(e){return e.map(t.parseRecord.bind(t))})})},AddonModGlossaryOfflineProvider.prototype.getNewEntry=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={glossaryid:n,concept:t,timecreated:o};return r.getDb().getRecord(e.ENTRIES_TABLE,l).then(i.parseRecord.bind(i))})},AddonModGlossaryOfflineProvider.prototype.getGlossaryNewEntries=function(n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={glossaryid:n,userId:o||t.getUserId()};return t.getDb().getRecords(e.ENTRIES_TABLE,i).then(function(e){return e.map(r.parseRecord.bind(r))})})},AddonModGlossaryOfflineProvider.prototype.isConceptUsed=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(l){var s={glossaryid:n,concept:t};return l.getDb().getRecords(e.ENTRIES_TABLE,s).then(function(e){return!!e.length&&(e.length>1||!o||i.utils.promiseFails(i.getNewEntry(n,t,o,r)))})}).catch(function(){return!1})},AddonModGlossaryOfflineProvider.prototype.addNewEntry=function(n,t,o,r,i,l,s,a,u,d){var c=this;return this.sitesProvider.getSite(a).then(function(a){var p={glossaryid:n,courseid:r,concept:t,definition:o,definitionformat:"html",options:JSON.stringify(i),attachments:JSON.stringify(l),userid:u||a.getUserId(),timecreated:s||(new Date).getTime()};return(d?c.deleteNewEntry(n,d.concept,d.timecreated,a.getId()):Promise.resolve()).then(function(){return a.getDb().insertRecord(e.ENTRIES_TABLE,p).then(function(){return!1})})})},AddonModGlossaryOfflineProvider.prototype.getGlossaryFolder=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=t.fileProvider.getSiteFolder(n.getId());return t.textUtils.concatenatePaths(o,"offlineglossary/"+e)})},AddonModGlossaryOfflineProvider.prototype.getEntryFolder=function(e,n,t,o){var r=this;return this.getGlossaryFolder(e,o).then(function(e){return r.textUtils.concatenatePaths(e,"newentry_"+n+"_"+t)})},AddonModGlossaryOfflineProvider.prototype.parseRecord=function(e){return e.options=this.textUtils.parseJSON(e.options),e.attachments=this.textUtils.parseJSON(e.attachments),e},AddonModGlossaryOfflineProvider.ENTRIES_TABLE="addon_mod_glossary_entrues",AddonModGlossaryOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(311)),i=t(168),l=(t(263),t(333),function(e){function AddonModQuizSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h,m,_){var g=e.call(this,"AddonModQuizSyncProvider",n,t,o,r,i,l,a,m,c)||this;return g.eventsProvider=s,g.quizProvider=u,g.quizOfflineProvider=d,g.prefetchHandler=c,g.questionProvider=p,g.questionDelegate=f,g.logHelper=h,g.courseProvider=_,g.componentTranslate=_.translateModuleName("quiz"),g}return Object(o.__extends)(AddonModQuizSyncProvider,e),n=AddonModQuizSyncProvider,AddonModQuizSyncProvider.prototype.finishSync=function(e,n,t,o,r,i,l,s,a){var u=this;return this.quizProvider.invalidateAllQuizData(n.id,t,r,e).catch(function(){}).then(function(){if(s&&r)return u.quizOfflineProvider.removeAttemptAndAnswers(r,e)}).then(function(){if(a)return u.courseProvider.getModuleBasicInfoByInstance(n.id,"quiz",e).then(function(o){return u.prefetchAfterUpdateQuiz(o,n,t,void 0,e)}).catch(function(){})}).then(function(){return u.setSyncTime(n.id,e).catch(function(){})}).then(function(){return!(!l||u.quizProvider.isAttemptFinished(l.state))&&u.quizProvider.getUserAttempts(n.id,"all",!0,!1,!1,e).then(function(e){for(var n in e){var t=e[n];if(t.id==l.id)return u.quizProvider.isAttemptFinished(t.state)}return!1})}).then(function(e){return{warnings:o,attemptFinished:e}})},AddonModQuizSyncProvider.prototype.hasDataToSync=function(e,n){return this.quizOfflineProvider.getQuizAttempts(e,n).then(function(e){return!!e.length}).catch(function(){return!1})},AddonModQuizSyncProvider.prototype.prefetchAfterUpdateQuiz=function(e,n,t,o,r){var i=this;o=o||/^.*files$/;var l;return this.prefetchDelegate.getModuleUpdates(e,t,!0,r).then(function(n){if(n&&n.updates&&n.updates.length>0&&(l=!n.updates.find(function(e){return e.name.match(o)})))return i.prefetchHandler.download(e,t,void 0,!1,!1)}).then(function(){return i.prefetchHandler.setStatusAfterPrefetch(n,void 0,l,!1,r)})},AddonModQuizSyncProvider.prototype.syncAllQuizzes=function(e,n){return this.syncOnSites("all quizzes",this.syncAllQuizzesFunc.bind(this),[n],e)},AddonModQuizSyncProvider.prototype.syncAllQuizzesFunc=function(e,t){var o=this;return this.quizOfflineProvider.getAllAttempts(e).then(function(r){var l=[],s=[],a=[];return r.forEach(function(e){-1==s.indexOf(e.quizid)&&(s.push(e.quizid),l.push({id:e.quizid,courseid:e.courseid}))}),l.forEach(function(r){o.syncProvider.isBlocked(i.a.COMPONENT,r.id,e)||a.push(o.quizProvider.getQuizById(r.courseid,r.id,!1,!1,e).then(function(r){return(t?o.syncQuiz(r,!1,e):o.syncQuizIfNeeded(r,!1,e)).then(function(n){return n&&n.warnings&&n.warnings.length?o.setSyncWarnings(r.id,n.warnings,e).then(function(){return n}):n}).then(function(t){void 0!==t&&o.eventsProvider.trigger(n.AUTO_SYNCED,{quizId:r.id,attemptFinished:t.attemptFinished,warnings:t.warnings},e)})}))}),Promise.all(a)})},AddonModQuizSyncProvider.prototype.syncQuizIfNeeded=function(e,n,t){var o=this;return this.isSyncNeeded(e.id,t).then(function(r){if(r)return o.syncQuiz(e,n,t)})},AddonModQuizSyncProvider.prototype.syncQuiz=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r,l,s=[],a=e.course;return this.isSyncing(e.id,t)?this.getOngoingSync(e.id,t):this.syncProvider.isBlocked(i.a.COMPONENT,e.id,t)?(this.logger.debug("Cannot sync quiz "+e.id+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync quiz "+e.id+" in site "+t),r=this.logHelper.syncIfNeeded(i.a.COMPONENT,e.id,t).catch(function(){}).then(function(){return o.quizOfflineProvider.getQuizAttempts(e.id,t)}).then(function(r){if(!r.length)return o.finishSync(t,e,a,s);var i=r.pop();return o.quizProvider.getUserAttempts(e.id,"all",!0,!1,!0,t).then(function(r){var u,d=r.length?r[r.length-1].id:void 0;for(var c in r){var p=r[c];if(p.id==i.id){u=p;break}}return!u||o.quizProvider.isAttemptFinished(u.state)?(s.push(o.translate.instant("addon.mod_quiz.warningattemptfinished")),o.finishSync(t,e,a,s,i.id,i,u,!0)):o.quizOfflineProvider.getAttemptAnswers(i.id,t).then(function(r){if(!r.length)return o.finishSync(t,e,a,s,d,i,u,!0);var c,p=o.questionProvider.convertAnswersArrayToObject(r),f=o.quizOfflineProvider.classifyAnswersInQuestions(p);return o.quizProvider.getQuizAccessInformation(e.id,!1,!0,t).then(function(r){return o.prefetchHandler.getPreflightData(e,r,u,n,"core.settings.synchronization",t)}).then(function(n){l=n;var r=o.quizProvider.getPagesFromLayoutAndQuestions(u.layout,f);return o.quizProvider.getAllQuestionsData(e,u,l,r,!1,!0,t)}).then(function(e){return o.validateQuestions(u.id,e,f,t)}).then(function(n){var r=o.quizOfflineProvider.extractAnswersFromQuestions(f);return c=i.finished&&!n,n&&s.push(o.translate.instant(i.finished?"addon.mod_quiz.warningdatadiscardedfromfinished":"addon.mod_quiz.warningdatadiscarded")),o.quizProvider.processAttempt(e,u,r,l,c,!1,!1,t)}).then(function(){if(!c)return o.quizProvider.logViewAttempt(u.id,i.currentpage,l,!1,void 0,t).catch(function(){})}).then(function(){return o.finishSync(t,e,a,s,d,i,u,!0,!0)})})})}),this.addOngoingSync(e.id,r,t))},AddonModQuizSyncProvider.prototype.validateQuestions=function(e,n,t,o){var r=[],i=!1;for(var l in t){var s=t[l],a=n[l];a&&this.questionDelegate.validateSequenceCheck(a,s.answers[":sequencecheck"])?s.answers[":sequencecheck"]=a.sequencecheck:(i=!0,r.push(this.quizOfflineProvider.removeQuestionAndAnswers(e,Number(l),o)),delete t[l])}return Promise.all(r).then(function(){return i})},AddonModQuizSyncProvider.AUTO_SYNCED="addon_mod_quiz_autom_synced",AddonModQuizSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=(t(4),t(304),function(){function AddonNotesProvider(e,n,t,o,r,i,l,s){this.sitesProvider=n,this.appProvider=t,this.utils=o,this.translate=r,this.userProvider=i,this.notesOffline=l,this.pushNotificationsProvider=s,this.ROOT_CACHE_KEY="mmaNotes:",this.logger=e.getInstance("AddonNotesProvider")}return AddonNotesProvider.prototype.addNote=function(e,n,t,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.notesOffline.saveNote(e,n,t,o,r).then(function(){return!1})};return this.appProvider.isOnline()?this.addNoteOnline(e,n,t,o,r).then(function(){return!0}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):l()}):l()},AddonNotesProvider.prototype.addNoteOnline=function(e,n,t,o,r){var i=this;return this.addNotesOnline([{courseid:n,format:1,publishstate:t,text:o,userid:e}],r).then(function(e){return e&&e[0]&&-1===e[0].noteid?Promise.reject(i.utils.createFakeWSError(e[0].errormessage)):i.invalidateNotes(n,void 0,r).catch(function(){})})},AddonNotesProvider.prototype.addNotesOnline=function(e,n){return e&&e.length?this.sitesProvider.getSite(n).then(function(n){return n.write("core_notes_create_notes",{notes:e})}):Promise.resolve([])},AddonNotesProvider.prototype.deleteNote=function(e,n,t){var o=this;if(t=t||this.sitesProvider.getCurrentSiteId(),e.offline)return this.notesOffline.deleteOfflineNote(e.userid,e.content,e.created,t);var r=function(){return o.notesOffline.deleteNote(e.id,n,t).then(function(){return!1})};return this.appProvider.isOnline()?this.deleteNotesOnline([e.id],n,t).then(function(){return!0}).catch(function(e){return o.utils.isWebServiceError(e)?Promise.reject(e):r()}):r()},AddonNotesProvider.prototype.deleteNotesOnline=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(r){return r.write("core_notes_delete_notes",{notes:e}).then(function(e){return o.invalidateNotes(n,void 0,t).catch(function(){})})})},AddonNotesProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.canUseAdvancedFeature("enablenotes")})},AddonNotesProvider.prototype.isPluginAddNoteEnabledForCourse=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return t.utils.promiseWorks(n.read("core_notes_create_notes",{notes:[{userid:-1,publishstate:"personal",courseid:e,text:"",format:1}]},{updateFrequency:o.a.FREQUENCY_RARELY}))})},AddonNotesProvider.prototype.isPluginViewNotesEnabledForCourse=function(e,n){return this.utils.promiseWorks(this.getNotes(e,void 0,!1,!0,n))},AddonNotesProvider.prototype.getNotesPrefixCacheKey=function(e){return this.ROOT_CACHE_KEY+"notes:"+e+":"},AddonNotesProvider.prototype.getNotesCacheKey=function(e,n){return this.getNotesPrefixCacheKey(e)+(n||"")},AddonNotesProvider.prototype.getNotes=function(e,n,t,r,i){var l=this;return this.logger.debug("Get notes for course "+e),this.sitesProvider.getSite(i).then(function(s){var a={courseid:e};n&&(a.userid=n);var u={cacheKey:l.getNotesCacheKey(e,n),updateFrequency:o.a.FREQUENCY_SOMETIMES};return t&&(u.getFromCache=!1,u.emergencyCache=!1),s.read("core_notes_get_course_notes",a,u).then(function(t){return r?t:l.notesOffline.getNotesForCourseAndUser(e,n,i).then(function(e){return e.forEach(function(e){var n=e.publishstate+"notes";t[n]||(t[n]=[]),e.offline=!0,t[n].unshift(e)}),t})})})},AddonNotesProvider.prototype.setOfflineDeletedNotes=function(e,n,t){return this.notesOffline.getCourseDeletedNotes(n,t).then(function(n){return e.forEach(function(e){e.deleted=n.some(function(n){return n.noteid==e.id})}),e})},AddonNotesProvider.prototype.getNotesUserData=function(e,n){var t=this,o=e.map(function(e){return t.userProvider.getProfile(e.userid,e.courseid,!0).then(function(n){e.userfullname=n.fullname,e.userprofileimageurl=n.profileimageurl||null}).catch(function(){e.userfullname=t.translate.instant("addon.notes.userwithid",{id:e.userid})})});return Promise.all(o).then(function(){return e})},AddonNotesProvider.prototype.invalidateNotes=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return n?t.invalidateWsCacheForKey(o.getNotesCacheKey(e,n)):t.invalidateWsCacheForKeyStartingWith(o.getNotesPrefixCacheKey(e))})},AddonNotesProvider.prototype.logView=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={courseid:e,userid:n||0};return o.pushNotificationsProvider.logViewListEvent("notes","core_notes_view_notes",r,t.getId()),t.write("core_notes_view_notes",r)})},AddonNotesProvider}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(168),r=function(){function AddonModQuizOfflineProvider(n,t,o,r,i,l,s){this.sitesProvider=t,this.timeUtils=o,this.questionProvider=r,this.translate=i,this.utils=l,this.behaviourDelegate=s,this.siteSchema={name:"AddonModQuizOfflineProvider",version:1,tables:[{name:e.ATTEMPTS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"attempt",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"quizid",type:"INTEGER"},{name:"currentpage",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"finished",type:"INTEGER"}]}]},this.logger=n.getInstance("AddonModQuizOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModQuizOfflineProvider,AddonModQuizOfflineProvider.prototype.classifyAnswersInQuestions=function(e){var n={};for(var t in e){var o=this.questionProvider.getQuestionSlotFromName(t),r=this.questionProvider.removeQuestionPrefix(t);n[o]||(n[o]={answers:{},prefix:t.substr(0,t.indexOf(r))}),n[o].answers[r]=e[t]}return n},AddonModQuizOfflineProvider.prototype.extractAnswersFromQuestions=function(e){var n={};for(var t in e){var o=e[t];for(var r in o.answers)n[o.prefix+r]=o.answers[r]}return n},AddonModQuizOfflineProvider.prototype.getAllAttempts=function(n){return this.sitesProvider.getSiteDb(n).then(function(n){return n.getAllRecords(e.ATTEMPTS_TABLE)})},AddonModQuizOfflineProvider.prototype.getAttemptAnswers=function(e,n){return this.questionProvider.getAttemptAnswers(o.a.COMPONENT,e,n)},AddonModQuizOfflineProvider.prototype.getAttemptById=function(n,t){return this.sitesProvider.getSiteDb(t).then(function(t){return t.getRecord(e.ATTEMPTS_TABLE,{id:n})})},AddonModQuizOfflineProvider.prototype.getQuizAttempts=function(n,t,o){return this.sitesProvider.getSite(t).then(function(t){return o=o||t.getUserId(),t.getDb().getRecords(e.ATTEMPTS_TABLE,{quizid:n,userid:o})})},AddonModQuizOfflineProvider.prototype.loadQuestionsLocalStates=function(e,n,t){var r=this,i=[];return n.forEach(function(n){i.push(r.questionProvider.getQuestion(o.a.COMPONENT,e,n.slot,t).then(function(e){var t=r.questionProvider.getState(e.state);n.state=e.state,n.status=r.translate.instant("core.question."+t.status)}).catch(function(){}))}),Promise.all(i).then(function(){return n})},AddonModQuizOfflineProvider.prototype.processAttempt=function(n,t,o,r,i,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId();var a,u=this.timeUtils.timestamp();return this.sitesProvider.getSiteDb(l).then(function(e){return a=e,s.getAttemptById(t.id,l).catch(function(){return{quizid:n.id,userid:t.userid,id:t.id,courseid:n.course,timecreated:u,attempt:t.attempt,currentpage:t.currentpage}})}).then(function(n){return n.timemodified=u,n.finished=i?1:0,a.insertRecord(e.ATTEMPTS_TABLE,n)}).then(function(){return s.saveAnswers(n,t,o,r,u,l)})},AddonModQuizOfflineProvider.prototype.removeAttemptAndAnswers=function(n,t){t=t||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.questionProvider.removeAttemptAnswers(o.a.COMPONENT,n,t)),r.push(this.questionProvider.removeAttemptQuestions(o.a.COMPONENT,n,t)),r.push(this.sitesProvider.getSiteDb(t).then(function(t){return t.deleteRecords(e.ATTEMPTS_TABLE,{id:n})})),Promise.all(r)},AddonModQuizOfflineProvider.prototype.removeQuestionAndAnswers=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.questionProvider.removeQuestion(o.a.COMPONENT,e,n,t)),r.push(this.questionProvider.removeQuestionAnswers(o.a.COMPONENT,e,n,t)),Promise.all(r)},AddonModQuizOfflineProvider.prototype.saveAnswers=function(e,n,t,r,i,l){var s=this;l=l||this.sitesProvider.getCurrentSiteId(),i=i||this.timeUtils.timestamp();var a={},u={},d=[];for(var c in r){var p=this.questionProvider.getQuestionSlotFromName(c),f=this.questionProvider.removeQuestionPrefix(c);t[p]&&(a[p]||(a[p]=t[p],a[p].answers={}),a[p].answers[f]=r[c])}var h=function(t){var r=a[t];d.push(m.behaviourDelegate.determineNewState(e.preferredbehaviour,o.a.COMPONENT,n.id,r,l).then(function(e){e&&e.name!=r.state&&(u[r.slot]=e.name)}))},m=this;for(var p in a)h(p);return Promise.all(d).then(function(){return s.questionProvider.saveAnswers(o.a.COMPONENT,e.id,n.id,n.userid,r,i,l)}).then(function(){d=[];for(var t in u){d.push(s.questionProvider.saveQuestion(o.a.COMPONENT,e.id,n.id,n.userid,a[t],u[t],l))}return s.utils.allPromises(d).catch(function(e){s.logger.error("Error saving question state",e)})})},AddonModQuizOfflineProvider.prototype.setAttemptCurrentPage=function(n,t,o){return this.sitesProvider.getSiteDb(o).then(function(o){return o.updateRecords(e.ATTEMPTS_TABLE,{currentpage:t},{id:n})})},AddonModQuizOfflineProvider.ATTEMPTS_TABLE="addon_mod_quiz_attempts",AddonModQuizOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(234),r=function(){function AddonModScormOfflineProvider(n,t,o,r,i,l,s){this.sitesProvider=t,this.timeUtils=o,this.syncProvider=r,this.utils=i,this.textUtils=l,this.userProvider=s,this.siteSchema={name:"AddonModScormOfflineProvider",version:1,tables:[{name:e.ATTEMPTS_TABLE,columns:[{name:"scormid",type:"INTEGER",notNull:!0},{name:"attempt",type:"INTEGER",notNull:!0},{name:"userid",type:"INTEGER",notNull:!0},{name:"courseid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"snapshot",type:"TEXT"}],primaryKeys:["scormid","userid","attempt"]},{name:e.TRACKS_TABLE,columns:[{name:"scormid",type:"INTEGER",notNull:!0},{name:"attempt",type:"INTEGER",notNull:!0},{name:"userid",type:"INTEGER",notNull:!0},{name:"scoid",type:"INTEGER",notNull:!0},{name:"element",type:"TEXT",notNull:!0},{name:"value",type:"TEXT"},{name:"timemodified",type:"INTEGER"},{name:"synced",type:"INTEGER"}],primaryKeys:["scormid","userid","attempt","scoid","element"]}]},this.logger=n.getInstance("AddonModScormOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModScormOfflineProvider,AddonModScormOfflineProvider.prototype.changeAttemptNumber=function(n,t,r,i,l){var s=this;return this.sitesProvider.getSite(i).then(function(i){l=l||i.getUserId(),s.logger.debug("Change attempt number from "+t+" to "+r+" in SCORM "+n);var a=i.getDb(),u={scormid:n,userid:l,attempt:t},d={scormid:n,userid:l,attempt:r},c={attempt:r,timemodified:s.timeUtils.timestamp()};return s.syncProvider.blockOperation(o.a.COMPONENT,n,"changeAttemptNumber",i.id),a.updateRecords(e.ATTEMPTS_TABLE,c,u).then(function(){return c={attempt:r,synced:0},a.updateRecords(e.TRACKS_TABLE,c,u).catch(function(n){return a.updateRecords(e.ATTEMPTS_TABLE,{attempt:t},d).then(function(){return Promise.reject(n)})})}).finally(function(){s.syncProvider.unblockOperation(o.a.COMPONENT,n,"changeAttemptNumber",i.id)})})},AddonModScormOfflineProvider.prototype.createNewAttempt=function(n,t,r,i,l,s){var a=this;return this.sitesProvider.getSite(l).then(function(l){s=s||l.getUserId(),a.logger.debug("Creating new offline attempt "+t+" in SCORM "+n.id),a.syncProvider.blockOperation(o.a.COMPONENT,n.id,"createNewAttempt",l.id);var u=l.getDb(),d={scormid:n.id,userid:s,attempt:t,courseid:n.course,timecreated:a.timeUtils.timestamp(),timemodified:a.timeUtils.timestamp(),snapshot:null};return i&&(d.snapshot=JSON.stringify(a.removeDefaultData(i))),u.insertRecord(e.ATTEMPTS_TABLE,d).then(function(){var e=[];for(var o in r){var i=r[o],u=[];for(var d in i.userdata)u.push({element:d,value:i.userdata[d]});e.push(a.saveTracks(n,i.scoid,t,u,r,l.id,s))}return Promise.all(e)}).finally(function(){a.syncProvider.unblockOperation(o.a.COMPONENT,n.id,"createNewAttempt",l.id)})})},AddonModScormOfflineProvider.prototype.deleteAttempt=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){r=r||o.getUserId(),i.logger.debug("Delete offline attempt "+t+" in SCORM "+n);var l=[],s=o.getDb();return l.push(s.deleteRecords(e.ATTEMPTS_TABLE,{scormid:n,userid:r,attempt:t})),l.push(s.deleteRecords(e.TRACKS_TABLE,{scormid:n,userid:r,attempt:t})),Promise.all(l)})},AddonModScormOfflineProvider.prototype.formatInteractions=function(e){var n={};n.score_raw="",n.status="",n.total_time="00:00:00",n.session_time="00:00:00";for(var t in e){var o=e[t];if("score_raw"==t||"status"==t||"total_time"==t||"session_time"==t)return;switch(n[t]=o,t){case"cmi.core.lesson_status":case"cmi.completion_status":"not attempted"==o&&(o="notattempted"),n.status=o;break;case"cmi.core.score.raw":case"cmi.score.raw":n.score_raw=this.textUtils.roundToDecimals(o,2);break;case"cmi.core.session_time":case"cmi.session_time":n.session_time=o;break;case"cmi.core.total_time":case"cmi.total_time":n.total_time=o}}return n},AddonModScormOfflineProvider.prototype.getAllAttempts=function(n){var t=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.getAllRecords(e.ATTEMPTS_TABLE)}).then(function(e){return e.forEach(function(e){e.snapshot=t.textUtils.parseJSON(e.snapshot)}),e})},AddonModScormOfflineProvider.prototype.getAttempt=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(o).then(function(o){return r=r||o.getUserId(),o.getDb().getRecord(e.ATTEMPTS_TABLE,{scormid:n,userid:r,attempt:t})}).then(function(e){return e.snapshot=i.textUtils.parseJSON(e.snapshot),e})},AddonModScormOfflineProvider.prototype.getAttemptCreationTime=function(e,n,t,o){return this.getAttempt(e,n,t,o).catch(function(){return{}}).then(function(e){return e.timecreated})},AddonModScormOfflineProvider.prototype.getAttempts=function(n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){return o=o||t.getUserId(),t.getDb().getRecords(e.ATTEMPTS_TABLE,{scormid:n,userid:o})}).then(function(e){return e.forEach(function(e){e.snapshot=r.textUtils.parseJSON(e.snapshot)}),e})},AddonModScormOfflineProvider.prototype.getAttemptSnapshot=function(e,n,t,o){return this.getAttempt(e,n,t,o).catch(function(){return{}}).then(function(e){return e.snapshot})},AddonModScormOfflineProvider.prototype.getLaunchUrlsFromScos=function(e){var n={};return(e=e||[]).forEach(function(e){n[e.id]=e.launch}),n},AddonModScormOfflineProvider.prototype.getScormStoredData=function(n,t,o,r,i,l){var s=this;return o&&r?Promise.resolve([]):this.sitesProvider.getSite(i).then(function(i){l=l||i.getUserId();var s={scormid:n,userid:l,attempt:t};return o?s.synced=0:r&&(s.synced=1),i.getDb().getRecords(e.TRACKS_TABLE,s)}).then(function(e){return e.forEach(function(e){e.value=s.textUtils.parseJSON(e.value)}),e})},AddonModScormOfflineProvider.prototype.getScormUserData=function(e,n,t,o,r){var i=this;t=t||[];var l="",s="";return this.sitesProvider.getSite(o).then(function(e){if((r=r||e.getUserId())!=e.getUserId())return i.userProvider.getProfile(r).then(function(e){l=e.fullname,s=e.username||""}).catch(function(){});l=e.getInfo().fullname,s=e.getInfo().username}).then(function(){return i.getScormStoredData(e,n,!1,!1,o,r).then(function(e){var n={},o=i.getLaunchUrlsFromScos(t);e.forEach(function(e){var t=e.scoid;n[t]||(n[t]={scoid:t,userdata:{userid:r,scoid:t,timemodified:0}}),n[t].userdata[e.element]=e.value,e.timemodified>n[t].userdata.timemodified&&(n[t].userdata.timemodified=e.timemodified)});for(var a in n){(u=n[a]).userdata=i.formatInteractions(u.userdata)}t.forEach(function(e){n[e.id]||(n[e.id]={scoid:e.id,userdata:{status:"",score_raw:""}})});for(var a in n){var u;(u=n[a]).defaultdata={},u.defaultdata["cmi.core.student_id"]=s,u.defaultdata["cmi.core.student_name"]=l,u.defaultdata["cmi.core.lesson_mode"]="normal",u.defaultdata["cmi.core.credit"]="credit",u.defaultdata["cmi.core.entry"]=""===u.userdata.status?"ab-initio":"suspend"===u.userdata["cmi.core.exit"]?"resume":"",u.defaultdata["cmi.student_data.mastery_score"]=i.scormIsset(u.userdata,"masteryscore"),u.defaultdata["cmi.student_data.max_time_allowed"]=i.scormIsset(u.userdata,"max_time_allowed"),u.defaultdata["cmi.student_data.time_limit_action"]=i.scormIsset(u.userdata,"time_limit_action"),u.defaultdata["cmi.core.total_time"]=i.scormIsset(u.userdata,"cmi.core.total_time","00:00:00"),u.defaultdata["cmi.launch_data"]=o[u.scoid],u.defaultdata["cmi.core.lesson_location"]=i.scormIsset(u.userdata,"cmi.core.lesson_location"),u.defaultdata["cmi.core.lesson_status"]=i.scormIsset(u.userdata,"cmi.core.lesson_status"),u.defaultdata["cmi.core.score.raw"]=i.scormIsset(u.userdata,"cmi.core.score.raw"),u.defaultdata["cmi.core.score.max"]=i.scormIsset(u.userdata,"cmi.core.score.max"),u.defaultdata["cmi.core.score.min"]=i.scormIsset(u.userdata,"cmi.core.score.min"),u.defaultdata["cmi.core.exit"]=i.scormIsset(u.userdata,"cmi.core.exit"),u.defaultdata["cmi.suspend_data"]=i.scormIsset(u.userdata,"cmi.suspend_data"),u.defaultdata["cmi.comments"]=i.scormIsset(u.userdata,"cmi.comments"),u.defaultdata["cmi.student_preference.language"]=i.scormIsset(u.userdata,"cmi.student_preference.language"),u.defaultdata["cmi.student_preference.audio"]=i.scormIsset(u.userdata,"cmi.student_preference.audio","0"),u.defaultdata["cmi.student_preference.speed"]=i.scormIsset(u.userdata,"cmi.student_preference.speed","0"),u.defaultdata["cmi.student_preference.text"]=i.scormIsset(u.userdata,"cmi.student_preference.text","0"),u.userdata.student_id=s,u.userdata.student_name=l,u.userdata.mode=u.defaultdata["cmi.core.lesson_mode"],u.userdata.credit=u.defaultdata["cmi.core.credit"],u.userdata.entry=u.defaultdata["cmi.core.entry"]}return n})})},AddonModScormOfflineProvider.prototype.insertTrack=function(e,n,t,o,r,i,l,s,a){var u=this;return this.sitesProvider.getSite(s).then(function(s){a=a||s.getUserId();var d=[],c=(l=l||{}).userdata||{},p=s.getDb(),f=!1;return i&&("cmi.core.lesson_status"==o&&"incomplete"==r&&c["cmi.core.score.raw"]&&(r="completed"),"cmi.core.score.raw"==o&&"incomplete"==c["cmi.core.lesson_status"]&&(f=!0,d.push(u.insertTrackToDB(p,a,e,n,t,"cmi.core.lesson_status","completed")))),Promise.all(d).then(function(){if(!c[o]||"x.start.time"!=o){var i=u.insertTrackToDB(p,a,e,n,t,o,r);return i.catch(function(o){return f?(i=u.insertTrackToDB(p,a,e,n,t,"cmi.core.lesson_status","incomplete")).then(function(){return Promise.reject(o)}):Promise.reject(null)})}})})},AddonModScormOfflineProvider.prototype.insertTrackToDB=function(n,t,o,r,i,l,s,a){var u={userid:t,scormid:o,scoid:r,attempt:i,element:l,value:void 0===s?null:JSON.stringify(s),timemodified:this.timeUtils.timestamp(),synced:0};return a?(n.insertRecord(e.TRACKS_TABLE,u),!0):n.insertRecord(e.TRACKS_TABLE,u)},AddonModScormOfflineProvider.prototype.insertTrackSync=function(e,n,t,o,r,i,l,s){if(l=l||{},s=s||this.sitesProvider.getCurrentSiteUserId(),!this.sitesProvider.isLoggedIn())return!1;var a=l.userdata||{},u=this.sitesProvider.getCurrentSite().getDb(),d=!1;return!(i&&("cmi.core.lesson_status"==o&&"incomplete"==r&&a["cmi.core.score.raw"]&&(r="completed"),"cmi.core.score.raw"==o&&"incomplete"==a["cmi.core.lesson_status"]&&(d=!0,!this.insertTrackToDB(u,s,e,n,t,"cmi.core.lesson_status","completed",!0))))&&(a[o]&&"x.start.time"==o?void 0:!!this.insertTrackToDB(u,s,e,n,t,o,r,!0)||(d&&this.insertTrackToDB(u,s,e,n,t,"cmi.core.lesson_status","incomplete",!0),!1))},AddonModScormOfflineProvider.prototype.markAsSynced=function(n,t,o,r,i){var l=this;return this.sitesProvider.getSite(r).then(function(r){return i=i||r.getUserId(),l.logger.debug("Mark SCO "+o+" as synced for attempt "+t+" in SCORM "+n),r.getDb().updateRecords(e.TRACKS_TABLE,{synced:1},{scormid:n,userid:i,attempt:t,scoid:o,synced:0})})},AddonModScormOfflineProvider.prototype.removeDefaultData=function(e){var n=this.utils.clone(e);for(var t in n)delete n[t].defaultdata;return n},AddonModScormOfflineProvider.prototype.saveTracks=function(e,n,t,r,i,l,s){var a=this;return this.sitesProvider.getSite(l).then(function(u){s=s||u.getUserId(),a.syncProvider.blockOperation(o.a.COMPONENT,e.id,"saveTracksOffline",l);var d=[];return r.forEach(function(o){d.push(a.insertTrack(e.id,n,t,o.element,o.value,e.forcecompleted,i[n],l,s))}),Promise.all(d).finally(function(){a.syncProvider.unblockOperation(o.a.COMPONENT,e.id,"saveTracksOffline",l)})})},AddonModScormOfflineProvider.prototype.saveTracksSync=function(e,n,t,o,r,i){var l=this;i=i||this.sitesProvider.getCurrentSiteUserId();var s=!0;return o.forEach(function(o){l.insertTrackSync(e.id,n,t,o.element,o.value,e.forcecompleted,r[n],i)||(s=!1)}),s},AddonModScormOfflineProvider.prototype.scormIsset=function(e,n,t){return void 0===t&&(t=""),void 0!==e[n]?e[n]:t},AddonModScormOfflineProvider.prototype.setAttemptSnapshot=function(n,t,o,r,i){var l=this;return this.sitesProvider.getSite(r).then(function(r){i=i||r.getUserId(),l.logger.debug("Set snapshot for attempt "+t+" in SCORM "+n);var s={timemodified:l.timeUtils.timestamp(),snapshot:JSON.stringify(l.removeDefaultData(o))};return r.getDb().updateRecords(e.ATTEMPTS_TABLE,s,{scormid:n,userid:i,attempt:t})})},AddonModScormOfflineProvider.ATTEMPTS_TABLE="addon_mod_scorm_offline_attempts",AddonModScormOfflineProvider.TRACKS_TABLE="addon_mod_scorm_offline_scos_tracks",AddonModScormOfflineProvider;var e}()},,,,function(e,n,t){"use strict";t.d(n,"a",function(){return m});t(0);var o=t(1),r=t(6),i=t(4),l=t(7),s=t(5),a=t(12),u=t(39),d=t(62),c=t(1572),p=t(16),f=t(208),h=t(42),m=function(){function CoreCourseModuleMainResourceComponent(e,n){void 0===n&&(n="CoreCourseModuleMainResourceComponent"),this.fetchContentDefaultError="core.course.errorgetmodule",this.textUtils=e.get(a.a),this.courseHelper=e.get(u.a),this.translate=e.get(i.b),this.domUtils=e.get(s.a),this.moduleDelegate=e.get(d.a),this.courseSectionPage=e.get(c.a,null),this.linkHelper=e.get(p.a),this.navCtrl=e.get(r.g,null),this.blogProvider=e.get(f.a,null),this.dataRetrieved=new o.r;var t=e.get(l.a);this.logger=t.getInstance(n)}return CoreCourseModuleMainResourceComponent.prototype.ngOnInit=function(){var e=this;this.description=this.module.description,this.componentId=this.module.id,this.externalUrl=this.module.url,this.loaded=!1,this.refreshIcon="spinner",this.blogProvider.isPluginEnabled().then(function(n){e.blog=n})},CoreCourseModuleMainResourceComponent.prototype.doRefresh=function(e,n,t){var o=this;if(void 0===t&&(t=!1),this.loaded&&this.module){return(this.courseSectionPage&&!this.moduleDelegate.displayRefresherInSingleActivity(this.module.modname)?this.courseSectionPage.doRefresh():Promise.resolve()).finally(function(){return o.refreshContent(!0,t).finally(function(){e&&e.complete(),n&&n()})})}return Promise.resolve()},CoreCourseModuleMainResourceComponent.prototype.refreshContent=function(e,n){var t=this;if(void 0===e&&(e=!1),void 0===n&&(n=!1),!this.module)return Promise.resolve();this.refreshIcon="spinner";var o;try{o=this.invalidateContent()}catch(e){this.logger.error(e),o=Promise.resolve()}return o.catch(function(){}).then(function(){return t.loadContent(!0)}).finally(function(){t.refreshIcon="refresh"})},CoreCourseModuleMainResourceComponent.prototype.invalidateContent=function(){return Promise.resolve()},CoreCourseModuleMainResourceComponent.prototype.fetchContent=function(e){return Promise.resolve()},CoreCourseModuleMainResourceComponent.prototype.loadContent=function(e){var n=this;if(!this.module)return Promise.resolve();var t;try{t=this.fetchContent(e)}catch(e){this.logger.error(e),t=Promise.resolve()}return t.catch(function(e){n.domUtils.showErrorModalDefault(e,n.fetchContentDefaultError,!0)}).finally(function(){n.loaded=!0,n.refreshIcon="refresh"})},CoreCourseModuleMainResourceComponent.prototype.fillContextMenu=function(e){void 0===e&&(e=!1),this.courseHelper.fillContextMenu(this,this.module,this.courseId,e,this.component)},CoreCourseModuleMainResourceComponent.prototype.isPrefetched=function(){return this.prefetchStatus!=h.a.NOT_DOWNLOADABLE&&this.prefetchStatus!=h.a.NOT_DOWNLOADED},CoreCourseModuleMainResourceComponent.prototype.expandDescription=function(){this.textUtils.expandText(this.translate.instant("core.description"),this.description,this.component,this.module.id,[],!0,"module",this.module.id,this.courseId)},CoreCourseModuleMainResourceComponent.prototype.gotoBlog=function(e){this.linkHelper.goInSite(this.navCtrl,"AddonBlogEntriesPage",{cmId:this.module.id})},CoreCourseModuleMainResourceComponent.prototype.prefetch=function(e){this.courseHelper.contextMenuPrefetch(this,this.module,this.courseId,e)},CoreCourseModuleMainResourceComponent.prototype.removeFiles=function(){this.courseHelper.confirmAndRemoveFiles(this.module,this.courseId)},CoreCourseModuleMainResourceComponent.prototype.showErrorDownloadingSomeFiles=function(e){var n=this.textUtils.buildSeveralParagraphsMessage([this.translate.instant("core.errordownloadingsomefiles"),e]);this.domUtils.showErrorModal(n)},CoreCourseModuleMainResourceComponent.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.contextMenuStatusObserver&&this.contextMenuStatusObserver.off()},CoreCourseModuleMainResourceComponent.prototype.ionViewDidEnter=function(){this.isCurrentView=!0},CoreCourseModuleMainResourceComponent.prototype.ionViewDidLeave=function(){this.isCurrentView=!1},CoreCourseModuleMainResourceComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreSitePluginsCompileInitComponent(e,n){this.sitePluginsProvider=e,this.utils=n,this.content="",this.jsData={}}return CoreSitePluginsCompileInitComponent.prototype.componentCreated=function(e){e&&this.handlerSchema&&this.handlerSchema.methodJSResult&&this.handlerSchema.methodJSResult.componentInit&&this.handlerSchema.methodJSResult.componentInit.apply(e)},CoreSitePluginsCompileInitComponent.prototype.getHandlerData=function(e){var n=this.sitePluginsProvider.getSitePluginHandler(e);this.handlerSchema=n&&n.handlerSchema,this.handlerSchema&&(this.handlerSchema.methodTemplates&&this.handlerSchema.methodTemplates.length&&(this.content=n.handlerSchema.methodTemplates[0].html,this.jsData.CONTENT_TEMPLATES=this.utils.objectToKeyValueMap(n.handlerSchema.methodTemplates,"id","html")),this.handlerSchema.methodOtherdata&&(this.jsData.CONTENT_OTHERDATA=this.handlerSchema.methodOtherdata),this.handlerSchema.methodJSResult&&(this.jsData.CONTENT_JS_RESULT=this.handlerSchema.methodJSResult))},CoreSitePluginsCompileInitComponent}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(226),t(158),t(384);var o=function(){return function CoreBlockComponentsModule(){}}()},function(e,n,t){"use strict";function View_CoreEditorRichTextEditorComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"div",[["class","core-rte-info-message"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n        ","\n    "])),o._32(131072,l.a,[s.a,o.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,5).transform(t.infoMessage)))})}function View_CoreEditorRichTextEditorComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"button",[["class","toolbar-arrow"]],[[2,"toolbar-arrow-hidden",null]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.toolbarPrev(t)&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,"arrow-back","ios-arrow-back")},function(e,n){e(n,0,0,n.component.toolbarPrevHidden);e(n,2,0,o._29(n,3)._hidden)})}function View_CoreEditorRichTextEditorComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(1,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(3,0,null,0,5,"button",[],[[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.hideToolbar(t)&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(6,0,null,null,1,"core-icon",[["name","fa-close"]],null,null,null,c.b,c.a)),o._15(7,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "]))],function(e,n){e(n,7,0,"fa-close")},function(e,n){e(n,3,0,o._41(n,3,0,o._29(n,4).transform("core.editor.hidetoolbar")))})}function View_CoreEditorRichTextEditorComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"button",[["class","toolbar-arrow"]],[[2,"toolbar-arrow-hidden",null]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.toolbarNext(t)&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,0,0,n.component.toolbarNextHidden);e(n,2,0,o._29(n,3)._hidden)})}function View_CoreEditorRichTextEditorComponent_0(e){return o._42(0,[o._37(402653184,1,{editor:0}),o._37(402653184,2,{textarea:0}),o._37(402653184,3,{toolbar:0}),o._37(402653184,4,{toolbarSlides:0}),(e()(),o._16(4,0,null,null,10,"div",[["class","core-rte-editor-container"]],[[2,"toolbar-hidden",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.focusRTE()&&o}return o},null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(6,0,[[1,0],["editor",1]],null,1,"div",[["class","core-rte-editor"],["contenteditable","true"],["role","textbox"],["tappable",""]],[[8,"hidden",0],[1,"data-placeholder-text",0]],[[null,"focus"],[null,"longPress"],[null,"blur"]],function(e,n,t){var o=!0,r=e.component;if("focus"===n){o=!1!==r.showToolbar(t)&&o}if("longPress"===n){o=!1!==r.showToolbar(t)&&o}if("blur"===n){o=!1!==r.hideToolbar(t)&&o}return o},null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n\n    "])),(e()(),o._16(9,0,null,null,1,"ion-textarea",[["class","core-textarea"],["ngControl","control"],["role","textbox"]],[[8,"hidden",0],[1,"name",0]],[[null,"ionChange"],[null,"focus"],[null,"longPress"],[null,"blur"]],function(e,n,t){var o=!0,r=e.component;if("ionChange"===n){o=!1!==r.onChange(t)&&o}if("focus"===n){o=!1!==r.showToolbar(t)&&o}if("longPress"===n){o=!1!==r.showToolbar(t)&&o}if("blur"===n){o=!1!==r.hideToolbar(t)&&o}return o},f.b,f.a)),o._15(10,5423104,[[2,4],["textarea",4]],0,h.a,[i.a,m.a,_.a,g.a,o.p,o.K,[2,v.a],[2,C.a],[2,y.m],P.a],{placeholder:[0,"placeholder"]},{ionChange:"ionChange",blur:"blur",focus:"focus"}),(e()(),o._40(-1,null,["\n\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreEditorRichTextEditorComponent_1)),o._15(13,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._16(16,0,[[3,0],["toolbar",1]],null,147,"div",[["class","core-rte-toolbar"]],[[2,"toolbar-hidden",null]],null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreEditorRichTextEditorComponent_2)),o._15(19,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(21,0,null,null,138,"ion-slides",[],null,[[null,"ionSlideDidChange"]],function(e,n,t){var o=!0;if("ionSlideDidChange"===n){o=!1!==e.component.updateToolbarArrows()&&o}return o},b.b,b.a)),o._15(22,1228800,[[4,4]],0,d.a,[i.a,m.a,o.D,[2,I.a],o.p,o.K],{slidesPerView:[0,"slidesPerView"]},{ionSlideDidChange:"ionSlideDidChange"}),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(25,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(26,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(28,0,null,0,5,"button",[],[[8,"disabled",0],[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"bold","b")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(31,0,null,null,1,"core-icon",[["name","fa-bold"]],null,null,null,c.b,c.a)),o._15(32,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(36,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(37,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(39,0,null,0,5,"button",[],[[8,"disabled",0],[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"italic","i")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(42,0,null,null,1,"core-icon",[["name","fa-italic"]],null,null,null,c.b,c.a)),o._15(43,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(47,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(48,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(50,0,null,0,5,"button",[],[[8,"disabled",0],[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"underline","u")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(53,0,null,null,1,"core-icon",[["name","fa-underline"]],null,null,null,c.b,c.a)),o._15(54,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(58,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(59,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(61,0,null,0,5,"button",[],[[8,"disabled",0],[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"strikethrough","strike")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(64,0,null,null,1,"core-icon",[["name","fa-strikethrough"]],null,null,null,c.b,c.a)),o._15(65,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(69,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(70,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(72,0,null,0,5,"button",[],[[8,"disabled",0],[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"p","block")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(75,0,null,null,1,"core-icon",[["name","fa-paragraph"]],null,null,null,c.b,c.a)),o._15(76,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(80,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(81,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(83,0,null,0,5,"button",[],[[8,"disabled",0],[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"h3","block")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(86,0,null,null,1,"core-icon",[["name","fa-header"]],null,null,null,c.b,c.a)),o._15(87,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["3\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(91,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(92,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(94,0,null,0,5,"button",[],[[8,"disabled",0],[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"h4","block")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(97,0,null,null,1,"core-icon",[["name","fa-header"]],null,null,null,c.b,c.a)),o._15(98,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["4\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(102,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(103,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(105,0,null,0,5,"button",[],[[8,"disabled",0],[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"h5","block")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(108,0,null,null,1,"core-icon",[["name","fa-header"]],null,null,null,c.b,c.a)),o._15(109,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["5\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(113,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(114,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(116,0,null,0,5,"button",[],[[8,"disabled",0],[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"insertUnorderedList")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(119,0,null,null,1,"core-icon",[["name","fa-list-ul"]],null,null,null,c.b,c.a)),o._15(120,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(124,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(125,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(127,0,null,0,5,"button",[],[[8,"disabled",0],[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"insertOrderedList")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(130,0,null,null,1,"core-icon",[["name","fa-list-ol"]],null,null,null,c.b,c.a)),o._15(131,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(135,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(136,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(138,0,null,0,5,"button",[],[[8,"disabled",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.buttonAction(t,"removeFormat")&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(141,0,null,null,1,"core-icon",[["name","fa-eraser"]],null,null,null,c.b,c.a)),o._15(142,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(146,0,null,0,9,"ion-slide",[],null,null,null,a.b,a.a)),o._15(147,180224,null,0,u.a,[o.p,o.K,d.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(149,0,null,0,5,"button",[],[[1,"aria-pressed",0],[8,"title",0]],[[null,"click"],[null,"mousedown"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.toggleEditor(t)&&o}if("mousedown"===n){o=!1!==r.mouseDownAction(t)&&o}return o},null,null)),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(152,0,null,null,1,"core-icon",[["name","fa-code"]],null,null,null,c.b,c.a)),o._15(153,704512,null,0,p.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_CoreEditorRichTextEditorComponent_3)),o._15(158,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreEditorRichTextEditorComponent_4)),o._15(162,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,10,0,t.placeholder);e(n,13,0,t.infoMessage);e(n,19,0,t.toolbarArrows);e(n,22,0,t.numToolbarButtons);e(n,32,0,"fa-bold");e(n,43,0,"fa-italic");e(n,54,0,"fa-underline");e(n,65,0,"fa-strikethrough");e(n,76,0,"fa-paragraph");e(n,87,0,"fa-header");e(n,98,0,"fa-header");e(n,109,0,"fa-header");e(n,120,0,"fa-list-ul");e(n,131,0,"fa-list-ol");e(n,142,0,"fa-eraser");e(n,153,0,"fa-code");e(n,158,0,t.isPhone);e(n,162,0,t.toolbarArrows)},function(e,n){var t=n.component;e(n,4,0,t.toolbarHidden);e(n,6,0,!t.rteEnabled,t.placeholder);e(n,9,0,t.rteEnabled,t.name);e(n,16,0,t.toolbarHidden);e(n,28,0,!t.rteEnabled,t.toolbarStyles.b,o._41(n,28,2,o._29(n,29).transform("core.editor.bold")));e(n,39,0,!t.rteEnabled,t.toolbarStyles.i,o._41(n,39,2,o._29(n,40).transform("core.editor.italic")));e(n,50,0,!t.rteEnabled,t.toolbarStyles.u,o._41(n,50,2,o._29(n,51).transform("core.editor.underline")));e(n,61,0,!t.rteEnabled,t.toolbarStyles.strike,o._41(n,61,2,o._29(n,62).transform("core.editor.strike")));e(n,72,0,!t.rteEnabled,t.toolbarStyles.p,o._41(n,72,2,o._29(n,73).transform("core.editor.p")));e(n,83,0,!t.rteEnabled,t.toolbarStyles.h3,o._41(n,83,2,o._29(n,84).transform("core.editor.h3")));e(n,94,0,!t.rteEnabled,t.toolbarStyles.h4,o._41(n,94,2,o._29(n,95).transform("core.editor.h4")));e(n,105,0,!t.rteEnabled,t.toolbarStyles.h5,o._41(n,105,2,o._29(n,106).transform("core.editor.h5")));e(n,116,0,!t.rteEnabled,t.toolbarStyles.ul,o._41(n,116,2,o._29(n,117).transform("core.editor.unorderedlist")));e(n,127,0,!t.rteEnabled,t.toolbarStyles.ol,o._41(n,127,2,o._29(n,128).transform("core.editor.orderedlist")));e(n,138,0,!t.rteEnabled,o._41(n,138,1,o._29(n,139).transform("core.editor.clear")));e(n,149,0,!t.rteEnabled,o._41(n,149,1,o._29(n,150).transform("core.editor.toggle")))})}t.d(n,"b",function(){return x}),n.c=View_CoreEditorRichTextEditorComponent_0,t.d(n,"a",function(){return F});var o=t(1),r=t(49),i=t(9),l=t(26),s=t(19),a=t(1054),u=t(357),d=t(267),c=t(81),p=t(76),f=t(111),h=t(91),m=t(17),_=t(20),g=t(36),v=t(30),C=t(22),y=t(24),P=t(35),A=t(8),b=t(1055),I=t(40),S=t(250),E=t(5),M=t(23),w=t(2),k=t(18),T=t(10),O=t(3),D=t(216),x=o._14({encapsulation:2,styles:[],data:{}}),F=o._12("core-rich-text-editor",S.a,function View_CoreEditorRichTextEditorComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-rich-text-editor",[],null,null,null,View_CoreEditorRichTextEditorComponent_0,x)),o._15(1,1228800,null,0,S.a,[E.a,M.a,w.a,k.a,[2,v.a],o.p,T.a,O.a,m.a,D.a],null,null)],null,null)},{placeholder:"placeholder",control:"control",name:"name",component:"component",componentId:"componentId",autoSave:"autoSave",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",elementId:"elementId",draftExtraParams:"draftExtraParams"},{contentChanged:"contentChanged"},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),function(){function CoreInfiniteLoadingComponent(e,n){this.content=e,this.domUtils=n,this.error=!1,this.position="bottom",this.loadingMore=!1,this.action=new r.r}return CoreInfiniteLoadingComponent.prototype.ngOnChanges=function(e){var n=this;e.enabled&&this.enabled&&"bottom"==this.position&&setTimeout(function(){var e=new Event("scroll");n.content.ionScroll.emit(e)},400)},CoreInfiniteLoadingComponent.prototype.loadMore=function(e){this.loadingMore||(e&&(this.infiniteScroll=e),this.loadingMore=!0,this.action.emit(this.complete.bind(this)))},CoreInfiniteLoadingComponent.prototype.complete=function(){"top"==this.position?setTimeout(this.completeLoadMore.bind(this),400):this.completeLoadMore()},CoreInfiniteLoadingComponent.prototype.completeLoadMore=function(){var e=this;this.loadingMore=!1,this.infiniteScroll&&this.infiniteScroll.complete(),this.infiniteScroll=void 0,setTimeout(function(){var n=new Event("scroll");e.content.ionScroll.emit(n)})},CoreInfiniteLoadingComponent.prototype.getHeight=function(){return this.getElementHeight(this.topButton)+this.getElementHeight(this.infiniteEl)+this.getElementHeight(this.bottomButton)+this.getElementHeight(this.spinnerContainer)},CoreInfiniteLoadingComponent.prototype.getElementHeight=function(e){return e&&e.nativeElement?this.domUtils.getElementHeight(e.nativeElement,!0,!0,!0):0},CoreInfiniteLoadingComponent=Object(o.__decorate)([Object(o.__param)(0,Object(r.E)())],CoreInfiniteLoadingComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(225),t(325);var o=function(){return function CoreTagComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonCalendarOfflineProvider(n,t){this.sitesProvider=n,this.utils=t,this.siteSchema={name:"AddonCalendarOfflineProvider",version:1,tables:[{name:e.EVENTS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"name",type:"TEXT",notNull:!0},{name:"timestart",type:"INTEGER",notNull:!0},{name:"eventtype",type:"TEXT",notNull:!0},{name:"categoryid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"groupcourseid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"description",type:"TEXT"},{name:"location",type:"TEXT"},{name:"duration",type:"INTEGER"},{name:"timedurationuntil",type:"INTEGER"},{name:"timedurationminutes",type:"INTEGER"},{name:"repeat",type:"INTEGER"},{name:"repeats",type:"INTEGER"},{name:"repeatid",type:"INTEGER"},{name:"repeateditall",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}]},{name:e.DELETED_EVENTS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"name",type:"TEXT",notNull:!0},{name:"repeat",type:"INTEGER"},{name:"timemodified",type:"INTEGER"}]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonCalendarOfflineProvider,AddonCalendarOfflineProvider.prototype.deleteEvent=function(n,t){return this.sitesProvider.getSite(t).then(function(t){var o={id:n};return t.getDb().deleteRecords(e.EVENTS_TABLE,o)})},AddonCalendarOfflineProvider.prototype.getAllEventsIds=function(e){var n=this,t=[];return t.push(this.getAllDeletedEventsIds(e)),t.push(this.getAllEditedEventsIds(e)),Promise.all(t).then(function(e){return n.utils.mergeArraysWithoutDuplicates(e[0],e[1])})},AddonCalendarOfflineProvider.prototype.getAllDeletedEvents=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.DELETED_EVENTS_TABLE)})},AddonCalendarOfflineProvider.prototype.getAllDeletedEventsIds=function(e){return this.getAllDeletedEvents(e).then(function(e){return e.map(function(e){return e.id})})},AddonCalendarOfflineProvider.prototype.getAllEditedEvents=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.EVENTS_TABLE)})},AddonCalendarOfflineProvider.prototype.getAllEditedEventsIds=function(e){return this.getAllEditedEvents(e).then(function(e){return e.map(function(e){return e.id})})},AddonCalendarOfflineProvider.prototype.getDeletedEvent=function(n,t){return this.sitesProvider.getSite(t).then(function(t){var o={id:n};return t.getDb().getRecord(e.DELETED_EVENTS_TABLE,o)})},AddonCalendarOfflineProvider.prototype.getEvent=function(n,t){return this.sitesProvider.getSite(t).then(function(t){var o={id:n};return t.getDb().getRecord(e.EVENTS_TABLE,o)})},AddonCalendarOfflineProvider.prototype.hasEditedEvents=function(e){return this.getAllEditedEvents(e).then(function(e){return!!e.length}).catch(function(){return!1})},AddonCalendarOfflineProvider.prototype.hasOfflineData=function(e){return this.getAllEventsIds(e).then(function(e){return e.length>0})},AddonCalendarOfflineProvider.prototype.isEventDeleted=function(e,n){return this.getDeletedEvent(e,n).then(function(e){return!!e}).catch(function(){return!1})},AddonCalendarOfflineProvider.prototype.markDeleted=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){var i={id:n,name:t||"",repeat:o?1:0,timemodified:Date.now()};return r.getDb().insertRecord(e.DELETED_EVENTS_TABLE,i)})},AddonCalendarOfflineProvider.prototype.saveEvent=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){o=o||Date.now();var i={id:n||-o,name:t.name,timestart:t.timestart,eventtype:t.eventtype,categoryid:t.categoryid||null,courseid:t.courseid||null,groupcourseid:t.groupcourseid||null,groupid:t.groupid||null,description:t.description&&t.description.text,location:t.location,duration:t.duration,timedurationuntil:t.timedurationuntil,timedurationminutes:t.timedurationminutes,repeat:t.repeat?1:0,repeats:t.repeats,repeatid:t.repeatid,repeateditall:t.repeateditall?1:0,timecreated:o,userid:r.getUserId()};return r.getDb().insertRecord(e.EVENTS_TABLE,i).then(function(){return i})})},AddonCalendarOfflineProvider.prototype.unmarkDeleted=function(n,t){return this.sitesProvider.getSite(t).then(function(t){var o={id:n};return t.getDb().deleteRecords(e.DELETED_EVENTS_TABLE,o)})},AddonCalendarOfflineProvider.EVENTS_TABLE="addon_calendar_offline_events",AddonCalendarOfflineProvider.DELETED_EVENTS_TABLE="addon_calendar_deleted_events",AddonCalendarOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(187),r=t(42),i=t(15),l=(t.n(i),function(){function AddonCalendarHelperProvider(e,n,t,o,r,i){this.courseProvider=n,this.sitesProvider=t,this.calendarProvider=o,this.configProvider=r,this.utils=i,this.logger=e.getInstance("AddonCalendarHelperProvider")}return e=AddonCalendarHelperProvider,AddonCalendarHelperProvider.prototype.calculateDayData=function(e,n){e.hasevents=n.length>0,e.haslastdayofevent=!1;var t={};n.forEach(function(n){t[n.formattedType||n.eventtype]=!0,n.islastday&&(e.haslastdayofevent=!0)}),e.calendareventtypes=Object.keys(t)},AddonCalendarHelperProvider.prototype.canEditEvents=function(e,n){var t=this;return this.calendarProvider.canEditEvents(n).then(function(o){return!!o&&t.calendarProvider.getAllowedEventTypes(e,n).then(function(e){return Object.keys(e).length>0})}).catch(function(){return!1})},AddonCalendarHelperProvider.prototype.classifyIntoMonths=function(e){var n=this,t={};return e.forEach(function(e){for(var o=i(new Date(1e3*e.timestart)),r=i(new Date(1e3*(e.timestart+(e.timeduration||0))));!o.isAfter(r,"day");){var l=n.getMonthId(o.year(),o.month()+1),s=o.date();t[l]||(t[l]={}),t[l][s]||(t[l][s]=[]),t[l][s].push(e),o.add(1,"day")}}),t},AddonCalendarHelperProvider.prototype.formatEventData=function(n){n.eventIcon=e.EVENTICONS[n.eventtype]||"",n.eventIcon||(n.eventIcon=this.courseProvider.getModuleIconSrc(n.modulename),n.moduleIcon=n.eventIcon),n.formattedType=this.calendarProvider.getEventType(n);var t=n.category?n.category.id:n.categoryid,o=n.course?n.course.id:n.courseid;t>0?(n.contextLevel="coursecat",n.contextInstanceId=t):o>0?(n.contextLevel="course",n.contextInstanceId=o):(n.contextLevel="user",n.contextInstanceId=n.userid),void 0!==n.duration&&(n.format=1,n.visible=1,n.timeduration=1==n.duration?n.timedurationuntil-n.timestart:2==n.duration?n.timedurationminutes*r.a.SECONDS_MINUTE:0)},AddonCalendarHelperProvider.prototype.getEventTypeOptions=function(e){var n=[];return e.user&&n.push({name:"core.user",value:o.a.TYPE_USER}),e.group&&n.push({name:"core.group",value:o.a.TYPE_GROUP}),e.course&&n.push({name:"core.course",value:o.a.TYPE_COURSE}),e.category&&n.push({name:"core.category",value:o.a.TYPE_CATEGORY}),e.site&&n.push({name:"core.site",value:o.a.TYPE_SITE}),n},AddonCalendarHelperProvider.prototype.getMonthId=function(e,n){return e+"#"+n},AddonCalendarHelperProvider.prototype.getOfflineMonthWeeks=function(e,n,t){var r=this;return this.sitesProvider.getSite(t).then(function(e){var n=e.getStoredConfig("calendar_startwday");return r.configProvider.get(o.a.STARTING_WEEK_DAY,n)}).then(function(t){for(var o=i(),r=o.year()==e&&o.month()==n-1,l=[],s=i({year:e,month:n-1,date:1}),a=1;a<=s.daysInMonth();a++){if(s=i({year:e,month:n-1,date:a}),!l.length||s.day()==t){for(var u=(s.day()-t+7)%7,d=[],c=0;c<u;c++)d.push(c);l.push({prepadding:d,postpadding:[],days:[]})}if(a==s.daysInMonth()){var p=(t-s.day()+6)%7,f=[];for(c=0;c<p;c++)f.push(c);l[l.length-1].postpadding=f}l[l.length-1].days.push({events:[],hasevents:!1,mday:s.date(),isweekend:0==s.day()||6==s.day(),istoday:r&&o.date()==s.date(),calendareventtypes:[]})}return{weeks:l,daynames:[{dayno:t}]}})},AddonCalendarHelperProvider.prototype.hasEventDataChanged=function(e,n){return!!n&&(e.name!=n.name||e.timestart!=n.timestart||e.eventtype!=n.eventtype||e.description!=n.description||e.location!=n.location||e.duration!=n.duration||e.repeat!=n.repeat||(e.eventtype==o.a.TYPE_CATEGORY&&e.categoryid!=n.categoryid||e.eventtype==o.a.TYPE_COURSE&&e.courseid!=n.courseid||e.eventtype==o.a.TYPE_GROUP&&e.groupcourseid!=n.groupcourseid&&e.groupid!=n.groupid||(1==e.duration&&e.timedurationuntil!=n.timedurationuntil||2==e.duration&&e.timedurationminutes!=n.timedurationminutes||!(!e.repeat||e.repeats==n.repeats))))},AddonCalendarHelperProvider.prototype.getFilteredEvents=function(e,n,t){var o=this;if(!n.filtered)return e;var r=n.courseId?Number(n.courseId):void 0;if(!r||r<0)return e.filter(function(e){return n[e.formattedType]});var i=n.categoryId?Number(n.categoryId):void 0;return e.filter(function(e){return n[e.formattedType]&&o.shouldDisplayEvent(e,r,i,t)})},AddonCalendarHelperProvider.prototype.shouldDisplayEvent=function(e,n,t,o){if("user"==e.eventtype||"site"==e.eventtype)return!0;if("category"==e.eventtype){if(!e.categoryid||!Object.keys(o).length)return!0;if(e.categoryid==t)return!0;for(var r=o[t];r&&r.parent;){if(e.categoryid==r.parent)return!0;r=o[r.parent]}return!1}var i=e.course&&e.course.id||e.courseid;return i&&(i==this.sitesProvider.getCurrentSiteHomeId()||i==n)},AddonCalendarHelperProvider.prototype.refreshAfterChangeEvents=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=[],l=[],s=t.calendarProvider.getUpcomingEvents(void 0,void 0,!0,n.id).catch(function(){});return t.utils.allPromises([s].concat(e.map(function(e){if(e.repeated>1){if(e.event.repeatid){o.push(e.event.timestart);for(var i=1;i<e.repeated;i++)l.push(e.event.timestart+7*r.a.SECONDS_DAY*i),l.push(e.event.timestart-7*r.a.SECONDS_DAY*i);return t.calendarProvider.getLocalEventsByRepeatIdFromLocalDb(e.event.repeatid,n.id).then(function(e){return t.utils.allPromises(e.map(function(e){return t.calendarProvider.invalidateEvent(e.id)}))})}var s=e.event.timestart;for(o.push(s);e.repeated>1;)s+=7*r.a.SECONDS_DAY,e.repeated--,l.push(s);return Promise.resolve()}return o.push(e.event.timestart),t.calendarProvider.invalidateEvent(e.event.id)}))).finally(function(){var e={},r={};return t.utils.allPromises([t.calendarProvider.invalidateAllUpcomingEvents(),t.utils.allPromises(o.concat(l).map(function(l,s){var a=[],u=i(new Date(1e3*l)),d=t.getMonthId(u.year(),u.month()+1),c=d+"#"+u.date();return e[d]||(e[d]=d,a.push(s<o.length?t.calendarProvider.getMonthlyEvents(u.year(),u.month()+1,void 0,void 0,!0,n.id).catch(function(){}):t.calendarProvider.invalidateMonthlyEvents(u.year(),u.month()+1,n.id))),r[c]||(r[c]=c,a.push(s<o.length?t.calendarProvider.getDayEvents(u.year(),u.month()+1,u.date(),void 0,void 0,!0,n.id).catch(function(){}):t.calendarProvider.invalidateDayEvents(u.year(),u.month()+1,u.date(),n.id))),t.utils.allPromises(a)}))])})})},AddonCalendarHelperProvider.prototype.refreshAfterChangeEvent=function(e,n,t){return this.refreshAfterChangeEvents([{event:e,repeated:n}],t)},AddonCalendarHelperProvider.EVENTICONS={course:"fa-graduation-cap",group:"people",site:"globe",user:"person",category:"fa-cubes"},AddonCalendarHelperProvider;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(293),t(1543),t(625),t(1544);var o=function(){return function CoreCoursesComponentsModule(){}}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(54),r=function(){function AddonModChatProvider(e,n,t,o,r){this.sitesProvider=e,this.userProvider=n,this.logHelper=t,this.utils=o,this.translate=r,this.ROOT_CACHE_KEY="AddonModChat:"}return e=AddonModChatProvider,AddonModChatProvider.prototype.getChat=function(e,n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={courseids:[e]},l={cacheKey:r.getChatsCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return t.read("mod_chat_get_chats_by_courses",i,l).then(function(e){if(e.chats){var t=e.chats.find(function(e){return e.coursemodule==n});if(t)return t}return Promise.reject(null)})})},AddonModChatProvider.prototype.loginUser=function(e){var n={chatid:e};return this.sitesProvider.getCurrentSite().write("mod_chat_login_user",n).then(function(e){return e.chatsid?e.chatsid:Promise.reject(null)})},AddonModChatProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_chat_view_chat",{chatid:n},e.COMPONENT,n,t,"chat",{},o)},AddonModChatProvider.prototype.sendMessage=function(e,n,t){var o={chatsid:e,messagetext:n,beepid:t};return this.sitesProvider.getCurrentSite().write("mod_chat_send_chat_message",o).then(function(e){return e.messageid?e.messageid:Promise.reject(null)})},AddonModChatProvider.prototype.getLatestMessages=function(e,n){var t={chatsid:e,chatlasttime:n};return this.sitesProvider.getCurrentSite().write("mod_chat_get_chat_latest_messages",t)},AddonModChatProvider.prototype.getMessagesUserData=function(e,n){var t=this,o=e.map(function(e){return t.userProvider.getProfile(e.userid,n,!0).then(function(n){e.userfullname=n.fullname,e.userprofileimageurl=n.profileimageurl}).catch(function(){e.userfullname=t.translate.instant("core.deleteduser")+" "+e.userid})});return Promise.all(o).then(function(){return e})},AddonModChatProvider.prototype.getChatUsers=function(e){var n={chatsid:e};return this.sitesProvider.getCurrentSite().read("mod_chat_get_chat_users",n,{getFromCache:!1})},AddonModChatProvider.prototype.areSessionsAvailable=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_chat_get_sessions")&&e.wsAvailable("mod_chat_get_session_messages")})},AddonModChatProvider.prototype.getSessions=function(e,n,t,r,i){var l=this;return void 0===n&&(n=0),void 0===t&&(t=!1),void 0===r&&(r=!1),this.sitesProvider.getSite(i).then(function(i){var s={chatid:e,groupid:n,showall:t?1:0},a={cacheKey:l.getSessionsCacheKey(e,n,t),updateFrequency:o.a.FREQUENCY_SOMETIMES};return r&&(a.getFromCache=!1,a.emergencyCache=!1),i.read("mod_chat_get_sessions",s,a).then(function(e){return e&&e.sessions?e.sessions:Promise.reject(null)})})},AddonModChatProvider.prototype.getSessionMessages=function(e,n,t,r,i,l){var s=this;return void 0===r&&(r=0),void 0===i&&(i=!1),this.sitesProvider.getSite(l).then(function(l){var a={chatid:e,sessionstart:n,sessionend:t,groupid:r},u={cacheKey:s.getSessionMessagesCacheKey(e,n,r),updateFrequency:o.a.FREQUENCY_RARELY};return i&&(u.getFromCache=!1,u.emergencyCache=!1),l.read("mod_chat_get_session_messages",a,u).then(function(e){return e&&e.messages?e.messages:Promise.reject(null)})})},AddonModChatProvider.prototype.invalidateChats=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getChatsCacheKey(e))},AddonModChatProvider.prototype.invalidateSessions=function(e,n,t){void 0===n&&(n=0),void 0===t&&(t=!1);return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getSessionsCacheKey(e,n,t))},AddonModChatProvider.prototype.invalidateAllSessions=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKeyStartingWith(this.getSessionsCacheKeyPrefix(e))},AddonModChatProvider.prototype.invalidateSessionMessages=function(e,n,t){void 0===t&&(t=0);return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getSessionMessagesCacheKey(e,n,t))},AddonModChatProvider.prototype.invalidateAllSessionMessages=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKeyStartingWith(this.getSessionMessagesCacheKeyPrefix(e))},AddonModChatProvider.prototype.getChatsCacheKey=function(e){return this.ROOT_CACHE_KEY+"chats:"+e},AddonModChatProvider.prototype.getSessionsCacheKey=function(e,n,t){return this.getSessionsCacheKeyPrefix(e)+n+":"+(t?1:0)},AddonModChatProvider.prototype.getSessionsCacheKeyPrefix=function(e){return this.ROOT_CACHE_KEY+"sessions:"+e+":"},AddonModChatProvider.prototype.getSessionMessagesCacheKey=function(e,n,t){return this.getSessionMessagesCacheKeyPrefix(e)+n+":"+t},AddonModChatProvider.prototype.getSessionMessagesCacheKeyPrefix=function(e){return this.ROOT_CACHE_KEY+"sessionsMessages:"+e+":"},AddonModChatProvider.COMPONENT="mmaModChat",AddonModChatProvider.POLL_INTERVAL=4e3,AddonModChatProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(136),r=(t(233),function(){function AddonModForumHelperProvider(e,n,t,o,r,i,l,s,a,u){this.translate=e,this.fileProvider=n,this.sitesProvider=t,this.uploaderProvider=o,this.timeUtils=r,this.userProvider=i,this.appProvider=l,this.utils=s,this.forumProvider=a,this.forumOffline=u}return AddonModForumHelperProvider.prototype.addNewDiscussion=function(e,n,t,r,i,l,s,a,u,d){var c=this;d=d||this.sitesProvider.getCurrentSiteId(),a=a&&a.length>0?a:[0];var p,f,h=!1,m=[],_=function(){var l=a.length>1?o.a.ALL_GROUPS:a[0];return p&&(s.attachmentsid=p),c.forumOffline.addNewDiscussion(e,n,t,r,i,s,l,u,d).then(function(){return null})};if(l&&l.length>0){var g=a.map(function(){return c.uploadOrStoreNewDiscussionFiles(e,u,l,!1).then(function(e){m.push(e)})});f=Promise.all(g).catch(function(){return h=!0,c.uploadOrStoreNewDiscussionFiles(e,u,l,!0).then(function(e){p=e})})}else f=Promise.resolve();return f.then(function(){return(u?c.forumOffline.deleteNewDiscussion(e,u,d):Promise.resolve()).then(function(){if(h||!c.appProvider.isOnline())return _();var n=[],t=[],o=a.map(function(o,l){var a=c.utils.clone(s);return m[l]&&(a.attachmentsid=m[l]),c.forumProvider.addNewDiscussionOnline(e,r,i,a,o,d).then(function(e){t.push(e)}).catch(function(e){n.push(e)})});return Promise.all(o).then(function(){if(n.length==a.length){for(var e=0;e<n.length;e++)if(c.utils.isWebServiceError(n[e])||l.length>0)return Promise.reject(n[e]);return _()}return t})})})},AddonModForumHelperProvider.prototype.convertOfflineReplyToOnline=function(e,n){var t={attachments:[],canreply:!1,children:[],created:e.timecreated,discussion:e.discussionid,id:!1,mailed:0,mailnow:0,message:e.message,messageformat:1,messagetrust:0,modified:!1,parent:e.postid,postread:!1,subject:e.subject,totalscore:0,userid:e.userid,isprivatereply:e.options&&e.options.private},o=[];return e.options&&e.options.attachmentsid&&(t.attachments=e.options.attachmentsid.online||[],e.options.attachmentsid.offline&&o.push(this.getReplyStoredFiles(e.forumid,t.parent,n,t.userid).then(function(e){t.attachments=t.attachments.concat(e)}))),o.push(this.userProvider.getProfile(e.userid,e.courseid,!0).then(function(e){t.userfullname=e.fullname,t.userpictureurl=e.profileimageurl}).catch(function(){})),Promise.all(o).then(function(){return t.attachment=t.attachments.length>0?1:0,t})},AddonModForumHelperProvider.prototype.deleteNewDiscussionStoredFiles=function(e,n,t){var o=this;return this.forumOffline.getNewDiscussionFolder(e,n,t).then(function(e){return o.fileProvider.removeDir(e).catch(function(){})})},AddonModForumHelperProvider.prototype.deleteReplyStoredFiles=function(e,n,t,o){var r=this;return this.forumOffline.getReplyFolder(e,n,t,o).then(function(e){return r.fileProvider.removeDir(e).catch(function(){})})},AddonModForumHelperProvider.prototype.getAvailabilityMessage=function(e){if(this.isCutoffDateReached(e))return this.translate.instant("addon.mod_forum.cutoffdatereached");if(this.isDueDateReached(e)){var n=this.timeUtils.userDate(1e3*e.duedate);return this.translate.instant("addon.mod_forum.thisforumisdue",{$a:n})}if(e.duedate>0){n=this.timeUtils.userDate(1e3*e.duedate);return this.translate.instant("addon.mod_forum.thisforumhasduedate",{$a:n})}return null},AddonModForumHelperProvider.prototype.getDiscussionById=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=function(i){return o.forumProvider.getDiscussions(e,void 0,i,!1,t).then(function(e){if(e.discussions&&e.discussions.length>0){var t=e.discussions.find(function(e){return e.discussion==n});if(t)return t;if(e.canLoadMore)return r(i+1)}return Promise.reject(null)})};return r(0)},AddonModForumHelperProvider.prototype.getNewDiscussionStoredFiles=function(e,n,t){var o=this;return this.forumOffline.getNewDiscussionFolder(e,n,t).then(function(e){return o.uploaderProvider.getStoredFiles(e)})},AddonModForumHelperProvider.prototype.getReplyStoredFiles=function(e,n,t,o){var r=this;return this.forumOffline.getReplyFolder(e,n,t,o).then(function(e){return r.uploaderProvider.getStoredFiles(e)})},AddonModForumHelperProvider.prototype.hasPostDataChanged=function(e,n){return!(!n||null==n.subject)&&(e.subject!=n.subject||e.message!=n.message||(e.isprivatereply!=n.isprivatereply||this.uploaderProvider.areFileListDifferent(e.files,n.files)))},AddonModForumHelperProvider.prototype.isCutoffDateReached=function(e){var n=Date.now()/1e3;return e.cutoffdate>0&&e.cutoffdate<n},AddonModForumHelperProvider.prototype.isDueDateReached=function(e){var n=Date.now()/1e3;return e.duedate>0&&e.duedate<n},AddonModForumHelperProvider.prototype.storeNewDiscussionFiles=function(e,n,t,o){var r=this;return this.forumOffline.getNewDiscussionFolder(e,n,o).then(function(e){return r.uploaderProvider.storeFilesToUpload(e,t)})},AddonModForumHelperProvider.prototype.storeReplyFiles=function(e,n,t,o,r){var i=this;return this.forumOffline.getReplyFolder(e,n,o,r).then(function(e){return i.uploaderProvider.storeFilesToUpload(e,t)})},AddonModForumHelperProvider.prototype.uploadOrStoreNewDiscussionFiles=function(e,n,t,r,i){return r?this.storeNewDiscussionFiles(e,n,t,i):this.uploaderProvider.uploadOrReuploadFiles(t,o.a.COMPONENT,e,i)},AddonModForumHelperProvider.prototype.uploadOrStoreReplyFiles=function(e,n,t,r,i,l){return r?this.storeReplyFiles(e,n,t,i,l):this.uploaderProvider.uploadOrReuploadFiles(t,o.a.COMPONENT,e,i)},AddonModForumHelperProvider}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},r=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},i=function(){function CoreSearchHistoryProvider(n){this.sitesProvider=n,this.siteSchema={name:"CoreSearchHistoryProvider",version:1,tables:[{name:e.HISTORY_TABLE,columns:[{name:"searcharea",type:"TEXT",notNull:!0},{name:"lastused",type:"INTEGER",notNull:!0},{name:"times",type:"INTEGER",notNull:!0},{name:"searchedtext",type:"TEXT",notNull:!0}],primaryKeys:["searcharea","searchedtext"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=CoreSearchHistoryProvider,CoreSearchHistoryProvider.prototype.getSearchHistory=function(n,t){return o(this,void 0,void 0,function(){var o,i,l;return r(this,function(r){switch(r.label){case 0:return[4,this.sitesProvider.getSite(t)];case 1:return o=r.sent(),i={searcharea:n},[4,o.getDb().getRecords(e.HISTORY_TABLE,i)];case 2:return l=r.sent(),[2,l.sort(function(e,n){return n.lastused-e.lastused})]}})})},CoreSearchHistoryProvider.prototype.controlSearchLimit=function(n,t){return o(this,void 0,void 0,function(){var o,i,l;return r(this,function(r){switch(r.label){case 0:return[4,this.getSearchHistory(n)];case 1:return(o=r.sent()).length>e.HISTORY_LIMIT?(i=o.pop(),l={searcharea:i.searcharea,searchedtext:i.searchedtext},[4,t.deleteRecords(e.HISTORY_TABLE,l)]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},CoreSearchHistoryProvider.prototype.updateExistingItem=function(n,t,i){return o(this,void 0,void 0,function(){var o,l;return r(this,function(r){switch(r.label){case 0:o={searcharea:n,searchedtext:t},r.label=1;case 1:return r.trys.push([1,4,,5]),[4,i.getRecord(e.HISTORY_TABLE,o)];case 2:return l=r.sent(),l.lastused=Date.now(),l.times++,[4,i.updateRecords(e.HISTORY_TABLE,l,o)];case 3:return r.sent(),[2,!0];case 4:return r.sent(),[2,!1];case 5:return[2]}})})},CoreSearchHistoryProvider.prototype.insertOrUpdateSearchText=function(n,t,i){return o(this,void 0,void 0,function(){var o,l,s;return r(this,function(r){switch(r.label){case 0:return[4,this.sitesProvider.getSite(i)];case 1:return o=r.sent(),l=o.getDb(),[4,this.updateExistingItem(n,t,l)];case 2:return r.sent()?[3,5]:(s={searcharea:n,searchedtext:t,lastused:Date.now(),times:1},[4,o.getDb().insertRecord(e.HISTORY_TABLE,s)]);case 3:return r.sent(),[4,this.controlSearchLimit(n,l)];case 4:r.sent(),r.label=5;case 5:return[2]}})})},CoreSearchHistoryProvider.HISTORY_TABLE="seach_history",CoreSearchHistoryProvider.HISTORY_LIMIT=10,CoreSearchHistoryProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonBadgesProvider(e,n){this.sitesProvider=n,this.ROOT_CACHE_KEY="mmaBadges:",this.logger=e.getInstance("AddonBadgesProvider")}return AddonBadgesProvider.prototype.isPluginEnabled=function(e){return this.sitesProvider.getSite(e).then(function(e){return!!e.canUseAdvancedFeature("enablebadges")&&!!e.wsAvailable("core_course_get_user_navigation_options")})},AddonBadgesProvider.prototype.getBadgesCacheKey=function(e,n){return this.ROOT_CACHE_KEY+"badges:"+e+":"+n},AddonBadgesProvider.prototype.getUserBadges=function(e,n,t){var r=this;return this.logger.debug("Get badges for course "+e),this.sitesProvider.getSite(t).then(function(t){var i={courseid:e,userid:n},l={cacheKey:r.getBadgesCacheKey(e,n),updateFrequency:o.a.FREQUENCY_RARELY};return t.read("core_badges_get_user_badges",i,l).then(function(e){return e&&e.badges?(e.badges.forEach(function(e){e.alignment=e.alignment||e.competencies,e.alignment&&e.alignment[0]&&void 0===e.alignment[0].targetname&&delete e.alignment}),e.badges):Promise.reject(null)})})},AddonBadgesProvider.prototype.invalidateUserBadges=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.invalidateWsCacheForKey(o.getBadgesCacheKey(e,n))})},AddonBadgesProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(297),t(135)),i=(t(4),t(311)),l=(t(649),function(e){function AddonModFeedbackSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h,m){var _=e.call(this,"AddonModFeedbackSyncProvider",t,n,o,c,u,s,p,h,m)||this;return _.sitesProvider=n,_.loggerProvider=t,_.appProvider=o,_.feedbackOffline=r,_.eventsProvider=i,_.feedbackProvider=l,_.translate=s,_.utils=a,_.textUtils=u,_.courseProvider=d,_.logHelper=f,_.componentTranslate=d.translateModuleName("feedback"),_}return Object(o.__extends)(AddonModFeedbackSyncProvider,e),n=AddonModFeedbackSyncProvider,AddonModFeedbackSyncProvider.prototype.prefetchAfterUpdate=function(n,t,o,r){return o=o||/^.*files$|^timers/,e.prototype.prefetchAfterUpdate.call(this,n,t,o,r)},AddonModFeedbackSyncProvider.prototype.syncAllFeedbacks=function(e,n){return this.syncOnSites("all feedbacks",this.syncAllFeedbacksFunc.bind(this),[n],e)},AddonModFeedbackSyncProvider.prototype.syncAllFeedbacksFunc=function(e,t){var o=this;return this.feedbackOffline.getAllFeedbackResponses(e).then(function(r){var i={},l=function(l){var s=r[l];if(void 0!==i[s.feedbackid])return"continue";i[s.feedbackid]=t?o.syncFeedback(s.feedbackid,e):o.syncFeedbackIfNeeded(s.feedbackid,e),i[s.feedbackid].then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{feedbackId:s.feedbackid,userId:s.userid,warnings:t.warnings},e)})};for(var s in r)l(s);return Promise.all(o.utils.objectToArray(i))})},AddonModFeedbackSyncProvider.prototype.syncFeedbackIfNeeded=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncNeeded(e,n).then(function(o){if(o)return t.syncFeedback(e,n)})},AddonModFeedbackSyncProvider.prototype.syncFeedback=function(e,n){var t=this;n=n||this.sitesProvider.getCurrentSiteId();var o=e;if(this.isSyncing(o,n))return this.getOngoingSync(o,n);if(this.syncProvider.isBlocked(r.a.COMPONENT,o,n))return this.logger.debug("Cannot sync feedback '"+o+"' because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));var i,l,s={warnings:[],updated:!1};this.logger.debug("Try to sync feedback '"+e+"' in site "+n+"'");var a=this.logHelper.syncIfNeeded(r.a.COMPONENT,e,n).catch(function(){}).then(function(){return t.feedbackOffline.getFeedbackResponses(e,n).catch(function(){return[]})}).then(function(o){if(o.length)return t.appProvider.isOnline()?(i=o[0].courseid,t.feedbackProvider.getFeedbackById(i,e,n).then(function(n){return!(l=n).multiple_submit&&t.feedbackProvider.isCompleted(e)}).then(function(r){if(r){var i=[];return o.forEach(function(o){i.push(t.feedbackOffline.deleteFeedbackPageResponses(e,o.page,n))}),s.updated=!0,s.warnings.push(t.translate.instant("core.warningofflinedatadeleted",{component:t.componentTranslate,name:l.name,error:t.translate.instant("addon.mod_feedback.this_feedback_is_already_submitted")})),Promise.all(i)}return t.feedbackProvider.getCurrentCompletedTimeModified(e,!0,n).then(function(e){return o.sort(function(e,n){return e.page-n.page}),o=o.map(function(o){return{func:t.processPage.bind(t),params:[l,o,n,e,s],blocking:!0}}),t.utils.executeOrderedPromises(o)})})):Promise.reject(null)}).then(function(){if(s.updated)return t.courseProvider.getModuleBasicInfoByInstance(e,"feedback",n).then(function(e){return t.prefetchAfterUpdate(e,i,void 0,n)}).catch(function(){})}).then(function(){return t.setSyncTime(o,n)}).then(function(){return s});return this.addOngoingSync(o,a,n)},AddonModFeedbackSyncProvider.prototype.processPage=function(e,n,t,o,r){var i=this;return o>n.timemodified?this.feedbackOffline.deleteFeedbackPageResponses(e.id,n.page,t):this.feedbackProvider.processPageOnline(e.id,n.page,n.responses,!1,t).then(function(){return r.updated=!0,i.feedbackOffline.deleteFeedbackPageResponses(e.id,n.page,t)}).catch(function(o){return o&&o.wserror?(r.updated=!0,i.feedbackOffline.deleteFeedbackPageResponses(e.id,n.page,t).then(function(){r.warnings.push(i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:i.textUtils.getErrorMessageFromError(o)}))})):Promise.reject(o)})},AddonModFeedbackSyncProvider.AUTO_SYNCED="addon_mod_feedback_autom_synced",AddonModFeedbackSyncProvider;var n}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(170),r=function(){function AddonModLessonOfflineProvider(n,t,o,r,i){this.sitesProvider=t,this.timeUtils=o,this.textUtils=r,this.utils=i,this.siteSchema={name:"AddonModLessonOfflineProvider",version:1,tables:[{name:e.RETAKES_TABLE,columns:[{name:"lessonid",type:"INTEGER",primaryKey:!0},{name:"retake",type:"INTEGER",notNull:!0},{name:"courseid",type:"INTEGER"},{name:"finished",type:"INTEGER"},{name:"outoftime",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"lastquestionpage",type:"INTEGER"}]},{name:e.PAGE_ATTEMPTS_TABLE,columns:[{name:"lessonid",type:"INTEGER",notNull:!0},{name:"retake",type:"INTEGER",notNull:!0},{name:"pageid",type:"INTEGER",notNull:!0},{name:"timemodified",type:"INTEGER",notNull:!0},{name:"courseid",type:"INTEGER"},{name:"data",type:"TEXT"},{name:"type",type:"INTEGER"},{name:"newpageid",type:"INTEGER"},{name:"correct",type:"INTEGER"},{name:"answerid",type:"INTEGER"},{name:"useranswer",type:"TEXT"}],primaryKeys:["lessonid","retake","pageid","timemodified"]}]},this.logger=n.getInstance("AddonModLessonOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModLessonOfflineProvider,AddonModLessonOfflineProvider.prototype.deleteAttempt=function(n,t,o,r,i){return this.sitesProvider.getSite(i).then(function(i){return i.getDb().deleteRecords(e.PAGE_ATTEMPTS_TABLE,{lessonid:n,retake:t,pageid:o,timemodified:r})})},AddonModLessonOfflineProvider.prototype.deleteRetake=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(e.RETAKES_TABLE,{lessonid:n})})},AddonModLessonOfflineProvider.prototype.deleteRetakeAttemptsForPage=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(e.PAGE_ATTEMPTS_TABLE,{lessonid:n,retake:t,pageid:o})})},AddonModLessonOfflineProvider.prototype.finishRetake=function(n,t,o,r,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){return s.getRetakeWithFallback(n,t,o,l.id).then(function(n){return n.finished=r?1:0,n.outoftime=i?1:0,n.timemodified=s.timeUtils.timestamp(),l.getDb().insertRecord(e.RETAKES_TABLE,n)})})},AddonModLessonOfflineProvider.prototype.getAllAttempts=function(n){var t=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.getAllRecords(e.PAGE_ATTEMPTS_TABLE)}).then(function(e){return t.parsePageAttempts(e)})},AddonModLessonOfflineProvider.prototype.getAllLessonsWithData=function(e){var n=this,t=[],o={};return t.push(this.getAllAttempts(e).then(function(e){n.getLessonsFromEntries(o,e)}).catch(function(){})),t.push(this.getAllRetakes(e).then(function(e){n.getLessonsFromEntries(o,e)}).catch(function(){})),Promise.all(t).then(function(){return n.utils.objectToArray(o)})},AddonModLessonOfflineProvider.prototype.getAllRetakes=function(n){return this.sitesProvider.getSiteDb(n).then(function(n){return n.getAllRecords(e.RETAKES_TABLE)})},AddonModLessonOfflineProvider.prototype.getLastQuestionPageAttempt=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getRetakeWithFallback(e,0,n,t).then(function(r){if(r.lastquestionpage)return o.getRetakeAttemptsForPage(e,n,r.lastquestionpage,t).then(function(e){return e.reduce(function(e,n){return e.timemodified>n.timemodified?e:n})})}).catch(function(){})},AddonModLessonOfflineProvider.prototype.getLessonAttempts=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.PAGE_ATTEMPTS_TABLE,{lessonid:n})}).then(function(e){return o.parsePageAttempts(e)})},AddonModLessonOfflineProvider.prototype.getLessonsFromEntries=function(e,n){n.forEach(function(n){e[n.lessonid]||(e[n.lessonid]={id:n.lessonid,courseId:n.courseid})})},AddonModLessonOfflineProvider.prototype.getQuestionsAttempts=function(e,n,t,r,i){return(r?this.getRetakeAttemptsForPage(e,n,r,i):this.getRetakeAttemptsForType(e,n,o.a.TYPE_QUESTION,i)).then(function(e){return t?e.filter(function(e){return!!e.correct}):e})},AddonModLessonOfflineProvider.prototype.getRetake=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(e.RETAKES_TABLE,{lessonid:n})})},AddonModLessonOfflineProvider.prototype.getRetakeAttempts=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(e.PAGE_ATTEMPTS_TABLE,{lessonid:n,retake:t})}).then(function(e){return r.parsePageAttempts(e)})},AddonModLessonOfflineProvider.prototype.getRetakeAttemptsForPage=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.getDb().getRecords(e.PAGE_ATTEMPTS_TABLE,{lessonid:n,retake:t,pageid:o})}).then(function(e){return i.parsePageAttempts(e)})},AddonModLessonOfflineProvider.prototype.getRetakeAttemptsForType=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.getDb().getRecords(e.PAGE_ATTEMPTS_TABLE,{lessonid:n,retake:t,type:o})}).then(function(e){return i.parsePageAttempts(e)})},AddonModLessonOfflineProvider.prototype.getRetakeWithFallback=function(e,n,t,o){return this.getRetake(e,o).then(function(e){return e.retake!=t?Promise.reject(null):e}).catch(function(){return{lessonid:e,retake:t,courseid:n,finished:0}})},AddonModLessonOfflineProvider.prototype.hasFinishedRetake=function(e,n){return this.getRetake(e,n).then(function(e){return!!e.finished}).catch(function(){return!1})},AddonModLessonOfflineProvider.prototype.hasOfflineData=function(e,n){var t=[],o=!1;return t.push(this.getRetake(e,n).then(function(){o=!0}).catch(function(){})),t.push(this.getLessonAttempts(e,n).then(function(e){o=o||!!e.length}).catch(function(){})),Promise.all(t).then(function(){return o})},AddonModLessonOfflineProvider.prototype.hasRetakeAttempts=function(e,n,t){return this.getRetakeAttempts(e,n,t).then(function(e){return!!e.length}).catch(function(){return!1})},AddonModLessonOfflineProvider.prototype.parsePageAttempt=function(e){return e.data=this.textUtils.parseJSON(e.data),e.useranswer=this.textUtils.parseJSON(e.useranswer),e},AddonModLessonOfflineProvider.prototype.parsePageAttempts=function(e){var n=this;return e.forEach(function(e){n.parsePageAttempt(e)}),e},AddonModLessonOfflineProvider.prototype.processPage=function(n,t,r,i,l,s,a,u,d,c){var p=this;return this.sitesProvider.getSite(c).then(function(o){var c={lessonid:n,retake:r,pageid:i.id,timemodified:p.timeUtils.timestamp(),courseid:t,data:l?JSON.stringify(l):null,type:i.type,newpageid:s,correct:u?1:0,answerid:Number(a),useranswer:d?JSON.stringify(d):null};return o.getDb().insertRecord(e.PAGE_ATTEMPTS_TABLE,c)}).then(function(){if(i.type==o.a.TYPE_QUESTION)return p.setLastQuestionPageAttempted(n,t,r,i.id,c)})},AddonModLessonOfflineProvider.prototype.setLastQuestionPageAttempted=function(n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){return l.getRetakeWithFallback(n,t,o,i.id).then(function(n){return n.lastquestionpage=r,n.timemodified=l.timeUtils.timestamp(),i.getDb().insertRecord(e.RETAKES_TABLE,n)})})},AddonModLessonOfflineProvider.RETAKES_TABLE="addon_mod_lesson_retakes",AddonModLessonOfflineProvider.PAGE_ATTEMPTS_TABLE="addon_mod_lesson_page_attempts",AddonModLessonOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(311)),i=t(170),l=(t(286),t(331),function(e){function AddonModLessonSyncProvider(t,o,r,i,l,s,a,u,d,c,p,f,h,m,_,g){var v=e.call(this,"AddonModLessonSyncProvider",t,o,r,i,l,s,f,g,p)||this;return v.courseProvider=a,v.eventsProvider=u,v.lessonProvider=d,v.lessonOfflineProvider=c,v.prefetchHandler=p,v.utils=h,v.urlUtils=m,v.logHelper=_,v.siteSchema={name:"AddonModLessonSyncProvider",version:1,tables:[{name:n.RETAKES_FINISHED_TABLE,columns:[{name:"lessonid",type:"INTEGER",primaryKey:!0},{name:"retake",type:"INTEGER"},{name:"pageid",type:"INTEGER"},{name:"timefinished",type:"INTEGER"}]}]},v.componentTranslate=a.translateModuleName("lesson"),v.sitesProvider.registerSiteSchema(v.siteSchema),v}return Object(o.__extends)(AddonModLessonSyncProvider,e),n=AddonModLessonSyncProvider,AddonModLessonSyncProvider.prototype.deleteRetakeFinishedInSync=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(n.RETAKES_FINISHED_TABLE,{lessonid:e})}).catch(function(){})},AddonModLessonSyncProvider.prototype.getRetakeFinishedInSync=function(e,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(n.RETAKES_FINISHED_TABLE,{lessonid:e})}).catch(function(){})},AddonModLessonSyncProvider.prototype.hasDataToSync=function(e,n,t){var o=[],r=!1;return o.push(this.lessonOfflineProvider.hasRetakeAttempts(e,n,t).then(function(e){r=r||e}).catch(function(){})),o.push(this.lessonOfflineProvider.hasFinishedRetake(e,t).then(function(e){r=r||e})),Promise.all(o).then(function(){return r})},AddonModLessonSyncProvider.prototype.setRetakeFinishedInSync=function(e,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.getDb().insertRecord(n.RETAKES_FINISHED_TABLE,{lessonid:e,retake:Number(t),pageid:Number(o),timefinished:i.timeUtils.timestamp()})})},AddonModLessonSyncProvider.prototype.syncAllLessons=function(e,n){return this.syncOnSites("all lessons",this.syncAllLessonsFunc.bind(this),[n],e)},AddonModLessonSyncProvider.prototype.syncAllLessonsFunc=function(e,t){var o=this;return this.lessonOfflineProvider.getAllLessonsWithData(e).then(function(r){return r.map(function(r){return(t?o.syncLesson(r.id,!1,!1,e):o.syncLessonIfNeeded(r.id,!1,e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{lessonId:r.id,warnings:t.warnings},e)})}),Promise.all([])})},AddonModLessonSyncProvider.prototype.syncLessonIfNeeded=function(e,n,t){var o=this;return this.isSyncNeeded(e,t).then(function(r){if(r)return o.syncLesson(e,n,!1,t)})},AddonModLessonSyncProvider.prototype.syncLesson=function(e,n,t,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var l,s,a,u,d,c={warnings:[],updated:!1};return this.isSyncing(e,o)?this.getOngoingSync(e,o):!t&&this.syncProvider.isBlocked(i.a.COMPONENT,e,o)?(this.logger.debug("Cannot sync lesson "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync lesson "+e+" in site "+o),l=this.logHelper.syncIfNeeded(i.a.COMPONENT,e,o).catch(function(){}).then(function(){return r.lessonOfflineProvider.getLessonAttempts(e,o)}).then(function(t){if(t.length)return r.appProvider.isOnline()?(a=t[0].courseid,r.lessonProvider.getLessonById(a,e,!1,!1,o).then(function(t){return s=t,r.prefetchHandler.getLessonPassword(e,!1,!0,n,o)}).then(function(e){var n=t.length,i=[];return d=e.accessInfo,u=e.password,s=e.lesson||s,(t=t.filter(function(e){return e.retake==d.attemptscount||(i.push(r.lessonOfflineProvider.deleteAttempt(s.id,e.retake,e.pageid,e.timemodified,o).catch(function(){})),!1)})).length!=n&&c.warnings.push(r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:s.name,error:r.translate.instant("addon.mod_lesson.warningretakefinished")})),Promise.all(i)}).then(function(){if(t.length)return t.sort(function(e,n){return e.timemodified-n.timemodified}),t=t.map(function(e){return{func:r.sendAttempt.bind(r),params:[s,u,e,c,o],blocking:!0}}),r.utils.executeOrderedPromises(t)})):Promise.reject(null)}).then(function(){return r.lessonOfflineProvider.getRetake(e,o).then(function(i){if(!i.finished)return r.lessonOfflineProvider.deleteRetake(e,o);if(!r.appProvider.isOnline())return Promise.reject(null);return a=i.courseid||a,(s?Promise.resolve():r.lessonProvider.getLessonById(a,e,!1,!1,o).then(function(t){return s=t,r.prefetchHandler.getLessonPassword(e,!1,!0,n,o)}).then(function(e){d=e.accessInfo,u=e.password,s=e.lesson||s})).then(function(){return i.retake!=d.attemptscount?(c.warnings.length||c.warnings.push(r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:s.name,error:r.translate.instant("addon.mod_lesson.warningretakefinished")})),r.lessonOfflineProvider.deleteRetake(e,o)):r.lessonProvider.finishRetakeOnline(e,u,!1,!1,o).then(function(n){if(c.updated=!0,!t&&n.data&&n.data.reviewlesson){var l=r.urlUtils.extractUrlParams(n.data.reviewlesson.value);l&&l.pageid&&r.setRetakeFinishedInSync(e,i.retake,l.pageid,o)}return r.lessonOfflineProvider.deleteRetake(e,o)}).catch(function(n){return n&&r.utils.isWebServiceError(n)?(c.updated=!0,r.lessonOfflineProvider.deleteRetake(e,o).then(function(){c.warnings.push(r.translate.instant("core.warningofflinedatadeleted",{component:r.componentTranslate,name:s.name,error:r.textUtils.getErrorMessageFromError(n)}))})):Promise.reject(n)})})},function(){})}).then(function(){if(c.updated&&a)return r.courseProvider.getModuleBasicInfoByInstance(e,"lesson",o).then(function(e){return r.prefetchAfterUpdate(e,a,void 0,o)}).catch(function(){})}).then(function(){return r.setSyncTime(e,o).catch(function(){})}).then(function(){return c}),this.addOngoingSync(e,l,o))},AddonModLessonSyncProvider.prototype.sendAttempt=function(e,n,t,o,r){var i=this;return this.lessonProvider.processPageOnline(e.id,t.pageid,t.data,n,!1,r).then(function(){return o.updated=!0,i.lessonOfflineProvider.deleteAttempt(e.id,t.retake,t.pageid,t.timemodified,r)}).catch(function(n){return n&&i.utils.isWebServiceError(n)?(o.updated=!0,i.lessonOfflineProvider.deleteAttempt(e.id,t.retake,t.pageid,t.timemodified,r).then(function(){o.warnings.push(i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:i.textUtils.getErrorMessageFromError(n)}))})):Promise.reject(n)})},AddonModLessonSyncProvider.AUTO_SYNCED="addon_mod_lesson_autom_synced",AddonModLessonSyncProvider.RETAKES_FINISHED_TABLE="addon_mod_lesson_retakes_finished_sync",AddonModLessonSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(311)),i=t(234),l=(t(264),t(334),function(e){function AddonModScormSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h,m){var _=e.call(this,"AddonModScormSyncProvider",n,t,o,r,i,l,a,f,c)||this;return _.eventsProvider=s,_.scormProvider=u,_.scormOfflineProvider=d,_.utils=p,_.courseProvider=h,_.logHelper=m,_.componentTranslate=h.translateModuleName("scorm"),_}return Object(o.__extends)(AddonModScormSyncProvider,e),n=AddonModScormSyncProvider,AddonModScormSyncProvider.prototype.addToNewOrDelete=function(e,n,t,o,r,i,l,s,a){var u=this;return n==t?(o.push(n),Promise.resolve()):this.scormOfflineProvider.getAttemptCreationTime(e,n,a).then(function(t){if(t>i){if(l)return u.logger.debug("Try to delete attempt "+n+" because it cannot be created as a new attempt."),u.scormOfflineProvider.deleteAttempt(e,n,a).then(function(){s.push(u.translate.instant("addon.mod_scorm.warningofflinedatadeleted",{number:n}))}).catch(function(){});r[t]=n}else o.push(n)})},AddonModScormSyncProvider.prototype.canRetrySync=function(e,n,t,o){var r=this;return this.scormProvider.getScormUserData(e,n,void 0,!1,t!=n,o).then(function(t){return r.scormOfflineProvider.getAttemptSnapshot(e,n,o).then(function(e){if(!e||!Object.keys(e).length||!r.snapshotEquals(e,t))return Promise.reject(null)})})},AddonModScormSyncProvider.prototype.createNewAttemptsAtEnd=function(e,n,t,o){var r=this,i=Object.keys(n).sort(),l=[];return i.length?(i.forEach(function(i,s){l.push(r.scormOfflineProvider.changeAttemptNumber(e,n[i],t+s+1,o))}),this.utils.allPromises(l)):Promise.resolve()},AddonModScormSyncProvider.prototype.finishSync=function(e,n,t,o,r,i,l){var s=this;return(l?this.courseProvider.getModuleBasicInfoByInstance(n.id,"scorm",e).then(function(t){return s.prefetchAfterUpdate(t,n.course,void 0,e)}).catch(function(){}):Promise.resolve()).then(function(){return s.setSyncTime(n.id,e).catch(function(){})}).then(function(){return!!i&&s.scormProvider.getAttemptCount(n.id,void 0,!1,e).then(function(t){return t.online.length>i.online.length||!r&&o>0&&s.scormProvider.isAttemptIncomplete(n.id,o,!1,!0,e).then(function(e){return!e})})}).then(function(e){return{warnings:t,attemptFinished:e,updated:l}})},AddonModScormSyncProvider.prototype.getOfflineAttemptData=function(e,n,t){var o=this;return this.scormProvider.isAttemptIncomplete(e,n,!0,!1,t).then(function(r){return o.scormOfflineProvider.getAttemptCreationTime(e,n,t).then(function(e){return{incomplete:r,timecreated:e}})})},AddonModScormSyncProvider.prototype.moveNewAttempts=function(e,n,t,o,r,i){var l=this;if(!n.length)return Promise.resolve();var s,a=Promise.resolve();return(r=r.sort(function(e,n){return Number(e)<=Number(n)?1:-1})).forEach(function(t){t>o&&(a=a.then(function(){return l.scormOfflineProvider.changeAttemptNumber(e,t,t+n.length,i).then(function(){s=t})}))}),a.then(function(){var o=[],r=[];return(n=n.sort(function(e,n){return Number(e)>=Number(n)?1:-1})).forEach(function(n,s){r.push(l.scormOfflineProvider.changeAttemptNumber(e,n,t+s+1,i).then(function(){o.push(n)}))}),Promise.all(r).catch(function(s){return r=[],o.forEach(function(o){var s=t+n.indexOf(o)+1;r.push(l.scormOfflineProvider.changeAttemptNumber(e,s,o,i))}),l.utils.allPromises(r).then(function(){return Promise.reject(s)})})}).catch(function(t){if(!s)return Promise.reject(t);for(var o=[],a=Promise.resolve(),u=s;-1!=r.indexOf(u);u++)o.push(u);return o.forEach(function(t){a=a.then(function(){return l.scormOfflineProvider.changeAttemptNumber(e,t+n.length,t,i)})}),a.then(function(){return Promise.reject(t)})})},AddonModScormSyncProvider.prototype.saveSyncSnapshot=function(e,n,t){var o=this;return this.scormProvider.getScormUserData(e,n,void 0,!1,!0,t).then(function(r){return o.scormOfflineProvider.setAttemptSnapshot(e,n,r,t)},function(){return o.scormProvider.getScormUserData(e,n,void 0,!1,!1,t).catch(function(){return{}}).then(function(r){return o.scormOfflineProvider.getScormStoredData(e,n,!1,!0,t).then(function(i){return i.forEach(function(e){r[e.scoid]||(r[e.scoid]={scoid:e.scoid,userdata:{}}),r[e.scoid].userdata[e.element]=e.value}),o.scormOfflineProvider.setAttemptSnapshot(e,n,r,t)})})})},AddonModScormSyncProvider.prototype.snapshotEquals=function(e,n){for(var t in n){var o=n[t],r=e[t];for(var i in o.userdata)if(i.indexOf(".")>-1&&(!r||o.userdata[i]!==r.userdata[i]))return!1}for(var t in e){o=n[t],r=e[t];for(var i in r.userdata)if(i.indexOf(".")>-1&&(!o||o.userdata[i]!==r.userdata[i]))return!1}return!0},AddonModScormSyncProvider.prototype.syncAllScorms=function(e,n){return this.syncOnSites("all SCORMs",this.syncAllScormsFunc.bind(this),[n],e)},AddonModScormSyncProvider.prototype.syncAllScormsFunc=function(e,t){var o=this;return this.scormOfflineProvider.getAllAttempts(e).then(function(r){var l=[],s=[],a=[];return r.forEach(function(e){-1==s.indexOf(e.scormid)&&(s.push(e.scormid),l.push({id:e.scormid,courseId:e.courseid}))}),l.forEach(function(r){o.syncProvider.isBlocked(i.a.COMPONENT,r.id,e)||a.push(o.scormProvider.getScormById(r.courseId,r.id,"",!1,e).then(function(r){return(t?o.syncScorm(r,e):o.syncScormIfNeeded(r,e)).then(function(t){void 0!==t&&o.eventsProvider.trigger(n.AUTO_SYNCED,{scormId:r.id,attemptFinished:t.attemptFinished,warnings:t.warnings,updated:t.updated},e)})}))}),Promise.all(a)})},AddonModScormSyncProvider.prototype.syncAttempt=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.logger.debug("Try to sync attempt "+n+" in SCORM "+e+" and site "+t),this.scormOfflineProvider.getScormStoredData(e,n,!0,!1,t).then(function(r){var i={},l=[],s=!1;r.forEach(function(e){e.element.indexOf(".")>-1&&(i[e.scoid]||(i[e.scoid]=[]),i[e.scoid].push({element:e.element,value:e.value}))});var a=function(r){var a=Number(r);l.push(o.scormProvider.saveTracksOnline(e,a,n,i[a],t).then(function(){return o.scormOfflineProvider.markAsSynced(e,n,a,t).catch(function(){}).then(function(){s=!0})}))};for(var u in i)a(u);return o.utils.allPromises(l).then(function(){return o.scormOfflineProvider.deleteAttempt(e,n,t).catch(function(){return o.scormOfflineProvider.deleteAttempt(e,n,t).catch(function(){o.logger.error("After sync: error deleting attempt "+n+" in SCORM "+e)})})}).catch(function(r){return s?(o.logger.error("Error synchronizing some SCOs for attempt "+n+" in SCORM "+e+". Saving snapshot."),o.saveSyncSnapshot(e,n,t).then(function(){return Promise.reject(r)})):(o.logger.error("Error synchronizing attempt "+n+" in SCORM "+e),Promise.reject(r))})})},AddonModScormSyncProvider.prototype.syncScormIfNeeded=function(e,n){var t=this;return this.isSyncNeeded(e.id,n).then(function(o){if(o)return t.syncScorm(e,n)})},AddonModScormSyncProvider.prototype.syncScorm=function(e,n){var t=this;n=n||this.sitesProvider.getCurrentSiteId();var o,r,l=[],s=0,a=!1;return this.isSyncing(e.id,n)?this.getOngoingSync(e.id,n):this.syncProvider.isBlocked(i.a.COMPONENT,e.id,n)?(this.logger.debug("Cannot sync SCORM "+e.id+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync SCORM "+e.id+" in site "+n),o=this.logHelper.syncIfNeeded(i.a.COMPONENT,e.id,n).catch(function(){}).then(function(){return t.scormProvider.getAttemptCount(e.id,!1,!0,n)}).then(function(o){if(!o.offline||!o.offline.length)return t.finishSync(n,e,l,s,a);r=o;var i=[];o.online.forEach(function(e){s=Math.max(s,e),o.offline.indexOf(e)>-1&&i.push(e)});return(s>0?t.scormProvider.isAttemptIncomplete(e.id,s,!1,!0,n):Promise.resolve(!1)).then(function(u){if(a=!u,i.length||u)return i.length?t.treatCollisions(e.id,i,s,o.offline,n).then(function(o){return l=l.concat(o),t.scormOfflineProvider.getAttempts(e.id,n).then(function(o){var i=[],d=!1;return o=o.map(function(e){return e.attempt}),u&&o.indexOf(s)>-1&&(u=!1),o.forEach(function(o){!u||o<=s?(0==e.maxattempt||o<=e.maxattempt)&&i.push(t.syncAttempt(e.id,o,n)):d=!0}),Promise.all(i).then(function(){return d&&l.push(t.translate.instant("addon.mod_scorm.warningsynconlineincomplete")),t.finishSync(n,e,l,s,a,r,!0)})})}):(l.push(t.translate.instant("addon.mod_scorm.warningsynconlineincomplete")),t.finishSync(n,e,l,s,a,r,!1));var d=[];return o.offline.forEach(function(o){(0==e.maxattempt||o<=e.maxattempt)&&d.push(t.syncAttempt(e.id,o,n))}),Promise.all(d).then(function(){return t.finishSync(n,e,l,s,a,r,!0)})})}),this.addOngoingSync(e.id,o,n))},AddonModScormSyncProvider.prototype.treatCollisions=function(e,n,t,o,r){var i=this,l=[],s=[],a={},u=Math.max.apply(Math,n),d=Math.max.apply(Math,o);return this.getOfflineAttemptData(e,d,r).then(function(c){var p=[];return n.forEach(function(n){p.push(i.scormOfflineProvider.getScormStoredData(e,n,!1,!0,r).then(function(o){return o&&o.length?i.scormOfflineProvider.getScormStoredData(e,n,!0,!1,r).then(function(o){var u=!1;for(var p in o){if(o[p].element.indexOf(".")>-1){u=!0;break}}return u?i.canRetrySync(e,n,t,r).catch(function(){return i.addToNewOrDelete(e,n,d,s,a,c.timecreated,c.incomplete,l,r)}):i.scormOfflineProvider.deleteAttempt(e,n,r).catch(function(){})}):i.scormOfflineProvider.getAttemptSnapshot(e,n,r).then(function(o){if(o&&Object.keys(o).length){return i.scormProvider.getScormUserData(e,n,void 0,!1,t!=n,r).then(function(t){if(!i.snapshotEquals(o,t))return i.addToNewOrDelete(e,n,d,s,a,c.timecreated,c.incomplete,l,r)})}s.push(n)})}))}),Promise.all(p).then(function(){return i.moveNewAttempts(e,s,t,u,o,r).then(function(){return d+=s.length,i.createNewAttemptsAtEnd(e,a,d,r).then(function(){return l})})})})},AddonModScormSyncProvider.AUTO_SYNCED="addon_mod_scorm_autom_synced",AddonModScormSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModWikiOfflineProvider(n,t){this.sitesProvider=t,this.siteSchema={name:"AddonModWikiOfflineProvider",version:1,tables:[{name:e.NEW_PAGES_TABLE,columns:[{name:"wikiid",type:"INTEGER"},{name:"subwikiid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"title",type:"TEXT"},{name:"cachedcontent",type:"TEXT"},{name:"contentformat",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"timecreated",type:"INTEGER"},{name:"timemodified",type:"INTEGER"},{name:"caneditpage",type:"INTEGER"}],primaryKeys:["wikiid","subwikiid","userid","groupid","title"]}]},this.logger=n.getInstance("AddonModWikiOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModWikiOfflineProvider,AddonModWikiOfflineProvider.prototype.convertToPositiveNumber=function(e){return(e=parseInt(e,10))>0?e:0},AddonModWikiOfflineProvider.prototype.deleteNewPage=function(n,t,o,r,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){return t=s.convertToPositiveNumber(t),o=s.convertToPositiveNumber(o),r=s.convertToPositiveNumber(r),i=s.convertToPositiveNumber(i),l.getDb().deleteRecords(e.NEW_PAGES_TABLE,{subwikiid:t,wikiid:o,userid:r,groupid:i,title:n})})},AddonModWikiOfflineProvider.prototype.getAllNewPages=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getAllRecords(e.NEW_PAGES_TABLE)})},AddonModWikiOfflineProvider.prototype.getNewPage=function(n,t,o,r,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){return t=s.convertToPositiveNumber(t),o=s.convertToPositiveNumber(o),r=s.convertToPositiveNumber(r),i=s.convertToPositiveNumber(i),l.getDb().getRecord(e.NEW_PAGES_TABLE,{subwikiid:t,wikiid:o,userid:r,groupid:i,title:n})})},AddonModWikiOfflineProvider.prototype.getSubwikiNewPages=function(n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){return n=l.convertToPositiveNumber(n),t=l.convertToPositiveNumber(t),o=l.convertToPositiveNumber(o),r=l.convertToPositiveNumber(r),i.getDb().getRecords(e.NEW_PAGES_TABLE,{subwikiid:n,wikiid:t,userid:o,groupid:r})})},AddonModWikiOfflineProvider.prototype.getSubwikisNewPages=function(e,n){var t=this,o=[],r=[];return e.forEach(function(e){o.push(t.getSubwikiNewPages(e.id,e.wikiid,e.userid,e.groupid,n).then(function(e){r=r.concat(e)}))}),Promise.all(o).then(function(){return r})},AddonModWikiOfflineProvider.prototype.saveNewPage=function(n,t,o,r,i,l,s){var a=this;return this.sitesProvider.getSite(s).then(function(s){var u=(new Date).getTime(),d={title:n,cachedcontent:t,subwikiid:a.convertToPositiveNumber(o),wikiid:a.convertToPositiveNumber(r),userid:a.convertToPositiveNumber(i),groupid:a.convertToPositiveNumber(l),contentformat:"html",timecreated:u,timemodified:u,caneditpage:1};return s.getDb().insertRecord(e.NEW_PAGES_TABLE,d)})},AddonModWikiOfflineProvider.prototype.subwikisHaveOfflineData=function(e,n){return this.getSubwikisNewPages(e,n).then(function(e){return!!e.length}).catch(function(){return!1})},AddonModWikiOfflineProvider.NEW_PAGES_TABLE="addon_mod_wiki_new_pages_store",AddonModWikiOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(149)),i=t(235),l=(t(289),function(e){function AddonModWikiSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h){var m=e.call(this,"AddonModWikiSyncProvider",n,t,o,r,i,l,f)||this;return m.eventsProvider=a,m.wikiProvider=u,m.wikiOfflineProvider=d,m.utils=c,m.groupsProvider=p,m.logHelper=h,m.componentTranslate=s.translateModuleName("wiki"),m}return Object(o.__extends)(AddonModWikiSyncProvider,e),n=AddonModWikiSyncProvider,AddonModWikiSyncProvider.prototype.getSubwikiBlockId=function(e,n,t,o){return(e=this.wikiOfflineProvider.convertToPositiveNumber(e))&&e>0?String(e):(n=this.wikiOfflineProvider.convertToPositiveNumber(n))?(t=this.wikiOfflineProvider.convertToPositiveNumber(t),o=this.wikiOfflineProvider.convertToPositiveNumber(o),n+":"+t+":"+o):void 0},AddonModWikiSyncProvider.prototype.syncAllWikis=function(e,n){return this.syncOnSites("all wikis",this.syncAllWikisFunc.bind(this),[n],e)},AddonModWikiSyncProvider.prototype.syncAllWikisFunc=function(e,t){var o=this;return this.wikiOfflineProvider.getAllNewPages(e).then(function(r){var i=[],l={};r.forEach(function(e){var n=o.getSubwikiBlockId(e.subwikiid,e.wikiid,e.userid,e.groupid);l[n]=e});var s=function(r){var s=l[r],a=t?o.syncSubwiki(s.subwikiid,s.wikiid,s.userid,s.groupid,e):o.syncSubwikiIfNeeded(s.subwikiid,s.wikiid,s.userid,s.groupid,e);i.push(a.then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{siteId:e,subwikiId:s.subwikiid,wikiId:s.wikiid,userId:s.userid,groupId:s.groupid,created:t.created,discarded:t.discarded,warnings:t.warnings})}))};for(var a in l)s(a);return Promise.all(i)})},AddonModWikiSyncProvider.prototype.syncSubwikiIfNeeded=function(e,n,t,o,r){var i=this,l=this.getSubwikiBlockId(e,n,t,o);return this.isSyncNeeded(l,r).then(function(l){if(l)return i.syncSubwiki(e,n,t,o,r)})},AddonModWikiSyncProvider.prototype.syncSubwiki=function(e,n,t,o,r){var l=this;r=r||this.sitesProvider.getCurrentSiteId();var s={warnings:[],updated:!1,created:[],discarded:[]},a=this.getSubwikiBlockId(e,n,t,o);if(this.isSyncing(a,r))return this.getOngoingSync(a,r);if(this.syncProvider.isBlocked(i.a.COMPONENT,a,r))return this.logger.debug("Cannot sync subwiki "+a+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync subwiki "+a);var u=this.wikiOfflineProvider.getSubwikiNewPages(e,n,t,o,r).catch(function(){return[]}).then(function(i){if(i&&i.length){if(!l.appProvider.isOnline())return Promise.reject(l.translate.instant("core.networkerrormsg"));var a=[];return i.forEach(function(i){a.push(l.wikiProvider.newPageOnline(i.title,i.cachedcontent,e,n,t,o,r).then(function(a){return s.updated=!0,s.created.push({pageId:a,title:i.title}),l.wikiOfflineProvider.deleteNewPage(i.title,e,n,t,o,r)}).catch(function(a){return l.utils.isWebServiceError(a)?l.wikiOfflineProvider.deleteNewPage(i.title,e,n,t,o,r).then(function(){s.updated=!0;var e=l.translate.instant("core.warningofflinedatadeleted",{component:l.translate.instant("addon.mod_wiki.wikipage"),name:i.title,error:l.textUtils.getErrorMessageFromError(a)});s.discarded.push({title:i.title,warning:e}),s.warnings.push(e)}):Promise.reject(a)}))}),Promise.all(a)}}).then(function(){return l.setSyncTime(a,r).catch(function(){})}).then(function(){return s});return this.addOngoingSync(a,u,r)},AddonModWikiSyncProvider.prototype.syncWiki=function(e,n,t,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.logHelper.syncIfNeeded(i.a.COMPONENT,e,o).catch(function(){}).then(function(){return r.wikiProvider.getSubwikis(e)}).then(function(i){var l=[],s={warnings:[],updated:!1,subwikis:{},siteId:o};return i.forEach(function(e){l.push(r.syncSubwiki(e.id,e.wikiid,e.userid,e.groupid,o).then(function(n){n&&n.updated&&(s.warnings=s.warnings.concat(n.warnings),s.updated=!0,s.subwikis[e.id]={created:n.created,discarded:n.discarded})}))}),Promise.all(l).then(function(){var o=[];return s.updated&&(e&&(o.push(r.wikiProvider.invalidateSubwikis(e)),o.push(r.wikiProvider.invalidateSubwikiPages(e)),o.push(r.wikiProvider.invalidateSubwikiFiles(e))),n&&o.push(r.wikiProvider.invalidateWikiData(n)),t&&(o.push(r.groupsProvider.invalidateActivityAllowedGroups(t)),o.push(r.groupsProvider.invalidateActivityGroupMode(t)))),Promise.all(o).catch(function(){}).then(function(){return s})})})},AddonModWikiSyncProvider.AUTO_SYNCED="addon_mod_wiki_autom_synced",AddonModWikiSyncProvider.MANUAL_SYNCED="addon_mod_wiki_manual_synced",AddonModWikiSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(149)),i=t(176),l=(t(204),t(190),function(e){function AddonModWorkshopSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h){var m=e.call(this,"AddonModWorkshopSyncProvider",i,l,t,s,a,n,u)||this;return m.eventsProvider=r,m.utils=d,m.workshopProvider=c,m.workshopHelper=p,m.workshopOffline=f,m.logHelper=h,m.componentTranslate=o.translateModuleName("workshop"),m}return Object(o.__extends)(AddonModWorkshopSyncProvider,e),n=AddonModWorkshopSyncProvider,AddonModWorkshopSyncProvider.prototype.hasDataToSync=function(e,n){return this.workshopOffline.hasWorkshopOfflineData(e,n)},AddonModWorkshopSyncProvider.prototype.syncAllWorkshops=function(e,n){return this.syncOnSites("all workshops",this.syncAllWorkshopsFunc.bind(this),[n],e)},AddonModWorkshopSyncProvider.prototype.syncAllWorkshopsFunc=function(e,t){var o=this;return this.workshopOffline.getAllWorkshops(e).then(function(r){var i=r.map(function(r){return(t?o.syncWorkshop(r,e):o.syncWorkshopIfNeeded(r,e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{workshopId:r,warnings:t.warnings},e)})});return Promise.all(i)})},AddonModWorkshopSyncProvider.prototype.syncWorkshopIfNeeded=function(e,n){var t=this;return this.isSyncNeeded(e,n).then(function(o){if(o)return t.syncWorkshop(e,n)})},AddonModWorkshopSyncProvider.prototype.syncWorkshop=function(e,n){var t=this;if(n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,n))return this.getOngoingSync(e,n);if(this.syncProvider.isBlocked(i.a.COMPONENT,e,n))return this.logger.debug("Cannot sync workshop "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync workshop "+e);var o=[];o.push(this.workshopOffline.getSubmissions(e,n).catch(function(){return[]})),o.push(this.workshopOffline.getAssessments(e,n).catch(function(){return[]})),o.push(this.workshopOffline.getEvaluateSubmissions(e,n).catch(function(){return[]})),o.push(this.workshopOffline.getEvaluateAssessments(e,n).catch(function(){return[]})),o.push(this.logHelper.syncIfNeeded(i.a.COMPONENT,e,n));var r={warnings:[],updated:!1},l=Promise.all(o).then(function(o){var i;for(var l in o)if(o[l].length>0&&o[l][0].courseid){i=o[l][0].courseid;break}if(i)return t.appProvider.isOnline()?t.workshopProvider.getWorkshopById(i,e,n).then(function(e){var i=o[1],l=o[2],s=o[3],a=[],u={};return o[0].forEach(function(e){void 0===u[e.submissionid]&&(u[e.submissionid]=[]),u[e.submissionid].push(e)}),Object.keys(u).forEach(function(o){a.push(t.syncSubmission(e,u[o],r,n).then(function(){r.updated=!0}))}),i.forEach(function(o){a.push(t.syncAssessment(e,o,r,n).then(function(){r.updated=!0}))}),l.forEach(function(o){a.push(t.syncEvaluateSubmission(e,o,r,n).then(function(){r.updated=!0}))}),s.forEach(function(o){a.push(t.syncEvaluateAssessment(e,o,r,n).then(function(){r.updated=!0}))}),Promise.all(a)}).then(function(){if(r.updated)return t.workshopProvider.invalidateContentById(e,i,n).catch(function(){})}):Promise.reject(null)}).then(function(){return t.setSyncTime(e,n).catch(function(){})}).then(function(){return r});return this.addOngoingSync(e,l,n)},AddonModWorkshopSyncProvider.prototype.syncSubmission=function(e,n,t,o){var r,l=this,s=!1,a=null,u=(n=n.sort(function(e,n){return e.timemodified-n.timemodified}))[0].submissionid;return u>0?(s=!0,a=this.workshopProvider.getSubmission(e.id,u,o).then(function(e){return e.timemodified}).catch(function(){return-1})):a=Promise.resolve(0),a.then(function(a){if(a<0||a>=n[0].timemodified)return t.updated=!0,r=l.translate.instant("addon.mod_workshop.warningsubmissionmodified"),l.workshopOffline.deleteAllSubmissionActions(e.id,u,o);var d=Promise.resolve();return n.forEach(function(n){d=d.then(function(){u=n.submissionid>0?n.submissionid:u;return(n.attachmentsid?l.workshopHelper.getSubmissionFilesFromOfflineFilesObject(n.attachmentsid,e.id,u,s,o).then(function(n){return l.workshopHelper.uploadOrStoreSubmissionFiles(e.id,u,n,s,!1,o)}):l.workshopHelper.uploadOrStoreSubmissionFiles(e.id,u,[],s,!1,o)).then(function(t){switch(e.submissiontypefile==i.a.SUBMISSION_TYPE_DISABLED&&(t=null),n.action){case"add":return l.workshopProvider.addSubmissionOnline(e.id,n.title,n.content,t,o).then(function(e){u=e});case"update":return l.workshopProvider.updateSubmissionOnline(u,n.title,n.content,t,o);case"delete":return l.workshopProvider.deleteSubmissionOnline(u,o);default:return Promise.resolve()}}).catch(function(e){if(!e||!l.utils.isWebServiceError(e))return Promise.reject(e);r=l.textUtils.getErrorMessageFromError(e)}).then(function(){return t.updated=!0,l.workshopOffline.deleteSubmissionAction(n.workshopid,n.submissionid,n.action,o).then(function(){if("add"==n.action||"update"==n.action){return l.workshopHelper.deleteSubmissionStoredFiles(n.workshopid,n.submissionid,"update"==n.action,o)}})})})}),d.then(function(){if(r){var n=l.translate.instant("core.warningofflinedatadeleted",{component:l.componentTranslate,name:e.name,error:r});-1==t.warnings.indexOf(n)&&t.warnings.push(n)}})})},AddonModWorkshopSyncProvider.prototype.syncAssessment=function(e,n,t,o){var r,i=this,l=n.assessmentid;return this.workshopProvider.getAssessment(e.id,l,o).then(function(e){return e.timemodified}).catch(function(){return-1}).then(function(s){if(s<0||s>=n.timemodified)return t.updated=!0,r=i.translate.instant("addon.mod_workshop.warningassessmentmodified"),i.workshopOffline.deleteAssessment(e.id,l,o);var a=n.inputdata;return(a.feedbackauthorattachmentsid?i.workshopHelper.getAssessmentFilesFromOfflineFilesObject(a.feedbackauthorattachmentsid,e.id,l,o).then(function(n){return i.workshopHelper.uploadOrStoreAssessmentFiles(e.id,l,n,!1,o)}):i.workshopHelper.uploadOrStoreAssessmentFiles(e.id,l,[],!1,o)).then(function(e){return a.feedbackauthorattachmentsid=e||0,i.workshopProvider.updateAssessmentOnline(l,a,o)}).catch(function(e){if(!e||!i.utils.isWebServiceError(e))return Promise.reject(e);r=i.textUtils.getErrorMessageFromError(e)}).then(function(){return t.updated=!0,i.workshopOffline.deleteAssessment(e.id,l,o).then(function(){i.workshopHelper.deleteAssessmentStoredFiles(e.id,l,o)})})}).then(function(){if(r){var n=i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:r});-1==t.warnings.indexOf(n)&&t.warnings.push(n)}})},AddonModWorkshopSyncProvider.prototype.syncEvaluateSubmission=function(e,n,t,o){var r,i=this,l=n.submissionid;return this.workshopProvider.getSubmission(e.id,l,o).then(function(e){return e.timemodified}).catch(function(){return-1}).then(function(s){return s<0||s>=n.timemodified?(t.updated=!0,r=i.translate.instant("addon.mod_workshop.warningsubmissionmodified"),i.workshopOffline.deleteEvaluateSubmission(e.id,l,o)):i.workshopProvider.evaluateSubmissionOnline(l,n.feedbacktext,n.published,n.gradeover,o).catch(function(e){if(!e||!i.utils.isWebServiceError(e))return Promise.reject(e);r=i.textUtils.getErrorMessageFromError(e)}).then(function(){return t.updated=!0,i.workshopOffline.deleteEvaluateSubmission(e.id,l,o)})}).then(function(){if(r){var n=i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:r});-1==t.warnings.indexOf(n)&&t.warnings.push(n)}})},AddonModWorkshopSyncProvider.prototype.syncEvaluateAssessment=function(e,n,t,o){var r,i=this,l=n.assessmentid;return this.workshopProvider.getAssessment(e.id,l,o).then(function(e){return e.timemodified}).catch(function(){return-1}).then(function(s){return s<0||s>=n.timemodified?(t.updated=!0,r=i.translate.instant("addon.mod_workshop.warningassessmentmodified"),i.workshopOffline.deleteEvaluateAssessment(e.id,l,o)):i.workshopProvider.evaluateAssessmentOnline(l,n.feedbacktext,n.weight,n.gradinggradeover,o).catch(function(e){if(!e||!i.utils.isWebServiceError(e))return Promise.reject(e);r=i.textUtils.getErrorMessageFromError(e)}).then(function(){return t.updated=!0,i.workshopOffline.deleteEvaluateAssessment(e.id,l,o)})}).then(function(){if(r){var n=i.translate.instant("core.warningofflinedatadeleted",{component:i.componentTranslate,name:e.name,error:r});-1==t.warnings.indexOf(n)&&t.warnings.push(n)}})},AddonModWorkshopSyncProvider.AUTO_SYNCED="addon_mod_workshop_autom_synced",AddonModWorkshopSyncProvider.MANUAL_SYNCED="addon_mod_workshop_manual_synced",AddonModWorkshopSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModDataOfflineProvider(n,t,o,r,i,l){this.sitesProvider=t,this.textUtils=o,this.fileProvider=r,this.fileUploaderProvider=i,this.utils=l,this.siteSchema={name:"AddonModDataOfflineProvider",version:1,tables:[{name:e.DATA_ENTRY_TABLE,columns:[{name:"dataid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"groupid",type:"INTEGER"},{name:"action",type:"TEXT"},{name:"entryid",type:"INTEGER"},{name:"fields",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["dataid","entryid","action"]}],migrate:function(n,t,o){if(0==t){var r=e.DATA_ENTRY_TABLE,i="addon_mod_data_entry";return n.tableExists(i).then(function(){return n.insertRecordsFrom(r,i).then(function(){return n.dropTable(i)})}).catch(function(){})}}},this.logger=n.getInstance("AddonModDataOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModDataOfflineProvider,AddonModDataOfflineProvider.prototype.deleteAllEntryActions=function(e,n,t){var o=this;return this.getEntryActions(e,n,t).then(function(r){var i=[];return r.forEach(function(r){i.push(o.deleteEntry(e,n,r.action,t))}),Promise.all(i)})},AddonModDataOfflineProvider.prototype.deleteEntry=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return i.deleteEntryFiles(n,t,o,r.id).then(function(){return r.getDb().deleteRecords(e.DATA_ENTRY_TABLE,{dataid:n,entryid:t,action:o})})})},AddonModDataOfflineProvider.prototype.deleteEntryFiles=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return r.getEntry(e,n,t,o.id).then(function(t){if(t.fields){var i=[];return t.fields.forEach(function(t){if(r.textUtils.parseJSON(t.value).offline){var l=r.getEntryFieldFolder(e,n,t.fieldid,o.id).then(function(e){return r.fileUploaderProvider.getStoredFiles(e)}).then(function(e){return r.fileUploaderProvider.clearTmpFiles(e)}).catch(function(){});i.push(l)}}),Promise.all(i)}}).catch(function(){})})},AddonModDataOfflineProvider.prototype.getAllEntries=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getAllRecords(e.DATA_ENTRY_TABLE)}).then(function(e){return e.map(t.parseRecord.bind(t))})},AddonModDataOfflineProvider.prototype.getDatabaseEntries=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.DATA_ENTRY_TABLE,{dataid:n},"timemodified")}).then(function(e){return e.map(o.parseRecord.bind(o))})},AddonModDataOfflineProvider.prototype.getEntry=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return r.getDb().getRecord(e.DATA_ENTRY_TABLE,{dataid:n,entryid:t,action:o})}).then(function(e){return i.parseRecord(e)})},AddonModDataOfflineProvider.prototype.getEntryActions=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(e.DATA_ENTRY_TABLE,{dataid:n,entryid:t})}).then(function(e){return e.map(r.parseRecord.bind(r))})},AddonModDataOfflineProvider.prototype.hasOfflineData=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return o.utils.promiseWorks(t.getDb().recordExists(e.DATA_ENTRY_TABLE,{dataid:n}))})},AddonModDataOfflineProvider.prototype.getDatabaseFolder=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=t.fileProvider.getSiteFolder(n.getId());return t.textUtils.concatenatePaths(o,"offlinedatabase/"+e)})},AddonModDataOfflineProvider.prototype.getEntryFieldFolder=function(e,n,t,o){var r=this;return this.getDatabaseFolder(e,o).then(function(e){return r.textUtils.concatenatePaths(e,n+"_"+t)})},AddonModDataOfflineProvider.prototype.parseRecord=function(e){return e.fields=this.textUtils.parseJSON(e.fields),e},AddonModDataOfflineProvider.prototype.saveEntry=function(n,t,o,r,i,l,s,a){return this.sitesProvider.getSite(a).then(function(a){s=s||(new Date).getTime();var u={dataid:n,courseid:r,groupid:i,action:o,entryid:t=void 0===t||null===t?-s:t,fields:JSON.stringify(l||[]),timemodified:s};return a.getDb().insertRecord(e.DATA_ENTRY_TABLE,u)})},AddonModDataOfflineProvider.DATA_ENTRY_TABLE="addon_mod_data_entry_1",AddonModDataOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var o=t(0),r=t(1),i=(t(6),t(10)),l=t(53),s=t(14),a=t(625),u=function(){function CoreCoursesCourseProgressComponent(e,n,t,o,r,i,l,s,a){this.navCtrl=e,this.courseHelper=n,this.domUtils=t,this.courseProvider=o,this.eventsProvider=r,this.sitesProvider=i,this.coursesProvider=l,this.popoverCtrl=s,this.userProvider=a,this.showAll=!1,this.showDownload=!0,this.prefetchCourseData={downloadSucceeded:!1,prefetchCourseIcon:"spinner",title:"core.course.downloadcourse"},this.showSpinner=!1,this.isDestroyed=!1}return CoreCoursesCourseProgressComponent.prototype.ngOnInit=function(){var e=this;this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),this.downloadCourseEnabled&&this.initPrefetchCourse(),this.courseOptionMenuEnabled=this.showAll&&void 0!==this.course.isfavourite,this.siteUpdatedObserver=this.eventsProvider.on(i.a.SITE_UPDATED,function(){var n=e.downloadCourseEnabled;e.downloadCourseEnabled=!e.coursesProvider.isDownloadCourseDisabledInSite(),!n&&e.downloadCourseEnabled&&e.initPrefetchCourse()},this.sitesProvider.getCurrentSiteId())},CoreCoursesCourseProgressComponent.prototype.initPrefetchCourse=function(){var e=this;void 0===this.courseStatusObserver&&(this.courseStatusObserver=this.eventsProvider.on(i.a.COURSE_STATUS_CHANGED,function(n){n.courseId!=e.course.id&&n.courseId!=s.a.ALL_COURSES_CLEARED||e.updateCourseStatus(n.status)},this.sitesProvider.getCurrentSiteId()),this.courseHelper.getCourseStatusIconAndTitle(this.course.id).then(function(n){if(e.prefetchCourseData.prefetchCourseIcon=n.icon,e.prefetchCourseData.title=n.title,"spinner"==n.icon){var t=e.courseHelper.getCourseDownloadPromise(e.course.id);t?t.catch(function(n){e.isDestroyed||e.domUtils.showErrorModalDefault(n,"core.course.errordownloadingcourse",!0)}):e.courseProvider.setCoursePreviousStatus(e.course.id)}}))},CoreCoursesCourseProgressComponent.prototype.openCourse=function(e){this.courseHelper.openCourse(this.navCtrl,e)},CoreCoursesCourseProgressComponent.prototype.prefetchCourse=function(e){var n=this;e.preventDefault(),e.stopPropagation(),this.courseHelper.confirmAndPrefetchCourse(this.prefetchCourseData,this.course).catch(function(e){n.isDestroyed||n.domUtils.showErrorModalDefault(e,"core.course.errordownloadingcourse",!0)})},CoreCoursesCourseProgressComponent.prototype.updateCourseStatus=function(e){var n=this.courseHelper.getCourseStatusIconAndTitleFromStatus(e);this.prefetchCourseData.prefetchCourseIcon=n.icon,this.prefetchCourseData.title=n.title},CoreCoursesCourseProgressComponent.prototype.showCourseOptionsMenu=function(e){var n=this;e.preventDefault(),e.stopPropagation();var t=this.popoverCtrl.create(a.a,{course:this.course,prefetch:this.prefetchCourseData});t.onDidDismiss(function(t){if(t)switch(t){case"download":"spinner"!=n.prefetchCourseData.prefetchCourseIcon&&n.prefetchCourse(e);break;case"hide":n.setCourseHidden(!0);break;case"show":n.setCourseHidden(!1);break;case"favourite":n.setCourseFavourite(!0);break;case"unfavourite":n.setCourseFavourite(!1)}}),t.present({ev:e})},CoreCoursesCourseProgressComponent.prototype.setCourseHidden=function(e){var n=this;this.showSpinner=!0,this.userProvider.updateUserPreference("block_myoverview_hidden_course_"+this.course.id,e?1:null).then(function(){n.course.hidden=e,n.eventsProvider.trigger(l.a.EVENT_MY_COURSES_UPDATED,{course:n.course},n.sitesProvider.getCurrentSiteId())}).catch(function(e){n.isDestroyed||n.domUtils.showErrorModalDefault(e,"Error changing course visibility.")}).finally(function(){n.showSpinner=!1})},CoreCoursesCourseProgressComponent.prototype.setCourseFavourite=function(e){var n=this;this.showSpinner=!0,this.coursesProvider.setFavouriteCourse(this.course.id,e).then(function(){n.course.isfavourite=e,n.eventsProvider.trigger(l.a.EVENT_MY_COURSES_UPDATED,{course:n.course},n.sitesProvider.getCurrentSiteId())}).catch(function(e){n.isDestroyed||n.domUtils.showErrorModalDefault(e,"Error changing course favourite attribute.")}).finally(function(){n.showSpinner=!1})},CoreCoursesCourseProgressComponent.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.siteUpdatedObserver&&this.siteUpdatedObserver.off(),this.courseStatusObserver&&this.courseStatusObserver.off()},CoreCoursesCourseProgressComponent=Object(o.__decorate)([Object(o.__param)(0,Object(r.E)())],CoreCoursesCourseProgressComponent)}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(295);var o=t(54),r=function(){function AddonModChoiceProvider(e,n,t,o,r,i){this.sitesProvider=e,this.appProvider=n,this.filepoolProvider=t,this.utils=o,this.choiceOffline=r,this.logHelper=i,this.ROOT_CACHE_KEY="mmaModChoice:"}return e=AddonModChoiceProvider,AddonModChoiceProvider.prototype.canStudentSeeResults=function(n,t){var o=(new Date).getTime();return n.showresults===e.RESULTS_ALWAYS||n.showresults===e.RESULTS_AFTER_CLOSE&&0!==n.timeclose&&n.timeclose<=o||n.showresults===e.RESULTS_AFTER_ANSWER&&t},AddonModChoiceProvider.prototype.deleteResponses=function(e,n,t,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId(),o=o||[];var l=function(){return i.choiceOffline.saveResponse(e,n,t,o,!0,r).then(function(){return!1})};return this.appProvider.isOnline()?this.choiceOffline.deleteResponse(e,r).then(function(){return i.deleteResponsesOnline(e,o,r).then(function(){return!0}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):l()})}):l()},AddonModChoiceProvider.prototype.deleteResponsesOnline=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_choice_delete_choice_responses",{choiceid:e,responses:n}).then(function(n){if(!n||!1===n.status)return Promise.reject(o.utils.createFakeWSError(""));var r=[o.invalidateOptions(e,t.id),o.invalidateResults(e,t.id)];return Promise.all(r).catch(function(){})})})},AddonModChoiceProvider.prototype.getChoiceDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"choice:"+e},AddonModChoiceProvider.prototype.getChoiceOptionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"options:"+e},AddonModChoiceProvider.prototype.getChoiceResultsCacheKey=function(e){return this.ROOT_CACHE_KEY+"results:"+e},AddonModChoiceProvider.prototype.getChoiceByDataKey=function(e,n,t,r,i,l){var s=this;return this.sitesProvider.getSite(e).then(function(e){var a={courseids:[n]},u={cacheKey:s.getChoiceDataCacheKey(n),omitExpires:i,updateFrequency:o.a.FREQUENCY_RARELY};return i?u.omitExpires=!0:l&&(u.getFromCache=!1,u.emergencyCache=!1),e.read("mod_choice_get_choices_by_courses",a,u).then(function(e){if(e&&e.choices){var n=e.choices.find(function(e){return e[t]==r});if(n)return n}return Promise.reject(null)})})},AddonModChoiceProvider.prototype.getChoice=function(e,n,t,o,r){return this.getChoiceByDataKey(t,e,"coursemodule",n,o,r)},AddonModChoiceProvider.prototype.getChoiceById=function(e,n,t,o,r){return this.getChoiceByDataKey(t,e,"id",n,o,r)},AddonModChoiceProvider.prototype.getOptions=function(e,n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={choiceid:e},l={cacheKey:r.getChoiceOptionsCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n&&(l.getFromCache=!1,l.emergencyCache=!1),t.read("mod_choice_get_choice_options",i,l).then(function(e){return e.options?e.options:Promise.reject(null)})})},AddonModChoiceProvider.prototype.getResults=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){var r={choiceid:e},i={cacheKey:o.getChoiceResultsCacheKey(e)};return n&&(i.getFromCache=!1,i.emergencyCache=!1),t.read("mod_choice_get_choice_results",r,i).then(function(e){return e.options?e.options:Promise.reject(null)})})},AddonModChoiceProvider.prototype.invalidateChoiceData=function(e,n){var t=this;return this.sitesProvider.getSite(null).then(function(n){return n.invalidateWsCacheForKey(t.getChoiceDataCacheKey(e))})},AddonModChoiceProvider.prototype.invalidateContent=function(n,t,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=[];return i.push(this.getChoice(t,n).then(function(e){return Promise.all([r.invalidateChoiceData(t),r.invalidateOptions(e.id),r.invalidateResults(e.id)])})),i.push(this.filepoolProvider.invalidateFilesByComponent(o,e.COMPONENT,n)),this.utils.allPromises(i)},AddonModChoiceProvider.prototype.invalidateOptions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getChoiceOptionsCacheKey(e))})},AddonModChoiceProvider.prototype.invalidateResults=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getChoiceResultsCacheKey(e))})},AddonModChoiceProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_choice_view_choice",{choiceid:n},e.COMPONENT,n,t,"choice",{},o)},AddonModChoiceProvider.prototype.submitResponse=function(e,n,t,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l=function(){return i.choiceOffline.saveResponse(e,n,t,o,!1,r).then(function(){return!1})};return this.appProvider.isOnline()?this.choiceOffline.deleteResponse(e,r).then(function(){return i.submitResponseOnline(e,o,r).then(function(){return!0}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):l()})}):l()},AddonModChoiceProvider.prototype.submitResponseOnline=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(r){return r.write("mod_choice_submit_choice_response",{choiceid:e,responses:n}).then(function(){var n=[o.invalidateOptions(e,t),o.invalidateResults(e,t)];return Promise.all(n).catch(function(){})})})},AddonModChoiceProvider.COMPONENT="mmaModChoice",AddonModChoiceProvider.RESULTS_NOT=0,AddonModChoiceProvider.RESULTS_AFTER_ANSWER=1,AddonModChoiceProvider.RESULTS_AFTER_CLOSE=2,AddonModChoiceProvider.RESULTS_ALWAYS=3,AddonModChoiceProvider.PUBLISH_ANONYMOUS=!1,AddonModChoiceProvider.PUBLISH_NAMES=!0,AddonModChoiceProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModChoiceOfflineProvider(n){this.sitesProvider=n,this.siteSchema={name:"AddonModChoiceOfflineProvider",version:1,tables:[{name:e.CHOICE_TABLE,columns:[{name:"choiceid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"responses",type:"TEXT"},{name:"deleting",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["choiceid","userid"]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModChoiceOfflineProvider,AddonModChoiceOfflineProvider.prototype.deleteResponse=function(n,t,o){return this.sitesProvider.getSite(t).then(function(t){return o=o||t.getUserId(),t.getDb().deleteRecords(e.CHOICE_TABLE,{choiceid:n,userid:o})})},AddonModChoiceOfflineProvider.prototype.getResponses=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.CHOICE_TABLE).then(function(e){return e.forEach(function(e){e.responses=JSON.parse(e.responses)}),e})})},AddonModChoiceOfflineProvider.prototype.hasResponse=function(e,n,t){return this.getResponse(e,n,t).then(function(e){return!!e.choiceid}).catch(function(e){return!1})},AddonModChoiceOfflineProvider.prototype.getResponse=function(n,t,o){return this.sitesProvider.getSite(t).then(function(t){return o=o||t.getUserId(),t.getDb().getRecord(e.CHOICE_TABLE,{choiceid:n,userid:o}).then(function(e){return e.responses=JSON.parse(e.responses),e})})},AddonModChoiceOfflineProvider.prototype.saveResponse=function(n,t,o,r,i,l,s){return this.sitesProvider.getSite(l).then(function(l){var a={choiceid:n,name:t,courseid:o,userid:s||l.getUserId(),responses:JSON.stringify(r),deleting:i?1:0,timecreated:(new Date).getTime()};return l.getDb().insertRecord(e.CHOICE_TABLE,a)})},AddonModChoiceOfflineProvider.CHOICE_TABLE="addon_mod_choice_responses",AddonModChoiceOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(295),t(294)),i=(t(4),t(311)),l=(t(591),function(e){function AddonModChoiceSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h,m){var _=e.call(this,"AddonModChoiceSyncProvider",t,n,o,c,u,s,p,m,h)||this;return _.sitesProvider=n,_.appProvider=o,_.choiceOffline=r,_.eventsProvider=i,_.choiceProvider=l,_.utils=a,_.textUtils=u,_.courseProvider=d,_.logHelper=f,_.componentTranslate=d.translateModuleName("choice"),_}return Object(o.__extends)(AddonModChoiceSyncProvider,e),n=AddonModChoiceSyncProvider,AddonModChoiceSyncProvider.prototype.getSyncId=function(e,n){return e+"#"+n},AddonModChoiceSyncProvider.prototype.syncAllChoices=function(e,n){return this.syncOnSites("choices",this.syncAllChoicesFunc.bind(this),[n],e)},AddonModChoiceSyncProvider.prototype.syncAllChoicesFunc=function(e,t){var o=this;return this.choiceOffline.getResponses(e).then(function(r){var i=r.map(function(r){return(t?o.syncChoice(r.choiceid,r.userid,e):o.syncChoiceIfNeeded(r.choiceid,r.userid,e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{choiceId:r.choiceid,userId:r.userid,warnings:t.warnings},e)})});return Promise.all(i)})},AddonModChoiceSyncProvider.prototype.syncChoiceIfNeeded=function(e,n,t){var o=this,r=this.getSyncId(e,n);return this.isSyncNeeded(r,t).then(function(r){if(r)return o.syncChoice(e,n,t)})},AddonModChoiceSyncProvider.prototype.syncChoice=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(i){n=n||i.getUserId(),t=i.getId();var l=o.getSyncId(e,n);if(o.isSyncing(l,t))return o.getOngoingSync(l,t);o.logger.debug("Try to sync choice '"+e+"' for user '"+n+"'");var s,a={warnings:[],updated:!1},u=o.logHelper.syncIfNeeded(r.a.COMPONENT,e,t).catch(function(){}).then(function(){return o.choiceOffline.getResponse(e,t,n).catch(function(){return{}})}).then(function(r){if(r.choiceid){if(!o.appProvider.isOnline())return Promise.reject(null);s=r.courseid;return(r.deleting?o.choiceProvider.deleteResponsesOnline(e,r.responses,t):o.choiceProvider.submitResponseOnline(e,r.responses,t)).then(function(){return a.updated=!0,o.choiceOffline.deleteResponse(e,t,n)}).catch(function(i){return o.utils.isWebServiceError(i)?(a.updated=!0,o.choiceOffline.deleteResponse(e,t,n).then(function(){a.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:r.name,error:o.textUtils.getErrorMessageFromError(i)}))})):Promise.reject(i)})}}).then(function(){if(s)return o.courseProvider.getModuleBasicInfoByInstance(e,"choice",t).then(function(e){return o.prefetchAfterUpdate(e,s,void 0,t)}).catch(function(){})}).then(function(){return o.setSyncTime(l,t)}).then(function(){return a});return o.addOngoingSync(l,u,t)})},AddonModChoiceSyncProvider.AUTO_SYNCED="addon_mod_choice_autom_synced",AddonModChoiceSyncProvider;var n}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModFeedbackOfflineProvider(n,t,o,r){this.sitesProvider=t,this.textUtils=o,this.timeUtils=r,this.siteSchema={name:"AddonModFeedbackOfflineProvider",version:1,tables:[{name:e.FEEDBACK_TABLE,columns:[{name:"feedbackid",type:"INTEGER"},{name:"page",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"responses",type:"TEXT"},{name:"timemodified",type:"INTEGER"}],primaryKeys:["feedbackid","page"]}]},this.logger=n.getInstance("AddonModFeedbackOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModFeedbackOfflineProvider,AddonModFeedbackOfflineProvider.prototype.deleteFeedbackPageResponses=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){return o.getDb().deleteRecords(e.FEEDBACK_TABLE,{feedbackid:n,page:t})})},AddonModFeedbackOfflineProvider.prototype.getAllFeedbackResponses=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getAllRecords(e.FEEDBACK_TABLE).then(function(e){return e.forEach(function(e){e.responses=t.textUtils.parseJSON(e.responses)}),e})})},AddonModFeedbackOfflineProvider.prototype.getFeedbackResponses=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.FEEDBACK_TABLE,{feedbackid:n})}).then(function(e){return e.forEach(function(e){e.responses=o.textUtils.parseJSON(e.responses)}),e})},AddonModFeedbackOfflineProvider.prototype.getFeedbackPageResponses=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecord(e.FEEDBACK_TABLE,{feedbackid:n,page:t})}).then(function(e){return e.responses=r.textUtils.parseJSON(e.responses),e})},AddonModFeedbackOfflineProvider.prototype.hasFeedbackOfflineData=function(e,n){return this.getFeedbackResponses(e,n).then(function(e){return!!e.length})},AddonModFeedbackOfflineProvider.prototype.saveResponses=function(n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={feedbackid:n,page:t,courseid:r,responses:JSON.stringify(o),timemodified:l.timeUtils.timestamp()};return i.getDb().insertRecord(e.FEEDBACK_TABLE,s)})},AddonModFeedbackOfflineProvider.FEEDBACK_TABLE="addon_mod_feedback_answers",AddonModFeedbackOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(54),r=function(){function AddonModLtiProvider(e,n,t,o,r,i,l,s){this.fileProvider=e,this.sitesProvider=n,this.textUtils=t,this.urlUtils=o,this.utils=r,this.translate=i,this.appProvider=l,this.logHelper=s,this.ROOT_CACHE_KEY="mmaModLti:",this.LAUNCHER_FILE_NAME="lti_launcher.html"}return e=AddonModLtiProvider,AddonModLtiProvider.prototype.deleteLauncher=function(){return this.fileProvider.removeFile(this.LAUNCHER_FILE_NAME)},AddonModLtiProvider.prototype.generateLauncher=function(e,n){var t=this;if(!this.fileProvider.isAvailable())return Promise.resolve(e);var o='<form action="'+e+'" name="ltiLaunchForm" method="post" encType="application/x-www-form-urlencoded">\n';return n.forEach(function(e){o+="ext_submit"==e.name?'    <input type="submit"':'    <input type="hidden" name="'+t.textUtils.escapeHTML(e.name)+'"',o+=' value="'+t.textUtils.escapeHTML(e.value)+'"/>\n'}),o+="</form>\n",o+='<script type="text/javascript"> \n    window.onload = function() { \n        document.ltiLaunchForm.submit(); \n    }; \n<\/script> \n',this.fileProvider.writeFile(this.LAUNCHER_FILE_NAME,o).then(function(e){return t.appProvider.isDesktop()?e.toInternalURL():e.toURL()})},AddonModLtiProvider.prototype.getLti=function(e,n){var t={courseids:[e]},r={cacheKey:this.getLtiCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return this.sitesProvider.getCurrentSite().read("mod_lti_get_ltis_by_courses",t,r).then(function(e){if(e.ltis){var t=e.ltis.find(function(e){return e.coursemodule==n});if(t)return t}return Promise.reject(null)})},AddonModLtiProvider.prototype.getLtiCacheKey=function(e){return this.ROOT_CACHE_KEY+"lti:"+e},AddonModLtiProvider.prototype.getLtiLaunchData=function(e){var n={toolid:e},t={getFromCache:!1,saveToCache:!0,emergencyCache:!0,cacheKey:this.getLtiLaunchDataCacheKey(e)};return this.sitesProvider.getCurrentSite().read("mod_lti_get_tool_launch_data",n,t).then(function(e){return e.endpoint?e:Promise.reject(null)})},AddonModLtiProvider.prototype.getLtiLaunchDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"launch:"+e},AddonModLtiProvider.prototype.invalidateLti=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getLtiCacheKey(e))},AddonModLtiProvider.prototype.invalidateLtiLaunchData=function(e){return this.sitesProvider.getCurrentSite().invalidateWsCacheForKey(this.getLtiLaunchDataCacheKey(e))},AddonModLtiProvider.prototype.launch=function(e,n){var t=this;return this.urlUtils.isHttpURL(e)?this.generateLauncher(e,n).then(function(e){t.appProvider.isMobile()?t.utils.openInApp(e):t.utils.openInBrowser(e)}):Promise.reject(this.translate.instant("addon.mod_lti.errorinvalidlaunchurl"))},AddonModLtiProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_lti_view_lti",{ltiid:n},e.COMPONENT,n,t,"lti",{},o)},AddonModLtiProvider.COMPONENT="mmaModLti",AddonModLtiProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(223),r=function(){function AddonModResourceHelperProvider(e,n,t,o,r,i,l,s,a,u,d){this.courseProvider=e,this.domUtils=n,this.resourceProvider=t,this.courseHelper=o,this.textUtils=r,this.mimetypeUtils=i,this.fileProvider=l,this.appProvider=s,this.filepoolProvider=a,this.sitesProvider=u,this.fileHelper=d,this.DISPLAY_AUTO=0,this.DISPLAY_EMBED=1}return AddonModResourceHelperProvider.prototype.getEmbeddedHtml=function(e,n){var t=this;return this.courseHelper.downloadModuleWithMainFileIfNeeded(e,n,o.a.COMPONENT,e.id,e.contents).then(function(n){return t.mimetypeUtils.getEmbeddedHtml(e.contents[0],n.path)})},AddonModResourceHelperProvider.prototype.getIframeSrc=function(e){var n=this;if(!e.contents.length)return Promise.reject(null);var t=e.contents[0],o=t.filename;return"/"!==t.filepath&&(o=t.filepath.substr(1)+o),this.filepoolProvider.getPackageDirUrlByUrl(this.sitesProvider.getCurrentSiteId(),e.url).then(function(e){return n.textUtils.concatenatePaths(e,o)}).catch(function(){return n.appProvider.isOnline()&&t.fileurl?n.sitesProvider.getCurrentSite().checkAndFixPluginfileURL(t.fileurl):Promise.reject(null)})},AddonModResourceHelperProvider.prototype.isDisplayedEmbedded=function(e,n){if(!e.contents.length&&!e.contentsinfo||!this.fileProvider.isAvailable()||!this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.7")&&this.isNextcloudFile(e))return!1;var t;return t=e.contentsinfo?this.mimetypeUtils.getExtension(e.contentsinfo.mimetypes[0]):this.mimetypeUtils.getFileExtension(e.contents[0].filename),(n==this.DISPLAY_EMBED||n==this.DISPLAY_AUTO)&&this.mimetypeUtils.canBeEmbedded(t)},AddonModResourceHelperProvider.prototype.isDisplayedInIframe=function(e){if(!e.contents.length&&!e.contentsinfo||!this.fileProvider.isAvailable())return!1;var n;if(e.contentsinfo)n=e.contentsinfo.mimetypes[0];else{var t=this.mimetypeUtils.getFileExtension(e.contents[0].filename);n=this.mimetypeUtils.getMimeType(t)}return"text/html"==n},AddonModResourceHelperProvider.prototype.isMainFileDownloadable=function(e,n){n=n||this.sitesProvider.getCurrentSiteId();var t=e.contents[0],o=this.fileHelper.getFileUrl(t),r=this.fileHelper.getFileTimemodified(t);return this.filepoolProvider.isFileDownloadable(n,o,r)},AddonModResourceHelperProvider.prototype.isNextcloudFile=function(e){return e.contentsinfo?"nextcloud"==e.contentsinfo.repositorytype:e.contents&&e.contents[0]&&"nextcloud"==e.contents[0].repositorytype},AddonModResourceHelperProvider.prototype.openModuleFile=function(e,n){var t=this,r=this.domUtils.showModalLoading();return this.courseHelper.downloadModuleAndOpenFile(e,n,o.a.COMPONENT,e.id,e.contents).then(function(){t.resourceProvider.logView(e.instance,e.name).then(function(){t.courseProvider.checkModuleCompletion(n,e.completiondata)}).catch(function(){})}).catch(function(e){t.domUtils.showErrorModalDefault(e,"addon.mod_resource.errorwhileloadingthecontent",!0)}).finally(function(){r.dismiss()})},AddonModResourceHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(301);var o=t(54),r=function(){function AddonModSurveyProvider(e,n,t,o,r,i,l){this.sitesProvider=n,this.appProvider=t,this.filepoolProvider=o,this.utils=r,this.surveyOffline=i,this.logHelper=l,this.ROOT_CACHE_KEY="mmaModSurvey:",this.logger=e.getInstance("AddonModSurveyProvider")}return e=AddonModSurveyProvider,AddonModSurveyProvider.prototype.getQuestions=function(e,n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i={surveyid:e},l={cacheKey:r.getQuestionsCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return n&&(l.getFromCache=!1,l.emergencyCache=!1),t.read("mod_survey_get_questions",i,l).then(function(e){return e.questions?e.questions:Promise.reject(null)})})},AddonModSurveyProvider.prototype.getQuestionsCacheKey=function(e){return this.ROOT_CACHE_KEY+"questions:"+e},AddonModSurveyProvider.prototype.getSurveyCacheKey=function(e){return this.ROOT_CACHE_KEY+"survey:"+e},AddonModSurveyProvider.prototype.getSurveyDataByKey=function(e,n,t,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s={courseids:[e]},a={cacheKey:l.getSurveyCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return r&&(a.getFromCache=!1,a.emergencyCache=!1),i.read("mod_survey_get_surveys_by_courses",s,a).then(function(e){if(e&&e.surveys){var o=e.surveys.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModSurveyProvider.prototype.getSurvey=function(e,n,t,o){return this.getSurveyDataByKey(e,"coursemodule",n,t,o)},AddonModSurveyProvider.prototype.getSurveyById=function(e,n,t,o){return this.getSurveyDataByKey(e,"id",n,t,o)},AddonModSurveyProvider.prototype.invalidateContent=function(n,t,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=[];return i.push(this.getSurvey(t,n).then(function(e){var n=[];return n.push(r.invalidateSurveyData(t,o)),n.push(r.invalidateQuestions(e.id,o)),Promise.all(n)})),i.push(this.filepoolProvider.invalidateFilesByComponent(o,e.COMPONENT,n)),this.utils.allPromises(i)},AddonModSurveyProvider.prototype.invalidateQuestions=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getQuestionsCacheKey(e))})},AddonModSurveyProvider.prototype.invalidateSurveyData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getSurveyCacheKey(e))})},AddonModSurveyProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_survey_view_survey",{surveyid:n},e.COMPONENT,n,t,"survey",{},o)},AddonModSurveyProvider.prototype.submitAnswers=function(e,n,t,o,r){var i=this,l=function(){return i.surveyOffline.saveAnswers(e,n,t,o,r).then(function(){return!1})};return r=r||this.sitesProvider.getCurrentSiteId(),this.appProvider.isOnline()?this.surveyOffline.deleteSurveyAnswers(e,r).then(function(){return i.submitAnswersOnline(e,o,r).then(function(){return!0}).catch(function(e){return i.utils.isWebServiceError(e)?Promise.reject(e):l()})}):l()},AddonModSurveyProvider.prototype.submitAnswersOnline=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.write("mod_survey_submit_answers",{surveyid:e,answers:n}).then(function(e){if(!e.status)return Promise.reject(o.utils.createFakeWSError(""))})})},AddonModSurveyProvider.COMPONENT="mmaModSurvey",AddonModSurveyProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModSurveyOfflineProvider(n,t,o){this.sitesProvider=t,this.textUtils=o,this.siteSchema={name:"AddonModSurveyOfflineProvider",version:1,tables:[{name:e.SURVEY_TABLE,columns:[{name:"surveyid",type:"INTEGER"},{name:"name",type:"TEXT"},{name:"courseid",type:"INTEGER"},{name:"userid",type:"INTEGER"},{name:"answers",type:"TEXT"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["surveyid","userid"]}]},this.logger=n.getInstance("AddonModSurveyOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModSurveyOfflineProvider,AddonModSurveyOfflineProvider.prototype.deleteSurveyAnswers=function(n,t,o){return this.sitesProvider.getSite(t).then(function(t){return o=o||t.getUserId(),t.getDb().deleteRecords(e.SURVEY_TABLE,{surveyid:n,userid:o})})},AddonModSurveyOfflineProvider.prototype.getAllData=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getAllRecords(e.SURVEY_TABLE).then(function(e){return e.forEach(function(e){e.answers=t.textUtils.parseJSON(e.answers)}),e})})},AddonModSurveyOfflineProvider.prototype.getSurveyAnswers=function(e,n,t){return this.getSurveyData(e,n,t).then(function(e){return e.answers||[]}).catch(function(){return[]})},AddonModSurveyOfflineProvider.prototype.getSurveyData=function(n,t,o){var r=this;return this.sitesProvider.getSite(t).then(function(t){return o=o||t.getUserId(),t.getDb().getRecord(e.SURVEY_TABLE,{surveyid:n,userid:o})}).then(function(e){return e.answers=r.textUtils.parseJSON(e.answers),e})},AddonModSurveyOfflineProvider.prototype.hasAnswers=function(e,n,t){return this.getSurveyAnswers(e,n,t).then(function(e){return!!e.length})},AddonModSurveyOfflineProvider.prototype.saveAnswers=function(n,t,o,r,i,l){return this.sitesProvider.getSite(i).then(function(i){l=l||i.getUserId();var s={surveyid:n,name:t,courseid:o,userid:l,answers:JSON.stringify(r),timecreated:(new Date).getTime()};return i.getDb().insertRecord(e.SURVEY_TABLE,s)})},AddonModSurveyOfflineProvider.SURVEY_TABLE="addon_mod_survey_answers",AddonModSurveyOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(301),t(300)),i=(t(4),t(311)),l=(t(667),function(e){function AddonModSurveySyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h,m){var _=e.call(this,"AddonModSurveySyncProvider",n,t,o,r,i,l,p,h,m)||this;return _.courseProvider=s,_.surveyOffline=a,_.eventsProvider=u,_.surveyProvider=d,_.utils=c,_.logHelper=f,_.componentTranslate=s.translateModuleName("survey"),_}return Object(o.__extends)(AddonModSurveySyncProvider,e),n=AddonModSurveySyncProvider,AddonModSurveySyncProvider.prototype.getSyncId=function(e,n){return e+"#"+n},AddonModSurveySyncProvider.prototype.syncAllSurveys=function(e,n){return this.syncOnSites("all surveys",this.syncAllSurveysFunc.bind(this),[n],e)},AddonModSurveySyncProvider.prototype.syncAllSurveysFunc=function(e,t){var o=this;return this.surveyOffline.getAllData(e).then(function(r){var i=r.map(function(r){return(t?o.syncSurvey(r.surveyid,r.userid,e):o.syncSurveyIfNeeded(r.surveyid,r.userid,e)).then(function(t){t&&t.answersSent&&o.eventsProvider.trigger(n.AUTO_SYNCED,{surveyId:r.surveyid,userId:r.userid,warnings:t.warnings},e)})});return Promise.all(i)})},AddonModSurveySyncProvider.prototype.syncSurveyIfNeeded=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=this.getSyncId(e,n);return this.isSyncNeeded(r,t).then(function(r){if(r)return o.syncSurvey(e,n,t)})},AddonModSurveySyncProvider.prototype.syncSurvey=function(e,n,t){var o=this;return this.sitesProvider.getSite(t).then(function(i){n=n||i.getUserId(),t=i.getId();var l=o.getSyncId(e,n);if(o.isSyncing(l,t))return o.getOngoingSync(l,t);o.logger.debug("Try to sync survey '"+e+"' for user '"+n+"'");var s,a={warnings:[],answersSent:!1},u=o.logHelper.syncIfNeeded(r.a.COMPONENT,e,t).catch(function(){}).then(function(){return o.surveyOffline.getSurveyData(e,t,n).catch(function(){return{}})}).then(function(r){if(r.answers&&r.answers.length)return o.appProvider.isOnline()?(s=r.courseid,o.surveyProvider.submitAnswersOnline(e,r.answers,t).then(function(){return a.answersSent=!0,o.surveyOffline.deleteSurveyAnswers(e,t,n)}).catch(function(i){return o.utils.isWebServiceError(i)?(a.answersSent=!0,o.surveyOffline.deleteSurveyAnswers(e,t,n).then(function(){a.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:r.name,error:o.textUtils.getErrorMessageFromError(i)}))})):Promise.reject(i)})):Promise.reject(null)}).then(function(){if(s)return o.surveyProvider.invalidateSurveyData(s,t).then(function(){return o.courseProvider.getModuleBasicInfoByInstance(e,"survey",t).then(function(e){return o.prefetchAfterUpdate(e,s,void 0,t)})}).catch(function(){})}).then(function(){return o.setSyncTime(l,t)}).then(function(){return a});return o.addOngoingSync(l,u,t)})},AddonModSurveySyncProvider.AUTO_SYNCED="addon_mod_survey_autom_synced",AddonModSurveySyncProvider;var n}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(42),r=t(54),i=function(){function AddonModUrlProvider(e,n,t,o,r,i){this.sitesProvider=n,this.courseProvider=t,this.utils=o,this.mimeUtils=r,this.logHelper=i,this.ROOT_CACHE_KEY="mmaModUrl:",this.logger=e.getInstance("AddonModUrlProvider")}return e=AddonModUrlProvider,AddonModUrlProvider.prototype.getFinalDisplayType=function(e){if(!e)return-1;var n=this.mimeUtils.guessExtensionFromUrl(e.externalurl);if(e.display==o.a.RESOURCELIB_DISPLAY_EMBED&&"pdf"==n)return o.a.RESOURCELIB_DISPLAY_DOWNLOAD;if(e.display!=o.a.RESOURCELIB_DISPLAY_AUTO)return e.display;var t=this.sitesProvider.getCurrentSite();if(t&&t.containsUrl(e.externalurl)&&-1==e.externalurl.indexOf("file.php")&&-1!=e.externalurl.indexOf(".php"))return o.a.RESOURCELIB_DISPLAY_OPEN;var r=this.mimeUtils.getMimeType(n);return(-1!=e.externalurl.indexOf(".php")||"/"===e.externalurl.substr(-1)||-1!=e.externalurl.indexOf("//")&&2==e.externalurl.match(/\//g).length)&&(r="text/html"),-1!=["application/zip","application/x-tar","application/g-zip","application/pdf","text/html"].indexOf(r)?o.a.RESOURCELIB_DISPLAY_DOWNLOAD:this.mimeUtils.canBeEmbedded(n)?o.a.RESOURCELIB_DISPLAY_EMBED:o.a.RESOURCELIB_DISPLAY_OPEN},AddonModUrlProvider.prototype.getUrlCacheKey=function(e){return this.ROOT_CACHE_KEY+"url:"+e},AddonModUrlProvider.prototype.getUrlDataByKey=function(e,n,t,o){var i=this;return this.sitesProvider.getSite(o).then(function(o){var l={courseids:[e]},s={cacheKey:i.getUrlCacheKey(e),updateFrequency:r.a.FREQUENCY_RARELY};return o.read("mod_url_get_urls_by_courses",l,s).then(function(e){if(e&&e.urls){var o=e.urls.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModUrlProvider.prototype.getUrl=function(e,n,t){return this.getUrlDataByKey(e,"coursemodule",n,t)},AddonModUrlProvider.prototype.guessIcon=function(e){var n=(e=e||"").match(/\//g),t=this.mimeUtils.getFileExtension(e);if(!n||n.length<3||"/"===e.substr(-1)||"php"==t)return"";var o=this.mimeUtils.getFileIcon(e);return o===this.mimeUtils.getFileIconForType("unknown")||o===this.mimeUtils.getFileIconForType("html")?"":o},AddonModUrlProvider.prototype.invalidateContent=function(e,n,t){t=t||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.invalidateUrlData(n,t)),o.push(this.courseProvider.invalidateModule(e,t,"url")),this.utils.allPromises(o)},AddonModUrlProvider.prototype.invalidateUrlData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getUrlCacheKey(e))})},AddonModUrlProvider.prototype.isGetUrlWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_url_get_urls_by_courses")},AddonModUrlProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_url_view_url",{urlid:n},e.COMPONENT,n,t,"url",{},o)},AddonModUrlProvider.COMPONENT="mmaModUrl",AddonModUrlProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonNotesOfflineProvider(n,t,o){this.sitesProvider=t,this.timeUtils=o,this.siteSchema={name:"AddonNotesOfflineProvider",version:2,tables:[{name:e.NOTES_TABLE,columns:[{name:"userid",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"publishstate",type:"TEXT"},{name:"content",type:"TEXT"},{name:"format",type:"INTEGER"},{name:"created",type:"INTEGER"},{name:"lastmodified",type:"INTEGER"}],primaryKeys:["userid","content","created"]},{name:e.NOTES_DELETED_TABLE,columns:[{name:"noteid",type:"INTEGER",primaryKey:!0},{name:"deleted",type:"INTEGER"},{name:"courseid",type:"INTEGER"}]}]},this.logger=n.getInstance("AddonNotesOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonNotesOfflineProvider,AddonNotesOfflineProvider.prototype.deleteOfflineNote=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(e.NOTES_TABLE,{userid:n,content:t,created:o})})},AddonNotesOfflineProvider.prototype.getAllDeletedNotes=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.NOTES_DELETED_TABLE)})},AddonNotesOfflineProvider.prototype.getCourseDeletedNotes=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.NOTES_DELETED_TABLE,{courseid:n})})},AddonNotesOfflineProvider.prototype.getAllNotes=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.NOTES_TABLE)})},AddonNotesOfflineProvider.prototype.getNote=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().getRecord(e.NOTES_TABLE,{userid:n,content:t,created:o})})},AddonNotesOfflineProvider.prototype.getNotesForCourseAndUser=function(n,t,o){return t?this.sitesProvider.getSite(o).then(function(o){return o.getDb().getRecords(e.NOTES_TABLE,{userid:t,courseid:n})}):this.getNotesForCourse(n,o)},AddonNotesOfflineProvider.prototype.getNotesForCourse=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.NOTES_TABLE,{courseid:n})})},AddonNotesOfflineProvider.prototype.getNotesForUser=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.NOTES_TABLE,{userid:n})})},AddonNotesOfflineProvider.prototype.getNotesWithPublishState=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.NOTES_TABLE,{publishstate:n})})},AddonNotesOfflineProvider.prototype.hasNotesForCourse=function(e,n){return this.getNotesForCourse(e,n).then(function(e){return!!e.length})},AddonNotesOfflineProvider.prototype.hasNotesForUser=function(e,n){return this.getNotesForUser(e,n).then(function(e){return!!e.length})},AddonNotesOfflineProvider.prototype.hasNotesWithPublishState=function(e,n){return this.getNotesWithPublishState(e,n).then(function(e){return!!e.length})},AddonNotesOfflineProvider.prototype.saveNote=function(n,t,o,r,i){var l=this;return this.sitesProvider.getSite(i).then(function(i){var s=l.timeUtils.timestamp(),a={userid:n,courseid:t,publishstate:o,content:r,format:1,created:s,lastmodified:s};return i.getDb().insertRecord(e.NOTES_TABLE,a).then(function(){return a})})},AddonNotesOfflineProvider.prototype.deleteNote=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i=r.timeUtils.timestamp(),l={noteid:n,courseid:t,deleted:i};return o.getDb().insertRecord(e.NOTES_DELETED_TABLE,l).then(function(){return l})})},AddonNotesOfflineProvider.prototype.undoDeleteNote=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(e.NOTES_DELETED_TABLE,{noteid:n})})},AddonNotesOfflineProvider.NOTES_TABLE="addon_notes_offline_notes",AddonNotesOfflineProvider.NOTES_DELETED_TABLE="addon_notes_deleted_offline_notes",AddonNotesOfflineProvider;var e}()},,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(309),t(355);var o=t(155),r=t(1053),i=(t(359),t(42)),l=function(){function CoreEmulatorHelperProvider(e,n,t,r,i,l,s,a,u,d){this.file=e,this.fileProvider=n,this.utils=t,this.sitesProvider=i,this.localNotif=l,this.captureHelper=s,this.timeUtils=a,this.appProvider=u,this.localNotifProvider=d,this.name="CoreEmulator",this.priority=o.a.MAX_RECOMMENDED_PRIORITY+500,this.blocking=!0,this.LAST_RECEIVED_NOTIFICATION_TABLE="core_emulator_last_received_notification",this.siteSchema={name:"CoreEmulatorHelperProvider",version:1,tables:[{name:this.LAST_RECEIVED_NOTIFICATION_TABLE,columns:[{name:"component",type:"TEXT"},{name:"id",type:"INTEGER"},{name:"timecreated",type:"INTEGER"}],primaryKeys:["component"]}]},this.logger=r.getInstance("CoreEmulatorHelper"),i.registerSiteSchema(this.siteSchema)}return CoreEmulatorHelperProvider.prototype.load=function(){var e=this,n=[];return n.push(this.file.load().then(function(n){e.fileProvider.setHTMLBasePath(n)})),n.push(this.localNotif.load()),n.push(this.captureHelper.load()),window.FileTransferError=r.a,this.utils.allPromises(n)},CoreEmulatorHelperProvider.prototype.checkNewNotifications=function(e,n,t,o){var r=this;if(!this.appProvider.isDesktop()||!this.localNotifProvider.isAvailable())return Promise.resolve(null);if(!this.appProvider.isOnline())return this.logger.debug("Cannot check push notifications because device is offline."),Promise.reject(null);return(o?Promise.resolve([o]):this.sitesProvider.getSitesIds()).then(function(o){var i=o.map(function(o){return r.checkNewNotificationsForSite(e,n,t,o)});return Promise.all(i)})},CoreEmulatorHelperProvider.prototype.checkNewNotificationsForSite=function(e,n,t,o){var r=this;return this.getLastReceivedNotification(e,o).then(function(l){return n(o).then(function(n){if(l&&n.length){var s=n[0];if(!(s.id==l.id||s.timecreated<=l.timecreated||r.timeUtils.timestamp()-s.timecreated>i.a.SECONDS_DAY))return t(s).then(function(n){s.site=o,s.name=s.name||s.eventtype;return r.localNotifProvider.schedule({id:1,title:n.title,text:n.text,data:s},e,o)})}})})},CoreEmulatorHelperProvider.prototype.getLastReceivedNotification=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecord(t.LAST_RECEIVED_NOTIFICATION_TABLE,{component:e})}).catch(function(){return!1})},CoreEmulatorHelperProvider.prototype.storeLastReceivedNotification=function(e,n,t){var o=this;return n||(n={id:-1,timecreated:0}),this.sitesProvider.getSite(t).then(function(t){var r={component:e,id:n.id,timecreated:n.timecreated};return t.getDb().insertRecord(o.LAST_RECEIVED_NOTIFICATION_TABLE,r)})},CoreEmulatorHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(149),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),i=function(e){function CoreCourseActivitySyncBaseProvider(n,t,o,r,i,l,s,a,u,d){var c=e.call(this,n,t,o,r,i,l,s,a)||this;return c.sitesProvider=o,c.appProvider=r,c.syncProvider=i,c.textUtils=l,c.translate=s,c.timeUtils=a,c.prefetchDelegate=u,c.prefetchHandler=d,c}return r(CoreCourseActivitySyncBaseProvider,e),CoreCourseActivitySyncBaseProvider.prototype.prefetchAfterUpdate=function(e,n,t,o){var r=this;return t=t||/^.*files$/,this.prefetchDelegate.getModuleUpdates(e,n,!0,o).then(function(o){if(o&&o.updates&&o.updates.length>0){if(!o.updates.find(function(e){return e.name.match(t)}))return r.prefetchHandler.download(e,n)}})},CoreCourseActivitySyncBaseProvider}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(15),r=(t.n(o),function(){function AddonBlockTimelineProvider(e,n){this.sitesProvider=e,this.dashboardProvider=n,this.ROOT_CACHE_KEY="myoverview:"}return e=AddonBlockTimelineProvider,AddonBlockTimelineProvider.prototype.getActionEventsByCourse=function(n,t,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l=o().subtract(14,"days").unix(),s={timesortfrom:l,courseid:n,limitnum:e.EVENTS_LIMIT_PER_COURSE},a={cacheKey:i.getActionEventsByCourseCacheKey(n)};return t&&(s.aftereventid=t),r.read("core_calendar_get_action_events_by_course",s,a).then(function(e){return e&&e.events?i.treatCourseEvents(e,l):Promise.reject(null)})})},AddonBlockTimelineProvider.prototype.getActionEventsByCourseCacheKey=function(e){return this.getActionEventsByCoursesCacheKey()+":"+e},AddonBlockTimelineProvider.prototype.getActionEventsByCourses=function(n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i=o().subtract(14,"days").unix(),l={timesortfrom:i,courseids:n,limitnum:e.EVENTS_LIMIT_PER_COURSE},s={cacheKey:r.getActionEventsByCoursesCacheKey()};return t.read("core_calendar_get_action_events_by_courses",l,s).then(function(e){if(e&&e.groupedbycourse){var n={};return e.groupedbycourse.forEach(function(e){n[e.courseid]=r.treatCourseEvents(e,i)}),n}return Promise.reject(null)})})},AddonBlockTimelineProvider.prototype.getActionEventsByCoursesCacheKey=function(){return this.ROOT_CACHE_KEY+"bycourse"},AddonBlockTimelineProvider.prototype.getActionEventsByTimesort=function(n,t){var r=this;return this.sitesProvider.getSite(t).then(function(t){var i=o().subtract(14,"days").unix(),l={timesortfrom:i,limitnum:e.EVENTS_LIMIT},s={cacheKey:r.getActionEventsByTimesortCacheKey(n,l.limitnum),getCacheUsingCacheKey:!0,uniqueCacheKey:!0};return n&&(l.aftereventid=n),t.read("core_calendar_get_action_events_by_timesort",l,s).then(function(e){if(e&&e.events){var n=e.events.length>=l.limitnum?e.lastid:void 0;return{events:e.events.filter(function(e){return e.timesort>=i}),canLoadMore:n}}return Promise.reject(null)})})},AddonBlockTimelineProvider.prototype.getActionEventsByTimesortPrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"bytimesort:"},AddonBlockTimelineProvider.prototype.getActionEventsByTimesortCacheKey=function(e,n){return e=e||0,n=n||0,this.getActionEventsByTimesortPrefixCacheKey()+e+":"+n},AddonBlockTimelineProvider.prototype.invalidateActionEventsByCourses=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getActionEventsByCoursesCacheKey())})},AddonBlockTimelineProvider.prototype.invalidateActionEventsByTimesort=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getActionEventsByTimesortPrefixCacheKey())})},AddonBlockTimelineProvider.prototype.isAvailable=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return!n.dashboardProvider.isDisabledInSite(e)&&(e.wsAvailable("core_calendar_get_action_events_by_courses")&&e.wsAvailable("core_calendar_get_action_events_by_timesort"))})},AddonBlockTimelineProvider.prototype.treatCourseEvents=function(n,t){var o=n.events.length>=e.EVENTS_LIMIT_PER_COURSE?n.lastid:void 0;return n.events=n.events.filter(function(e){return e.timesort>=t}),{events:n.events,canLoadMore:o}},AddonBlockTimelineProvider.EVENTS_LIMIT=20,AddonBlockTimelineProvider.EVENTS_LIMIT_PER_COURSE=10,AddonBlockTimelineProvider;var e}())},,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(379);var o=function(){return function CoreSearchComponentsModule(){}}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var o=function(){function CoreAttachmentsComponent(e,n,t,o,r,i){this.appProvider=e,this.domUtils=n,this.textUtils=t,this.fileUploaderProvider=o,this.translate=r,this.fileUploaderHelper=i}return CoreAttachmentsComponent.prototype.ngOnInit=function(){this.maxSize=Number(this.maxSize),this.maxSize=!isNaN(this.maxSize)&&this.maxSize>0?this.maxSize:-1,this.maxSizeReadable=-1==this.maxSize?this.translate.instant("core.unknown"):this.textUtils.bytesToSize(this.maxSize,2),void 0===this.maxSubmissions||this.maxSubmissions<0?(this.maxSubmissionsReadable=this.translate.instant("core.unknown"),this.unlimitedFiles=!0):this.maxSubmissionsReadable=String(this.maxSubmissions),this.acceptedTypes=this.acceptedTypes&&this.acceptedTypes.trim(),this.acceptedTypes&&"*"!=this.acceptedTypes&&(this.fileTypes=this.fileUploaderProvider.prepareFiletypeList(this.acceptedTypes))},CoreAttachmentsComponent.prototype.add=function(){var e=this,n=this.allowOffline&&"false"!==this.allowOffline;if(n||this.appProvider.isOnline()){this.fileUploaderHelper.selectFile(this.maxSize,n,void 0,this.fileTypes&&this.fileTypes.mimetypes).then(function(n){e.files.push(n)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error selecting file.")})}else this.domUtils.showErrorModal("core.fileuploader.errormustbeonlinetoupload",!0)},CoreAttachmentsComponent.prototype.delete=function(e,n){var t=this;(n?this.domUtils.showDeleteConfirm("core.confirmdeletefile"):Promise.resolve()).then(function(){t.files.splice(e,1)}).catch(function(){})},CoreAttachmentsComponent.prototype.renamed=function(e,n){this.files[e]=n.file},CoreAttachmentsComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(149)),i=t(78),l=(t(134),t(167),t(153),function(e){function AddonModAssignSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h,m,_){var g=e.call(this,"AddonModAssignSyncProvider",n,t,o,r,i,l,s)||this;return g.courseProvider=a,g.eventsProvider=u,g.assignProvider=d,g.assignOfflineProvider=c,g.utils=p,g.submissionDelegate=f,g.feedbackDelegate=h,g.gradesHelper=m,g.logHelper=_,g.componentTranslate=a.translateModuleName("assign"),g}return Object(o.__extends)(AddonModAssignSyncProvider,e),n=AddonModAssignSyncProvider,AddonModAssignSyncProvider.prototype.getSelectedScaleId=function(e,n){var t=e.split(",");(t=t.map(function(e){return e.trim()})).unshift("");var o=e.indexOf(n)||0;return o<0?0:o},AddonModAssignSyncProvider.prototype.hasDataToSync=function(e,n){return this.assignOfflineProvider.hasAssignOfflineData(e,n)},AddonModAssignSyncProvider.prototype.syncAllAssignments=function(e,n){return this.syncOnSites("all assignments",this.syncAllAssignmentsFunc.bind(this),[n],e)},AddonModAssignSyncProvider.prototype.syncAllAssignmentsFunc=function(e,t){var o=this;return this.assignOfflineProvider.getAllAssigns(e).then(function(r){var i=r.map(function(r){return(t?o.syncAssign(r,e):o.syncAssignIfNeeded(r,e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{assignId:r,warnings:t.warnings},e)})});return Promise.all(i)})},AddonModAssignSyncProvider.prototype.syncAssignIfNeeded=function(e,n){var t=this;return this.isSyncNeeded(e,n).then(function(o){if(o)return t.syncAssign(e,n)})},AddonModAssignSyncProvider.prototype.syncAssign=function(e,n){var t=this;n=n||this.sitesProvider.getCurrentSiteId();var o,r,l,s=[],a={warnings:[],updated:!1};return this.isSyncing(e,n)?this.getOngoingSync(e,n):this.syncProvider.isBlocked(i.a.COMPONENT,e,n)?(this.logger.debug("Cannot sync assign "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}))):(this.logger.debug("Try to sync assign "+e+" in site "+n),s.push(this.assignOfflineProvider.getAssignSubmissions(e,n).catch(function(){return[]})),s.push(this.assignOfflineProvider.getAssignSubmissionsGrade(e,n).catch(function(){return[]})),s.push(this.logHelper.syncIfNeeded(i.a.COMPONENT,e,n)),l=Promise.all(s).then(function(i){var l=i[0],s=i[1];if(l.length||s.length)return t.appProvider.isOnline()?(r=l.length>0?l[0].courseid:s[0].courseid,t.assignProvider.getAssignmentById(r,e,!1,n).then(function(e){o=e;var i=[];return l.forEach(function(e){i.push(t.syncSubmission(o,e,a.warnings,n).then(function(){a.updated=!0}))}),s.forEach(function(e){i.push(t.syncSubmissionGrade(o,e,a.warnings,r,n).then(function(){a.updated=!0}))}),Promise.all(i)}).then(function(){if(a.updated)return t.assignProvider.invalidateContent(o.cmid,r,n).catch(function(){})})):Promise.reject(null)}).then(function(){return t.setSyncTime(e,n).catch(function(){})}).then(function(){return a}),this.addOngoingSync(e,l,n))},AddonModAssignSyncProvider.prototype.syncSubmission=function(e,n,t,o){var r,i,l=this,s=n.userid,a={};return this.assignProvider.getSubmissionStatus(e.id,s,void 0,!1,!0,!0,o).then(function(t){var u=[];if((i=l.assignProvider.getSubmissionObjectFromAttempt(e,t.lastattempt)).timemodified==n.onlinetimemodified)return i.plugins.forEach(function(t){u.push(l.submissionDelegate.preparePluginSyncData(e,i,t,n,a,o))}),Promise.all(u).then(function(){return(Object.keys(a).length?l.assignProvider.saveSubmissionOnline(e.id,a,o):Promise.resolve()).then(function(){if(e.submissiondrafts&&n.submitted)return l.assignProvider.submitForGradingOnline(e.id,n.submissionstatement,o)}).then(function(){l.assignProvider.getSubmissionStatus(e.id,s,void 0,!1,!0,!0,o)})}).catch(function(e){if(!e||!l.utils.isWebServiceError(e))return Promise.reject(e);r=l.textUtils.getErrorMessageFromError(e)});r=l.translate.instant("addon.mod_assign.warningsubmissionmodified")}).then(function(){return l.assignOfflineProvider.deleteSubmission(e.id,s,o).then(function(){var t=[];return i.plugins.forEach(function(r){t.push(l.submissionDelegate.deletePluginOfflineData(e,i,r,n,o))}),Promise.all(t)})}).then(function(){if(r){var n=l.translate.instant("core.warningofflinedatadeleted",{component:l.componentTranslate,name:e.name,error:r});-1==t.indexOf(n)&&t.push(n)}})},AddonModAssignSyncProvider.prototype.syncSubmissionGrade=function(e,n,t,o,r){var i,l=this,s=n.userid;return this.assignProvider.getSubmissionStatus(e.id,s,void 0,!1,!0,!0,r).then(function(t){if(!((t.feedback&&(t.feedback.gradeddate||t.feedback.grade.timemodified))>n.timemodified))return l.gradesHelper.getGradeModuleItems(o,e.cmid,s,void 0,r,!0).then(function(t){return l.courseProvider.getModuleBasicGradeInfo(e.cmid,r).then(function(e){t.forEach(function(t){t.gradedategraded>=n.timemodified&&(t.outcomeid||t.scaleid?t.outcomeid&&l.assignProvider.isOutcomesEditEnabled()&&e.outcomes&&e.outcomes.forEach(function(e,o){e.scale&&t.itemnumber==o&&(n.outcomes[t.itemnumber]=l.getSelectedScaleId(e.scale,e.selected))}):n.grade=e&&e.scale?l.getSelectedScaleId(e.scale,t.gradeformatted):parseFloat(t.gradeformatted)||null)})})}).then(function(){return l.assignProvider.submitGradingFormOnline(e.id,s,n.grade,n.attemptnumber,n.addattempt,n.workflowstate,n.applytoall,n.outcomes,n.plugindata,r).then(function(){var n=[];return t.feedback&&t.feedback.plugins&&t.feedback.plugins.forEach(function(t){n.push(l.feedbackDelegate.discardPluginFeedbackData(e.id,s,t,r))}),n.push(l.assignProvider.getSubmissionStatus(e.id,s,void 0,!1,!0,!0,r)),Promise.all(n)}).catch(function(e){if(!e||!l.utils.isWebServiceError(e))return Promise.reject(e);i=l.textUtils.getErrorMessageFromError(e)})});i=l.translate.instant("addon.mod_assign.warningsubmissiongrademodified")}).then(function(){return l.assignOfflineProvider.deleteSubmissionGrade(e.id,s,r)}).then(function(){if(i){var n=l.translate.instant("core.warningofflinedatadeleted",{component:l.componentTranslate,name:e.name,error:i});-1==t.indexOf(n)&&t.push(n)}})},AddonModAssignSyncProvider.AUTO_SYNCED="addon_mod_assign_autom_synced",AddonModAssignSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreProgressBarComponent(e){this.sanitizer=e,this.textSupplied=!1}return CoreProgressBarComponent.prototype.ngOnChanges=function(e){e.text&&void 0!==e.text.currentValue&&(this.textSupplied=!0),e.progress&&("string"==typeof this.progress&&(this.progress=parseInt(this.progress,10)),(this.progress<0||isNaN(this.progress))&&(this.progress=-1),-1!=this.progress&&(this.progress=Math.floor(this.progress),this.textSupplied||(this.text=String(this.progress)),this.width=this.sanitizer.bypassSecurityTrustStyle(this.progress+"%")))},CoreProgressBarComponent}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=t(1),i=(t(6),t(154)),l=t(10),s=(t(29),function(){function CoreCommentsCommentsComponent(e,n,t,o,s){var a=this;this.navCtrl=e,this.commentsProvider=n,this.svComponent=s,this.area="",this.displaySpinner=!0,this.commentsLoaded=!1,this.countError=!1,this.disabled=!1,this.onLoading=new r.r,this.disabled=this.commentsProvider.areCommentsDisabledInSite(),this.updateSiteObserver=o.on(l.a.SITE_UPDATED,function(){var e=a.disabled;a.disabled=a.commentsProvider.areCommentsDisabledInSite(),e&&!a.disabled&&a.fetchData()},t.getCurrentSiteId()),this.refreshCommentsObserver=o.on(i.a.REFRESH_COMMENTS_EVENT,function(e){a.undefinedOrEqual(e,"contextLevel")&&a.undefinedOrEqual(e,"instanceId")&&a.undefinedOrEqual(e,"component")&&a.undefinedOrEqual(e,"itemId")&&a.undefinedOrEqual(e,"area")&&a.doRefresh().catch(function(){})},t.getCurrentSiteId()),this.commentsCountObserver=o.on(i.a.COMMENTS_COUNT_CHANGED_EVENT,function(e){if(!a.commentsCount.endsWith("+")&&a.undefinedOrEqual(e,"contextLevel")&&a.undefinedOrEqual(e,"instanceId")&&a.undefinedOrEqual(e,"component")&&a.undefinedOrEqual(e,"itemId")&&a.undefinedOrEqual(e,"area")&&!a.countError){var n=parseInt(a.commentsCount,10)+e.countChange;a.commentsCount=(n=n>=0?n:0)+""}},t.getCurrentSiteId())}return CoreCommentsCommentsComponent.prototype.ngOnInit=function(){this.fetchData()},CoreCommentsCommentsComponent.prototype.ngOnChanges=function(e){e&&this.commentsLoaded&&this.fetchData()},CoreCommentsCommentsComponent.prototype.fetchData=function(){var e=this;this.disabled||(this.commentsLoaded=!1,this.onLoading.emit(!0),this.commentsProvider.getCommentsCount(this.contextLevel,this.instanceId,this.component,this.itemId,this.area).then(function(n){e.commentsCount=n,e.countError=parseInt(e.commentsCount,10)<0,e.commentsLoaded=!0,e.onLoading.emit(!1)}))},CoreCommentsCommentsComponent.prototype.doRefresh=function(){var e=this;return this.invalidateComments().then(function(){return e.fetchData()})},CoreCommentsCommentsComponent.prototype.invalidateComments=function(){return this.commentsProvider.invalidateCommentsData(this.contextLevel,this.instanceId,this.component,this.itemId,this.area)},CoreCommentsCommentsComponent.prototype.openComments=function(e){if(e&&(e.preventDefault(),e.stopPropagation()),!this.disabled&&!this.countError){(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreCommentsViewerPage",{contextLevel:this.contextLevel,instanceId:this.instanceId,componentName:this.component,itemId:this.itemId,area:this.area,title:this.title,courseId:this.courseId})}},CoreCommentsCommentsComponent.prototype.ngOnDestroy=function(){this.updateSiteObserver&&this.updateSiteObserver.off(),this.refreshCommentsObserver&&this.refreshCommentsObserver.off(),this.commentsCountObserver&&this.commentsCountObserver.off()},CoreCommentsCommentsComponent.prototype.undefinedOrEqual=function(e,n){return void 0===e[n]||e[n]==this[n]},CoreCommentsCommentsComponent=Object(o.__decorate)([Object(o.__param)(4,Object(r.E)())],CoreCommentsCommentsComponent)}())},function(e,n,t){"use strict";function View_CoreIframeComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,r.b,r.a)),o._15(1,114688,null,0,i.a,[l.a,o.p,o.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,o._29(n,1)._paused)})}function View_CoreIframeComponent_0(e){return o._42(0,[o._37(402653184,1,{iframe:0}),(e()(),o._16(1,0,null,null,13,"div",[],[[2,"core-loading-container",null]],null,null,null,null)),o._15(2,278528,null,0,s.n,[o.w,o.p,o.L],{ngStyle:[0,"ngStyle"]},null),o._33(3,{width:0,height:1}),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(5,0,[[1,0],["iframe",1]],null,2,"iframe",[["class","core-iframe"]],[[8,"hidden",0],[8,"src",5],[1,"allowfullscreen",0]],null,null,null,null)),o._15(6,278528,null,0,s.n,[o.w,o.p,o.L],{ngStyle:[0,"ngStyle"]},null),o._33(7,{width:0,height:1}),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(9,0,null,null,4,"span",[["class","core-loading-spinner"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreIframeComponent_1)),o._15(12,16384,null,0,s.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,e(n,3,0,t.iframeWidth,t.iframeHeight));e(n,6,0,e(n,7,0,t.iframeWidth,t.iframeHeight));e(n,12,0,t.loading)},function(e,n){var t=n.component;e(n,1,0,t.loading);e(n,5,0,t.loading,t.safeUrl,t.allowFullscreen?"allowfullscreen":null)})}t.d(n,"a",function(){return a}),n.b=View_CoreIframeComponent_0;var o=t(1),r=t(122),i=t(102),l=t(9),s=t(8),a=o._14({encapsulation:2,styles:[],data:{}})},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),t(29),function(){function CoreTagListComponent(e,n){this.navCtrl=e,this.svComponent=n}return CoreTagListComponent.prototype.openTag=function(e){(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreTagIndexPage",{tagId:e.id,tagName:e.rawname,collectionId:e.tagcollid,fromContextId:e.taginstancecontextid})},CoreTagListComponent=Object(o.__decorate)([Object(o.__param)(1,Object(r.E)())],CoreTagListComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(99),i=t(10),l=function(e){function CoreSettingsDelegate(n,t,o,r){var l=e.call(this,"CoreSettingsDelegate",n,t,o)||this;return l.loggerProvider=n,l.sitesProvider=t,l.eventsProvider=o,l.utils=r,l.siteHandlers=[],o.on(i.a.LOGOUT,l.clearSiteHandlers.bind(l)),l}return Object(o.__extends)(CoreSettingsDelegate,e),CoreSettingsDelegate.prototype.clearSiteHandlers=function(){this.siteHandlers=[]},CoreSettingsDelegate.prototype.getHandlers=function(){return this.siteHandlers},CoreSettingsDelegate.prototype.updateData=function(){var e=[];for(var n in this.enabledHandlers){var t=this.enabledHandlers[n],o=t.getDisplayData();e.push({data:o,priority:t.priority})}e.sort(function(e,n){return n.priority-e.priority}),this.siteHandlers=e.map(function(e){return e.data})},CoreSettingsDelegate}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreFilesComponent(e,n,t){this.mimetypeUtils=e,this.utils=n,this.canDownload=!0,this.showSize=!0,this.showTime=!0,this.showInline=!1,this.differ=t.find([]).create()}return CoreFilesComponent.prototype.ngOnInit=function(){this.utils.isTrueOrOne(this.showInline)&&this.renderInlineFiles()},CoreFilesComponent.prototype.ngDoCheck=function(){if(this.utils.isTrueOrOne(this.showInline)){this.differ.diff(this.files)&&this.renderInlineFiles()}},CoreFilesComponent.prototype.renderInlineFiles=function(){var e=this;this.contentText=this.files.reduce(function(n,t){var o=e.mimetypeUtils.getEmbeddedHtml(t);return o?n+"<br>"+o:n},"")},CoreFilesComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(1),r=t(42),i=function(){function CoreDownloadRefreshComponent(){this.enabled=!1,this.loading=!0,this.canTrustDownload=!1,this.statusDownloaded=r.a.DOWNLOADED,this.statusNotDownloaded=r.a.NOT_DOWNLOADED,this.statusOutdated=r.a.OUTDATED,this.statusDownloading=r.a.DOWNLOADING,this.action=new o.r}return CoreDownloadRefreshComponent.prototype.download=function(e,n){e.preventDefault(),e.stopPropagation(),this.action.emit(n)},CoreDownloadRefreshComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(149),i=(t(292),t(98)),l=(t(217),t(4),function(e){function AddonModDataSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h,m){var _=e.call(this,"AddonModDataSyncProvider",t,n,o,d,c,s,p)||this;return _.sitesProvider=n,_.loggerProvider=t,_.appProvider=o,_.dataOffline=r,_.eventsProvider=i,_.dataProvider=l,_.translate=s,_.utils=a,_.textUtils=c,_.dataHelper=f,_.logHelper=h,_.ratingSync=m,_.componentTranslate=u.translateModuleName("data"),_}return Object(o.__extends)(AddonModDataSyncProvider,e),n=AddonModDataSyncProvider,AddonModDataSyncProvider.prototype.hasDataToSync=function(e,n){return this.dataOffline.hasOfflineData(e,n)},AddonModDataSyncProvider.prototype.syncAllDatabases=function(e,n){return this.syncOnSites("all databases",this.syncAllDatabasesFunc.bind(this),[n],e)},AddonModDataSyncProvider.prototype.syncAllDatabasesFunc=function(e,t){var o=this;e=e||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.dataOffline.getAllEntries(e).then(function(r){var i={};return r.forEach(function(r){void 0===i[r.dataid]&&(i[r.dataid]=t?o.syncDatabase(r.dataid,e):o.syncDatabaseIfNeeded(r.dataid,e),i[r.dataid].then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{dataId:r.dataid,warnings:t.warnings},e)}))}),Promise.all(o.utils.objectToArray(i))})),r.push(this.syncRatings(void 0,t,e)),Promise.all(r)},AddonModDataSyncProvider.prototype.syncDatabaseIfNeeded=function(e,n){var t=this;return this.isSyncNeeded(e,n).then(function(o){if(o)return t.syncDatabase(e,n)})},AddonModDataSyncProvider.prototype.syncDatabase=function(e,n){var t=this;if(n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,n))return this.getOngoingSync(e,n);if(this.syncProvider.isBlocked(i.a.COMPONENT,e,n))return this.logger.debug("Cannot sync database '"+e+"' because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync data '"+e+"' in site "+n+"'");var o,r,l={warnings:[],updated:!1},s=this.logHelper.syncIfNeeded(i.a.COMPONENT,e,n).catch(function(){}).then(function(){return t.dataOffline.getDatabaseEntries(e,n).catch(function(){return[]})}).then(function(i){if(i.length)return t.appProvider.isOnline()?(o=i[0].courseid,t.dataProvider.getDatabaseById(o,e,n).then(function(e){r=e;var o={};i.forEach(function(e){void 0===o[e.entryid]&&(o[e.entryid]=[]),o[e.entryid].push(e)});var s=t.utils.objectToArray(o).map(function(e){return t.syncEntry(r,e,l,n)});return Promise.all(s)}).then(function(){if(l.updated)return t.dataProvider.invalidateContent(r.cmid,o,n).catch(function(){})})):Promise.reject(null)}).then(function(){return t.setSyncTime(e,n)}).then(function(){return l});return this.addOngoingSync(e,s,n)},AddonModDataSyncProvider.prototype.syncEntry=function(e,t,o,r){var i,l,s,a=this,u=t[0].entryid,d=!1,c=t.find(function(e){return"add"==e.action||"edit"==e.action}),p=t.find(function(e){return"approve"==e.action||"disapprove"==e.action}),f=t.find(function(e){return"delete"==e.action});return u>0?l=this.dataProvider.getEntry(e.id,u,!0,r).then(function(e){return e.entry.timemodified}).catch(function(e){return e&&a.utils.isWebServiceError(e)?Promise.resolve(-1):Promise.reject(e)}):c?(s=u,l=Promise.resolve(0)):l=Promise.resolve(-1),l.then(function(n){if(n<0||n>=t[0].timemodified)return o.updated=!0,i=a.translate.instant("addon.mod_data.warningsubmissionmodified"),a.dataOffline.deleteAllEntryActions(e.id,u,r);if(f)return a.dataProvider.deleteEntryOnline(u,r).then(function(){d=!0}).catch(function(e){if(!e||!a.utils.isWebServiceError(e))return Promise.reject(e);i=a.textUtils.getErrorMessageFromError(e)}).then(function(){return o.updated=!0,a.dataOffline.deleteAllEntryActions(f.dataid,f.entryid,r)});var l;return l=c?Promise.all(c.fields.map(function(e){var n=a.textUtils.parseJSON(e.value);if(n.online||n.offline){var t=n.online||[];return(n.offline?a.dataHelper.getStoredFiles(c.dataid,u,e.fieldid):Promise.resolve([])).then(function(n){return t=t.concat(n),a.dataHelper.uploadOrStoreFiles(c.dataid,0,u,e.fieldid,t,!1,r).then(function(n){e.value=JSON.stringify(n)})})}})).then(function(){return"add"==c.action?a.dataProvider.addEntryOnline(c.dataid,c.fields,c.groupid,r).then(function(e){u=e.newentryid}):a.dataProvider.editEntryOnline(u,c.fields,r)}).catch(function(e){if(!e||!a.utils.isWebServiceError(e))return Promise.reject(e);i=a.textUtils.getErrorMessageFromError(e)}).then(function(){return o.updated=!0,a.dataOffline.deleteEntry(c.dataid,c.entryid,c.action,r)}):Promise.resolve(),p&&(l=l.then(function(){return a.dataProvider.approveEntryOnline(u,"approve"==p.action,r)}).catch(function(e){if(!e||!a.utils.isWebServiceError(e))return Promise.reject(e);i=a.textUtils.getErrorMessageFromError(e)}).then(function(){return o.updated=!0,a.dataOffline.deleteEntry(p.dataid,p.entryid,p.action,r)})),l}).then(function(){if(i){var t=a.translate.instant("core.warningofflinedatadeleted",{component:a.componentTranslate,name:e.name,error:i});-1==o.warnings.indexOf(t)&&o.warnings.push(t)}a.eventsProvider.trigger(n.AUTO_SYNCED,{dataId:e.id,entryId:u,offlineEntryId:s,warnings:o.warnings,deleted:d},r)})},AddonModDataSyncProvider.prototype.syncRatings=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.ratingSync.syncRatings("mod_data","entry","module",e,0,n,t).then(function(e){var n=!1,r=[],i=[];return e.forEach(function(e){i.push(o.dataProvider.getDatabase(e.itemSet.courseId,e.itemSet.instanceId,t).then(function(i){var l=[];return e.updated.length&&(n=!0,e.updated.forEach(function(e){l.push(o.dataProvider.invalidateEntryData(i.id,e,t))})),e.warnings.length&&e.warnings.forEach(function(e){r.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:i.name,error:e}))}),o.utils.allPromises(l)}))}),Promise.all(i).then(function(){return{updated:n,warnings:r}})})},AddonModDataSyncProvider.AUTO_SYNCED="addon_mod_data_autom_synced",AddonModDataSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonModFolderProvider(e,n,t,o,r){this.sitesProvider=n,this.courseProvider=t,this.utils=o,this.logHelper=r,this.ROOT_CACHE_KEY="mmaModFolder:",this.logger=e.getInstance("AddonModFolderProvider")}return e=AddonModFolderProvider,AddonModFolderProvider.prototype.getFolder=function(e,n,t){return this.getFolderByKey(e,"coursemodule",n,t)},AddonModFolderProvider.prototype.getFolderByKey=function(e,n,t,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){var l={courseids:[e]},s={cacheKey:i.getFolderCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return r.read("mod_folder_get_folders_by_courses",l,s).then(function(e){if(e&&e.folders){var o=e.folders.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModFolderProvider.prototype.getFolderCacheKey=function(e){return this.ROOT_CACHE_KEY+"folder:"+e},AddonModFolderProvider.prototype.invalidateContent=function(e,n,t){var o=[];return o.push(this.invalidateFolderData(n,t)),o.push(this.courseProvider.invalidateModule(e,t)),this.utils.allPromises(o)},AddonModFolderProvider.prototype.invalidateFolderData=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getFolderCacheKey(e))})},AddonModFolderProvider.prototype.isGetFolderWSAvailable=function(){return this.sitesProvider.wsAvailableInCurrentSite("mod_folder_get_folders_by_courses")},AddonModFolderProvider.prototype.logView=function(n,t,o){return this.logHelper.logSingle("mod_folder_view_folder",{folderid:n},e.COMPONENT,n,t,"folder",{},o)},AddonModFolderProvider.COMPONENT="mmaModFolder",AddonModFolderProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=(t(6),t(4),t(143)),i=t(170),l=t(287),s=function(e){function AddonModLessonPrefetchHandler(n,t,o,r,l,s,a,u,d,c,p,f,h){var m=e.call(this,n,t,o,r,l,s,a,u,d)||this;return m.modalCtrl=c,m.groupsProvider=p,m.lessonProvider=f,m.injector=h,m.name="AddonModLesson",m.modName="lesson",m.component=i.a.COMPONENT,m.updatesNames=/^configuration$|^.*files$|^grades$|^gradeitems$|^pages$|^answers$|^questionattempts$|^pagesviewed$/,m}return Object(o.__extends)(AddonModLessonPrefetchHandler,e),AddonModLessonPrefetchHandler.prototype.askUserPassword=function(e){var n=this,t=this.modalCtrl.create("AddonModLessonPasswordModalPage");return t.present(),new Promise(function(e,o){t.onDidDismiss(function(t){void 0!==t?e(t):o(n.domUtils.createCanceledError())})})},AddonModLessonPrefetchHandler.prototype.getDownloadSize=function(e,n,t){var o,r,i,l=this,s=this.sitesProvider.getCurrentSiteId();return this.lessonProvider.getLesson(n,e.id,!1,!1,s).then(function(e){return o=e,l.getLessonPassword(o.id,!1,!0,t,s)}).then(function(n){r=n.password;var t=(o=n.lesson||o).mediafiles||[];return t=t.concat(l.getIntroFilesFromInstance(e,o)),l.pluginFileDelegate.getFilesSize(t)}).then(function(e){return i=e,l.lessonProvider.getPages(o.id,r,!1,!1,s)}).then(function(e){return e.forEach(function(e){i.size+=e.filessizetotal}),i})},AddonModLessonPrefetchHandler.prototype.getLessonPassword=function(e,n,t,o,r){var i=this;return r=r||this.sitesProvider.getCurrentSiteId(),this.lessonProvider.getAccessInformation(e,n,t,r).then(function(l){if(l.preventaccessreasons&&l.preventaccessreasons.length){return 1==l.preventaccessreasons.length&&i.lessonProvider.isPasswordProtected(l)?i.lessonProvider.getStoredPassword(e).catch(function(){}).then(function(o){return o?i.validatePassword(e,l,o,n,t,r):Promise.reject(null)}).catch(function(){return o?i.askUserPassword(l).then(function(o){return i.validatePassword(e,l,o,n,t,r)}):Promise.reject(l.preventaccessreasons[0].message)}):Promise.reject(l.preventaccessreasons[0].message)}return{accessInfo:l}})},AddonModLessonPrefetchHandler.prototype.invalidateContent=function(e,n){var t=[];return t.push(this.lessonProvider.invalidateLessonData(n)),t.push(this.courseProvider.invalidateModule(e)),t.push(this.groupsProvider.invalidateActivityAllowedGroups(e)),Promise.all(t)},AddonModLessonPrefetchHandler.prototype.invalidateModule=function(e,n){var t=this,o=this.sitesProvider.getCurrentSiteId();return this.lessonProvider.getLesson(n,e.id,!0,!1,o).then(function(e){var r=[];return r.push(t.lessonProvider.invalidateLessonData(n,o)),r.push(t.lessonProvider.invalidateAccessInformation(e.id,o)),Promise.all(r)})},AddonModLessonPrefetchHandler.prototype.isDownloadable=function(e,n){var t=this,o=this.sitesProvider.getCurrentSiteId();return this.lessonProvider.getLesson(n,e.id,!1,!1,o).then(function(e){return t.lessonProvider.getAccessInformation(e.id,!1,!1,o).then(function(n){return!(!n.canviewreports&&!t.lessonProvider.isLessonOffline(e))&&(!n.preventaccessreasons||!n.preventaccessreasons.length||1==n.preventaccessreasons.length&&t.lessonProvider.isPasswordProtected(n))})})},AddonModLessonPrefetchHandler.prototype.isEnabled=function(){return this.lessonProvider.isPluginEnabled()},AddonModLessonPrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,t,this.prefetchLesson.bind(this))},AddonModLessonPrefetchHandler.prototype.prefetchLesson=function(e,n,t,o){var r,l,s,a=this;return this.lessonProvider.getLesson(n,e.id,!1,!0,o).then(function(e){return r=e,a.getLessonPassword(r.id,!1,!0,t,o)}).then(function(n){if(l=n.password,r=n.lesson||r,s=n.accessInfo,a.lessonProvider.isLessonOffline(r)&&!a.lessonProvider.leftDuringTimed(s))return a.lessonProvider.launchRetake(r.id,l,void 0,!1,o).then(function(){var n=[];return n.push(a.filepoolProvider.updatePackageDownloadTime(o,a.component,e.id).catch(function(){})),n.push(a.lessonProvider.getAccessInformation(r.id,!1,!0,o).then(function(e){s=e})),Promise.all(n)})}).then(function(){var n=[],t=s.attemptscount,u=r.mediafiles||[];return u=u.concat(a.getIntroFilesFromInstance(e,r)),n.push(a.filepoolProvider.addFilesToQueue(o,u,a.component,e.id)),a.lessonProvider.isLessonOffline(r)&&(n.push(a.lessonProvider.getPages(r.id,l,!1,!0,o).then(function(n){var t=[],s=!1;return n.forEach(function(n){if(!s)for(var u=0;u<n.jumps.length;u++)if(n.jumps[u]==i.a.LESSON_RANDOMBRANCH){s=!0;break}t.push(a.lessonProvider.getPageData(r,n.page.id,l,!1,!0,!1,!0,void 0,void 0,o).then(function(n){var t=n.contentfiles||[];return n.answers.forEach(function(e){e.answerfiles&&e.answerfiles.length&&(t=t.concat(e.answerfiles)),e.responsefiles&&e.responsefiles.length&&(t=t.concat(e.responsefiles))}),a.filepoolProvider.addFilesToQueue(o,t,a.component,e.id)}))}),t.push(a.lessonProvider.getPagesPossibleJumps(r.id,!1,!0,o).catch(function(e){return s?Promise.reject(a.translate.instant("addon.mod_lesson.errorprefetchrandombranch")):Promise.reject(e)})),Promise.all(t)})),n.push(a.lessonProvider.getTimers(r.id,!1,!0,o).catch(function(){})),n.push(a.lessonProvider.getContentPagesViewedOnline(r.id,t,!1,!0,o)),n.push(a.lessonProvider.getQuestionsAttemptsOnline(r.id,t,!1,void 0,!1,!0,o))),s.canviewreports&&n.push(a.groupsProvider.getActivityGroupInfo(e.id,!1,void 0,o,!0).then(function(n){var t=[];return n.groups.forEach(function(e){t.push(a.lessonProvider.getRetakesOverview(r.id,e.id,!1,!0,o))}),t.push(a.lessonProvider.getRetakesOverview(r.id,0,!1,!0,o).then(function(n){if(n&&n.students){var t=[];return n.students.forEach(function(n){if(n.attempts&&n.attempts.length){var l=n.attempts[n.attempts.length-1];l&&t.push(a.lessonProvider.getUserRetake(r.id,l.try,n.id,!1,!0,o).then(function(n){if(n&&n.answerpages){var t=[];return n.answerpages.forEach(function(e){e.page.qtype==i.a.LESSON_PAGE_ESSAY&&e.answerdata.answers.forEach(function(e){t.push.apply(t,a.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e[0]))})}),a.filepoolProvider.addFilesToQueue(o,t,a.component,e.id)}}))}}),Promise.all(t)}})),Promise.all(t)})),Promise.all(n)})},AddonModLessonPrefetchHandler.prototype.validatePassword=function(e,n,t,o,r,i){var l=this;return i=i||this.sitesProvider.getCurrentSiteId(),this.lessonProvider.getLessonWithPassword(e,t,!0,o,r,i).then(function(e){return l.lessonProvider.storePassword(e.id,t,i).then(function(){return{password:t,lesson:e,accessInfo:n}})})},AddonModLessonPrefetchHandler.prototype.sync=function(e,n,t){return this.syncProvider||(this.syncProvider=this.injector.get(l.a)),this.syncProvider.syncLesson(e.instance,!1,!1,t)},AddonModLessonPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(222),r=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},i=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},l=function(){function AddonModPageHelperProvider(e,n,t,o,r,i,l){this.domUtils=n,this.filepoolProvider=t,this.fileProvider=o,this.textUtils=r,this.wsProvider=i,this.sitesProvider=l,this.logger=e.getInstance("AddonModPageHelperProvider")}return AddonModPageHelperProvider.prototype.getPageHtml=function(e,n){var t,l,s=this,a={};return e.forEach(function(e){var n=e.fileurl;if(s.isMainPage(e))t=n;else{var o=e.filename;"/"!==e.filepath&&(o=e.filepath.substr(1)+o),a[s.textUtils.decodeURIComponent(o)]=n}}),t?l=this.fileProvider.isAvailable()?this.filepoolProvider.downloadUrl(this.sitesProvider.getCurrentSiteId(),t,!1,o.a.COMPONENT,n):this.sitesProvider.getCurrentSite().checkAndFixPluginfileURL(t):(this.logger.debug("Could not locate the index page"),l=Promise.reject(null)),l.then(function(e){return r(s,void 0,void 0,function(){var n;return i(this,function(t){switch(t.label){case 0:return[4,this.wsProvider.getText(e)];case 1:return n=t.sent(),[2,this.domUtils.restoreSourcesInHtml(n,a)]}})})})},AddonModPageHelperProvider.prototype.isMainPage=function(e){var n=e.filename||"",t=e.fileurl||"",o="/mod_page/content/index.html",r=encodeURIComponent(o);return"index.html"===n&&(t.indexOf(o)>0||t.indexOf(r)>0)},AddonModPageHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var o=t(0),r=(t(4),t(143)),i=t(168),l=(t(253),t(130),t(259)),s=t(42),a=function(e){function AddonModQuizPrefetchHandler(n,t,o,r,l,s,a,u,d,c,p,f,h,m,_){var g=e.call(this,n,t,o,r,l,s,a,u,d)||this;return g.injector=c,g.quizProvider=p,g.textUtils=f,g.quizHelper=h,g.accessRuleDelegate=m,g.questionHelper=_,g.name="AddonModQuiz",g.modName="quiz",g.component=i.a.COMPONENT,g.updatesNames=/^configuration$|^.*files$|^grades$|^gradeitems$|^questions$|^attempts$/,g}return Object(o.__extends)(AddonModQuizPrefetchHandler,e),AddonModQuizPrefetchHandler.prototype.download=function(e,n,t,o,r){return void 0===r&&(r=!0),this.prefetch(e,n,o,t,r)},AddonModQuizPrefetchHandler.prototype.getFiles=function(e,n,t){var o=this;return this.quizProvider.getQuiz(n,e.id).then(function(n){var t=o.getIntroFilesFromInstance(e,n);return o.quizProvider.getUserAttempts(n.id,"all",!0,!1,!0).then(function(e){return o.getAttemptsFeedbackFiles(n,e).then(function(e){return t.concat(e)})})}).catch(function(){return[]})},AddonModQuizPrefetchHandler.prototype.getAttemptsFeedbackFiles=function(e,n){var t=this,o=[],r=this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2"),i=[];return n.forEach(function(n){if(t.quizProvider.isAttemptFinished(n.state)){var l=t.quizProvider.rescaleGrade(n.sumgrades,e,!1);void 0!==l&&o.push(t.quizProvider.getFeedbackForGrade(e.id,Number(l),!0).then(function(e){r&&e.feedbackinlinefiles&&e.feedbackinlinefiles.length?i=i.concat(e.feedbackinlinefiles):e.feedbacktext&&!r&&(i=i.concat(t.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.feedbacktext)))}))}}),Promise.all(o).then(function(){return i})},AddonModQuizPrefetchHandler.prototype.getPreflightData=function(e,n,t,o,r,i){var l,s=this,a={};if(o)l=this.quizHelper.getAndCheckPreflightData(e,n,a,t,!1,!0,r,i);else{l=this.accessRuleDelegate.getFixedPreflightData(n&&n.activerulenames,e,a,t,!0,i).then(function(){if(!t)return s.quizProvider.startAttempt(e.id,a,!1,i)})}return l.then(function(){return a})},AddonModQuizPrefetchHandler.prototype.invalidateContent=function(e,n){return this.quizProvider.invalidateContent(e,n)},AddonModQuizPrefetchHandler.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.quizProvider.invalidateQuizData(n)),t.push(this.quizProvider.invalidateUserAttemptsForUser(e.instance)),Promise.all(t)},AddonModQuizPrefetchHandler.prototype.isDownloadable=function(e,n){var t=this;if(this.sitesProvider.getCurrentSite().isOfflineDisabled())return!1;var o=this.sitesProvider.getCurrentSiteId();return this.quizProvider.getQuiz(n,e.id,!1,!1,o).then(function(e){return 1===e.allowofflineattempts&&0!==e.hasquestions&&t.quizProvider.getUserAttempts(e.id,void 0,!0,!1,!1,o).then(function(n){var o=!n.length||t.quizProvider.isAttemptFinished(n[n.length-1].state);return 0===e.attempts||e.attempts>n.length||!o})})},AddonModQuizPrefetchHandler.prototype.isEnabled=function(){return this.quizProvider.isPluginEnabled()},AddonModQuizPrefetchHandler.prototype.prefetch=function(e,n,t,o,r){return void 0===r&&(r=!0),e.attemptFinished?(delete e.attemptFinished,Promise.resolve()):this.prefetchPackage(e,n,t,this.prefetchQuiz.bind(this),void 0,r)},AddonModQuizPrefetchHandler.prototype.prefetchQuiz=function(e,n,t,o,r){var s,a,u,d,c,p=this,f=!1;return this.quizProvider.getQuiz(n,e.id,!1,!0,o).then(function(n){var t=[],r=p.getIntroFilesFromInstance(e,a=n);return t.push(p.quizProvider.getQuizAccessInformation(a.id,!1,!0,o).then(function(e){u=e})),t.push(p.quizProvider.getQuizRequiredQtypes(a.id,!0,o)),t.push(p.quizProvider.getUserAttempts(a.id,"all",!0,!1,!0,o).then(function(n){return s=n,p.getAttemptsFeedbackFiles(a,s).then(function(n){return p.filepoolProvider.addFilesToQueue(o,n,i.a.COMPONENT,e.id)})})),t.push(p.quizProvider.getAttemptAccessInformation(a.id,0,!1,!0,o).then(function(e){d=e})),t.push(p.filepoolProvider.addFilesToQueue(o,r,i.a.COMPONENT,e.id)),Promise.all(t)}).then(function(){var e=s[s.length-1];if(r||e){if(r&&(!e||p.quizProvider.isAttemptFinished(e.state))){if(d.preventnewattemptreasons.length)return Promise.reject(p.textUtils.buildMessage(d.preventnewattemptreasons));f=!0,e=void 0}return p.getPreflightData(a,u,e,t,"core.download",o)}}).then(function(t){c=t;var r=[];return f&&(r.push(p.quizProvider.getUserAttempts(a.id,"all",!0,!1,!0,o).then(function(n){return s=n,p.getAttemptsFeedbackFiles(a,s).then(function(n){return p.filepoolProvider.addFilesToQueue(o,n,i.a.COMPONENT,e.id)})})),r.push(p.filepoolProvider.updatePackageDownloadTime(o,i.a.COMPONENT,e.id).catch(function(){}))),r.push(p.quizProvider.getCombinedReviewOptions(a.id,!0,o)),r.push(p.quizProvider.getUserBestGrade(a.id,!0,o)),r.push(p.quizProvider.getGradeFromGradebook(n,e.id,!0,o).then(function(e){if(void 0!==e.graderaw)return p.quizProvider.getFeedbackForGrade(a.id,e.graderaw,!0,o)}).catch(function(){})),r.push(p.quizProvider.getAttemptAccessInformation(a.id,0,!1,!0,o)),Promise.all(r)}).then(function(){var e=[];return s.forEach(function(n){e.push(p.prefetchAttempt(a,n,c,o))}),Promise.all(e)}).then(function(){r&&(p.syncProvider||(p.syncProvider=p.injector.get(l.a)),p.syncProvider.hasDataToSync(a.id,o).then(function(e){e||p.syncProvider.setSyncTime(a.id,o)}))})},AddonModQuizPrefetchHandler.prototype.prefetchAttempt=function(e,n,t,o){var r=this,l=this.quizProvider.getPagesFromLayout(n.layout),s=[],a=this.quizProvider.isNavigationSequential(e);if(this.quizProvider.isAttemptFinished(n.state)){var u=this.quizProvider.rescaleGrade(n.sumgrades,e,!1);void 0!==u&&s.push(this.quizProvider.getFeedbackForGrade(e.id,Number(u),!0,o)),l.forEach(function(e){s.push(r.quizProvider.getAttemptReview(n.id,e,!0,o).catch(function(){}))}),s.push(this.quizProvider.getAttemptReview(n.id,-1,!0,o).then(function(t){var i=[];return t.questions.forEach(function(t){i.push(r.questionHelper.prefetchQuestionFiles(t,r.component,e.coursemodule,o,n.uniqueid))}),Promise.all(i)},function(){}))}else s.push(this.quizProvider.getAttemptAccessInformation(e.id,n.id,!1,!0,o)),s.push(this.quizProvider.getAttemptSummary(n.id,t,!1,!0,!1,o)),n.state==i.a.ATTEMPT_IN_PROGRESS&&l.forEach(function(i){a&&i<n.currentpage||s.push(r.quizProvider.getAttemptData(n.id,i,t,!1,!0,o).then(function(t){var i=[];return t.questions.forEach(function(t){i.push(r.questionHelper.prefetchQuestionFiles(t,r.component,e.coursemodule,o,n.uniqueid))}),Promise.all(i)}))});return Promise.all(s)},AddonModQuizPrefetchHandler.prototype.prefetchQuizAndLastAttempt=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r,i,l,s,a=[];return a.push(this.quizProvider.getQuizAccessInformation(e.id,!1,!0,t).then(function(e){i=e})),a.push(this.quizProvider.getQuizRequiredQtypes(e.id,!0,t)),a.push(this.quizProvider.getCombinedReviewOptions(e.id,!0,t)),a.push(this.quizProvider.getUserBestGrade(e.id,!0,t)),a.push(this.quizProvider.getUserAttempts(e.id,"all",!0,!1,!0,t).then(function(e){r=e})),a.push(this.quizProvider.getGradeFromGradebook(e.course,e.coursemodule,!0,t).then(function(n){if(void 0!==n.graderaw)return o.quizProvider.getFeedbackForGrade(e.id,n.graderaw,!0,t)}).catch(function(){})),a.push(this.quizProvider.getAttemptAccessInformation(e.id,0,!1,!0,t)),Promise.all(a).then(function(){if(s=r[r.length-1])return o.getPreflightData(e,i,s,n,"core.download",t)}).then(function(n){if(l=n,s)return o.prefetchAttempt(e,s,l,t)}).then(function(){return o.setStatusAfterPrefetch(e,r,!0,!1,t)})},AddonModQuizPrefetchHandler.prototype.setStatusAfterPrefetch=function(e,n,t,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l,a=[];return n||a.push(this.quizProvider.getUserAttempts(e.id,"all",!0,t,o,r).then(function(e){n=e})),a.push(this.filepoolProvider.getPackageStatus(r,this.component,e.coursemodule).then(function(e){l=e})),Promise.all(a).then(function(){if(l!==s.a.NOT_DOWNLOADED){var t=n[n.length-1],o=!t||i.quizProvider.isAttemptFinished(t.state);return i.filepoolProvider.storePackageStatus(r,o?s.a.NOT_DOWNLOADED:s.a.DOWNLOADED,i.component,e.coursemodule)}})},AddonModQuizPrefetchHandler.prototype.sync=function(e,n,t){var o=this;return this.syncProvider||(this.syncProvider=this.injector.get(l.a)),this.quizProvider.getQuiz(n,e.id).then(function(n){return o.syncProvider.syncQuiz(n,!1,t).then(function(n){return e.attemptFinished=n&&n.attemptFinished||!1,n}).catch(function(){e.attemptFinished=!1})})},AddonModQuizPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=(t(4),t(143)),i=t(234),l=t(288),s=function(e){function AddonModScormPrefetchHandler(n,t,o,r,l,s,a,u,d,c,p,f,h){var m=e.call(this,n,t,o,r,l,s,a,u,d)||this;return m.fileProvider=c,m.textUtils=p,m.scormProvider=f,m.injector=h,m.name="AddonModScorm",m.modName="scorm",m.component=i.a.COMPONENT,m.updatesNames=/^configuration$|^.*files$|^tracks$/,m}return Object(o.__extends)(AddonModScormPrefetchHandler,e),AddonModScormPrefetchHandler.prototype.download=function(e,n,t,o){var r=this.sitesProvider.getCurrentSiteId();return this.prefetchPackage(e,n,!0,this.downloadOrPrefetchScorm.bind(this),r,!1,o)},AddonModScormPrefetchHandler.prototype.downloadOrPrefetchScorm=function(e,n,t,o,r,i){var l,s=this;return this.scormProvider.getScorm(n,e.id,e.url,!1,o).then(function(n){var t=[],a=s.getIntroFilesFromInstance(e,l=n);return t.push(s.fetchWSData(l,o).catch(function(){})),t.push(s.downloadOrPrefetchMainFileIfNeeded(l,r,i,o)),t.push(s.filepoolProvider.downloadOrPrefetchFiles(o,a,r,!1,s.component,e.id).catch(function(){})),t.push(s.scormProvider.getAccessInformation(l.id)),Promise.all(t)}).then(function(){return l.sha1hash})},AddonModScormPrefetchHandler.prototype.downloadOrPrefetchMainFile=function(e,n,t,o){var r,i=this,l=this.scormProvider.getPackageUrl(e);return this.scormProvider.getScormFolder(e.moduleurl).then(function(s){return r=s,t&&t({message:"core.downloading"}),n?i.filepoolProvider.addToQueueByUrl(o,l,i.component,e.coursemodule,void 0,void 0,i.downloadProgress.bind(i,!0,t)):i.filepoolProvider.downloadUrl(o,l,!0,i.component,e.coursemodule,void 0,i.downloadProgress.bind(i,!0,t))}).then(function(){return i.filepoolProvider.getFilePathByUrl(o,l)}).then(function(e){return t&&t({message:"core.unzipping"}),i.fileProvider.unzipFile(e,r,i.downloadProgress.bind(i,!1,t)).then(function(){return i.filepoolProvider.removeFileByUrl(o,l).catch(function(){})})})},AddonModScormPrefetchHandler.prototype.downloadOrPrefetchMainFileIfNeeded=function(e,n,t,o){var r=this;o=o||this.sitesProvider.getCurrentSiteId();var i=this.scormProvider.isScormUnsupported(e);return i?Promise.reject(this.translate.instant(i)):this.scormProvider.shouldDownloadMainFile(e,void 0,o).then(function(i){if(i)return r.downloadOrPrefetchMainFile(e,n,t,o)})},AddonModScormPrefetchHandler.prototype.downloadProgress=function(e,n,t){n&&t&&t.loaded&&n({downloading:e,progress:t})},AddonModScormPrefetchHandler.prototype.fetchWSData=function(e,n){var t=this;n=n||this.sitesProvider.getCurrentSiteId();var o=[];return o.push(this.scormProvider.getAttemptCountOnline(e.id,void 0,!0,n).catch(function(){return 0}).then(function(o){if(o>0){for(var r=[],i=function(i){r.push(t.scormProvider.getScormUserDataOnline(e.id,i,!0,n).catch(function(e){if(i==o)return Promise.reject(e)}))},l=1;l<=o;l++)i(l);return Promise.all(r)}return t.scormProvider.getScormUserDataOnline(e.id,0,!0,n)})),o.push(this.scormProvider.getScos(e.id,void 0,!0,n)),Promise.all(o)},AddonModScormPrefetchHandler.prototype.getDownloadSize=function(e,n,t){var o=this;return this.scormProvider.getScorm(n,e.id,e.url).then(function(e){return o.scormProvider.isScormUnsupported(e)?{size:-1,total:!1}:e.packagesize?{size:e.packagesize,total:!0}:o.scormProvider.calculateScormSize(e).then(function(e){return{size:e,total:!0}})})},AddonModScormPrefetchHandler.prototype.getDownloadedSize=function(e,n){var t=this;return this.scormProvider.getScorm(n,e.id,e.url).then(function(e){return t.scormProvider.getScormFolder(e.moduleurl)}).then(function(e){return t.fileProvider.getDirectorySize(e)})},AddonModScormPrefetchHandler.prototype.getFiles=function(e,n,t){var o=this;return this.scormProvider.getScorm(n,e.id,e.url).then(function(e){return o.scormProvider.getScormFileList(e)}).catch(function(){return[]})},AddonModScormPrefetchHandler.prototype.invalidateContent=function(e,n){return this.scormProvider.invalidateContent(e,n)},AddonModScormPrefetchHandler.prototype.invalidateModule=function(e,n){return this.scormProvider.invalidateScormData(n)},AddonModScormPrefetchHandler.prototype.isDownloadable=function(e,n){var t=this;return this.scormProvider.getScorm(n,e.id,e.url).then(function(e){return!e.warningMessage&&!t.scormProvider.isScormUnsupported(e)})},AddonModScormPrefetchHandler.prototype.prefetch=function(e,n,t,o,r){var i=this.sitesProvider.getCurrentSiteId();return this.prefetchPackage(e,n,t,this.downloadOrPrefetchScorm.bind(this),i,!0,r)},AddonModScormPrefetchHandler.prototype.removeFiles=function(e,n){var t,o=this,r=this.sitesProvider.getCurrentSiteId();return this.scormProvider.getScorm(n,e.id,e.url,!1,r).then(function(e){return t=e,o.scormProvider.getScormFolder(t.moduleurl)}).then(function(e){var n=[];return n.push(o.fileProvider.removeDir(e).catch(function(e){if(!e||1!=e.code)return Promise.reject(e)})),n.push(o.filepoolProvider.removeFileByUrl(r,o.scormProvider.getPackageUrl(t)).catch(function(){})),Promise.all(n)})},AddonModScormPrefetchHandler.prototype.sync=function(e,n,t){var o=this;return this.syncProvider||(this.syncProvider=this.injector.get(l.a)),this.scormProvider.getScorm(n,e.id,e.url,!1,t).then(function(e){return o.syncProvider.syncScorm(e,t)})},AddonModScormPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var o=function(){function AddonModSurveyHelperProvider(e){this.translate=e}return AddonModSurveyHelperProvider.prototype.commaStringToArray=function(e){return"string"==typeof e?e.length>0?e.split(","):[]:e},AddonModSurveyHelperProvider.prototype.getParentQuestions=function(e){var n={};return e.forEach(function(e){0===e.parent&&(n[e.id]=e)}),n},AddonModSurveyHelperProvider.prototype.formatQuestions=function(e){var n=this,t=this.translate.instant("addon.mod_survey.ipreferthat"),o=this.translate.instant("addon.mod_survey.ifoundthat"),r=this.translate.instant("core.choose"),i=[],l=this.getParentQuestions(e),s=1;return e.forEach(function(e){var a=Object.assign({},e),u=l[a.parent];if(a.multiArray=n.commaStringToArray(a.multi),a.optionsArray=n.commaStringToArray(a.options),u){if(a.required=!0,1!==u.type&&2!==u.type){var d=Object.assign({},a);return a.text=t+" "+a.text,a.name="qP"+a.id,a.num=s++,i.push(a),d.text=o+" "+d.text,d.name="q"+a.id,d.num=s++,void i.push(d)}a.name="q"+(2==u.type?"P":"")+a.id,a.num=s++}else a.multiArray&&0===a.multiArray.length&&(a.name="q"+a.id,a.num=s++,a.type>0&&a.optionsArray.unshift(r));i.push(a)}),i},AddonModSurveyHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModUrlHelperProvider(e,n,t){this.sitesProvider=e,this.domUtils=n,this.contentLinksHelper=t}return AddonModUrlHelperProvider.prototype.open=function(e){var n=this,t=this.domUtils.showModalLoading();this.contentLinksHelper.handleLink(e,void 0,void 0,!0,!0).then(function(t){if(!t)return n.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e)}).finally(function(){t.dismiss()})},AddonModUrlHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(149),i=(t(304),t(260),t(4),function(e){function AddonNotesSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p){var f=e.call(this,"AddonNotesSync",n,t,o,r,i,l,p)||this;return f.notesOffline=s,f.utils=a,f.eventsProvider=u,f.notesProvider=d,f.coursesProvider=c,f}return Object(o.__extends)(AddonNotesSyncProvider,e),n=AddonNotesSyncProvider,AddonNotesSyncProvider.prototype.syncAllNotes=function(e,n){return this.syncOnSites("all notes",this.syncAllNotesFunc.bind(this),[n],e)},AddonNotesSyncProvider.prototype.syncAllNotesFunc=function(e,t){var o=this,r=[];return r.push(this.notesOffline.getAllNotes(e)),r.push(this.notesOffline.getAllDeletedNotes(e)),Promise.all(r).then(function(r){var i={};r.forEach(function(e){e.forEach(function(e){i[e.courseid]=e.courseid})});var l=Object.keys(i).map(function(r){var l=parseInt(i[r],10);return(t?o.syncNotes(l,e):o.syncNotesIfNeeded(l,e)).then(function(t){void 0!==t&&o.eventsProvider.trigger(n.AUTO_SYNCED,{courseId:r,warnings:t},e)})});return Promise.all(l)})},AddonNotesSyncProvider.prototype.syncNotesIfNeeded=function(e,n){var t=this;return this.isSyncNeeded(e,n).then(function(o){if(o)return t.syncNotes(e,n)})},AddonNotesSyncProvider.prototype.syncNotes=function(e,n){var t=this;if(n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,n))return this.getOngoingSync(e,n);this.logger.debug("Try to sync notes for course "+e);var o=[],r=[],i=[];i.push(this.notesOffline.getNotesForCourse(e,n).then(function(e){if(e.length){if(!t.appProvider.isOnline())return Promise.reject(t.translate.instant("core.networkerrormsg"));var o=[],r=e.map(function(e){return{userid:e.userid,publishstate:e.publishstate,courseid:e.courseid,text:e.content,format:e.format}});return t.notesProvider.addNotesOnline(r,n).then(function(e){e.forEach(function(e){-1===e.noteid&&-1==o.indexOf(e.errormessage)&&o.push(e.errormessage)})}).catch(function(e){if(!t.utils.isWebServiceError(e))return Promise.reject(e);o.push(e)}).then(function(){var o=e.map(function(e){return t.notesOffline.deleteOfflineNote(e.userid,e.content,e.created,n)});return Promise.all(o)})}})),i.push(this.notesOffline.getCourseDeletedNotes(e,n).then(function(o){if(o.length){if(!t.appProvider.isOnline())return Promise.reject(t.translate.instant("core.networkerrormsg"));var i=o.map(function(e){return e.noteid});return t.notesProvider.deleteNotesOnline(i,e,n).catch(function(e){if(!t.utils.isWebServiceError(e))return Promise.reject(e);r.push(e)}).then(function(){var e=o.map(function(e){return t.notesOffline.undoDeleteNote(e,n)});return Promise.all(e)})}}));var l=Promise.all(i).then(function(){return t.notesProvider.invalidateNotes(e,void 0,n).then(function(){return t.notesProvider.getNotes(e,void 0,!1,!0,n)}).catch(function(){})}).then(function(){if(r&&r.length)return t.coursesProvider.getUserCourse(e,!0,n).catch(function(){return{}}).then(function(n){r.forEach(function(r){o.push(t.translate.instant("addon.notes.warningnotenotsent",{course:n.fullname?n.fullname:e,error:r}))})})}).then(function(){return o});return this.addOngoingSync(e,l,n)},AddonNotesSyncProvider.AUTO_SYNCED="addon_notes_autom_synced",AddonNotesSyncProvider;var n}(r.a))},,,,,,,,,,,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreCourseOfflineProvider(n){this.sitesProvider=n,this.siteSchema={name:"CoreCourseOfflineProvider",version:1,tables:[{name:e.MANUAL_COMPLETION_TABLE,columns:[{name:"cmid",type:"INTEGER",primaryKey:!0},{name:"completed",type:"INTEGER"},{name:"courseid",type:"INTEGER"},{name:"coursename",type:"TEXT"},{name:"timecompleted",type:"INTEGER"}]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=CoreCourseOfflineProvider,CoreCourseOfflineProvider.prototype.deleteManualCompletion=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(e.MANUAL_COMPLETION_TABLE,{cmid:n})})},CoreCourseOfflineProvider.prototype.getAllManualCompletions=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.MANUAL_COMPLETION_TABLE)})},CoreCourseOfflineProvider.prototype.getCourseManualCompletions=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.MANUAL_COMPLETION_TABLE,{courseid:n})})},CoreCourseOfflineProvider.prototype.getManualCompletion=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(e.MANUAL_COMPLETION_TABLE,{cmid:n})})},CoreCourseOfflineProvider.prototype.markCompletedManually=function(n,t,o,r,i){return this.sitesProvider.getSite(i).then(function(i){var l={cmid:n,completed:t,courseid:o,coursename:r||"",timecompleted:Date.now()};return i.getDb().insertRecord(e.MANUAL_COMPLETION_TABLE,l)}).then(function(){return{status:!0,offline:!0}})},CoreCourseOfflineProvider.MANUAL_COMPLETION_TABLE="course_manual_completion",CoreCourseOfflineProvider;var e}()},,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){function CoreEmulatorCaptureHelperProvider(e,n,t){this.utils=e,this.mimeUtils=n,this.modalCtrl=t,this.possibleAudioMimeTypes={"audio/webm":"weba","audio/ogg":"ogg"},this.possibleVideoMimeTypes={"video/webm;codecs=vp9":"webm","video/webm;codecs=vp8":"webm","video/ogg":"ogv"},this.win=window}return CoreEmulatorCaptureHelperProvider.prototype.captureMedia=function(e,n){n=n||{};try{var t=this.utils.promiseDefer(),o={type:e},r=void 0,i=void 0;if("video"==e)r=this.getMimeTypeAndExtension(e,n.mimetypes),o.mimetype=r.mimetype,o.extension=r.extension;else if("audio"==e)r=this.getMimeTypeAndExtension(e,n.mimetypes),o.mimetype=r.mimetype,o.extension=r.extension;else if("image"==e){if(void 0!==n.sourceType&&1!=n.sourceType)return Promise.reject("This source type is not supported in desktop.");1==n.cameraDirection&&(o.facingMode="user"),1==n.encodingType?(o.mimetype="image/png",o.extension="png"):(o.mimetype="image/jpeg",o.extension="jpeg"),n.quality>=0&&n.quality<=100&&(o.quality=n.quality/100),0==n.destinationType&&(o.returnDataUrl=!0)}return n.duration&&(o.maxTime=1e3*n.duration),(i=this.modalCtrl.create("CoreEmulatorCaptureMediaPage",o,{cssClass:"core-modal-fullscreen"})).present(),i.onDidDismiss(function(e,n){"success"==n?t.resolve(e):t.reject(e)}),t.promise}catch(e){return Promise.reject(e.toString())}},CoreEmulatorCaptureHelperProvider.prototype.getMimeTypeAndExtension=function(e,n){var t={};if(n&&n.length)for(var o=0;o<n.length;o++){var r=n[o],i=r.match(new RegExp("^"+e+"/"));if(i&&i.length&&this.win.MediaRecorder.isTypeSupported(r)){t.mimetype=r;break}}return t.mimetype?t.extension=this.mimeUtils.getExtension(t.mimetype):"video"==e?(t.mimetype=this.videoMimeType,t.extension=this.possibleVideoMimeTypes[t.mimetype]):"audio"==e&&(t.mimetype=this.audioMimeType,t.extension=this.possibleAudioMimeTypes[t.mimetype]),t},CoreEmulatorCaptureHelperProvider.prototype.initGetUserMedia=function(){var e=this,n=navigator;if(void 0===n.mediaDevices&&(n.mediaDevices={}),!n.mediaDevices.getUserMedia){if(n.getUserMedia=n.getUserMedia||n.webkitGetUserMedia||n.mozGetUserMedia||n.msGetUserMedia,!n.getUserMedia)return!1;navigator.mediaDevices.getUserMedia=function(t){var o=e.utils.promiseDefer();return n.getUserMedia(t,o.resolve,o.reject),o.promise}}return!0},CoreEmulatorCaptureHelperProvider.prototype.initMimeTypes=function(){for(var e in this.possibleVideoMimeTypes)if(this.win.MediaRecorder.isTypeSupported(e)){this.videoMimeType=e;break}for(var e in this.possibleAudioMimeTypes)if(this.win.MediaRecorder.isTypeSupported(e)){this.audioMimeType=e;break}},CoreEmulatorCaptureHelperProvider.prototype.load=function(){return void 0!==this.win.MediaRecorder&&this.initGetUserMedia()&&this.initMimeTypes(),Promise.resolve()},CoreEmulatorCaptureHelperProvider}()},function(e,n,t){"use strict";t(0),t(1);var o=t(58),r=(t(18),t(7),t(2),t(54)),i=(t(12),t(67),t(23),t(3),t(605),function(){function CoreH5PContentValidator(e,n,t,o,r,i){this.h5pProvider=e,this.h5pUtils=n,this.textUtils=t,this.utils=o,this.translate=r,this.siteId=i,this.typeMap={text:"validateText",number:"validateNumber",boolean:"validateBoolean",list:"validateList",group:"validateGroup",file:"validateFile",image:"validateImage",video:"validateVideo",audio:"validateAudio",select:"validateSelect",library:"validateLibrary"},this.nextWeight=1,this.libraries={},this.dependencies={},this.relativePathRegExp=/^((\.\.\/){1,2})(.*content\/)?(\d+|editor)\/(.+)$/,this.allowedHtml={}}return CoreH5PContentValidator.prototype.addon=function(e){var n=this,t="preloaded-"+e.machineName;return this.dependencies[t]={library:e,type:"preloaded"},this.h5pProvider.findLibraryDependencies(this.dependencies,e,this.nextWeight).then(function(e){n.nextWeight=e,n.dependencies[t].weight=n.nextWeight++})},CoreH5PContentValidator.prototype.getDependencies=function(){return this.dependencies},CoreH5PContentValidator.prototype.validateMetadata=function(e){var n=this.getMetadataSemantics(),t=this.utils.clone(e||{});return void 0===t.license&&(t.license="U"),this.validateGroup(t,{type:"group",fields:n},!1)},CoreH5PContentValidator.prototype.validateText=function(e,n){if("string"!=typeof e&&(e=""),n.tags){var t=["div","span","p","br"].concat(n.tags);-1!=t.indexOf("table")&&(t=t.concat(["tr","td","th","colgroup","thead","tbody","tfoot"])),-1!=t.indexOf("b")&&t.push("strong"),-1!=t.indexOf("i")&&t.push("em"),-1==t.indexOf("ul")&&-1==t.indexOf("ol")||t.push("li"),-1==t.indexOf("del")&&-1==t.indexOf("strike")||t.push("s"),t=this.utils.uniqueArray(t);var o=[];n.font&&(n.font.size&&o.push(/^font-size: *[0-9.]+(em|px|%) *;?$/i),n.font.family&&o.push(/^font-family: *[-a-z0-9," ]+;?$/i),n.font.color&&o.push(/^color: *(#[a-f0-9]{3}[a-f0-9]{3}?|rgba?\([0-9, ]+\)) *;?$/i),n.font.background&&o.push(/^background-color: *(#[a-f0-9]{3}[a-f0-9]{3}?|rgba?\([0-9, ]+\)) *;?$/i),n.font.spacing&&o.push(/^letter-spacing: *[0-9.]+(em|px|%) *;?$/i),n.font.height&&o.push(/^line-height: *[0-9.]+(em|px|%|) *;?$/i)),o.push(/^text-align: *(center|left|right);?$/i),e=this.filterXss(e,t,o)}else e=this.textUtils.escapeHTML(e);return void 0!==n.maxLength&&(e=e.substr(0,n.maxLength)),e},CoreH5PContentValidator.prototype.validateContentFiles=function(e,n){return void 0===n&&(n=!1),!0},CoreH5PContentValidator.prototype.validateNumber=function(e,n){if(e=Number(e),isNaN(e)&&(e=0),void 0!==n.min&&e<n.min&&(e=n.min),void 0!==n.max&&e>n.max&&(e=n.max),void 0!==n.step){var t=(e-(void 0!==n.min?n.min:0))%n.step;0!==t&&(e-=t)}return void 0!==n.decimals&&(e=e.toFixed(n.decimals)),e},CoreH5PContentValidator.prototype.validateBoolean=function(e){return!!e},CoreH5PContentValidator.prototype.validateSelect=function(e,n){var t=n.optional,o={},r=!1;if(n.options&&n.options.length&&(r=!0,n.options.forEach(function(e){"optgroup"==e.type?e.options.forEach(function(e){o[e.value]=!0}):e.value&&(o[e.value]=!0)})),n.multiple)for(var i in e){var l=e[i];!r||t||o[l]?e[i]=this.textUtils.escapeHTML(l):delete e[i]}else Array.isArray(e)&&(e=e[0]),!r||t||o[e]||(e=n.options[0].value),e=this.textUtils.escapeHTML(e);return e},CoreH5PContentValidator.prototype.validateList=function(e,n){var t=this,o=n.field,r=this[this.typeMap[o.type]].bind(this),i=Promise.resolve(),l=Object.keys(e);return void 0!==n.max&&(l=l.slice(0,n.max)),l.forEach(function(n){isNaN(parseInt(n,10))?delete e[n]:i=i.then(function(){return Promise.resolve(r(e[n],o)).then(function(t){null===t?e.splice(n,1):e[n]=t})})}),i.then(function(){return Array.isArray(e)||(e=t.utils.objectToArray(e)),e.length?e:null})},CoreH5PContentValidator.prototype.validateFilelike=function(e,n,t){void 0===t&&(t=[]);var o=e.path.match(this.relativePathRegExp);o&&o.length&&(e.path=o[5]),"#tmp"===e.path.substr(-4,4)&&(e.path=e.path.substr(0,e.path.length-4)),e.path=this.textUtils.escapeHTML(e.path),e.mime&&(e.mime=this.textUtils.escapeHTML(e.mime));var r=["path","mime","copyright"].concat(t);return n.extraAttributes&&(r=r.concat(n.extraAttributes)),r=this.utils.uniqueArray(r),this.filterParams(e,r),void 0!==e.width&&(e.width=parseInt(e.width,10)),void 0!==e.height&&(e.height=parseInt(e.height,10)),e.codecs&&(e.codecs=this.textUtils.escapeHTML(e.codecs)),void 0!==e.bitrate&&(e.bitrate=parseInt(e.bitrate,10)),void 0!==e.quality&&(null===e.quality||void 0===e.quality.level||void 0===e.quality.label?delete e.quality:(this.filterParams(e.quality,["level","label"]),e.quality.level=parseInt(e.quality.level),e.quality.label=this.textUtils.escapeHTML(e.quality.label))),void 0!==e.copyright?this.validateGroup(e.copyright,this.getCopyrightSemantics()).then(function(){return e}):Promise.resolve(e)},CoreH5PContentValidator.prototype.validateFile=function(e,n){return this.validateFilelike(e,n)},CoreH5PContentValidator.prototype.validateImage=function(e,n){return this.validateFilelike(e,n,["width","height","originalImage"])},CoreH5PContentValidator.prototype.validateVideo=function(e,n){var t=this,o=Promise.resolve(),r=function(r){o=o.then(function(){return t.validateFilelike(e[r],n,["width","height","codecs","quality","bitrate"])})};for(var i in e)r(i);return o.then(function(){return e})},CoreH5PContentValidator.prototype.validateAudio=function(e,n){var t=this,o=Promise.resolve(),r=function(r){o=o.then(function(){return t.validateFilelike(e[r],n)})};for(var i in e)r(i);return o.then(function(){return e})},CoreH5PContentValidator.prototype.validateGroup=function(e,n,t){void 0===t&&(t=!0);var o=!0===n.isSubContent;if(1==n.fields.length&&t&&!o){var r=n.fields[0],i=this[this.typeMap[r.type]].bind(this);return Promise.resolve(i(e,r))}var l=Promise.resolve(),s=function(t){if(o&&"subContentId"==t)return"continue";for(var r=!1,i=null,s=null,u=0;u<n.fields.length;u++)if((s=n.fields[u]).name==t){n.optional&&(s.optional=!0),i=a[a.typeMap[s.type]].bind(a),r=!0;break}r&&i?l=l.then(function(){return Promise.resolve(i(e[t],s)).then(function(n){e[t]=n,null===n&&delete e[t]})}):delete e.key},a=this;for(var u in e)s(u);return l.then(function(){return e})},CoreH5PContentValidator.prototype.validateLibrary=function(e,n){var t=this;if(!e.library)return Promise.resolve();var o;if(this.libraries[e.library])o=Promise.resolve(this.libraries[e.library]);else{var r=this.h5pUtils.libraryFromString(e.library);o=this.h5pProvider.loadLibrary(r.machineName,r.majorVersion,r.minorVersion,this.siteId).then(function(n){return t.libraries[e.library]=n,n})}return o.then(function(o){return t.validateGroup(e.params,{type:"group",fields:o.semantics},!1).then(function(n){if(e.params=n,e.metadata)return t.validateMetadata(e.metadata).then(function(n){e.metadata=n})}).then(function(){var r=["library","params","subContentId","metadata"];n.extraAttributes&&(r=t.utils.uniqueArray(r.concat(n.extraAttributes))),t.filterParams(e,r),e.subContentId&&!e.subContentId.match(/^\{?[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}\}?$/)&&delete e.subContentId;var i="preloaded-"+o.machineName;return t.dependencies[i]?e:(t.dependencies[i]={library:o,type:"preloaded"},t.h5pProvider.findLibraryDependencies(t.dependencies,o,t.nextWeight).then(function(n){return t.nextWeight=n,t.dependencies[i].weight=t.nextWeight++,e}))})})},CoreH5PContentValidator.prototype.filterParams=function(e,n){for(var t in e)-1==n.indexOf(t)&&delete e[t]},CoreH5PContentValidator.prototype.filterXss=function(e,n,t){var o=this;if(!e||"string"!=typeof e)return e;n=n||["a","em","strong","cite","blockquote","code","ul","ol","li","dl","dt","dd"],this.allowedStyles=t,this.filterXssSplit(n,!0);var r=(e=(e=(e=(e=(e=e.replace(/&\s*\{[^}]*(\}\s*;?|$)/g,"")).replace(/&/g,"&amp;")).replace(/&amp;#([0-9]+;)/g,"&#$1")).replace(/&amp;#[Xx]0*((?:[0-9A-Fa-f]{2})+;)/g,"&#x$1")).replace(/&amp;([A-Za-z][A-Za-z0-9]*;)/g,"&$1")).match(/(<(?=[^a-zA-Z!\/])|<!--.*?-->|<[^>]*(>|$)|>)/g);return r&&r.length&&r.forEach(function(n){e=e.replace(n,o.filterXssSplit([n]))}),e},CoreH5PContentValidator.prototype.filterXssSplit=function(e,n){if(void 0===n&&(n=!1),n)return this.allowedHtml=this.utils.arrayToObject(e),"";var t=e[0];if("<"!=t.substr(0,1))return"&gt;";if(1==t.length)return"&lt;";var o=t.match(/^<\s*(\/\s*)?([a-zA-Z0-9\-]+)([^>]*)>?|(<!--.*?-->)$/);if(!o)return"";var r=o[1]?o[1].trim():"",i=o[3]||"",l=o[4]||"",s=o[2]||"";if(l&&(s="!--"),!this.allowedHtml[s.toLowerCase()])return"";if(l)return l;if(""!=r)return"</"+s+">";var a=i.replace(/(\s?)\/\s*$/g,"$1"),u=i!=a?" /":"",d=this.filterXssAttributes(a,-1!=CoreH5PContentValidator.ALLOWED_STYLEABLE_TAGS.indexOf(s)?this.allowedStyles:null).join(" ");return d=d.replace(/[<>]/g,""),d=d.length?" "+d:"","<"+s+d+u+">"},CoreH5PContentValidator.prototype.filterXssAttributes=function(e,n){for(var t=[],o=0,r="",i=!1;0!=e.length;){var l=0,s=void 0,a=void 0;switch(o){case 0:(s=e.match(/^([-a-zA-Z]+)/))&&s.length>1&&(i="style"==(r=s[1].toLowerCase())||"on"==r.substr(0,2),l=o=1,e=e.replace(/^[-a-zA-Z]+/,""));break;case 1:if(e.match(/^\s*=\s*/)){l=1,o=2,e=e.replace(/^\s*=\s*/,"");break}e.match(/^\s+/)&&(l=1,o=0,i||t.push(r),e=e.replace(/^\s+/,""));break;case 2:if((s=e.match(/^"([^"]*)"(\s+|$)/))&&s.length>1){if(n&&"style"===r){for(var u=0;u<n.length;u++){if(s[1].match(n[u])){t.push('style="'+s[1]+'"');break}}break}a=this.filterXssBadProtocol(s[1]),i||t.push(r+'="'+a+'"'),l=1,o=0,e=e.replace(/^"[^"]*"(\s+|$)/,"");break}if((s=e.match(/^'([^']*)'(\s+|$)/))&&s.length>1){a=this.filterXssBadProtocol(s[1]),i||t.push(r+'="'+a+'"'),l=1,o=0,e=e.replace(/^'[^']*'(\s+|$)/,"");break}(s=e.match(/^([^\s\"']+)(\s+|$)/))&&s.length>1&&(a=this.filterXssBadProtocol(s[1]),i||t.push(r+'="'+a+'"'),l=1,o=0,e=e.replace(/^([^\s\"']+)(\s+|$)/,""))}0==l&&(e=e.replace(/^("[^"]*("|$)|\'[^\']*(\'|$)||\S)*\s*/,""),o=0)}return 1!=o||i||t.push(r),t},CoreH5PContentValidator.prototype.filterXssBadProtocol=function(e,n){return void 0===n&&(n=!0),n&&(e=this.textUtils.decodeHTMLEntities(e)),this.textUtils.escapeHTML(this.stripDangerousProtocols(e))},CoreH5PContentValidator.prototype.stripDangerousProtocols=function(e){var n,t={ftp:!0,http:!0,https:!0,mailto:!0};do{n=e;var o=e.indexOf(":");if(o>0){var r=e.substr(0,o);if(r.match(/[/?#]/))break;t[r.toLowerCase()]||(e=e.substr(o+1))}}while(n!=e);return e},CoreH5PContentValidator.prototype.getMetadataSemantics=function(){if(this.metadataSemantics)return this.metadataSemantics;var e=this.getCCVersions();return this.metadataSemantics=[{name:"title",type:"text",label:this.translate.instant("core.h5p.title"),placeholder:"La Gioconda"},{name:"license",type:"select",label:this.translate.instant("core.h5p.license"),default:"U",options:[{value:"U",label:this.translate.instant("core.h5p.undisclosed")},{type:"optgroup",label:this.translate.instant("core.h5p.creativecommons"),options:[{value:"CC BY",label:this.translate.instant("core.h5p.ccattribution"),versions:e},{value:"CC BY-SA",label:this.translate.instant("core.h5p.ccattributionsa"),versions:e},{value:"CC BY-ND",label:this.translate.instant("core.h5p.ccattributionnd"),versions:e},{value:"CC BY-NC",label:this.translate.instant("core.h5p.ccattributionnc"),versions:e},{value:"CC BY-NC-SA",label:this.translate.instant("core.h5p.ccattributionncsa"),versions:e},{value:"CC BY-NC-ND",label:this.translate.instant("core.h5p.ccattributionncnd"),versions:e},{value:"CC0 1.0",label:this.translate.instant("core.h5p.ccpdd")},{value:"CC PDM",label:this.translate.instant("core.h5p.pdm")}]},{value:"GNU GPL",label:this.translate.instant("core.h5p.gpl")},{value:"PD",label:this.translate.instant("core.h5p.pd")},{value:"ODC PDDL",label:this.translate.instant("core.h5p.pddl")},{value:"C",label:this.translate.instant("core.h5p.copyrightstring")}]},{name:"licenseVersion",type:"select",label:this.translate.instant("core.h5p.licenseversion"),options:e,optional:!0},{name:"yearFrom",type:"number",label:this.translate.instant("core.h5p.yearsfrom"),placeholder:"1991",min:"-9999",max:"9999",optional:!0},{name:"yearTo",type:"number",label:this.translate.instant("core.h5p.yearsto"),placeholder:"1992",min:"-9999",max:"9999",optional:!0},{name:"source",type:"text",label:this.translate.instant("core.h5p.source"),placeholder:"https://",optional:!0},{name:"authors",type:"list",field:{name:"author",type:"group",fields:[{label:this.translate.instant("core.h5p.authorname"),name:"name",optional:!0,type:"text"},{name:"role",type:"select",label:this.translate.instant("core.h5p.authorrole"),default:"Author",options:[{value:"Author",label:this.translate.instant("core.h5p.author")},{value:"Editor",label:this.translate.instant("core.h5p.editor")},{value:"Licensee",label:this.translate.instant("core.h5p.licensee")},{value:"Originator",label:this.translate.instant("core.h5p.originator")}]}]}},{name:"licenseExtras",type:"text",widget:"textarea",label:this.translate.instant("core.h5p.licenseextras"),optional:!0,description:this.translate.instant("core.h5p.additionallicenseinfo")},{name:"changes",type:"list",field:{name:"change",type:"group",label:this.translate.instant("core.h5p.changelog"),fields:[{name:"date",type:"text",label:this.translate.instant("core.h5p.date"),optional:!0},{name:"author",type:"text",label:this.translate.instant("core.h5p.changedby"),optional:!0},{name:"log",type:"text",widget:"textarea",label:this.translate.instant("core.h5p.changedescription"),placeholder:this.translate.instant("core.h5p.changeplaceholder"),optional:!0}]}},{name:"authorComments",type:"text",widget:"textarea",label:this.translate.instant("core.h5p.authorcomments"),description:this.translate.instant("core.h5p.authorcommentsdescription"),optional:!0},{name:"contentType",type:"text",widget:"none"},{name:"defaultLanguage",type:"text",widget:"none"}],this.metadataSemantics},CoreH5PContentValidator.prototype.getCopyrightSemantics=function(){if(this.copyrightSemantics)return this.copyrightSemantics;var e=this.getCCVersions();return this.copyrightSemantics={name:"copyright",type:"group",label:this.translate.instant("core.h5p.copyrightinfo"),fields:[{name:"title",type:"text",label:this.translate.instant("core.h5p.title"),placeholder:"La Gioconda",optional:!0},{name:"author",type:"text",label:this.translate.instant("core.h5p.author"),placeholder:"Leonardo da Vinci",optional:!0},{name:"year",type:"text",label:this.translate.instant("core.h5p.years"),placeholder:"1503 - 1517",optional:!0},{name:"source",type:"text",label:this.translate.instant("core.h5p.source"),placeholder:"http://en.wikipedia.org/wiki/Mona_Lisa",optional:!0,regexp:{pattern:"^http[s]?://.+",modifiers:"i"}},{name:"license",type:"select",label:this.translate.instant("core.h5p.license"),default:"U",options:[{value:"U",label:this.translate.instant("core.h5p.undisclosed")},{value:"CC BY",label:this.translate.instant("core.h5p.ccattribution"),versions:e},{value:"CC BY-SA",label:this.translate.instant("core.h5p.ccattributionsa"),versions:e},{value:"CC BY-ND",label:this.translate.instant("core.h5p.ccattributionnd"),versions:e},{value:"CC BY-NC",label:this.translate.instant("core.h5p.ccattributionnc"),versions:e},{value:"CC BY-NC-SA",label:this.translate.instant("core.h5p.ccattributionncsa"),versions:e},{value:"CC BY-NC-ND",label:this.translate.instant("core.h5p.ccattributionncnd"),versions:e},{value:"GNU GPL",label:this.translate.instant("core.h5p.licenseGPL"),versions:[{value:"v3",label:this.translate.instant("core.h5p.licenseV3")},{value:"v2",label:this.translate.instant("core.h5p.licenseV2")},{value:"v1",label:this.translate.instant("core.h5p.licenseV1")}]},{value:"PD",label:this.translate.instant("core.h5p.pd"),versions:[{value:"-",label:"-"},{value:"CC0 1.0",label:this.translate.instant("core.h5p.licenseCC010U")},{value:"CC PDM",label:this.translate.instant("core.h5p.pdm")}]},{value:"C",label:this.translate.instant("core.h5p.copyrightstring")}]},{name:"version",type:"select",label:this.translate.instant("core.h5p.licenseversion"),options:[]}]},this.copyrightSemantics},CoreH5PContentValidator.prototype.getCCVersions=function(){return[{value:"4.0",label:this.translate.instant("core.h5p.licenseCC40")},{value:"3.0",label:this.translate.instant("core.h5p.licenseCC30")},{value:"2.5",label:this.translate.instant("core.h5p.licenseCC25")},{value:"2.0",label:this.translate.instant("core.h5p.licenseCC20")},{value:"1.0",label:this.translate.instant("core.h5p.licenseCC10")}]},CoreH5PContentValidator.ALLOWED_STYLEABLE_TAGS=["span","p","div","h1","h2","h3","td"],CoreH5PContentValidator}());t(4);t.d(n,"a",function(){return a});var l=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},s=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},a=function(){function CoreH5PProvider(e,n,t,o,r,i,l,s,a,u){this.sitesProvider=n,this.textUtils=t,this.fileProvider=o,this.mimeUtils=r,this.h5pUtils=i,this.filepoolProvider=l,this.utils=s,this.urlUtils=a,this.translate=u,this.CONTENT_TABLE="h5p_content",this.LIBRARIES_TABLE="h5p_libraries",this.LIBRARY_DEPENDENCIES_TABLE="h5p_library_dependencies",this.CONTENTS_LIBRARIES_TABLE="h5p_contents_libraries",this.LIBRARIES_CACHEDASSETS_TABLE="h5p_libraries_cachedassets",this.aggregateAssets=!0,this.siteSchema={name:"CoreH5PProvider",version:1,canBeCleared:[this.CONTENT_TABLE,this.LIBRARIES_TABLE,this.LIBRARY_DEPENDENCIES_TABLE,this.CONTENTS_LIBRARIES_TABLE,this.LIBRARIES_CACHEDASSETS_TABLE],tables:[{name:this.CONTENT_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0,autoIncrement:!0},{name:"jsoncontent",type:"TEXT",notNull:!0},{name:"mainlibraryid",type:"INTEGER",notNull:!0},{name:"foldername",type:"TEXT",notNull:!0},{name:"fileurl",type:"TEXT",notNull:!0},{name:"filtered",type:"TEXT"},{name:"timecreated",type:"INTEGER",notNull:!0},{name:"timemodified",type:"INTEGER",notNull:!0}]},{name:this.LIBRARIES_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0,autoIncrement:!0},{name:"machinename",type:"TEXT",notNull:!0},{name:"title",type:"TEXT",notNull:!0},{name:"majorversion",type:"INTEGER",notNull:!0},{name:"minorversion",type:"INTEGER",notNull:!0},{name:"patchversion",type:"INTEGER",notNull:!0},{name:"runnable",type:"INTEGER",notNull:!0},{name:"fullscreen",type:"INTEGER",notNull:!0},{name:"embedtypes",type:"TEXT",notNull:!0},{name:"preloadedjs",type:"TEXT"},{name:"preloadedcss",type:"TEXT"},{name:"droplibrarycss",type:"TEXT"},{name:"semantics",type:"TEXT"},{name:"addto",type:"TEXT"}]},{name:this.LIBRARY_DEPENDENCIES_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0,autoIncrement:!0},{name:"libraryid",type:"INTEGER",notNull:!0},{name:"requiredlibraryid",type:"INTEGER",notNull:!0},{name:"dependencytype",type:"TEXT",notNull:!0}]},{name:this.CONTENTS_LIBRARIES_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0,autoIncrement:!0},{name:"h5pid",type:"INTEGER",notNull:!0},{name:"libraryid",type:"INTEGER",notNull:!0},{name:"dependencytype",type:"TEXT",notNull:!0},{name:"dropcss",type:"INTEGER",notNull:!0},{name:"weight",type:"INTEGER",notNull:!0}]},{name:this.LIBRARIES_CACHEDASSETS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0,autoIncrement:!0},{name:"libraryid",type:"INTEGER",notNull:!0},{name:"hash",type:"TEXT",notNull:!0},{name:"foldername",type:"TEXT",notNull:!0}]}]},this.ROOT_CACHE_KEY="CoreH5P:",this.logger=e.getInstance("CoreH5PProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=CoreH5PProvider,CoreH5PProvider.prototype.cacheAssets=function(e,n,t,o){var r=this,i=[],l=function(l){var a=e[l];if(!a||!a.length)return"continue";var u=n+"."+("scripts"==l?"js":"css"),d=s.textUtils.concatenatePaths(s.getCachedAssetsFolderPath(t,o),u);i.push(s.concatenateFiles(a,l).then(function(e){return r.fileProvider.writeFile(d,e)}).then(function(){e[l]=[{path:r.textUtils.concatenatePaths(r.getCachedAssetsFolderName(),u),version:""}]}))},s=this;for(var a in e)l(a);return Promise.all(i)},CoreH5PProvider.prototype.canGetTrustedH5PFile=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.canGetTrustedH5PFileInSite(e)})},CoreH5PProvider.prototype.canGetTrustedH5PFileInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("core_h5p_get_trusted_h5p_file")},CoreH5PProvider.prototype.clearFilteredParameters=function(e,n){var t=this;return e&&e.length?this.sitesProvider.getSiteDb(n).then(function(n){var o=n.getInOrEqual(e);return o[0]="mainlibraryid "+o[0],n.updateRecordsWhere(t.CONTENT_TABLE,{filtered:null},o[0],o[1])}):Promise.resolve()},CoreH5PProvider.prototype.concatenateFiles=function(e,n){var t=this,o=this.fileProvider.getBasePathInstant(),r="",i=Promise.resolve();return e.forEach(function(e){i=i.then(function(){return t.fileProvider.readFile(e.path)}).then(function(i){if("scripts"==n)r+=i+";\n";else{var l=i.match(/url\([\'"]?([^"\')]+)[\'"]?\)/gi),s=e.path.replace(/(^\/|\/$)/g,""),a={};l&&l.length&&l.forEach(function(e){var n=e.replace(/(url\(['"]?|['"]?\)$)/gi,"");if(!a[n]&&!n.match(/^(data:|([a-z0-9]+:)?\/)/i)){var r=s.split("/");if(a[n]=n,n.match(/^\.\.\//)){var l=n.split("/").filter(function(e){return e});r.pop(),l.shift(),r[r.length-1]=l[0],l.shift(),n=r.join("/")+"/"+l.join("/")}else r[r.length-1]=n,n=r.join("/");i=i.replace(new RegExp(t.textUtils.escapeForRegex(e),"g"),'url("'+t.textUtils.concatenatePaths(o,n)+'")')}}),r+=i+"\n"}})}),i.then(function(){return r})},CoreH5PProvider.prototype.createContentIndex=function(e,n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(l){var s=i.getContentId(e),a=i.fileProvider.getBasePathInstant(),u=i.textUtils.concatenatePaths(a,i.getContentFolderPath(t.folderName,l.getId())),d={library:i.libraryToString(t.library),fullScreen:t.library.fullscreen,exportUrl:"",embedCode:i.getEmbedCode(l.getURL(),n,!0),resizeCode:i.getResizeCode(),title:t.slug,displayOptions:{},url:i.getEmbedUrl(l.getURL(),n),contentUrl:u,metadata:t.metadata,contentUserData:[{state:"{}"}]};return i.getAssets(e,t,o,l.getId()).then(function(n){n.settings.contents[s]=Object.assign(n.settings.contents[s],d);var o=i.getContentIndexPath(t.folderName,r),l="<html><head><title>"+t.title+'</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8">';return n.cssRequires.forEach(function(e){l+='<link rel="stylesheet" type="text/css" href="'+e+'">'}),l+='<script type="text/javascript">var H5PIntegration = '+JSON.stringify(n.settings).replace(/\//g,"\\/")+"<\/script>",l+='<script type="text/javascript" src="'+i.textUtils.concatenatePaths(i.getCoreH5PPath(),"moodle/js/displayoptions.js")+'"><\/script>',l+="</head><body>",l+='<script type="text/javascript" src="'+i.textUtils.concatenatePaths(i.getCoreH5PPath(),"moodle/js/embed.js")+'"><\/script>',n.jsRequires.forEach(function(e){l+='<script type="text/javascript" src="'+e+'"><\/script>'}),l+='<div class="h5p-iframe-wrapper"><iframe id="h5p-iframe-'+e+'" class="h5p-iframe" data-content-id="'+e+'"style="height:1px; min-width: 100%" src="about:blank"></iframe></div></body>',i.fileProvider.writeFile(o,l)}).then(function(e){return e.toURL()})})},CoreH5PProvider.prototype.deleteCachedAssets=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=n.getDb();return o.getRecords(t.LIBRARIES_CACHEDASSETS_TABLE,{libraryid:e}).then(function(e){var r=[],i=[];return e.forEach(function(e){i.push(e.hash);var o=t.getCachedAssetsFolderPath(e.foldername,n.getId());["js","css"].forEach(function(n){var i=t.textUtils.concatenatePaths(o,e.hash+"."+n);r.push(t.fileProvider.removeFile(i).catch(function(){}))})}),Promise.all(r).then(function(){return o.deleteRecordsList(t.LIBRARIES_CACHEDASSETS_TABLE,"hash",i)})})})},CoreH5PProvider.prototype.deleteContentByUrl=function(e,n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.getContentDataByUrl(e,n).then(function(e){var o=[];return o.push(t.deleteContentData(e.id,n)),o.push(t.deleteContentFolder(e.foldername,n)),t.utils.allPromises(o)})},CoreH5PProvider.prototype.deleteContentData=function(e,n){var t=this,o=[];return o.push(this.sitesProvider.getSiteDb(n).then(function(n){return n.deleteRecords(t.CONTENT_TABLE,{id:e})})),o.push(this.deleteLibraryUsage(e,n)),Promise.all(o)},CoreH5PProvider.prototype.deleteContentFolder=function(e,n){return this.fileProvider.removeDir(this.getContentFolderPath(e,n))},CoreH5PProvider.prototype.deleteContentIndexesForLibrary=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=n.getDb(),r="SELECT DISTINCT hc.foldername FROM "+t.CONTENTS_LIBRARIES_TABLE+" hcl JOIN "+t.CONTENT_TABLE+" hc ON hcl.h5pid = hc.id WHERE hcl.libraryid = ?",i=[];return i.push(e),o.execute(r,i).then(function(e){for(var o=[],r=0;r<e.rows.length;r++){var i=e.rows.item(r);o.push(t.fileProvider.removeFile(t.getContentIndexPath(i.foldername,n.getId())).catch(function(){}))}return Promise.all(o)})})},CoreH5PProvider.prototype.deleteLibraryData=function(e,n){var t=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.deleteRecords(t.LIBRARIES_TABLE,{id:e})})},CoreH5PProvider.prototype.deleteLibraryDependencies=function(e,n){var t=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.deleteRecords(t.LIBRARY_DEPENDENCIES_TABLE,{libraryid:e})})},CoreH5PProvider.prototype.deleteLibraryFolder=function(e,n,t){return this.fileProvider.removeDir(this.getLibraryFolderPath(e,t,n))},CoreH5PProvider.prototype.deleteLibraryUsage=function(e,n){var t=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.deleteRecords(t.CONTENTS_LIBRARIES_TABLE,{h5pid:e})})},CoreH5PProvider.prototype.extractH5PFile=function(e,n,t){var r=this;t=t||this.sitesProvider.getCurrentSiteId();var i=this.mimeUtils.removeExtension(n.name),l=this.textUtils.concatenatePaths(o.a.TMPFOLDER,"h5p/"+i);return this.fileProvider.unzipFile(n.toURL(),l).then(function(){return r.fileProvider.getDirectoryContents(l)}).then(function(n){return r.processH5PFiles(l,n).then(function(n){var o={};return r.saveLibraries(n.librariesJsonData,i,t).then(function(){var e=function(e){var t=n.mainJsonData.preloadedDependencies[e];if(t.machineName===n.mainJsonData.mainLibrary)return{value:r.getLibraryIdByData(t).then(function(e){t.libraryId=e,o.library=t})}};for(var t in n.mainJsonData.preloadedDependencies){var i=e(t);if("object"==typeof i)return i.value}}).then(function(){return o.params=JSON.stringify(n.contentJsonData),r.saveContentData(o,i,e,t)}).then(function(){var e=r.textUtils.concatenatePaths(l,"content");return r.saveContentInFS(e,i,t).catch(function(e){return r.deleteContentData(o.id,t).catch(function(){}).then(function(){return Promise.reject(e)})})}).then(function(){return r.loadContentData(o.id,void 0,t).then(function(n){var i=r.h5pUtils.determineEmbedType(n.embedType,n.library.embedTypes);return r.createContentIndex(o.id,e,n,i,t)})}).finally(function(){return r.fileProvider.removeDir(l).catch(function(){})})})})},CoreH5PProvider.prototype.filterParameters=function(e,n){var t=this;if(n=n||this.sitesProvider.getCurrentSiteId(),e.filtered)return Promise.resolve(e.filtered);if(void 0===e.library||void 0===e.params)return Promise.resolve(null);var o={library:this.libraryToString(e.library),params:this.textUtils.parseJSON(e.params,!1)};if(!o.params)return null;var r=new i(this,this.h5pUtils,this.textUtils,this.utils,this.translate,n);return r.validateLibrary(o,{options:[o.library]}).then(function(){return t.loadAddons(n)}).then(function(e){var n=Promise.resolve();return e.forEach(function(e){var i=e.addTo;if(i&&i.content&&i.content.types&&i.content.types.length)for(var l=0;l<i.content.types.length;l++){var s=i.content.types[l];if(s&&s.text&&s.text.regex&&t.h5pUtils.textAddonMatches(o.params,s.text.regex)){n=n.then(function(){return r.addon(e)});break}}}),n}).then(function(){e.dependencies=r.getDependencies();var i=JSON.stringify(o.params);return e.id?t.deleteLibraryUsage(e.id,n).catch(function(){}).then(function(){return t.saveLibraryUsage(e.id,e.dependencies,n)}).then(function(){return e.slug||(e.slug=t.h5pUtils.slugify(e.title)),t.updateContentFields(e.id,{filtered:i},n).then(function(){return i})}):i}).catch(function(){return null})},CoreH5PProvider.prototype.findLibraryDependencies=function(e,n,t,o,r){var i=this;void 0===t&&(t=1),void 0===o&&(o=!1),r=r||this.sitesProvider.getCurrentSiteId();var l=Promise.resolve();return["dynamic","preloaded","editor"].forEach(function(s){var a=s+"Dependencies";n[a]&&("preloaded"===s&&o&&(s="editor"),n[a].forEach(function(n){l=l.then(function(){var o=s+"-"+n.machineName;if(!e[o])return i.loadLibrary(n.machineName,n.majorVersion,n.minorVersion,r).then(function(n){return e[o]={library:n,type:s},i.findLibraryDependencies(e,n,t,"editor"===s,r)}).then(function(n){t=n,e[o].weight=t++})})}))}),l.then(function(){return t})},CoreH5PProvider.prototype.fixDisplayOptions=function(n,t){n[e.DISPLAY_OPTION_DOWNLOAD]=!1;var o=this.getOption(e.DISPLAY_OPTION_EMBED,u.ALWAYS_SHOW);return o!=u.ALWAYS_SHOW&&o!=u.NEVER_SHOW||(n[e.DISPLAY_OPTION_EMBED]=o==u.ALWAYS_SHOW),this.getOption(e.DISPLAY_OPTION_FRAME,!0)?(n[e.DISPLAY_OPTION_EMBED]=this.setDisplayOptionOverrides(e.DISPLAY_OPTION_EMBED,d.EMBED_H5P,t,n[e.DISPLAY_OPTION_EMBED]),0==this.getOption(e.DISPLAY_OPTION_COPYRIGHT,!0)&&(n[e.DISPLAY_OPTION_COPYRIGHT]=!1)):n[e.DISPLAY_OPTION_FRAME]=!1,n[e.DISPLAY_OPTION_COPY]=this.hasPermission(d.COPY_H5P,t),n},CoreH5PProvider.prototype.getAssets=function(n,t,o,r){var i=this;r=r||this.sitesProvider.getCurrentSiteId();var l,s=[],a=[],u=this.getContentId(n);return this.getCoreSettings(n,r).then(function(n){(l=n).core={styles:[],scripts:[]},l.loadedJs=[],l.loadedCss=[];var o=i.getCoreH5PPath(),u=i.urlUtils.removeProtocolAndWWW(o);return e.STYLES.forEach(function(e){l.core.styles.push(u+e),s.push(o+e)}),i.getScripts().forEach(function(e){l.core.scripts.push(e),a.push(e)}),i.filterParameters(t,r)}).then(function(e){return l.contents=l.contents||{},l.contents[u]=l.contents[u]||{},l.contents[u].jsonContent=e,i.getContentDependencyFiles(n,t.folderName,r)}).then(function(e){return l.contents[u].scripts=i.h5pUtils.getAssetsUrls(e.scripts),l.contents[u].styles=i.h5pUtils.getAssetsUrls(e.styles),{settings:l,cssRequires:s,jsRequires:a}})},CoreH5PProvider.prototype.getCachedAssets=function(e,n,t){var o={},r=[],i=this.getCachedAssetsFolderName(),l=this.textUtils.concatenatePaths(i,e+".js"),s=this.textUtils.concatenatePaths(i,e+".css"),a=!1;return r.push(this.fileProvider.getFileSize(l).then(function(e){e>0&&(a=!0,o.scripts=[{path:l,version:""}])}).catch(function(){})),r.push(this.fileProvider.getFileSize(s).then(function(e){e>0&&(a=!0,o.styles=[{path:s,version:""}])}).catch(function(){})),Promise.all(r).then(function(){return a?o:null})},CoreH5PProvider.prototype.getCachedAssetsFolderName=function(){return"cachedassets"},CoreH5PProvider.prototype.getCachedAssetsFolderPath=function(e,n){return this.textUtils.concatenatePaths(this.getContentFolderPath(e,n),this.getCachedAssetsFolderName())},CoreH5PProvider.prototype.getContentId=function(e){return"cid-"+e},CoreH5PProvider.prototype.getContentData=function(e,n){var t=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.getRecord(t.CONTENT_TABLE,{id:e})})},CoreH5PProvider.prototype.getContentDataByUrl=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=n.getDb();return t.getContentFolderNameByUrl(e,n.getId()).then(function(e){return o.getRecord(t.CONTENT_TABLE,{foldername:e})},function(){return o.getRecord(t.CONTENT_TABLE,{fileurl:e})})})},CoreH5PProvider.prototype.getContentFolderPath=function(e,n){return this.textUtils.concatenatePaths(this.getExternalH5PFolderPath(n),"packages/"+e+"/content")},CoreH5PProvider.prototype.getContentIndexFileUrl=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.getContentFolderNameByUrl(e,t).then(function(e){return o.fileProvider.getFile(o.getContentIndexPath(e,t))}).then(function(e){return e.toURL()}).then(function(r){return o.getContentDataByUrl(e,t).then(function(e){var t=o.fixDisplayOptions(o.getDisplayOptionsFromUrlParams(n),e.id);return o.urlUtils.addParamsToUrl(r,t,void 0,!0)})})},CoreH5PProvider.prototype.getContentIndexPath=function(e,n){return this.textUtils.concatenatePaths(this.getContentFolderPath(e,n),"index.html")},CoreH5PProvider.prototype.getContentFolderNameByUrl=function(e,n){var t=this;return this.filepoolProvider.getFilePathByUrl(n,e).then(function(e){var n=t.fileProvider.getFileAndDirectoryFromPath(e);return t.mimeUtils.removeExtension(n.name)})},CoreH5PProvider.prototype.getCoreH5PPath=function(){return this.textUtils.concatenatePaths(this.fileProvider.getWWWPath(),"/h5p/")},CoreH5PProvider.prototype.getCoreSettings=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(e){var n=t.fileProvider.getBasePathInstant(),o={};return o.xAPIResult="",o.contentUserData="",{baseUrl:t.fileProvider.getWWWPath(),url:t.textUtils.concatenatePaths(n,t.getExternalH5PFolderPath(e.getId())),urlLibraries:t.textUtils.concatenatePaths(n,t.getLibrariesFolderPath(e.getId())),postUserStatistics:!1,ajax:o,saveFreq:!1,siteUrl:e.getURL(),l10n:{H5P:t.h5pUtils.getLocalization()},user:[],hubIsEnabled:!1,reportingIsEnabled:!1,crossorigin:null,libraryConfig:null,pluginCacheBuster:"",libraryUrl:t.textUtils.concatenatePaths(t.getCoreH5PPath(),"js")}})},CoreH5PProvider.prototype.getContentDependencyFiles=function(e,n,t){var o=this;return this.loadContentDependencies(e,"preloaded",t).then(function(e){return o.getDependenciesFiles(e,n,o.getExternalH5PFolderPath(t),t)})},CoreH5PProvider.prototype.getDependencyAssets=function(e,n,t,o){if(void 0===o&&(o=""),e[n]&&""!==e[n][0]&&("preloadedCss"!==n||!this.utils.isTrueOrOne(e.dropCss)))for(var r in e[n]){var i=e[n][r];t.push({path:o+"/"+e.path+"/"+("string"!=typeof i?i.path:i).trim(),version:e.version})}},CoreH5PProvider.prototype.getDependenciesFiles=function(e,n,t,o){var r=this;void 0===t&&(t="");var i={scripts:[],styles:[]};if(!Object.keys(e).length)return Promise.resolve(i);var l,s;return this.aggregateAssets?(s=this.h5pUtils.getDependenciesHash(e),l=this.getCachedAssets(s,n,o)):l=Promise.resolve(null),l.then(function(l){if(l)return Object.assign(i,l);for(var a in e){var u=e[a];u.path||(u.path=r.getDependencyPath(u),u.preloadedJs=u.preloadedJs.split(","),u.preloadedCss=u.preloadedCss.split(",")),u.version="?ver="+u.majorVersion+"."+u.minorVersion+"."+u.patchVersion,r.getDependencyAssets(u,"preloadedJs",i.scripts,t),r.getDependencyAssets(u,"preloadedCss",i.styles,t)}return r.aggregateAssets?r.cacheAssets(i,s,n,o).then(function(){return r.saveCachedAssets(s,e,n,o)}).then(function(){return i}):i})},CoreH5PProvider.prototype.getDependencyPath=function(e){return"libraries/"+e.machineName+"-"+e.majorVersion+"."+e.minorVersion},CoreH5PProvider.prototype.getDependencyRoots=function(e,n){var t=this;n=n||this.sitesProvider.getCurrentSiteId();var o={};return this.loadContentDependencies(e,void 0,n).then(function(e){for(var r in e){var i=e[r],l=t.libraryToString(i,!0);o[l]=t.getLibraryFolderPath(i,n,l)}return o})},CoreH5PProvider.prototype.getDisplayOptionsAsObject=function(n){var t={};return t[e.DISPLAY_OPTION_FRAME]=!(n&e.DISABLE_FRAME),t[e.DISPLAY_OPTION_DOWNLOAD]=!(n&e.DISABLE_DOWNLOAD),t[e.DISPLAY_OPTION_EMBED]=!(n&e.DISABLE_EMBED),t[e.DISPLAY_OPTION_COPYRIGHT]=!(n&e.DISABLE_COPYRIGHT),t[e.DISPLAY_OPTION_ABOUT]=!!this.getOption(e.DISPLAY_OPTION_ABOUT,!0),t},CoreH5PProvider.prototype.getDisplayOptionsForView=function(e,n){return this.fixDisplayOptions(this.getDisplayOptionsAsObject(e),n)},CoreH5PProvider.prototype.getDisplayOptionsFromUrlParams=function(n){var t={};return n?(t[e.DISPLAY_OPTION_DOWNLOAD]=this.utils.isTrueOrOne(n[e.DISPLAY_OPTION_DOWNLOAD]),t[e.DISPLAY_OPTION_EMBED]=this.utils.isTrueOrOne(n[e.DISPLAY_OPTION_EMBED]),t[e.DISPLAY_OPTION_COPYRIGHT]=this.utils.isTrueOrOne(n[e.DISPLAY_OPTION_COPYRIGHT]),t[e.DISPLAY_OPTION_FRAME]=t[e.DISPLAY_OPTION_DOWNLOAD]||t[e.DISPLAY_OPTION_EMBED]||t[e.DISPLAY_OPTION_COPYRIGHT],t[e.DISPLAY_OPTION_ABOUT]=!!this.getOption(e.DISPLAY_OPTION_ABOUT,!0),t):t},CoreH5PProvider.prototype.getEmbedCode=function(e,n,t){return t?'<iframe src="'+this.getEmbedUrl(e,n)+'" allowfullscreen="allowfullscreen"></iframe>':""},CoreH5PProvider.prototype.getEmbedUrl=function(e,n){return this.textUtils.concatenatePaths(e,"/h5p/embed.php")+"?url="+n},CoreH5PProvider.prototype.getExternalH5PFolderPath=function(e){return this.textUtils.concatenatePaths(this.fileProvider.getSiteFolder(e),"h5p")},CoreH5PProvider.prototype.getLibraryData=function(e,n,t){var r,i,l,s,a=this,u=this.textUtils.concatenatePaths(n,"library.json"),d=this.textUtils.concatenatePaths(n,"semantics.json"),c=this.textUtils.concatenatePaths(n,"language"),p=this.textUtils.concatenatePaths(n,"icon.svg"),f=[];return f.push(this.fileProvider.readFile(u,o.a.FORMATJSON).then(function(e){r=e})),f.push(this.fileProvider.readFile(d,o.a.FORMATJSON).then(function(e){i=e}).catch(function(){})),f.push(this.fileProvider.getDirectoryContents(c).then(function(e){var n=[];l={},e.forEach(function(e){var t=a.textUtils.concatenatePaths(c,e.name);n.push(a.fileProvider.readFile(t,o.a.FORMATJSON).then(function(n){var t=e.name.split(".");l[t[0]]=n}))})}).catch(function(){})),f.push(this.fileProvider.getFile(p).then(function(){s=!0}).catch(function(){s=!1})),Promise.all(f).then(function(){return r.semantics=i,r.language=l,r.hasIcon=s,r})},CoreH5PProvider.prototype.getLibrary=function(e,n,t,o){var r=this;return this.sitesProvider.getSiteDb(o).then(function(o){var i={machinename:e};return void 0!==n&&(i.majorversion=n),void 0!==t&&(i.minorversion=t),o.getRecords(r.LIBRARIES_TABLE,i)}).then(function(e){return e.length?r.parseLibDBData(e[0]):Promise.reject(null)})},CoreH5PProvider.prototype.getLibraryByData=function(e,n){return this.getLibrary(e.machineName,e.majorVersion,e.minorVersion,n)},CoreH5PProvider.prototype.getLibraryById=function(e,n){var t=this;return this.sitesProvider.getSiteDb(n).then(function(n){return n.getRecord(t.LIBRARIES_TABLE,{id:e}).then(function(e){return t.parseLibDBData(e)})})},CoreH5PProvider.prototype.getLibraryId=function(e,n,t,o){return this.getLibrary(e,n,t,o).then(function(e){return e&&e.id||null}).catch(function(){return null})},CoreH5PProvider.prototype.getLibraryIdByData=function(e,n){return this.getLibraryId(e.machineName,e.majorVersion,e.minorVersion,n)},CoreH5PProvider.prototype.getLibrariesFolderPath=function(e){return this.textUtils.concatenatePaths(this.getExternalH5PFolderPath(e),"libraries")},CoreH5PProvider.prototype.getLibraryFolderPath=function(e,n,t){return t||(t=this.libraryToString(e,!0)),this.textUtils.concatenatePaths(this.getLibrariesFolderPath(n),t)},CoreH5PProvider.prototype.getOption=function(e,n){return void 0===n&&(n=!1),u.CONTROLLED_BY_AUTHOR_DEFAULT_OFF},CoreH5PProvider.prototype.getResizeCode=function(){return'<script src="'+this.getResizerScriptUrl()+'"><\/script>'},CoreH5PProvider.prototype.getResizerScriptUrl=function(){return this.textUtils.concatenatePaths(this.getCoreH5PPath(),"js/h5p-resizer.js")},CoreH5PProvider.prototype.getScripts=function(){var n=this.getCoreH5PPath(),t=[];return e.SCRIPTS.forEach(function(e){t.push(n+e)}),t},CoreH5PProvider.prototype.getTrustedH5PFile=function(e,n,t,o){var i=this;return n=n||{},this.sitesProvider.getSite(o).then(function(o){var l={url:i.treatH5PUrl(e,o.getURL()),frame:n.frame?1:0,export:n.export?1:0,embed:n.embed?1:0,copyright:n.copyright?1:0},s={cacheKey:i.getTrustedH5PFileCacheKey(e),updateFrequency:r.a.FREQUENCY_RARELY};return t&&(s.getFromCache=!1,s.emergencyCache=!1),o.read("core_h5p_get_trusted_h5p_file",l,s).then(function(e){return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0]):e.files&&e.files.length?e.files[0]:Promise.reject(null)})})},CoreH5PProvider.prototype.getTrustedH5PFileCacheKey=function(e){return this.getTrustedH5PFilePrefixCacheKey()+e},CoreH5PProvider.prototype.getTrustedH5PFilePrefixCacheKey=function(){return this.ROOT_CACHE_KEY+"trustedH5PFile:"},CoreH5PProvider.prototype.hasPermission=function(e,n){return null},CoreH5PProvider.prototype.invalidateAllGetTrustedH5PFile=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getTrustedH5PFilePrefixCacheKey())})},CoreH5PProvider.prototype.invalidateAvailableInContexts=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getTrustedH5PFileCacheKey(e))})},CoreH5PProvider.prototype.isOfflineDisabled=function(e){return l(this,void 0,void 0,function(){var n;return s(this,function(t){switch(t.label){case 0:return[4,this.sitesProvider.getSite(e)];case 1:return n=t.sent(),[2,this.isOfflineDisabledInSite(n)]}})})},CoreH5PProvider.prototype.isOfflineDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("NoDelegate_H5POffline")},CoreH5PProvider.prototype.libraryInstalled=function(e,n){var t=[];return t.push(this.deleteContentIndexesForLibrary(e,n)),this.aggregateAssets&&t.push(this.deleteCachedAssets(e,n)),this.utils.allPromises(t)},CoreH5PProvider.prototype.libraryToString=function(e,n){return(e.machineName?e.machineName:e.name)+(n?"-":" ")+e.majorVersion+"."+e.minorVersion},CoreH5PProvider.prototype.loadAddons=function(e){var n=this;return this.sitesProvider.getSiteDb(e).then(function(e){return e.execute("SELECT l1.id AS libraryId, l1.machinename AS machineName, l1.majorversion AS majorVersion, l1.minorversion AS minorVersion, l1.patchversion AS patchVersion, l1.addto AS addTo, l1.preloadedjs AS preloadedJs, l1.preloadedcss AS preloadedCss FROM "+n.LIBRARIES_TABLE+" l1 JOIN "+n.LIBRARIES_TABLE+" l2 ON l1.machinename = l2.machinename AND (l1.majorversion < l2.majorversion OR (l1.majorversion = l2.majorversion AND l1.minorversion < l2.minorversion)) WHERE l1.addto IS NOT NULL AND l2.machinename IS NULL").then(function(e){for(var t=[],o=0;o<e.rows.length;o++)t.push(n.parseLibAddonData(e.rows.item(o)));return t})})},CoreH5PProvider.prototype.loadContentData=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();return(e?this.getContentData(e,t):n?this.getContentDataByUrl(n,t):Promise.reject(null)).then(function(e){return o.getLibraryById(e.mainlibraryid,t).then(function(n){return new i(o,o.h5pUtils,o.textUtils,o.utils,o.translate,t).validateMetadata({}).then(function(t){return{id:e.id,params:e.jsoncontent,embedType:"iframe",disable:null,folderName:e.foldername,title:n.title,slug:o.h5pUtils.slugify(n.title)+"-"+e.id,filtered:e.filtered,libraryMajorVersion:n.majorversion,libraryMinorVersion:n.minorversion,metadata:t,library:{id:n.id,name:n.machinename,majorVersion:n.majorversion,minorVersion:n.minorversion,embedTypes:n.embedtypes,fullscreen:n.fullscreen}}})})})},CoreH5PProvider.prototype.loadContentDependencies=function(e,n,t){var o=this;return this.sitesProvider.getSiteDb(t).then(function(t){var r="SELECT hl.id AS libraryId, hl.machinename AS machineName, hl.majorversion AS majorVersion, hl.minorversion AS minorVersion, hl.patchversion AS patchVersion, hl.preloadedcss AS preloadedCss, hl.preloadedjs AS preloadedJs, hcl.dropcss AS dropCss, hcl.dependencytype as dependencyType FROM "+o.CONTENTS_LIBRARIES_TABLE+" hcl JOIN "+o.LIBRARIES_TABLE+" hl ON hcl.libraryid = hl.id WHERE hcl.h5pid = ?",i=[];return i.push(e),n&&(r+=" AND hcl.dependencytype = ?",i.push(n)),r+=" ORDER BY hcl.weight",t.execute(r,i).then(function(e){for(var n={},t=0;t<e.rows.length;t++){var o=e.rows.item(t);n[o.machineName]=o}return n})})},CoreH5PProvider.prototype.loadLibrary=function(e,n,t,o){var r=this;return this.getLibrary(e,n,t,o).then(function(e){var n={libraryId:e.id,title:e.title,machineName:e.machinename,majorVersion:e.majorversion,minorVersion:e.minorversion,patchVersion:e.patchversion,runnable:e.runnable,fullscreen:e.fullscreen,embedTypes:e.embedtypes,preloadedJs:e.preloadedjs,preloadedCss:e.preloadedcss,dropLibraryCss:e.droplibrarycss,semantics:e.semantics,preloadedDependencies:[],dynamicDependencies:[],editorDependencies:[]},t="SELECT hl.id, hl.machinename, hl.majorversion, hl.minorversion, hll.dependencytype FROM "+r.LIBRARY_DEPENDENCIES_TABLE+" hll JOIN "+r.LIBRARIES_TABLE+" hl ON hll.requiredlibraryid = hl.id WHERE hll.libraryid = ? ORDER BY hl.id ASC",i=[e.id];return r.sitesProvider.getSiteDb(o).then(function(e){return e.execute(t,i).then(function(e){for(var t=0;t<e.rows.length;t++){var o=e.rows.item(t);n[o.dependencytype+"Dependencies"].push({machineName:o.machinename,majorVersion:o.majorversion,minorVersion:o.minorversion})}return n})})})},CoreH5PProvider.prototype.parseLibAddonData=function(e){return e.addto=this.textUtils.parseJSON(e.addto,null),e},CoreH5PProvider.prototype.parseLibDBData=function(e){return e.semantics=this.textUtils.parseJSON(e.semantics,null),e.addto=this.textUtils.parseJSON(e.addto,null),e},CoreH5PProvider.prototype.processH5PFiles=function(e,n){var t,r,i=this,l=[],s={},a=this.textUtils.concatenatePaths(e,"h5p.json");l.push(this.fileProvider.readFile(a,o.a.FORMATJSON).then(function(e){r=e}));var u=this.textUtils.concatenatePaths(e,"content/content.json");return l.push(this.fileProvider.readFile(u,o.a.FORMATJSON).then(function(e){t=e})),n.forEach(function(n){if("."!=n.name[0]&&"_"!=n.name[0]&&"content"!=n.name&&!n.isFile){var t=i.textUtils.concatenatePaths(e,n.name);l.push(i.getLibraryData(n,t,e).then(function(e){e.uploadDirectory=t,s[i.libraryToString(e)]=e}))}}),Promise.all(l).then(function(){return{librariesJsonData:s,mainJsonData:r,contentJsonData:t}})},CoreH5PProvider.prototype.saveCachedAssets=function(e,n,t,o){var r=this;return this.sitesProvider.getSiteDb(o).then(function(e){var o=[];for(var i in n){o.push(e.insertRecord(r.LIBRARIES_CACHEDASSETS_TABLE,{hash:i,libraryid:n[i].libraryId,foldername:t}))}return Promise.all(o)})},CoreH5PProvider.prototype.saveContentData=function(e,n,t,o){var r=this;return this.sitesProvider.getSiteDb(o).then(function(o){var i={jsoncontent:e.params,mainlibraryid:e.library.libraryId,timemodified:Date.now(),filtered:null,foldername:n,fileurl:t};return void 0!==e.id?i.id=e.id:i.timecreated=i.timemodified,o.insertRecord(r.CONTENT_TABLE,i).then(function(){if(!i.id)return o.getRecord(r.CONTENT_TABLE,i).then(function(n){e.id=n.id})})}).then(function(){return e.id})},CoreH5PProvider.prototype.saveContentInFS=function(e,n,t){var o=this,r=this.getContentFolderPath(n,t);return this.fileProvider.removeDir(r).catch(function(){}).then(function(){return o.fileProvider.moveDir(e,r)})},CoreH5PProvider.prototype.saveLibraries=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=[];return this.fileProvider.createDir(this.getLibrariesFolderPath(t)).then(function(){var n=[],r=function(r){var i=e[r];n.push(o.getLibraryByData(i).catch(function(){}).then(function(e){if(!(e&&(i.libraryId=e.id,i.patchVersion<=e.patchversion)))return i.saveDependencies=!0,i.metadataSettings=i.metadataSettings?o.h5pUtils.boolifyAndEncodeMetadataSettings(i.metadataSettings):null,o.saveLibraryData(i,t).then(function(){return o.saveLibraryInFS(i,t).catch(function(e){return o.deleteLibraryData(i.libraryId,t).catch(function(){}).then(function(){return Promise.reject(e)})})}).then(function(){if(void 0!==i.libraryId)return o.libraryInstalled(i.libraryId,t)});i.saveDependencies=!1}))};for(var i in e)r(i);return Promise.all(n)}).then(function(){var n=[],t=function(t){var i=e[t];if(!i.saveDependencies)return"continue";r.push(i.libraryId),n.push(o.deleteLibraryDependencies(i.libraryId).then(function(){var e=[];return void 0!==i.preloadedDependencies&&e.push(o.saveLibraryDependencies(i.libraryId,i.preloadedDependencies,"preloaded")),void 0!==i.dynamicDependencies&&e.push(o.saveLibraryDependencies(i.libraryId,i.dynamicDependencies,"dynamic")),void 0!==i.editorDependencies&&e.push(o.saveLibraryDependencies(i.libraryId,i.editorDependencies,"editor")),Promise.all(e)}))};for(var i in e)t(i);return Promise.all(n)}).then(function(){if(r.length)return o.clearFilteredParameters(r,t)})},CoreH5PProvider.prototype.saveLibraryInFS=function(e,n){var t=this,o=this.getLibraryFolderPath(e,n);return this.fileProvider.removeDir(o).catch(function(){}).then(function(){return t.fileProvider.moveDir(e.uploadDirectory,o,!0)})},CoreH5PProvider.prototype.saveLibraryData=function(e,n){var t=this,o=this.h5pUtils.libraryParameterValuesToCsv(e,"preloadedJs","path"),r=this.h5pUtils.libraryParameterValuesToCsv(e,"preloadedCss","path"),i=this.h5pUtils.libraryParameterValuesToCsv(e,"dropLibraryCss","machineName");void 0===e.semantics&&(e.semantics=""),void 0===e.fullscreen&&(e.fullscreen=0);var l="";return void 0!==e.embedTypes&&(l=e.embedTypes.join(", ")),this.sitesProvider.getSite(n).then(function(n){var s=n.getDb(),a={title:e.title,machinename:e.machineName,majorversion:e.majorVersion,minorversion:e.minorVersion,patchversion:e.patchVersion,runnable:e.runnable,fullscreen:e.fullscreen,embedtypes:l,preloadedjs:o,preloadedcss:r,droplibrarycss:i,semantics:void 0!==e.semantics?JSON.stringify(e.semantics):null,addto:void 0!==e.addTo?JSON.stringify(e.addTo):null};return e.libraryId&&(a.id=e.libraryId),s.insertRecord(t.LIBRARIES_TABLE,a).then(function(){return a.id?t.deleteLibraryDependencies(a.id,n.getId()):s.getRecord(t.LIBRARIES_TABLE,a).then(function(n){e.libraryId=n.id})})})},CoreH5PProvider.prototype.saveLibraryDependencies=function(e,n,t,o){var r=this;return this.sitesProvider.getSiteDb(o).then(function(i){var l=[];return n.forEach(function(n){l.push(r.getLibraryIdByData(n,o).then(function(n){return i.insertRecord(r.LIBRARY_DEPENDENCIES_TABLE,{libraryid:e,requiredlibraryid:n,dependencytype:t})}))}),Promise.all(l)})},CoreH5PProvider.prototype.saveLibraryUsage=function(e,n,t){var o=this;return this.sitesProvider.getSiteDb(t).then(function(t){var r={},i=[];for(var l in n){if((s=n[l]).library.dropLibraryCss){s.library.dropLibraryCss.split(", ").forEach(function(e){r[e]=e})}}for(var l in n){var s;i.push(t.insertRecord(o.CONTENTS_LIBRARIES_TABLE,{h5pid:e,libraryId:(s=n[l]).library.libraryId,dependencytype:s.type,dropcss:r[s.library.machineName]?1:0,weight:s.weight}))}return Promise.all(i)})},CoreH5PProvider.prototype.setDisplayOptionOverrides=function(e,n,t,o){var r=this.getOption(e,u.ALWAYS_SHOW);return r==u.NEVER_SHOW?o=!1:r==u.ALWAYS_SHOW?o=!0:r==u.CONTROLLED_BY_PERMISSIONS&&(o=this.hasPermission(n,t)),o},CoreH5PProvider.prototype.treatH5PUrl=function(e,n){return 0===e.indexOf(this.textUtils.concatenatePaths(n,"/webservice/pluginfile.php"))&&(e=e.replace("/webservice/pluginfile","/pluginfile")),this.urlUtils.removeUrlParams(e)},CoreH5PProvider.prototype.updateContentFields=function(e,n,t){var o=this;return this.sitesProvider.getSiteDb(t).then(function(t){var r=Object.assign(n);return delete r.slug,t.updateRecords(o.CONTENT_TABLE,r,{id:e})})},CoreH5PProvider.STYLES=["styles/h5p.css","styles/h5p-confirmation-dialog.css","styles/h5p-core-button.css"],CoreH5PProvider.SCRIPTS=["js/jquery.js","js/h5p.js","js/h5p-event-dispatcher.js","js/h5p-x-api-event.js","js/h5p-x-api.js","js/h5p-content-type.js","js/h5p-confirmation-dialog.js","js/h5p-action-bar.js","js/request-queue.js"],CoreH5PProvider.ADMIN_SCRIPTS=["js/jquery.js","js/h5p-utils.js"],CoreH5PProvider.DISABLE_NONE=0,CoreH5PProvider.DISABLE_FRAME=1,CoreH5PProvider.DISABLE_DOWNLOAD=2,CoreH5PProvider.DISABLE_EMBED=4,CoreH5PProvider.DISABLE_COPYRIGHT=8,CoreH5PProvider.DISABLE_ABOUT=16,CoreH5PProvider.DISPLAY_OPTION_FRAME="frame",CoreH5PProvider.DISPLAY_OPTION_DOWNLOAD="export",CoreH5PProvider.DISPLAY_OPTION_EMBED="embed",CoreH5PProvider.DISPLAY_OPTION_COPYRIGHT="copyright",CoreH5PProvider.DISPLAY_OPTION_ABOUT="icon",CoreH5PProvider.DISPLAY_OPTION_COPY="copy",CoreH5PProvider;var e}(),u=function(){function CoreH5PDisplayOptionBehaviour(){}return CoreH5PDisplayOptionBehaviour.NEVER_SHOW=0,CoreH5PDisplayOptionBehaviour.CONTROLLED_BY_AUTHOR_DEFAULT_ON=1,CoreH5PDisplayOptionBehaviour.CONTROLLED_BY_AUTHOR_DEFAULT_OFF=2,CoreH5PDisplayOptionBehaviour.ALWAYS_SHOW=3,CoreH5PDisplayOptionBehaviour.CONTROLLED_BY_PERMISSIONS=4,CoreH5PDisplayOptionBehaviour}(),d=function(){function CoreH5PPermission(){}return CoreH5PPermission.DOWNLOAD_H5P=0,CoreH5PPermission.EMBED_H5P=1,CoreH5PPermission.CREATE_RESTRICTED=2,CoreH5PPermission.UPDATE_LIBRARIES=3,CoreH5PPermission.INSTALL_RECOMMENDED=4,CoreH5PPermission.COPY_H5P=4,CoreH5PPermission}()},,,function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(149)),i=t(205),l=(t(507),t(258),function(e){function AddonModGlossarySyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f,h,m,_){var g=e.call(this,"AddonModGlossarySyncProvider",i,l,t,s,a,n,u)||this;return g.eventsProvider=r,g.uploaderProvider=d,g.utils=c,g.glossaryProvider=p,g.glossaryHelper=f,g.glossaryOffline=h,g.logHelper=m,g.ratingSync=_,g.componentTranslate=o.translateModuleName("glossary"),g}return Object(o.__extends)(AddonModGlossarySyncProvider,e),n=AddonModGlossarySyncProvider,AddonModGlossarySyncProvider.prototype.syncAllGlossaries=function(e,n){return this.syncOnSites("all glossaries",this.syncAllGlossariesFunc.bind(this),[n],e)},AddonModGlossarySyncProvider.prototype.syncAllGlossariesFunc=function(e,t){var o=this;e=e||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.glossaryOffline.getAllNewEntries(e).then(function(r){var i={},l=function(l){var s=r[l];if(void 0!==i[s.glossaryid])return"continue";i[s.glossaryid]=t?o.syncGlossaryEntries(s.glossaryid,s.userid,e):o.syncGlossaryEntriesIfNeeded(s.glossaryid,s.userid,e),i[s.glossaryid].then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{glossaryId:s.glossaryid,userId:s.userid,warnings:t.warnings},e)})};for(var s in r)l(s);return Promise.all(o.utils.objectToArray(i))})),r.push(this.syncRatings(void 0,t,e)),Promise.all(r)},AddonModGlossarySyncProvider.prototype.syncGlossaryEntriesIfNeeded=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=this.getGlossarySyncId(e,n);return this.isSyncNeeded(r,t).then(function(r){if(r)return o.syncGlossaryEntries(e,n,t)})},AddonModGlossarySyncProvider.prototype.syncGlossaryEntries=function(e,n,t){var o=this;n=n||this.sitesProvider.getCurrentSiteUserId(),t=t||this.sitesProvider.getCurrentSiteId();var r=this.getGlossarySyncId(e,n);if(this.isSyncing(r,t))return this.getOngoingSync(r,t);if(this.syncProvider.isBlocked(i.a.COMPONENT,r,t))return this.logger.debug("Cannot sync glossary "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.componentTranslate}));this.logger.debug("Try to sync glossary "+e+" for user "+n);var l,s={warnings:[],updated:!1},a=this.logHelper.syncIfNeeded(i.a.COMPONENT,e,t).catch(function(){}).then(function(){return o.glossaryOffline.getGlossaryNewEntries(e,t,n).catch(function(){return[]})}).then(function(n){if(n.length){if(!o.appProvider.isOnline())return Promise.reject(null);var r=[];return n.forEach(function(n){var i;l=n.courseid,i=o.uploadAttachments(e,n,t).then(function(r){return o.glossaryProvider.addEntryOnline(e,n.concept,n.definition,n.options,r,t)}),r.push(i.then(function(){return s.updated=!0,o.deleteAddEntry(e,n.concept,n.timecreated,t)}).catch(function(r){return o.utils.isWebServiceError(r)?(s.updated=!0,o.deleteAddEntry(e,n.concept,n.timecreated,t).then(function(){s.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:n.concept,error:o.textUtils.getErrorMessageFromError(r)}))})):Promise.reject(r)}))}),Promise.all(r)}}).then(function(){if(s.updated&&l)return o.glossaryProvider.getGlossaryById(l,e).then(function(e){return o.glossaryProvider.invalidateGlossaryEntries(e,!0)}).catch(function(){})}).then(function(){return o.setSyncTime(r,t).catch(function(){})}).then(function(){return s});return this.addOngoingSync(r,a,t)},AddonModGlossarySyncProvider.prototype.syncRatings=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.ratingSync.syncRatings("mod_glossary","entry","module",e,0,n,t).then(function(e){var n=!1,r=[],i=[];return e.forEach(function(e){e.updated.length&&(n=!0,e.updated.forEach(function(e){i.push(o.glossaryProvider.invalidateEntry(e,t))})),e.warnings.length&&i.push(o.glossaryProvider.getGlossary(e.itemSet.courseId,e.itemSet.instanceId,t).then(function(n){e.warnings.forEach(function(e){r.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.componentTranslate,name:n.name,error:e}))})}))}),o.utils.allPromises(i).then(function(){return{updated:n,warnings:r}})})},AddonModGlossarySyncProvider.prototype.deleteAddEntry=function(e,n,t,o){var r=[];return r.push(this.glossaryOffline.deleteNewEntry(e,n,t,o)),r.push(this.glossaryHelper.deleteStoredFiles(e,n,t,o).catch(function(){})),Promise.all(r)},AddonModGlossarySyncProvider.prototype.uploadAttachments=function(e,n,t){var o=this;if(n.attachments){var r=n.attachments.online||[];return(n.attachments.offline?this.glossaryHelper.getStoredFiles(e,n.concept,n.timecreated,t).then(function(e){r=r.concat(e)}).catch(function(){}):Promise.resolve(0)).then(function(){return o.uploaderProvider.uploadOrReuploadFiles(r,i.a.COMPONENT,e,t)})}return Promise.resolve(0)},AddonModGlossarySyncProvider.prototype.getGlossarySyncId=function(e,n){return n=n||this.sitesProvider.getCurrentSiteUserId(),"glossary#"+e+"#"+n},AddonModGlossarySyncProvider.AUTO_SYNCED="addon_mod_glossary_autom_synced",AddonModGlossarySyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(700),r=function(){function AddonModDataFieldTextHandler(e){this.translate=e,this.name="AddonModDataFieldTextHandler",this.type="text"}return AddonModDataFieldTextHandler.prototype.getComponent=function(e,n){return o.a},AddonModDataFieldTextHandler.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},AddonModDataFieldTextHandler.prototype.getFieldEditData=function(e,n,t){return[{fieldid:e.id,value:n["f_"+e.id]||""}]},AddonModDataFieldTextHandler.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",(n["f_"+e.id]||"")!=t},AddonModDataFieldTextHandler.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},AddonModDataFieldTextHandler.prototype.overrideData=function(e,n,t){return e.content=n[""]||"",e},AddonModDataFieldTextHandler.prototype.isEnabled=function(){return!0},AddonModDataFieldTextHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonQtypeMultichoiceComponent(n,t){return e.call(this,n,"AddonQtypeMultichoiceComponent",t)||this}return Object(o.__extends)(AddonQtypeMultichoiceComponent,e),AddonQtypeMultichoiceComponent.prototype.ngOnInit=function(){this.initMultichoiceComponent()},AddonQtypeMultichoiceComponent.prototype.clear=function(){this.question.singleChoiceModel=null},AddonQtypeMultichoiceComponent}(t(198).a)},,,,,,,,function(e,n,t){"use strict";function View_CoreInfiniteLoadingComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.loadMore()&&o}return o},r.b,r.a)),o._15(1,1097728,null,0,i.a,[[8,""],l.a,o.p,o.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),o._40(2,0,["\n            ","\n        "])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.loadmore")))})}function View_CoreInfiniteLoadingComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.loadMore()&&o}return o},r.b,r.a)),o._15(1,1097728,null,0,i.a,[[8,""],l.a,o.p,o.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),o._40(2,0,["\n            ","\n        "])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.tryagain")))})}function View_CoreInfiniteLoadingComponent_2(e){return o._42(0,[(e()(),o._16(0,0,[[3,0],["bottombutton",1]],null,7,"div",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInfiniteLoadingComponent_3)),o._15(3,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInfiniteLoadingComponent_4)),o._15(6,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,!t.error);e(n,6,0,t.error)},null)}function View_CoreInfiniteLoadingComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInfiniteLoadingComponent_2)),o._15(3,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.enabled||t.error)},null)}function View_CoreInfiniteLoadingComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.loadMore()&&o}return o},r.b,r.a)),o._15(1,1097728,null,0,i.a,[[8,""],l.a,o.p,o.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),o._40(2,0,["\n            ","\n        "])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.loadmore")))})}function View_CoreInfiniteLoadingComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.loadMore()&&o}return o},r.b,r.a)),o._15(1,1097728,null,0,i.a,[[8,""],l.a,o.p,o.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),o._40(2,0,["\n            ","\n        "])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.tryagain")))})}function View_CoreInfiniteLoadingComponent_6(e){return o._42(0,[(e()(),o._16(0,0,[[1,0],["topbutton",1]],null,7,"div",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInfiniteLoadingComponent_7)),o._15(3,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInfiniteLoadingComponent_8)),o._15(6,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,!t.error);e(n,6,0,t.error)},null)}function View_CoreInfiniteLoadingComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreInfiniteLoadingComponent_6)),o._15(3,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.enabled||t.error)},null)}function View_CoreInfiniteLoadingComponent_9(e){return o._42(0,[(e()(),o._16(0,0,[[4,0],["spinnercontainer",1]],null,4,"div",[["padding",""],["text-center",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(2,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,d.b,d.a)),o._15(3,114688,null,0,c.a,[l.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,3,0)},function(e,n){e(n,2,0,o._29(n,3)._paused)})}function View_CoreInfiniteLoadingComponent_0(e){return o._42(0,[o._37(671088640,1,{topButton:0}),o._37(402653184,2,{infiniteEl:0}),o._37(671088640,3,{bottomButton:0}),o._37(671088640,4,{spinnerContainer:0}),(e()(),o._11(16777216,null,null,1,null,View_CoreInfiniteLoadingComponent_1)),o._15(5,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._16(7,0,[[2,0],["infinitescroll",1]],null,5,"ion-infinite-scroll",[],null,[[null,"ionInfinite"]],function(e,n,t){var o=!0;if("ionInfinite"===n){o=!1!==e.component.loadMore(t)&&o}return o},null,null)),o._15(8,1196032,null,0,p.a,[f.a,o.D,o.p,h.a],{enabled:[0,"enabled"],position:[1,"position"]},{ionInfinite:"ionInfinite"}),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(10,0,null,null,1,"ion-infinite-scroll-content",[],[[1,"state",0]],null,null,m.b,m.a)),o._15(11,114688,null,0,_.a,[p.a,l.a],null,null),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreInfiniteLoadingComponent_5)),o._15(15,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreInfiniteLoadingComponent_9)),o._15(18,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,5,0,!t.loadingMore&&"top"!=t.position);e(n,8,0,t.enabled&&!t.error&&!t.loadingMore,t.position),e(n,11,0);e(n,15,0,!t.loadingMore&&"top"==t.position);e(n,18,0,t.loadingMore)},function(e,n){e(n,10,0,o._29(n,11).inf.state)})}t.d(n,"a",function(){return g}),n.b=View_CoreInfiniteLoadingComponent_0;var o=t(1),r=t(47),i=t(44),l=t(9),s=t(26),a=t(19),u=t(8),d=t(122),c=t(102),p=t(344),f=t(30),h=t(35),m=t(1909),_=t(419),g=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(322);var o=function(){return function CoreCommentsComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(166),r=function(){function AddonCompetencyHelperProvider(e,n,t){this.sitesProvider=e,this.userProvider=n,this.translate=t}return AddonCompetencyHelperProvider.prototype.getProfile=function(e){return e&&e!=this.sitesProvider.getCurrentSiteUserId()?this.userProvider.getProfile(e,null,!0).then(function(e){return e.profileimageurl=e.profileimageurl||!0,e}):Promise.resolve(!1)},AddonCompetencyHelperProvider.prototype.getCompetencyStatusName=function(e){var n;switch(e){case o.a.REVIEW_STATUS_IDLE:n="idle";break;case o.a.REVIEW_STATUS_IN_REVIEW:n="inreview";break;case o.a.REVIEW_STATUS_WAITING_FOR_REVIEW:n="waitingforreview";break;default:return String(e)}return this.translate.instant("addon.competency.usercompetencystatus_"+n)},AddonCompetencyHelperProvider.prototype.getPlanStatusName=function(e){var n;switch(e){case o.a.STATUS_DRAFT:n="draft";break;case o.a.STATUS_ACTIVE:n="active";break;case o.a.STATUS_COMPLETE:n="complete";break;case o.a.STATUS_WAITING_FOR_REVIEW:n="waitingforreview";break;case o.a.STATUS_IN_REVIEW:n="inreview";break;default:return String(e)}return this.translate.instant("addon.competency.planstatus"+n)},AddonCompetencyHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),function(){function CoreAutoFocusDirective(e,n,t,o){this.domUtils=n,this.utils=t,this.navCtrl=o,this.coreAutoFocus=!0,this.element=e.nativeElement||e}return CoreAutoFocusDirective.prototype.ngOnInit=function(){var e=this;if(this.navCtrl.isTransitioning())var n=this.navCtrl.viewDidEnter.subscribe(function(){e.autoFocus(),n.unsubscribe()});else this.autoFocus()},CoreAutoFocusDirective.prototype.autoFocus=function(){var e=this;this.utils.isTrueOrOne(this.coreAutoFocus)&&setTimeout(function(){var n=e.element;"ION-INPUT"==e.element.tagName?n=e.element.querySelector("input")||n:"ION-TEXTAREA"==e.element.tagName&&(n=e.element.querySelector("textarea")||n),e.domUtils.focusElement(n)},200)},CoreAutoFocusDirective=Object(o.__decorate)([Object(o.__param)(3,Object(r.E)())],CoreAutoFocusDirective)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(15),r=(t.n(o),function(){function CoreDateDayOrTimePipe(e,n,t){this.translate=n,this.timeUtils=t,this.logger=e.getInstance("CoreDateDayOrTimePipe")}return CoreDateDayOrTimePipe.prototype.transform=function(e){if("string"==typeof e){var n=parseInt(e,10);if(isNaN(n))return this.logger.error("Invalid value received",e),e;e=n}return o(1e3*e).calendar(null,{sameDay:this.timeUtils.convertPHPToMoment(this.translate.instant("core.strftimetime")),lastDay:this.translate.instant("core.dflastweekdate"),lastWeek:this.translate.instant("core.dflastweekdate"),sameElse:this.timeUtils.convertPHPToMoment(this.translate.instant("core.strftimedatefullshort"))})},CoreDateDayOrTimePipe}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){function CoreShowPasswordComponent(e,n,t,o){this.utils=n,this.domUtils=t,this.platform=o,this.selector="",this.element=e.nativeElement}return CoreShowPasswordComponent.prototype.ngOnInit=function(){this.shown=this.utils.isTrueOrOne(this.initialShown),this.selector='input[name="'+this.name+'"]',this.setData()},CoreShowPasswordComponent.prototype.ngAfterViewInit=function(){this.searchInput()},CoreShowPasswordComponent.prototype.searchInput=function(){this.input=this.element.querySelector(this.selector),this.input&&(this.input.type=this.shown?"text":"password",this.input.getAttribute("autocorrect")||this.input.setAttribute("autocorrect","off"),this.input.getAttribute("autocapitalize")||this.input.setAttribute("autocapitalize","none"))},CoreShowPasswordComponent.prototype.setData=function(){this.label=this.shown?"core.hide":"core.show",this.iconName=this.shown?"eye-off":"eye",this.input&&(this.input.type=this.shown?"text":"password")},CoreShowPasswordComponent.prototype.toggle=function(e){var n=this;e.preventDefault(),e.stopPropagation();var t=document.activeElement===this.input;this.shown=!this.shown,this.setData(),t&&this.platform.is("android")&&setTimeout(function(){n.domUtils.focusElement(n.input)},400)},CoreShowPasswordComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(1),r=(t(4),t(283),this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})}),i=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},l=function(){function CoreSearchBoxComponent(e,n,t,r,i,l){this.translate=e,this.utils=n,this.searchHistoryProvider=t,this.eventsProvider=r,this.sitesProvider=i,this.domUtils=l,this.autocorrect="on",this.spellcheck=!0,this.lengthCheck=3,this.showClear=!0,this.disabled=!1,this.searched="",this.searchText="",this.history=[],this.historyShown=!1,this.onSubmit=new o.r,this.onClear=new o.r}return CoreSearchBoxComponent.prototype.ngOnInit=function(){this.searchLabel=this.searchLabel||this.translate.instant("core.search"),this.placeholder=this.placeholder||this.translate.instant("core.search"),this.spellcheck=this.utils.isTrueOrOne(this.spellcheck),this.showClear=this.utils.isTrueOrOne(this.showClear),this.searchText=this.initialSearch||"",this.searchArea&&this.loadHistory()},CoreSearchBoxComponent.prototype.submitForm=function(e){e&&e.preventDefault(),e&&e.stopPropagation(),this.searchText.length<this.lengthCheck||(this.searchArea&&this.saveSearchToHistory(this.searchText),this.domUtils.triggerFormSubmittedEvent(this.formElement,!1,this.sitesProvider.getCurrentSiteId()),this.searched=this.searchText,this.onSubmit.emit(this.searchText))},CoreSearchBoxComponent.prototype.saveSearchToHistory=function(e){return r(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return n.trys.push([0,,2,3]),[4,this.searchHistoryProvider.insertOrUpdateSearchText(this.searchArea,e.toLowerCase())];case 1:return n.sent(),[3,3];case 2:return this.loadHistory(),[7];case 3:return[2]}})})},CoreSearchBoxComponent.prototype.loadHistory=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return e=this,[4,this.searchHistoryProvider.getSearchHistory(this.searchArea)];case 1:return e.history=n.sent(),[2]}})})},CoreSearchBoxComponent.prototype.historyClicked=function(e,n){this.searched!=n&&(this.searchText=n,this.submitForm(e))},CoreSearchBoxComponent.prototype.clearForm=function(){this.searched="",this.searchText="",this.onClear.emit()},CoreSearchBoxComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonMessagesOfflineProvider(n,t,o,r){this.sitesProvider=t,this.appProvider=o,this.textUtils=r,this.siteSchema={name:"AddonMessagesOfflineProvider",version:1,tables:[{name:e.MESSAGES_TABLE,columns:[{name:"touserid",type:"INTEGER"},{name:"useridfrom",type:"INTEGER"},{name:"smallmessage",type:"TEXT"},{name:"timecreated",type:"INTEGER"},{name:"deviceoffline",type:"INTEGER"}],primaryKeys:["touserid","smallmessage","timecreated"]},{name:e.CONVERSATION_MESSAGES_TABLE,columns:[{name:"conversationid",type:"INTEGER"},{name:"text",type:"TEXT"},{name:"timecreated",type:"INTEGER"},{name:"deviceoffline",type:"INTEGER"},{name:"conversation",type:"TEXT"}],primaryKeys:["conversationid","text","timecreated"]}]},this.logger=n.getInstance("AddonMessagesOfflineProvider"),this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonMessagesOfflineProvider,AddonMessagesOfflineProvider.prototype.deleteConversationMessage=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(e.CONVERSATION_MESSAGES_TABLE,{conversationid:n,text:t,timecreated:o})})},AddonMessagesOfflineProvider.prototype.deleteConversationMessages=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(e.CONVERSATION_MESSAGES_TABLE,{conversationid:n})})},AddonMessagesOfflineProvider.prototype.deleteMessage=function(n,t,o,r){return this.sitesProvider.getSite(r).then(function(r){return r.getDb().deleteRecords(e.MESSAGES_TABLE,{touserid:n,smallmessage:t,timecreated:o})})},AddonMessagesOfflineProvider.prototype.getAllDeviceOfflineMessages=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=[];return o.push(n.getDb().getRecords(e.MESSAGES_TABLE,{deviceoffline:1})),o.push(n.getDb().getRecords(e.CONVERSATION_MESSAGES_TABLE,{deviceoffline:1})),Promise.all(o).then(function(e){return e[1]=t.parseConversationMessages(e[1]),e[0].concat(e[1])})})},AddonMessagesOfflineProvider.prototype.getAllMessages=function(n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var o=[];return o.push(n.getDb().getAllRecords(e.MESSAGES_TABLE)),o.push(n.getDb().getAllRecords(e.CONVERSATION_MESSAGES_TABLE)),Promise.all(o).then(function(e){return e[1]=t.parseConversationMessages(e[1]),e[0].concat(e[1])})})},AddonMessagesOfflineProvider.prototype.getConversationMessages=function(n,t){var o=this;return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.CONVERSATION_MESSAGES_TABLE,{conversationid:n}).then(function(e){return o.parseConversationMessages(e)})})},AddonMessagesOfflineProvider.prototype.getMessages=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecords(e.MESSAGES_TABLE,{touserid:n})})},AddonMessagesOfflineProvider.prototype.hasConversationMessages=function(e,n){return this.getConversationMessages(e,n).then(function(e){return!!e.length})},AddonMessagesOfflineProvider.prototype.hasMessages=function(e,n){return this.getMessages(e,n).then(function(e){return!!e.length})},AddonMessagesOfflineProvider.prototype.parseConversationMessages=function(e){var n=this;return e?(e.forEach(function(e){e.conversation&&(e.conversation=n.textUtils.parseJSON(e.conversation,{}))}),e):[]},AddonMessagesOfflineProvider.prototype.saveConversationMessage=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={conversationid:n.id,text:t,timecreated:Date.now(),deviceoffline:r.appProvider.isOnline()?0:1,conversation:JSON.stringify({name:n.name||"",subname:n.subname||"",imageurl:n.imageurl||"",isfavourite:n.isfavourite?1:0,type:n.type})};return o.getDb().insertRecord(e.CONVERSATION_MESSAGES_TABLE,i).then(function(){return i})})},AddonMessagesOfflineProvider.prototype.saveMessage=function(n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(o){var i={touserid:n,useridfrom:o.getUserId(),smallmessage:t,timecreated:(new Date).getTime(),deviceoffline:r.appProvider.isOnline()?0:1};return o.getDb().insertRecord(e.MESSAGES_TABLE,i).then(function(){return i})})},AddonMessagesOfflineProvider.prototype.setMessagesDeviceOffline=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){var r=o.getDb(),i=[],l={deviceoffline:t?1:0};return n.forEach(function(n){i.push(n.conversationid?r.updateRecords(e.CONVERSATION_MESSAGES_TABLE,l,{conversationid:n.conversationid,text:n.text,timecreated:n.timecreated}):r.updateRecords(e.MESSAGES_TABLE,l,{touserid:n.touserid,smallmessage:n.smallmessage,timecreated:n.timecreated}))}),Promise.all(i)})},AddonMessagesOfflineProvider.MESSAGES_TABLE="addon_messages_offline_messages",AddonMessagesOfflineProvider.CONVERSATION_MESSAGES_TABLE="addon_messages_offline_conversation_messages",AddonMessagesOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=function(){function CoreAutoRowsDirective(e){this.element=e,this.height=0,this.onResize=new o.r}return CoreAutoRowsDirective.prototype.onInput=function(){this.resize()},CoreAutoRowsDirective.prototype.onChange=function(){var e=this;setTimeout(function(){e.resize()},300)},CoreAutoRowsDirective.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.resize()},300)},CoreAutoRowsDirective.prototype.resize=function(e){var n=this.element.nativeElement;"ION-TEXTAREA"==n.tagName&&(n=n.firstElementChild),n.style.height="1px",n.style.height=n.scrollHeight+"px",this.height!=n.scrollHeight&&(this.height=n.scrollHeight,this.onResize.emit())},CoreAutoRowsDirective}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=function(){function CoreLocalFileComponent(e,n,t,r,i,l,s,a){this.mimeUtils=e,this.utils=n,this.textUtils=t,this.fileProvider=r,this.domUtils=i,this.timeUtils=l,this.sitesProvider=s,this.eventsProvider=a,this.newFileName="",this.onDelete=new o.r,this.onRename=new o.r,this.onClick=new o.r}return CoreLocalFileComponent.prototype.ngOnInit=function(){var e=this;this.manage=this.utils.isTrueOrOne(this.manage),this.loadFileBasicData(),this.fileProvider.getMetadata(this.file).then(function(n){n.size>=0&&(e.size=e.textUtils.bytesToSize(n.size,2)),e.timemodified=e.timeUtils.userDate(n.modificationTime,"core.strftimedatetimeshort")})},CoreLocalFileComponent.prototype.loadFileBasicData=function(){this.fileName=this.file.name,this.fileIcon=this.mimeUtils.getFileIcon(this.file.name),this.fileExtension=this.mimeUtils.getFileExtension(this.file.name),this.relativePath=this.fileProvider.removeBasePath(this.file.toURL()),this.relativePath||(this.relativePath=this.file.fullPath)},CoreLocalFileComponent.prototype.fileClicked=function(e){this.editMode||(e.preventDefault(),e.stopPropagation(),this.utils.isTrueOrOne(this.overrideClick)&&this.onClick.observers.length?this.onClick.emit():this.utils.openFile(this.file.toURL()))},CoreLocalFileComponent.prototype.activateEdit=function(e){e.preventDefault(),e.stopPropagation(),this.editMode=!0,this.newFileName=this.file.name},CoreLocalFileComponent.prototype.changeName=function(e,n){var t=this;if(n.preventDefault(),n.stopPropagation(),e==this.file.name)return this.editMode=!1,void this.domUtils.triggerFormCancelledEvent(this.formElement,this.sitesProvider.getCurrentSiteId());var o=this.domUtils.showModalLoading(),r=this.fileProvider.getFileAndDirectoryFromPath(this.relativePath),i=this.textUtils.concatenatePaths(r.directory,e);this.fileProvider.getFile(i).then(function(){t.domUtils.showErrorModal("core.errorfileexistssamename",!0)}).catch(function(){return t.fileProvider.moveFile(t.relativePath,i).then(function(e){t.domUtils.triggerFormSubmittedEvent(t.formElement,!1,t.sitesProvider.getCurrentSiteId()),t.editMode=!1,t.file=e,t.loadFileBasicData(),t.onRename.emit({file:t.file})}).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.errorrenamefile",!0)})}).finally(function(){o.dismiss()})},CoreLocalFileComponent.prototype.deleteFile=function(e){var n=this;e.preventDefault(),e.stopPropagation(),this.domUtils.showDeleteConfirm("core.confirmdeletefile").then(function(){var e=n.domUtils.showModalLoading("core.deleting",!0);return n.fileProvider.removeFile(n.relativePath).then(function(){n.onDelete.emit()}).finally(function(){e.dismiss()})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.errordeletefile",!0)})},CoreLocalFileComponent}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(385);var o=function(){function CoreBlockCourseBlocksComponent(e,n,t,o,r){this.domUtils=e,this.courseProvider=n,this.blockHelper=t,this.content=r,this.hideBlocks=!1,this.dataLoaded=!1,this.blocks=[],this.element=o.nativeElement}return CoreBlockCourseBlocksComponent.prototype.ngOnInit=function(){var e=this;this.loadContent().finally(function(){e.dataLoaded=!0})},CoreBlockCourseBlocksComponent.prototype.invalidateBlocks=function(){var e=[];return this.blockHelper.canGetCourseBlocks()&&e.push(this.courseProvider.invalidateCourseBlocks(this.courseId)),this.blocksComponents.forEach(function(n){e.push(n.invalidate().catch(function(){}))}),Promise.all(e)},CoreBlockCourseBlocksComponent.prototype.loadContent=function(){var e=this;return this.blockHelper.getCourseBlocks(this.courseId).then(function(n){e.blocks=n}).catch(function(n){e.domUtils.showErrorModal(n),e.blocks=[]}).finally(function(){e.blocks.length>0?(e.element.classList.add("core-has-blocks"),e.element.classList.remove("core-no-blocks"),e.content.getElementRef().nativeElement.classList.add("core-course-block-with-blocks")):(e.element.classList.remove("core-has-blocks"),e.element.classList.add("core-no-blocks"),e.content.getElementRef().nativeElement.classList.remove("core-course-block-with-blocks"))})},CoreBlockCourseBlocksComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreBlockHelperProvider(e,n){this.courseProvider=e,this.blockDelegate=n}return CoreBlockHelperProvider.prototype.canGetCourseBlocks=function(){return this.courseProvider.canGetCourseBlocks()&&!this.blockDelegate.areBlocksDisabledInCourses()},CoreBlockHelperProvider.prototype.getCourseBlocks=function(e){var n=this;return this.canGetCourseBlocks()?this.courseProvider.getCourseBlocks(e).then(function(e){return n.blockDelegate.hasSupportedBlock(e)?e:[]}):Promise.resolve([])},CoreBlockHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(234),r=(t(264),function(){function AddonModScormHelperProvider(e,n,t,o,r,i){this.sitesProvider=e,this.translate=n,this.domUtils=t,this.utils=o,this.scormProvider=r,this.scormOfflineProvider=i,this.elementsToIgnore=["status","score_raw","total_time","session_time","student_id","student_name","credit","mode","entry"]}return AddonModScormHelperProvider.prototype.confirmDownload=function(e,n){var t=this;return this.scormProvider.shouldDownloadMainFile(e,n).then(function(n){if(n){return(e.packagesize?Promise.resolve(e.packagesize):t.scormProvider.calculateScormSize(e).then(function(n){return e.packagesize=n,n})).then(function(e){return t.domUtils.confirmDownloadSize({size:e,total:!0})})}})},AddonModScormHelperProvider.prototype.convertAttemptToOffline=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.scormProvider.getScormUserData(e.id,n,void 0,!1,!1,t).then(function(r){return o.scormOfflineProvider.getScormUserData(e.id,n,void 0,t).catch(function(){}).then(function(i){var l=o.utils.clone(r),s=function(e){var n=l[e];if(o.elementsToIgnore.forEach(function(e){delete n.userdata[e]}),i&&i[n.scoid]&&i[n.scoid].userdata){var t={};for(var r in n.userdata)i[n.scoid].userdata[r]||(t[r]=n.userdata[r]);n.userdata=t}};for(var a in l)s(a);return o.scormOfflineProvider.createNewAttempt(e,n,l,r,t)})}).catch(function(){return Promise.reject(o.translate.instant("addon.mod_scorm.errorcreateofflineattempt"))})},AddonModScormHelperProvider.prototype.createOfflineAttempt=function(e,n,t,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.searchOnlineAttemptUserData(e.id,t,o).then(function(t){for(var i in t){var l=t[i],s={};for(var a in l.userdata)-1==a.indexOf(".")&&-1==r.elementsToIgnore.indexOf(a)&&(s[a]=l.userdata[a]);l.userdata=s}return r.scormOfflineProvider.createNewAttempt(e,n,t,void 0,o)}).catch(function(){return Promise.reject(r.translate.instant("addon.mod_scorm.errorcreateofflineattempt"))})},AddonModScormHelperProvider.prototype.determineAttemptToContinue=function(e,n,t){var o,r=this;if(n.online.length&&(o=Math.max.apply(Math,n.online)),o){var i=n.offline.indexOf(o)>-1;return this.scormProvider.isAttemptIncomplete(e.id,o,i,!1,t).then(function(t){return t?{number:o,offline:i}:r.getLastBeforeMax(e,n)})}return Promise.resolve(this.getLastBeforeMax(e,n))},AddonModScormHelperProvider.prototype.getFirstSco=function(e,n,t,r,i,l,s){var a=this;i=i||o.a.MODENORMAL;return(t&&t.length?Promise.resolve(t):this.scormProvider.getScosWithData(e,n,r,l,!1,s)).then(function(e){for(var n=0;n<e.length;n++){var t=e[n];if(t.isvisible&&t.launch&&t.prereq&&(i!=o.a.MODENORMAL||a.scormProvider.isStatusIncomplete(t.status)))return t}return e[0]})},AddonModScormHelperProvider.prototype.getLastBeforeMax=function(e,n){return 0!=e.maxattempt&&n.lastAttempt.number>e.maxattempt?{number:e.maxattempt,offline:n.offline.indexOf(e.maxattempt)>-1}:{number:n.lastAttempt.number,offline:n.lastAttempt.offline}},AddonModScormHelperProvider.prototype.getNextScoFromToc=function(e,n){for(var t=0;t<e.length;t++)if(e[t].id==n){for(var o=t+1;o<e.length;o++)if(e[o].isvisible&&e[o].prereq&&e[o].launch)return e[o];break}},AddonModScormHelperProvider.prototype.getPreviousScoFromToc=function(e,n){for(var t=0;t<e.length;t++)if(e[t].id==n){for(var o=t-1;o>=0;o--)if(e[o].isvisible&&e[o].prereq&&e[o].launch)return e[o];break}},AddonModScormHelperProvider.prototype.getScoFromToc=function(e,n){for(var t=0;t<e.length;t++)if(e[t].id==n)return e[t]},AddonModScormHelperProvider.prototype.searchOnlineAttemptUserData=function(e,n,t){var o=this;return t=t||this.sitesProvider.getCurrentSiteId(),this.scormProvider.getScormUserData(e,n,void 0,!1,!1,t).catch(function(){return n>0?o.searchOnlineAttemptUserData(e,n-1,t):Promise.reject(null)})},AddonModScormHelperProvider}())},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreCommentsOfflineProvider(n,t){this.sitesProvider=n,this.timeUtils=t,this.siteSchema={name:"CoreCommentsOfflineProvider",version:1,tables:[{name:e.COMMENTS_TABLE,columns:[{name:"contextlevel",type:"TEXT"},{name:"instanceid",type:"INTEGER"},{name:"component",type:"TEXT"},{name:"itemid",type:"INTEGER"},{name:"area",type:"TEXT"},{name:"content",type:"TEXT"},{name:"lastmodified",type:"INTEGER"}],primaryKeys:["contextlevel","instanceid","component","itemid","area"]},{name:e.COMMENTS_DELETED_TABLE,columns:[{name:"commentid",type:"INTEGER",primaryKey:!0},{name:"contextlevel",type:"TEXT"},{name:"instanceid",type:"INTEGER"},{name:"component",type:"TEXT"},{name:"itemid",type:"INTEGER"},{name:"area",type:"TEXT"},{name:"deleted",type:"INTEGER"}]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=CoreCommentsOfflineProvider,CoreCommentsOfflineProvider.prototype.getAllComments=function(n){return this.sitesProvider.getSite(n).then(function(n){return Promise.all([n.getDb().getRecords(e.COMMENTS_TABLE),n.getDb().getRecords(e.COMMENTS_DELETED_TABLE)]).then(function(e){return[].concat.apply([],e)})})},CoreCommentsOfflineProvider.prototype.getComment=function(n,t,o,r,i,l){return void 0===i&&(i=""),this.sitesProvider.getSite(l).then(function(l){return l.getDb().getRecord(e.COMMENTS_TABLE,{contextlevel:n,instanceid:t,component:o,itemid:r,area:i})}).catch(function(){return!1})},CoreCommentsOfflineProvider.prototype.getComments=function(e,n,t,o,r,i){var l=this;void 0===r&&(r="");var s=[];return i=i||this.sitesProvider.getCurrentSiteId(),this.getComment(e,n,t,o,r,i).then(function(a){return s=a?[a]:[],l.getDeletedComments(e,n,t,o,r,i)}).then(function(e){return s=s.concat(e)})},CoreCommentsOfflineProvider.prototype.getAllDeletedComments=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecords(e.COMMENTS_DELETED_TABLE)})},CoreCommentsOfflineProvider.prototype.getDeletedComments=function(n,t,o,r,i,l){return void 0===i&&(i=""),this.sitesProvider.getSite(l).then(function(l){return l.getDb().getRecords(e.COMMENTS_DELETED_TABLE,{contextlevel:n,instanceid:t,component:o,itemid:r,area:i})}).catch(function(){return!1})},CoreCommentsOfflineProvider.prototype.removeComment=function(n,t,o,r,i,l){return void 0===i&&(i=""),this.sitesProvider.getSite(l).then(function(l){return l.getDb().deleteRecords(e.COMMENTS_TABLE,{contextlevel:n,instanceid:t,component:o,itemid:r,area:i})})},CoreCommentsOfflineProvider.prototype.removeDeletedComments=function(n,t,o,r,i,l){return void 0===i&&(i=""),this.sitesProvider.getSite(l).then(function(l){return l.getDb().deleteRecords(e.COMMENTS_DELETED_TABLE,{contextlevel:n,instanceid:t,component:o,itemid:r,area:i})})},CoreCommentsOfflineProvider.prototype.saveComment=function(n,t,o,r,i,l,s){var a=this;return void 0===l&&(l=""),this.sitesProvider.getSite(s).then(function(s){var u=a.timeUtils.timestamp(),d={contextlevel:t,instanceid:o,component:r,itemid:i,area:l,content:n,lastmodified:u};return s.getDb().insertRecord(e.COMMENTS_TABLE,d).then(function(){return d})})},CoreCommentsOfflineProvider.prototype.deleteComment=function(n,t,o,r,i,l,s){var a=this;return void 0===l&&(l=""),this.sitesProvider.getSite(s).then(function(s){var u=a.timeUtils.timestamp(),d={contextlevel:t,instanceid:o,component:r,itemid:i,area:l,commentid:n,deleted:u};return s.getDb().insertRecord(e.COMMENTS_DELETED_TABLE,d).then(function(){return d})})},CoreCommentsOfflineProvider.prototype.undoDeleteComment=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(e.COMMENTS_DELETED_TABLE,{commentid:n})})},CoreCommentsOfflineProvider.COMMENTS_TABLE="core_comments_offline_comments",CoreCommentsOfflineProvider.COMMENTS_DELETED_TABLE="core_comments_deleted_offline_comments",CoreCommentsOfflineProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonFilesProvider(e,n){this.sitesProvider=e,this.mimeUtils=n,this.ROOT_CACHE_KEY="mmaFiles:"}return AddonFilesProvider.prototype.canGetPrivateFilesInfo=function(){return this.sitesProvider.wsAvailableInCurrentSite("core_user_get_private_files_info")},AddonFilesProvider.prototype.canViewPrivateFiles=function(){return this.sitesProvider.getCurrentSite().canAccessMyFiles()&&!this.isPrivateFilesDisabledInSite()},AddonFilesProvider.prototype.canViewSiteFiles=function(){return!this.isSiteFilesDisabledInSite()},AddonFilesProvider.prototype.canUploadFiles=function(){var e=this.sitesProvider.getCurrentSite();return e.canAccessMyFiles()&&e.canUploadFiles()&&!this.isUploadDisabledInSite()},AddonFilesProvider.prototype.getFiles=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var r={cacheKey:t.getFilesListCacheKey(e),updateFrequency:o.a.FREQUENCY_SOMETIMES};return n.read("core_files_get_files",e,r)}).then(function(e){var n=[];return e.files&&e.files.forEach(function(e){e.isdir&&(e.link={contextid:e.contextid||null,component:e.component||"",filearea:e.filearea||"",itemid:e.itemid||0,filepath:e.filepath||"",filename:e.filename||""},e.component&&(e.link.filename="")),e.imgPath=e.isdir?t.mimeUtils.getFolderIcon():t.mimeUtils.getFileIcon(e.filename),n.push(e)}),n})},AddonFilesProvider.prototype.getFilesListCacheKey=function(e){return this.ROOT_CACHE_KEY+"list:"+(e.component?"my":"site")+":"+e.contextid+":"+e.filepath},AddonFilesProvider.prototype.getPrivateFiles=function(){return this.getFiles(this.getPrivateFilesRootParams())},AddonFilesProvider.prototype.getPrivateFilesRootParams=function(){return{contextid:-1,component:"user",filearea:"private",contextlevel:"user",instanceid:this.sitesProvider.getCurrentSite().getUserId(),itemid:0,filepath:"",filename:""}},AddonFilesProvider.prototype.getPrivateFilesInfo=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var r={userid:e=e||n.getUserId()},i={cacheKey:t.getPrivateFilesInfoCacheKey(e),updateFrequency:o.a.FREQUENCY_SOMETIMES};return n.read("core_user_get_private_files_info",r,i)})},AddonFilesProvider.prototype.getPrivateFilesInfoCacheKey=function(e){return this.getPrivateFilesInfoCommonCacheKey()+":"+e},AddonFilesProvider.prototype.getPrivateFilesInfoCommonCacheKey=function(){return this.ROOT_CACHE_KEY+"privateInfo"},AddonFilesProvider.prototype.getSiteFiles=function(){return this.getFiles(this.getSiteFilesRootParams())},AddonFilesProvider.prototype.getSiteFilesRootParams=function(){return{contextid:0,component:"",filearea:"",itemid:0,filepath:"",filename:""}},AddonFilesProvider.prototype.invalidateDirectory=function(e,n,t){var o,r=this;return n?o=n:"site"===e?o=this.getSiteFilesRootParams():"my"===e&&(o=this.getPrivateFilesRootParams()),this.sitesProvider.getSite(t).then(function(e){return e.invalidateWsCacheForKey(r.getFilesListCacheKey(o))})},AddonFilesProvider.prototype.invalidatePrivateFilesInfo=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKeyStartingWith(n.getPrivateFilesInfoCommonCacheKey())})},AddonFilesProvider.prototype.invalidatePrivateFilesInfoForUser=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return e=e||n.getUserId(),n.invalidateWsCacheForKey(t.getPrivateFilesInfoCacheKey(e))})},AddonFilesProvider.prototype.isDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isDisabledInSite(e)})},AddonFilesProvider.prototype.isDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_AddonFiles")},AddonFilesProvider.prototype.isPluginEnabled=function(){return this.canViewPrivateFiles()||this.canViewSiteFiles()||this.canUploadFiles()},AddonFilesProvider.prototype.isPrivateFilesDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isPrivateFilesDisabledInSite(e)})},AddonFilesProvider.prototype.isPrivateFilesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("AddonFilesPrivateFiles")},AddonFilesProvider.prototype.isSiteFilesDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isSiteFilesDisabledInSite(e)})},AddonFilesProvider.prototype.isSiteFilesDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("AddonFilesSiteFiles")},AddonFilesProvider.prototype.isUploadDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isUploadDisabledInSite(e)})},AddonFilesProvider.prototype.isUploadDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("AddonFilesUpload")},AddonFilesProvider.prototype.moveFromDraftToPrivate=function(e,n){var t={draftid:e},o={responseExpected:!1};return this.sitesProvider.getSite(n).then(function(e){return e.write("core_user_add_user_private_files",t,o)})},AddonFilesProvider.prototype.versionCanUploadFiles=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.isVersionGreaterEqualThan("3.1.1")})},AddonFilesProvider.PRIVATE_FILES_COMPONENT="mmaFilesMy",AddonFilesProvider.SITE_FILES_COMPONENT="mmaFilesSite",AddonFilesProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(61),t(200);var o=function(){function CoreBlockComponent(e,n,t,o){this.injector=e,this.blockDelegate=n,this.eventsProvider=o,this.data={},this.loaded=!1,this.differ=t.find([]).create()}return CoreBlockComponent.prototype.ngOnInit=function(){this.block?this.block.visible&&this.initBlock():this.loaded=!0},CoreBlockComponent.prototype.ngDoCheck=function(){if(this.data){this.differ.diff(this.extraData)&&(this.data=Object.assign(this.data,this.extraData||{}))}},CoreBlockComponent.prototype.initBlock=function(){var e=this;this.blockDelegate.getBlockDisplayData(this.injector,this.block,this.contextLevel,this.instanceId).then(function(n){n?(e.class=n.class,e.componentClass=n.component,e.data=Object.assign({title:n.title,block:e.block,contextLevel:e.contextLevel,instanceId:e.instanceId,link:n.link||null,linkParams:n.linkParams||null},e.extraData||{},n.componentData||{})):e.blockSubscription=e.blockDelegate.blocksUpdateObservable.subscribe(function(){e.blockSubscription.unsubscribe(),delete e.blockSubscription,e.initBlock()})}).catch(function(){}).finally(function(){e.loaded=!0})},CoreBlockComponent.prototype.ngOnDestroy=function(){this.blockSubscription&&(this.blockSubscription.unsubscribe(),delete this.blockSubscription)},CoreBlockComponent.prototype.doRefresh=function(e,n,t){return void 0===t&&(t=!1),this.dynamicComponent?Promise.resolve(this.dynamicComponent.callComponentFunction("doRefresh",[e,n,t])):Promise.resolve()},CoreBlockComponent.prototype.invalidate=function(){return this.dynamicComponent?Promise.resolve(this.dynamicComponent.callComponentFunction("invalidateContent")):Promise.resolve()},CoreBlockComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function CoreCoursesDashboardProvider(e){this.sitesProvider=e,this.ROOT_CACHE_KEY="CoreCoursesDashboard:"}return CoreCoursesDashboardProvider.prototype.getDashboardBlocksCacheKey=function(e){return void 0===e&&(e=0),this.ROOT_CACHE_KEY+"blocks:"+e},CoreCoursesDashboardProvider.prototype.getDashboardBlocks=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){var r={returncontents:1},i={cacheKey:t.getDashboardBlocksCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return e&&(r.userid=e),n.read("core_block_get_dashboard_blocks",r,i).then(function(e){return t.sortBlockByWeight(e.blocks)||[]})})},CoreCoursesDashboardProvider.prototype.sortBlockByWeight=function(e){return e.sort(function(e,n){return e.weight<n.weight?-1:e.weight>n.weight?1:0}),e},CoreCoursesDashboardProvider.prototype.invalidateDashboardBlocks=function(e,n){var t=this;return this.sitesProvider.getSite(n).then(function(n){return n.invalidateWsCacheForKey(t.getDashboardBlocksCacheKey(e))})},CoreCoursesDashboardProvider.prototype.isAvailable=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return!n.isDisabledInSite(e)&&e.wsAvailable("core_block_get_dashboard_blocks")})},CoreCoursesDashboardProvider.prototype.isDisabled=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return n.isDisabledInSite(e)})},CoreCoursesDashboardProvider.prototype.isDisabledInSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).isFeatureDisabled("CoreMainMenuDelegate_CoreCoursesDashboard")},CoreCoursesDashboardProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4),t(59);var o=function(){function CoreSitePluginsModuleIndexComponent(e,n,t,o,r,i,l){this.sitePluginsProvider=e,this.courseHelper=n,this.prefetchDelegate=t,this.textUtils=o,this.translate=r,this.utils=i,this.moduleDelegate=l,this.displayOpenInBrowser=!0,this.displayDescription=!0,this.displayRefresh=!0,this.displayPrefetch=!0,this.displaySize=!0,this.isDestroyed=!1}return CoreSitePluginsModuleIndexComponent.prototype.ngOnInit=function(){if(this.refreshIcon="spinner",this.module){var e=this.moduleDelegate.getHandlerName(this.module.modname),n=this.sitePluginsProvider.getSitePluginHandler(e);n&&(this.component=n.plugin.component,this.method=n.handlerSchema.method,this.args={courseid:this.courseId,cmid:this.module.id},this.initResult=n.initResult,this.jsData={module:this.module,courseId:this.courseId},this.displayOpenInBrowser=!this.utils.isFalseOrZero(n.handlerSchema.displayopeninbrowser),this.displayDescription=!this.utils.isFalseOrZero(n.handlerSchema.displaydescription),this.displayRefresh=!this.utils.isFalseOrZero(n.handlerSchema.displayrefresh),this.displayPrefetch=!this.utils.isFalseOrZero(n.handlerSchema.displayprefetch),this.displaySize=!this.utils.isFalseOrZero(n.handlerSchema.displaysize)),this.description=this.module.description,this.externalUrl=this.module.url}},CoreSitePluginsModuleIndexComponent.prototype.doRefresh=function(e,n){return this.content?(this.refreshIcon="spinner",Promise.resolve(this.content.refreshContent(!1)).finally(function(){e&&e.complete(),n&&n()})):(e&&e.complete(),n&&n(),Promise.resolve())},CoreSitePluginsModuleIndexComponent.prototype.contentLoaded=function(e){this.refreshIcon="refresh",this.prefetchDelegate.getPrefetchHandlerFor(this.module)&&this.courseHelper.fillContextMenu(this,this.module,this.courseId,e,this.component)},CoreSitePluginsModuleIndexComponent.prototype.contentLoading=function(e){this.refreshIcon="spinner"},CoreSitePluginsModuleIndexComponent.prototype.expandDescription=function(){this.textUtils.expandText(this.translate.instant("core.description"),this.description,this.component,this.module.id,[],!0,"module",this.module.id,this.courseId)},CoreSitePluginsModuleIndexComponent.prototype.prefetch=function(){this.courseHelper.contextMenuPrefetch(this,this.module,this.courseId)},CoreSitePluginsModuleIndexComponent.prototype.removeFiles=function(){this.courseHelper.confirmAndRemoveFiles(this.module,this.courseId)},CoreSitePluginsModuleIndexComponent.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.statusObserver&&this.statusObserver.off()},CoreSitePluginsModuleIndexComponent.prototype.callComponentFunction=function(e,n){return this.content.callComponentFunction(e,n)},CoreSitePluginsModuleIndexComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(99),i=function(e){function AddonMessageOutputDelegate(n,t,o){var r=e.call(this,"AddonMessageOutputDelegate",n,t,o)||this;return r.loggerProvider=n,r.sitesProvider=t,r.eventsProvider=o,r.handlerNameProperty="processorName",r}return Object(o.__extends)(AddonMessageOutputDelegate,e),AddonMessageOutputDelegate.prototype.getDisplayData=function(e){return this.executeFunctionOnEnabled(e.name,"getDisplayData",e)},AddonMessageOutputDelegate}(r.a)},function(e,n,t){"use strict";function View_CoreCoursesCourseProgressComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"img",[["alt",""],["core-external-content",""]],null,null,null,null,null)),o._15(1,4734976,null,0,r.a,[o.p,i.a,l.a,s.a,a.a,u.a,d.a,c.a,p.a],{src:[0,"src"]},null)],function(e,n){e(n,1,0,n.component.course.courseImage)},null)}function View_CoreCoursesCourseProgressComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"span",[["class","core-course-category"]],null,null,null,null,null)),(e()(),o._16(1,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),o._15(2,540672,null,0,f.a,[o.p,a.a,u.a,h.a,m.a,s.a,p.a,d.a,i.a,l.a,c.a,_.a,[2,g.a],[2,v.a],[2,C.a],y.a,P.a,A.a,b.a,I.a,o.W],{text:[0,"text"]},null)],function(e,n){e(n,2,0,n.component.course.categoryname)},null)}function View_CoreCoursesCourseProgressComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"span",[["class","core-course-category"]],null,null,null,null,null)),(e()(),o._40(-1,null,[" | "]))],null,null)}function View_CoreCoursesCourseProgressComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"span",[["class","core-course-shortname"]],null,null,null,null,null)),(e()(),o._16(1,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),o._15(2,540672,null,0,f.a,[o.p,a.a,u.a,h.a,m.a,s.a,p.a,d.a,i.a,l.a,c.a,_.a,[2,g.a],[2,v.a],[2,C.a],y.a,P.a,A.a,b.a,I.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null)],function(e,n){var t=n.component;e(n,2,0,t.course.shortname,"course",t.course.id)},null)}function View_CoreCoursesCourseProgressComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"p",[["class","core-course-additional-info"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_3)),o._15(3,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_4)),o._15(6,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_5)),o._15(9,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,3,0,t.course.categoryname);e(n,6,0,t.course.categoryname&&t.course.displayname&&t.course.shortname&&t.course.fullname!=t.course.displayname);e(n,9,0,t.course.displayname&&t.course.shortname&&t.course.fullname!=t.course.displayname)},null)}function View_CoreCoursesCourseProgressComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-icon",[["name","fa-star"]],null,null,null,E.b,E.a)),o._15(1,704512,null,0,M.a,[o.p,w.a],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"fa-star")},null)}function View_CoreCoursesCourseProgressComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-icon",[],null,null,null,E.b,E.a)),o._15(1,704512,null,0,M.a,[o.p,w.a],{name:[0,"name"]},null)],function(e,n){e(n,1,0,n.component.prefetchCourseData.prefetchCourseIcon)},null)}function View_CoreCoursesCourseProgressComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-icon",[["color","success"],["name","cloud-done"],["role","img"]],[[1,"aria-label",0],[2,"hide",null]],null,null,null,null)),o._15(1,147456,null,0,k.a,[w.a,o.p,o.K],{color:[0,"color"],name:[1,"name"]},null),o._32(131072,T.a,[m.a,o.i])],function(e,n){e(n,1,0,"success","cloud-done")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.downloaded")),o._29(n,1)._hidden)})}function View_CoreCoursesCourseProgressComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.prefetchCourse(t)&&o}return o},O.b,O.a)),o._15(1,1097728,[[2,4]],0,D.a,[[8,""],w.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,T.a,[m.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._11(16777216,null,0,1,null,View_CoreCoursesCourseProgressComponent_9)),o._15(5,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._11(16777216,null,0,1,null,View_CoreCoursesCourseProgressComponent_10)),o._15(8,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n            "]))],function(e,n){var t=n.component;e(n,1,0,"dark","");e(n,5,0,!t.prefetchCourseData.downloadSucceeded);e(n,8,0,t.prefetchCourseData.downloadSucceeded)},function(e,n){var t=n.component;e(n,0,0,o._41(n,0,0,o._29(n,2).transform(t.prefetchCourseData.title)))})}function View_CoreCoursesCourseProgressComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,x.b,x.a)),o._15(1,114688,null,0,F.a,[w.a,o.p,o.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,o._29(n,1)._paused)})}function View_CoreCoursesCourseProgressComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"div",[["class","core-button-spinner"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_8)),o._15(4,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_11)),o._15(8,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,"spinner"!=t.prefetchCourseData.prefetchCourseIcon);e(n,8,0,"spinner"==t.prefetchCourseData.prefetchCourseIcon)},null)}function View_CoreCoursesCourseProgressComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,x.b,x.a)),o._15(1,114688,null,0,F.a,[w.a,o.p,o.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,o._29(n,1)._paused)})}function View_CoreCoursesCourseProgressComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-icon",[["class","core-icon-downloaded"],["color","success"],["name","cloud-done"],["role","img"]],[[1,"aria-label",0],[2,"hide",null]],null,null,null,null)),o._15(1,147456,[[3,4]],0,k.a,[w.a,o.p,o.K],{color:[0,"color"],name:[1,"name"]},null),o._32(131072,T.a,[m.a,o.i])],function(e,n){e(n,1,0,"success","cloud-done")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.downloaded")),o._29(n,1)._hidden)})}function View_CoreCoursesCourseProgressComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.showCourseOptionsMenu(t)&&o}return o},O.b,O.a)),o._15(1,1097728,[[2,4]],0,D.a,[[8,""],w.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,T.a,[m.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(4,0,null,0,1,"core-icon",[["name","more"]],null,null,null,E.b,E.a)),o._15(5,704512,null,0,M.a,[o.p,w.a],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"dark","");e(n,5,0,"more")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.displayoptions")))})}function View_CoreCoursesCourseProgressComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"div",[["class","core-button-spinner"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_13)),o._15(4,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._40(-1,null,["\n             "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_14)),o._15(8,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_15)),o._15(12,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,t.downloadCourseEnabled&&"spinner"==t.prefetchCourseData.prefetchCourseIcon||t.showSpinner);e(n,8,0,t.downloadCourseEnabled&&t.prefetchCourseData.downloadSucceeded&&!t.showSpinner);e(n,12,0,!t.showSpinner)},null)}function View_CoreCoursesCourseProgressComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,L.b,L.a)),o._15(1,1097728,null,3,U.a,[R.a,w.a,o.p,o.K,[2,H.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(5,16384,null,0,N.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,0,null,2,1,"core-progress-bar",[],null,null,null,B.b,B.a)),o._15(8,573440,null,0,V.a,[W.c],{progress:[0,"progress"]},null),(e()(),o._40(-1,2,["\n    "]))],function(e,n){e(n,8,0,n.component.course.progress)},null)}function View_CoreCoursesCourseProgressComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,42,"ion-card",[],[[1,"course-color",0]],null,null,null,null)),o._15(1,16384,null,0,K.a,[w.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(3,0,null,null,4,"div",[["class","core-course-thumb"]],[[2,"core-course-color-img",null],[4,"background-color",null]],[[null,"click"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.openCourse(r.course)&&o}return o},null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_1)),o._15(6,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(9,0,null,null,27,"ion-item",[["class","core-course-link item item-block"],["detail-none",""],["tappable",""],["text-wrap",""]],[[8,"title",0],[2,"item-disabled",null],[2,"core-course-more-than-title",null]],[[null,"click"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.openCourse(r.course)&&o}return o},L.b,L.a)),o._15(10,1097728,null,3,U.a,[R.a,w.a,o.p,o.K,[2,H.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(14,16384,null,0,N.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(16,0,null,2,13,"div",[["class","core-course-title"]],[[2,"core-course-with-buttons",null]],null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_2)),o._15(19,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(21,0,null,null,7,"h2",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_6)),o._15(24,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(26,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),o._15(27,540672,null,0,f.a,[o.p,a.a,u.a,h.a,m.a,s.a,p.a,d.a,i.a,l.a,c.a,_.a,[2,g.a],[2,v.a],[2,C.a],y.a,P.a,A.a,b.a,I.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,2,["\n\n        "])),(e()(),o._11(16777216,null,2,1,null,View_CoreCoursesCourseProgressComponent_7)),o._15(32,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n\n        "])),(e()(),o._11(16777216,null,2,1,null,View_CoreCoursesCourseProgressComponent_12)),o._15(35,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseProgressComponent_16)),o._15(39,16384,null,0,S.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),o._28(null,0),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,6,0,t.course.courseImage);e(n,19,0,t.course.categoryname||t.course.displayname&&t.course.shortname&&t.course.fullname!=t.course.displayname);e(n,24,0,t.course.isfavourite);e(n,27,0,t.course.fullname,"course",t.course.id);e(n,32,0,t.downloadCourseEnabled&&!t.courseOptionMenuEnabled&&t.showDownload);e(n,35,0,t.courseOptionMenuEnabled);e(n,39,0,t.showAll&&null!=t.course.progress&&t.course.progress>=0&&!1!==t.course.completionusertracked)},function(e,n){var t=n.component;e(n,0,0,t.course.color?null:t.course.colorNumber);e(n,3,0,t.course.courseImage,t.course.color);e(n,9,0,t.course.displayname||t.course.fullname,0==t.course.visible,null!=t.course.progress&&t.course.progress>=0);e(n,16,0,t.courseOptionMenuEnabled||t.downloadCourseEnabled&&t.showDownload)})}t.d(n,"a",function(){return q}),n.b=View_CoreCoursesCourseProgressComponent_0;var o=t(1),r=t(229),i=t(7),l=t(18),s=t(17),a=t(2),u=t(5),d=t(23),c=t(11),p=t(3),f=t(48),h=t(12),m=t(19),_=t(16),g=t(21),v=t(30),C=t(29),y=t(43),P=t(10),A=t(41),b=t(31),I=t(37),S=t(8),E=t(81),M=t(76),w=t(9),k=t(49),T=t(26),O=t(47),D=t(44),x=t(122),F=t(102),L=t(32),U=t(22),R=t(20),H=t(28),N=t(34),B=t(486),V=t(320),W=t(80),K=t(90),q=(t(39),t(14),t(53),t(46),o._14({encapsulation:2,styles:[],data:{}}))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=function(){function CoreNavigationBarComponent(e){this.textUtils=e,this.action=new o.r}return CoreNavigationBarComponent.prototype.showInfo=function(){this.textUtils.expandText(this.title,this.info,this.component,this.componentId,[],!0,this.contextLevel,this.contextInstanceId,this.courseId)},CoreNavigationBarComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(14),t(62);var o=function(){function CoreCourseUnsupportedModuleComponent(e,n){this.courseProvider=e,this.moduleDelegate=n}return CoreCourseUnsupportedModuleComponent.prototype.ngOnInit=function(){this.isDisabledInSite=this.moduleDelegate.isModuleDisabledInSite(this.module.modname),this.isSupportedByTheApp=this.moduleDelegate.hasHandler(this.module.modname),this.moduleName=this.courseProvider.translateModuleName(this.module.modname)},CoreCourseUnsupportedModuleComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(4),t(149)),i=(t(353),t(66),function(e){function CoreCourseSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p){var f=e.call(this,"CoreCourseSyncProvider",t,n,o,d,u,s,c)||this;return f.sitesProvider=n,f.appProvider=o,f.courseOffline=r,f.eventsProvider=i,f.courseProvider=l,f.utils=a,f.textUtils=u,f.logHelper=p,f}return Object(o.__extends)(CoreCourseSyncProvider,e),n=CoreCourseSyncProvider,CoreCourseSyncProvider.prototype.syncAllCourses=function(e,n){return this.syncOnSites("courses",this.syncAllCoursesFunc.bind(this),[n],e)},CoreCourseSyncProvider.prototype.syncAllCoursesFunc=function(e,t){var o=this,r=[];return r.push(this.logHelper.syncSite(e)),r.push(this.courseOffline.getAllManualCompletions(e).then(function(r){var i=r.map(function(r){return(t?o.syncCourse(r.courseid,e):o.syncCourseIfNeeded(r.courseid,e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{courseId:r.courseid,warnings:t.warnings},e)})});return Promise.all(i)})),Promise.all(r)},CoreCourseSyncProvider.prototype.syncCourseIfNeeded=function(e,n){return this.syncCourse(e,n)},CoreCourseSyncProvider.prototype.syncCourse=function(e,n){var t=this;if(n=n||this.sitesProvider.getCurrentSiteId(),this.isSyncing(e,n))return this.getOngoingSync(e,n);this.logger.debug("Try to sync course '"+e+"'");var o={warnings:[],updated:!1},r=this.courseOffline.getCourseManualCompletions(e,n).catch(function(){return[]}).then(function(r){if(r&&r.length)return t.appProvider.isOnline()?t.courseProvider.getActivitiesCompletionStatus(e,n,void 0,!1,!0,!1).then(function(i){var l=[];return r.forEach(function(r){var s=i[r.cmid];l.push(s&&1e3*s.timecompleted>r.timecompleted?t.courseOffline.deleteManualCompletion(r.cmid,n).then(function(){s.state!=r.completed&&o.warnings.push(t.translate.instant("core.course.warningofflinemanualcompletiondeleted",{name:r.coursename||e,error:t.translate.instant("core.course.warningmanualcompletionmodified")}))}):t.courseProvider.markCompletedManuallyOnline(r.cmid,r.completed,n).then(function(){return o.updated=!0,t.courseOffline.deleteManualCompletion(r.cmid,n)}).catch(function(i){return t.utils.isWebServiceError(i)?(o.updated=!0,t.courseOffline.deleteManualCompletion(r.cmid,n).then(function(){o.warnings.push(t.translate.instant("core.course.warningofflinemanualcompletiondeleted",{name:r.coursename||e,error:t.textUtils.getErrorMessageFromError(i)}))})):Promise.reject(i)}))}),Promise.all(l)}):Promise.reject(null)}).then(function(){if(o.updated)return t.courseProvider.invalidateSections(e,n).then(function(){return t.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.6")?t.courseProvider.getSections(e,!1,!0,void 0,n):t.courseProvider.getActivitiesCompletionStatus(e,n)}).catch(function(){})}).then(function(){return t.setSyncTime(e,n)}).then(function(){return o});return this.addOngoingSync(e,r,n)},CoreCourseSyncProvider.AUTO_SYNCED="core_course_autom_synced",CoreCourseSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(244)),i=t(221),l=function(e){function AddonModBookPrefetchHandler(n,t,o,r,l,s,a,u,d,c){var p=e.call(this,n,t,o,r,l,s,a,u,d)||this;return p.bookProvider=c,p.name="AddonModBook",p.modName="book",p.component=i.a.COMPONENT,p.updatesNames=/^configuration$|^.*files$|^entries$/,p}return Object(o.__extends)(AddonModBookPrefetchHandler,e),AddonModBookPrefetchHandler.prototype.downloadOrPrefetch=function(n,t,o,r){var i=[];return i.push(e.prototype.downloadOrPrefetch.call(this,n,t,o)),i.push(this.bookProvider.getBook(t,n.id).catch(function(){})),Promise.all(i)},AddonModBookPrefetchHandler.prototype.getIntroFiles=function(e,n){var t=this;return this.bookProvider.getBook(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},AddonModBookPrefetchHandler.prototype.invalidateContent=function(e,n){return this.bookProvider.invalidateContent(e,n)},AddonModBookPrefetchHandler.prototype.isEnabled=function(){return this.bookProvider.isPluginEnabled()},AddonModBookPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(143)),i=t(98),l=(t(329),t(217),function(e){function AddonModDataPrefetchHandler(n,t,o,r,l,s,a,u,d,c,p,f,h,m,_){var g=e.call(this,n,t,o,r,l,s,a,u,d)||this;return g.dataProvider=c,g.timeUtils=p,g.dataHelper=f,g.groupsProvider=h,g.commentsProvider=m,g.syncProvider=_,g.name="AddonModData",g.modName="data",g.component=i.a.COMPONENT,g.updatesNames=/^configuration$|^.*files$|^entries$|^gradeitems$|^outcomes$|^comments$|^ratings/,g}return Object(o.__extends)(AddonModDataPrefetchHandler,e),AddonModDataPrefetchHandler.prototype.getAllUniqueEntries=function(e,n,t,o,r){var i=this;void 0===t&&(t=!1),void 0===o&&(o=!1);var l=n.map(function(n){return i.dataProvider.fetchAllEntries(e,n.id,void 0,void 0,void 0,t,o,r)});return Promise.all(l).then(function(e){var n={};return e.forEach(function(e){e.forEach(function(e){n[e.id]=e})}),i.utils.objectToArray(n)})},AddonModDataPrefetchHandler.prototype.getDatabaseInfoHelper=function(e,n,t,o,r,i){var l=this;void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===r&&(r=!1);var s,a=[],u=[],d=[];return i=i||this.sitesProvider.getCurrentSiteId(),this.dataProvider.getDatabase(n,e.id,i,o).then(function(n){return d=l.getIntroFilesFromInstance(e,n),s=n,l.groupsProvider.getActivityGroupInfo(e.id,!1,void 0,i).then(function(e){return e.groups&&0!=e.groups.length||(e.groups=[{id:0}]),a=e.groups,l.getAllUniqueEntries(s.id,a,o,r,i)})}).then(function(e){return u=e,d=d.concat(l.getEntriesFiles(u)),{database:s,groups:a,entries:u,files:d}}).catch(function(e){return t?{database:s,groups:a,entries:u,files:d}:Promise.reject(e)})},AddonModDataPrefetchHandler.prototype.getEntriesFiles=function(e){var n=this,t=[];return e.forEach(function(e){n.utils.objectToArray(e.contents).forEach(function(e){t=t.concat(e.files)})}),t},AddonModDataPrefetchHandler.prototype.getFiles=function(e,n,t){return this.getDatabaseInfoHelper(e,n,!0).then(function(e){return e.files})},AddonModDataPrefetchHandler.prototype.getIntroFiles=function(e,n){var t=this;return this.dataProvider.getDatabase(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},AddonModDataPrefetchHandler.prototype.invalidateContent=function(e,n){return this.dataProvider.invalidateContent(e,n)},AddonModDataPrefetchHandler.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.dataProvider.invalidateDatabaseData(n)),t.push(this.dataProvider.invalidateDatabaseAccessInformationData(e.instance)),Promise.all(t)},AddonModDataPrefetchHandler.prototype.isDownloadable=function(e,n){var t=this;return this.dataProvider.getDatabase(n,e.id,void 0,!0).then(function(e){return t.dataProvider.getDatabaseAccessInformation(e.id).then(function(n){if(!n.timeavailable){var o=t.timeUtils.timestamp();if(e.timeavailablefrom&&o<e.timeavailablefrom)return!1;if(e.timeavailableto&&o>e.timeavailableto)return!1}return!0})})},AddonModDataPrefetchHandler.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},AddonModDataPrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,t,this.prefetchDatabase.bind(this))},AddonModDataPrefetchHandler.prototype.prefetchDatabase=function(e,n,t,o){var r=this;return this.getDatabaseInfoHelper(e,n,!1,!1,!0,o).then(function(n){var t=n.database,i=!r.commentsProvider.areCommentsDisabledInSite(),l=[];return l.push(r.dataProvider.getFields(t.id,!1,!0,o)),l.push(r.filepoolProvider.addFilesToQueue(o,n.files,r.component,e.id)),n.groups.forEach(function(e){l.push(r.dataProvider.getDatabaseAccessInformation(t.id,e.id,!1,!0,o))}),n.entries.forEach(function(e){l.push(r.dataProvider.getEntry(t.id,e.id,!0,o)),i&&t.comments&&l.push(r.commentsProvider.getComments("module",t.coursemodule,"mod_data",e.id,"database_entry",0,o))}),l.push(r.courseProvider.getModuleBasicInfoByInstance(t.id,"data",o)),Promise.all(l)})},AddonModDataPrefetchHandler.prototype.sync=function(e,n,t){var o=[this.syncProvider.syncDatabase(e.instance,t),this.syncProvider.syncRatings(e.id,!0,t)];return Promise.all(o).then(function(e){return e.reduce(function(e,n){return{updated:e.updated||n.updated,warnings:(e.warnings||[]).concat(n.warnings||[])}},{updated:!1})})},AddonModDataPrefetchHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(126);var o=function(){function CoreLoginSitesPage(e,n,t,o,r,i){this.domUtils=e,this.filterProvider=n,this.sitesProvider=t,this.loginHelper=o,this.pushNotificationsProvider=i,this.logger=r.getInstance("CoreLoginSitesPage")}return CoreLoginSitesPage.prototype.ionViewDidLoad=function(){var e=this;this.sitesProvider.getSortedSites().then(function(n){0==n.length&&e.loginHelper.goToAddSite(!0),e.sites=n.map(function(n){return n.siteUrl=n.siteUrl.replace(/^https?:\/\//,""),n.badge=0,e.pushNotificationsProvider.getSiteCounter(n.id).then(function(e){n.badge=e}),n}),e.showDelete=!1}).catch(function(){})},CoreLoginSitesPage.prototype.add=function(){this.loginHelper.goToAddSite(!1,!0)},CoreLoginSitesPage.prototype.deleteSite=function(e,n){var t=this;e.stopPropagation();var o=this.sites[n];this.filterProvider.formatText(o.siteName,{clean:!0,singleLine:!0,filter:!1},[],o.id).then(function(e){t.domUtils.showDeleteConfirm("core.login.confirmdeletesite",{sitename:e}).then(function(){t.sitesProvider.deleteSite(o.id).then(function(){t.sites.splice(n,1),t.showDelete=!1,t.sitesProvider.hasSites().then(function(e){e||t.loginHelper.goToAddSite(!0,!0)})}).catch(function(e){t.logger.error("Error deleting site "+o.id,e),t.domUtils.showErrorModalDefault(e,"Delete site failed."),t.domUtils.showErrorModal("core.login.errordeletesite",!0)})}).catch(function(){})})},CoreLoginSitesPage.prototype.login=function(e){var n=this,t=this.domUtils.showModalLoading();this.sitesProvider.loadSite(e).then(function(e){if(e)return n.loginHelper.goToSiteInitialPage()}).catch(function(t){n.logger.error("Error loading site "+e,t),n.domUtils.showErrorModalDefault(t,"Error loading site.")}).finally(function(){t.dismiss()})},CoreLoginSitesPage.prototype.toggleDelete=function(){this.showDelete=!this.showDelete},CoreLoginSitesPage}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModFolderHelperProvider(e){this.courseProvider=e}return AddonModFolderHelperProvider.prototype.formatContents=function(e){var n=[],t=[],o=this.courseProvider.getModuleIconSrc("folder");return e.forEach(function(e){if("/"!==e.filepath){var r=t,i=e.filepath,l="";"/"===i.substr(0,1)&&(i=i.substr(1)),"/"===i.substr(i.length-1)&&(i=i.slice(0,-1)),i.split("/").forEach(function(e){l=l+"/"+e;var n=r.find(function(n){return n.name===e});if(n)r=n.contents;else{var t={name:e,fileicon:o,contents:[],filepath:l,type:"folder"};r.push(t),r=t.contents}}),r.push(e)}else n.push(e)}),t.concat(n)},AddonModFolderHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=(t(4),t(143)),i=t(72),l=t(136),s=(t(254),function(e){function AddonModForumPrefetchHandler(n,t,o,r,i,s,a,u,d,c,p,f,h){var m=e.call(this,n,t,o,r,i,s,a,u,d)||this;return m.userProvider=c,m.groupsProvider=p,m.forumProvider=f,m.syncProvider=h,m.name="AddonModForum",m.modName="forum",m.component=l.a.COMPONENT,m.updatesNames=/^configuration$|^.*files$|^discussions$/,m}return Object(o.__extends)(AddonModForumPrefetchHandler,e),AddonModForumPrefetchHandler.prototype.getFiles=function(e,n,t){var o=this;return this.forumProvider.getForum(n,e.id).then(function(n){var t=o.getIntroFilesFromInstance(e,n);return o.getPostsForPrefetch(n).then(function(e){return t.concat(o.getPostsFiles(e))})}).catch(function(){return[]})},AddonModForumPrefetchHandler.prototype.getPostsFiles=function(e){var n=this,t=[],o=this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2");return e.forEach(function(e){e.attachments&&e.attachments.length&&(t=t.concat(e.attachments)),o&&e.messageinlinefiles&&e.messageinlinefiles.length?t=t.concat(e.messageinlinefiles):e.message&&!o&&(t=t.concat(n.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.message)))}),t},AddonModForumPrefetchHandler.prototype.getPostsForPrefetch=function(e,n){var t=this,o=this.forumProvider.getAvailableSortOrders().map(function(o){return t.forumProvider.getDiscussionsInPages(e.id,o.value,!1,2,0,n).then(function(e){if(e.error)return Promise.reject(null);var o=[];return e.discussions.forEach(function(e){o.push(t.forumProvider.getDiscussionPosts(e.discussion,n))}),Promise.all(o)})});return Promise.all(o).then(function(e){var n=[],t={};return e.forEach(function(e){e.forEach(function(e){e.posts.forEach(function(e){t[e.id]||(t[e.id]=!0,n.push(e))})})}),n})},AddonModForumPrefetchHandler.prototype.invalidateContent=function(e,n){return this.forumProvider.invalidateContent(e,n)},AddonModForumPrefetchHandler.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.forumProvider.invalidateForumData(n)),t.push(this.courseProvider.invalidateModule(e.id)),Promise.all(t)},AddonModForumPrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,t,this.prefetchForum.bind(this))},AddonModForumPrefetchHandler.prototype.prefetchForum=function(e,n,t,o){var r=this;return this.forumProvider.getForum(n,e.id,o).then(function(t){var i=[];return i.push(r.getPostsForPrefetch(t,o).then(function(i){var l=[],s=r.getIntroFilesFromInstance(e,t).concat(r.getPostsFiles(i));return l.push(r.filepoolProvider.addFilesToQueue(o,s,r.component,e.id)),l.push(r.prefetchGroupsInfo(t,n,t.cancreatediscussions,o)),l.push(r.userProvider.prefetchUserAvatars(i,"userpictureurl",o)),Promise.all(l)})),i.push(r.forumProvider.getAccessInformation(t.id,!1,o)),r.forumProvider.isDiscussionListSortingAvailable()&&i.push(r.userProvider.getUserPreference(l.a.PREFERENCE_SORTORDER,o)),Promise.all(i)})},AddonModForumPrefetchHandler.prototype.prefetchGroupsInfo=function(e,n,t,o){var r=this;return this.groupsProvider.getActivityGroupMode(e.cmid,o).then(function(n){return n!==i.a.SEPARATEGROUPS&&n!==i.a.VISIBLEGROUPS?r.forumProvider.canAddDiscussionToAll(e.id,o).catch(function(){}):r.groupsProvider.getActivityAllowedGroups(e.cmid,void 0,o).then(function(l){return n===i.a.SEPARATEGROUPS?r.forumProvider.canAddDiscussionToAll(e.id,o).catch(function(){}):t?r.forumProvider.canAddDiscussionToAll(e.id,o).catch(function(){return{status:!1}}).then(function(n){if(!n.status){var t=[];return l.groups.forEach(function(n){t.push(r.forumProvider.canAddDiscussion(e.id,n.id,o).catch(function(){}))}),Promise.all(t)}}):void 0})}).catch(function(e){if(t)return Promise.reject(e)})},AddonModForumPrefetchHandler.prototype.sync=function(e,n,t){var o=[];return o.push(this.syncProvider.syncForumDiscussions(e.instance,void 0,t)),o.push(this.syncProvider.syncForumReplies(e.instance,void 0,t)),o.push(this.syncProvider.syncRatings(e.id,void 0,!0,t)),Promise.all(o).then(function(e){return e.reduce(function(e,n){return{updated:e.updated||n.updated,warnings:(e.warnings||[]).concat(n.warnings||[])}},{updated:!1})})},AddonModForumPrefetchHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(143)),i=t(205),l=(t(363),function(e){function AddonModGlossaryPrefetchHandler(n,t,o,r,l,s,a,u,d,c,p,f,h){var m=e.call(this,n,t,o,r,l,s,a,u,d)||this;return m.glossaryProvider=c,m.commentsProvider=p,m.syncProvider=f,m.userProvider=h,m.name="AddonModGlossary",m.modName="glossary",m.component=i.a.COMPONENT,m.updatesNames=/^configuration$|^.*files$|^entries$/,m}return Object(o.__extends)(AddonModGlossaryPrefetchHandler,e),AddonModGlossaryPrefetchHandler.prototype.getFiles=function(e,n,t){var o=this;return this.glossaryProvider.getGlossary(n,e.id).then(function(n){return o.glossaryProvider.fetchAllEntries(o.glossaryProvider.getEntriesByLetter,[n.id,"ALL"]).then(function(t){return o.getFilesFromGlossaryAndEntries(e,n,t)})}).catch(function(){return[]})},AddonModGlossaryPrefetchHandler.prototype.getFilesFromGlossaryAndEntries=function(e,n,t){var o=this,r=this.getIntroFilesFromInstance(e,n),i=this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2");return t.forEach(function(e){r=r.concat(e.attachments),i&&e.definitioninlinefiles&&e.definitioninlinefiles.length?r=r.concat(e.definitioninlinefiles):e.definition&&!i&&(r=r.concat(o.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.definition)))}),r},AddonModGlossaryPrefetchHandler.prototype.invalidateContent=function(e,n){return this.glossaryProvider.invalidateContent(e,n)},AddonModGlossaryPrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,t,this.prefetchGlossary.bind(this))},AddonModGlossaryPrefetchHandler.prototype.prefetchGlossary=function(e,n,t,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.glossaryProvider.getGlossary(n,e.id,o).then(function(n){var t=[];return n.browsemodes.forEach(function(e){switch(e){case"letter":break;case"cat":t.push(r.glossaryProvider.fetchAllEntries(r.glossaryProvider.getEntriesByCategory,[n.id,i.a.SHOW_ALL_CATEGORIES],!1,!1,o));break;case"date":t.push(r.glossaryProvider.fetchAllEntries(r.glossaryProvider.getEntriesByDate,[n.id,"CREATION","DESC"],!1,!1,o)),t.push(r.glossaryProvider.fetchAllEntries(r.glossaryProvider.getEntriesByDate,[n.id,"UPDATE","DESC"],!1,!1,o));break;case"author":t.push(r.glossaryProvider.fetchAllEntries(r.glossaryProvider.getEntriesByAuthor,[n.id,"ALL","LASTNAME","ASC"],!1,!1,o))}}),t.push(r.glossaryProvider.fetchAllEntries(r.glossaryProvider.getEntriesByLetter,[n.id,"ALL"],!1,!1,o).then(function(t){var i=[],l=!r.commentsProvider.areCommentsDisabledInSite();t.forEach(function(e){n.allowcomments&&l&&i.push(r.commentsProvider.getComments("module",n.coursemodule,"mod_glossary",e.id,"glossary_entry",0,o))});var s=r.getFilesFromGlossaryAndEntries(e,n,t);return i.push(r.filepoolProvider.addFilesToQueue(o,s,r.component,e.id)),i.push(r.userProvider.prefetchUserAvatars(t,"userpictureurl",o)),Promise.all(i)})),t.push(r.glossaryProvider.getAllCategories(n.id,o)),t.push(r.courseProvider.getModuleBasicInfo(e.id,o)),t.push(r.courseProvider.getModuleBasicInfoByInstance(n.id,"glossary",o)),Promise.all(t)})},AddonModGlossaryPrefetchHandler.prototype.sync=function(e,n,t){var o=[this.syncProvider.syncGlossaryEntries(e.instance,void 0,t),this.syncProvider.syncRatings(e.id,void 0,t)];return Promise.all(o).then(function(e){return e.reduce(function(e,n){return{updated:e.updated||n.updated,warnings:(e.warnings||[]).concat(n.warnings||[])}},{updated:!1})})},AddonModGlossaryPrefetchHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(244)),i=t(237),l=function(e){function AddonModImscpPrefetchHandler(n,t,o,r,l,s,a,u,d,c){var p=e.call(this,n,t,o,r,l,s,a,u,d)||this;return p.imscpProvider=c,p.name="AddonModImscp",p.modName="imscp",p.component=i.a.COMPONENT,p}return Object(o.__extends)(AddonModImscpPrefetchHandler,e),AddonModImscpPrefetchHandler.prototype.downloadOrPrefetch=function(n,t,o,r){var i=this,l=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getPackageDirPathByUrl(l,n.url).then(function(r){var s=[];return s.push(e.prototype.downloadOrPrefetch.call(i,n,t,o,r)),s.push(i.imscpProvider.getImscp(t,n.id,l)),Promise.all(s)})},AddonModImscpPrefetchHandler.prototype.getIntroFiles=function(e,n){var t=this;return this.imscpProvider.getImscp(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},AddonModImscpPrefetchHandler.prototype.invalidateContent=function(e,n){return this.imscpProvider.invalidateContent(e,n)},AddonModImscpPrefetchHandler.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.imscpProvider.invalidateImscpData(n)),t.push(this.courseProvider.invalidateModule(e.id)),Promise.all(t)},AddonModImscpPrefetchHandler.prototype.isEnabled=function(){return this.imscpProvider.isPluginEnabled()},AddonModImscpPrefetchHandler.prototype.isFileDownloadable=function(e){return this.imscpProvider.isFileDownloadable(e)},AddonModImscpPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(244)),i=t(222),l=(t(332),function(e){function AddonModPagePrefetchHandler(n,t,o,r,l,s,a,u,d,c,p){var f=e.call(this,n,t,o,r,l,s,a,u,d)||this;return f.pageProvider=c,f.pageHelper=p,f.name="AddonModPage",f.modName="page",f.component=i.a.COMPONENT,f.updatesNames=/^configuration$|^.*files$/,f}return Object(o.__extends)(AddonModPagePrefetchHandler,e),AddonModPagePrefetchHandler.prototype.downloadOrPrefetch=function(n,t,o,r){var i=[];return i.push(e.prototype.downloadOrPrefetch.call(this,n,t,o)),this.pageProvider.isGetPageWSAvailable()&&i.push(this.pageProvider.getPageData(t,n.id)),Promise.all(i)},AddonModPagePrefetchHandler.prototype.invalidateContent=function(e,n){return this.pageProvider.invalidateContent(e,n)},AddonModPagePrefetchHandler.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.pageProvider.invalidatePageData(n)),t.push(this.courseProvider.invalidateModule(e.id)),this.utils.allPromises(t)},AddonModPagePrefetchHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=(t(4),t(244)),i=t(223),l=(t(299),t(42)),s=function(e){function AddonModResourcePrefetchHandler(n,t,o,r,l,s,a,u,d,c,p){var f=e.call(this,n,t,o,r,l,s,a,u,d)||this;return f.resourceProvider=c,f.resourceHelper=p,f.name="AddonModResource",f.modName="resource",f.component=i.a.COMPONENT,f}return Object(o.__extends)(AddonModResourcePrefetchHandler,e),AddonModResourcePrefetchHandler.prototype.determineStatus=function(e,n,t){if(n==l.a.DOWNLOADED&&e)if(e.contentsinfo){if(e.contentsinfo.repositorytype)return l.a.OUTDATED}else if(e.contents){var o=e.contents[0];if(o&&o.isexternalfile)return l.a.OUTDATED}return n},AddonModResourcePrefetchHandler.prototype.downloadOrPrefetch=function(n,t,o,r){var i=this;return(this.resourceHelper.isDisplayedInIframe(n)?this.filepoolProvider.getPackageDirPathByUrl(this.sitesProvider.getCurrentSiteId(),n.url):Promise.resolve()).then(function(r){var l=[];return l.push(e.prototype.downloadOrPrefetch.call(i,n,t,o,r)),i.resourceProvider.isGetResourceWSAvailable()&&l.push(i.resourceProvider.getResourceData(t,n.id)),Promise.all(l)})},AddonModResourcePrefetchHandler.prototype.invalidateContent=function(e,n){return this.resourceProvider.invalidateContent(e,n)},AddonModResourcePrefetchHandler.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.resourceProvider.invalidateResourceData(n)),t.push(this.courseProvider.invalidateModule(e.id,void 0,this.modName)),Promise.all(t)},AddonModResourcePrefetchHandler.prototype.isDownloadable=function(e,n){var t=this;return this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.7")?Promise.resolve(!0):this.loadContents(e,n,!1).then(function(){return!t.resourceHelper.isNextcloudFile(e)})},AddonModResourcePrefetchHandler.prototype.isEnabled=function(){return this.resourceProvider.isPluginEnabled()},AddonModResourcePrefetchHandler}(r.a)},function(e,n,t){"use strict";function View_CoreSitePluginsPluginContentComponent_0(e){return o._42(0,[o._37(402653184,1,{compileComponent:0}),(e()(),o._16(1,0,null,null,5,"core-loading",[["class","core-loading-center"]],null,null,null,r.b,r.a)),o._15(2,638976,null,0,i.a,[l.a,o.p,s.a,a.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(4,0,null,0,1,"core-compile-html",[],null,null,null,u.b,u.a)),o._15(5,966656,[[1,4],["compile",4]],0,d.a,[c.a,o.i,o.p,[2,p.a],o.w,f.a,a.a],{text:[0,"text"],javascript:[1,"javascript"],jsData:[2,"jsData"],forceCompile:[3,"forceCompile"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.dataLoaded);e(n,5,0,t.content,t.javascript,t.jsData,t.forceCompile)},null)}t.d(n,"a",function(){return h}),n.b=View_CoreSitePluginsPluginContentComponent_0;var o=t(1),r=t(55),i=t(52),l=t(19),s=t(10),a=t(3),u=t(219),d=t(194),c=t(156),p=t(21),f=t(5),h=(t(59),o._14({encapsulation:2,styles:[],data:{}}))},,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";t(0),t(1),t(555),t(6);var o=function(){function SQLiteDB(e,n,t){this.name=e,this.sqlite=n,this.platform=t,this.init()}return SQLiteDB.prototype.buildCreateTableSql=function(e,n,t,o,r,i){var l=[],s="CREATE TABLE IF NOT EXISTS "+e+" (";for(var a in n){var u=n[a],d=u.name||"";u.type&&(d+=" "+u.type),u.primaryKey&&(d+=" PRIMARY KEY",u.autoIncrement&&(d+=" AUTOINCREMENT")),u.notNull&&(d+=" NOT NULL"),u.unique&&(d+=" UNIQUE"),u.check&&(d+=" CHECK ("+u.check+")"),void 0!==u.default&&(d+=" DEFAULT "+u.default),l.push(d)}if(s+=l.join(", "),t&&t.length&&(s+=", PRIMARY KEY ("+t.join(", ")+")"),o&&o.length)for(var a in o){var c=o[a];c&&c.length&&(s+=", UNIQUE ("+c.join(", ")+")")}i&&(s+=", CHECK ("+i+")");for(var a in r){var p=r[a];if(!p.columns||p.columns.length)return;s+=", FOREIGN KEY ("+p.columns.join(", ")+") REFERENCES "+p.table+" ",p.foreignColumns&&p.foreignColumns.length&&(s+="("+p.foreignColumns.join(", ")+")"),p.actions&&(s+=" "+p.actions)}return s+")"},SQLiteDB.prototype.close=function(){var e=this;return this.ready().then(function(){return e.db.close()})},SQLiteDB.prototype.countRecords=function(e,n){var t=this.whereClause(n);return this.countRecordsSelect(e,t[0],t[1])},SQLiteDB.prototype.countRecordsSelect=function(e,n,t,o){return void 0===n&&(n=""),void 0===o&&(o="COUNT('x')"),n&&(n="WHERE "+n),this.countRecordsSql("SELECT "+o+" FROM "+e+" "+n,t)},SQLiteDB.prototype.countRecordsSql=function(e,n){return this.getFieldSql(e,n).then(function(e){return"number"!=typeof e||e<0?0:e})},SQLiteDB.prototype.createTable=function(e,n,t,o,r,i){var l=this.buildCreateTableSql(e,n,t,o,r,i);return this.execute(l)},SQLiteDB.prototype.createTableFromSchema=function(e){return this.createTable(e.name,e.columns,e.primaryKeys,e.uniqueKeys,e.foreignKeys,e.tableCheck)},SQLiteDB.prototype.createTablesFromSchema=function(e){var n=this,t=[];return e.forEach(function(e){t.push(n.createTableFromSchema(e))}),Promise.all(t)},SQLiteDB.prototype.deleteRecords=function(e,n){if(null===n||void 0===n)return this.execute("DELETE FROM "+e);var t=this.whereClause(n);return this.deleteRecordsSelect(e,t[0],t[1])},SQLiteDB.prototype.deleteRecordsList=function(e,n,t){var o=this.whereClauseList(n,t);return this.deleteRecordsSelect(e,o[0],o[1])},SQLiteDB.prototype.deleteRecordsSelect=function(e,n,t){return void 0===n&&(n=""),n&&(n="WHERE "+n),this.execute("DELETE FROM "+e+" "+n,t)},SQLiteDB.prototype.dropTable=function(e){return this.execute("DROP TABLE IF EXISTS "+e)},SQLiteDB.prototype.execute=function(e,n){var t=this;return this.ready().then(function(){return t.db.executeSql(e,n)})},SQLiteDB.prototype.executeBatch=function(e){var n=this;return this.ready().then(function(){return n.db.sqlBatch(e)})},SQLiteDB.prototype.formatDataToInsert=function(e){if(e)for(var n in e){void 0===e[n]&&delete e[n]}},SQLiteDB.prototype.getAllRecords=function(e){return this.getRecords(e)},SQLiteDB.prototype.getField=function(e,n,t){var o=this.whereClause(t);return this.getFieldSelect(e,n,o[0],o[1])},SQLiteDB.prototype.getFieldSelect=function(e,n,t,o){return void 0===t&&(t=""),t&&(t="WHERE "+t),this.getFieldSql("SELECT "+n+" FROM "+e+" "+t,o)},SQLiteDB.prototype.getFieldSql=function(e,n){return this.getRecordSql(e,n).then(function(e){return e?e[Object.keys(e)[0]]:Promise.reject(null)})},SQLiteDB.prototype.getInOrEqual=function(e,n,t){void 0===n&&(n=!0);var o,r;if(void 0===t&&(t=!1),Array.isArray(e)&&!e.length&&!1===t)return["",[]];if(Array.isArray(e)&&!e.length){if(null===t)return o=n?" IS NULL":" IS NOT NULL",[o,[]];e=[t]}return Array.isArray(e)&&1!=e.length?(o=(n?"":"NOT ")+"IN ("+",?".repeat(e.length).substr(1)+")",r=e):(o=n?"= ?":"<> ?",r=Array.isArray(e)?e:[e]),[o,r]},SQLiteDB.prototype.getName=function(){return this.name},SQLiteDB.prototype.getRecord=function(e,n,t){void 0===t&&(t="*");var o=this.whereClause(n);return this.getRecordSelect(e,o[0],o[1],t)},SQLiteDB.prototype.getRecordSelect=function(e,n,t,o){return void 0===n&&(n=""),void 0===t&&(t=[]),void 0===o&&(o="*"),n&&(n=" WHERE "+n),this.getRecordSql("SELECT "+o+" FROM "+e+" "+n,t)},SQLiteDB.prototype.getRecordSql=function(e,n){return this.getRecordsSql(e,n,0,1).then(function(e){return e&&e.length?e[0]:Promise.reject(null)})},SQLiteDB.prototype.getRecords=function(e,n,t,o,r,i){void 0===t&&(t=""),void 0===o&&(o="*"),void 0===r&&(r=0),void 0===i&&(i=0);var l=this.whereClause(n);return this.getRecordsSelect(e,l[0],l[1],t,o,r,i)},SQLiteDB.prototype.getRecordsList=function(e,n,t,o,r,i,l){void 0===o&&(o=""),void 0===r&&(r="*"),void 0===i&&(i=0),void 0===l&&(l=0);var s=this.whereClauseList(n,t);return this.getRecordsSelect(e,s[0],s[1],o,r,i,l)},SQLiteDB.prototype.getRecordsSelect=function(e,n,t,o,r,i,l){void 0===n&&(n=""),void 0===t&&(t=[]),void 0===o&&(o=""),void 0===r&&(r="*"),void 0===i&&(i=0),void 0===l&&(l=0),n&&(n=" WHERE "+n),o&&(o=" ORDER BY "+o);return this.getRecordsSql("SELECT "+r+" FROM "+e+" "+n+" "+o,t,i,l)},SQLiteDB.prototype.getRecordsSql=function(e,n,t,o){var r=this.normaliseLimitFromNum(t,o);return(r[0]||r[1])&&(r[1]<1&&(r[1]=Number.MAX_VALUE),e+=" LIMIT "+r[0]+", "+r[1]),this.execute(e,n).then(function(e){for(var n=[],t=0;t<e.rows.length;t++)n.push(e.rows.item(t));return n})},SQLiteDB.prototype.getSqlInsertQuery=function(e,n){this.formatDataToInsert(n);var t=Object.keys(n);return["INSERT OR REPLACE INTO "+e+" ("+t.join(",")+") VALUES ("+",?".repeat(t.length).substr(1)+")",t.map(function(e){return n[e]})]},SQLiteDB.prototype.init=function(){var e=this;this.promise=this.platform.ready().then(function(){return e.sqlite.create({name:e.name,location:"default"})}).then(function(n){e.db=n})},SQLiteDB.prototype.insertRecord=function(e,n){var t=this.getSqlInsertQuery(e,n);return this.execute(t[0],t[1]).then(function(e){return e.insertId})},SQLiteDB.prototype.insertRecords=function(e,n){var t=this;if(!Array.isArray(n))return Promise.reject(null);var o=[];return n.forEach(function(n){o.push(t.getSqlInsertQuery(e,n))}),this.executeBatch(o)},SQLiteDB.prototype.insertRecordsFrom=function(e,n,t,o){void 0===o&&(o="*");var r=this.whereClause(t);return this.execute("INSERT INTO "+e+" SELECT "+o+" FROM "+n+" "+(r[0]?"WHERE "+r[0]:""),r[1])},SQLiteDB.prototype.normaliseLimitFromNum=function(e,n){return void 0!==e&&null!==e&&""!==e&&-1!==e||(e=0),void 0!==n&&null!==n&&""!==n&&-1!==n||(n=0),e=parseInt(e,10),n=parseInt(n,10),e=Math.max(0,e),n=Math.max(0,n),[e,n]},SQLiteDB.prototype.open=function(){var e=this;return this.ready().then(function(){return e.db.open()})},SQLiteDB.prototype.ready=function(){return this.promise},SQLiteDB.prototype.recordExists=function(e,n){return this.getRecord(e,n).then(function(e){if(!e)return Promise.reject(null)})},SQLiteDB.prototype.recordExistsSelect=function(e,n,t){return void 0===n&&(n=""),void 0===t&&(t=[]),this.getRecordSelect(e,n,t).then(function(e){if(!e)return Promise.reject(null)})},SQLiteDB.prototype.recordExistsSql=function(e,n){return this.getRecordSql(e,n).then(function(e){if(!e)return Promise.reject(null)})},SQLiteDB.prototype.tableExists=function(e){return this.recordExists("sqlite_master",{type:"table",tbl_name:e})},SQLiteDB.prototype.updateRecords=function(e,n,t){if(this.formatDataToInsert(n),!n||!Object.keys(n).length)return Promise.resolve();var o,r,i=this.whereClause(t),l=[];for(var s in n)l.push(s+" = ?");return o="UPDATE "+e+" SET "+l.join(", ")+" WHERE "+i[0],r=Object.keys(n).map(function(e){return n[e]}).concat(i[1]),this.execute(o,r)},SQLiteDB.prototype.updateRecordsWhere=function(e,n,t,o){if(!n||!Object.keys(n).length)return Promise.resolve();var r,i,l=[];for(var s in n)l.push(s+" = ?");return r="UPDATE "+e+" SET "+l.join(", "),t&&(r+=" WHERE "+t),i=Object.keys(n).map(function(e){return n[e]}),t&&o&&(i=i.concat(o)),this.execute(r,i)},SQLiteDB.prototype.whereClause=function(e){if(void 0===e&&(e={}),!e||!Object.keys(e).length)return["1 = 1",[]];var n=[],t=[];for(var o in e){var r=e[o];void 0===r||null===r?n.push(o+" IS NULL"):(n.push(o+" = ?"),t.push(r))}return[n.join(" AND "),t]},SQLiteDB.prototype.whereClauseList=function(e,n){if(!n||!n.length)return["1 = 2",[]];var t=[],o="";if(n.forEach(function(n){"boolean"==typeof n&&(n=Number(n)),void 0===n||null===n?o=e+" IS NULL":t.push(n)}),t&&t.length)if(""!==o&&(o+=" OR "),1==t.length)o=o+e+" = ?";else{var r=",?".repeat(t.length).substr(1);o=o+e+" IN ("+r+")"}return[o,t]},SQLiteDB}(),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),i=function(e){function SQLiteDBMock(n){var t=e.call(this,n,null,null)||this;return t.name=n,t}return r(SQLiteDBMock,e),SQLiteDBMock.prototype.close=function(){return Promise.resolve()},SQLiteDBMock.prototype.emptyDatabase=function(){var e=this;return new Promise(function(n,t){e.db.transaction(function(e){e.executeSql("SELECT * FROM sqlite_master\n                            WHERE name NOT LIKE 'sqlite\\_%' escape '\\' AND name NOT LIKE '\\_%' escape '\\'",[],function(e,o){if(o.rows.length<=0)n();else{for(var r=[],i=function(n){r.push(new Promise(function(t,r){var i=JSON.stringify(o.rows.item(n).name);e.executeSql("DROP TABLE "+i,[],t,r)}))},l=0;l<o.rows.length;l++)i(l);Promise.all(r).then(n,t)}},t)})})},SQLiteDBMock.prototype.execute=function(e,n){var t=this;return new Promise(function(o,r){t.db.transaction(function(t){t.executeSql(e,n,function(e,n){o(n)},function(t,o){console.error(e,n,o),r(o)})})})},SQLiteDBMock.prototype.executeBatch=function(e){var n=this;return new Promise(function(t,o){n.db.transaction(function(n){var r=[];e.forEach(function(e){r.push(new Promise(function(t,o){var r,i;Array.isArray(e)?(r=e[0],i=e[1]):(r=e,i=null),n.executeSql(r,i,function(e,n){t(n)},function(e,n){console.error(r,i,n),o(n)})}))}),Promise.all(r).then(t,o)})})},SQLiteDBMock.prototype.init=function(){this.db=window.openDatabase(this.name,"1.0",this.name,524288e3),this.promise=Promise.resolve()},SQLiteDBMock.prototype.open=function(){return Promise.resolve()},SQLiteDBMock}(o);t.d(n,"a",function(){return l});var l=function(){function CoreDbProvider(e,n){this.sqlite=e,this.platform=n,this.dbInstances={}}return CoreDbProvider.prototype.getDB=function(e,n){return(void 0===this.dbInstances[e]||n)&&(this.dbInstances[e]=this.platform.is("cordova")?new o(e,this.sqlite,this.platform):new i(e)),this.dbInstances[e]},CoreDbProvider.prototype.deleteDB=function(e){var n=this;return(void 0!==this.dbInstances[e]?this.dbInstances[e].close():Promise.resolve()).then(function(){var t=n.dbInstances[e];return delete n.dbInstances[e],n.platform.is("cordova")?n.sqlite.deleteDatabase({name:e,location:"default"}):t.emptyDatabase()})},CoreDbProvider}()},,,,,,,,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreInterceptor(){}return e=CoreInterceptor,CoreInterceptor.prototype.intercept=function(n,t){var o=n.clone({headers:n.headers.set("Content-Type","application/x-www-form-urlencoded"),body:"object"==typeof n.body&&"[object File]"!=String(n.body)?e.serialize(n.body):n.body});return t.handle(o)},CoreInterceptor.serialize=function(e,n){var t,o="";for(var r in e){var i=e[r];if(i instanceof Array)for(var l=0;l<i.length;++l)(t={})[r+"["+l+"]"]=i[l],o+=this.serialize(t)+"&";else if(i instanceof Object)for(var s in i)(t={})[r+"["+s+"]"]=i[s],o+=this.serialize(t)+"&";else(n||void 0!==i&&null!==i)&&(o+=encodeURIComponent(r)+"="+encodeURIComponent(i)+"&")}return o.length?o.substr(0,o.length-1):o},CoreInterceptor;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function CoreSitesFactoryProvider(e){this.injector=e}return CoreSitesFactoryProvider.prototype.makeSite=function(e,n,t,r,i,l,s){return new o.a(this.injector,e,n,t,r,i,l,s)},CoreSitesFactoryProvider.prototype.getSiteMethods=function(){var e=[];for(var n in o.a.prototype)e.push(n);return e},CoreSitesFactoryProvider}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(15),r=(t.n(o),function(){function CoreTimeAgoPipe(e,n){this.translate=n,this.logger=e.getInstance("CoreTimeAgoPipe")}return CoreTimeAgoPipe.prototype.transform=function(e){if("string"==typeof e){var n=parseInt(e,10);if(isNaN(n))return this.logger.error("Invalid value received",e),e;e=n}return this.translate.instant("core.ago",{$a:o(1e3*e).fromNow(!0)})},CoreTimeAgoPipe}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1907),r=(t.n(o),function(){function CoreChartComponent(e,n,t){this.filterProvider=e,this.utils=n,this.filterHelper=t,this.labels=[],this.height=300}return e=CoreChartComponent,CoreChartComponent.prototype.ngOnInit=function(){var e=this,n={};n=void 0===this.legend?{display:!1,labels:{generateLabels:function(e){var n=e.data;if(n.labels.length&&n.labels.length){var t=n.datasets[0];return n.labels.map(function(e,n){return{text:e+": "+t.data[n],fillStyle:t.backgroundColor[n]}})}return[]}}}:Object.assign({},this.legend),"bar"==this.type&&this.data.length>=5&&(this.type="horizontalBar"),this.formatLabels().then(function(){var t=e.canvas.nativeElement.getContext("2d");e.chart=new o.Chart(t,{type:e.type,data:{labels:e.labels,datasets:[{data:e.data,backgroundColor:e.getRandomColors(e.data.length)}]},options:{legend:n}})})},CoreChartComponent.prototype.ngOnChanges=function(){var e=this;this.chart&&this.formatLabels().then(function(){e.chart.data.datasets[0]={data:e.data,backgroundColor:e.getRandomColors(e.data.length)},e.chart.data.labels=e.labels,e.chart.update()})},CoreChartComponent.prototype.formatLabels=function(){var e=this;if(this.filter=void 0===this.filter?!(!this.contextLevel||!this.contextInstanceId):!!this.filter,!this.filter)return Promise.resolve();var n={clean:!0,singleLine:!0,courseId:this.courseId,wsNotFiltered:this.utils.isTrueOrOne(this.wsNotFiltered)};return this.filterHelper.getFilters(this.contextLevel,this.contextInstanceId,n).then(function(t){var o=[];return e.labels.forEach(function(r,i){o.push(e.filterProvider.formatText(r,n,t).then(function(n){e.labels[i]=n}))}),Promise.all(o)})},CoreChartComponent.prototype.getRandomColors=function(n){for(;e.backgroundColors.length<n;){var t=Math.floor(255*Math.random()),o=Math.floor(255*Math.random()),r=Math.floor(255*Math.random());e.backgroundColors.push("rgba("+t+", "+o+", "+r+", 0.6)")}return e.backgroundColors.slice(0,n)},CoreChartComponent.prototype.ngOnDestroy=function(){this.chart&&(this.chart.destroy(),this.chart=!1)},CoreChartComponent.backgroundColors=["rgba(0,100,210, 0.6)","rgba(203,61,77, 0.6)","rgba(0,121,130, 0.6)","rgba(249,128,18, 0.6)","rgba(94,129,0, 0.6)","rgba(251,173,26, 0.6)"],CoreChartComponent;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(10),i=function(e){function CoreFileUploaderDelegate(n,t,o){var i=e.call(this,"CoreFileUploaderDelegate",n,t,o)||this;return i.sitesProvider=t,i.eventsProvider=o,o.on(r.a.LOGOUT,i.clearSiteHandlers.bind(i)),i}return Object(o.__extends)(CoreFileUploaderDelegate,e),CoreFileUploaderDelegate.prototype.clearSiteHandlers=function(){this.enabledHandlers={}},CoreFileUploaderDelegate.prototype.getHandlers=function(e){var n=[];for(var t in this.enabledHandlers){var o=this.enabledHandlers[t],r=void 0;if(e){if(!o.getSupportedMimetypes)continue;if(!(r=o.getSupportedMimetypes(e)).length)continue}var i=o.getData();i.priority=o.priority,i.mimetypes=r,n.push(i)}return n},CoreFileUploaderDelegate}(t(99).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreUserOfflineProvider(n){this.sitesProvider=n,this.siteSchema={name:"CoreUserOfflineProvider",version:1,tables:[{name:e.PREFERENCES_TABLE,columns:[{name:"name",type:"TEXT",unique:!0,notNull:!0},{name:"value",type:"TEXT"},{name:"onlinevalue",type:"TEXT"}]}]},this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=CoreUserOfflineProvider,CoreUserOfflineProvider.prototype.getChangedPreferences=function(n){return this.sitesProvider.getSite(n).then(function(n){return n.getDb().getRecordsSelect(e.PREFERENCES_TABLE,"value != onlineValue")})},CoreUserOfflineProvider.prototype.getPreference=function(n,t){return this.sitesProvider.getSite(t).then(function(t){var o={name:n};return t.getDb().getRecord(e.PREFERENCES_TABLE,o)})},CoreUserOfflineProvider.prototype.setPreference=function(n,t,o,r){var i=this;return this.sitesProvider.getSite(r).then(function(r){return(void 0===o?i.getPreference(n,r.id).then(function(e){return e.onlinevalue}):Promise.resolve(o)).then(function(o){var i={name:n,value:t,onlinevalue:o};return r.getDb().insertRecord(e.PREFERENCES_TABLE,i)})})},CoreUserOfflineProvider.PREFERENCES_TABLE="user_preferences",CoreUserOfflineProvider;var e}()},,,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(62);var o=t(396),r=(t(200),function(){function CoreCourseFormatSingleActivityComponent(e,n){this.moduleDelegate=e,this.injector=n,this.data={}}return CoreCourseFormatSingleActivityComponent.prototype.ngOnChanges=function(e){var n=this;if(this.course&&this.sections&&this.sections.length){var t=this.sections[0]&&this.sections[0].modules&&this.sections[0].modules[0];t&&!this.componentClass&&this.moduleDelegate.getMainComponent(this.injector,this.course,t).then(function(e){n.componentClass=e||o.a}),this.data.courseId=this.course.id,this.data.module=t}},CoreCourseFormatSingleActivityComponent.prototype.doRefresh=function(e,n,t){return t?Promise.resolve():Promise.resolve(this.dynamicComponent.callComponentFunction("doRefresh",[e,n]))},CoreCourseFormatSingleActivityComponent.prototype.ionViewDidEnter=function(){this.dynamicComponent.callComponentFunction("ionViewDidEnter")},CoreCourseFormatSingleActivityComponent.prototype.ionViewDidLeave=function(){this.dynamicComponent.callComponentFunction("ionViewDidLeave")},CoreCourseFormatSingleActivityComponent}())},function(e,n){e.exports=require("fs")},,,function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(56),r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),i=function(e){function CoreContentLinksModuleGradeHandler(n,t,o,r,i){var l=e.call(this)||this;return l.courseHelper=n,l.domUtils=t,l.sitesProvider=o,l.addon=r,l.modName=i,l.useModNameToGetModule=!1,l.pattern=new RegExp("/mod/"+i+"/grade.php.*([&?]id=\\d+)"),l.featureName="CoreCourseModuleDelegate_"+r,l}return r(CoreContentLinksModuleGradeHandler,e),CoreContentLinksModuleGradeHandler.prototype.getActions=function(e,n,t,o){var r=this;return o=o||t.courseid||t.cid,[{action:function(e,i){var l=r.domUtils.showModalLoading();r.sitesProvider.getSite(e).then(function(l){t.userid&&t.userid!=l.getUserId()?r.canReview?r.goToReview(n,t,o,e,i):l.openInBrowserWithAutoLogin(n):r.courseHelper.navigateToModule(parseInt(t.id,10),e,o,void 0,r.useModNameToGetModule?r.modName:void 0,void 0,i)}).finally(function(){l.dismiss()})}}]},CoreContentLinksModuleGradeHandler.prototype.goToReview=function(e,n,t,o,r){return Promise.resolve()},CoreContentLinksModuleGradeHandler}(o.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(59),t(197)),i=function(e){function CoreSitePluginsBlockComponent(n,t,o){var r=e.call(this,n,"CoreSitePluginsBlockComponent")||this;return r.injector=n,r.sitePluginsProvider=t,r.blockDelegate=o,r}return Object(o.__extends)(CoreSitePluginsBlockComponent,e),CoreSitePluginsBlockComponent.prototype.ngOnChanges=function(){if(!this.component){var e=this.blockDelegate.getHandlerName(this.block.name),n=this.sitePluginsProvider.getSitePluginHandler(e);n&&(this.component=n.plugin.component,this.method=n.handlerSchema.method,this.args={contextlevel:this.contextLevel,instanceid:this.instanceId},this.initResult=n.initResult)}},CoreSitePluginsBlockComponent.prototype.invalidateContent=function(){return this.sitePluginsProvider.invalidateContent(this.component,this.method,this.args)},CoreSitePluginsBlockComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(59);var o=function(){function CoreSitePluginsCourseOptionComponent(e){this.sitePluginsProvider=e}return CoreSitePluginsCourseOptionComponent.prototype.ngOnInit=function(){if(this.handlerUniqueName){var e=this.sitePluginsProvider.getSitePluginHandler(this.handlerUniqueName);e&&(this.component=e.plugin.component,this.method=e.handlerSchema.method,this.args={courseid:this.courseId},this.initResult=e.initResult)}},CoreSitePluginsCourseOptionComponent.prototype.refreshData=function(e){this.content.refreshContent(!1).finally(function(){e.complete()})},CoreSitePluginsCourseOptionComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(59),t(496);var o=function(){function CoreSitePluginsCourseFormatComponent(e,n){this.sitePluginsProvider=e,this.courseFormatDelegate=n}return CoreSitePluginsCourseFormatComponent.prototype.ngOnChanges=function(){if(this.course&&this.course.format){if(!this.component){var e=this.courseFormatDelegate.getHandlerName(this.course.format),n=this.sitePluginsProvider.getSitePluginHandler(e);n&&(this.component=n.plugin.component,this.method=n.handlerSchema.method,this.args={courseid:this.course.id,downloadenabled:this.downloadEnabled},this.initResult=n.initResult)}this.data={course:this.course,sections:this.sections,downloadEnabled:this.downloadEnabled,initialSectionId:this.initialSectionId,initialSectionNumber:this.initialSectionNumber,moduleId:this.moduleId,completionChanged:this.completionChanged,coreCourseFormatComponent:this.coreCourseFormatComponent}}},CoreSitePluginsCourseFormatComponent.prototype.doRefresh=function(e,n,t){return Promise.resolve(this.content.refreshContent(t))},CoreSitePluginsCourseFormatComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(59),t(269)),i=function(e){function CoreSitePluginsQuestionComponent(n,t,o){var r=e.call(this,n,t)||this;return r.questionDelegate=o,r}return Object(o.__extends)(CoreSitePluginsQuestionComponent,e),CoreSitePluginsQuestionComponent.prototype.ngOnInit=function(){this.jsData.question=this.question,this.jsData.component=this.component,this.jsData.componentId=this.componentId,this.jsData.attemptId=this.attemptId,this.jsData.offlineEnabled=this.offlineEnabled,this.jsData.buttonClicked=this.buttonClicked,this.jsData.onAbort=this.onAbort,this.question&&this.getHandlerData(this.questionDelegate.getHandlerName("qtype_"+this.question.type))},CoreSitePluginsQuestionComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(59),t(269)),i=function(e){function CoreSitePluginsQuestionBehaviourComponent(n,t,o){var r=e.call(this,n,t)||this;return r.questionBehaviourDelegate=o,r}return Object(o.__extends)(CoreSitePluginsQuestionBehaviourComponent,e),CoreSitePluginsQuestionBehaviourComponent.prototype.ngOnInit=function(){this.jsData.question=this.question,this.jsData.component=this.component,this.jsData.componentId=this.componentId,this.jsData.attemptId=this.attemptId,this.jsData.offlineEnabled=this.offlineEnabled,this.jsData.buttonClicked=this.buttonClicked,this.jsData.onAbort=this.onAbort,this.question&&this.getHandlerData(this.questionBehaviourDelegate.getHandlerName(this.question.preferredBehaviour))},CoreSitePluginsQuestionBehaviourComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(59),t(269)),i=function(e){function CoreSitePluginsUserProfileFieldComponent(n,t,o){var r=e.call(this,n,t)||this;return r.profileFieldDelegate=o,r.edit=!1,r.disabled=!1,r.signup=!1,r}return Object(o.__extends)(CoreSitePluginsUserProfileFieldComponent,e),CoreSitePluginsUserProfileFieldComponent.prototype.ngOnInit=function(){this.jsData.field=this.field,this.jsData.signup=this.signup,this.jsData.edit=this.edit,this.jsData.disabled=this.disabled,this.jsData.form=this.form,this.jsData.registerAuth=this.registerAuth,this.field&&this.getHandlerData(this.profileFieldDelegate.getHandlerName(this.field.type||this.field.datatype))},CoreSitePluginsUserProfileFieldComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(59),t(269)),i=function(e){function CoreSitePluginsQuizAccessRuleComponent(n,t,o){var r=e.call(this,n,t)||this;return r.accessRulesDelegate=o,r}return Object(o.__extends)(CoreSitePluginsQuizAccessRuleComponent,e),CoreSitePluginsQuizAccessRuleComponent.prototype.ngOnInit=function(){this.jsData.rule=this.rule,this.jsData.quiz=this.quiz,this.jsData.attempt=this.attempt,this.jsData.prefetch=this.prefetch,this.jsData.siteId=this.siteId,this.jsData.form=this.form,this.rule&&this.getHandlerData(this.accessRulesDelegate.getHandlerName(this.rule))},CoreSitePluginsQuizAccessRuleComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(59),t(269)),i=function(e){function CoreSitePluginsAssignFeedbackComponent(n,t,o){var r=e.call(this,n,t)||this;return r.assignFeedbackDelegate=o,r}return Object(o.__extends)(CoreSitePluginsAssignFeedbackComponent,e),CoreSitePluginsAssignFeedbackComponent.prototype.ngOnInit=function(){this.jsData.assign=this.assign,this.jsData.submission=this.submission,this.jsData.plugin=this.plugin,this.jsData.userId=this.userId,this.jsData.configs=this.configs,this.jsData.edit=this.edit,this.jsData.canEdit=this.canEdit,this.plugin&&this.getHandlerData(this.assignFeedbackDelegate.getHandlerName(this.plugin.type))},CoreSitePluginsAssignFeedbackComponent.prototype.invalidate=function(){return Promise.resolve()},CoreSitePluginsAssignFeedbackComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(59),t(269)),i=function(e){function CoreSitePluginsAssignSubmissionComponent(n,t,o){var r=e.call(this,n,t)||this;return r.assignSubmissionDelegate=o,r}return Object(o.__extends)(CoreSitePluginsAssignSubmissionComponent,e),CoreSitePluginsAssignSubmissionComponent.prototype.ngOnInit=function(){this.jsData.assign=this.assign,this.jsData.submission=this.submission,this.jsData.plugin=this.plugin,this.jsData.configs=this.configs,this.jsData.edit=this.edit,this.jsData.allowOffline=this.allowOffline,this.plugin&&this.getHandlerData(this.assignSubmissionDelegate.getHandlerName(this.plugin.type))},CoreSitePluginsAssignSubmissionComponent.prototype.invalidate=function(){return Promise.resolve()},CoreSitePluginsAssignSubmissionComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function AddonModWorkshopAssessmentStrategyComponentBase(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4),t(11),t(155),t(7),t(5),t(12),t(23),t(3);var o=t(117),r=t(42),i=function(){function CoreCustomURLSchemesProvider(e,n,t,o,r,i,l,s,a,u,d,c,p){this.appProvider=n,this.utils=t,this.loginHelper=o,this.linksHelper=r,this.initDelegate=i,this.domUtils=l,this.urlUtils=s,this.sitesProvider=a,this.textUtils=u,this.linksDelegate=d,this.translate=c,this.sitePluginsProvider=p,this.lastUrls={},this.logger=e.getInstance("CoreCustomURLSchemesProvider")}return CoreCustomURLSchemesProvider.prototype.handleCustomURL=function(e){var n=this;if(!this.isCustomURL(e))return Promise.reject(null);var t,o,i=!1;if(!(this.lastUrls[e]&&Date.now()-this.lastUrls[e]<3e3))return this.lastUrls[e]=Date.now(),this.initDelegate.ready().then(function(){return e=n.textUtils.decodeURIComponent(e),e=e.replace(/\/?#?\/?$/,""),t=n.domUtils.showModalLoading(),n.isCustomURLToken(e)?(i=!0,n.getCustomURLTokenData(e)):n.isCustomURLLink(e)?(e=e.replace(/\/\/link=(https?)\/\//,"//link=$1://"),n.getCustomURLLinkData(e)):(e=e.replace(/\/\/(https?)\/\//,"//$1://"),n.getCustomURLData(e))}).then(function(e){if((o=e).redirect&&o.redirect.match(/^https?:\/\//)&&-1==o.redirect.indexOf(o.siteUrl))return Promise.reject(n.translate.instant("core.contentlinks.errorredirectothersite"));var t=n.sitesProvider.getCurrentSite();if(o.token){if(t&&t.getToken()==o.token)return n.sitesProvider.getCurrentSiteId();return(o.siteUrl.match(/^https?:\/\//)?Promise.resolve():n.sitesProvider.checkSite(o.siteUrl).then(function(e){o.siteUrl=e.siteUrl})).then(function(){return n.sitesProvider.newSite(o.siteUrl,o.token,o.privateToken,i,n.loginHelper.getOAuthIdFromParams(o.ssoUrlParams))})}}).then(function(e){if(!i){o.redirect&&!o.redirect.match(/^https?:\/\//)&&(o.redirect=n.textUtils.concatenatePaths(o.siteUrl,o.redirect));return(e?Promise.resolve([e]):n.sitesProvider.getSiteIdsFromUrl(o.siteUrl,!0,o.username)).then(function(e){if(!(e.length>1))return 1==e.length?n.sitesProvider.getSite(e[0]).then(function(e){if(o.redirect){t.dismiss();var r=e.getInfo().username||o.username;return n.linksHelper.handleLink(o.redirect,r).then(function(e){e||n.domUtils.showErrorModal("core.contentlinks.errornoactions",!0)})}return n.linksHelper.handleRootURL(e,!1,!0)}):n.sitesProvider.checkSite(o.siteUrl).then(function(e){var i,l=n.loginHelper.isSSOLoginNeeded(e.code),s="CoreLoginCredentialsPage",a={siteUrl:e.siteUrl,username:o.username,urlToOpen:o.redirect,siteConfig:e.config},u=!1;if(t.dismiss(),n.sitesProvider.isLoggedIn()){var d=n.translate.instant("core.contentlinks.confirmurlothersite");i=n.domUtils.showConfirm(d).then(function(){if(!l)return(u=n.sitePluginsProvider.hasSitePluginsLoaded)&&n.appProvider.storeRedirect(r.a.NO_SITE_ID,s,a),n.sitesProvider.logout().catch(function(){})})}else i=Promise.resolve();return i.then(function(){if(l)n.loginHelper.confirmAndOpenBrowserForSSOLogin(e.siteUrl,e.code,e.service,e.config&&e.config.launchurl);else if(!u)return n.loginHelper.goToNoSitePage(void 0,s,a)})});n.linksHelper.goToChooseSite(o.redirect||o.siteUrl)})}o.pageName?n.appProvider.getRootNavController().push(o.pageName,o.pageParams):n.loginHelper.goToSiteInitialPage()}).catch(function(e){"Duplicated"==e||(e&&i?(n.loginHelper.treatUserTokenError(o.siteUrl,e),n.sitesProvider.logout()):n.domUtils.showErrorModalDefault(e,n.translate.instant("core.login.invalidsite")))}).finally(function(){t.dismiss(),i&&n.appProvider.finishSSOAuthentication()})},CoreCustomURLSchemesProvider.prototype.getCustomURLData=function(e){var n=this,t=o.a.customurlscheme+"://";if(-1==e.indexOf(t))return Promise.reject(null);this.logger.debug("Treating custom URL scheme: "+e),e=e.replace(t,"");var r=this.urlUtils.getUsernameFromUrl(e);r&&(e=e.replace(r+"@",""));var i=this.urlUtils.extractUrlParams(e);-1!=e.indexOf("?")&&(e=e.substr(0,e.indexOf("?")));return(e.match(/https?:\/\//)?Promise.resolve(e):this.sitesProvider.getSiteIdsFromUrl(e,!0,r).then(function(t){return t.length?n.sitesProvider.getSite(t[0]).then(function(e){return e.getURL()}):e})).then(function(e){return{siteUrl:e,username:r,token:i.token,privateToken:i.privateToken,redirect:i.redirect}})},CoreCustomURLSchemesProvider.prototype.getCustomURLLinkData=function(e){var n=this,t=o.a.customurlscheme+"://link=";if(-1==e.indexOf(t))return Promise.reject(null);this.logger.debug("Treating custom URL scheme with link param: "+e),e=e.replace(t,"");var r=this.urlUtils.getUsernameFromUrl(e);return r&&(e=e.replace(r+"@","")),this.sitesProvider.isStoredRootURL(e,r).then(function(t){if(t.site)return{siteUrl:t.site.getURL(),username:r};if(t.siteIds.length>0)return n.sitesProvider.getSite(t.siteIds[0]).then(function(n){return{siteUrl:n.getURL(),username:r,redirect:e}});var o=n.linksDelegate.getSiteUrl(e),i=e;return o||(o=e,i=void 0),{siteUrl:o,username:r,redirect:i}})},CoreCustomURLSchemesProvider.prototype.getCustomURLTokenData=function(e){var n=o.a.customurlscheme+"://token=";if(-1==e.indexOf(n))return Promise.reject(null);if(this.appProvider.isSSOAuthenticationOngoing())return Promise.reject("Duplicated");this.appProvider.isDesktop()&&this.utils.closeInAppBrowser(!0),this.appProvider.startSSOAuthentication(),this.logger.debug("App launched by URL with an SSO"),e=(e=e.replace(n,"")).replace(/\/?#?\/?$/,"");try{e=atob(e)}catch(e){return this.logger.error("Error decoding parameter received for login SSO"),Promise.reject(null)}return this.loginHelper.validateBrowserSSOLogin(e)},CoreCustomURLSchemesProvider.prototype.isCustomURL=function(e){return!!e&&-1!=e.indexOf(o.a.customurlscheme+"://")},CoreCustomURLSchemesProvider.prototype.isCustomURLLink=function(e){return!!e&&-1!=e.indexOf(o.a.customurlscheme+"://link=")},CoreCustomURLSchemesProvider.prototype.isCustomURLToken=function(e){return!!e&&-1!=e.indexOf(o.a.customurlscheme+"://token=")},CoreCustomURLSchemesProvider}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonBlockRecentlyAccessedItemsProvider(e,n,t){this.sitesProvider=e,this.courseProvider=n,this.domUtils=t,this.ROOT_CACHE_KEY="AddonBlockRecentlyAccessedItems:"}return AddonBlockRecentlyAccessedItemsProvider.prototype.getRecentItemsCacheKey=function(){return this.ROOT_CACHE_KEY+":recentitems"},AddonBlockRecentlyAccessedItemsProvider.prototype.getRecentItems=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t={cacheKey:n.getRecentItemsCacheKey()};return e.read("block_recentlyaccesseditems_get_recent_items",void 0,t).then(function(e){return e.map(function(e){var t=e.icon&&n.domUtils.getHTMLElementAttribute(e.icon,"src");return e.iconUrl=n.courseProvider.getModuleIconSrc(e.modname,t),e})})})},AddonBlockRecentlyAccessedItemsProvider.prototype.invalidateRecentItems=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getRecentItemsCacheKey())})},AddonBlockRecentlyAccessedItemsProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function AddonQbehaviourDeferredCBMComponent(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(470),r=function(){function AddonQtypeCalculatedHandler(e,n){this.utils=e,this.domUtils=n,this.name="AddonQtypeCalculated",this.type="qtype_calculated"}return AddonQtypeCalculatedHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeCalculatedHandler.prototype.isCompleteResponse=function(e,n){return 0!==this.isGradableResponse(e,n)&&this.validateUnits(n.answer)?this.requiresUnits(e)?this.isValidValue(n.unit)?1:0:-1:0},AddonQtypeCalculatedHandler.prototype.isEnabled=function(){return!0},AddonQtypeCalculatedHandler.prototype.isGradableResponse=function(e,n){var t=this.isValidValue(n.answer);return t&&this.requiresUnits(e)&&(t=this.isValidValue(n.unit)),t?1:0},AddonQtypeCalculatedHandler.prototype.isSameResponse=function(e,n,t){return this.utils.sameAtKeyMissingIsBlank(n,t,"answer")&&this.utils.sameAtKeyMissingIsBlank(n,t,"unit")},AddonQtypeCalculatedHandler.prototype.isValidValue=function(e){return!!e||"0"===e||0===e},AddonQtypeCalculatedHandler.prototype.requiresUnits=function(e){var n=this.domUtils.convertToElement(e.html);return!(!n.querySelector("select[name*=unit]")&&!n.querySelector('input[type="radio"]'))},AddonQtypeCalculatedHandler.prototype.validateUnits=function(e){if(!e)return!1;var n="[+-]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[-+]?\\d+)?";return e=e.replace(" ",""),e=e.replace(/(?:e|E|(?:x|\*|×)10(?:\^|\*\*))([+-]?\d+)/,"e$1"),null!==(e=-1!=e.indexOf(".")||e.split(",").length-1>1?e.replace(",",""):e.replace(",",".")).match(new RegExp("^"+n))&&null!==e.match(new RegExp(n+"$"))},AddonQtypeCalculatedHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonQtypeCalculatedComponent(n,t){return e.call(this,n,"AddonQtypeCalculatedComponent",t)||this}return Object(o.__extends)(AddonQtypeCalculatedComponent,e),AddonQtypeCalculatedComponent.prototype.ngOnInit=function(){this.initCalculatedComponent()},AddonQtypeCalculatedComponent}(t(198).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonQtypeMatchComponent(n,t){return e.call(this,n,"AddonQtypeMatchComponent",t)||this}return Object(o.__extends)(AddonQtypeMatchComponent,e),AddonQtypeMatchComponent.prototype.ngOnInit=function(){this.initMatchComponent()},AddonQtypeMatchComponent}(t(198).a)},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4),t(6);var o=t(10),r=function(){function CoreBackButtonDirective(e,n,t,o){this.host=e,this.platform=n,this.translate=t,this.eventsProvider=o}return CoreBackButtonDirective.prototype.ngOnInit=function(){var e=this;this.setTranslatedBackButtonText(),this.languageObserver=this.eventsProvider.on(o.a.LANGUAGE_CHANGED,function(){e.setTranslatedBackButtonText()})},CoreBackButtonDirective.prototype.ngOnDestroy=function(){this.languageObserver&&this.languageObserver.off()},CoreBackButtonDirective.prototype.setTranslatedBackButtonText=function(){this.host&&this.platform.is("ios")&&this.host.setBackButtonText(this.translate.instant("core.back"))},CoreBackButtonDirective}()},function(e,n,t){"use strict";function View_CoreSplitViewComponent_0(e){return o._42(0,[o._37(402653184,1,{detailNav:0}),o._37(402653184,2,{menu:0}),(e()(),o._16(2,0,null,null,17,"ion-split-pane",[],null,[[null,"ionChange"]],function(e,n,t){var o=!0;if("ionChange"===n){o=!1!==e.component.onSplitPaneChanged(t._visible)&&o}return o},null,null)),o._15(3,4341760,null,1,r.b,[o.D,i.a,l.a,o.p,o.K],{when:[0,"when"]},{ionChange:"ionChange"}),o._37(603979776,3,{_setchildren:1}),o._35(2048,[[3,4]],r.a,null,[r.b]),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(7,0,null,null,7,"ion-menu",[["class","core-avoid-header"],["role","navigation"],["type","push"]],null,null,null,s.b,s.a)),o._15(8,245760,[[2,4],["menu",4]],2,a.a,[u.a,o.p,l.a,i.a,o.K,d.a,c.l,p.a,f.a],{content:[0,"content"],type:[1,"type"],side:[2,"side"]},null),o._37(335544320,4,{menuContent:0}),o._37(335544320,5,{menuNav:0}),o._35(2048,[[3,4]],r.a,null,[a.a]),(e()(),o._40(-1,0,["\n        "])),o._28(0,0),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(16,0,null,null,2,"ion-nav",[["class","core-avoid-header"],["main",""]],null,null,null,h.b,h.a)),o._15(17,4374528,[[1,4],["detailNav",4]],0,m.a,[[2,_.a],[2,g.a],f.a,l.a,i.a,o.p,o.D,o.K,o.n,c.l,v.a,[2,C.a],p.a,o.q],{root:[0,"root"]},null),o._35(2048,[[3,4]],r.a,null,[m.a]),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.when);e(n,8,0,o._29(n,17),"push",t.side);e(n,17,0,t.detailPage)},null)}t.d(n,"a",function(){return y}),n.b=View_CoreSplitViewComponent_0;var o=t(1),r=t(220),i=t(17),l=t(9),s=t(1908),a=t(422),u=t(210),d=t(108),c=t(45),p=t(35),f=t(36),h=t(1052),m=t(308),_=t(40),g=t(21),v=t(207),C=t(60),y=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";function View_CoreSearchBoxComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["class","button-small"],["clear",""],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.clearForm()&&o}return o},r.b,r.a)),o._15(1,1097728,[[3,4]],0,i.a,[[8,""],l.a,o.p,o.K],{clear:[0,"clear"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"close")},function(e,n){var t=n.component;e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.clearsearch")),""==t.searched||t.disabled);e(n,4,0,o._29(n,5)._hidden)})}function View_CoreSearchBoxComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"a",[["class","core-clickable item item-block"],["ion-item",""],["tabindex","1"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.historyClicked(t,e.context.$implicit.searchedtext)&&o}return o},d.b,d.a)),o._15(1,1097728,null,3,c.a,[p.a,l.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,5,{contentLabel:0}),o._37(603979776,6,{_buttons:1}),o._37(603979776,7,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-history"]],null,null,null,m.b,m.a)),o._15(8,704512,null,0,_.a,[o.p,l.a],{name:[0,"name"]},null),(e()(),o._40(9,2,["\n                ","\n            "]))],function(e,n){e(n,8,0,"fa-history")},function(e,n){e(n,9,0,n.context.$implicit.searchedtext)})}function View_CoreSearchBoxComponent_0(e){return o._42(0,[o._37(402653184,1,{formElement:0}),(e()(),o._16(1,0,null,null,41,"ion-card",[],null,null,null,null,null)),o._15(2,16384,null,0,g.a,[l.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(4,0,[[1,0],["searchForm",1]],null,37,"form",[["novalidate",""],["role","search"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,n,t){var r=!0,i=e.component;if("submit"===n){r=!1!==o._29(e,6).onSubmit(t)&&r}if("reset"===n){r=!1!==o._29(e,6).onReset()&&r}if("ngSubmit"===n){r=!1!==i.submitForm(t)&&r}return r},null,null)),o._15(5,16384,null,0,v.w,[],null,null),o._15(6,4210688,[["f",4]],0,v.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),o._35(2048,null,v.b,null,[v.p]),o._15(8,16384,null,0,v.o,[v.b],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(10,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,d.b,d.a)),o._15(11,1097728,null,3,c.a,[p.a,l.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(15,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(17,0,null,3,5,"ion-input",[["name","search"],["role","searchbox"],["type","search"]],[[8,"spellcheck",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.searchText=t)&&o}return o},C.b,C.a)),o._15(18,671744,null,0,v.q,[[2,v.b],[8,null],[8,null],[8,null]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),o._35(2048,null,v.m,null,[v.q]),o._15(20,16384,null,0,v.n,[v.m],null,null),o._15(21,5423104,null,0,y.a,[l.a,P.a,p.a,A.a,o.p,o.K,[2,b.a],[2,c.a],[2,v.m],I.a],{disabled:[0,"disabled"],type:[1,"type"],autocorrect:[2,"autocorrect"],placeholder:[3,"placeholder"]},null),o._15(22,81920,null,0,S.a,[o.p,E.a,M.a,[2,w.a]],{coreAutoFocus:[0,"coreAutoFocus"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(24,0,null,4,5,"button",[["class","button-small"],["clear",""],["icon-only",""],["ion-button",""],["item-end",""],["type","submit"]],[[1,"aria-label",0],[8,"disabled",0]],null,null,r.b,r.a)),o._15(25,1097728,[[3,4]],0,i.a,[[8,""],l.a,o.p,o.K],{clear:[0,"clear"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(27,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(28,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,4,1,null,View_CoreSearchBoxComponent_1)),o._15(32,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(35,0,null,null,5,"ion-list",[["class","core-search-history with-borders"]],null,null,null,null,null)),o._15(36,16384,null,0,T.a,[l.a,o.p,o.K,P.a,O.l,I.a],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreSearchBoxComponent_2)),o._15(39,802816,null,0,k.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,18,0,"search",t.disabled,t.searchText);e(n,21,0,t.disabled,"search",t.autocorrect,t.placeholder);e(n,22,0,t.autoFocus);e(n,25,0,"");e(n,28,0,"search");e(n,32,0,t.showClear);e(n,39,0,t.history)},function(e,n){var t=n.component;e(n,4,0,o._29(n,8).ngClassUntouched,o._29(n,8).ngClassTouched,o._29(n,8).ngClassPristine,o._29(n,8).ngClassDirty,o._29(n,8).ngClassValid,o._29(n,8).ngClassInvalid,o._29(n,8).ngClassPending);e(n,17,0,t.spellcheck,o._29(n,20).ngClassUntouched,o._29(n,20).ngClassTouched,o._29(n,20).ngClassPristine,o._29(n,20).ngClassDirty,o._29(n,20).ngClassValid,o._29(n,20).ngClassInvalid,o._29(n,20).ngClassPending);e(n,24,0,t.searchLabel,t.disabled||!t.searchText||t.searchText.length<t.lengthCheck);e(n,27,0,o._29(n,28)._hidden)})}t.d(n,"b",function(){return U}),n.c=View_CoreSearchBoxComponent_0,t.d(n,"a",function(){return R});var o=t(1),r=t(47),i=t(44),l=t(9),s=t(26),a=t(19),u=t(49),d=t(32),c=t(22),p=t(20),f=t(28),h=t(34),m=t(81),_=t(76),g=t(90),v=t(24),C=t(111),y=t(91),P=t(17),A=t(36),b=t(30),I=t(35),S=t(376),E=t(5),M=t(3),w=t(21),k=t(8),T=t(87),O=t(45),D=t(379),x=t(283),F=t(10),L=t(2),U=o._14({encapsulation:2,styles:[],data:{}}),R=o._12("core-search-box",D.a,function View_CoreSearchBoxComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-search-box",[],null,null,null,View_CoreSearchBoxComponent_0,U)),o._15(1,114688,null,0,D.a,[a.a,M.a,x.a,F.a,L.a,E.a],null,null)],function(e,n){e(n,1,0)},null)},{searchLabel:"searchLabel",placeholder:"placeholder",autocorrect:"autocorrect",spellcheck:"spellcheck",autoFocus:"autoFocus",lengthCheck:"lengthCheck",showClear:"showClear",disabled:"disabled",initialSearch:"initialSearch",searchArea:"searchArea"},{onSubmit:"onSubmit",onClear:"onClear"},[])},function(e,n,t){"use strict";t(0),t(1),t(8),t(6),t(4),t(27),t(33),t(107),t(75),t(500),t(24),t(98),t(128),t(200),t(10),t(217),t(292),t(2),t(16),t(46),t(164),t(477),t(374),t(274);t.d(n,"a",function(){return o});var o=function(){return function AddonModDataComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function CoreCompileHtmlComponentModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(149)),i=t(187),l=(t(275),t(276),function(e){function AddonCalendarSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p,f){var h=e.call(this,"AddonCalendarSyncProvider",i,l,t,s,a,n,u)||this;return h.eventsProvider=r,h.utils=d,h.calendarProvider=c,h.calendarOffline=p,h.calendarHelper=f,h}return Object(o.__extends)(AddonCalendarSyncProvider,e),n=AddonCalendarSyncProvider,AddonCalendarSyncProvider.prototype.syncAllEvents=function(e,n){return this.syncOnSites("all calendar events",this.syncAllEventsFunc.bind(this),[n],e)},AddonCalendarSyncProvider.prototype.syncAllEventsFunc=function(e,t){var o=this;return(t?this.syncEvents(e):this.syncEventsIfNeeded(e)).then(function(t){t&&t.updated&&o.eventsProvider.trigger(n.AUTO_SYNCED,{warnings:t.warnings,events:t.events,deleted:t.deleted},e)})},AddonCalendarSyncProvider.prototype.syncEventsIfNeeded=function(e){var t=this;return e=e||this.sitesProvider.getCurrentSiteId(),this.isSyncNeeded(n.SYNC_ID,e).then(function(n){if(n)return t.syncEvents(e)})},AddonCalendarSyncProvider.prototype.syncEvents=function(e){var t=this;if(e=e||this.sitesProvider.getCurrentSiteId(),this.isSyncing(n.SYNC_ID,e))return this.getOngoingSync(n.SYNC_ID,e);this.logger.debug("Try to sync calendar events for site "+e);var o,r={warnings:[],events:[],deleted:[],toinvalidate:[],updated:!1},i=this.calendarOffline.getAllEventsIds(e).catch(function(){return[]}).then(function(n){if(o=n,n.length){if(!t.appProvider.isOnline())return Promise.reject(null);var i=[];return o.forEach(function(n){i.push(t.syncOfflineEvent(n,r,e))}),t.utils.allPromises(i)}}).then(function(){if(r.updated){var n=[t.calendarProvider.invalidateEventsList(e),t.calendarHelper.refreshAfterChangeEvents(r.toinvalidate,e)];return Promise.all(n).catch(function(){})}}).then(function(){return t.setSyncTime(n.SYNC_ID,e).catch(function(){})}).then(function(){return r});return this.addOngoingSync(n.SYNC_ID,i,e)},AddonCalendarSyncProvider.prototype.syncOfflineEvent=function(e,n,t){var o=this;return this.syncProvider.isBlocked(i.a.COMPONENT,e,t)?(this.logger.debug("Cannot sync event "+e+" because it is blocked."),Promise.reject(this.translate.instant("core.errorsyncblocked",{$a:this.translate.instant("addon.calendar.calendarevent")}))):this.calendarOffline.getDeletedEvent(e,t).then(function(r){return o.calendarProvider.deleteEventOnline(r.id,r.repeat,t).then(function(){n.updated=!0,n.deleted.push(e);var i=[];return i.push(o.calendarOffline.unmarkDeleted(e,t)),i.push(o.calendarOffline.deleteEvent(e,t).catch(function(){})),i.push(o.calendarProvider.getEventFromLocalDb(e,t).then(function(e){n.toinvalidate.push({event:e,repeated:r.repeat?e.eventcount:1})}).catch(function(){})),Promise.all(i)}).catch(function(i){if(o.utils.isWebServiceError(i)){n.updated=!0;var l=[];return l.push(o.calendarOffline.unmarkDeleted(e,t)),l.push(o.calendarOffline.deleteEvent(e,t).catch(function(){})),Promise.all(l).then(function(){n.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.translate.instant("addon.calendar.calendarevent"),name:r.name,error:o.textUtils.getErrorMessageFromError(i)}))})}return Promise.reject(i)})},function(){return o.calendarOffline.getEvent(e,t).then(function(r){var i=o.utils.clone(r);return i.description={text:i.description,format:1},o.calendarProvider.submitEventOnline(e>0?e:void 0,i,t).then(function(e){n.updated=!0,n.events.push(e);return n.toinvalidate.push({event:e,repeated:i.repeat?i.repeats:i.repeateditall&&e.repeatid?e.eventcount:1}),o.calendarOffline.deleteEvent(r.id,t)}).catch(function(e){return o.utils.isWebServiceError(e)?(n.updated=!0,o.calendarOffline.deleteEvent(r.id,t).then(function(){n.warnings.push(o.translate.instant("core.warningofflinedatadeleted",{component:o.translate.instant("addon.calendar.calendarevent"),name:r.name,error:o.textUtils.getErrorMessageFromError(e)}))})):Promise.reject(e)})})})},AddonCalendarSyncProvider.AUTO_SYNCED="addon_calendar_autom_synced",AddonCalendarSyncProvider.MANUAL_SYNCED="addon_calendar_manual_synced",AddonCalendarSyncProvider.SYNC_ID="calendar",AddonCalendarSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),t(29),function(){function CoreUserLinkDirective(e,n,t){this.navCtrl=n,this.svComponent=t,this.element=e.nativeElement||e}return CoreUserLinkDirective.prototype.ngOnInit=function(){var e=this;this.element.addEventListener("click",function(n){if(!n.defaultPrevented){n.preventDefault(),n.stopPropagation();(e.svComponent?e.svComponent.getMasterNav():e.navCtrl).push("CoreUserProfilePage",{userId:e.userId,courseId:e.courseId})}})},CoreUserLinkDirective=Object(o.__decorate)([Object(o.__param)(1,Object(r.E)()),Object(o.__param)(2,Object(r.E)())],CoreUserLinkDirective)}())},function(e,n,t){"use strict";function View_CoreCommentsCommentsComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"div",[],[[2,"core-comments-clickable",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openComments(t)&&o}return o},null,null)),(e()(),o._40(1,null,["\n        ","\n    "])),o._33(2,{$a:0}),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,0,0,!t.disabled);e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.comments.commentscount",e(n,2,0,t.commentsCount))))})}function View_CoreCommentsCommentsComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"div",[],null,null,null,null,null)),(e()(),o._40(1,null,["\n        ","\n    "])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.comments.commentsnotworking")))})}function View_CoreCommentsCommentsComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"core-loading",[],null,null,null,l.b,l.a)),o._15(1,638976,null,0,s.a,[i.a,o.p,a.a,u.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_CoreCommentsCommentsComponent_2)),o._15(4,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_CoreCommentsCommentsComponent_3)),o._15(7,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.commentsLoaded||!t.displaySpinner);e(n,4,0,!t.countError);e(n,7,0,t.countError)},null)}function View_CoreCommentsCommentsComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreCommentsCommentsComponent_1)),o._15(1,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,1,0,!n.component.disabled)},null)}t.d(n,"b",function(){return _}),n.c=View_CoreCommentsCommentsComponent_0,t.d(n,"a",function(){return g});var o=t(1),r=t(26),i=t(19),l=t(55),s=t(52),a=t(10),u=t(3),d=t(8),c=t(322),p=t(21),f=t(154),h=t(2),m=t(29),_=o._14({encapsulation:2,styles:[],data:{}}),g=o._12("core-comments",c.a,function View_CoreCommentsCommentsComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-comments",[],null,null,null,View_CoreCommentsCommentsComponent_0,_)),o._15(1,770048,null,0,c.a,[p.a,f.a,h.a,a.a,[2,m.a]],null,null)],function(e,n){e(n,1,0)},null)},{contextLevel:"contextLevel",instanceId:"instanceId",component:"component",itemId:"itemId",area:"area",title:"title",displaySpinner:"displaySpinner",courseId:"courseId"},{onLoading:"onLoading"},[])},function(e,n,t){"use strict";function View_CoreAttachmentsComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"strong",[],null,null,null,null,null)),(e()(),o._40(1,null,[""," "]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.name)})}function View_CoreAttachmentsComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"li",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreAttachmentsComponent_3)),o._15(3,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(4,null,["","\n        "]))],function(e,n){e(n,3,0,n.context.$implicit.name)},function(e,n){e(n,4,0,n.context.$implicit.extlist)})}function View_CoreAttachmentsComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,i.b,i.a)),o._15(1,1097728,null,3,l.a,[s.a,a.a,o.p,o.K,[2,u.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(5,16384,null,0,d.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,c.a,[p.a,o.i]),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(11,0,null,2,4,"ul",[["class","list-with-style"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreAttachmentsComponent_2)),o._15(14,802816,null,0,r.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,14,0,n.component.fileTypes.info)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("core.fileuploader.filesofthesetypes")))})}function View_CoreAttachmentsComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-file",[],null,[[null,"onDelete"]],function(e,n,t){var o=!0;if("onDelete"===n){o=!1!==e.component.delete(e.parent.context.index,!0)&&o}return o},f.b,f.a)),o._15(1,245760,null,0,h.a,[m.a,_.a,g.a,v.a,C.a,y.a,P.a,A.a,b.a,I.a,S.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],canDelete:[3,"canDelete"],canDownload:[4,"canDownload"]},{onDelete:"onDelete"})],function(e,n){var t=n.component;e(n,1,0,n.parent.context.$implicit,t.component,t.componentId,!0,!n.parent.context.$implicit.offline)},null)}function View_CoreAttachmentsComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-local-file",[],null,[[null,"onDelete"],[null,"onRename"]],function(e,n,t){var o=!0,r=e.component;if("onDelete"===n){o=!1!==r.delete(e.parent.context.index,!1)&&o}if("onRename"===n){o=!1!==r.renamed(e.parent.context.index,t)&&o}return o},E.b,E.a)),o._15(1,114688,null,0,M.a,[P.a,_.a,b.a,w.a,g.a,k.a,m.a,A.a],{file:[0,"file"],manage:[1,"manage"]},{onDelete:"onDelete",onRename:"onRename"})],function(e,n){e(n,1,0,n.parent.context.$implicit,!0)},null)}function View_CoreAttachmentsComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreAttachmentsComponent_5)),o._15(4,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreAttachmentsComponent_6)),o._15(8,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,4,0,!n.context.$implicit.name||n.context.$implicit.offline);e(n,8,0,n.context.$implicit.name&&!n.context.$implicit.offline)},null)}function View_CoreAttachmentsComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,i.b,i.a)),o._15(1,1097728,null,3,l.a,[s.a,a.a,o.p,o.K,[2,u.a]],null,null),o._37(335544320,7,{contentLabel:0}),o._37(603979776,8,{_buttons:1}),o._37(603979776,9,{_icons:1}),o._15(5,16384,null,0,d.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,2,6,"a",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.add()&&o}return o},T.b,T.a)),o._15(8,1097728,[[8,4]],0,O.a,[[8,""],a.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(11,147456,null,0,D.a,[a.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(12,0,["\n        ","\n    "])),o._32(131072,c.a,[p.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"");e(n,11,0,"add")},function(e,n){e(n,10,0,o._29(n,11)._hidden);e(n,12,0,o._41(n,12,0,o._29(n,13).transform("core.fileuploader.addfiletext")))})}function View_CoreAttachmentsComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,i.b,i.a)),o._15(1,1097728,null,3,l.a,[s.a,a.a,o.p,o.K,[2,u.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,d.a,[],null,null),(e()(),o._40(6,2,["\n    ","\n    "])),o._33(7,{size:0,attachments:1}),o._33(8,{$a:0}),o._32(131072,c.a,[p.a,o.i]),(e()(),o._16(10,0,null,2,1,"span",[["class","core-mark-required"]],null,null,null,x.b,x.a)),o._15(11,4308992,null,0,F.a,[o.p,p.a,b.a,_.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),o._40(-1,2,["\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreAttachmentsComponent_1)),o._15(15,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreAttachmentsComponent_4)),o._15(18,802816,null,0,r.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreAttachmentsComponent_7)),o._15(22,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,11,0,t.required);e(n,15,0,t.fileTypes&&t.fileTypes.mimetypes&&t.fileTypes.mimetypes.length);e(n,18,0,t.files);e(n,22,0,t.unlimitedFiles||t.maxSubmissions>=0&&t.files&&t.files.length<t.maxSubmissions)},function(e,n){var t=n.component;e(n,6,0,o._41(n,6,0,o._29(n,9).transform("core.maxsizeandattachments",e(n,8,0,e(n,7,0,t.maxSizeReadable,t.maxSubmissionsReadable)))))})}t.d(n,"a",function(){return L}),n.b=View_CoreAttachmentsComponent_0;var o=t(1),r=t(8),i=t(32),l=t(22),s=t(20),a=t(9),u=t(28),d=t(34),c=t(26),p=t(19),f=t(249),h=t(215),m=t(2),_=t(3),g=t(5),v=t(18),C=t(11),y=t(116),P=t(67),A=t(10),b=t(12),I=t(57),S=t(23),E=t(747),M=t(382),w=t(58),k=t(25),T=t(47),O=t(44),D=t(49),x=t(94),F=t(85),L=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(1),i=(t(6),t(10)),l=(t(39),t(14),t(51),function(){function CoreCourseModuleComponent(e,n,t,o,i,l,s){this.navCtrl=e,this.prefetchDelegate=n,this.domUtils=t,this.courseHelper=o,this.eventsProvider=i,this.sitesProvider=l,this.courseProvider=s,this.statusCalculated=!1,this.isDestroyed=!1,this.completionChanged=new r.r,this.statusChanged=new r.r}return Object.defineProperty(CoreCourseModuleComponent.prototype,"enabled",{set:function(e){this.downloadEnabled=e,this.module.handlerData.showDownloadButton&&this.downloadEnabled&&!this.statusCalculated&&(this.statusCalculated=!0,this.spinner=!0,this.prefetchDelegate.getModuleStatus(this.module,this.courseId).then(this.showStatus.bind(this)))},enumerable:!0,configurable:!0}),CoreCourseModuleComponent.prototype.ngOnInit=function(){var e=this;this.module&&!this.module.handlerData&&(this.module.handlerData={}),this.module.handlerData.showDownloadButton&&(this.prefetchHandler=this.prefetchDelegate.getPrefetchHandlerFor(this.module),this.canCheckUpdates=this.prefetchDelegate.canCheckUpdates(),this.statusObserver=this.eventsProvider.on(i.a.PACKAGE_STATUS_CHANGED,function(n){if(n.componentId===e.module.id&&e.prefetchHandler&&n.component===e.prefetchHandler.component){var t=e.prefetchDelegate.determineModuleStatus(e.module,n.status);e.downloadEnabled?e.showStatus(t):e.module.handlerData.updateStatus&&e.module.handlerData.updateStatus(t)}},this.sitesProvider.getCurrentSiteId())),this.module.handlerData.a11yTitle=void 0!==this.module.handlerData.a11yTitle?this.module.handlerData.a11yTitle:this.module.handlerData.title,this.module.modnametranslated=this.courseProvider.translateModuleName(this.module.modname)||""},CoreCourseModuleComponent.prototype.moduleClicked=function(e){!1!==this.module.uservisible&&this.module.handlerData.action&&this.module.handlerData.action(e,this.navCtrl,this.module,this.courseId)},CoreCourseModuleComponent.prototype.buttonClicked=function(e,n){n&&n.action&&(e.preventDefault(),e.stopPropagation(),n.action(e,this.navCtrl,this.module,this.courseId))},CoreCourseModuleComponent.prototype.download=function(e){var n=this;this.prefetchHandler&&(this.spinner=!0,this.prefetchHandler.getDownloadSize(this.module,this.courseId,!0).then(function(t){return n.courseHelper.prefetchModule(n.prefetchHandler,n.module,t,n.courseId,e)}).then(function(){n.statusChanged.emit({sectionId:n.section.id,moduleId:n.module.id,courseId:n.courseId})}).catch(function(e){n.spinner=!1,n.isDestroyed||n.domUtils.showErrorModalDefault(e,"core.errordownloading",!0)}))},CoreCourseModuleComponent.prototype.showStatus=function(e){e&&(this.spinner=!1,this.downloadStatus=e,this.module.handlerData.updateStatus&&this.module.handlerData.updateStatus(e))},CoreCourseModuleComponent.prototype.ngOnDestroy=function(){this.statusObserver&&this.statusObserver.off(),this.module&&this.module.handlerData&&this.module.handlerData.onDestroy&&this.module.handlerData.onDestroy(),this.isDestroyed=!0},CoreCourseModuleComponent=Object(o.__decorate)([Object(o.__param)(0,Object(r.E)())],CoreCourseModuleComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(527),t(1558),t(614);var o=function(){return function CoreUserComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(519),t(1591),t(1552);var o=function(){return function AddonModWorkshopComponentsModule(){}}()},,function(e,n,t){"use strict";function View_CoreProgressBarComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(2,0,null,null,6,"progress",[["aria-valuemax","100"],["aria-valuemin","0"],["max","100"],["role","progressbar"]],[[8,"value",0],[1,"aria-valuenow",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(4,0,null,null,3,"div",[["aria-valuemax","100"],["aria-valuemin","0"],["class","progress-bar-fallback"],["role","progressbar"]],[[1,"aria-valuenow",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(6,0,null,null,0,"span",[],[[4,"width",null]],null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(10,0,null,null,3,"span",[["class","core-progress-text"]],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._33(12,{$a:0}),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n"]))],null,function(e,n){var t=n.component;e(n,2,0,t.progress,t.progress);e(n,4,0,t.progress);e(n,6,0,t.width);e(n,11,0,o._41(n,11,0,o._29(n,13).transform("core.percentagenumber",e(n,12,0,t.text))))})}function View_CoreProgressBarComponent_0(e){return o._42(2,[(e()(),o._11(16777216,null,null,1,null,View_CoreProgressBarComponent_1)),o._15(1,16384,null,0,l.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.progress>=0)},null)}t.d(n,"a",function(){return s}),n.b=View_CoreProgressBarComponent_0;var o=t(1),r=t(26),i=t(19),l=t(8),s=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(117),r=(t(171),function(){function CoreMainMenuProvider(e,n,t,o){this.langProvider=e,this.sitesProvider=n,this.menuDelegate=t,this.utils=o,this.tablet=!1,this.tablet=window&&window.innerWidth&&window.innerWidth>=576&&window.innerHeight>=576}return e=CoreMainMenuProvider,CoreMainMenuProvider.prototype.getCurrentMainMenuHandlers=function(){var e=this,n=this.utils.promiseDefer(),t=this.menuDelegate.getHandlers().subscribe(function(o){t&&t.unsubscribe(),o=o.filter(function(e){return!e.onlyInMore}),n.resolve(o.slice(0,e.getNumItems()))});return n.promise},CoreMainMenuProvider.prototype.getCustomMenuItems=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){var t=e.getStoredConfig("tool_mobile_custommenuitems"),r={},i=[],l=0;return t&&"string"==typeof t?(t.split(/(?:\r\n|\r|\n)/).forEach(function(e){var n,t=e.split("|"),o=t[0]?t[0].trim():t[0],i=t[1]?t[1].trim():t[1],s=t[2]?t[2].trim():t[2],a=(t[3]?t[3].trim():t[3])||"none",u=t[4]?t[4].trim():t[4];o&&i&&s&&(n=i+"#"+s,u||(u="embedded"==s?"qr-scanner":"link"),r[n]||(r[n]={url:i,type:s,position:l,labels:{}},l++),r[n].labels[a.toLowerCase()]={label:o,icon:u})}),l?n.langProvider.getCurrentLanguage().then(function(e){var n=o.a.default_lang||"en";for(var t in r){var l=r[t],s=l.labels[e]||l.labels[e+"_only"]||l.labels.none||l.labels[n];if(!s){for(var a in l.labels)if(-1==a.indexOf("_only")){s=l.labels[a];break}if(!s)continue}i[l.position]={url:l.url,type:l.type,label:s.label,icon:s.icon}}return i.filter(function(e){return void 0!==e})}):i):i})},CoreMainMenuProvider.prototype.getNumItems=function(){if(!this.isResponsiveMainMenuItemsDisabledInCurrentSite()&&window&&window.innerWidth){var n=void 0;return(n=this.tablet?Math.floor(window.innerHeight/e.ITEM_MIN_WIDTH):(n=Math.floor(window.innerWidth/e.ITEM_MIN_WIDTH))>=5?5:n)>1?n-1:1}return e.NUM_MAIN_HANDLERS},CoreMainMenuProvider.prototype.getTabPlacement=function(e){var n=window&&window.innerWidth&&window.innerWidth>=576&&window.innerHeight>=576;return n!=this.tablet&&(this.tablet=n,setTimeout(function(){e.resize()},500)),n?"side":"bottom"},CoreMainMenuProvider.prototype.isCurrentMainMenuHandler=function(e,n){return this.getCurrentMainMenuHandlers().then(function(n){return!!n.find(function(n,t){return n.page==e})})},CoreMainMenuProvider.prototype.isResponsiveMainMenuItemsDisabledInCurrentSite=function(){var e=this.sitesProvider.getCurrentSite();return e&&e.isFeatureDisabled("NoDelegate_ResponsiveMainMenuItems")},CoreMainMenuProvider.NUM_MAIN_HANDLERS=4,CoreMainMenuProvider.ITEM_MIN_WIDTH=72,CoreMainMenuProvider;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0);var o=t(10),r=t(195),i=(t.n(r),this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})}),l=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},s=function(){function CoreSharedFilesProvider(e,n,t,o,r,i,l){this.fileProvider=n,this.textUtils=o,this.mimeUtils=r,this.sitesProvider=i,this.eventsProvider=l,this.SHARED_FILES_TABLE="shared_files",this.tableSchema={name:"CoreSharedFilesProvider",version:1,tables:[{name:this.SHARED_FILES_TABLE,columns:[{name:"id",type:"TEXT",primaryKey:!0}]}]},this.logger=e.getInstance("CoreSharedFilesProvider"),this.appDB=t.getDB(),this.dbReady=t.createTablesFromSchema(this.tableSchema).catch(function(){})}return e=CoreSharedFilesProvider,CoreSharedFilesProvider.prototype.checkIOSNewFiles=function(){var e=this;return this.logger.debug("Search for new files on iOS"),this.fileProvider.getDirectoryContents("Inbox").then(function(n){if(n.length>0){var t,o=[];return n.forEach(function(n){var r=e.getFileId(n);o.push(e.isFileTreated(r).then(function(){e.deleteInboxFile(n)}).catch(function(){e.logger.debug("Found new file "+n.name+" shared with the app."),t||(t=n)}))}),Promise.all(o).then(function(){var n;return t?(n=e.getFileId(t),e.markAsTreated(n).then(function(){return e.logger.debug('File marked as "treated": '+t.name),t})):Promise.reject(null)})}return Promise.reject(null)})},CoreSharedFilesProvider.prototype.deleteInboxFile=function(e){var n=this;return this.logger.debug("Delete inbox file: "+e.name),this.fileProvider.removeFileByFileEntry(e).catch(function(){}).then(function(){return n.unmarkAsTreated(n.getFileId(e)).then(function(){n.logger.debug('"Treated" mark removed from file: '+e.name)}).catch(function(t){return n.logger.debug('Error deleting "treated" mark from file: '+e.name,t),Promise.reject(t)})})},CoreSharedFilesProvider.prototype.getFileId=function(e){return r.Md5.hashAsciiStr(e.name)},CoreSharedFilesProvider.prototype.getSiteSharedFiles=function(e,n,t){var o=this,r=this.getSiteSharedFilesDirPath(e);return n&&(r=this.textUtils.concatenatePaths(r,n)),this.fileProvider.getDirectoryContents(r).then(function(e){return t&&(e=e.filter(function(e){var n=o.mimeUtils.getFileExtension(e.name),r=o.mimeUtils.getMimeType(n);return!r||t.indexOf(r)>-1})),e}).catch(function(){return[]})},CoreSharedFilesProvider.prototype.getSiteSharedFilesDirPath=function(n){return n=n||this.sitesProvider.getCurrentSiteId(),this.fileProvider.getSiteFolder(n)+"/"+e.SHARED_FILES_FOLDER},CoreSharedFilesProvider.prototype.isFileTreated=function(e){return i(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[2,this.appDB.getRecord(this.SHARED_FILES_TABLE,{id:e})]}})})},CoreSharedFilesProvider.prototype.markAsTreated=function(e){return i(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,4,,6]),[4,this.isFileTreated(e)];case 3:return n.sent(),[3,6];case 4:return n.sent(),[4,this.appDB.insertRecord(this.SHARED_FILES_TABLE,{id:e})];case 5:return n.sent(),[3,6];case 6:return[2]}})})},CoreSharedFilesProvider.prototype.storeFileInSite=function(e,n,t){var r=this;if(t=t||this.sitesProvider.getCurrentSiteId(),!e||!t)return Promise.reject(null);n=n||e.name;var i=this.getSiteSharedFilesDirPath(t),l=this.textUtils.concatenatePaths(i,n);return this.fileProvider.createDir(i).then(function(){return r.fileProvider.moveExternalFile(e.toURL(),l).then(function(e){return r.eventsProvider.trigger(o.a.FILE_SHARED,{siteId:t,name:n}),e})})},CoreSharedFilesProvider.prototype.unmarkAsTreated=function(e){return i(this,void 0,void 0,function(){return l(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[2,this.appDB.deleteRecords(this.SHARED_FILES_TABLE,{id:e})]}})})},CoreSharedFilesProvider.SHARED_FILES_FOLDER="sharedfiles",CoreSharedFilesProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(6),t(186);var o=t(10),r=(t(349),t(466),t(400)),i=function(){function MoodleMobileApp(e,n,t,o,r,i,l,s,a,u,d,c,p,f,h){var m=this;this.platform=e,this.app=o,this.eventsProvider=r,this.loginHelper=i,this.zone=l,this.appProvider=s,this.langProvider=a,this.sitesProvider=u,this.screenOrientation=d,this.urlSchemesProvider=c,this.utils=p,this.urlUtils=f,this.network=h,this.rootPage="CoreLoginInitPage",this.lastUrls={},this.logger=n.getInstance("AppComponent"),e.ready().then(function(){m.appProvider.setStatusBarColor(),t.hideFormAccessoryBar(!1),m.appProvider.isDesktop()&&(o.setElementClass("platform-desktop",!0),m.appProvider.isMac()?o.setElementClass("platform-mac",!0):m.appProvider.isLinux()?o.setElementClass("platform-linux",!0):m.appProvider.isWindows()&&o.setElementClass("platform-windows",!0)),m.appProvider.registerBackButtonAction(function(){return m.closeModal()},2e3)})}return MoodleMobileApp.prototype.ngOnInit=function(){var e=this;this.eventsProvider.on(o.a.LOGOUT,function(){e.appProvider.getRootNavController().setRoot(r.a),e.langProvider.clearCustomStrings(),e.removeVersionClass()}),this.eventsProvider.on(o.a.SESSION_EXPIRED,function(n){e.loginHelper.sessionExpired(n)}),this.eventsProvider.on(o.a.PASSWORD_CHANGE_FORCED,function(n){e.loginHelper.passwordChangeForced(n.siteId)}),this.eventsProvider.on(o.a.USER_NOT_FULLY_SETUP,function(n){e.loginHelper.openInAppForEdit(n.siteId,"/user/edit.php","core.usernotfullysetup")}),this.eventsProvider.on(o.a.SITE_POLICY_NOT_AGREED,function(n){e.loginHelper.sitePolicyNotAgreed(n.siteId)}),this.platform.ready().then(function(){e.network.onchange().subscribe(function(){e.zone.run(function(){var n=e.appProvider.isOnline(),t=document.body.classList.contains("core-offline");document.body.classList.toggle("core-offline",!n),n&&t?(document.body.classList.add("core-online"),setTimeout(function(){document.body.classList.remove("core-online")},3e3)):n||document.body.classList.remove("core-online")})})}),this.eventsProvider.on(o.a.IAB_LOAD_START,function(n){var t=n.url.replace(/^https?:\/\//,"");if(e.urlSchemesProvider.isCustomURL(t))e.urlSchemesProvider.handleCustomURL(t),e.utils.closeInAppBrowser(!1);else if(e.platform.is("android")){var o=e.urlUtils.getUrlProtocol(t);o&&"file"!==o&&"cdvfile"!==o?(e.utils.openInBrowser(t),e.lastInAppUrl?e.utils.openInApp(e.lastInAppUrl):e.utils.closeInAppBrowser(!1)):e.lastInAppUrl=t}}),this.eventsProvider.on(o.a.IAB_EXIT,function(){e.loginHelper.waitingForBrowser=!1,e.lastInAppUrl="",e.loginHelper.checkLogout()}),this.platform.resume.subscribe(function(){setTimeout(function(){e.loginHelper.waitingForBrowser=!1,e.loginHelper.checkLogout()},1e3)}),window.handleOpenURL=function(n){e.zone.run(function(){e.lastUrls[n]&&Date.now()-e.lastUrls[n]<3e3||(e.logger.debug("App launched by URL ",n),e.lastUrls[n]=Date.now(),e.eventsProvider.trigger(o.a.APP_LAUNCHED_URL,n),e.urlSchemesProvider.handleCustomURL(n))})};var n=function(){var n=e.sitesProvider.getCurrentSite(),t=n&&n.getStoredConfig("tool_mobile_customlangstrings");void 0!==t&&e.langProvider.loadCustomStrings(t)};this.eventsProvider.on(o.a.LOGIN,function(t){t.siteId&&e.sitesProvider.getSite(t.siteId).then(function(n){var t=n.getInfo();t&&(e.removeVersionClass(),e.addVersionClass(e.sitesProvider.getReleaseNumber(t.release||"")))}),n()}),this.eventsProvider.on(o.a.SITE_UPDATED,function(t){t.siteId==e.sitesProvider.getCurrentSiteId()&&(n(),e.removeVersionClass(),e.addVersionClass(e.sitesProvider.getReleaseNumber(t.release||"")))}),this.eventsProvider.on(o.a.SITE_ADDED,function(t){t.siteId==e.sitesProvider.getCurrentSiteId()&&(n(),e.removeVersionClass(),e.addVersionClass(e.sitesProvider.getReleaseNumber(t.release||"")))}),this.platform.pause.subscribe(function(){if(e.platform.is("android")){var n=function(e){for(var t=0;t<e.length;t++)n(e[t]);if(e.location.hostname.match(/^www\.youtube(-nocookie)?\.com$/)){var o=e.document.querySelectorAll("video");for(t=0;t<o.length;t++)o[t].pause()}};n(window)}}),this.screenOrientation.onChange().subscribe(function(){if(e.platform.is("ios")){var n=document.querySelector("meta[name=viewport]");n.setAttribute("content",n.getAttribute("content").replace("viewport-fit=cover,","")),setTimeout(function(){n.setAttribute("content","viewport-fit=cover,"+n.getAttribute("content"))})}e.eventsProvider.trigger(o.a.ORIENTATION_CHANGE)})},MoodleMobileApp.prototype.addVersionClass=function(e){var n=e.split(".");n[1]=n[1]||"0",n[2]=n[2]||"0",document.body.classList.add("version-"+n[0],"version-"+n[0]+"-"+n[1],"version-"+n[0]+"-"+n[1]+"-"+n[2])},MoodleMobileApp.prototype.removeVersionClass=function(){var e=[];Array.from(document.body.classList).forEach(function(n){"version-"==n.substring(0,8)&&e.push(n)}),e.forEach(function(e){document.body.classList.remove(e)})},MoodleMobileApp.prototype.closeModal=function(){var e=this.app._getActivePortal();return!!e&&(e.pop(),!0)},MoodleMobileApp}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=function(){function CoreSupressEventsDirective(e){this.onClick=new o.r,this.element=e.nativeElement}return CoreSupressEventsDirective.prototype.ngOnInit=function(){for(var e=this,n=0,t="all"==this.suppressEvents||void 0===this.suppressEvents||null===this.suppressEvents?["click","mousedown","touchdown","touchmove","touchstart"]:"string"==typeof this.suppressEvents?[this.suppressEvents]:Array.isArray(this.suppressEvents)?this.suppressEvents:[];n<t.length;n++){this.element.addEventListener(t[n],this.stopBubble.bind(this))}this.element.addEventListener("mouseup",function(n){e.onClick.emit(n)}),this.element.addEventListener("touchend",function(n){e.stopBubble(n),e.onClick.emit(n)})},CoreSupressEventsDirective.prototype.stopBubble=function(e){e.preventDefault(),e.stopPropagation()},CoreSupressEventsDirective}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreStyleComponent(e){this.element=e}return CoreStyleComponent.prototype.ngOnChanges=function(e){if(this.element&&this.element.nativeElement){var n=document.createElement("style");n.innerText=this.prefixCSS(this.css,this.prefix),this.element.nativeElement.innerHTML="",this.element.nativeElement.appendChild(n)}},CoreStyleComponent.prototype.prefixCSS=function(e,n){if(!e)return"";if(!n)return e;var t=/\/\*[\s\S]*?\*\/|([^:]|^)\/\/.*$/gm;return e=e.replace(t,""),t=/([^]*?)({[^]*?}|,)/g,e.replace(t,n+" $1 $2")},CoreStyleComponent}()},,function(e,n,t){"use strict";function View_CoreTagListComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(2,0,null,null,2,"ion-badge",[["class","core-tag-list-tag"]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openTag(e.context.$implicit)&&o}return o},null,null)),o._15(3,16384,null,0,r.a,[i.a,o.p,o.K],null,null),(e()(),o._40(4,null,["",""])),(e()(),o._40(-1,null,["\n"]))],null,function(e,n){e(n,4,0,n.context.$implicit.rawname)})}function View_CoreTagListComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreTagListComponent_1)),o._15(1,802816,null,0,l.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.tags)},null)}t.d(n,"a",function(){return s}),n.b=View_CoreTagListComponent_0;var o=t(1),r=t(144),i=t(9),l=t(8),s=(t(29),o._14({encapsulation:2,styles:[],data:{}}))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(117),r=t(54),i=function(){function AddonMessageOutputAirnotifierProvider(e,n){this.sitesProvider=n,this.ROOT_CACHE_KEY="mmaMessageOutputAirnotifier:",this.logger=e.getInstance("AddonMessageOutputAirnotifier")}return AddonMessageOutputAirnotifierProvider.prototype.enableDevice=function(e,n,t){return this.sitesProvider.getSite(t).then(function(t){return t.write("message_airnotifier_enable_device",{deviceid:e,enable:n?1:0}).then(function(e){if(!e.success)return e.warnings&&e.warnings.length?Promise.reject(e.warnings[0].message):Promise.reject(null)})})},AddonMessageOutputAirnotifierProvider.prototype.getUserDevicesCacheKey=function(){return this.ROOT_CACHE_KEY+"userDevices"},AddonMessageOutputAirnotifierProvider.prototype.getUserDevices=function(e){var n=this;return this.logger.debug("Get user devices"),this.sitesProvider.getSite(e).then(function(e){var t={appid:o.a.app_id},i={cacheKey:n.getUserDevicesCacheKey(),updateFrequency:r.a.FREQUENCY_RARELY};return e.read("message_airnotifier_get_user_devices",t,i).then(function(e){return e.devices})})},AddonMessageOutputAirnotifierProvider.prototype.invalidateUserDevices=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(e){return e.invalidateWsCacheForKey(n.getUserDevicesCacheKey())})},AddonMessageOutputAirnotifierProvider.prototype.isEnabled=function(){return this.sitesProvider.wsAvailableInCurrentSite("message_airnotifier_enable_device")&&this.sitesProvider.wsAvailableInCurrentSite("message_airnotifier_get_user_devices")},AddonMessageOutputAirnotifierProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(1),r=(t(6),t(4),t(10)),i=t(14),l=(t(384),t(200),function(){function CoreCourseFormatComponent(e,n,t,l,s,a,u,d,c,p,f){var h=this;this.cfDelegate=e,this.injector=t,this.courseHelper=l,this.domUtils=s,this.sitesProvider=u,this.content=d,this.modalCtrl=p,this.courseProvider=f,this.canLoadMore=!1,this.showSectionId=0,this.sectionSelectorExpanded=!1,this.data={},this.allSectionsId=i.a.ALL_SECTIONS_ID,this.stealthModulesSectionId=i.a.STEALTH_MODULES_SECTION_ID,this.selectOptions={},this.selectOptions.title=n.instant("core.course.sections"),this.completionChanged=new o.r,this.data.coreCourseFormatComponent=this,this.sectionStatusObserver=a.on(r.a.SECTION_STATUS_CHANGED,function(e){if(h.downloadEnabled&&h.sections&&h.sections.length&&h.course&&e.sectionId&&e.courseId==h.course.id){var n=h.courseHelper.getSectionDownloadId({id:e.sectionId});if(c.isBeingDownloaded(n))return;for(var t,o=0;o<h.sections.length;o++){var r=h.sections[o];if(r.id===e.sectionId){t=r;break}}if(!t)return;h.courseHelper.calculateSectionStatus(t,h.course.id,!1).then(function(){t.isDownloading&&!c.isBeingDownloaded(n)&&h.prefetch(t)})}},this.sitesProvider.getCurrentSiteId()),this.selectTabObserver=a.on(r.a.SELECT_COURSE_TAB,function(e){if(!e.name){var n=void 0;void 0!==e.sectionId&&null!=e.sectionId&&h.sections?n=h.sections.find(function(n){return n.id==e.sectionId}):void 0!==e.sectionNumber&&null!=e.sectionNumber&&h.sections&&(n=h.sections.find(function(n){return n.section==e.sectionNumber})),n&&h.sectionChanged(n)}})}return e=CoreCourseFormatComponent,CoreCourseFormatComponent.prototype.ngOnInit=function(){this.displaySectionSelector=this.cfDelegate.displaySectionSelector(this.course)},CoreCourseFormatComponent.prototype.ngOnChanges=function(e){var n=this;if(this.setInputData(),e.course&&this.getComponents(),e.sections&&this.sections)if(this.selectedSection){var t=void 0;for(o=0;o<this.sections.length;o++){if(this.compareSections(r=this.sections[o],this.selectedSection)){t=r;break}}t?this.sectionChanged(t):this.cfDelegate.getCurrentSection(this.course,this.sections).then(function(e){n.sectionChanged(e)})}else{if(this.initialSectionId||this.initialSectionNumber)for(var o=0;o<this.sections.length;o++){var r;if((r=this.sections[o]).id&&r.id==this.initialSectionId||r.section&&r.section==this.initialSectionNumber){this.canViewSection(r)&&(this.loaded=!0,this.sectionChanged(r));break}}this.loaded||this.cfDelegate.getCurrentSection(this.course,this.sections).then(function(e){n.loaded=!0,n.sectionChanged(e)})}this.downloadEnabled&&(e.downloadEnabled||e.sections)&&this.calculateSectionsStatus(!1)},CoreCourseFormatComponent.prototype.setInputData=function(){this.data.course=this.course,this.data.sections=this.sections,this.data.initialSectionId=this.initialSectionId,this.data.initialSectionNumber=this.initialSectionNumber,this.data.downloadEnabled=this.downloadEnabled,this.data.moduleId=this.moduleId,this.data.completionChanged=this.completionChanged},CoreCourseFormatComponent.prototype.getComponents=function(){var e=this;this.course&&this.course.format!=this.lastCourseFormat&&(this.lastCourseFormat=this.course.format,this.cfDelegate.getCourseFormatComponent(this.injector,this.course).then(function(n){e.courseFormatComponent=n}),this.cfDelegate.getCourseSummaryComponent(this.injector,this.course).then(function(n){e.courseSummaryComponent=n}),this.cfDelegate.getSectionSelectorComponent(this.injector,this.course).then(function(n){e.sectionSelectorComponent=n}),this.cfDelegate.getSingleSectionComponent(this.injector,this.course).then(function(n){e.singleSectionComponent=n}),this.cfDelegate.getAllSectionsComponent(this.injector,this.course).then(function(n){e.allSectionsComponent=n}))},CoreCourseFormatComponent.prototype.showSectionSelector=function(e){var n=this;if(!this.sectionSelectorExpanded){var t=this.modalCtrl.create("CoreCourseSectionSelectorPage",{course:this.course,sections:this.sections,selected:this.selectedSection});t.onDidDismiss(function(e){e&&n.sectionChanged(e),n.sectionSelectorExpanded=!1}),t.present({ev:e}),this.sectionSelectorExpanded=!0}},CoreCourseFormatComponent.prototype.sectionChanged=function(e){var n=this,t=this.selectedSection;if(this.selectedSection=e,this.data.section=this.selectedSection,e.id!=this.allSectionsId){var o=this.sections.findIndex(function(e,t){return n.compareSections(e,n.selectedSection)}),r=void 0;for(r=o-1;r>=1&&!this.canViewSection(this.sections[r]);r--);for(this.previousSection=r>=1?this.sections[r]:null,r=o+1;r<this.sections.length&&!this.canViewSection(this.sections[r]);r++);this.nextSection=r<this.sections.length?this.sections[r]:null}else this.previousSection=null,this.nextSection=null,this.canLoadMore=!1,this.showSectionId=0,this.showMoreActivities(),this.courseHelper.calculateSectionsStatus(this.sections,this.course.id,!1,!1);this.moduleId&&void 0===t?setTimeout(function(){n.domUtils.scrollToElementBySelector(n.content,"#core-course-module-"+n.moduleId)},200):this.domUtils.scrollToTop(this.content,0),t&&t.id==e.id||this.courseProvider.logView(this.course.id,e.section,void 0,this.course.fullname).catch(function(){})},CoreCourseFormatComponent.prototype.compareSections=function(e,n){return e&&n?e.id===n.id:e===n},CoreCourseFormatComponent.prototype.calculateSectionsStatus=function(e){this.courseHelper.calculateSectionsStatus(this.sections,this.course.id,e).catch(function(){})},CoreCourseFormatComponent.prototype.prefetch=function(e,n){var t=this;void 0===n&&(n=!1),e.isCalculating=!0,this.courseHelper.confirmDownloadSizeSection(this.course.id,e,this.sections).then(function(){t.prefetchSection(e,!0)},function(e){e&&t.domUtils.showErrorModal(e)}).finally(function(){e.isCalculating=!1})},CoreCourseFormatComponent.prototype.prefetchSection=function(e,n){var t=this;this.courseHelper.prefetchSection(e,this.course.id,this.sections).catch(function(e){n&&t.domUtils.showErrorModalDefault(e,"core.course.errordownloadingsection",!0)})},CoreCourseFormatComponent.prototype.doRefresh=function(e,n,t){var o=this,r=[];return this.dynamicComponents.forEach(function(o){r.push(Promise.resolve(o.callComponentFunction("doRefresh",[e,n,t])))}),r.push(this.courseBlocksComponent.invalidateBlocks().finally(function(){return o.courseBlocksComponent.loadContent()})),Promise.all(r)},CoreCourseFormatComponent.prototype.showMoreActivities=function(n){this.canLoadMore=!1;var t,o=0;for(t=this.showSectionId+1;t<this.sections.length&&!(this.sections[t].hasContent&&this.sections[t].modules&&(o+=this.sections[t].modules.reduce(function(e,n){return 0!==n.visibleoncoursepage?e+1:e},0))>=e.LOAD_MORE_ACTIVITIES);t++);if(this.showSectionId=t,this.canLoadMore=t<this.sections.length,this.canLoadMore){var r=!1;for(t++;t<this.sections.length;t++)if(this.sections[t].hasContent&&this.sections[t].modules&&this.sections[t].modules.length>0){r=!0;break}this.canLoadMore=r}n&&n()},CoreCourseFormatComponent.prototype.ngOnDestroy=function(){this.sectionStatusObserver&&this.sectionStatusObserver.off(),this.selectTabObserver&&this.selectTabObserver.off()},CoreCourseFormatComponent.prototype.ionViewDidEnter=function(){this.dynamicComponents.forEach(function(e){e.callComponentFunction("ionViewDidEnter")}),this.downloadEnabled&&(this.selectedSection&&this.selectedSection.id!==i.a.ALL_SECTIONS_ID?this.courseHelper.calculateSectionStatus(this.selectedSection,this.course.id,!1,!1):this.courseHelper.calculateSectionsStatus(this.sections,this.course.id,!1,!1))},CoreCourseFormatComponent.prototype.ionViewDidLeave=function(){this.dynamicComponents.forEach(function(e){e.callComponentFunction("ionViewDidLeave")})},CoreCourseFormatComponent.prototype.canViewSection=function(e){return!1!==e.uservisible&&!e.hiddenbynumsections&&e.id!=i.a.STEALTH_MODULES_SECTION_ID},CoreCourseFormatComponent.prototype.onCompletionChange=function(e){if(e.hasOwnProperty("valueused")&&!e.valueused){var n=100/[].concat.apply([],this.sections.filter(function(e){return e.hasOwnProperty("modules")}).map(function(e){return e.modules})).map(function(e){return e.completion>0?1:e.completion}).reduce(function(e,n){return e+n});this.course.progress=e.state===i.a.COMPLETION_COMPLETE?Math.min(100,this.course.progress+n):Math.max(0,this.course.progress-n)}this.completionChanged.emit(e)},CoreCourseFormatComponent.prototype.onModuleStatusChange=function(e){this.courseHelper.calculateSectionsStatus(this.sections,this.course.id,!1,!1)},CoreCourseFormatComponent.LOAD_MORE_ACTIVITIES=20,CoreCourseFormatComponent;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=t(1),i=(t(6),t(268)),l=t(221),s=(t(398),function(e){function AddonModBookIndexComponent(n,t,o,r,i,s,a,u){var d=e.call(this,n)||this;return d.bookProvider=t,d.courseProvider=o,d.appProvider=r,d.prefetchDelegate=i,d.modalCtrl=s,d.tagProvider=a,d.content=u,d.component=l.a.COMPONENT,d.displayNavBar=!0,d.displayTitlesInNavBar=!1,d}return Object(o.__extends)(AddonModBookIndexComponent,e),AddonModBookIndexComponent.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.tagsEnabled=this.tagProvider.areTagsAvailableInSite(),this.loadContent()},AddonModBookIndexComponent.prototype.showToc=function(e){var n=this,t=this.modalCtrl.create("AddonModBookTocPage",{moduleId:this.module.id,chapters:this.chapters,selected:this.currentChapter,courseId:this.courseId,book:this.book},{cssClass:"core-modal-lateral",showBackdrop:!0,enableBackdropDismiss:!0,enterAnimation:"core-modal-lateral-transition",leaveAnimation:"core-modal-lateral-transition"});t.onDidDismiss(function(e){e&&n.changeChapter(e)}),t.present({ev:e})},AddonModBookIndexComponent.prototype.changeChapter=function(e){e&&e!=this.currentChapter&&(this.loaded=!1,this.refreshIcon="spinner",this.loadChapter(e,!0))},AddonModBookIndexComponent.prototype.invalidateContent=function(){return this.bookProvider.invalidateContent(this.module.id,this.courseId)},AddonModBookIndexComponent.prototype.fetchContent=function(e){var n,t=this,o=[],r=!1;return o.push(this.bookProvider.getBook(this.courseId,this.module.id).then(function(e){t.book=e,t.dataRetrieved.emit(e),t.description=e.intro,t.displayNavBar=0!=e.navstyle,t.displayTitlesInNavBar=2==e.navstyle}).catch(function(){})),o.push(this.prefetchDelegate.download(this.module,this.courseId).catch(function(e){if(r=!0,n=e,!t.module.contents.length)return t.courseProvider.loadModuleContents(t.module,t.courseId)})),Promise.all(o).then(function(){if(t.contentsMap=t.bookProvider.getContentsMap(t.module.contents),t.chapters=t.bookProvider.getTocList(t.module.contents),void 0===t.currentChapter&&void 0!==t.initialChapterId&&t.chapters){t.chapters.find(function(e){return e.id==t.initialChapterId})&&(t.currentChapter=t.initialChapterId)}return void 0===t.currentChapter&&(t.currentChapter=t.bookProvider.getFirstChapter(t.chapters)),t.loadChapter(t.currentChapter,e).then(function(){r&&t.appProvider.isOnline()&&t.showErrorDownloadingSomeFiles(n)}).catch(function(){})}).finally(function(){t.fillContextMenu(e)})},AddonModBookIndexComponent.prototype.loadChapter=function(e,n){var t=this;return this.currentChapter=e,this.domUtils.scrollToTop(this.content),this.bookProvider.getChapterContent(this.contentsMap,e,this.module.id).then(function(o){t.chapterContent=o,t.previousChapter=t.bookProvider.getPreviousChapter(t.chapters,e),t.nextChapter=t.bookProvider.getNextChapter(t.chapters,e),t.previousNavBarTitle=t.previousChapter&&t.displayTitlesInNavBar?t.translate.instant("addon.mod_book.navprevtitle",{$a:t.previousChapter.title}):"",t.nextNavBarTitle=t.nextChapter&&t.displayTitlesInNavBar?t.translate.instant("addon.mod_book.navnexttitle",{$a:t.nextChapter.title}):"",t.bookProvider.logView(t.module.instance,n?e:void 0,t.module.name).then(function(){t.nextChapter||t.courseProvider.checkModuleCompletion(t.courseId,t.module.completiondata)}).catch(function(){})}).catch(function(e){return t.domUtils.showErrorModalDefault(e,"addon.mod_book.errorchapter",!0),Promise.reject(null)}).finally(function(){t.loaded=!0,t.refreshIcon="refresh"})},AddonModBookIndexComponent=Object(o.__decorate)([Object(o.__param)(7,Object(r.E)())],AddonModBookIndexComponent)}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(6),t(159)),i=t(279),l=function(e){function AddonModChatIndexComponent(n,t,o,r){var l=e.call(this,n)||this;return l.chatProvider=t,l.timeUtils=o,l.navCtrl=r,l.component=i.a.COMPONENT,l.moduleName="chat",l.sessionsAvailable=!1,l}return Object(o.__extends)(AddonModChatIndexComponent,e),AddonModChatIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent().then(function(){n.chatProvider.logView(n.chat.id,n.chat.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},AddonModChatIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.chatProvider.getChat(this.courseId,this.module.id).then(function(e){o.chat=e,o.description=e.intro;var n=o.timeUtils.timestamp(),t=e.chattime-n;return o.chatInfo=!!(e.chattime&&e.schedule>0&&t>0)&&{date:o.timeUtils.userDate(1e3*e.chattime),fromnow:o.timeUtils.formatTime(t)},o.dataRetrieved.emit(e),o.chatProvider.areSessionsAvailable().then(function(e){o.sessionsAvailable=e})}).finally(function(){o.fillContextMenu(e)})},AddonModChatIndexComponent.prototype.enterChat=function(){this.navCtrl.push("AddonModChatChatPage",{chatId:this.chat.id,courseId:this.courseId,title:this.chat.name||this.moduleName,cmId:this.module.id})},AddonModChatIndexComponent.prototype.viewSessions=function(){this.navCtrl.push("AddonModChatSessionsPage",{courseId:this.courseId,chatId:this.chat.id,cmId:this.module.id})},AddonModChatIndexComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(294),s=(t(295),t(296)),a=function(e){function AddonModChoiceIndexComponent(n,t,o,r,i,a){var u=e.call(this,n,o)||this;return u.choiceProvider=t,u.choiceOffline=r,u.choiceSync=i,u.timeUtils=a,u.component=l.a.COMPONENT,u.moduleName="choice",u.options=[],u.choiceNotOpenYet=!1,u.choiceClosed=!1,u.canEdit=!1,u.canDelete=!1,u.canSeeResults=!1,u.data=[],u.labels=[],u.results=[],u.syncEventName=s.a.AUTO_SYNCED,u.hasAnsweredOnline=!1,u}return Object(o.__extends)(AddonModChoiceIndexComponent,e),AddonModChoiceIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.userId=this.sitesProvider.getCurrentSiteUserId(),this.loadContent(!1,!0).then(function(){n.choice&&n.choiceProvider.logView(n.choice.id,n.choice.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){})})},AddonModChoiceIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.choiceProvider.invalidateChoiceData(this.courseId)),this.choice&&(e.push(this.choiceProvider.invalidateOptions(this.choice.id)),e.push(this.choiceProvider.invalidateResults(this.choice.id))),Promise.all(e)},AddonModChoiceIndexComponent.prototype.isRefreshSyncNeeded=function(e){return!(!this.choice||e.choiceId!=this.choice.id||e.userId!=this.userId)&&(this.domUtils.scrollToTop(this.content),!0)},AddonModChoiceIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.now=(new Date).getTime(),this.choiceProvider.getChoice(this.courseId,this.module.id).then(function(e){if(o.choice=e,o.choice.timeopen=1e3*e.timeopen,o.choice.timeclose=1e3*e.timeclose,o.openTimeReadable=o.timeUtils.userDate(e.timeopen),o.closeTimeReadable=o.timeUtils.userDate(e.timeclose),o.description=e.intro,o.choiceNotOpenYet=e.timeopen&&e.timeopen>o.now,o.choiceClosed=e.timeclose&&e.timeclose<=o.now,o.dataRetrieved.emit(e),n)return o.syncActivity(t).then(function(e){if(e)return o.choiceProvider.getChoice(o.courseId,o.module.id).then(function(e){o.choice=e})})}).then(function(){return o.choiceOffline.hasResponse(o.choice.id)}).then(function(e){return o.hasOffline=e,o.fetchOptions(e).then(function(){return o.fetchResults()})}).finally(function(){o.fillContextMenu(e)})},AddonModChoiceIndexComponent.prototype.fetchOptions=function(e){var n=this;return this.choiceProvider.getOptions(this.choice.id).then(function(t){n.hasAnsweredOnline=t.some(function(e){return e.checked}),(e?n.choiceOffline.getResponse(n.choice.id).then(function(e){var n={};return t.forEach(function(e){n[e.id]=e}),e.deleting?e.responses.length>0?e.responses.forEach(function(e){n[e]&&n[e].checked&&(n[e].checked=!1,n[e].countanswers--)}):Object.keys(n).forEach(function(e){n[e].checked&&(n[e].checked=!1,n[e].countanswers--)}):(Object.keys(n).forEach(function(e){n[e].checked&&(n[e].checked=!1,n[e].countanswers--)}),e.responses.forEach(function(e){n[e]&&(n[e].checked=!0,n[e].countanswers++)})),Object.keys(n).map(function(e){return n[e]})}):Promise.resolve(t)).then(function(e){var t=n.isChoiceOpen(),o=!1;if(n.selectedOption={id:-1},e.forEach(function(e){e.checked&&(o=!0,n.choice.allowmultiple||(n.selectedOption.id=e.id))}),n.canEdit=t&&(n.choice.allowupdate||!o),n.canDelete=t&&n.choice.allowupdate&&o,n.options=e,n.canEdit)switch(n.choice.showresults){case l.a.RESULTS_NOT:n.publishInfo="addon.mod_choice.publishinfonever";break;case l.a.RESULTS_AFTER_ANSWER:n.publishInfo=n.choice.publish==l.a.PUBLISH_ANONYMOUS?"addon.mod_choice.publishinfoanonafter":"addon.mod_choice.publishinfofullafter";break;case l.a.RESULTS_AFTER_CLOSE:n.publishInfo=n.choice.publish==l.a.PUBLISH_ANONYMOUS?"addon.mod_choice.publishinfoanonclose":"addon.mod_choice.publishinfofullclose";break;default:n.publishInfo=""}})})},AddonModChoiceIndexComponent.prototype.fetchResults=function(){var e=this;return this.choiceNotOpenYet?(this.canSeeResults=!1,Promise.resolve()):this.choiceProvider.getResults(this.choice.id).then(function(n){var t=!1;e.data=[],e.labels=[],n.forEach(function(n){n.numberofuser>0&&(t=!0),n.percentageamountfixed=n.percentageamount.toFixed(1),e.data.push(n.numberofuser),e.labels.push(n.text)}),e.canSeeResults=t||e.choiceProvider.canStudentSeeResults(e.choice,e.hasAnsweredOnline),e.results=n})},AddonModChoiceIndexComponent.prototype.isChoiceOpen=function(){return(0===this.choice.timeopen||this.choice.timeopen<=this.now)&&(0===this.choice.timeclose||this.choice.timeclose>this.now)},AddonModChoiceIndexComponent.prototype.canSave=function(){return this.choice.allowmultiple?this.options.some(function(e){return e.checked}):-1!==this.selectedOption.id},AddonModChoiceIndexComponent.prototype.save=function(){var e=this;(this.choice.allowupdate?Promise.resolve():this.domUtils.showConfirm(this.translate.instant("core.areyousure"))).then(function(){var n=[];e.choice.allowmultiple?e.options.forEach(function(e){e.checked&&n.push(e.id)}):n.push(e.selectedOption.id);var t=e.domUtils.showModalLoading("core.sending",!0);e.choiceProvider.submitResponse(e.choice.id,e.choice.name,e.courseId,n).then(function(n){return e.courseProvider.checkModuleCompletion(e.courseId,e.module.completiondata),e.domUtils.scrollToTop(e.content),e.dataUpdated(n)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.mod_choice.cannotsubmit",!0)}).finally(function(){t.dismiss()})})},AddonModChoiceIndexComponent.prototype.delete=function(){var e=this;this.domUtils.showDeleteConfirm().then(function(){var n=e.domUtils.showModalLoading("core.sending",!0);e.choiceProvider.deleteResponses(e.choice.id,e.choice.name,e.courseId).then(function(){return e.domUtils.scrollToTop(e.content),e.refreshContent(!1)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.mod_choice.cannotsubmit",!0)}).finally(function(){n.dismiss()})}).catch(function(){})},AddonModChoiceIndexComponent.prototype.dataUpdated=function(e){var n=this;return e&&this.isPrefetched()?this.choiceSync.prefetchAfterUpdate(this.module,this.courseId).then(function(){n.showLoadingAndFetch(!1,!1)}).catch(function(){return n.refreshContent(!1)}):this.refreshContent(!1)},AddonModChoiceIndexComponent.prototype.sync=function(){return this.choiceSync.syncChoice(this.choice.id,this.userId)},AddonModChoiceIndexComponent.prototype.hasSyncSucceed=function(e){return e.updated},AddonModChoiceIndexComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)())],AddonModChoiceIndexComponent)}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return p});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(154),s=t(231),a=t(236),u=t(98),d=(t(217),t(329)),c=t(476),p=(t(399),function(e){function AddonModDataIndexComponent(n,t,o,r,i,l,p,f,h,m){var _=e.call(this,n,t)||this;return _.dataProvider=o,_.dataHelper=r,_.prefetchHandler=i,_.timeUtils=l,_.groupsProvider=p,_.modalCtrl=f,_.utils=h,_.navCtrl=m,_.component=u.a.COMPONENT,_.moduleName="data",_.access={},_.data={},_.isEmpty=!0,_.entries=[],_.firstEntry=!1,_.canAdd=!1,_.canSearch=!1,_.search={sortBy:"0",sortDirection:"DESC",page:0,text:"",searching:!1,searchingAdvanced:!1,advanced:[]},_.hasNextPage=!1,_.entriesRendered="",_.extraImports=[c.a],_.syncEventName=d.a.AUTO_SYNCED,_.hasComments=!1,_.entryChangedObserver=_.eventsProvider.on(u.a.ENTRY_CHANGED,function(e){if(_.data.id==e.dataId)return _.loaded=!1,_.loadContent(!0)},_.siteId),_.ratingOfflineObserver=_.eventsProvider.on(s.a.RATING_SAVED_EVENT,function(e){_.data&&"mod_data"==e.component&&"entry"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==_.data.coursemodule&&(_.hasOfflineRatings=!0)}),_.ratingSyncObserver=_.eventsProvider.on(a.a.SYNCED_EVENT,function(e){_.data&&"mod_data"==e.component&&"entry"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==_.data.coursemodule&&(_.hasOfflineRatings=!1)}),_}return Object(o.__extends)(AddonModDataIndexComponent,e),AddonModDataIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.selectedGroup=this.group||0,this.loadContent(!1,!0).then(function(){return n.logView(!0)})},AddonModDataIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.dataProvider.invalidateDatabaseData(this.courseId)),this.data&&(e.push(this.dataProvider.invalidateDatabaseAccessInformationData(this.data.id)),e.push(this.groupsProvider.invalidateActivityGroupInfo(this.data.coursemodule)),e.push(this.dataProvider.invalidateEntriesData(this.data.id)),e.push(this.dataProvider.invalidateFieldsData(this.data.id)),this.hasComments&&this.eventsProvider.trigger(l.a.REFRESH_COMMENTS_EVENT,{contextLevel:"module",instanceId:this.data.coursemodule},this.sitesProvider.getCurrentSiteId())),Promise.all(e)},AddonModDataIndexComponent.prototype.isRefreshSyncNeeded=function(e){return!(!this.data||e.dataId!=this.data.id||void 0!==e.entryId)&&(this.loaded=!1,this.domUtils.scrollToTop(this.content),!0)},AddonModDataIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1);var r=!1,i=!1;return this.dataProvider.getDatabase(this.courseId,this.module.id).then(function(e){if(o.data=e,o.hasComments=e.comments,o.description=e.intro||e.description,o.dataRetrieved.emit(e),n)return o.syncActivity(t).catch(function(){})}).then(function(){return o.dataProvider.getDatabaseAccessInformation(o.data.id)}).then(function(e){if(o.access=e,!e.timeavailable){var n=o.timeUtils.timestamp();return o.timeAvailableFrom=!!(o.data.timeavailablefrom&&n<o.data.timeavailablefrom)&&1e3*parseInt(o.data.timeavailablefrom,10),o.timeAvailableFromReadable=!!o.timeAvailableFrom&&o.timeUtils.userDate(o.timeAvailableFrom),o.timeAvailableTo=!!(o.data.timeavailableto&&n>o.data.timeavailableto)&&1e3*parseInt(o.data.timeavailableto,10),o.timeAvailableToReadable=!!o.timeAvailableTo&&o.timeUtils.userDate(o.timeAvailableTo),o.isEmpty=!0,void(o.groupInfo=null)}return i=!0,r=e.canaddentry,o.groupsProvider.getActivityGroupInfo(o.data.coursemodule).then(function(e){o.groupInfo=e,o.selectedGroup=o.groupsProvider.validateGroupId(o.selectedGroup,e)})}).then(function(){return o.dataProvider.getFields(o.data.id).then(function(e){return 0==e.length&&(i=!1,r=!1),o.search.advanced=[],o.fields=o.utils.arrayToObject(e,"id"),o.fieldsArray=o.utils.objectToArray(o.fields),o.fetchEntriesData()})}).finally(function(){o.canAdd=r,o.canSearch=i,o.fillContextMenu(e)})},AddonModDataIndexComponent.prototype.fetchEntriesData=function(){var e=this;return this.dataProvider.getDatabaseAccessInformation(this.data.id,this.selectedGroup).then(function(n){e.access.canaddentry=n.canaddentry;return e.dataHelper.fetchEntries(e.data,e.fieldsArray,e.selectedGroup,e.search.searching&&!e.search.searchingAdvanced?e.search.text:void 0,e.search.searching&&e.search.searchingAdvanced?e.search.advanced:void 0,e.search.sortBy,e.search.sortDirection,e.search.page)}).then(function(n){var t=n.entries.length,o=n.offlineEntries.length;if(e.isEmpty=!t&&!n.offlineEntries.length,e.hasNextPage=t>=u.a.PER_PAGE&&(e.search.page+1)*u.a.PER_PAGE<n.totalcount,e.hasOffline=n.hasOfflineActions,e.hasOfflineRatings=n.hasOfflineRatings,e.entriesRendered="",e.foundRecordsData=void 0!==n.maxcount?{num:n.totalcount,max:n.maxcount,reseturl:"#"}:void 0,e.isEmpty)e.search.searching||(e.canSearch=!1);else{e.entries=n.offlineEntries.concat(n.entries);var r=e.dataHelper.getTemplate(e.data,"listtemplateheader",e.fieldsArray);e.search.searching&&e.firstEntry||(e.firstEntry=e.entries[0].id);var i=e.dataHelper.getTemplate(e.data,"listtemplate",e.fieldsArray),l={};e.entries.forEach(function(n,t){l[n.id]=n;var s=e.dataHelper.getActions(e.data,e.access,n);r+=e.dataHelper.displayShowFields(i,e.fieldsArray,n,e.search.searching?void 0:e.search.page*u.a.PER_PAGE+t-o,"list",s)}),r+=e.dataHelper.getTemplate(e.data,"listtemplatefooter",e.fieldsArray),e.entriesRendered=e.domUtils.fixHtml(r),e.jsData={fields:e.fields,entries:l,data:e.data,module:e.module,group:e.selectedGroup,gotoEntry:e.gotoEntry.bind(e)}}e.firstEntry=!1})},AddonModDataIndexComponent.prototype.showSearch=function(){var e=this,n=this.modalCtrl.create("AddonModDataSearchPage",{search:this.search,fields:this.fields,data:this.data});n.onDidDismiss(function(n){n&&(e.search=n,e.searchEntries(0))}),n.present()},AddonModDataIndexComponent.prototype.searchEntries=function(e){var n=this;return this.loaded=!1,this.search.page=e,this.fetchEntriesData().then(function(){return n.logView()}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}).finally(function(){n.loaded=!0})},AddonModDataIndexComponent.prototype.searchReset=function(){this.search.sortBy="0",this.search.sortDirection="DESC",this.search.text="",this.search.advanced=[],this.search.searchingAdvanced=!1,this.search.searching=!1,this.searchEntries(0)},AddonModDataIndexComponent.prototype.setGroup=function(e){var n=this;return this.selectedGroup=e,this.search.page=0,this.fetchEntriesData().then(function(){return n.logView()}).catch(function(e){return n.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0),Promise.reject(null)})},AddonModDataIndexComponent.prototype.gotoAddEntries=function(){this.navCtrl.push("AddonModDataEditPage",{module:this.module,courseId:this.courseId,group:this.selectedGroup})},AddonModDataIndexComponent.prototype.gotoEntry=function(e){var n={module:this.module,courseId:this.courseId,entryId:e,group:this.selectedGroup,offset:null},t=this.entries.findIndex(function(n){return n.id==e});t>=0&&(n.offset=this.search.page*u.a.PER_PAGE+t),this.navCtrl.push("AddonModDataEntryPage",n)},AddonModDataIndexComponent.prototype.sync=function(){return this.prefetchHandler.sync(this.module,this.courseId)},AddonModDataIndexComponent.prototype.hasSyncSucceed=function(e){return e.updated},AddonModDataIndexComponent.prototype.logView=function(e){var n=this;return this.data&&this.data.id?this.dataProvider.logView(this.data.id,this.data.name).then(function(){e&&n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){}):Promise.resolve()},AddonModDataIndexComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.entryChangedObserver&&this.entryChangedObserver.off(),this.ratingOfflineObserver&&this.ratingOfflineObserver.off(),this.ratingSyncObserver&&this.ratingSyncObserver.off()},AddonModDataIndexComponent=Object(o.__decorate)([Object(o.__param)(1,Object(r.E)())],AddonModDataIndexComponent)}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),t(169),t(185),t(29),function(){function CoreGradesCourseComponent(e,n,t,o,r,i,l){this.gradesProvider=e,this.domUtils=n,this.gradesHelper=o,this.navCtrl=r,this.appProvider=i,this.svComponent=l,this.gradesLoaded=!1}return CoreGradesCourseComponent.prototype.ngOnInit=function(){var e=this;this.fetchData().then(function(){return e.gradeId&&e.gotoGrade(e.gradeId),e.gradesProvider.logCourseGradesView(e.courseId,e.userId).catch(function(){})}).finally(function(){e.gradesLoaded=!0})},CoreGradesCourseComponent.prototype.fetchData=function(e){var n=this;return void 0===e&&(e=!1),this.gradesProvider.getCourseGradesTable(this.courseId,this.userId).then(function(e){n.gradesTable=n.gradesHelper.formatGradesTable(e)}).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error loading grades")})},CoreGradesCourseComponent.prototype.refreshGrades=function(e){var n=this;this.gradesProvider.invalidateCourseGradesData(this.courseId,this.userId).finally(function(){n.fetchData().finally(function(){e.complete()})})},CoreGradesCourseComponent.prototype.gotoGrade=function(e){if(e){this.gradeId=e;var n=void 0,t=void 0;this.svComponent?"CoreGradesCourseSplitPage"==this.svComponent.getMasterNav().getActive().component.name?(n=this.svComponent,t="CoreGradesGradePage"):(n=this.svComponent.getMasterNav(),t="CoreGradesCourseSplitPage"):this.appProvider.isWide()?(n=this.navCtrl,t="CoreGradesCourseSplitPage"):(n=this.navCtrl,t="CoreGradesGradePage"),n.push(t,{courseId:this.courseId,userId:this.userId,gradeId:e})}},CoreGradesCourseComponent=Object(o.__decorate)([Object(o.__param)(4,Object(r.E)()),Object(o.__param)(6,Object(r.E)())],CoreGradesCourseComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(488);var o=function(){function CoreSharedFilesHelperProvider(e,n,t,o,r,i,l,s,a,u,d,c){this.alertCtrl=n,this.translate=t,this.utils=o,this.sitesProvider=r,this.modalCtrl=i,this.fileUploaderProvider=l,this.initDelegate=s,this.sharedFilesProvider=a,this.domUtils=u,this.fileProvider=d,this.appProvider=c,this.logger=e.getInstance("CoreSharedFilesHelperProvider")}return CoreSharedFilesHelperProvider.prototype.askRenameReplace=function(e,n){var t=this.utils.promiseDefer();return this.alertCtrl.create({title:this.translate.instant("core.sharedfiles.sharedfiles"),message:this.translate.instant("core.sharedfiles.chooseactionrepeatedfile",{$a:n}),buttons:[{text:this.translate.instant("core.sharedfiles.rename"),handler:function(){t.resolve(n)}},{text:this.translate.instant("core.sharedfiles.replace"),handler:function(){t.resolve(e)}}]}).present(),t.promise},CoreSharedFilesHelperProvider.prototype.goToChooseSite=function(e,n){this.appProvider.getRootNavController().push("CoreSharedFilesChooseSitePage",{filePath:e,isInbox:n})},CoreSharedFilesHelperProvider.prototype.isChoosingSite=function(){var e=this.appProvider.getRootNavController();return e&&"CoreSharedFilesChooseSitePage"==e.getActive().id},CoreSharedFilesHelperProvider.prototype.pickSharedFile=function(e){var n=this;return new Promise(function(t,o){var r=n.modalCtrl.create("CoreSharedFilesListPage",{mimetypes:e,isModal:!0,pick:!0});r.present(),r.onDidDismiss(function(r){if(r){var i=n.fileUploaderProvider.isInvalidMimetype(e,r.fullPath);i?o(i):t({path:r.fullPath,treated:!1})}else o()})})},CoreSharedFilesHelperProvider.prototype.removeSharedFile=function(e,n){return n?this.sharedFilesProvider.deleteInboxFile(e):this.fileProvider.removeFileByFileEntry(e)},CoreSharedFilesHelperProvider.prototype.searchIOSNewSharedFiles=function(e){var n=this;return this.initDelegate.ready().then(function(){if(n.isChoosingSite())return Promise.reject(null);return(e?n.fileProvider.getExternalFile(e):n.sharedFilesProvider.checkIOSNewFiles()).then(function(t){return n.sitesProvider.getSitesIds().then(function(o){return o.length?1==o.length?n.storeSharedFileInSite(t,o[0],!e):void(n.isChoosingSite()||n.goToChooseSite(t.toURL(),!e)):(n.domUtils.showErrorModal("core.sharedfiles.errorreceivefilenosites",!0),n.removeSharedFile(t,!e))})}).catch(function(t){t&&n.logger.error("Error searching iOS new shared files",t,e)})})},CoreSharedFilesHelperProvider.prototype.storeSharedFileInSite=function(e,n,t){var o=this;n=n||this.sitesProvider.getCurrentSiteId();var r=this.sharedFilesProvider.getSiteSharedFilesDirPath(n);return this.fileProvider.getUniqueNameInFolder(r,e.name).then(function(n){return n.toLowerCase()==e.name.toLowerCase()?n:o.askRenameReplace(e.name,n)}).then(function(r){return o.sharedFilesProvider.storeFileInSite(e,r,n).catch(function(e){o.domUtils.showErrorModal(e||"Error moving file.")}).finally(function(){o.removeSharedFile(e,t),o.domUtils.showAlertTranslated("core.success","core.sharedfiles.successstorefile")})})},CoreSharedFilesHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(149),i=(t(380),t(162),t(4),function(e){function AddonMessagesSyncProvider(n,t,o,r,i,l,s,a,u,d,c,p){var f=e.call(this,"AddonMessagesSync",n,t,o,i,l,r,p)||this;return f.messagesOffline=s,f.eventsProvider=a,f.messagesProvider=u,f.userProvider=d,f.utils=c,f}return Object(o.__extends)(AddonMessagesSyncProvider,e),n=AddonMessagesSyncProvider,AddonMessagesSyncProvider.prototype.getSyncId=function(e,n){return e?"conversationid:"+e:"userid:"+n},AddonMessagesSyncProvider.prototype.syncAllDiscussions=function(e,n){void 0===n&&(n=!1);return this.syncOnSites("all discussions"+(n?" (Only offline)":""),this.syncAllDiscussionsFunc.bind(this),[n],e)},AddonMessagesSyncProvider.prototype.syncAllDiscussionsFunc=function(e,t){var o=this;void 0===t&&(t=!1);return(t?this.messagesOffline.getAllDeviceOfflineMessages(e):this.messagesOffline.getAllMessages(e)).then(function(t){var r=[],i=[],l=[];return t.forEach(function(e){e.conversationid?-1==i.indexOf(e.conversationid)&&i.push(e.conversationid):-1==r.indexOf(e.touserid)&&r.push(e.touserid)}),i.forEach(function(t){l.push(o.syncDiscussion(t,void 0,e).then(function(r){void 0!==r&&o.eventsProvider.trigger(n.AUTO_SYNCED,{conversationId:t,warnings:r},e)}))}),r.forEach(function(t){l.push(o.syncDiscussion(void 0,t,e).then(function(r){void 0!==r&&o.eventsProvider.trigger(n.AUTO_SYNCED,{userId:t,warnings:r},e)}))}),Promise.all(l)})},AddonMessagesSyncProvider.prototype.syncDiscussion=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=this.getSyncId(e,n),i=this.messagesProvider.isGroupMessagingEnabled();if(this.isSyncing(r,t))return this.getOngoingSync(r,t);var l=[];this.logger.debug(e?"Try to sync conversation '"+e+"'":"Try to sync discussion with user '"+n+"'");var s;return s=e?this.messagesOffline.getConversationMessages(e,t):this.messagesOffline.getMessages(n,t),s=s.then(function(r){if(!r.length)return[];if(!o.appProvider.isOnline())return o.messagesOffline.setMessagesDeviceOffline(r,!0),Promise.reject(null);var l=Promise.resolve(),s=[];return(r=o.messagesProvider.sortMessages(r)).forEach(function(a,u){l=l.then(function(){return(e?o.messagesProvider.sendMessageToConversationOnline(e,a.text,t):o.messagesProvider.sendMessageOnline(n,a.smallmessage,t)).catch(function(e){if(!o.utils.isWebServiceError(e))return o.appProvider.isOnline()&&o.messagesOffline.setMessagesDeviceOffline(r,!1),Promise.reject(e);-1==s.indexOf(e)&&s.push(e)}).then(function(){return e?o.messagesOffline.deleteConversationMessage(e,a.text,a.timecreated,t):o.messagesOffline.deleteMessage(n,a.smallmessage,a.timecreated,t)}).then(function(){if(!i&&u<r.length-1)return new Promise(function(e,n){setTimeout(e,1e3)})})})}),l}).then(function(t){return o.handleSyncErrors(e,n,t,l)}).then(function(){return l}),this.addOngoingSync(r,s,t)},AddonMessagesSyncProvider.prototype.handleSyncErrors=function(e,n,t,o){var r=this;if(t&&t.length)return e?this.messagesProvider.getConversation(e,!1,!1).catch(function(){return{}}).then(function(n){t.forEach(function(t){o.push(r.translate.instant("addon.messages.warningconversationmessagenotsent",{conversation:n.name?n.name:e,error:r.textUtils.getErrorMessageFromError(t)}))})}):this.userProvider.getProfile(n,void 0,!0).catch(function(){return{}}).then(function(e){t.forEach(function(t){o.push(r.translate.instant("addon.messages.warningmessagenotsent",{user:e.fullname?e.fullname:n,error:r.textUtils.getErrorMessageFromError(t)}))})})},AddonMessagesSyncProvider.prototype.waitForSyncConversation=function(e,n,t){var o=this.getSyncId(e,n);return this.waitForSync(o,t)},AddonMessagesSyncProvider.AUTO_SYNCED="addon_messages_autom_synced",AddonMessagesSyncProvider;var n}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(135),s=(t(252),t(297),t(285)),a=(t(202),function(e){function AddonModFeedbackIndexComponent(n,t,o,r,i,a,u,d,c){var p=e.call(this,n,o)||this;return p.feedbackProvider=t,p.feedbackOffline=r,p.groupsProvider=i,p.feedbackSync=a,p.navCtrl=u,p.feedbackHelper=d,p.timeUtils=c,p.tab="overview",p.group=0,p.component=l.a.COMPONENT,p.moduleName="feedback",p.access={canviewreports:!1,canviewanalysis:!1,isempty:!0},p.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},p.overview={timeopen:0,openTimeReadable:"",timeclose:0,closeTimeReadable:""},p.warning="",p.tabsLoaded={overview:!1,analysis:!1},p.showTabs=!1,p.tabsReady=!1,p.syncEventName=s.a.AUTO_SYNCED,p.submitObserver=p.eventsProvider.on(l.a.FORM_SUBMITTED,function(e){if(p.feedback&&e.feedbackId==p.feedback.id){p.tabsLoaded.analysis=!1,p.tabsLoaded.overview=!1,p.loaded=!1;(!e.offline&&p.isPrefetched()?p.feedbackSync.prefetchAfterUpdate(p.module,p.courseId).catch(function(){}):Promise.resolve()).then(function(){e.tab!=p.tab?p.tabChanged(e.tab):p.loadContent(!0)})}},p.siteId),p}return Object(o.__extends)(AddonModFeedbackIndexComponent,e),AddonModFeedbackIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){n.feedback&&n.feedbackProvider.logView(n.feedback.id,n.feedback.name).catch(function(){})}).finally(function(){n.tabsReady=!0})},AddonModFeedbackIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.feedbackProvider.invalidateFeedbackData(this.courseId)),this.feedback&&(e.push(this.feedbackProvider.invalidateFeedbackAccessInformationData(this.feedback.id)),e.push(this.feedbackProvider.invalidateAnalysisData(this.feedback.id)),e.push(this.groupsProvider.invalidateActivityAllowedGroups(this.feedback.coursemodule)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.feedback.coursemodule)),e.push(this.feedbackProvider.invalidateResumePageData(this.feedback.id))),this.tabsLoaded.analysis=!1,this.tabsLoaded.overview=!1,Promise.all(e)},AddonModFeedbackIndexComponent.prototype.isRefreshSyncNeeded=function(e){return!(!this.feedback||e.feedbackId!=this.feedback.id)&&(this.domUtils.scrollToTop(this.content),!0)},AddonModFeedbackIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.feedbackProvider.getFeedback(this.courseId,this.module.id).then(function(e){if(o.feedback=e,o.description=e.intro||e.description,o.dataRetrieved.emit(e),n)return o.syncActivity(t)}).then(function(){return o.feedbackProvider.getFeedbackAccessInformation(o.feedback.id)}).then(function(e){return o.access=e,o.showTabs=(e.canviewreports||e.canviewanalysis)&&!e.isempty,o.firstSelectedTab=0,"analysis"==o.tab?(o.firstSelectedTab=1,o.fetchFeedbackAnalysisData(o.access)):o.fetchFeedbackOverviewData(o.access)}).finally(function(){if(o.fillContextMenu(e),o.feedback)return o.feedbackOffline.hasFeedbackOfflineData(o.feedback.id).then(function(e){o.hasOffline=e})})},AddonModFeedbackIndexComponent.prototype.fetchFeedbackOverviewData=function(e){var n=this,t=[];return e.cancomplete&&e.cansubmit&&e.isopen&&t.push(this.feedbackProvider.getResumePage(this.feedback.id).then(function(e){n.goPage=e>0&&e})),e.canedititems&&(this.overview.timeopen=1e3*parseInt(this.feedback.timeopen)||0,this.overview.openTimeReadable=this.overview.timeopen?this.timeUtils.userDate(this.overview.timeopen):"",this.overview.timeclose=1e3*parseInt(this.feedback.timeclose)||0,this.overview.closeTimeReadable=this.overview.timeclose?this.timeUtils.userDate(this.overview.timeclose):""),e.canviewanalysis&&t.push(this.fetchGroupInfo(this.feedback.coursemodule)),Promise.all(t).finally(function(){n.tabsLoaded.overview=!0})},AddonModFeedbackIndexComponent.prototype.fetchFeedbackAnalysisData=function(e){var n,t=this;return e.canviewanalysis?n=this.fetchGroupInfo(this.feedback.coursemodule):(this.tabChanged("overview"),n=Promise.resolve()),n.finally(function(){t.tabsLoaded.analysis=!0})},AddonModFeedbackIndexComponent.prototype.fetchGroupInfo=function(e){var n=this;return this.groupsProvider.getActivityGroupInfo(e).then(function(e){return n.groupInfo=e,n.setGroup(n.groupsProvider.validateGroupId(n.group,e))})},AddonModFeedbackIndexComponent.prototype.parseAnalysisInfo=function(e){var n=this;switch(e.typ){case"numeric":e.average=e.data.reduce(function(e,n){return e+parseInt(n,10)},0)/e.data.length,e.template="numeric";break;case"info":e.data=e.data.map(function(e){return void 0!==(e=n.textUtils.parseJSON(e)).show&&e.show}).filter(function(e){return e});case"textfield":case"textarea":e.template="list";break;case"multichoicerated":case"multichoice":e.data=e.data.map(function(e){return void 0!==(e=n.textUtils.parseJSON(e)).answertext&&e}).filter(function(e){return e}),e.labels=e.data.map(function(e){e.quotient=(100*e.quotient).toFixed(2);var n="";return void 0!==e.value&&(n="("+e.value+") "),n+=e.answertext,n+=e.quotient>0?" ("+e.quotient+"%)":""}),e.chartData=e.data.map(function(e){return e.answercount}),"multichoicerated"==e.typ&&(e.average=e.data.reduce(function(e,n){return e+parseFloat(n.avg)},0));var t=e.presentation.charAt(0);e.chartType="c"!=t?"doughnut":"bar",e.template="chart"}return e},AddonModFeedbackIndexComponent.prototype.gotoAnswerQuestions=function(e){void 0===e&&(e=!1);this.navCtrl.push("AddonModFeedbackFormPage",{module:this.module,moduleId:this.module.id,courseId:this.courseId,preview:e})},AddonModFeedbackIndexComponent.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidEnter()},AddonModFeedbackIndexComponent.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidLeave()},AddonModFeedbackIndexComponent.prototype.openFeature=function(e){this.feedbackHelper.openFeature(e,this.navCtrl,this.module,this.courseId,this.group)},AddonModFeedbackIndexComponent.prototype.tabChanged=function(e){this.tab=e,this.tabsLoaded[this.tab]||this.loadContent(!1,!1,!0)},AddonModFeedbackIndexComponent.prototype.setGroup=function(e){var n=this;return this.group=e,this.feedbackProvider.getAnalysis(this.feedback.id,e).then(function(e){if(n.feedback.completedCount=e.completedcount,n.feedback.itemsCount=e.itemscount,"analysis"==n.tab){var t=1;if(n.items=e.itemsdata.map(function(e){return e.item.data=e.data,e=e.item,e.number=t++,!(!e.data||!e.data.length)&&n.parseAnalysisInfo(e)}).filter(function(e){return e}),n.warning="",e.warnings.length){var o=e.warnings.find(function(e){return"insufficientresponsesforthisgroup"==e.warningcode});n.warning=o&&o.message}}})},AddonModFeedbackIndexComponent.prototype.sync=function(){return this.feedbackSync.syncFeedback(this.feedback.id)},AddonModFeedbackIndexComponent.prototype.hasSyncSucceed=function(e){return e.updated},AddonModFeedbackIndexComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.submitObserver&&this.submitObserver.off()},AddonModFeedbackIndexComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)())],AddonModFeedbackIndexComponent)}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(268),i=t(330),l=(t(401),function(e){function AddonModFolderIndexComponent(n,t,o,r,l){var s=e.call(this,n)||this;return s.folderProvider=t,s.courseProvider=o,s.appProvider=r,s.folderHelper=l,s.component=i.a.COMPONENT,s}return Object(o.__extends)(AddonModFolderIndexComponent,e),AddonModFolderIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canGetFolder=this.folderProvider.isGetFolderWSAvailable(),this.path?(this.showModuleData(this.module,this.module.contents),this.loaded=!0,this.refreshIcon="refresh"):this.loadContent().then(function(){n.folderProvider.logView(n.module.instance,n.module.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})}).finally(function(){n.loaded=!0,n.refreshIcon="refresh"})},AddonModFolderIndexComponent.prototype.invalidateContent=function(){return this.folderProvider.invalidateContent(this.module.id,this.courseId)},AddonModFolderIndexComponent.prototype.showModuleData=function(e,n){this.description=e.intro||e.description,this.dataRetrieved.emit(e),this.contents=this.path?n:this.folderHelper.formatContents(n)},AddonModFolderIndexComponent.prototype.fetchContent=function(e){var n=this,t=this.module.contents;return(this.canGetFolder?this.folderProvider.getFolder(this.courseId,this.module.id).then(function(o){return n.courseProvider.loadModuleContents(n.module,n.courseId,void 0,!1,e).then(function(){return t=n.module.contents,o})}):this.courseProvider.getModule(this.module.id,this.courseId).then(function(e){return e.contents.length||!n.module.contents.length||n.appProvider.isOnline()||(e.contents=n.module.contents),n.module=e,t=e.contents,e})).then(function(e){n.showModuleData(e,t)}).finally(function(){n.fillContextMenu(e)})},AddonModFolderIndexComponent}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return p});var o=t(0),r=t(1),i=(t(6),t(29),t(159)),l=t(72),s=t(231),a=t(236),u=t(136),d=(t(280),t(233),t(254)),c=(t(402),t(652)),p=function(e){function AddonModForumIndexComponent(n,t,o,r,i,l,s,a,c,p,f,h,m){var _=e.call(this,n)||this;return _.content=t,_.modalCtrl=o,_.groupsProvider=r,_.userProvider=i,_.forumProvider=l,_.forumHelper=s,_.forumOffline=a,_.forumSync=c,_.prefetchDelegate=p,_.prefetchHandler=f,_.ratingOffline=h,_.popoverCtrl=m,_.component=u.a.COMPONENT,_.moduleName="forum",_.canLoadMore=!1,_.loadMoreError=!1,_.discussions=[],_.offlineDiscussions=[],_.selectedDiscussion=0,_.canAddDiscussion=!1,_.addDiscussionText=_.translate.instant("addon.mod_forum.addanewdiscussion"),_.sortOrders=[],_.selectedSortOrder=null,_.sortOrderSelectorExpanded=!1,_.syncEventName=d.a.AUTO_SYNCED,_.page=0,_.trackPosts=!1,_.usesGroups=!1,_.canPin=!1,_.sortingAvailable=_.forumProvider.isDiscussionListSortingAvailable(),_.sortOrders=_.forumProvider.getAvailableSortOrders(),_}return Object(o.__extends)(AddonModForumIndexComponent,e),AddonModForumIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.syncManualObserver=this.eventsProvider.on(d.a.MANUAL_SYNCED,function(e){n.autoSyncEventReceived(e)},this.siteId),this.newDiscObserver=this.eventsProvider.on(u.a.NEW_DISCUSSION_EVENT,this.eventReceived.bind(this,!0)),this.replyObserver=this.eventsProvider.on(u.a.REPLY_DISCUSSION_EVENT,this.eventReceived.bind(this,!1)),this.changeDiscObserver=this.eventsProvider.on(u.a.CHANGE_DISCUSSION_EVENT,function(e){(n.forum&&n.forum.id===e.forumId||e.cmId===n.module.id)&&n.forumProvider.invalidateDiscussionsList(n.forum.id).finally(function(){if(e.discussionId){var t=n.discussions.find(function(n){return e.discussionId==n.discussion});t&&(void 0!==e.locked&&(t.locked=e.locked),void 0!==e.pinned&&(t.pinned=e.pinned),void 0!==e.starred&&(t.starred=e.starred),n.showLoadingAndRefresh(!1))}void 0!==e.deleted&&e.deleted&&(0==e.post.parent&&n.splitviewCtrl&&n.splitviewCtrl.isOn()&&n.splitviewCtrl.emptyDetails(),n.showLoadingAndRefresh(!1))})}),this.viewDiscObserver=this.eventsProvider.on(u.a.VIEW_DISCUSSION_EVENT,function(e){if(n.forum&&n.forum.id==e.forumId){n.selectedDiscussion=n.splitviewCtrl.isOn()?e.discussion:0;var t=n.discussions.find(function(n){return n.discussion==e.discussion});t&&t.numunread>0&&n.forumProvider.invalidateDiscussionsList(n.forum.id)}},this.sitesProvider.getCurrentSiteId()),this.ratingOfflineObserver=this.eventsProvider.on(s.a.RATING_SAVED_EVENT,function(e){n.forum&&"mod_forum"==e.component&&"post"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==n.forum.cmid&&(n.hasOfflineRatings=!0)}),this.ratingSyncObserver=this.eventsProvider.on(a.a.SYNCED_EVENT,function(e){n.forum&&"mod_forum"==e.component&&"post"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==n.forum.cmid&&n.ratingOffline.hasRatings("mod_forum","post","module",n.forum.cmid).then(function(e){n.hasOfflineRatings=e})}),this.loadContent(!1,!0).then(function(){n.forum&&(n.splitviewCtrl.isOn()&&(n.offlineDiscussions.length>0?n.openNewDiscussion(n.offlineDiscussions[0].timecreated):n.discussions.length>0&&n.openDiscussion(n.discussions[0])),n.forumProvider.logView(n.forum.id,n.forum.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){}))})},AddonModForumIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.loadMoreError=!1;var r=[];return r.push(this.forumProvider.getForum(this.courseId,this.module.id).then(function(e){switch(o.forum=e,o.description=e.intro||o.description,o.descriptionNote=o.translate.instant("addon.mod_forum.numdiscussions",{numdiscussions:e.numdiscussions}),void 0!==e.istracked&&(o.trackPosts=e.istracked),o.availabilityMessage=o.forumHelper.getAvailabilityMessage(e),o.dataRetrieved.emit(e),e.type){case"news":case"blog":o.addDiscussionText=o.translate.instant("addon.mod_forum.addanewtopic");break;case"qanda":o.addDiscussionText=o.translate.instant("addon.mod_forum.addanewquestion");break;default:o.addDiscussionText=o.translate.instant("addon.mod_forum.addanewdiscussion")}if(n)return o.syncActivity(t).then(function(n){n&&o.eventsProvider.trigger(d.a.MANUAL_SYNCED,{forumId:e.id,userId:o.sitesProvider.getCurrentSiteUserId(),source:"index"},o.sitesProvider.getCurrentSiteId())})}).then(function(){var e=[];return e.push(o.groupsProvider.getActivityGroupMode(o.forum.cmid).then(function(e){o.usesGroups=e===l.a.SEPARATEGROUPS||e===l.a.VISIBLEGROUPS})),e.push(o.forumProvider.getAccessInformation(o.forum.id).then(function(e){var n=o.forumHelper.isCutoffDateReached(o.forum)&&!e.cancanoverridecutoff;o.canAddDiscussion=o.forum.cancreatediscussions&&!n})),o.forumProvider.isSetPinStateAvailableForSite()?e.push(o.forumProvider.canAddDiscussionToAll(o.forum.id).then(function(e){o.canPin=!!e.canpindiscussions}).catch(function(){o.canPin=!1})):o.canPin=!1,Promise.all(e)})),r.push(this.fetchSortOrderPreference()),Promise.all(r).then(function(){return Promise.all([o.fetchOfflineDiscussion(),o.fetchDiscussions(e),o.ratingOffline.hasRatings("mod_forum","post","module",o.forum.cmid).then(function(e){o.hasOfflineRatings=e})])}).catch(function(t){if(!e)return o.refreshContent(n);o.domUtils.showErrorModalDefault(t,"addon.mod_forum.errorgetforum",!0),o.loadMoreError=!0}).finally(function(){o.fillContextMenu(e)})},AddonModForumIndexComponent.prototype.fetchOfflineDiscussion=function(){var e=this;return this.forumOffline.getNewDiscussions(this.forum.id).then(function(n){if(e.hasOffline=!!n.length,e.hasOffline){return(e.usesGroups?e.forumProvider.formatDiscussionsGroups(e.forum.cmid,n):Promise.resolve(n)).then(function(n){var t=[];return n.forEach(function(n){0==n.parent&&"single"==e.forum.type||t.push(e.userProvider.getProfile(n.userid,e.courseId,!0).then(function(e){n.userfullname=e.fullname,n.userpictureurl=e.profileimageurl}).catch(function(){}))}),Promise.all(t).then(function(){n.sort(function(e,n){return n.timecreated-e.timecreated}),e.offlineDiscussions=n})})}e.offlineDiscussions=[]})},AddonModForumIndexComponent.prototype.fetchDiscussions=function(e){var n=this;return this.loadMoreError=!1,e&&(this.page=0),this.forumProvider.getDiscussions(this.forum.id,this.selectedSortOrder.value,this.page).then(function(e){return(n.usesGroups?n.forumProvider.formatDiscussionsGroups(n.forum.cmid,e.discussions):Promise.resolve(e.discussions)).then(function(t){if("single"==n.forum.type)for(var o in t)if(t[o].userfullname&&0==t[o].parent){t[o].userfullname=!1;break}if(void 0===n.forum.istracked&&!n.trackPosts)for(var r in t)if(t[r].numunread>0){n.trackPosts=!0;break}return n.discussions=0==n.page?t:n.discussions.concat(t),n.canLoadMore=e.canLoadMore,n.page++,n.forumOffline.hasForumReplies(n.forum.id).then(function(e){var o=[];return n.hasOffline=n.hasOffline||e,e&&t.forEach(function(e){o.push(n.forumOffline.getDiscussionReplies(e.discussion).then(function(n){e.numreplies=parseInt(e.numreplies,10)+n.length}))}),Promise.all(o)})})})},AddonModForumIndexComponent.prototype.fetchMoreDiscussions=function(e){var n=this;return this.fetchDiscussions(!1).catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.mod_forum.errorgetforum",!0),n.loadMoreError=!0}).finally(function(){e&&e()})},AddonModForumIndexComponent.prototype.fetchSortOrderPreference=function(){var e=this;return(this.sortingAvailable?this.userProvider.getUserPreference(u.a.PREFERENCE_SORTORDER).then(function(e){return e?parseInt(e,10):null}):Promise.resolve(null)).then(function(n){e.selectedSortOrder=e.sortOrders.find(function(e){return e.value===n})||e.sortOrders[0]})},AddonModForumIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.forumProvider.invalidateForumData(this.courseId)),this.forum&&(e.push(this.forumProvider.invalidateDiscussionsList(this.forum.id)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.forum.cmid)),e.push(this.forumProvider.invalidateAccessInformation(this.forum.id))),this.sortingAvailable&&e.push(this.userProvider.invalidateUserPreference(u.a.PREFERENCE_SORTORDER)),Promise.all(e)},AddonModForumIndexComponent.prototype.sync=function(){return this.prefetchHandler.sync(this.module,this.courseId)},AddonModForumIndexComponent.prototype.hasSyncSucceed=function(e){return e.updated},AddonModForumIndexComponent.prototype.isRefreshSyncNeeded=function(e){return this.forum&&"index"!=e.source&&e.forumId==this.forum.id&&e.userId==this.sitesProvider.getCurrentSiteUserId()},AddonModForumIndexComponent.prototype.eventReceived=function(e,n){var t=this;(this.forum&&this.forum.id===n.forumId||n.cmId===this.module.id)&&(e&&this.splitviewCtrl.isOn()&&this.splitviewCtrl.emptyDetails(),this.showLoadingAndRefresh(!1).finally(function(){if(e&&t.splitviewCtrl.isOn())if(n.discussionIds){var o=t.discussions.find(function(e){return n.discussionIds.indexOf(e.discussion)>=0});o&&t.openDiscussion(o)}else n.discTimecreated&&t.openNewDiscussion(n.discTimecreated)}),this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata))},AddonModForumIndexComponent.prototype.openDiscussion=function(e){this.splitviewCtrl.push("AddonModForumDiscussionPage",{courseId:this.courseId,cmId:this.module.id,forumId:this.forum.id,discussion:e,trackPosts:this.trackPosts})},AddonModForumIndexComponent.prototype.openNewDiscussion=function(e){void 0===e&&(e=0);this.splitviewCtrl.push("AddonModForumNewDiscussionPage",{courseId:this.courseId,cmId:this.module.id,forumId:this.forum.id,timeCreated:e}),this.selectedDiscussion=0},AddonModForumIndexComponent.prototype.showSortOrderSelector=function(e){var n=this;if(this.sortingAvailable){var t=this.modalCtrl.create("AddonModForumSortOrderSelectorPage",{sortOrders:this.sortOrders,selected:this.selectedSortOrder.value});t.onDidDismiss(function(e){n.sortOrderSelectorExpanded=!1,e&&e.value!=n.selectedSortOrder.value&&(n.selectedSortOrder=e,n.page=0,n.userProvider.setUserPreference(u.a.PREFERENCE_SORTORDER,e.value.toFixed(0)).then(function(){n.showLoadingAndFetch()}).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error updating preference.")}))}),t.present({ev:e}),this.sortOrderSelectorExpanded=!0}},AddonModForumIndexComponent.prototype.showOptionsMenu=function(e,n){e.preventDefault(),e.stopPropagation();var t=this.popoverCtrl.create(c.a,{discussion:n,forumId:this.forum.id,cmId:this.module.id});t.onDidDismiss(function(e){if(e&&e.action)switch(e.action){case"lock":n.locked=e.value;break;case"pin":n.pinned=e.value;break;case"star":n.starred=e.value}}),t.present({ev:e})},AddonModForumIndexComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.syncManualObserver&&this.syncManualObserver.off(),this.newDiscObserver&&this.newDiscObserver.off(),this.replyObserver&&this.replyObserver.off(),this.viewDiscObserver&&this.viewDiscObserver.off(),this.changeDiscObserver&&this.changeDiscObserver.off(),this.ratingOfflineObserver&&this.ratingOfflineObserver.off(),this.ratingSyncObserver&&this.ratingSyncObserver.off()},AddonModForumIndexComponent=Object(o.__decorate)([Object(o.__param)(1,Object(r.E)())],AddonModForumIndexComponent)}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(205),r=(t(258),function(){function AddonModGlossaryHelperProvider(e,n,t){this.fileProvider=e,this.uploaderProvider=n,this.glossaryOffline=t}return AddonModGlossaryHelperProvider.prototype.deleteStoredFiles=function(e,n,t,o){var r=this;return this.glossaryOffline.getEntryFolder(e,n,t,o).then(function(e){return r.fileProvider.removeDir(e).catch(function(){})})},AddonModGlossaryHelperProvider.prototype.getStoredFiles=function(e,n,t,o){var r=this;return this.glossaryOffline.getEntryFolder(e,n,t,o).then(function(e){return r.uploaderProvider.getStoredFiles(e)})},AddonModGlossaryHelperProvider.prototype.hasEntryDataChanged=function(e,n,t){return t&&void 0!==t.concept?t.definition!=e.definition||t.concept!=e.concept||this.uploaderProvider.areFileListDifferent(n,t.files):e.definition||e.concept||n.length>0},AddonModGlossaryHelperProvider.prototype.storeFiles=function(e,n,t,o,r){var i=this;return this.glossaryOffline.getEntryFolder(e,n,t,r).then(function(e){return i.uploaderProvider.storeFilesToUpload(e,o)})},AddonModGlossaryHelperProvider.prototype.uploadOrStoreFiles=function(e,n,t,r,i,l){return i?this.storeFiles(e,n,t,r,l):this.uploaderProvider.uploadOrReuploadFiles(r,o.a.COMPONENT,e,l)},AddonModGlossaryHelperProvider}())},function(e,n,t){"use strict";t.d(n,"a",function(){return d});var o=t(0),r=(t(6),t(29),t(159)),i=t(231),l=t(236),s=t(205),a=(t(258),t(363)),u=t(655),d=(t(403),function(e){function AddonModGlossaryIndexComponent(n,t,o,r,i,l){var u=e.call(this,n)||this;return u.popoverCtrl=t,u.glossaryProvider=o,u.glossaryOffline=r,u.prefetchHandler=i,u.ratingOffline=l,u.component=s.a.COMPONENT,u.moduleName="glossary",u.isSearch=!1,u.entries=[],u.offlineEntries=[],u.canAdd=!1,u.canLoadMore=!1,u.loadMoreError=!1,u.loadingMessage=u.translate.instant("core.loading"),u.syncEventName=a.a.AUTO_SYNCED,u.fetchedEntriesCanLoadMore=!1,u.fetchedEntries=[],u}return Object(o.__extends)(AddonModGlossaryIndexComponent,e),AddonModGlossaryIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.addEntryObserver=this.eventsProvider.on(s.a.ADD_ENTRY_EVENT,this.eventReceived.bind(this)),this.ratingOfflineObserver=this.eventsProvider.on(i.a.RATING_SAVED_EVENT,function(e){n.glossary&&"mod_glossary"==e.component&&"entry"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==n.glossary.coursemodule&&(n.hasOfflineRatings=!0)}),this.ratingSyncObserver=this.eventsProvider.on(l.a.SYNCED_EVENT,function(e){n.glossary&&"mod_glossary"==e.component&&"entry"==e.ratingArea&&"module"==e.contextLevel&&e.instanceId==n.glossary.coursemodule&&(n.hasOfflineRatings=!1)}),this.loadContent(!1,!0).then(function(){n.glossary&&(n.splitviewCtrl.isOn()&&n.entries.length>0&&n.openEntry(n.entries[0].id),n.glossaryProvider.logView(n.glossary.id,n.viewMode,n.glossary.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){}))})},AddonModGlossaryIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.glossaryProvider.getGlossary(this.courseId,this.module.id).then(function(e){if(o.glossary=e,o.description=e.intro||o.description,o.canAdd=o.glossaryProvider.isPluginEnabledForEditing()&&e.canaddentry||!1,o.dataRetrieved.emit(o.glossary),o.fetchMode||o.switchMode("letter_all"),n)return o.syncActivity(t)}).then(function(){var e=[];return e.push(o.fetchEntries().then(function(){return o.glossaryOffline.getGlossaryNewEntries(o.glossary.id).then(function(e){e.sort(function(e,n){return e.concept.localeCompare(n.fullname)}),o.hasOffline=!!e.length,o.offlineEntries=e||[]})})),e.push(o.ratingOffline.hasRatings("mod_glossary","entry","module",o.glossary.coursemodule).then(function(e){o.hasOfflineRatings=e})),Promise.all(e)}).finally(function(){o.fillContextMenu(e)})},AddonModGlossaryIndexComponent.prototype.fetchEntries=function(e){var n=this;if(void 0===e&&(e=!1),this.loadMoreError=!1,!this.fetchFunction||!this.fetchArguments)return Promise.resolve({entries:[],count:0});return this.glossaryProvider.fetchEntries(this.fetchFunction,this.fetchArguments,e?this.entries.length:0,s.a.LIMIT_ENTRIES).then(function(t){if(e)Array.prototype.push.apply(n.entries,t.entries);else if(n.entries=t.entries,n.splitviewCtrl.isOn())if(n.entries.length>0){n.selectedEntry&&n.entries.some(function(e){return e.id==n.selectedEntry})||n.openEntry(n.entries[0].id)}else n.selectedEntry=null,n.splitviewCtrl.emptyDetails();n.canLoadMore=n.entries.length<t.count}).catch(function(e){return Promise.reject(e)})},AddonModGlossaryIndexComponent.prototype.invalidateContent=function(){var e=[];return this.fetchInvalidate&&this.fetchArguments&&e.push(this.fetchInvalidate.apply(this.glossaryProvider,this.fetchArguments)),e.push(this.glossaryProvider.invalidateCourseGlossaries(this.courseId)),this.glossary&&this.glossary.id&&e.push(this.glossaryProvider.invalidateCategories(this.glossary.id)),Promise.all(e)},AddonModGlossaryIndexComponent.prototype.sync=function(){return this.prefetchHandler.sync(this.module,this.courseId)},AddonModGlossaryIndexComponent.prototype.hasSyncSucceed=function(e){return e.updated},AddonModGlossaryIndexComponent.prototype.isRefreshSyncNeeded=function(e){return this.glossary&&e.glossaryId==this.glossary.id&&e.userId==this.sitesProvider.getCurrentSiteUserId()},AddonModGlossaryIndexComponent.prototype.switchMode=function(e){var n=this;switch(this.fetchMode=e,this.isSearch=!1,e){case"author_all":this.viewMode="author",this.fetchFunction=this.glossaryProvider.getEntriesByAuthor,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByAuthor,this.fetchArguments=[this.glossary.id,"ALL","LASTNAME","ASC"],this.getDivider=function(e){return e.userfullname},this.showDivider=function(e,n){return void 0===n||e.userid!=n.userid};break;case"cat_all":this.viewMode="cat",this.fetchFunction=this.glossaryProvider.getEntriesByCategory,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByCategory,this.fetchArguments=[this.glossary.id,s.a.SHOW_ALL_CATEGORIES],this.getDivider=function(e){return e.categoryname},this.showDivider=function(e,t){return!t||n.getDivider(e)!=n.getDivider(t)};break;case"newest_first":this.viewMode="date",this.fetchFunction=this.glossaryProvider.getEntriesByDate,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByDate,this.fetchArguments=[this.glossary.id,"CREATION","DESC"],this.getDivider=null,this.showDivider=function(){return!1};break;case"recently_updated":this.viewMode="date",this.fetchFunction=this.glossaryProvider.getEntriesByDate,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByDate,this.fetchArguments=[this.glossary.id,"UPDATE","DESC"],this.getDivider=null,this.showDivider=function(){return!1};break;case"letter_all":default:this.viewMode="letter",this.fetchMode="letter_all",this.fetchFunction=this.glossaryProvider.getEntriesByLetter,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesByLetter,this.fetchArguments=[this.glossary.id,"ALL"],this.getDivider=function(e){return(n.textUtils.cleanTags(e.concept)||e.concept).substr(0,1).toUpperCase()},this.showDivider=function(e,t){return!t||n.getDivider(e)!=n.getDivider(t)}}},AddonModGlossaryIndexComponent.prototype.loadMoreEntries=function(e){var n=this;return this.fetchEntries(!0).catch(function(e){n.loadMoreError=!0,n.domUtils.showErrorModalDefault(e,"addon.mod_glossary.errorloadingentries",!0)}).finally(function(){e&&e()})},AddonModGlossaryIndexComponent.prototype.openModePicker=function(e){var n=this,t=this.popoverCtrl.create(u.a,{browsemodes:this.glossary.browsemodes,selectedMode:this.isSearch?"":this.fetchMode});t.onDidDismiss(function(e){e!==n.fetchMode?n.changeFetchMode(e):n.isSearch&&n.toggleSearch()}),t.present({ev:e})},AddonModGlossaryIndexComponent.prototype.toggleSearch=function(){this.isSearch?(this.isSearch=!1,this.entries=this.fetchedEntries,this.canLoadMore=this.fetchedEntriesCanLoadMore,this.switchMode(this.fetchMode)):(this.fetchFunction=this.glossaryProvider.getEntriesBySearch,this.fetchInvalidate=this.glossaryProvider.invalidateEntriesBySearch,this.fetchArguments=null,this.getDivider=null,this.showDivider=function(){return!1},this.isSearch=!0,this.fetchedEntries=this.entries,this.fetchedEntriesCanLoadMore=this.canLoadMore,this.canLoadMore=!1,this.entries=[])},AddonModGlossaryIndexComponent.prototype.changeFetchMode=function(e){this.isSearch=!1,this.loadingMessage=this.translate.instant("core.loading"),this.domUtils.scrollToTop(this.content),this.switchMode(e),this.loaded=!1,this.loadContent()},AddonModGlossaryIndexComponent.prototype.openEntry=function(e){this.splitviewCtrl.push("AddonModGlossaryEntryPage",{courseId:this.courseId,entryId:e}),this.selectedEntry=e},AddonModGlossaryIndexComponent.prototype.openNewEntry=function(e){var n={courseId:this.courseId,module:this.module,glossary:this.glossary,entry:e};this.splitviewCtrl.getMasterNav().push("AddonModGlossaryEditPage",n),this.selectedEntry=0},AddonModGlossaryIndexComponent.prototype.search=function(e){this.loadingMessage=this.translate.instant("core.searching"),this.fetchArguments=[this.glossary.id,e,1,"CONCEPT","ASC"],this.loaded=!1,this.loadContent()},AddonModGlossaryIndexComponent.prototype.eventReceived=function(e){this.glossary&&this.glossary.id===e.glossaryId&&(this.showLoadingAndRefresh(!1),this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata))},AddonModGlossaryIndexComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.addEntryObserver&&this.addEntryObserver.off(),this.ratingOfflineObserver&&this.ratingOfflineObserver.off(),this.ratingSyncObserver&&this.ratingSyncObserver.off()},AddonModGlossaryIndexComponent}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(6),t(268)),i=t(237),l=(t(404),function(e){function AddonModImscpIndexComponent(n,t,o,r,l,s){var a=e.call(this,n)||this;return a.imscpProvider=t,a.courseProvider=o,a.appProvider=r,a.modalCtrl=l,a.imscpPrefetch=s,a.component=i.a.COMPONENT,a.items=[],a.src="",a.previousItem="",a.nextItem="",a}return Object(o.__extends)(AddonModImscpIndexComponent,e),AddonModImscpIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent().then(function(){n.imscpProvider.logView(n.module.instance,n.module.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},AddonModImscpIndexComponent.prototype.invalidateContent=function(){return this.imscpProvider.invalidateContent(this.module.id,this.courseId)},AddonModImscpIndexComponent.prototype.fetchContent=function(e){var n,t=this,o=!1,r=[];return r.push(this.imscpProvider.getImscp(this.courseId,this.module.id).then(function(e){t.description=e.intro,t.dataRetrieved.emit(e)})),r.push(this.imscpPrefetch.download(this.module,this.courseId).catch(function(e){return o=!0,n=e,t.courseProvider.loadModuleContents(t.module,t.courseId).catch(function(e){return t.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0),Promise.reject(null)})})),Promise.all(r).then(function(){return t.items=t.imscpProvider.createItemList(t.module.contents),t.items.length&&void 0===t.currentItem&&(t.currentItem=t.items[0].href),t.loadItem(t.currentItem).catch(function(e){return t.domUtils.showErrorModalDefault(e,"addon.mod_imscp.deploymenterror",!0),Promise.reject(null)})}).then(function(){o&&t.appProvider.isOnline()&&t.showErrorDownloadingSomeFiles(n)}).finally(function(){t.fillContextMenu(e)})},AddonModImscpIndexComponent.prototype.loadItem=function(e){var n=this;return this.imscpProvider.getIframeSrc(this.module,e).then(function(t){n.currentItem=e,n.previousItem=n.imscpProvider.getPreviousItem(n.items,e),n.nextItem=n.imscpProvider.getNextItem(n.items,e),n.src&&t==n.src?(n.src="",setTimeout(function(){n.src=t})):n.src=t})},AddonModImscpIndexComponent.prototype.showToc=function(e){var n=this,t=this.modalCtrl.create("AddonModImscpTocPage",{items:this.items,selected:this.currentItem},{cssClass:"core-modal-lateral",showBackdrop:!0,enableBackdropDismiss:!0,enterAnimation:"core-modal-lateral-transition",leaveAnimation:"core-modal-lateral-transition"});t.onDidDismiss(function(e){e&&n.loadItem(e)}),t.present({ev:e})},AddonModImscpIndexComponent}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(170),s=(t(286),t(287)),a=(t(331),t(42)),u=(t(202),function(e){function AddonModLessonIndexComponent(n,t,o,r,i,a,u,d,c,p,f){var h=e.call(this,n,o)||this;return h.lessonProvider=t,h.groupsProvider=r,h.lessonOffline=i,h.lessonSync=a,h.utils=u,h.prefetchHandler=d,h.navCtrl=c,h.timeUtils=p,h.userProvider=f,h.component=l.a.COMPONENT,h.moduleName="lesson",h.syncEventName=s.a.AUTO_SYNCED,h.dataSent=!1,h}return Object(o.__extends)(AddonModLessonIndexComponent,e),AddonModLessonIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.selectedTab="report"==this.action?1:0,this.loadContent(!1,!0).then(function(){!n.lesson||n.preventMessages&&n.preventMessages.length||n.logView()})},AddonModLessonIndexComponent.prototype.changeGroup=function(e){var n=this;this.reportLoaded=!1,this.setGroup(e).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error getting report.")}).finally(function(){n.reportLoaded=!0})},AddonModLessonIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1);var r=!0;return this.askPassword=!1,this.lessonProvider.getLesson(this.courseId,this.module.id).then(function(e){if(o.lesson=e,o.dataRetrieved.emit(o.lesson),o.description=o.lesson.intro,n)return o.syncActivity(t)}).then(function(){return o.lessonProvider.getAccessInformation(o.lesson.id)}).then(function(n){var t=[];if(o.accessInfo=n,o.canManage=n.canmanage,o.canViewReports=n.canviewreports,o.preventMessages=[],o.lessonProvider.isLessonOffline(o.lesson)&&(o.setStatusListener(),t.push(o.lessonSync.hasDataToSync(o.lesson.id,n.attemptscount).then(function(e){o.hasOffline=e})),t.push(o.lessonSync.getRetakeFinishedInSync(o.lesson.id).then(function(e){e&&e.retake==n.attemptscount-1?o.retakeToReview=e:(o.retakeToReview=void 0,e&&o.lessonSync.deleteRetakeFinishedInSync(o.lesson.id))})),t.push(o.lessonOffline.hasFinishedRetake(o.lesson.id).then(function(e){o.finishedOffline=e})),t.push(o.lessonProvider.getContentPagesViewedOnline(o.lesson.id,n.attemptscount)),t.push(o.lessonProvider.getQuestionsAttemptsOnline(o.lesson.id,n.attemptscount))),n.preventaccessreasons&&n.preventaccessreasons.length){var i=o.lessonProvider.getPreventAccessReason(n,!1);if("passwordprotectedlesson"==i.reason){var l=o.password?Promise.resolve(o.password):o.lessonProvider.getStoredPassword(o.lesson.id);t.push(l.then(function(e){return o.validatePassword(e)}).then(function(){(i=o.lessonProvider.getPreventAccessReason(n,!0))&&(o.preventMessages=[i])}).catch(function(){o.askPassword=!0,o.preventMessages=[i],r=!1}))}else o.preventMessages=[i],r=!1}return 1==o.selectedTab&&o.canViewReports&&t.push(o.fetchReportData()),Promise.all(t).then(function(){r&&o.lessonReady(e)})}).finally(function(){o.fillContextMenu(e)})},AddonModLessonIndexComponent.prototype.fetchReportData=function(){var e=this;return this.groupsProvider.getActivityGroupInfo(this.module.id).then(function(n){return e.groupInfo=n,e.setGroup(e.groupsProvider.validateGroupId(e.group,n))}).finally(function(){e.reportLoaded=!0})},AddonModLessonIndexComponent.prototype.hasSyncSucceed=function(e){return(e.updated||this.dataSent)&&this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata),this.dataSent=!1,e.updated},AddonModLessonIndexComponent.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidEnter(),this.hasPlayed&&(this.hasPlayed=!1,this.dataSentObserver&&this.dataSentObserver.off(),this.dataSentObserver=void 0,this.showLoadingAndRefresh(!0,!1))},AddonModLessonIndexComponent.prototype.ionViewDidLeave=function(){var n=this;e.prototype.ionViewDidLeave.call(this),this.tabsComponent&&this.tabsComponent.ionViewDidLeave(),"AddonModLessonPlayerPage"==this.navCtrl.getActive().component.name&&(this.hasPlayed=!0,this.dataSentObserver&&this.dataSentObserver.off(),this.dataSentObserver=this.eventsProvider.on(l.a.DATA_SENT_EVENT,function(e){e.lessonId===n.lesson.id&&"launch"!=e.type&&(n.dataSent=!0)},this.siteId))},AddonModLessonIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.lessonProvider.invalidateLessonData(this.courseId)),this.lesson&&(e.push(this.lessonProvider.invalidateAccessInformation(this.lesson.id)),e.push(this.lessonProvider.invalidatePages(this.lesson.id)),e.push(this.lessonProvider.invalidateLessonWithPassword(this.lesson.id)),e.push(this.lessonProvider.invalidateTimers(this.lesson.id)),e.push(this.lessonProvider.invalidateContentPagesViewed(this.lesson.id)),e.push(this.lessonProvider.invalidateQuestionsAttempts(this.lesson.id)),e.push(this.lessonProvider.invalidateRetakesOverview(this.lesson.id)),e.push(this.groupsProvider.invalidateActivityGroupInfo(this.module.id))),Promise.all(e)},AddonModLessonIndexComponent.prototype.isRefreshSyncNeeded=function(e){return this.lesson&&e.lessonId==this.lesson.id},AddonModLessonIndexComponent.prototype.lessonReady=function(e){this.askPassword=!1,this.leftDuringTimed=this.hasOffline||this.lessonProvider.leftDuringTimed(this.accessInfo),this.password&&this.lessonProvider.storePassword(this.lesson.id,this.password)},AddonModLessonIndexComponent.prototype.logView=function(){var e=this;this.lessonProvider.logViewLesson(this.lesson.id,this.password,this.lesson.name).then(function(){e.courseProvider.checkModuleCompletion(e.courseId,e.module.completiondata)}).catch(function(e){})},AddonModLessonIndexComponent.prototype.playLesson=function(e){var n=this;return(this.hasOffline?e?this.lessonProvider.getLastPageSeen(this.lesson.id,this.accessInfo.attemptscount):Promise.resolve(this.accessInfo.firstpageid):this.leftDuringTimed&&!this.lesson.timelimit?Promise.resolve(e?this.accessInfo.lastpageseen:this.accessInfo.firstpageid):Promise.resolve()).then(function(e){n.navCtrl.push("AddonModLessonPlayerPage",{courseId:n.courseId,lessonId:n.lesson.id,pageId:e,password:n.password})})},AddonModLessonIndexComponent.prototype.indexSelected=function(){this.selectedTab=0},AddonModLessonIndexComponent.prototype.reportsSelected=function(){var e=this;this.selectedTab=1,this.groupInfo||this.fetchReportData().catch(function(n){e.domUtils.showErrorModalDefault(n,"Error getting report.")})},AddonModLessonIndexComponent.prototype.review=function(){this.retakeToReview&&this.navCtrl.push("AddonModLessonPlayerPage",{courseId:this.courseId,lessonId:this.lesson.id,pageId:this.retakeToReview.pageid,password:this.password,review:!0,retake:this.retakeToReview.retake})},AddonModLessonIndexComponent.prototype.setGroup=function(e){var n=this;if(this.group=e,this.selectedGroupName="",e&&this.groupInfo&&this.groupInfo.groups)for(var t=0;t<this.groupInfo.groups.length;t++){var o=this.groupInfo.groups[t];if(e==o.id){this.selectedGroupName=o.name;break}}return this.lessonProvider.getRetakesOverview(this.lesson.id,e).then(function(e){var t=[];return e&&null!=e.avetime&&e.numofattempts&&(e.avetime=Math.floor(e.avetime/e.numofattempts),e.avetimeReadable=n.timeUtils.formatTime(e.avetime)),e&&null!=e.hightime&&(e.hightimeReadable=n.timeUtils.formatTime(e.hightime)),e&&null!=e.lowtime&&(e.lowtimeReadable=n.timeUtils.formatTime(e.lowtime)),e&&e.lessonscored&&(e.numofattempts&&(e.avescore=n.textUtils.roundToDecimals(e.avescore,2)),null!=e.highscore&&(e.highscore=n.textUtils.roundToDecimals(e.highscore,2)),null!=e.lowscore&&(e.lowscore=n.textUtils.roundToDecimals(e.lowscore,2))),e&&e.students&&e.students.forEach(function(e){e.bestgrade=n.textUtils.roundToDecimals(e.bestgrade,2),t.push(n.userProvider.getProfile(e.id,n.courseId,!0).then(function(n){e.profileimageurl=n.profileimageurl}).catch(function(){}))}),n.utils.allPromises(t).catch(function(){}).then(function(){n.overview=e})})},AddonModLessonIndexComponent.prototype.showStatus=function(e,n){this.showSpinner=e==a.a.DOWNLOADING},AddonModLessonIndexComponent.prototype.start=function(e){var n=this;this.showSpinner||(this.lessonProvider.isLessonOffline(this.lesson)&&this.currentStatus!=a.a.DOWNLOADED?(this.showSpinner=!0,this.prefetchHandler.prefetch(this.module,this.courseId,!0).then(function(){n.playLesson(e)}).catch(function(t){n.hasOffline?n.playLesson(e):n.domUtils.showErrorModalDefault(t,"core.errordownloading",!0)}).finally(function(){n.showSpinner=!1})):this.playLesson(e))},AddonModLessonIndexComponent.prototype.submitPassword=function(e,n){var t=this;e.preventDefault(),e.stopPropagation();var o=n&&n.value;o?(this.loaded=!1,this.refreshIcon="spinner",this.syncIcon="spinner",this.validatePassword(o).then(function(){t.lessonReady(!1);var e=t.lessonProvider.getPreventAccessReason(t.accessInfo,!0);t.preventMessages=e?[e]:[],t.logView()}).catch(function(e){t.domUtils.showErrorModal(e)}).finally(function(){t.loaded=!0,t.refreshIcon="refresh",t.syncIcon="sync",t.domUtils.triggerFormSubmittedEvent(t.formElement,!0,t.siteId)})):this.domUtils.showErrorModal("addon.mod_lesson.emptypassword",!0)},AddonModLessonIndexComponent.prototype.sync=function(){var e=this;return this.lessonSync.syncLesson(this.lesson.id,!0).then(function(n){return!n.updated&&e.dataSent&&e.isPrefetched()?e.lessonSync.prefetchAfterUpdate(e.module,e.courseId).catch(function(){}).then(function(){return n}):n})},AddonModLessonIndexComponent.prototype.validatePassword=function(e){var n=this;return this.lessonProvider.getLessonWithPassword(this.lesson.id,e).then(function(t){n.lesson=t,n.password=e}).catch(function(e){return n.password="",Promise.reject(e)})},AddonModLessonIndexComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.dataSentObserver&&this.dataSentObserver.off()},AddonModLessonIndexComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)())],AddonModLessonIndexComponent)}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(298),s=function(e){function AddonModLtiIndexComponent(n,t,o){var r=e.call(this,n,t)||this;return r.content=t,r.ltiProvider=o,r.component=l.a.COMPONENT,r.moduleName="lti",r.fetchContentDefaultError="addon.mod_lti.errorgetlti",r}return Object(o.__extends)(AddonModLtiIndexComponent,e),AddonModLtiIndexComponent.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.loadContent()},AddonModLtiIndexComponent.prototype.checkCompletion=function(){this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata)},AddonModLtiIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.ltiProvider.getLti(this.courseId,this.module.id).then(function(e){o.lti=e,o.description=o.lti.intro,o.dataRetrieved.emit(o.lti)}).finally(function(){o.fillContextMenu(e)})},AddonModLtiIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.ltiProvider.invalidateLti(this.courseId)),this.lti&&e.push(this.ltiProvider.invalidateLtiLaunchData(this.lti.id)),Promise.all(e)},AddonModLtiIndexComponent.prototype.launch=function(){var e=this;this.ltiProvider.getLtiLaunchData(this.lti.id).then(function(n){return e.ltiProvider.logView(e.lti.id,e.lti.name).then(function(){e.checkCompletion()}).catch(function(e){}),e.ltiProvider.launch(n.endpoint,n.parameters)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"core.error",!0)})},AddonModLtiIndexComponent=Object(o.__decorate)([Object(o.__param)(1,Object(r.E)())],AddonModLtiIndexComponent)}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(268),i=t(222),l=(t(332),t(405),function(e){function AddonModPageIndexComponent(n,t,o,r,l,s,a){var u=e.call(this,n)||this;return u.pageProvider=t,u.courseProvider=o,u.appProvider=r,u.pageHelper=l,u.pagePrefetch=s,u.utils=a,u.component=i.a.COMPONENT,u.displayDescription=!0,u.displayTimemodified=!0,u.fetchContentDefaultError="addon.mod_page.errorwhileloadingthepage",u}return Object(o.__extends)(AddonModPageIndexComponent,e),AddonModPageIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canGetPage=this.pageProvider.isGetPageWSAvailable(),this.loadContent().then(function(){n.pageProvider.logView(n.module.instance,n.module.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},AddonModPageIndexComponent.prototype.invalidateContent=function(){return this.pageProvider.invalidateContent(this.module.id,this.courseId)},AddonModPageIndexComponent.prototype.fetchContent=function(e){var n,t=this,o=!1;return this.pagePrefetch.download(this.module,this.courseId).catch(function(e){o=!0,n=e}).then(function(){if(!t.module.contents.length)return t.courseProvider.loadModuleContents(t.module,t.courseId)}).then(function(){var e,r=[];return e=t.canGetPage?t.pageProvider.getPageData(t.courseId,t.module.id):t.courseProvider.getModule(t.module.id,t.courseId),r.push(e.then(function(e){if(e&&(t.description=e.intro||e.description,t.dataRetrieved.emit(e),t.canGetPage))if(t.page=e,t.page.displayoptions){var n=t.textUtils.unserialize(t.page.displayoptions)||{};t.displayDescription=void 0===n.printintro||t.utils.isTrueOrOne(n.printintro),t.displayTimemodified=void 0===n.printlastmodified||t.utils.isTrueOrOne(n.printlastmodified)}else t.displayDescription=!0,t.displayTimemodified=!0}).catch(function(){})),r.push(t.pageHelper.getPageHtml(t.module.contents,t.module.id).then(function(e){t.contents=e,o&&t.appProvider.isOnline()&&t.showErrorDownloadingSomeFiles(n)})),Promise.all(r)}).finally(function(){t.fillContextMenu(e)})},AddonModPageIndexComponent}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(168),s=(t(253),t(263),t(259)),a=(t(333),t(42)),u=function(e){function AddonModQuizIndexComponent(n,t,o,r,i,a,u,d,c){var p=e.call(this,n,o)||this;return p.quizProvider=t,p.quizHelper=r,p.quizOffline=i,p.quizSync=a,p.behaviourDelegate=u,p.prefetchHandler=d,p.navCtrl=c,p.component=l.a.COMPONENT,p.moduleName="quiz",p.showStatusSpinner=!0,p.fetchContentDefaultError="addon.mod_quiz.errorgetquiz",p.syncEventName=s.a.AUTO_SYNCED,p.hasPlayed=!1,p}return Object(o.__extends)(AddonModQuizIndexComponent,e),AddonModQuizIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){n.quizData&&n.quizProvider.logViewQuiz(n.quizData.id,n.quizData.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){})}),this.finishedObserver=this.eventsProvider.on(l.a.ATTEMPT_FINISHED_EVENT,function(e){n.quizData&&e.quizId==n.quizData.id&&(n.autoReview=e)},this.siteId)},AddonModQuizIndexComponent.prototype.attemptQuiz=function(){var e=this;if(!this.showStatusSpinner)if(this.quizProvider.isQuizOffline(this.quizData)){var n=this.currentStatus==a.a.DOWNLOADED;n&&this.modulePrefetchDelegate.canCheckUpdates()?this.openQuiz():(this.showStatusSpinner=!0,this.prefetchHandler.prefetch(this.module,this.courseId,!0).then(function(){e.openQuiz()}).catch(function(t){e.hasOffline||n&&!e.modulePrefetchDelegate.canCheckUpdates()?e.openQuiz():e.domUtils.showErrorModalDefault(t,"core.errordownloading",!0)}).finally(function(){e.showStatusSpinner=!1}))}else this.openQuiz()},AddonModQuizIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.quizProvider.getQuiz(this.courseId,this.module.id).then(function(e){return o.quizData=e,o.quizData.gradeMethodReadable=o.quizProvider.getQuizGradeMethod(o.quizData.grademethod),o.now=(new Date).getTime(),o.dataRetrieved.emit(o.quizData),o.description=o.quizData.intro||o.description,o.quizSync.getSyncWarnings(o.quizData.id).then(function(e){if(e&&e.length)return o.domUtils.showErrorModal(o.textUtils.buildMessage(e)),o.quizSync.setSyncWarnings(o.quizData.id,[])})}).then(function(){if(o.quizProvider.isQuizOffline(o.quizData))return o.syncActivity(t).catch(function(){o.autoReview=void 0});o.autoReview=void 0,o.showStatusSpinner=!1}).then(function(){return o.quizProvider.isQuizOffline(o.quizData)&&(o.setStatusListener(),o.quizSync.getReadableSyncTime(o.quizData.id).then(function(e){o.syncTime=e}),o.quizSync.hasDataToSync(o.quizData.id).then(function(e){o.hasOffline=e})),o.quizProvider.getQuizAccessInformation(o.quizData.id).then(function(e){return o.quizAccessInfo=e,o.quizData.showReviewColumn=e.canreviewmyattempts,o.accessRules=e.accessrules,o.unsupportedRules=o.quizProvider.getUnsupportedRules(e.activerulenames),o.quizData.preferredbehaviour&&(o.behaviourSupported=o.behaviourDelegate.isBehaviourSupported(o.quizData.preferredbehaviour)),o.quizProvider.getQuizRequiredQtypes(o.quizData.id).then(function(e){return o.unsupportedQuestions=o.quizProvider.getUnsupportedQuestions(e),o.hasSupportedQuestions=!!e.find(function(e){return"random"!=e&&-1==o.unsupportedQuestions.indexOf(e)}),o.getAttempts()})})}).then(function(){o.quiz=o.quizData}).finally(function(){o.fillContextMenu(e)})},AddonModQuizIndexComponent.prototype.getAttempts=function(){var e=this;return this.quizProvider.getAttemptAccessInformation(this.quizData.id,0).then(function(n){return e.attemptAccessInfo=n,e.quizProvider.getUserAttempts(e.quizData.id).then(function(n){return e.treatAttempts(n).then(function(n){if(e.attempts=n,e.attempts.length){e.moreAttempts=!e.quizProvider.isAttemptFinished(e.attempts[e.attempts.length-1].state)||!e.attemptAccessInfo.isfinished}else e.moreAttempts=!e.attemptAccessInfo.isfinished;return e.getButtonText(),e.getResultInfo()})})})},AddonModQuizIndexComponent.prototype.getButtonText=function(){this.buttonText="",0!==this.quizData.hasquestions&&(this.attempts.length&&!this.quizProvider.isAttemptFinished(this.attempts[this.attempts.length-1].state)?this.quizAccessInfo.canattempt?this.buttonText="addon.mod_quiz.continueattemptquiz":this.quizAccessInfo.canpreview&&(this.buttonText="addon.mod_quiz.continuepreview"):this.quizAccessInfo.canattempt?(this.preventMessages=this.attemptAccessInfo.preventnewattemptreasons,this.preventMessages.length||(this.buttonText=this.attempts.length?"addon.mod_quiz.reattemptquiz":"addon.mod_quiz.attemptquiznow")):this.quizAccessInfo.canpreview&&(this.buttonText="addon.mod_quiz.previewquiznow")),this.buttonText&&(this.preventMessages=this.quizAccessInfo.preventaccessreasons,this.moreAttempts?this.quizAccessInfo.canattempt&&this.preventMessages.length?this.buttonText="":this.hasSupportedQuestions&&!this.unsupportedRules.length&&this.behaviourSupported||(this.buttonText=""):this.buttonText="")},AddonModQuizIndexComponent.prototype.getResultInfo=function(){var e=this;if(this.attempts.length&&this.quizData.showGradeColumn&&this.bestGrade.hasgrade&&void 0!==this.gradebookData.grade){var n=this.quizProvider.formatGrade(this.gradebookData.grade,this.quizData.decimalpoints),t=this.quizProvider.formatGrade(this.bestGrade.grade,this.quizData.decimalpoints),o=n;if(this.showResults=!0,this.gradeOverridden=n!=t,this.gradebookFeedback=this.gradebookData.feedback,this.bestGrade.grade>this.gradebookData.grade&&this.gradebookData.grade==this.quizData.grade&&(this.gradeOverridden=!1,o=t),this.overallStats)if(this.moreAttempts)this.gradeResult=this.translate.instant("addon.mod_quiz.gradesofar",{$a:{method:this.quizData.gradeMethodReadable,mygrade:o,quizgrade:this.quizData.gradeFormatted}});else{var r=this.translate.instant("addon.mod_quiz.outofshort",{$a:{grade:o,maxgrade:this.quizData.gradeFormatted}});this.gradeResult=this.translate.instant("addon.mod_quiz.yourfinalgradeis",{$a:r})}if(this.quizData.showFeedbackColumn)return this.quizProvider.getFeedbackForGrade(this.quizData.id,this.gradebookData.grade).then(function(n){e.overallFeedback=n.feedbacktext})}else this.showResults=!1;return Promise.resolve()},AddonModQuizIndexComponent.prototype.goToAutoReview=function(){var e=this;this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata);var n=this.autoReview.attemptId;return this.quizAccessInfo.canreviewmyattempts?this.quizProvider.getAttemptReview(n,-1).then(function(){e.navCtrl.push("AddonModQuizReviewPage",{courseId:e.courseId,quizId:e.quizData.id,attemptId:n})}).catch(function(){}):Promise.resolve()},AddonModQuizIndexComponent.prototype.hasSyncSucceed=function(e){return e.attemptFinished&&this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata),e.answersSent},AddonModQuizIndexComponent.prototype.ionViewDidEnter=function(){var n=this;if(e.prototype.ionViewDidEnter.call(this),this.hasPlayed){this.hasPlayed=!1;var t=void 0;this.autoReview&&this.autoReview.synced?(t=this.goToAutoReview(),this.autoReview=void 0):t=Promise.resolve(),this.loaded=!1,this.refreshIcon="spinner",this.syncIcon="spinner",this.domUtils.scrollToTop(this.content),t.then(function(){n.refreshContent().finally(function(){n.loaded=!0,n.refreshIcon="refresh",n.syncIcon="sync"})})}else this.autoReview=void 0},AddonModQuizIndexComponent.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.autoReview=void 0,"AddonModQuizPlayerPage"==this.navCtrl.getActive().component.name&&(this.hasPlayed=!0)},AddonModQuizIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.quizProvider.invalidateQuizData(this.courseId)),this.quizData&&(e.push(this.quizProvider.invalidateUserAttemptsForUser(this.quizData.id)),e.push(this.quizProvider.invalidateQuizAccessInformation(this.quizData.id)),e.push(this.quizProvider.invalidateQuizRequiredQtypes(this.quizData.id)),e.push(this.quizProvider.invalidateAttemptAccessInformation(this.quizData.id)),e.push(this.quizProvider.invalidateCombinedReviewOptionsForUser(this.quizData.id)),e.push(this.quizProvider.invalidateUserBestGradeForUser(this.quizData.id)),e.push(this.quizProvider.invalidateGradeFromGradebook(this.courseId))),Promise.all(e)},AddonModQuizIndexComponent.prototype.isRefreshSyncNeeded=function(e){return e.attemptFinished&&this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata),!(!this.quizData||e.quizId!=this.quizData.id)&&(this.domUtils.scrollToTop(this.content),!0)},AddonModQuizIndexComponent.prototype.openQuiz=function(){this.navCtrl.push("AddonModQuizPlayerPage",{courseId:this.courseId,quizId:this.quiz.id,moduleUrl:this.module.url})},AddonModQuizIndexComponent.prototype.showStatus=function(e,n){this.showStatusSpinner=e==a.a.DOWNLOADING,e==a.a.DOWNLOADED&&n==a.a.DOWNLOADING&&(this.loaded=!1,this.loadContent())},AddonModQuizIndexComponent.prototype.sync=function(){return this.quizSync.syncQuiz(this.quizData,!0)},AddonModQuizIndexComponent.prototype.treatAttempts=function(e){var n=this;if(!e||!e.length)return Promise.resolve(e);var t=this.quizProvider.getLastFinishedAttemptFromList(e),o=[];return this.autoReview&&t&&t.id>=this.autoReview.attemptId&&(!this.isDestroyed&&this.isCurrentView&&o.push(this.goToAutoReview()),this.autoReview=void 0),o.push(this.quizProvider.loadFinishedOfflineData(e)),o.push(this.quizProvider.getCombinedReviewOptions(this.quizData.id).then(function(e){n.options=e})),o.push(this.quizProvider.getUserBestGrade(this.quizData.id).then(function(e){return n.bestGrade=e,n.quizProvider.getGradeFromGradebook(n.courseId,n.module.id).then(function(e){n.gradebookData={grade:e.graderaw,feedback:e.feedback}}).catch(function(){n.gradebookData={grade:n.bestGrade.grade}})})),Promise.all(o).then(function(){var o=n.quizProvider.formatGrade(void 0!==n.gradebookData.grade?n.gradebookData.grade:n.bestGrade.grade,n.quizData.decimalpoints);return n.quizHelper.setQuizCalculatedData(n.quizData,n.options),n.overallStats=t&&n.options.alloptions.marks>=l.a.QUESTION_OPTIONS_MARK_AND_MAX,e.forEach(function(t){n.quizHelper.setAttemptCalculatedData(n.quizData,t,n.overallStats&&n.quizData.grademethod==l.a.GRADEHIGHEST&&e.length>1,o)}),e})},AddonModQuizIndexComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.finishedObserver&&this.finishedObserver.off()},AddonModQuizIndexComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)())],AddonModQuizIndexComponent)}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var o=t(0),r=t(268),i=t(223),l=(t(406),t(299),this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})}),s=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},a=function(e){function AddonModResourceIndexComponent(n,t,o,r,l,s,a,u,d){var c=e.call(this,n)||this;return c.resourceProvider=t,c.courseProvider=o,c.appProvider=r,c.prefetchHandler=l,c.resourceHelper=s,c.sitesProvider=a,c.utils=u,c.filepoolProvider=d,c.component=i.a.COMPONENT,c.displayDescription=!0,c}return Object(o.__extends)(AddonModResourceIndexComponent,e),AddonModResourceIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canGetResource=this.resourceProvider.isGetResourceWSAvailable(),this.loadContent().then(function(){n.resourceProvider.logView(n.module.instance,n.module.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},AddonModResourceIndexComponent.prototype.invalidateContent=function(){return this.resourceProvider.invalidateContent(this.module.id,this.courseId)},AddonModResourceIndexComponent.prototype.fetchContent=function(e){var n=this;return this.courseProvider.loadModuleContents(this.module,this.courseId,null,!1,e).then(function(){return n.module.contents&&n.module.contents.length?n.canGetResource?n.resourceProvider.getResourceData(n.courseId,n.module.id).catch(function(){}):n.courseProvider.getModule(n.module.id,n.courseId).catch(function(){}):Promise.reject(n.utils.createFakeWSError("core.filenotfound",!0))}).then(function(e){if(e){n.description=e.intro||e.description;var t=n.textUtils.unserialize(e.displayoptions)||{};n.displayDescription=void 0===t.printintro||!!t.printintro,n.dataRetrieved.emit(e)}if(n.resourceHelper.isDisplayedInIframe(n.module)){var o,r=!1;return n.prefetchHandler.download(n.module,n.courseId).catch(function(e){r=!0,o=e}).then(function(){return n.resourceHelper.getIframeSrc(n.module).then(function(e){n.mode="iframe",n.src&&e.toString()==n.src.toString()?(n.src="",setTimeout(function(){n.src=e})):n.src=e,r&&n.appProvider.isOnline()&&n.showErrorDownloadingSomeFiles(o)})})}if(n.resourceHelper.isDisplayedEmbedded(n.module,e&&e.display))return n.mode="embedded",n.resourceHelper.getEmbeddedHtml(n.module,n.courseId).then(function(e){n.contentText=e,n.mode=n.contentText.length>0?"embedded":"external"});n.mode="external"}).finally(function(){n.fillContextMenu(e)})},AddonModResourceIndexComponent.prototype.open=function(){return l(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.prefetchHandler.isDownloadable(this.module,this.courseId)];case 1:return e.sent()?[4,this.resourceHelper.isMainFileDownloadable(this.module)]:[3,3];case 2:if(e.sent())return[2,this.resourceHelper.openModuleFile(this.module,this.courseId)];e.label=3;case 3:return[2,this.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(this.module.url)]}})})},AddonModResourceIndexComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(234),s=(t(386),t(264),t(288)),a=(t(334),t(42)),u=function(e){function AddonModScormIndexComponent(n,t,o,r,i,a,u,d,c,p){var f=e.call(this,n,o)||this;return f.scormProvider=t,f.content=o,f.scormHelper=r,f.scormOffline=i,f.scormSync=a,f.prefetchHandler=u,f.navCtrl=d,f.prefetchDelegate=c,f.utils=p,f.component=l.a.COMPONENT,f.moduleName="scorm",f.currentOrganization={},f.scormOptions={mode:l.a.MODENORMAL,newAttempt:!1},f.modeNormal=l.a.MODENORMAL,f.modeBrowser=l.a.MODEBROWSE,f.fetchContentDefaultError="addon.mod_scorm.errorgetscorm",f.syncEventName=s.a.AUTO_SYNCED,f.hasPlayed=!1,f.dataSent=!1,f}return Object(o.__extends)(AddonModScormIndexComponent,e),AddonModScormIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){n.scorm&&(n.skip&&n.open(),n.scormProvider.logView(n.scorm.id,n.scorm.name).then(function(){n.checkCompletion()}).catch(function(e){}))})},AddonModScormIndexComponent.prototype.checkCompletion=function(){this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata)},AddonModScormIndexComponent.prototype.downloadScormPackage=function(){var e=this;return this.downloading=!0,this.prefetchHandler.download(this.module,this.courseId,void 0,function(n){n&&(n.downloading?e.scorm.packagesize&&n.progress&&(e.percentage=(100*Number(n.progress.loaded/e.scorm.packagesize)).toFixed(1)):n.message?(e.progressMessage=n.message,e.percentage=void 0):e.percentage=n.progress&&n.progress.loaded&&n.progress.total?(100*Number(n.progress.loaded/n.progress.total)).toFixed(1):void 0)}).finally(function(){e.progressMessage=void 0,e.percentage=void 0,e.downloading=!1})},AddonModScormIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.scormProvider.getScorm(this.courseId,this.module.id,this.module.url).then(function(e){o.scorm=e,o.dataRetrieved.emit(o.scorm),o.description=o.scorm.intro||o.description;var r=o.scormProvider.isScormUnsupported(o.scorm);if(o.errorMessage=r||"",!o.scorm.warningMessage){return(n?o.syncActivity(t).catch(function(){}):Promise.resolve()).catch(function(){}).then(function(){o.scormSync.getReadableSyncTime(o.scorm.id).then(function(e){o.syncTime=e});var e=[];return e.push(o.scormProvider.getAccessInformation(o.scorm.id).then(function(e){o.accessInfo=e})),e.push(o.scormProvider.getAttemptCount(o.scorm.id).then(function(e){return o.attempts=e,o.hasOffline=!!o.attempts.offline.length,o.scormHelper.determineAttemptToContinue(o.scorm,o.attempts)}).then(function(e){return o.lastAttempt=e.number,o.lastIsOffline=e.offline,o.attemptToContinue=o.lastAttempt!=o.attempts.lastAttempt.number?o.lastAttempt:void 0,o.scormProvider.isAttemptIncomplete(o.scorm.id,o.lastAttempt,o.lastIsOffline)}).then(function(e){var n=[];return o.scorm.incomplete=e,o.scorm.numAttempts=o.attempts.total,o.scorm.gradeMethodReadable=o.scormProvider.getScormGradeMethod(o.scorm),o.scorm.attemptsLeft=o.scormProvider.countAttemptsLeft(o.scorm,o.attempts.lastAttempt.number),(o.scorm.forcenewattempt==l.a.SCORM_FORCEATTEMPT_ALWAYS||o.scorm.forcenewattempt&&!o.scorm.incomplete)&&(o.scormOptions.newAttempt=!0),n.push(o.getReportedGrades()),n.push(o.fetchStructure()),o.scorm.packagesize||""!==o.errorMessage||n.push(o.scormProvider.calculateScormSize(o.scorm).then(function(e){o.scorm.packagesize=e})),n.push(o.setStatusListener()),Promise.all(n)})),Promise.all(e).then(function(){void 0===o.skip&&(o.skip=!o.hasOffline&&!o.errorMessage&&(!o.scorm.lastattemptlock||o.scorm.attemptsLeft>0)&&o.accessInfo.canskipview&&!o.accessInfo.canviewreport&&o.scorm.skipview>=l.a.SKIPVIEW_FIRST&&(o.scorm.skipview==l.a.SKIPVIEW_ALWAYS||0==o.lastAttempt))})})}}).finally(function(){o.fillContextMenu(e)})},AddonModScormIndexComponent.prototype.fetchStructure=function(){var e=this;return this.scormProvider.getOrganizations(this.scorm.id).then(function(n){return e.organizations=n,e.currentOrganization.identifier||(e.currentOrganization.identifier=n.length?n[0].identifier:""),e.loadOrganizationToc(e.currentOrganization.identifier)})},AddonModScormIndexComponent.prototype.getAttemptGrade=function(e,n,t){return this.scormProvider.getAttemptGrade(this.scorm,e,n).then(function(n){t[e]={number:e,grade:n}})},AddonModScormIndexComponent.prototype.getReportedGrades=function(){var e=this,n=[],t={},o={};return this.attempts.online.forEach(function(o){-1==e.attempts.offline.indexOf(o)&&n.push(e.getAttemptGrade(o,!1,t))}),this.attempts.offline.forEach(function(t){n.push(e.getAttemptGrade(t,!0,o))}),Promise.all(n).then(function(){e.scorm.grade=e.scormProvider.calculateScormGrade(e.scorm,t),e.scorm.onlineAttempts=e.utils.objectToArray(t),e.scorm.offlineAttempts=e.utils.objectToArray(o),e.scorm.onlineAttempts.sort(function(e,n){return e.number-n.number}),e.scorm.offlineAttempts.sort(function(e,n){return e.number-n.number}),e.scorm.onlineAttempts.forEach(function(n){n.grade=e.scormProvider.formatGrade(e.scorm,n.grade)}),e.scorm.offlineAttempts.forEach(function(n){n.grade=e.scormProvider.formatGrade(e.scorm,n.grade)}),e.scorm.grade=e.scormProvider.formatGrade(e.scorm,e.scorm.grade)})},AddonModScormIndexComponent.prototype.hasSyncSucceed=function(e){return(e.updated||this.dataSent)&&this.checkCompletion(),this.dataSent=!1,!0},AddonModScormIndexComponent.prototype.ionViewDidEnter=function(){var n=this;e.prototype.ionViewDidEnter.call(this),this.hasPlayed&&(this.hasPlayed=!1,this.scormOptions.newAttempt=!1,setTimeout(function(){n.dataSentObserver&&n.dataSentObserver.off(),n.dataSentObserver=void 0,n.showLoadingAndRefresh(!0,!1)},500))},AddonModScormIndexComponent.prototype.ionViewDidLeave=function(){var n=this;e.prototype.ionViewDidLeave.call(this),this.skip=!1,"AddonModScormPlayerPage"==this.navCtrl.getActive().component.name&&(this.hasPlayed=!0,this.dataSentObserver&&this.dataSentObserver.off(),this.dataSentObserver=this.eventsProvider.on(l.a.DATA_SENT_EVENT,function(e){e.scormId===n.scorm.id&&(n.dataSent=!0)},this.siteId))},AddonModScormIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.scormProvider.invalidateScormData(this.courseId)),this.scorm&&e.push(this.scormProvider.invalidateAllScormData(this.scorm.id)),Promise.all(e)},AddonModScormIndexComponent.prototype.isRefreshSyncNeeded=function(e){return!(!e.updated||!this.scorm||e.scormId!=this.scorm.id)&&(this.checkCompletion(),!0)},AddonModScormIndexComponent.prototype.loadOrganization=function(){var e=this;this.loadOrganizationToc(this.currentOrganization.identifier).catch(function(n){e.domUtils.showErrorModalDefault(n,e.fetchContentDefaultError,!0)})},AddonModScormIndexComponent.prototype.loadOrganizationToc=function(e){var n=this;return this.scorm.displaycoursestructure?(this.loadingToc=!0,this.scormProvider.getOrganizationToc(this.scorm.id,this.lastAttempt,e,this.lastIsOffline).then(function(t){n.toc=n.scormProvider.formatTocToArray(t),n.toc.forEach(function(e){e.image=n.scormProvider.getScoStatusIcon(e,n.scorm.incomplete)}),n.organizations.forEach(function(t){t.identifier==e&&(n.currentOrganization.title=t.title)})}).finally(function(){n.loadingToc=!1})):Promise.resolve()},AddonModScormIndexComponent.prototype.open=function(e,n){var t=this;if(e&&(e.preventDefault(),e.stopPropagation()),!this.downloading){var o=this.currentStatus==a.a.OUTDATED;o||this.currentStatus==a.a.NOT_DOWNLOADED?this.scormHelper.confirmDownload(this.scorm,o).then(function(){(o?t.scormProvider.invalidateAllScormData(t.scorm.id):Promise.resolve()).finally(function(){t.downloadScormPackage().then(function(){t.isDestroyed||t.openScorm(n)}).catch(function(e){t.isDestroyed||t.domUtils.showErrorModalDefault(e,t.translate.instant("addon.mod_scorm.errordownloadscorm",{name:t.scorm.name}))})})}):this.openScorm(n)}},AddonModScormIndexComponent.prototype.openScorm=function(e){this.navCtrl.push("AddonModScormPlayerPage",{scorm:this.scorm,mode:this.scormOptions.mode,newAttempt:!!this.scormOptions.newAttempt,organizationId:this.currentOrganization.identifier,scoId:e})},AddonModScormIndexComponent.prototype.showStatus=function(e,n){var t=this;e==a.a.OUTDATED&&this.scorm?this.scormProvider.shouldDownloadMainFile(this.scorm,!0).then(function(e){t.statusMessage=e?"addon.mod_scorm.scormstatusoutdated":""}):e==a.a.NOT_DOWNLOADED?this.statusMessage="addon.mod_scorm.scormstatusnotdownloaded":e==a.a.DOWNLOADING?this.downloading||this.downloadScormPackage():this.statusMessage=""},AddonModScormIndexComponent.prototype.sync=function(){var e=this;return this.scormSync.syncScorm(this.scorm).then(function(n){return!n.updated&&e.dataSent?e.scormSync.prefetchAfterUpdate(e.module,e.courseId).catch(function(){}).then(function(){return n}):n})},AddonModScormIndexComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)())],AddonModScormIndexComponent)}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(300),s=(t(335),t(301),t(302)),a=function(e){function AddonModSurveyIndexComponent(n,t,o,r,i,a){var u=e.call(this,n,o)||this;return u.surveyProvider=t,u.surveyHelper=r,u.surveyOffline=i,u.surveySync=a,u.component=l.a.COMPONENT,u.moduleName="survey",u.answers={},u.syncEventName=s.a.AUTO_SYNCED,u}return Object(o.__extends)(AddonModSurveyIndexComponent,e),AddonModSurveyIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.userId=this.sitesProvider.getCurrentSiteUserId(),this.loadContent(!1,!0).then(function(){n.surveyProvider.logView(n.survey.id,n.survey.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){})})},AddonModSurveyIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.surveyProvider.invalidateSurveyData(this.courseId)),this.survey&&e.push(this.surveyProvider.invalidateQuestions(this.survey.id)),Promise.all(e)},AddonModSurveyIndexComponent.prototype.isRefreshSyncNeeded=function(e){return!(!this.survey||e.surveyId!=this.survey.id||e.userId!=this.userId)},AddonModSurveyIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.surveyProvider.getSurvey(this.courseId,this.module.id).then(function(e){if(o.survey=e,o.description=e.intro,o.dataRetrieved.emit(e),n)return o.syncActivity(t).then(function(e){if(e)return o.surveyProvider.getSurvey(o.courseId,o.module.id).then(function(e){o.survey=e})})}).then(function(){return o.surveyOffline.hasAnswers(o.survey.id)}).then(function(e){if(o.hasOffline=!o.survey.surveydone&&e,!o.survey.surveydone&&!o.hasOffline)return o.fetchQuestions()}).finally(function(){o.fillContextMenu(e)})},AddonModSurveyIndexComponent.prototype.fetchQuestions=function(){var e=this;return this.surveyProvider.getQuestions(this.survey.id).then(function(n){e.questions=e.surveyHelper.formatQuestions(n),e.questions.forEach(function(n){if(n.name){e.answers[n.name]=n.required?-1:n.multiArray&&0===n.multiArray.length&&0===n.type?"":"0"}n.multiArray&&!n.multiArray.length&&0===n.parent&&n.type>0&&(n.optionsArray=n.optionsArray.map(function(n){return e.textUtils.cleanTags(n)}))})})},AddonModSurveyIndexComponent.prototype.isValidResponse=function(){var e=this;return!this.questions.some(function(n){return n.required&&n.name&&(0===n.type?""==e.answers[n.name]:-1===parseInt(e.answers[n.name],10))})},AddonModSurveyIndexComponent.prototype.submit=function(){var e=this;this.domUtils.showConfirm(this.translate.instant("core.areyousure")).then(function(){var n=[],t=e.domUtils.showModalLoading("core.sending",!0);for(var o in e.answers)n.push({key:o,value:e.answers[o]});return e.surveyProvider.submitAnswers(e.survey.id,e.survey.name,e.courseId,n).then(function(n){return n&&e.isPrefetched()?e.surveySync.prefetchAfterUpdate(e.module,e.courseId).then(function(){e.showLoadingAndFetch(!1,!1)}).catch(function(n){return e.showLoadingAndRefresh(!1)}):e.showLoadingAndRefresh(!1)}).finally(function(){t.dismiss()})}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.mod_survey.cannotsubmitsurvey",!0)})},AddonModSurveyIndexComponent.prototype.sync=function(){return this.surveySync.syncSurvey(this.survey.id,this.userId)},AddonModSurveyIndexComponent.prototype.hasSyncSucceed=function(e){return e.answersSent},AddonModSurveyIndexComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)())],AddonModSurveyIndexComponent)}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=t(268),i=t(303),l=(t(336),t(42)),s=function(e){function AddonModUrlIndexComponent(n,t,o,r,l,s){var a=e.call(this,n)||this;return a.urlProvider=t,a.courseProvider=o,a.urlHelper=r,a.mimeUtils=l,a.sitesProvider=s,a.component=i.a.COMPONENT,a.shouldEmbed=!1,a.shouldIframe=!1,a.isImage=!1,a.isAudio=!1,a.isVideo=!1,a.isOther=!1,a.displayDescription=!0,a}return Object(o.__extends)(AddonModUrlIndexComponent,e),AddonModUrlIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.canGetUrl=this.urlProvider.isGetUrlWSAvailable(),this.loadContent().then(function(){!(n.shouldIframe||n.shouldEmbed&&n.isOther)&&(n.shouldIframe||n.shouldEmbed&&n.isOther)||n.logView()})},AddonModUrlIndexComponent.prototype.invalidateContent=function(){return this.urlProvider.invalidateContent(this.module.id,this.courseId)},AddonModUrlIndexComponent.prototype.fetchContent=function(e){var n,t,o=this,r=this.canGetUrl;return(r?this.urlProvider.getUrl(this.courseId,this.module.id):Promise.reject(null)).catch(function(){return r=!1,o.courseProvider.getModule(o.module.id,o.courseId,void 0,!1,!1,void 0,"url")}).then(function(i){if(t=i,o.name=t.name||o.module.name,o.description=t.intro||t.description,o.dataRetrieved.emit(t),r&&t.displayoptions){var l=o.textUtils.unserialize(t.displayoptions);o.displayDescription=void 0===l.printintro||!!l.printintro}return r?(n=o.module,o.courseProvider.loadModuleContents(n,o.courseId,void 0,!1,e,void 0,"url")):(n=t,t.contents.length?void 0:Promise.reject(null))}).then(function(){if(o.url=n.contents&&n.contents[0]&&n.contents[0].fileurl?n.contents[0].fileurl:void 0,r)return o.calculateDisplayOptions(t)})},AddonModUrlIndexComponent.prototype.calculateDisplayOptions=function(e){var n=this,t=this.urlProvider.getFinalDisplayType(e);if(this.shouldEmbed=t==l.a.RESOURCELIB_DISPLAY_EMBED,this.shouldIframe=t==l.a.RESOURCELIB_DISPLAY_FRAME,this.shouldEmbed){var o=this.mimeUtils.guessExtensionFromUrl(e.externalurl);this.mimetype=this.mimeUtils.getMimeType(o),this.isImage=this.mimeUtils.isExtensionInGroup(o,["web_image"]),this.isAudio=this.mimeUtils.isExtensionInGroup(o,["web_audio"]),this.isVideo=this.mimeUtils.isExtensionInGroup(o,["web_video"]),this.isOther=!this.isImage&&!this.isAudio&&!this.isVideo}if(this.shouldIframe||this.shouldEmbed&&!this.isImage&&!this.isAudio&&!this.isVideo){var r=this.sitesProvider.getCurrentSite();if(r&&r.containsUrl(this.url))return r.getAutoLoginUrl(this.url,!1).then(function(e){n.url=e})}return Promise.resolve()},AddonModUrlIndexComponent.prototype.logView=function(){var e=this;return this.urlProvider.logView(this.module.instance,this.module.name).then(function(){e.courseProvider.checkModuleCompletion(e.courseId,e.module.completiondata)}).catch(function(){})},AddonModUrlIndexComponent.prototype.go=function(){this.logView(),this.urlHelper.open(this.url)},AddonModUrlIndexComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return u});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(235),s=(t(289),t(290)),a=t(670),u=function(e){function AddonModWikiIndexComponent(n,t,o,r,i,a,u,d,c,p,f,h){var m=e.call(this,n,o)||this;return m.wikiProvider=t,m.content=o,m.wikiOffline=r,m.wikiSync=i,m.navCtrl=a,m.utils=u,m.groupsProvider=d,m.userProvider=c,m.popoverCtrl=p,m.tagProvider=f,m.modalCtrl=h,m.component=l.a.COMPONENT,m.moduleName="wiki",m.groupWiki=!1,m.canEdit=!1,m.pageStr="",m.loadedSubwikis=[],m.subwikiData={subwikiSelected:0,userSelected:0,groupSelected:0,subwikis:[],count:0},m.syncEventName=s.a.AUTO_SYNCED,m.hasEdited=!1,m.pageStr=m.translate.instant("addon.mod_wiki.wikipage"),m.tagsEnabled=m.tagProvider.areTagsAvailableInSite(),m}return Object(o.__extends)(AddonModWikiIndexComponent,e),AddonModWikiIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.currentUserId=this.sitesProvider.getCurrentSiteUserId(),this.isMainPage=!this.pageId&&!this.pageTitle,this.currentPage=this.pageId,this.loadContent(!1,!0).then(function(){n.wiki&&(n.pageId?n.wikiProvider.logPageView(n.pageId,n.wiki.id,n.wiki.name).catch(function(e){}):n.wikiProvider.logView(n.wiki.id,n.wiki.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){}))}).finally(function(){"map"==n.action&&n.openMap()}),this.manualSyncObserver=this.eventsProvider.on(s.a.MANUAL_SYNCED,function(e){if(e&&n.wiki&&e.wikiId==n.wiki.id){if(n.ignoreManualSyncEvent)return void(n.ignoreManualSyncEvent=!1);n.currentSubwiki&&n.checkPageCreatedOrDiscarded(e.subwikis[n.currentSubwiki.id]),n.pageWarning||n.showLoadingAndFetch(!1,!1)}},this.siteId)},AddonModWikiIndexComponent.prototype.checkPageCreatedOrDiscarded=function(e){var n=this;if(!this.currentPage&&e){var t=e.created.find(function(e){return e.title==n.pageTitle});if(t)this.currentPage=t.pageId,this.pageIsOffline=!1;else{var o=e.discarded.find(function(e){return e.title==n.pageTitle});o&&(this.pageWarning=o.warning,this.pageContent="",this.pageIsOffline=!1,this.hasOffline=!1)}}},AddonModWikiIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1);return(this.module.id?this.wikiProvider.getWiki(this.courseId,this.module.id):this.wikiProvider.getWikiById(this.courseId,this.wikiId)).then(function(e){if(o.wiki=e,o.dataRetrieved.emit(o.wiki),n)return o.syncActivity(t).catch(function(){})}).then(function(){if(o.pageWarning)return Promise.reject(null);return(o.module.id?Promise.resolve(o.module):o.courseProvider.getModule(o.wiki.coursemodule,o.wiki.course,void 0,!0)).then(function(e){return o.module=e,o.description=o.wiki.intro||o.module.description,o.externalUrl=o.module.url,o.componentId=o.module.id,o.groupsProvider.getActivityGroupInfo(o.wiki.coursemodule).then(function(e){return o.fetchSubwikis(o.wiki.id).then(function(){var n=o.wikiProvider.getSubwikiList(o.wiki.id);if(!n)return o.createSubwikiList(e.groups);o.subwikiData.count=n.count,o.setSelectedWiki(o.subwikiId,o.userId,o.groupId),o.isAnySubwikiSelected()||o.setSelectedWiki(n.subwikiSelected,n.userSelected,n.groupSelected),o.subwikiData.subwikis=n.subwikis})}).then(function(){if(!o.isAnySubwikiSelected()||o.subwikiData.count<=0)return Promise.reject(o.translate.instant("addon.mod_wiki.errornowikiavailable"))}).then(function(){return o.fetchWikiPage()})})}).finally(function(){o.fillContextMenu(e)}).catch(function(e){if(!o.pageWarning)return Promise.reject(e)})},AddonModWikiIndexComponent.prototype.fetchPageContents=function(e){var n=this;if(!e){var t=this.pageTitle||this.wiki.firstpagetitle;return this.wikiOffline.getNewPage(t,this.currentSubwiki.id,this.currentSubwiki.wikiid,this.currentSubwiki.userid,this.currentSubwiki.groupid).then(function(e){return n.pageIsOffline=!0,n.newPageObserver||(n.newPageObserver=n.eventsProvider.on(l.a.PAGE_CREATED_EVENT,function(e){e.subwikiId==n.currentSubwiki.id&&e.pageTitle==t&&(n.currentPage=e.pageId,n.showLoadingAndFetch(!0,!1).then(function(){n.currentPage&&n.wikiProvider.logPageView(n.currentPage,n.wiki.id,n.wiki.name).catch(function(){})}),n.newPageObserver.off(),n.newPageObserver=void 0)},n.sitesProvider.getCurrentSiteId())),e}).catch(function(){})}return this.pageIsOffline=!1,this.wikiProvider.getPageContents(e)},AddonModWikiIndexComponent.prototype.fetchSubwikiPages=function(e){var n,t=this;return this.wikiProvider.getSubwikiPages(e.wikiid,e.groupid,e.userid).then(function(o){if(n=o,!t.currentPage&&!t.pageTitle){var r=n.find(function(e){return e.firstpage});r&&(t.currentPage=r.id)}return t.wikiOffline.getSubwikiNewPages(e.id,e.wikiid,e.userid,e.groupid)}).then(function(e){if(!t.currentPage){var o=t.pageTitle?t.pageTitle:t.wiki.firstpagetitle;e.some(function(e){return e.title==o})&&(t.pageTitle=o)}if(t.subwikiPages=t.wikiProvider.sortPagesByTitle(n.concat(e)),!t.currentPage&&!t.pageTitle&&t.subwikiPages.length>0)return Promise.reject(null)})},AddonModWikiIndexComponent.prototype.fetchSubwikis=function(e){var n=this;return this.wikiProvider.getSubwikis(e).then(function(e){return n.loadedSubwikis=e,n.wikiOffline.subwikisHaveOfflineData(e).then(function(e){n.hasOffline=e})})},AddonModWikiIndexComponent.prototype.fetchWikiPage=function(){var e=this;return this.currentSubwiki=this.loadedSubwikis.find(function(n){return e.isSubwikiSelected(n)}),this.currentSubwiki?(this.setSelectedWiki(this.currentSubwiki.id,this.currentSubwiki.userid,this.currentSubwiki.groupid),this.fetchSubwikiPages(this.currentSubwiki).then(function(){return e.canEdit=e.currentSubwiki.canedit,e.fetchPageContents(e.currentPage).then(function(n){n&&(e.dataRetrieved.emit(n.title),e.setSelectedWiki(n.subwikiid,n.userid,n.groupid),e.pageContent=e.replaceEditLinks(n.cachedcontent),e.canEdit=n.caneditpage,e.currentPageObj=n)})})):Promise.reject(null)},AddonModWikiIndexComponent.prototype.getWikiHomeView=function(){if(this.wiki.id)for(var e=this.navCtrl.getViews(),n=e.length-2;n>=0;n--){var t=e[n];if("AddonModWikiIndexPage"!=t.component.name){if(n==e.length-2)return;return e[n+1]}var o=t.data.wikiId?t.data.wikiId:t.data.module.instance;if(!o||o!=this.wiki.id)return e[n+1]}},AddonModWikiIndexComponent.prototype.goToCreateFirstPage=function(){this.navCtrl.push("AddonModWikiEditPage",{module:this.module,courseId:this.courseId,pageTitle:this.wiki.firstpagetitle,wikiId:this.currentSubwiki.wikiid,userId:this.currentSubwiki.userid,groupId:this.currentSubwiki.groupid})},AddonModWikiIndexComponent.prototype.goToEditPage=function(){if(this.canEdit)if(this.currentPageObj){var e={module:this.module,courseId:this.courseId,pageId:this.currentPageObj.id,pageTitle:this.currentPageObj.title,subwikiId:this.currentPageObj.subwikiid};this.currentSubwiki&&(e.wikiId=this.currentSubwiki.wikiid,e.userId=this.currentSubwiki.userid,e.groupId=this.currentSubwiki.groupid),this.navCtrl.push("AddonModWikiEditPage",e)}else this.currentSubwiki&&this.goToCreateFirstPage()},AddonModWikiIndexComponent.prototype.goToNewPage=function(){if(this.canEdit)if(this.currentPageObj){var e={module:this.module,courseId:this.courseId,subwikiId:this.currentPageObj.subwikiid};this.currentSubwiki&&(e.wikiId=this.currentSubwiki.wikiid,e.userId=this.currentSubwiki.userid,e.groupId=this.currentSubwiki.groupid),this.navCtrl.push("AddonModWikiEditPage",e)}else this.currentSubwiki&&this.goToCreateFirstPage()},AddonModWikiIndexComponent.prototype.goToPage=function(e){var n=this;if(e.id){if(this.currentPage!=e.id)return void this.fetchPageContents(e.id).then(function(e){n.navCtrl.push("AddonModWikiIndexPage",{module:n.module,courseId:n.courseId,pageTitle:e.title,pageId:e.id,wikiId:e.wikiid,subwikiId:e.subwikiid})})}else if(this.currentPage||!this.pageTitle||e.title!=this.pageTitle)return void this.navCtrl.push("AddonModWikiIndexPage",{module:this.module,courseId:this.courseId,pageTitle:e.title,wikiId:this.wiki.id,subwikiId:e.subwikiid})},AddonModWikiIndexComponent.prototype.openMap=function(e){var n=this,t=this.modalCtrl.create("AddonModWikiMapPage",{pages:this.subwikiPages,selected:this.currentPageObj&&this.currentPageObj.id,homeView:this.getWikiHomeView(),moduleId:this.module.id,courseId:this.courseId},{cssClass:"core-modal-lateral",showBackdrop:!0,enableBackdropDismiss:!0,enterAnimation:"core-modal-lateral-transition",leaveAnimation:"core-modal-lateral-transition"});t.onDidDismiss(function(e){e&&("home"==e.type?n.navCtrl.popTo(e.goto):n.goToPage(e.goto))}),t.present({ev:e})},AddonModWikiIndexComponent.prototype.goToSubwiki=function(e,n,t,o){(e>0||o)&&(e==this.currentSubwiki.id&&n==this.currentSubwiki.userid&&t==this.currentSubwiki.groupid||this.navCtrl.push("AddonModWikiIndexPage",{module:this.module,courseId:this.courseId,wikiId:this.wiki.id,subwikiId:e,userId:n,groupId:t}))},AddonModWikiIndexComponent.prototype.isAnySubwikiSelected=function(){return this.subwikiData.subwikiSelected>0||this.subwikiData.userSelected>0||this.subwikiData.groupSelected>0},AddonModWikiIndexComponent.prototype.isSubwikiSelected=function(e){var n=parseInt(e.id,10)||0;if(n>0&&this.subwikiData.subwikiSelected>0)return n==this.subwikiData.subwikiSelected;var t=parseInt(e.userid,10)||0,o=parseInt(e.groupid,10)||0;return t==this.subwikiData.userSelected&&o==this.subwikiData.groupSelected},AddonModWikiIndexComponent.prototype.replaceEditLinks=function(e){if((e=e.trim()).length>0){var n=this.textUtils.concatenatePaths(this.sitesProvider.getCurrentSite().getURL(),"/mod/wiki/edit.php");e=e.replace(/href="edit\.php/g,'href="'+n)}return e},AddonModWikiIndexComponent.prototype.setSelectedWiki=function(e,n,t){this.subwikiData.subwikiSelected=this.wikiOffline.convertToPositiveNumber(e),this.subwikiData.userSelected=this.wikiOffline.convertToPositiveNumber(n),this.subwikiData.groupSelected=this.wikiOffline.convertToPositiveNumber(t)},AddonModWikiIndexComponent.prototype.hasSyncSucceed=function(e){return e.wikiId=this.wiki.id,e.updated&&(this.ignoreManualSyncEvent=!0,this.eventsProvider.trigger(s.a.MANUAL_SYNCED,e)),this.currentSubwiki&&this.checkPageCreatedOrDiscarded(e.subwikis[this.currentSubwiki.id]),e.updated},AddonModWikiIndexComponent.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.hasEdited&&(this.hasEdited=!1,this.showLoadingAndRefresh(!0,!1))},AddonModWikiIndexComponent.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),"AddonModWikiEditPage"==this.navCtrl.getActive().component.name&&(this.hasEdited=!0)},AddonModWikiIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.wikiProvider.invalidateWikiData(this.courseId)),this.wiki&&(e.push(this.wikiProvider.invalidateSubwikis(this.wiki.id)),e.push(this.groupsProvider.invalidateActivityAllowedGroups(this.wiki.coursemodule)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.wiki.coursemodule))),this.currentSubwiki&&(e.push(this.wikiProvider.invalidateSubwikiPages(this.currentSubwiki.wikiid)),e.push(this.wikiProvider.invalidateSubwikiFiles(this.currentSubwiki.wikiid))),this.currentPage&&e.push(this.wikiProvider.invalidatePage(this.currentPage)),Promise.all(e)},AddonModWikiIndexComponent.prototype.isRefreshSyncNeeded=function(e){return this.currentSubwiki&&e.subwikiId==this.currentSubwiki.id&&e.wikiId==this.currentSubwiki.wikiid&&e.userId==this.currentSubwiki.userid&&e.groupId==this.currentSubwiki.groupid&&(this.isCurrentView&&e.warnings&&e.warnings.length&&this.domUtils.showErrorModal(e.warnings[0]),this.checkPageCreatedOrDiscarded(e)),!this.pageWarning},AddonModWikiIndexComponent.prototype.showSubwikiPicker=function(e){var n=this,t=this.popoverCtrl.create(a.a,{subwikis:this.subwikiData.subwikis,currentSubwiki:this.currentSubwiki});t.onDidDismiss(function(e){e&&n.goToSubwiki(e.id,e.userid,e.groupid,e.canedit)}),t.present({ev:e})},AddonModWikiIndexComponent.prototype.sync=function(){return this.wikiSync.syncWiki(this.wiki.id,this.courseId,this.wiki.coursemodule)},AddonModWikiIndexComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.manualSyncObserver&&this.manualSyncObserver.off(),this.newPageObserver&&this.newPageObserver.off()},AddonModWikiIndexComponent.prototype.createSubwikiList=function(e){var n=this,t=[],o=[],r=[],i=!1,l=!1,s=!1;return this.subwikiData.subwikis=[],this.setSelectedWiki(this.subwikiId,this.userId,this.groupId),this.subwikiData.count=0,e.length>0&&(r=e.map(function(e){return e.id})),this.loadedSubwikis.forEach(function(a){var u=parseInt(a.groupid,10),d=parseInt(a.userid,10),c="";if(0==u&&0==d)i||(t.unshift({name:n.translate.instant("core.allparticipants"),id:a.id,userid:d,groupid:u,groupLabel:"",canedit:a.canedit}),i=!0);else{if(0!=u&&r.length>0){var p=r.indexOf(u);p>-1&&(c=e[p].name)}else c=n.translate.instant("addon.mod_wiki.notingroup");0!=d?(o.push(n.userProvider.getProfile(d,n.courseId,!0).then(function(e){t.push({name:e.fullname,id:a.id,userid:d,groupid:u,groupLabel:c,canedit:a.canedit})})),s||0==u||(s=!0)):(t.push({name:c,id:a.id,userid:d,groupid:u,groupLabel:c,canedit:a.canedit}),l=!0)}}),Promise.all(o).then(function(){n.fillSubwikiData(t,l,s)})},AddonModWikiIndexComponent.prototype.fillSubwikiData=function(e,n,t){var o,r=this,i=-1;if(e.sort(function(e,n){return e.groupid-n.groupid}),this.groupWiki=n,this.subwikiData.count=e.length,(!this.subwikiId||!this.userId&&!this.groupId)&&!this.isAnySubwikiSelected()&&e.length>0){var l=void 0,s=void 0,a=void 0;for(var u in e){var d=e[u];if(d.canedit){var c=void 0;if(d.userid>0?this.currentUserId==d.userid&&(c=d.id):d.groupid>0?n&&(c=d.id):d.id>0&&(c=d.id),void 0!==c){if(c>0){a=u;break}void 0===s&&(s=u)}else void 0===l&&(l=u)}}var p=e[void 0!==a?a:void 0!==s?s:void 0!==l?l:0];void 0!==p&&this.setSelectedWiki(p.id,p.userid,p.groupid)}if(t)e.forEach(function(e){e.groupid!==i&&(i=e.groupid,r.subwikiData.subwikis.push(o={label:e.groupLabel,subwikis:[]})),o.subwikis.push(e)});else if(n){var f={label:"",subwikis:[]},h={label:this.translate.instant("core.mygroups"),subwikis:[]},m={label:this.translate.instant("core.othergroups"),subwikis:[]};e.forEach(function(e){void 0===e.canedit?f.subwikis.push(e):e.canedit?h.subwikis.push(e):m.subwikis.push(e)}),f.subwikis.length>0&&this.subwikiData.subwikis.push(f),h.subwikis.length>0&&this.subwikiData.subwikis.push(h),m.subwikis.length>0&&this.subwikiData.subwikis.push(m)}else this.subwikiData.subwikis.push({label:"",subwikis:e});this.wikiProvider.setSubwikiList(this.wiki.id,this.subwikiData.subwikis,this.subwikiData.count,this.subwikiData.subwikiSelected,this.subwikiData.userSelected,this.subwikiData.groupSelected)},AddonModWikiIndexComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)())],AddonModWikiIndexComponent)}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(176),s=(t(204),t(291)),a=(t(190),function(e){function AddonModWorkshopIndexComponent(n,t,o,r,i,a,u,d,c,p,f){var h=e.call(this,n,o)||this;return h.workshopProvider=t,h.workshopOffline=r,h.groupsProvider=i,h.navCtrl=a,h.modalCtrl=u,h.utils=d,h.workshopHelper=p,h.workshopSync=f,h.group=0,h.component=l.a.COMPONENT,h.moduleName="workshop",h.page=0,h.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},h.canSubmit=!1,h.showSubmit=!1,h.canAssess=!1,h.hasNextPage=!1,h.workshopPhases={PHASE_SETUP:l.a.PHASE_SETUP,PHASE_SUBMISSION:l.a.PHASE_SUBMISSION,PHASE_ASSESSMENT:l.a.PHASE_ASSESSMENT,PHASE_EVALUATION:l.a.PHASE_EVALUATION,PHASE_CLOSED:l.a.PHASE_CLOSED},h.offlineSubmissions=[],h.syncEventName=s.a.AUTO_SYNCED,h.obsSubmissionChanged=h.eventsProvider.on(l.a.SUBMISSION_CHANGED,function(e){h.eventReceived(e)},h.siteId),h.obsAssessmentSaved=h.eventsProvider.on(l.a.ASSESSMENT_SAVED,function(e){h.eventReceived(e)},h.siteId),h.appResumeSubscription=c.resume.subscribe(function(){h.showLoadingAndRefresh(!0)}),h.syncObserver=h.eventsProvider.on(s.a.AUTO_SYNCED,function(e){h.eventReceived(e)},h.siteId),h}return Object(o.__extends)(AddonModWorkshopIndexComponent,e),AddonModWorkshopIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.loadContent(!1,!0).then(function(){n.workshop&&n.workshopProvider.logView(n.workshop.id,n.workshop.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(e){})})},AddonModWorkshopIndexComponent.prototype.eventReceived=function(e){(this.workshop&&this.workshop.id===e.workshopId||e.cmId===this.module.id)&&(this.showLoadingAndRefresh(!0),this.courseProvider.checkModuleCompletion(this.courseId,this.module.completiondata))},AddonModWorkshopIndexComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.workshopProvider.invalidateWorkshopData(this.courseId)),this.workshop&&(e.push(this.workshopProvider.invalidateWorkshopAccessInformationData(this.workshop.id)),e.push(this.workshopProvider.invalidateUserPlanPhasesData(this.workshop.id)),this.canSubmit&&e.push(this.workshopProvider.invalidateSubmissionsData(this.workshop.id)),this.access.canviewallsubmissions&&(e.push(this.workshopProvider.invalidateGradeReportData(this.workshop.id)),e.push(this.groupsProvider.invalidateActivityAllowedGroups(this.workshop.coursemodule)),e.push(this.groupsProvider.invalidateActivityGroupMode(this.workshop.coursemodule))),this.canAssess&&e.push(this.workshopProvider.invalidateReviewerAssesmentsData(this.workshop.id)),e.push(this.workshopProvider.invalidateGradesData(this.workshop.id)),e.push(this.workshopProvider.invalidateWorkshopWSData(this.workshop.id))),Promise.all(e)},AddonModWorkshopIndexComponent.prototype.isRefreshSyncNeeded=function(e){return!(!this.workshop||e.workshopId!=this.workshop.id)&&(this.domUtils.scrollToTop(this.content),!0)},AddonModWorkshopIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.workshopProvider.getWorkshop(this.courseId,this.module.id).then(function(e){if(o.workshop=e,o.description=e.intro||e.description,o.dataRetrieved.emit(e),n)return o.syncActivity(t)}).then(function(){return o.workshopProvider.getWorkshopAccessInformation(o.workshop.id)}).then(function(e){if(o.access=e,e.canviewallsubmissions)return o.groupsProvider.getActivityGroupInfo(o.workshop.coursemodule).then(function(e){o.groupInfo=e,o.group=o.groupsProvider.validateGroupId(o.group,e)})}).then(function(){return o.workshopProvider.getUserPlanPhases(o.workshop.id)}).then(function(e){return o.phases=e,e[o.workshop.phase].tasks.forEach(function(e){e.link||"examples"!=e.code&&"prepareexamples"!=e.code||(e.link=o.externalUrl)}),o.workshopOffline.hasWorkshopOfflineData(o.workshop.id).then(function(e){if(o.hasOffline=e,e)return o.workshopOffline.getSubmissions(o.workshop.id).then(function(e){o.offlineSubmissions=e});o.offlineSubmissions=[]})}).then(function(){return o.setPhaseInfo()}).finally(function(){o.fillContextMenu(e)})},AddonModWorkshopIndexComponent.prototype.gotoSubmissionsPage=function(e){var n=this;return this.workshopProvider.getGradesReport(this.workshop.id,this.group,e).then(function(t){var o=t&&t.grades&&t.grades.length||0;n.page=e,n.hasNextPage=o>=l.a.PER_PAGE&&(n.page+1)*l.a.PER_PAGE<t.totalcount,n.grades=t.grades||[],n.grades.forEach(function(e){var t=n.workshopHelper.filterSubmissionActions(n.offlineSubmissions,e.submissionid||!1);return e=n.workshopHelper.applyOfflineData(e,t),n.workshopHelper.applyOfflineData(e,t).then(function(n){e=n})})})},AddonModWorkshopIndexComponent.prototype.runTask=function(e){"submit"==e.code?this.gotoSubmit():e.link&&this.utils.openInBrowser(e.link)},AddonModWorkshopIndexComponent.prototype.gotoSubmit=function(){if(this.canSubmit&&(this.access.creatingsubmissionallowed&&!this.submission||this.access.modifyingsubmissionallowed&&this.submission)){this.navCtrl.push("AddonModWorkshopEditSubmissionPage",{module:this.module,access:this.access,courseId:this.courseId,submissionId:this.submission&&this.submission.id})}},AddonModWorkshopIndexComponent.prototype.viewPhaseInfo=function(){var e=this;if(this.phases){var n=this.modalCtrl.create("AddonModWorkshopPhaseInfoPage",{phases:this.utils.objectToArray(this.phases),workshopPhase:this.workshop.phase,externalUrl:this.externalUrl,showSubmit:this.showSubmit});n.onDidDismiss(function(n){n&&e.gotoSubmit()}),n.present()}},AddonModWorkshopIndexComponent.prototype.setGroup=function(e){return this.group=e,this.gotoSubmissionsPage(0)},AddonModWorkshopIndexComponent.prototype.setPhaseInfo=function(){var e=this;this.submission=!1,this.canAssess=!1,this.assessments=!1,this.userGrades=!1,this.publishedSubmissions=!1,this.canSubmit=this.workshopHelper.canSubmit(this.workshop,this.access,this.phases[l.a.PHASE_SUBMISSION].tasks),this.showSubmit=this.workshop.phase==l.a.PHASE_SUBMISSION&&this.canSubmit&&(this.access.creatingsubmissionallowed&&!this.submission||this.access.modifyingsubmissionallowed&&this.submission);var n=[];this.canSubmit&&n.push(this.workshopHelper.getUserSubmission(this.workshop.id).then(function(n){var t=e.workshopHelper.filterSubmissionActions(e.offlineSubmissions,n.id||!1);return e.workshopHelper.applyOfflineData(n,t).then(function(n){e.submission=n})})),this.access.canviewallsubmissions&&this.workshop.phase>=l.a.PHASE_SUBMISSION&&n.push(this.gotoSubmissionsPage(this.page));var t=Promise.resolve();return this.workshop.phase>=l.a.PHASE_ASSESSMENT&&(this.canAssess=this.workshopHelper.canAssess(this.workshop,this.access),this.canAssess&&(t=this.workshopHelper.getReviewerAssessments(this.workshop.id).then(function(n){var t=[];return n.forEach(function(n){n.strategy=e.workshop.strategy,e.hasOffline&&t.push(e.workshopOffline.getAssessment(e.workshop.id,n.id).then(function(e){n.offline=!0,n.timemodified=Math.floor(e.timemodified/1e3)}).catch(function(){}))}),Promise.all(t).then(function(){e.assessments=n})}),n.push(t))),this.workshop.phase==l.a.PHASE_CLOSED&&(n.push(this.workshopProvider.getGrades(this.workshop.id).then(function(n){e.userGrades=!(!n.submissionlongstrgrade&&!n.assessmentlongstrgrade)&&n})),this.access.canviewpublishedsubmissions&&n.push(t.then(function(){return e.workshopProvider.getSubmissions(e.workshop.id).then(function(n){e.publishedSubmissions=n.filter(function(n){return!!n.published&&(e.assessments.forEach(function(t){n.reviewedby=[],t.submissionid==n.id&&n.reviewedby.push(e.workshopHelper.realGradeValue(e.workshop,t))}),!0)})})}))),Promise.all(n)},AddonModWorkshopIndexComponent.prototype.sync=function(){return this.workshopSync.syncWorkshop(this.workshop.id)},AddonModWorkshopIndexComponent.prototype.hasSyncSucceed=function(e){return e.updated},AddonModWorkshopIndexComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.obsSubmissionChanged&&this.obsSubmissionChanged.off(),this.obsAssessmentSaved&&this.obsAssessmentSaved.off(),this.appResumeSubscription&&this.appResumeSubscription.unsubscribe()},AddonModWorkshopIndexComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)())],AddonModWorkshopIndexComponent)}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(256),r=function(){function AddonNotificationsHelperProvider(e,n){this.notificationsProvider=e,this.sitesProvider=n}return AddonNotificationsHelperProvider.prototype.getNotifications=function(e,n,t,r,i,l){var s=this;return void 0===t&&(t=!0),e=e||[],n=n||o.a.LIST_LIMIT,l=l||this.sitesProvider.getCurrentSiteId(),this.notificationsProvider.isPopupAvailable(l).then(function(o){if(o)return s.notificationsProvider.getPopupNotifications(e.length,n,t,r,i,l);var a=e.reduce(function(e,n){return e+(n.read?0:1)},0);return s.notificationsProvider.getUnreadNotifications(a,n,t,r,i,l).then(function(o){var u;if(o.length<n){u=s.notificationsProvider.getReadNotifications(e.length-a,n-o.length,t,r,i,l).then(function(e){return o.concat(e)}).catch(function(e){return o.length>0?o:Promise.reject(e)})}else u=Promise.resolve(o);return u.then(function(e){return{notifications:e,canLoadMore:e.length>=n}})})})},AddonNotificationsHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(149),i=(t(388),t(154)),l=(t(4),function(e){function CoreCommentsSyncProvider(n,t,o,r,i,l,s,a,u,d,c){var p=e.call(this,"CoreCommentsSync",n,t,o,r,i,l,c)||this;return p.commentsOffline=s,p.utils=a,p.eventsProvider=u,p.commentsProvider=d,p}return Object(o.__extends)(CoreCommentsSyncProvider,e),n=CoreCommentsSyncProvider,CoreCommentsSyncProvider.prototype.syncAllComments=function(e,n){return this.syncOnSites("all comments",this.syncAllCommentsFunc.bind(this),[n],e)},CoreCommentsSyncProvider.prototype.syncAllCommentsFunc=function(e,t){var o=this;return this.commentsOffline.getAllComments(e).then(function(r){r.forEach(function(e){e.syncId=o.getSyncId(e.contextlevel,e.instanceid,e.component,e.itemid,e.area)});var i=(r=o.utils.uniqueArray(r,"syncId")).map(function(r){return(t?o.syncComments(r.contextlevel,r.instanceid,r.component,r.itemid,r.area,e):o.syncCommentsIfNeeded(r.contextlevel,r.instanceid,r.component,r.itemid,r.area,e)).then(function(t){void 0!==t&&o.eventsProvider.trigger(n.AUTO_SYNCED,{contextLevel:r.contextlevel,instanceId:r.instanceid,componentName:r.component,itemId:r.itemid,area:r.area,warnings:t},e)})});return Promise.all(i)})},CoreCommentsSyncProvider.prototype.syncCommentsIfNeeded=function(e,n,t,o,r,i){var l=this;void 0===r&&(r="");var s=this.getSyncId(e,n,t,o,r);return this.isSyncNeeded(s,i).then(function(s){if(s)return l.syncComments(e,n,t,o,r,i)})},CoreCommentsSyncProvider.prototype.syncComments=function(e,n,t,o,r,l){var s=this;void 0===r&&(r=""),l=l||this.sitesProvider.getCurrentSiteId();var a=this.getSyncId(e,n,t,o,r);if(this.isSyncing(a,l))return this.getOngoingSync(a,l);this.logger.debug("Try to sync comments "+a);var u=[],d=this.commentsOffline.getComments(e,n,t,o,r,l).then(function(a){if(a.length){if(!s.appProvider.isOnline())return Promise.reject(s.translate.instant("core.networkerrormsg"));var d=[],c=[],p=[],f=0;return a.forEach(function(i){i.commentid?p.push(i.commentid):c.push(s.commentsProvider.addCommentOnline(i.content,e,n,t,o,r,l).then(function(i){return f++,s.commentsOffline.removeComment(e,n,t,o,r,l)}))}),p.length>0&&c.push(s.commentsProvider.deleteCommentsOnline(p,e,n,t,o,r,l).then(function(i){return f--,s.commentsOffline.removeDeletedComments(e,n,t,o,r,l)})),Promise.all(c).then(function(){return s.eventsProvider.trigger(i.a.COMMENTS_COUNT_CHANGED_EVENT,{contextLevel:e,instanceId:n,component:t,itemId:o,area:r,countChange:f},s.sitesProvider.getCurrentSiteId()),s.commentsProvider.invalidateCommentsData(e,n,t,o,r,l).then(function(){return s.commentsProvider.getComments(e,n,t,o,r,0,l)}).catch(function(){})}).catch(function(e){if(!s.utils.isWebServiceError(e))return Promise.reject(e);d.push(e.message)}).then(function(){d&&d.length&&d.forEach(function(e){u.push(s.translate.instant("core.comments.warningcommentsnotsent",{error:e}))})})}}).then(function(){return u});return this.addOngoingSync(a,d,l)},CoreCommentsSyncProvider.prototype.getSyncId=function(e,n,t,o,r){return void 0===r&&(r=""),e+"#"+n+"#"+t+"#"+o+"#"+r},CoreCommentsSyncProvider.AUTO_SYNCED="core_comments_autom_synced",CoreCommentsSyncProvider;var n}(r.a))},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(6);var o=t(208),r=function(){function AddonBlogEntriesComponent(e,n,t,r,i,l,s){this.blogProvider=e,this.domUtils=n,this.userProvider=t,this.utils=i,this.commentsProvider=l,this.tagProvider=s,this.filter={},this.pageLoaded=0,this.userPageLoaded=0,this.canLoadMoreEntries=!1,this.canLoadMoreUserEntries=!0,this.loaded=!1,this.canLoadMore=!1,this.loadMoreError=!1,this.entries=[],this.showMyEntriesToggle=!1,this.onlyMyEntries=!1,this.component=o.a.COMPONENT,this.currentUserId=r.getCurrentSiteUserId(),this.siteHomeId=r.getCurrentSiteHomeId()}return AddonBlogEntriesComponent.prototype.ngOnInit=function(){var e=this;this.userId&&(this.filter.userid=this.userId),this.showMyEntriesToggle=!this.userId,this.courseId&&(this.filter.courseid=this.courseId),this.cmId&&(this.filter.cmid=this.cmId),this.entryId&&(this.filter.entryid=this.entryId),this.groupId&&(this.filter.groupid=this.groupId),this.tagId&&(this.filter.tagid=this.tagId),!this.userId||this.courseId||this.cmId?this.courseId&&this.courseId!=this.siteHomeId?(this.contextLevel="course",this.contextInstanceId=this.courseId):(this.contextLevel="system",this.contextInstanceId=0):(this.contextLevel="user",this.contextInstanceId=this.userId),this.commentsEnabled=!this.commentsProvider.areCommentsDisabledInSite(),this.tagsEnabled=this.tagProvider.areTagsAvailableInSite(),this.fetchEntries().then(function(){e.blogProvider.logView(e.filter).catch(function(){})})},AddonBlogEntriesComponent.prototype.fetchEntries=function(e){var n=this;void 0===e&&(e=!1),this.loadMoreError=!1,e&&(this.pageLoaded=0,this.userPageLoaded=0);return this.blogProvider.getEntries(this.filter,this.onlyMyEntries?this.userPageLoaded:this.pageLoaded).then(function(t){var o=t.entries.map(function(e){switch(e.publishstate){case"draft":e.publishTranslated="publishtonoone";break;case"site":e.publishTranslated="publishtosite";break;case"public":e.publishTranslated="publishtoworld";break;default:e.publishTranslated="privacy:unknown"}return e.moduleid||e.coursemoduleid?(e.contextLevel="module",e.contextInstanceId=e.moduleid||e.coursemoduleid):e.courseid?(e.contextLevel="course",e.contextInstanceId=e.courseid):(e.contextLevel="user",e.contextInstanceId=e.userid),n.userProvider.getProfile(e.userid,e.courseid,!0).then(function(n){e.user=n}).catch(function(){})});if(n.entries=e?t.entries:n.utils.uniqueArray(n.entries.concat(t.entries),"id").sort(function(e,n){return n.created-e.created}),n.onlyMyEntries){var r=n.entries.filter(function(e){return e.userid==n.currentUserId}).length;n.canLoadMoreUserEntries=t.totalentries>r,n.canLoadMore=n.canLoadMoreUserEntries,n.userPageLoaded++}else n.canLoadMoreEntries=t.totalentries>n.entries.length,n.canLoadMore=n.canLoadMoreEntries,n.pageLoaded++;return Promise.all(o)}).catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.blog.errorloadentries",!0),n.loadMoreError=!0}).finally(function(){n.loaded=!0})},AddonBlogEntriesComponent.prototype.onlyMyEntriesToggleChanged=function(e){var n=this;if(e){var t=this.entries.filter(function(e){return e.userid==n.currentUserId}).length;this.userPageLoaded=Math.floor(t/o.a.ENTRIES_PER_PAGE),this.filter.userid=this.currentUserId,0==t&&this.canLoadMoreUserEntries&&this.loadMore()}else delete this.filter.userid;this.canLoadMore=e?this.canLoadMoreUserEntries:this.canLoadMoreEntries},AddonBlogEntriesComponent.prototype.loadMore=function(e){return this.fetchEntries().finally(function(){e&&e()})},AddonBlogEntriesComponent.prototype.refresh=function(e){var n=this,t=this.entries.map(function(e){return n.commentsProvider.invalidateCommentsData("user",e.userid,n.component,e.id,"format_blog")});t.push(this.blogProvider.invalidateEntries(this.filter)),this.showMyEntriesToggle&&(this.filter.userid=this.currentUserId,t.push(this.blogProvider.invalidateEntries(this.filter)),this.onlyMyEntries||delete this.filter.userid),this.utils.allPromises(t).finally(function(){n.fetchEntries(!0).finally(function(){e&&e.complete()})})},AddonBlogEntriesComponent}()},function(e,n,t){"use strict";function View_CoreDownloadRefreshComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["class","core-animate-show-hide"],["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.download(t,!1)&&o}return o},r.b,r.a)),o._15(1,1097728,null,0,i.a,[[8,""],l.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","cloud-download"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n    "]))],function(e,n){e(n,1,0,"dark","");e(n,5,0,"cloud-download")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.download")));e(n,4,0,o._29(n,5)._hidden)})}function View_CoreDownloadRefreshComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["class","core-animate-show-hide"],["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.download(t,!0)&&o}return o},r.b,r.a)),o._15(1,1097728,null,0,i.a,[[8,""],l.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","refresh"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n    "]))],function(e,n){e(n,1,0,"dark","");e(n,5,0,"refresh")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.refresh")));e(n,4,0,o._29(n,5)._hidden)})}function View_CoreDownloadRefreshComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-icon",[["class","core-icon-downloaded"],["color","success"],["name","cloud-done"],["role","img"]],[[1,"aria-label",0],[2,"hide",null]],null,null,null,null)),o._15(1,147456,null,0,u.a,[l.a,o.p,o.K],{color:[0,"color"],name:[1,"name"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"success","cloud-done")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.downloaded")),o._29(n,1)._hidden)})}function View_CoreDownloadRefreshComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreDownloadRefreshComponent_2)),o._15(4,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreDownloadRefreshComponent_3)),o._15(8,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreDownloadRefreshComponent_4)),o._15(12,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.status==t.statusNotDownloaded);e(n,8,0,t.status==t.statusOutdated||t.status==t.statusDownloaded&&!t.canTrustDownload);e(n,12,0,t.status==t.statusDownloaded&&t.canTrustDownload)},null)}function View_CoreDownloadRefreshComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-spinner",[["class","core-animate-show-hide"]],[[2,"spinner-paused",null]],null,null,c.b,c.a)),o._15(1,114688,null,0,p.a,[l.a,o.p,o.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,o._29(n,1)._paused)})}function View_CoreDownloadRefreshComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreDownloadRefreshComponent_1)),o._15(1,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreDownloadRefreshComponent_5)),o._15(5,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.enabled&&!(t.loading||t.status===t.statusDownloading));e(n,5,0,t.loading||t.status===t.statusDownloading)},null)}t.d(n,"a",function(){return f}),n.b=View_CoreDownloadRefreshComponent_0;var o=t(1),r=t(47),i=t(44),l=t(9),s=t(26),a=t(19),u=t(49),d=t(8),c=t(122),p=t(102),f=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(166),t(375);var o=function(){function AddonCompetencyCourseComponent(e,n,t,o,r){this.navCtrl=e,this.appProvider=n,this.domUtils=t,this.competencyProvider=o,this.helperProvider=r,this.competenciesLoaded=!1}return AddonCompetencyCourseComponent.prototype.ngOnInit=function(){var e=this;this.fetchCourseCompetencies().finally(function(){e.competenciesLoaded=!0})},AddonCompetencyCourseComponent.prototype.fetchCourseCompetencies=function(){var e=this;return this.competencyProvider.getCourseCompetencies(this.courseId,this.userId).then(function(n){e.competencies=n,e.helperProvider.getProfile(e.userId).then(function(n){e.user=n})}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error getting course competencies data.")})},AddonCompetencyCourseComponent.prototype.openCompetency=function(e){this.appProvider.isWide()?this.navCtrl.push("AddonCompetencyCompetenciesPage",{competencyId:e,courseId:this.courseId,userId:this.userId}):this.navCtrl.push("AddonCompetencyCompetencyPage",{competencyId:e,courseId:this.courseId,userId:this.userId})},AddonCompetencyCourseComponent.prototype.openCompetencySummary=function(e){this.navCtrl.push("AddonCompetencyCompetencySummaryPage",{competencyId:e,contextLevel:"course",contextInstanceId:this.courseId})},AddonCompetencyCourseComponent.prototype.refreshCourseCompetencies=function(e){var n=this;this.competencyProvider.invalidateCourseCompetencies(this.courseId,this.userId).finally(function(){n.fetchCourseCompetencies().finally(function(){e.complete()})})},AddonCompetencyCourseComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(173);var o=function(){function AddonCourseCompletionReportComponent(e,n,t){this.sitesProvider=e,this.domUtils=n,this.courseCompletionProvider=t,this.completionLoaded=!1,this.tracked=!0}return AddonCourseCompletionReportComponent.prototype.ngOnInit=function(){var e=this;this.userId||(this.userId=this.sitesProvider.getCurrentSiteUserId()),this.fetchCompletion().finally(function(){e.completionLoaded=!0})},AddonCourseCompletionReportComponent.prototype.fetchCompletion=function(){var e=this;return this.courseCompletionProvider.getCompletion(this.courseId,this.userId).then(function(n){e.statusText=e.courseCompletionProvider.getCompletedStatusText(n),e.completion=n,e.showSelfComplete=e.courseCompletionProvider.canMarkSelfCompleted(e.userId,n),e.tracked=!0}).catch(function(n){n&&"notenroled"==n.errorcode?e.tracked=!1:e.domUtils.showErrorModalDefault(n,"addon.coursecompletion.couldnotloadreport",!0)})},AddonCourseCompletionReportComponent.prototype.refreshCompletion=function(e){var n=this;this.courseCompletionProvider.invalidateCourseCompletion(this.courseId,this.userId).finally(function(){n.fetchCompletion().finally(function(){e&&e.complete()})})},AddonCourseCompletionReportComponent.prototype.completeCourse=function(){var e=this,n=this.domUtils.showModalLoading("core.sending",!0);this.courseCompletionProvider.markCourseAsSelfCompleted(this.courseId).then(function(){return e.refreshCompletion()}).catch(function(n){e.domUtils.showErrorModal(n)}).finally(function(){n.dismiss()})},AddonCourseCompletionReportComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(46),t(29);var o=function(){function CoreUserParticipantsComponent(e,n,t){this.userProvider=e,this.domUtils=n,this.appProvider=t,this.participants=[],this.canLoadMore=!1,this.loadMoreError=!1,this.participantsLoaded=!1,this.canSearch=!1,this.showSearchBox=!1,this.disableSearch=!1,this.displaySearchResults=!1,this.searchQuery="",this.searchPage=0}return CoreUserParticipantsComponent.prototype.ngOnInit=function(){var e=this;this.canSearch=this.userProvider.canSearchParticipantsInSite(),this.fetchData(!0).then(function(){!e.participantId&&e.splitviewCtrl.isOn()&&e.participants.length>0&&e.gotoParticipant(e.participants[0].id),e.userProvider.logParticipantsView(e.courseId).catch(function(){})}).finally(function(){e.content&&e.content.resize()})},CoreUserParticipantsComponent.prototype.fetchData=function(e){var n=this;void 0===e&&(e=!1);var t=e?0:this.participants.length;return this.loadMoreError=!1,this.userProvider.getParticipants(this.courseId,t).then(function(t){n.participants=e?t.participants:n.participants.concat(t.participants),n.canLoadMore=t.canLoadMore}).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error loading participants"),n.loadMoreError=!0}).finally(function(){n.participantsLoaded=!0})},CoreUserParticipantsComponent.prototype.loadMoreData=function(e){return this.displaySearchResults?this.search(this.searchQuery,!0).finally(function(){e&&e()}):this.fetchData().finally(function(){e&&e()})},CoreUserParticipantsComponent.prototype.refreshParticipants=function(e){var n=this;this.userProvider.invalidateParticipantsList(this.courseId).finally(function(){n.fetchData(!0).finally(function(){e.complete()})})},CoreUserParticipantsComponent.prototype.gotoParticipant=function(e){this.participantId=e,this.splitviewCtrl.push("CoreUserProfilePage",{userId:e,courseId:this.courseId})},CoreUserParticipantsComponent.prototype.toggleSearch=function(){this.showSearchBox=!this.showSearchBox,!this.showSearchBox&&this.displaySearchResults&&this.clearSearch()},CoreUserParticipantsComponent.prototype.clearSearch=function(){this.displaySearchResults&&(this.searchQuery="",this.displaySearchResults=!1,this.participants=[],this.searchPage=0,this.participantsLoaded=!1,this.fetchData(!0))},CoreUserParticipantsComponent.prototype.search=function(e,n){var t=this;return this.appProvider.closeKeyboard(),this.disableSearch=!0,this.participantsLoaded=n,this.loadMoreError=!1,n||(this.participantsLoaded=!1,this.searchQuery=e,this.searchPage=0,this.participants=[],this.splitviewCtrl.emptyDetails()),this.userProvider.searchParticipants(this.courseId,e,!0,this.searchPage).then(function(e){if((o=t.participants).push.apply(o,e.participants),t.canLoadMore=e.canLoadMore,t.searchPage++,!n&&t.splitviewCtrl.isOn())if(t.participants.length>0){t.participantId&&t.participants.some(function(e){return e.id==t.participantId})||t.gotoParticipant(t.participants[0].id)}else t.participantId=null,t.splitviewCtrl.emptyDetails();var o}).catch(function(e){t.domUtils.showErrorModalDefault(e,"Error searching users."),t.loadMoreError=!0}).finally(function(){t.disableSearch=!1,t.participantsLoaded=!0,t.displaySearchResults=!0})},CoreUserParticipantsComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(6);var o=t(176),r=(t(204),t(190),function(){function AddonModWorkshopSubmissionComponent(e,n,t,r,i){this.workshopOffline=e,this.workshopHelper=n,this.navCtrl=t,this.userProvider=r,this.component=o.a.COMPONENT,this.loaded=!1,this.offline=!1,this.viewDetails=!1,this.userId=i.getCurrentSiteUserId(),this.showGrade=this.workshopHelper.showGrade}return AddonModWorkshopSubmissionComponent.prototype.ngOnInit=function(){var e=this;this.componentId=this.module.instance,this.userId=this.submission.authorid||this.submission.userid||this.userId,this.submission.title=this.submission.title||this.submission.submissiontitle,this.submission.timemodified=this.submission.timemodified||this.submission.submissionmodified,this.submission.id=this.submission.id||this.submission.submissionid,this.workshop.phase==o.a.PHASE_ASSESSMENT&&(this.submission.reviewedby&&this.submission.reviewedby.length&&(this.submission.reviewedbycount=this.submission.reviewedby.reduce(function(e,n){return e+(n.grade?1:0)},0)),this.submission.reviewerof&&this.submission.reviewerof.length&&(this.submission.reviewerofcount=this.submission.reviewerof.reduce(function(e,n){return e+(n.grade?1:0)},0)));var n=[];this.offline=this.submission&&this.submission.offline||this.assessment&&this.assessment.offline,this.submission.id&&n.push(this.workshopOffline.getEvaluateSubmission(this.workshop.id,this.submission.id).then(function(n){e.submission.submissiongradeover=n.gradeover,e.offline=!0}).catch(function(){})),this.userId&&n.push(this.userProvider.getProfile(this.userId,this.courseId,!0).then(function(n){e.profile=n})),this.viewDetails=!this.summary&&this.workshop.phase==o.a.PHASE_CLOSED&&"AddonModWorkshopSubmissionPage"!==this.navCtrl.getActive().name,this.viewDetails&&this.submission.gradeoverby&&n.push(this.userProvider.getProfile(this.submission.gradeoverby,this.courseId,!0).then(function(n){e.evaluateByProfile=n})),Promise.all(n).finally(function(){e.loaded=!0})},AddonModWorkshopSubmissionComponent.prototype.gotoSubmission=function(){if(this.submission.timemodified){this.navCtrl.push("AddonModWorkshopSubmissionPage",{module:this.module,workshop:this.workshop,access:this.access,courseId:this.courseId,profile:this.profile,submission:this.submission,assessment:this.assessment})}},AddonModWorkshopSubmissionComponent}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(6),t(744),t(260),t(304);var o=t(337),r=function(){function AddonNotesListComponent(e,n,t,r,i,l,s,a,u){var d=this;this.domUtils=e,this.textUtils=n,this.modalCtrl=i,this.notesProvider=l,this.notesSync=s,this.userProvider=a,this.notesOffline=u,this.type="course",this.refreshIcon="spinner",this.syncIcon="spinner",this.hasOffline=!1,this.notesLoaded=!1,this.showDelete=!1,this.canDeleteNotes=!1,this.syncObserver=r.on(o.a.AUTO_SYNCED,function(e){e.courseId==d.courseId&&(d.showSyncWarnings(e.warnings),d.notesLoaded=!1,d.refreshIcon="spinner",d.syncIcon="spinner",d.domUtils.scrollToTop(d.content),d.fetchNotes(!1))},t.getCurrentSiteId()),this.currentUserId=t.getCurrentSiteUserId()}return AddonNotesListComponent.prototype.ngOnInit=function(){var e=this;this.fetchNotes(!0).then(function(){e.notesProvider.logView(e.courseId,e.userId).catch(function(){})})},AddonNotesListComponent.prototype.fetchNotes=function(e,n){var t=this;return(e?this.syncNotes(n):Promise.resolve()).catch(function(){}).then(function(){return t.notesProvider.getNotes(t.courseId,t.userId).then(function(e){var n=e[t.type+"notes"]||[];return n.forEach(function(e){e.content=t.textUtils.decodeHTML(e.content)}),t.notesProvider.setOfflineDeletedNotes(n,t.courseId).then(function(e){return t.hasOffline=e.some(function(e){return e.offline||e.deleted}),t.userId?(t.notes=e,t.userProvider.getProfile(t.userId,t.courseId,!0).then(function(e){t.user=e})):t.notesProvider.getNotesUserData(e,t.courseId).then(function(e){t.notes=e})})})}).catch(function(e){t.domUtils.showErrorModal(e)}).finally(function(){var e=t.notes&&t.notes.length>0;e&&"personal"==t.type&&(e=!!t.notes.find(function(e){return e.usermodified==t.currentUserId})),t.canDeleteNotes=e,t.notesLoaded=!0,t.refreshIcon="refresh",t.syncIcon="sync"})},AddonNotesListComponent.prototype.refreshNotes=function(e,n){var t=this;this.refreshIcon="spinner",this.syncIcon="spinner",this.notesProvider.invalidateNotes(this.courseId,this.userId).finally(function(){t.fetchNotes(!0,e).finally(function(){n&&n.complete()})})},AddonNotesListComponent.prototype.typeChanged=function(){var e=this;this.notesLoaded=!1,this.refreshIcon="spinner",this.syncIcon="spinner",this.fetchNotes(!0).then(function(){e.notesProvider.logView(e.courseId,e.userId).catch(function(){})})},AddonNotesListComponent.prototype.addNote=function(e){var n=this;e.preventDefault(),e.stopPropagation();var t=this.modalCtrl.create("AddonNotesAddPage",{userId:this.userId,courseId:this.courseId,type:this.type});t.onDidDismiss(function(e){e&&e.sent&&e.type?(e.type!=n.type&&(n.type=e.type,n.notesLoaded=!1),n.refreshNotes(!1)):e&&e.type&&e.type!=n.type&&(n.type=e.type,n.typeChanged())}),t.present()},AddonNotesListComponent.prototype.deleteNote=function(e,n){var t=this;e.preventDefault(),e.stopPropagation(),this.domUtils.showDeleteConfirm("addon.notes.deleteconfirm").then(function(){t.notesProvider.deleteNote(n,t.courseId).then(function(){t.showDelete=!1,t.refreshNotes(!1),t.domUtils.showToast("addon.notes.eventnotedeleted",!0,3e3)}).catch(function(e){t.domUtils.showErrorModalDefault(e,"Delete note failed.")})}).catch(function(){})},AddonNotesListComponent.prototype.undoDeleteNote=function(e,n){var t=this;e.preventDefault(),e.stopPropagation(),this.notesOffline.undoDeleteNote(n.id).then(function(){t.refreshNotes(!0)})},AddonNotesListComponent.prototype.toggleDelete=function(){this.showDelete=!this.showDelete},AddonNotesListComponent.prototype.syncNotes=function(e){var n=this;return this.notesSync.syncNotes(this.courseId).then(function(e){n.showSyncWarnings(e)}).catch(function(t){return e&&n.domUtils.showErrorModalDefault(t,"core.errorsync",!0),Promise.reject(null)})},AddonNotesListComponent.prototype.showSyncWarnings=function(e){var n=this.textUtils.buildMessage(e);n&&this.domUtils.showErrorModal(n)},AddonNotesListComponent.prototype.ngOnDestroy=function(){this.syncObserver&&this.syncObserver.off()},AddonNotesListComponent}()},function(e,n,t){"use strict";function View_CoreFilesComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(2,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),o._15(3,540672,null,0,r.a,[o.p,i.a,l.a,s.a,a.a,u.a,d.a,c.a,p.a,f.a,h.a,m.a,[2,_.a],[2,g.a],[2,v.a],C.a,y.a,P.a,A.a,b.a,o.W],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.component.contentText,!1)},null)}function View_CoreFilesComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-file",[],null,null,null,I.b,I.a)),o._15(1,245760,null,0,S.a,[i.a,d.a,l.a,f.a,h.a,E.a,M.a,y.a,s.a,w.a,c.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"],canDownload:[4,"canDownload"],showSize:[5,"showSize"],showTime:[6,"showTime"]},null)],function(e,n){var t=n.component;e(n,1,0,n.parent.context.$implicit,t.component,t.componentId,t.alwaysDownload,t.canDownload,t.showSize,t.showTime)},null)}function View_CoreFilesComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-local-file",[],null,null,null,k.b,k.a)),o._15(1,114688,null,0,T.a,[M.a,d.a,s.a,O.a,l.a,D.a,i.a,y.a],{file:[0,"file"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit)},null)}function View_CoreFilesComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreFilesComponent_3)),o._15(4,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreFilesComponent_4)),o._15(8,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,4,0,!n.context.$implicit.name&&!n.context.$implicit.embedType);e(n,8,0,n.context.$implicit.name&&!n.context.$implicit.embedType)},null)}function View_CoreFilesComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreFilesComponent_1)),o._15(1,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreFilesComponent_2)),o._15(4,802816,null,0,x.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.showInline&&t.contentText);e(n,4,0,t.files)},null)}t.d(n,"a",function(){return F}),n.b=View_CoreFilesComponent_0;var o=t(1),r=t(48),i=t(2),l=t(5),s=t(12),a=t(19),u=t(17),d=t(3),c=t(23),p=t(7),f=t(18),h=t(11),m=t(16),_=t(21),g=t(30),v=t(29),C=t(43),y=t(10),P=t(41),A=t(31),b=t(37),I=t(249),S=t(215),E=t(116),M=t(67),w=t(57),k=t(747),T=t(382),O=t(58),D=t(25),x=t(8),F=o._14({encapsulation:2,styles:[],data:{}})},,,,,function(e,n,t){"use strict";t(0),t(80),t(789),t(1);var o=t(6),r=t(38),i=(t(262),t(593),t(8),t(1300),t(4),t(1956)),l=(t(466),t(489),t(440),t(142)),s=t(241),a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),u="translateX",d="show-back-button",c=function(e){function CorePageTransition(){return null!==e&&e.apply(this,arguments)||this}return a(CorePageTransition,e),CorePageTransition.prototype.init=function(){e.prototype.init.call(this);var n=this.plt,t=n.isRTL?"-99.5%":"99.5%",o=n.isRTL?"33%":"-33%",i=this.enteringView,s=this.leavingView,a=this.opts;this.duration(Object(r.m)(a.duration)?a.duration:500),this.easing(Object(r.m)(a.easing)?a.easing:"cubic-bezier(0.36,0.66,0.04,1)");var c="back"===a.direction,p=i&&i.hasNavbar(),f=s&&s.hasNavbar();if(i){var h=i.pageRef().nativeElement,m=new l.a(n,h);if(this.add(m),c?m.fromTo(u,o,"0%",!0).fromTo("opacity",.8,1,!0):m.beforeClearStyles(["opacity"]).fromTo(u,t,"0%",!0),p){var _=h.querySelector("ion-navbar"),g=new l.a(n,_);this.add(g);var v=new l.a(n,_.querySelector(".back-button"));if(g.add(v),c)i.enableBack()&&v.beforeAddClass(d).fromTo("opacity",.01,1,!0);else if(i.enableBack()){v.beforeAddClass(d).fromTo("opacity",.01,1,!0);var C=new l.a(n,_.querySelector(".back-button-text"));C.fromTo(u,n.isRTL?"-100px":"100px","0px"),g.add(C)}else v.beforeRemoveClass(d)}}if(s&&s.pageRef()){var y=s.pageRef().nativeElement,P=new l.a(n,y);if(this.add(P),c?P.beforeClearStyles(["opacity"]).fromTo(u,"0%",n.isRTL?"-100%":"100%"):P.fromTo(u,"0%",o).fromTo("opacity",1,.8).afterClearStyles(["transform","opacity"]),f){var A=y.querySelector("ion-navbar"),b=new l.a(n,A),I=new l.a(n,A.querySelector(".back-button"));if(b.add(I),this.add(b),I.fromTo("opacity",.99,0),c){var S=new l.a(n,A.querySelector(".back-button-text"));S.fromTo(u,"0%",(n.isRTL?-300:300)+"px"),b.add(S)}else I.afterClearStyles(["opacity"])}}},CorePageTransition}(s.a),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),f=function(e){function CoreModalLateralTransition(){return null!==e&&e.apply(this,arguments)||this}return p(CoreModalLateralTransition,e),CoreModalLateralTransition.prototype.init=function(){var e=this.enteringView,n=this.leavingView,t=this.plt.isRTL?"-100%":"100%";if(e&&e.pageRef()){var o=e.pageRef().nativeElement,r=new l.a(this.plt,o.querySelector(".modal-wrapper")),i=new l.a(this.plt,o.querySelector("ion-backdrop"));r.beforeStyles({transform:"translateX("+t+")",opacity:.8}),r.fromTo("transform","translateX("+t+")","translateX(0)"),r.fromTo("opacity",.8,1),i.fromTo("opacity",.01,.4),this.element(e.pageRef()).duration(300).easing("cubic-bezier(0.36,0.66,0.04,1)").add(r).add(i)}if(n&&n.pageRef()){o=this.leavingView.pageRef().nativeElement,r=new l.a(this.plt,o.querySelector(".modal-wrapper"));var s=new l.a(this.plt,o.querySelector(".wrapper"));i=new l.a(this.plt,o.querySelector("ion-backdrop"));r.beforeStyles({transform:"translateX(0)",opacity:1}),r.fromTo("transform","translateX(0)","translateX("+t+")"),r.fromTo("opacity",1,.8),s.fromTo("opacity",1,0),i.fromTo("opacity",.4,0),this.element(n.pageRef()).duration(300).easing("cubic-bezier(0.36,0.66,0.04,1)").add(s).add(r).add(i)}},CoreModalLateralTransition}(s.a),h=t(7),m=t(427),_=t(11),g=t(127),v=t(151),C=t(12),y=t(5),P=t(43),A=t(25),b=t(23),I=t(3),S=t(67),E=t(155),M=t(58),w=t(172),k=t(10),T=t(441),O=t(2),D=t(152),x=t(72),F=t(89),L=t(178),U=t(18),R=t(1301),H=t(57),N=t(82),B=t(116),V=t(465);t(1302),t(27),t(617),t(606),t(607),t(598),t(600),t(611),t(596),t(612),t(595),t(613),t(602),t(1303),t(1304),t(1306),t(608),t(1307),t(594),t(1309),t(1310),t(601),t(603),t(624),t(623),t(626),t(1314),t(627),t(628),t(1320),t(1323),t(629),t(1334),t(1337),t(1339),t(1341),t(1343),t(1345),t(1347),t(1349),t(1351),t(1353),t(1355),t(1357),t(1360),t(1362),t(1364),t(1366),t(1368),t(1371),t(1374),t(1377),t(1380),t(1382),t(1384),t(1387),t(1389),t(634),t(645),t(646),t(647),t(1391),t(1425),t(658),t(664),t(648),t(650),t(651),t(654),t(657),t(659),t(660),t(665),t(668),t(666),t(671),t(656),t(669),t(630),t(1429),t(631),t(676),t(616),t(677),t(678),t(1431),t(1451),t(1481),t(1483);t.d(n,"b",function(){return W}),t.d(n,"c",function(){return K}),t.d(n,"a",function(){return j}),t.d(n,"d",function(){return q}),t.d(n,"e",function(){return G});var W=[h.a,m.a,_.a,g.a,v.a,C.a,y.a,P.a,A.a,b.a,I.a,S.a,E.a,M.a,w.a,k.a,T.a,O.a,D.a,x.a,F.a,L.a,U.a,R.a,H.a,N.a,B.a,V.a],K=null,q=function createTranslateLoader(e){return new i.a(e,"./assets/lang/",".json")},G={},j=function(){function AppModule(e,n,t,o,r,i,l,s,a){this.eventsProvider=l,n.registerProcess({name:"CorePlatformReady",priority:E.a.MAX_RECOMMENDED_PRIORITY+400,blocking:!0,load:e.ready}),n.registerProcess(t),n.registerProcess({name:"CoreRestoreSession",priority:E.a.MAX_RECOMMENDED_PRIORITY+200,blocking:!1,load:r.restoreSession.bind(r)}),n.registerProcess({name:"CoreClearTmpFolder",priority:E.a.MAX_RECOMMENDED_PRIORITY+150,blocking:!1,load:i.clearTmpFolder.bind(i)}),n.executeInitProcesses(),s.register(a),o.setTransition("core-page-transition",c),o.setTransition("core-modal-lateral-transition",f),this.decorateIonContent(),this.patchIonRefresher()}return AppModule.prototype.decorateIonContent=function(){var e=function(e){return e.indexOf("px")>0?parseInt(e,10):0};o.c.prototype._readDimensions=function(){var n,t=this._pTop,o=this._pRight,i=this._pBottom,l=this._pLeft,s=this._hdrHeight,a=this._ftrHeight,u=this._tabsPlacement,d=0;if(this._pTop=0,this._pRight=0,this._pBottom=0,this._pLeft=0,this._hdrHeight=0,this._ftrHeight=0,this._tabsPlacement=null,this._tTop=0,this._fTop=0,this._fBottom=0,this._scroll){n=this._scroll.ev;var c=this.getNativeElement();if(c){for(var p,f,h=c.parentElement,m=h.children,_=m.length-1;_>=0;_--)"ION-CONTENT"===(f=(c=m[_]).tagName)?(n.contentElement=c,this._fullscreen&&(p=getComputedStyle(c),this._pTop=e(p.paddingTop),this._pBottom=e(p.paddingBottom),this._pRight=e(p.paddingRight),this._pLeft=e(p.paddingLeft))):"ION-HEADER"===f?(n.headerElement=c,this._hdrHeight=c.clientHeight):"ION-FOOTER"===f&&(n.footerElement=c,this._ftrHeight=c.clientHeight,this._footerEle=c);c=h;for(;c&&"ION-MODAL"!==c.tagName&&!c.classList.contains("tab-subpage");)-1!=c.tagName.indexOf("ION-TABS")&&(this._tabbarHeight=c.firstElementChild.clientHeight,null===this._tabsPlacement&&(this._tabsPlacement=c.getAttribute("tabsplacement"))),c=c.parentElement;this._tabs&&"top"===this._tabsPlacement&&(this._tTop=this._hdrHeight,d=this._tabs._top),this._cTop=this._hdrHeight,this._cBottom=this._ftrHeight,"top"===this._tabsPlacement?this._cTop+=this._tabbarHeight:"bottom"===this._tabsPlacement&&(this._cBottom+=this._tabbarHeight),this._hasRefresher&&(this._cTop-=1),this._fTop=this._cTop,this._fBottom=this._cBottom,this._fullscreen&&(this._cTop+=this._pTop,this._cBottom+=this._pBottom);var g=this.getContentDimensions();n.scrollHeight=g.scrollHeight,n.scrollWidth=g.scrollWidth,n.contentHeight=g.contentHeight,n.contentWidth=g.contentWidth,n.contentTop=g.contentTop,n.contentBottom=g.contentBottom,this._dirty=t!==this._pTop||i!==this._pBottom||l!==this._pLeft||o!==this._pRight||s!==this._hdrHeight||a!==this._ftrHeight||u!==this._tabsPlacement||d!==this._tTop||this._cTop!==this.contentTop||this._cBottom!==this.contentBottom,this._scroll.init(this.getScrollElement(),this._cTop,this._cBottom),this.imgsUpdate()}else Object(r.a)(!1,"ele should be valid")}};var n=this.eventsProvider;o.c.prototype.ngAfterViewInit=function(){var e=this;Object(r.a)(this.getFixedElement(),"fixed element was not found"),Object(r.a)(this.getScrollElement(),"scroll element was not found");var t=this._scroll;t.ev.fixedElement=this.getFixedElement(),t.ev.scrollElement=this.getScrollElement(),t.onScrollStart=function(n){e.ionScrollStart.emit(n)},t.onScroll=function(n){e.ionScroll.emit(n),e.imgsUpdate()},t.onScrollEnd=function(n){e.ionScrollEnd.emit(n),e.imgsUpdate()},this._orientationObs=n.on(k.a.ORIENTATION_CHANGE,this.resize.bind(this))},o.c.prototype.ngOnDestroy=function(){this._scLsn&&this._scLsn(),this._viewCtrlReadSub&&this._viewCtrlReadSub.unsubscribe(),this._viewCtrlWriteSub&&this._viewCtrlWriteSub.unsubscribe(),this._viewCtrlReadSub=this._viewCtrlWriteSub=null,this._scroll&&this._scroll.destroy(),this._footerEle=this._scLsn=this._scroll=null,this._orientationObs&&this._orientationObs.off()}},AppModule.prototype.patchIonRefresher=function(){o.j.prototype._setCss=function(e,n,t,o){this._appliedStyles=e>0;var r=this._content,i=this._plt.Css;r.setScrollElementStyle(i.transform,e>0?"translateY("+e+"px)":""),r.setScrollElementStyle(i.transitionDuration,n),r.setScrollElementStyle(i.transitionDelay,o),r.setScrollElementStyle("overflow",t?"hidden":"")}},AppModule}()},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n){if(void 0===require("os")){var t=new Error("Cannot find module \"require('os')\"");throw t.code="MODULE_NOT_FOUND",t}e.exports=require("os")},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){return function CoreBSTooltipComponent(e){this.content=e.get("content")||"",this.html=!!e.get("html")}}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(126),r=function(){function CoreCourseFormatDefaultHandler(e,n){this.coursesProvider=e,this.injector=n,this.name="CoreCourseFormatDefault",this.format="default"}return CoreCourseFormatDefaultHandler.prototype.isEnabled=function(){return!0},CoreCourseFormatDefaultHandler.prototype.getCourseTitle=function(e){return e.displayname?e.displayname:e.fullname?e.fullname:""},CoreCourseFormatDefaultHandler.prototype.canViewAllSections=function(e){return!0},CoreCourseFormatDefaultHandler.prototype.displayEnableDownload=function(e){return!0},CoreCourseFormatDefaultHandler.prototype.displaySectionSelector=function(e){return!0},CoreCourseFormatDefaultHandler.prototype.displayRefresher=function(e,n){return!0},CoreCourseFormatDefaultHandler.prototype.getCurrentSection=function(e,n){var t;if(void 0!==e.marker)t=Promise.resolve(e.marker);else{if(!this.coursesProvider.isGetCoursesByFieldAvailable())return n[0];t=this.coursesProvider.getCourseByField("id",e.id).catch(function(){}).then(function(e){return e&&e.marker})}return t.then(function(e){if(e>0){var t=n.find(function(n){return n.section==e});if(t)return t}return n[0]})},CoreCourseFormatDefaultHandler.prototype.invalidateData=function(e,n){return this.coursesProvider.invalidateCoursesByField("id",e.id)},CoreCourseFormatDefaultHandler.prototype.openCourse=function(e,n,t){return t=t||{},Object.assign(t,{course:n}),e?(e.push("CoreCourseSectionPage",t),Promise.resolve()):(this.loginHelper=this.loginHelper||this.injector.get(o.a),this.loginHelper.redirect("CoreCourseSectionPage",t))},CoreCourseFormatDefaultHandler.prototype.shouldRefreshWhenCompletionChanges=function(e){return!0},CoreCourseFormatDefaultHandler}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){function CoreContextMenuPopoverComponent(e,n,t){this.viewCtrl=n,this.title=e.get("title"),this.items=e.get("items")||[],this.uniqueId=e.get("id"),this.logger=t.getInstance("CoreContextMenuPopoverComponent")}return CoreContextMenuPopoverComponent.prototype.closeMenu=function(e){this.viewCtrl.dismiss(e)},CoreContextMenuPopoverComponent.prototype.itemClicked=function(e,n){if(n.action.observers.length>0){if(e.preventDefault(),e.stopPropagation(),"spinner"==n.iconAction)return!1;n.closeOnClick&&this.closeMenu(n),n.action.emit(this.closeMenu.bind(this,n))}else n.closeOnClick&&(n.href||n.onClosed.observers.length>0)&&this.closeMenu(n);return!0},CoreContextMenuPopoverComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){function CoreCoursePickerMenuPopoverComponent(e,n){this.viewCtrl=n,this.courseId=-1,this.courses=e.get("courses")||[],this.courseId=e.get("courseId")||-1}return CoreCoursePickerMenuPopoverComponent.prototype.coursePicked=function(e,n){return this.viewCtrl.dismiss(n),!0},CoreCoursePickerMenuPopoverComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){function CoreRecaptchaModalComponent(e,n){this.viewCtrl=e,this.expired=!1,this.value="",this.src=n.get("src")}return CoreRecaptchaModalComponent.prototype.closeModal=function(){this.viewCtrl.dismiss({expired:this.expired,value:this.value})},CoreRecaptchaModalComponent.prototype.loaded=function(e){var n=this,t=e&&e.contentWindow;t&&(t.recaptchacallback=function(e){n.expired=!1,n.value=e,n.closeModal()},t.recaptchaexpiredcallback=function(){n.expired=!0,n.value=""})},CoreRecaptchaModalComponent}()},,,,,,,,,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=(t(4),function(e){function AddonModAssignDefaultFeedbackHandler(n){var t=e.call(this,n)||this;return t.translate=n,t.name="AddonModAssignDefaultFeedbackHandler",t.type="default",t}return Object(o.__extends)(AddonModAssignDefaultFeedbackHandler,e),AddonModAssignDefaultFeedbackHandler}(t(1056).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function CoreBlockDefaultHandler(){var n=e.call(this)||this;return n.name="CoreBlockDefault",n.blockName="default",n}return Object(o.__extends)(CoreBlockDefaultHandler,e),CoreBlockDefaultHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreCourseModuleDefaultHandler(e,n){this.sitesProvider=e,this.courseProvider=n,this.name="CoreCourseModuleDefault",this.modName="default"}return CoreCourseModuleDefaultHandler.prototype.isEnabled=function(){return!0},CoreCourseModuleDefaultHandler.prototype.getData=function(e,n,t){var o=this,r={icon:this.courseProvider.getModuleIconSrc(e.modname,e.modicon),title:e.name,class:"core-course-default-handler core-course-module-"+e.modname+"-handler",action:function(e,n,t,o,r){e.preventDefault(),e.stopPropagation(),n.push("CoreCourseUnsupportedModulePage",{module:t,courseId:o},r)}};return e.url&&(r.buttons=[{icon:"open",label:"core.openinbrowser",action:function(n){n.preventDefault(),n.stopPropagation(),o.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(e.url)}}]),r},CoreCourseModuleDefaultHandler.prototype.getMainComponent=function(e,n,t){},CoreCourseModuleDefaultHandler.prototype.displayRefresherInSingleActivity=function(){return!0},CoreCourseModuleDefaultHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(1),r=(t(4),t(14)),i=function(){function CoreCourseModuleCompletionComponent(e,n,t,r,i){this.filterHelper=e,this.domUtils=n,this.translate=t,this.courseProvider=r,this.userProvider=i,this.completionChanged=new o.r}return CoreCourseModuleCompletionComponent.prototype.ngOnChanges=function(e){e.completion&&this.completion&&this.showStatus()},CoreCourseModuleCompletionComponent.prototype.completionClicked=function(e){var n=this;if(this.completion){if(void 0===this.completion.cmid||1!==this.completion.tracking)return;e.preventDefault(),e.stopPropagation();var t=this.domUtils.showModalLoading();this.completion.state=1===this.completion.state?0:1,this.courseProvider.markCompletedManually(this.completion.cmid,this.completion.state,this.completion.courseId,this.completion.courseName).then(function(e){if(!e.status)return Promise.reject(null);n.completion.hasOwnProperty("valueused")&&!n.completion.valueused&&(n.showStatus(),e.offline&&(n.completion.offline=!0)),n.completionChanged.emit(n.completion)}).catch(function(e){n.completion.state=1===n.completion.state?0:1,n.domUtils.showErrorModalDefault(e,"core.errorchangecompletion",!0)}).finally(function(){t.dismiss()})}},CoreCourseModuleCompletionComponent.prototype.showStatus=function(){var e,n,t=this,o=this.moduleName||"";this.completion.tracking===r.a.COMPLETION_TRACKING_MANUAL&&this.completion.state===r.a.COMPLETION_INCOMPLETE?(n="completion-manual-n",e="core.completion-alt-manual-n"):this.completion.tracking===r.a.COMPLETION_TRACKING_MANUAL&&this.completion.state===r.a.COMPLETION_COMPLETE?(n="completion-manual-y",e="core.completion-alt-manual-y"):this.completion.tracking===r.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===r.a.COMPLETION_INCOMPLETE?(n="completion-auto-n",e="core.completion-alt-auto-n"):this.completion.tracking===r.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===r.a.COMPLETION_COMPLETE?(n="completion-auto-y",e="core.completion-alt-auto-y"):this.completion.tracking===r.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===r.a.COMPLETION_COMPLETE_PASS?(n="completion-auto-pass",e="core.completion-alt-auto-pass"):this.completion.tracking===r.a.COMPLETION_TRACKING_AUTOMATIC&&this.completion.state===r.a.COMPLETION_COMPLETE_FAIL&&(n="completion-auto-fail",e="core.completion-alt-auto-fail"),n&&(this.completion.overrideby>0&&(n+="-override"),this.completionImage="assets/img/completion/"+n+".svg"),o&&this.filterHelper.getFiltersAndFormatText(o,"module",this.moduleId,{clean:!0,singleLine:!0,shortenLength:50,courseId:this.completion.courseId}).then(function(n){var o;return t.completion.overrideby>0?(e+="-override",o=t.userProvider.getProfile(t.completion.overrideby,t.completion.courseId,!0).then(function(e){return{overrideuser:e.fullname,modname:n.text}})):o=Promise.resolve(n.text),o.then(function(n){t.completionDescription=t.translate.instant(e,{$a:n})})})},CoreCourseModuleCompletionComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),t(29),function(){function CoreCourseTagAreaComponent(e,n,t){this.navCtrl=e,this.splitviewCtrl=n,this.courseHelper=t}return CoreCourseTagAreaComponent.prototype.openCourse=function(e){var n=this.splitviewCtrl?this.splitviewCtrl.getMasterNav():this.navCtrl;this.courseHelper.getAndOpenCourse(n,e)},CoreCourseTagAreaComponent=Object(o.__decorate)([Object(o.__param)(1,Object(r.E)())],CoreCourseTagAreaComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=(t(4),function(e){function AddonModAssignDefaultSubmissionHandler(n){var t=e.call(this,n)||this;return t.translate=n,t.name="AddonModAssignDefaultSubmissionHandler",t.type="default",t}return Object(o.__extends)(AddonModAssignDefaultSubmissionHandler,e),AddonModAssignDefaultSubmissionHandler}(t(1058).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=(t(4),t(143)),i=t(296),l=t(294),s=function(e){function AddonModChoicePrefetchHandler(n,t,o,r,i,s,a,u,d,c,p,f){var h=e.call(this,n,t,o,r,i,s,a,u,d)||this;return h.choiceProvider=c,h.userProvider=p,h.injector=f,h.name="AddonModChoice",h.modName="choice",h.component=l.a.COMPONENT,h.updatesNames=/^configuration$|^.*files$|^answers$/,h}return Object(o.__extends)(AddonModChoicePrefetchHandler,e),AddonModChoicePrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,t,this.prefetchChoice.bind(this))},AddonModChoicePrefetchHandler.prototype.prefetchChoice=function(e,n,t,o){var r=this;return this.choiceProvider.getChoice(n,e.id,o,!1,!0).then(function(t){var i=[];i.push(r.choiceProvider.getOptions(t.id,!0,o)),i.push(r.choiceProvider.getResults(t.id,!0,o).then(function(e){var t=[];return e.forEach(function(e){e.userresponses.forEach(function(e){e.userid&&t.push(r.userProvider.getProfile(e.userid,n,!1,o)),e.profileimageurl&&t.push(r.filepoolProvider.addToQueueByUrl(o,e.profileimageurl).catch(function(){}))})}),Promise.all(t)}));var s=r.getIntroFilesFromInstance(e,t);return i.push(r.filepoolProvider.addFilesToQueue(o,s,l.a.COMPONENT,e.id)),Promise.all(i)})},AddonModChoicePrefetchHandler.prototype.getIntroFiles=function(e,n){var t=this;return this.choiceProvider.getChoice(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},AddonModChoicePrefetchHandler.prototype.invalidateContent=function(e,n){return this.choiceProvider.invalidateContent(e,n)},AddonModChoicePrefetchHandler.prototype.invalidateModule=function(e,n){return this.choiceProvider.invalidateChoiceData(n)},AddonModChoicePrefetchHandler.prototype.sync=function(e,n,t){return this.syncProvider||(this.syncProvider=this.injector.get(i.a)),this.syncProvider.syncChoice(e.instance,void 0,t)},AddonModChoicePrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModDataDefaultFieldHandler(){this.name="AddonModDataDefaultFieldHandler",this.type="default"}return AddonModDataDefaultFieldHandler.prototype.getFieldSearchData=function(e,n){return!1},AddonModDataDefaultFieldHandler.prototype.getFieldEditData=function(e,n,t){return!1},AddonModDataDefaultFieldHandler.prototype.hasFieldDataChanged=function(e,n,t){return!1},AddonModDataDefaultFieldHandler.prototype.getFieldEditFiles=function(e,n,t){return[]},AddonModDataDefaultFieldHandler.prototype.getFieldsNotifications=function(e,n){return!1},AddonModDataDefaultFieldHandler.prototype.overrideData=function(e,n,t){return e},AddonModDataDefaultFieldHandler.prototype.isEnabled=function(){return!0},AddonModDataDefaultFieldHandler}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return i});t(0);var o=t(61),r=(t(385),t(586),[o.a]),i=function(){return function CoreBlockModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});t(0);var o=t(63),r=t(16),i=[o.a,r.a],l=function(){return function CoreContentLinksModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return f}),t.d(n,"b",function(){return h});t(0),t(6);var o=t(10),r=t(14),i=t(39),l=t(66),s=t(179),a=t(62),u=t(353),d=t(51),c=t(103),p=(t(567),t(587),t(1061),t(1062),t(1064),t(1066),t(397)),f=(t(1068),t(1069),t(1070),t(1071),[r.a,i.a,l.a,s.a,a.a,d.a,c.a,u.a,p.a]),h=function(){return function CoreCourseModule(e,n,t,r,i,l,s,a){e.register(n),e.register(t),l.registerHandler(s),l.registerHandler(a),r.resume.subscribe(function(){setTimeout(function(){e.forceCronHandlerExecution(t.name)},1e3)}),i.on(o.a.LOGIN,function(){setTimeout(function(){e.forceCronHandlerExecution(t.name).catch(function(e){})},1e3)})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(62);var o=t(450),r=function(){function CoreCourseFormatSingleActivityHandler(e){this.moduleDelegate=e,this.name="CoreCourseFormatSingleActivity",this.format="singleactivity"}return CoreCourseFormatSingleActivityHandler.prototype.isEnabled=function(){return!0},CoreCourseFormatSingleActivityHandler.prototype.canViewAllSections=function(e){return!1},CoreCourseFormatSingleActivityHandler.prototype.getCourseTitle=function(e,n){return n&&n[0]&&n[0].modules&&n[0].modules[0]?n[0].modules[0].name:e.displayname?e.displayname:e.fullname?e.fullname:""},CoreCourseFormatSingleActivityHandler.prototype.displayEnableDownload=function(e){return!1},CoreCourseFormatSingleActivityHandler.prototype.displaySectionSelector=function(e){return!1},CoreCourseFormatSingleActivityHandler.prototype.displayRefresher=function(e,n){return!(n&&n[0]&&n[0].modules&&n[0].modules[0])||this.moduleDelegate.displayRefresherInSingleActivity(n[0].modules[0].modname)},CoreCourseFormatSingleActivityHandler.prototype.getCourseFormatComponent=function(e,n){return o.a},CoreCourseFormatSingleActivityHandler.prototype.shouldRefreshWhenCompletionChanges=function(e){return!1},CoreCourseFormatSingleActivityHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var o=t(53),r=t(189),i=(t(599),t(391)),l=(t(1072),t(1073),t(1074),t(1075),t(1076),[o.a,i.a,r.a]),s=function(){return function CoreCoursesModule(e,n,t,o,r,i,l,s,a){e.registerHandler(t),n.registerHandler(o),n.registerHandler(r),n.registerHandler(i),l.registerClickHandler(s),l.registerClickHandler(a)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(53),t(391);var o=function(){function CoreDashboardMainMenuHandler(e,n,t,o,r,i){this.coursesProvider=e,this.dashboardProvider=n,this.siteHomeProvider=t,this.timelineProvider=o,this.blockDelegate=r,this.sitesProvider=i,this.name="CoreHome",this.priority=1100}return CoreDashboardMainMenuHandler.prototype.isEnabled=function(){return this.isEnabledForSite()},CoreDashboardMainMenuHandler.prototype.isEnabledForSite=function(e){var n=this;e=e||this.sitesProvider.getCurrentSiteId();var t,o,r=[];return r.push(this.blockDelegate.areBlocksDisabled(e).then(function(e){t=!e})),r.push(this.dashboardProvider.isAvailable().then(function(e){o=e})),Promise.all(r).then(function(){return!(!o||!t)||n.timelineProvider.isAvailable().then(function(e){return!(!e||!t)||n.siteHomeProvider.isAvailable().then(function(e){return!!e||!n.coursesProvider.isMyCoursesDisabledInSite()})})})},CoreDashboardMainMenuHandler.prototype.getDisplayData=function(){return{icon:"home",title:"core.courses.mymoodle",page:"CoreCoursesDashboardPage",class:"core-dashboard-handler"}},CoreDashboardMainMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var o=t(73),r=t(150),i=t(445),l=(t(1077),t(1078),t(1079),t(1080),t(1081),[o.a,r.a,i.a]),s=function(){return function CoreFileUploaderModule(e,n,t,o,r,i){e.registerHandler(n),e.registerHandler(t),e.registerHandler(o),e.registerHandler(i),e.registerHandler(r)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var o=t(41),r=t(37),i=(t(133),t(31)),l=[o.a,r.a,i.a],s=function(){return function CoreFilterModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var o=t(169),r=t(185),i=(t(1082),t(1083),t(1084),t(1085),t(1086),t(10)),l=t(46),s=[o.a,r.a],a=function(){return function CoreGradesModule(e,n,t,o,r,s,a,u,d,c,p){e.registerHandler(n),o.registerHandler(t),r.registerHandler(s),r.registerHandler(a),d.registerHandler(u),c.on(l.a.PROFILE_REFRESHED,function(e){u.clearViewGradesCache(e.courseId,e.userId)},p.getCurrentSiteId()),c.on(i.a.LOGOUT,function(){u.clearViewGradesCache()},p.getCurrentSiteId())}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});t(0);var o=t(360),r=t(605),i=(t(1088),[o.a,r.a]),l=function(){return function CoreH5PModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(360),r=t(42),i=function(){function CoreH5PPlayerComponent(e,n,t,o,r,i,l,s,a,u,d,c,p,f){this.elementRef=n,this.sitesProvider=t,this.urlUtils=o,this.utils=r,this.textUtils=i,this.h5pProvider=l,this.filepoolProvider=s,this.eventsProvider=a,this.appProvider=u,this.domUtils=d,this.pluginFileDelegate=c,this.fileProvider=p,this.fileHelper=f,this.showPackage=!1,this.loading=!1,this.calculating=!0,this.logger=e.getInstance("CoreH5PPlayerComponent"),this.site=t.getCurrentSite(),this.siteId=this.site.getId(),this.siteCanDownload=this.sitesProvider.getCurrentSite().canDownloadFiles()&&!this.h5pProvider.isOfflineDisabledInSite()}return CoreH5PPlayerComponent.prototype.ngOnInit=function(){this.checkCanDownload()},CoreH5PPlayerComponent.prototype.ngOnChanges=function(e){e.src&&!this.showPackage&&this.checkCanDownload()},CoreH5PPlayerComponent.prototype.play=function(e){var n=this;e.preventDefault(),e.stopPropagation(),this.loading=!0;(this.canDownload&&this.fileHelper.isStateDownloaded(this.state)?this.h5pProvider.getContentIndexFileUrl(this.urlParams.url,this.urlParams,this.siteId).catch(function(){return n.filepoolProvider.getInternalUrlByUrl(n.siteId,n.urlParams.url).then(function(e){return n.fileProvider.getFile(e)}).then(function(e){return n.h5pProvider.extractH5PFile(n.urlParams.url,e,n.siteId)}).then(function(){return n.h5pProvider.getContentIndexFileUrl(n.urlParams.url,n.urlParams,n.siteId)})}).catch(function(e){n.logger.error("Error loading downloaded index:",e,n.src)}):Promise.resolve()).then(function(e){if(!e){var t=n.src&&n.src.replace(o.a.DISPLAY_OPTION_DOWNLOAD+"=1",o.a.DISPLAY_OPTION_DOWNLOAD+"=0");return n.sitesProvider.getCurrentSite().getAutoLoginUrl(t,!1).then(function(e){n.playerSrc=n.urlUtils.addParamsToUrl(e,{preventredirect:!1})})}n.playerSrc=e}).finally(function(){n.addResizerScript(),n.loading=!1,n.showPackage=!0,!n.canDownload||n.state!=r.a.OUTDATED&&n.state!=r.a.NOT_DOWNLOADED||n.attemptDownloadInBg().catch(function(e){n.logger.error("Error downloading H5P in background",e)})})},CoreH5PPlayerComponent.prototype.download=function(e){var n=this;e&&e.preventDefault(),e&&e.stopPropagation(),this.appProvider.isOnline()?this.pluginFileDelegate.getFileSize({fileurl:this.urlParams.url},this.siteId).then(function(e){return n.domUtils.confirmDownloadSize({size:e,total:!0}).then(function(){return n.filepoolProvider.addToQueueByUrl(n.siteId,n.urlParams.url,n.component,n.componentId)},function(){})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.errordownloading",!0),n.calculateState()}):this.domUtils.showErrorModal("core.networkerrormsg",!0)},CoreH5PPlayerComponent.prototype.attemptDownloadInBg=function(){var e=this;return this.urlParams&&this.src&&this.siteCanDownload&&this.h5pProvider.canGetTrustedH5PFileInSite()&&this.appProvider.isOnline()?this.pluginFileDelegate.getFileSize({fileurl:this.urlParams.url},this.siteId).then(function(n){e.filepoolProvider.shouldDownload(n)&&e.filepoolProvider.addToQueueByUrl(e.siteId,e.urlParams.url,e.component,e.componentId)}):Promise.resolve()},CoreH5PPlayerComponent.prototype.addResizerScript=function(){if(null==document.head.querySelector("#core-h5p-resizer-script")){var e=document.createElement("script");e.id="core-h5p-resizer-script",e.type="text/javascript",e.src=this.h5pProvider.getResizerScriptUrl(),document.head.appendChild(e)}},CoreH5PPlayerComponent.prototype.checkCanDownload=function(){var e=this;this.observer&&this.observer.off(),this.urlParams=this.urlUtils.extractUrlParams(this.src),this.src&&this.siteCanDownload&&this.h5pProvider.canGetTrustedH5PFileInSite()&&this.site.containsUrl(this.src)?(this.calculateState(),this.filepoolProvider.getFileEventNameByUrl(this.siteId,this.urlParams.url).then(function(n){e.observer=e.eventsProvider.on(n,function(){e.calculateState()})}).catch(function(){})):(this.calculating=!1,this.canDownload=!1)},CoreH5PPlayerComponent.prototype.calculateState=function(){var e=this;this.calculating=!0,this.filepoolProvider.getFileStateByUrl(this.siteId,this.urlParams.url).then(function(n){e.canDownload=!0,e.state=n}).catch(function(n){e.canDownload=!1}).finally(function(){e.calculating=!1})},CoreH5PPlayerComponent.prototype.iframeLoaded=function(){window.dispatchEvent(new Event("resize"))},CoreH5PPlayerComponent.prototype.ngOnDestroy=function(){this.observer&&this.observer.off()},CoreH5PPlayerComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(195),r=(t.n(o),function(){function CoreH5PUtilsProvider(e,n){this.translate=e,this.textUtils=n,this.SLUGIFY_MAP={"æ":"ae","ø":"oe","ö":"o","ó":"o","ô":"o","Ò":"oe","Õ":"o","Ý":"o","ý":"y","ÿ":"y","ā":"y","ă":"a","ą":"a","œ":"a","å":"a","ä":"a","á":"a","à":"a","â":"a","ã":"a","ç":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","é":"e","è":"e","ê":"e","ë":"e","í":"i","ì":"i","î":"i","ï":"i","ú":"u","ñ":"n","ü":"u","ù":"u","û":"u","ß":"es","ď":"d","đ":"d","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","ĥ":"h","ħ":"h","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","ĳ":"ij","ĵ":"j","ķ":"k","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","ń":"n","ņ":"n","ň":"n","ŉ":"n","ō":"o","ŏ":"o","ő":"o","ŕ":"r","ŗ":"r","ř":"r","ś":"s","ŝ":"s","ş":"s","š":"s","ţ":"t","ť":"t","ŧ":"t","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","ŵ":"w","ŷ":"y","ź":"z","ż":"z","ž":"z","ſ":"s","ƒ":"f","ơ":"o","ư":"u","ǎ":"a","ǐ":"i","ǒ":"o","ǔ":"u","ǖ":"u","ǘ":"u","ǚ":"u","ǜ":"u","ǻ":"a","ǽ":"ae","ǿ":"oe"}}return CoreH5PUtilsProvider.prototype.boolifyAndEncodeMetadataSettings=function(e){return void 0!==e.disable&&(e.disable=1===e.disable),void 0!==e.disableExtraTitleField&&(e.disableExtraTitleField=1===e.disableExtraTitleField),JSON.stringify(e)},CoreH5PUtilsProvider.prototype.determineEmbedType=function(e,n){var t=-1!=e.toLowerCase().indexOf("div")?"div":"iframe";if(n){var o=n.toLowerCase();-1==o.indexOf(t)&&(t=-1!=o.indexOf("div")?"div":"iframe")}return t},CoreH5PUtilsProvider.prototype.getAssetsUrls=function(e,n){var t=this;void 0===n&&(n="");var o=[];return e.forEach(function(e){var r=e.path;-1==e.path.indexOf("://")&&n&&(r=t.textUtils.concatenatePaths(n,r)),e.version&&(r+=e.version),o.push(r)}),o},CoreH5PUtilsProvider.prototype.getDependenciesHash=function(e){var n=[];for(var t in e){var r=e[t];n.push(r.machineName+"-"+r.majorVersion+"."+r.minorVersion+"."+r.patchVersion)}return n.sort(function(e,n){return e.localeCompare(n)}),o.Md5.hashAsciiStr(n.join(""))},CoreH5PUtilsProvider.prototype.getLocalization=function(){return{fullscreen:this.translate.instant("core.h5p.fullscreen"),disableFullscreen:this.translate.instant("core.h5p.disablefullscreen"),download:this.translate.instant("core.h5p.download"),copyrights:this.translate.instant("core.h5p.copyright"),embed:this.translate.instant("core.h5p.embed"),size:this.translate.instant("core.h5p.size"),showAdvanced:this.translate.instant("core.h5p.showadvanced"),hideAdvanced:this.translate.instant("core.h5p.hideadvanced"),advancedHelp:this.translate.instant("core.h5p.resizescript"),copyrightInformation:this.translate.instant("core.h5p.copyright"),close:this.translate.instant("core.h5p.close"),title:this.translate.instant("core.h5p.title"),author:this.translate.instant("core.h5p.author"),year:this.translate.instant("core.h5p.year"),source:this.translate.instant("core.h5p.source"),license:this.translate.instant("core.h5p.license"),thumbnail:this.translate.instant("core.h5p.thumbnail"),noCopyrights:this.translate.instant("core.h5p.nocopyright"),reuse:this.translate.instant("core.h5p.reuse"),reuseContent:this.translate.instant("core.h5p.reuseContent"),reuseDescription:this.translate.instant("core.h5p.reuseDescription"),downloadDescription:this.translate.instant("core.h5p.downloadtitle"),copyrightsDescription:this.translate.instant("core.h5p.copyrighttitle"),embedDescription:this.translate.instant("core.h5p.embedtitle"),h5pDescription:this.translate.instant("core.h5p.h5ptitle"),contentChanged:this.translate.instant("core.h5p.contentchanged"),startingOver:this.translate.instant("core.h5p.startingover"),by:this.translate.instant("core.h5p.by"),showMore:this.translate.instant("core.h5p.showmore"),showLess:this.translate.instant("core.h5p.showless"),subLevel:this.translate.instant("core.h5p.sublevel"),confirmDialogHeader:this.translate.instant("core.h5p.confirmdialogheader"),confirmDialogBody:this.translate.instant("core.h5p.confirmdialogbody"),cancelLabel:this.translate.instant("core.h5p.cancellabel"),confirmLabel:this.translate.instant("core.h5p.confirmlabel"),licenseU:this.translate.instant("core.h5p.undisclosed"),licenseCCBY:this.translate.instant("core.h5p.ccattribution"),licenseCCBYSA:this.translate.instant("core.h5p.ccattributionsa"),licenseCCBYND:this.translate.instant("core.h5p.ccattributionnd"),licenseCCBYNC:this.translate.instant("core.h5p.ccattributionnc"),licenseCCBYNCSA:this.translate.instant("core.h5p.ccattributionncsa"),licenseCCBYNCND:this.translate.instant("core.h5p.ccattributionncnd"),licenseCC40:this.translate.instant("core.h5p.licenseCC40"),licenseCC30:this.translate.instant("core.h5p.licenseCC30"),licenseCC25:this.translate.instant("core.h5p.licenseCC25"),licenseCC20:this.translate.instant("core.h5p.licenseCC20"),licenseCC10:this.translate.instant("core.h5p.licenseCC10"),licenseGPL:this.translate.instant("core.h5p.licenseGPL"),licenseV3:this.translate.instant("core.h5p.licenseV3"),licenseV2:this.translate.instant("core.h5p.licenseV2"),licenseV1:this.translate.instant("core.h5p.licenseV1"),licensePD:this.translate.instant("core.h5p.pd"),licenseCC010:this.translate.instant("core.h5p.licenseCC010"),licensePDM:this.translate.instant("core.h5p.pdm"),licenseC:this.translate.instant("core.h5p.copyrightstring"),contentType:this.translate.instant("core.h5p.contenttype"),licenseExtras:this.translate.instant("core.h5p.licenseextras"),changes:this.translate.instant("core.h5p.changelog"),contentCopied:this.translate.instant("core.h5p.contentCopied"),connectionLost:this.translate.instant("core.h5p.connectionLost"),connectionReestablished:this.translate.instant("core.h5p.connectionReestablished"),resubmitScores:this.translate.instant("core.h5p.resubmitScores"),offlineDialogHeader:this.translate.instant("core.h5p.offlineDialogHeader"),offlineDialogBody:this.translate.instant("core.h5p.offlineDialogBody"),offlineDialogRetryMessage:this.translate.instant("core.h5p.offlineDialogRetryMessage"),offlineDialogRetryButtonLabel:this.translate.instant("core.h5p.offlineDialogRetryButtonLabel"),offlineSuccessfulSubmit:this.translate.instant("core.h5p.offlineSuccessfulSubmit")}},CoreH5PUtilsProvider.prototype.libraryFromString=function(e){var n=e.match(/^([\w0-9\-\.]{1,255})[\-\ ]([0-9]{1,5})\.([0-9]{1,5})$/i);return n&&n.length>=4?{machineName:n[1],majorVersion:Number(n[2]),minorVersion:Number(n[3])}:null},CoreH5PUtilsProvider.prototype.libraryParameterValuesToCsv=function(e,n,t){if(void 0===t&&(t="path"),void 0!==e[n]){var o=[];return e[n].forEach(function(e){for(var n in e)n===t&&o.push(e[n])}),o.join(",")}return""},CoreH5PUtilsProvider.prototype.slugify=function(e){e=(e=e||"").toLowerCase();for(var n="",t=0;t<e.length;t++){var o=e[t];n+=this.SLUGIFY_MAP[o]||o}return n=n.replace(/[^a-z0-9]/g,"-"),n=n.replace(/-{2,}/g,"-"),(n=n.replace(/(^-+|-+$)/g,"")).length>91&&(n=n.substr(0,92)),""===n&&(n="interactive"),n},CoreH5PUtilsProvider.prototype.textAddonMatches=function(e,n){if("string"==typeof e){if(e.match(n))return!0}else if("object"==typeof e)for(var t in e){if(this.textAddonMatches(e[t],n))return!0}return!1},CoreH5PUtilsProvider}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});t(0);var o=t(126),r=t(1089),i=(t(776),[o.a,r.a]),l=function(){return function CoreLoginModule(e,n){e.register(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});t(0);var o=t(171),r=t(487),i=[o.a,r.a],l=function(){return function CoreMainMenuModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var o=t(129),r=t(74),i=t(118),l=(t(609),t(610),t(139)),s=[o.a,r.a,i.a,l.a],a=function(){return function CoreQuestionModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function CoreQuestionDefaultHandler(){var n=e.call(this)||this;return n.name="CoreQuestionDefault",n.type="default",n}return Object(o.__extends)(CoreQuestionDefaultHandler,e),CoreQuestionDefaultHandler}(t(1090).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1091),i=function(e){function CoreQuestionBehaviourDefaultHandler(n){var t=e.call(this,n)||this;return t.questionProvider=n,t.name="CoreQuestionBehaviourDefault",t.type="default",t}return Object(o.__extends)(CoreQuestionBehaviourDefaultHandler,e),CoreQuestionBehaviourDefaultHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0),t(6);var o=t(488),r=t(502),i=(t(1092),t(10)),l=[o.a,r.a],s=function(){return function CoreSharedFilesModule(e,n,t,o,r){if(n.registerHandler(t),e.is("ios")){var l=0;o.searchIOSNewSharedFiles(),e.resume.subscribe(function(){setTimeout(function(){Date.now()-l<1e3||(l=Date.now(),o.searchIOSNewSharedFiles())},200)}),r.on(i.a.APP_LAUNCHED_URL,function(e){e&&0===e.indexOf("file://")&&(l=Date.now(),o.searchIOSNewSharedFiles(e))})}}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return i});t(0);var o=t(232),r=(t(1093),[o.a]),i=function(){return function CoreSiteHomeModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return d}),t.d(n,"b",function(){return c});t(0);var o=t(105),r=t(192),i=t(46),l=t(741),s=(t(1094),t(10)),a=(t(1095),t(1096),t(1097),t(446)),u=t(615),d=(t(1098),t(1099),[o.a,r.a,i.a,l.a,a.a,u.a]),c=function(){return function CoreUserModule(e,n,t,o,r,i,l,a,u,d,c,p,f,h){e.registerHandler(n),d.registerHandler(a),i.registerHandler(l),i.registerHandler(u),c.register(p),f.registerHandler(h),t.on(s.a.USER_DELETED,function(e){var n=e.params,t=0;n.userid?t=n.userid:n.userids?t=n.userids[0]:"id"===n.field&&n.values&&n.values.length?t=n.values[0]:n.userlist&&n.userlist.length&&(t=n.userlist[0].userid),t>0&&r.deleteStoredUser(t,e.siteId)},o.getCurrentSiteId())}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function CoreUserTagAreaComponent(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(149),i=(t(446),t(46),t(4),function(e){function CoreUserSyncProvider(n,t,o,r,i,l,s,a,u,d){var c=e.call(this,"CoreUserSync",n,t,o,i,l,r,d)||this;return c.userOffline=s,c.userProvider=a,c.utils=u,c}return Object(o.__extends)(CoreUserSyncProvider,e),CoreUserSyncProvider.prototype.syncPreferences=function(e){return this.syncOnSites("all user preferences",this.syncPreferencesFunc.bind(this),[],e)},CoreUserSyncProvider.prototype.syncPreferencesFunc=function(e){var n=this;e=e||this.sitesProvider.getCurrentSiteId();if(this.isSyncing("preferences",e))return this.getOngoingSync("preferences",e);var t=[];this.logger.debug("Try to sync user preferences");var o=this.userOffline.getChangedPreferences(e).then(function(o){return n.utils.allPromises(o.map(function(o){return n.userProvider.getUserPreferenceOnline(o.name,e).then(function(r){return o.onlinevalue!=r?n.userOffline.setPreference(o.name,r,r,e):n.userProvider.setUserPreference(o.name,o.value,e).catch(function(e){if(!n.utils.isWebServiceError(e))return Promise.reject(e);t.push(n.textUtils.getErrorMessageFromError(e))})})}))}).then(function(){return t});return this.addOngoingSync("preferences",o,e)},CoreUserSyncProvider.AUTO_SYNCED="core_user_autom_synced",CoreUserSyncProvider}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0),t(6);var o=t(137),r=t(145),i=(t(1100),t(1101),t(10)),l=[o.a,r.a],s=function(){return function CorePushNotificationsModule(e,n,t,r,l,s,a,u){var d=l.getInstance("CorePushNotificationsModule");s.register(a),s.register(u),e.ready().then(function(){n.registerDevice()}),t.on(i.a.NOTIFICATION_SOUND_CHANGED,function(){n.registerDevice()}),t.on(i.a.LOGIN,function(){n.registerDeviceOnMoodle().catch(function(e){d.warn("Can't register device",e)})}),t.on(i.a.SITE_DELETED,function(e){n.unregisterDeviceOnMoodle(e).catch(function(e){d.warn("Can't unregister device",e)}),n.cleanSiteCounters(e.id)}),r.registerClick(o.a.COMPONENT,function(e){n.logEvent("moodle_notification_open",e,!0),n.notificationClicked(e)}),r.registerObserver("clear",o.a.COMPONENT,function(e){n.logEvent("moodle_notification_dismiss",e,!0)})}}()},function(e,n,t){"use strict";var o=t(0),r=(t(1),t(6),t(568)),i=t(356),l=t(437),s=t(490),a=t(309),u=t(438),d=t(439),c=t(361),p=t(426),f=t(436),h=t(349),m=t(355),_=t(442),g=t(186),v=t(354),C=t(756),y=t(554),P=t(555),A=t(566),b=t(435),I=(t(11),function(){function BadgeMock(e){this.appProvider=e}return BadgeMock.prototype.clear=function(){return Promise.reject("clear is only supported in mobile devices")},BadgeMock.prototype.set=function(e){if(!this.appProvider.isDesktop())return Promise.reject("set is not supported in browser");try{return t(132).remote.app.setBadgeCount(e)?Promise.resolve():Promise.reject(null)}catch(e){return Promise.reject(e)}},BadgeMock.prototype.get=function(){if(!this.appProvider.isDesktop())return Promise.reject("get is not supported in browser");try{var e=t(132).remote.app;return Promise.resolve(e.getBadgeCount())}catch(e){return Promise.reject(e)}},BadgeMock.prototype.increase=function(e){return Promise.reject("increase is only supported in mobile devices")},BadgeMock.prototype.decrease=function(e){return Promise.reject("decrease is only supported in mobile devices")},BadgeMock.prototype.isSupported=function(){return Promise.reject("isSupported is only supported in mobile devices")},BadgeMock.prototype.hasPermission=function(){return Promise.reject("hasPermission is only supported in mobile devices")},BadgeMock.prototype.requestPermission=function(){return Promise.reject("requestPermission is only supported in mobile devices")},BadgeMock}()),S=(t(359),function(e){function CameraMock(n){var t=e.call(this)||this;return t.captureHelper=n,t}return Object(o.__extends)(CameraMock,e),CameraMock.prototype.cleanup=function(){return Promise.resolve()},CameraMock.prototype.getPicture=function(e){return this.captureHelper.captureMedia("image",e)},CameraMock}(i.a)),E=function(e){function ClipboardMock(n){var o=e.call(this)||this;return o.isDesktop=n.isDesktop(),o.isDesktop?o.clipboard=t(132).clipboard:(o.copyTextarea=document.createElement("textarea"),o.copyTextarea.className="core-browser-copy-area",o.copyTextarea.setAttribute("aria-hidden","true"),document.body.appendChild(o.copyTextarea)),o}return Object(o.__extends)(ClipboardMock,e),ClipboardMock.prototype.copy=function(e){var n=this;return new Promise(function(t,o){if(n.isDesktop)n.clipboard.writeText(e),t();else{n.copyTextarea.innerHTML=e,n.copyTextarea.select();try{document.execCommand("copy")?t():o()}catch(e){o()}n.copyTextarea.innerHTML=""}})},ClipboardMock.prototype.paste=function(){var e=this;return new Promise(function(n,t){if(e.isDesktop)n(e.clipboard.readText());else{e.copyTextarea.innerHTML="",e.copyTextarea.select();try{document.execCommand("paste")?n(e.copyTextarea.innerHTML):t()}catch(e){t()}e.copyTextarea.innerHTML=""}})},ClipboardMock}(l.a),M=(t(67),t(12),t(117)),w=t(1913),k=function(e){function FileMock(n,t,o){var r=e.call(this)||this;return r.appProvider=n,r.textUtils=t,r.mimeUtils=o,r}return Object(o.__extends)(FileMock,e),FileMock.prototype.checkDir=function(e,n){var t=this.textUtils.concatenatePaths(e,n);return this.resolveDirectoryUrl(t).then(function(){return!0})},FileMock.prototype.checkFile=function(e,n){return this.resolveLocalFilesystemUrl(this.textUtils.concatenatePaths(e,n)).then(function(e){if(e.isFile)return!0;var n=new a.FileError(13);return n.message="input is not a file",Promise.reject(n)})},FileMock.prototype.copyMock=function(e,n,t){var o=this;return new Promise(function(r,i){t=t.replace(/%20/g," "),e.copyTo(n,t,function(e){r(e)},function(e){o.fillErrorMessageMock(e),i(e)})})},FileMock.prototype.copyDir=function(e,n,t,o){var r=this;return this.resolveDirectoryUrl(e).then(function(e){return r.getDirectory(e,n,{create:!1})}).then(function(e){return r.resolveDirectoryUrl(t).then(function(n){return r.copyMock(e,n,o)})})},FileMock.prototype.copyFile=function(e,n,t,o){var r=this;return o=o||n,this.resolveDirectoryUrl(e).then(function(e){return r.getFile(e,n,{create:!1})}).then(function(e){return r.resolveDirectoryUrl(t).then(function(n){return r.copyMock(e,n,o)})})},FileMock.prototype.createDir=function(e,n,t){var o=this,r={create:!0};return t||(r.exclusive=!0),this.resolveDirectoryUrl(e).then(function(e){return o.getDirectory(e,n,r)})},FileMock.prototype.createFile=function(e,n,t){var o=this,r={create:!0};return t||(r.exclusive=!0),this.resolveDirectoryUrl(e).then(function(e){return o.getFile(e,n,r)})},FileMock.prototype.createWriterMock=function(e){var n=this;return new Promise(function(t,o){e.createWriter(function(e){t(e)},function(e){n.fillErrorMessageMock(e),o(e)})})},FileMock.prototype.emulateCordovaFileForDesktop=function(e){var n=this;this.appProvider.isDesktop()&&(window.resolveLocalFileSystemURL=function(t,o,r){e.stat(t,function(e,i){if(e)r&&r(e);else{var l=i.isDirectory()?w.a:w.b,s=t.substr(t.lastIndexOf("/")+1);o&&o(new l(n.textUtils,n.mimeUtils,s,t))}})})},FileMock.prototype.fillErrorMessageMock=function(e){try{e.message=this.cordovaFileError[e.code]}catch(e){}},FileMock.prototype.getDirectory=function(e,n,t){var o=this;return new Promise(function(r,i){try{n=n.replace(/%20/g," "),e.getDirectory(n,t,function(e){r(e)},function(e){o.fillErrorMessageMock(e),i(e)})}catch(e){o.fillErrorMessageMock(e),i(e)}})},FileMock.prototype.getFile=function(e,n,t){var o=this;return new Promise(function(r,i){try{n=n.replace(/%20/g," "),e.getFile(n,t,r,function(e){o.fillErrorMessageMock(e),i(e)})}catch(e){o.fillErrorMessageMock(e),i(e)}})},FileMock.prototype.getFreeDiskSpace=function(){return window.requestFileSystem?new Promise(function(e,n){var t=0,o=50,r=function(e,n){return new Promise(function(i,l){window.requestFileSystem(LocalFileSystem.PERSISTENT,e,function(){++t>o?i(e):r(e*n,n).then(i)},function(){i(e/n)})})};r(1048576,1.3).then(function(n){t=0,o=10,r(n,1.1).then(function(n){e(n/1024)})})}):Promise.reject(null)},FileMock.prototype.listDir=function(e,n){var t=this;return this.resolveDirectoryUrl(e).then(function(e){return t.getDirectory(e,n,{create:!1,exclusive:!1})}).then(function(e){var n=e.createReader();return t.readEntriesMock(n)})},FileMock.prototype.load=function(){var e=this;return new Promise(function(n,o){var r,i=window;if(void 0===i.requestFileSystem&&(i.requestFileSystem=i.webkitRequestFileSystem),void 0===i.resolveLocalFileSystemURL&&(i.resolveLocalFileSystemURL=i.webkitResolveLocalFileSystemURL),i.LocalFileSystem={PERSISTENT:1},e.appProvider.isDesktop()){var l=t(451),s=t(132).remote.app;if(e.emulateCordovaFileForDesktop(l),!(r=s.getPath("documents")||s.getPath("home")))return void o("Cannot calculate base path for file system.");r=e.textUtils.concatenatePaths(r.replace(/\\/g,"/"),M.a.app_id)+"/",l.mkdir(r,function(e){!e||e&&"EEXIST"===e.code?n(r):o("Error creating base path.")})}else navigator.webkitPersistentStorage.requestQuota(524288e3,function(e){window.requestFileSystem(LocalFileSystem.PERSISTENT,e,function(e){r=e.root.toURL(),n(r)},o)},o)})},FileMock.prototype.moveMock=function(e,n,t){var o=this;return new Promise(function(r,i){t=t.replace(/%20/g," "),e.moveTo(n,t,function(e){r(e)},function(e){o.fillErrorMessageMock(e),i(e)})})},FileMock.prototype.moveDir=function(e,n,t,o){var r=this;return this.resolveDirectoryUrl(e).then(function(e){return r.getDirectory(e,n,{create:!1})}).then(function(e){return r.resolveDirectoryUrl(t).then(function(n){return r.moveMock(e,n,o)})})},FileMock.prototype.moveFile=function(e,n,t,o){var r=this;return o=o||n,this.resolveDirectoryUrl(e).then(function(e){return r.getFile(e,n,{create:!1})}).then(function(e){return r.resolveDirectoryUrl(t).then(function(n){return r.moveMock(e,n,o)})})},FileMock.prototype.readAsArrayBuffer=function(e,n){return this.readFileMock(e,n,"ArrayBuffer")},FileMock.prototype.readAsBinaryString=function(e,n){return this.readFileMock(e,n,"BinaryString")},FileMock.prototype.readAsDataURL=function(e,n){return this.readFileMock(e,n,"DataURL")},FileMock.prototype.readAsText=function(e,n){return this.readFileMock(e,n,"Text")},FileMock.prototype.readEntriesMock=function(e){var n=this;return new Promise(function(t,o){e.readEntries(function(e){t(e)},function(e){n.fillErrorMessageMock(e),o(e)})})},FileMock.prototype.readFileMock=function(e,n,t){var o=this;return this.resolveDirectoryUrl(e).then(function(e){return o.getFile(e,n,{create:!1})}).then(function(e){var n=new FileReader;return new Promise(function(o,r){n.onloadend=function(){void 0!==n.result||null!==n.result?o(n.result):r(void 0!==n.error||null!==n.error?n.error:{code:null,message:"READER_ONLOADEND_ERR"})},e.file(function(e){n["readAs"+t].call(n,e)},function(e){r(e)})})})},FileMock.prototype.removeMock=function(e){var n=this;return new Promise(function(t,o){e.remove(function(){t({success:!0,fileRemoved:e})},function(e){n.fillErrorMessageMock(e),o(e)})})},FileMock.prototype.removeDir=function(e,n){var t=this;return this.resolveDirectoryUrl(e).then(function(e){return t.getDirectory(e,n,{create:!1})}).then(function(e){return t.removeMock(e)})},FileMock.prototype.removeFile=function(e,n){var t=this;return this.resolveDirectoryUrl(e).then(function(e){return t.getFile(e,n,{create:!1})}).then(function(e){return t.removeMock(e)})},FileMock.prototype.removeRecursively=function(e,n){var t=this;return this.resolveDirectoryUrl(e).then(function(e){return t.getDirectory(e,n,{create:!1})}).then(function(e){return t.rimrafMock(e)})},FileMock.prototype.resolveDirectoryUrl=function(e){return this.resolveLocalFilesystemUrl(e).then(function(e){if(e.isDirectory)return e;var n=new a.FileError(13);return n.message="input is not a directory",Promise.reject(n)})},FileMock.prototype.resolveLocalFilesystemUrl=function(e){var n=this;return new Promise(function(t,o){try{window.resolveLocalFileSystemURL(e,function(e){t(e)},function(e){n.fillErrorMessageMock(e),o(e)})}catch(e){n.fillErrorMessageMock(e),o(e)}})},FileMock.prototype.rimrafMock=function(e){var n=this;return new Promise(function(t,o){e.removeRecursively(function(){t({success:!0,fileRemoved:e})},function(e){n.fillErrorMessageMock(e),o(e)})})},FileMock.prototype.writeMock=function(e,n){return n instanceof Blob?this.writeFileInChunksMock(e,n):new Promise(function(t,o){e.onwriteend=function(n){e.error?o(e.error):t(n)},e.write(n)})},FileMock.prototype.writeExistingFile=function(e,n,t){return this.writeFile(e,n,t,{replace:!0})},FileMock.prototype.writeFile=function(e,n,t,o){var r=this;void 0===o&&(o={});var i={create:!o.append,exclusive:!o.replace};return this.resolveDirectoryUrl(e).then(function(e){return r.getFile(e,n,i)}).then(function(e){return r.writeFileEntryMock(e,t,o)})},FileMock.prototype.writeFileEntryMock=function(e,n,t){var o=this;return this.createWriterMock(e).then(function(e){return t.append&&e.seek(e.length),t.truncate&&e.truncate(t.truncate),o.writeMock(e,n)}).then(function(){return e})},FileMock.prototype.writeFileInChunksMock=function(e,n){var t=0,o=function(){var o=Math.min(1048576,n.size-t),r=n.slice(t,t+o);t+=o,e.write(r)};return new Promise(function(r,i){e.onerror=i,e.onwriteend=function(){t<n.size?o():r()},o()})},FileMock}(a.a),T=function(e){function FileOpenerMock(n){var t=e.call(this)||this;return t.appProvider=n,t}return Object(o.__extends)(FileOpenerMock,e),FileOpenerMock.prototype.appIsInstalled=function(e){return Promise.reject("appIsInstalled not supported in browser or dekstop.")},FileOpenerMock.prototype.open=function(e,n){if(this.appProvider.isDesktop()){if(!t(132).ipcRenderer.sendSync("openItem",e))return Promise.reject("Error opening file")}else window.open(e,"_blank");return Promise.resolve()},FileOpenerMock.prototype.uninstall=function(e){return Promise.reject("uninstall not supported in browser or dekstop.")},FileOpenerMock}(u.a),O=t(1053),D=t(147),x=function(e){function GeolocationMock(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(GeolocationMock,e),GeolocationMock.prototype.getCurrentPosition=function(e){return new Promise(function(n,t){return navigator.geolocation.getCurrentPosition(n,t,e)})},GeolocationMock.prototype.watchPosition=function(e){return new D.Observable(function(n){var t=navigator.geolocation.watchPosition(n.next.bind(n),n.error.bind(n),e);return function(){navigator.geolocation.clearWatch(t)}})},GeolocationMock}(c.a),F=function(){function GlobalizationErrorMock(e,n){this.code=e,this.message=n}return GlobalizationErrorMock.UNKNOWN_ERROR=0,GlobalizationErrorMock.FORMATTING_ERROR=1,GlobalizationErrorMock.PARSING_ERROR=2,GlobalizationErrorMock.PATTERN_ERROR=3,GlobalizationErrorMock}(),L=function(e){function GlobalizationMock(n){var t=e.call(this)||this;return t.appProvider=n,t}return Object(o.__extends)(GlobalizationMock,e),GlobalizationMock.prototype.dateToString=function(e,n){return Promise.reject(new F(F.UNKNOWN_ERROR,"Not supported."))},GlobalizationMock.prototype.getCurrencyPattern=function(e){return Promise.reject(new F(F.UNKNOWN_ERROR,"Not supported."))},GlobalizationMock.prototype.getCurrentlocale=function(){var e=navigator.userLanguage||navigator.language;try{return this.appProvider.isDesktop()?t(132).remote.app.getLocale()||e:e}catch(n){return e}},GlobalizationMock.prototype.getDateNames=function(e){return Promise.reject(new F(F.UNKNOWN_ERROR,"Not supported."))},GlobalizationMock.prototype.getDatePattern=function(e){return Promise.reject(new F(F.UNKNOWN_ERROR,"Not supported."))},GlobalizationMock.prototype.getFirstDayOfWeek=function(){return Promise.reject(new F(F.UNKNOWN_ERROR,"Not supported."))},GlobalizationMock.prototype.getLocaleName=function(){var e=this.getCurrentlocale();if(e)return Promise.resolve({value:e});var n=new F(F.UNKNOWN_ERROR,"Cannot get language");return Promise.reject(n)},GlobalizationMock.prototype.getNumberPattern=function(e){return Promise.reject(new F(F.UNKNOWN_ERROR,"Not supported."))},GlobalizationMock.prototype.getPreferredLanguage=function(){return this.getLocaleName()},GlobalizationMock.prototype.isDayLightSavingsTime=function(e){return Promise.reject(new F(F.UNKNOWN_ERROR,"Not supported."))},GlobalizationMock.prototype.numberToString=function(e,n){return Promise.reject(new F(F.UNKNOWN_ERROR,"Not supported."))},GlobalizationMock.prototype.stringToDate=function(e,n){return Promise.reject(new F(F.UNKNOWN_ERROR,"Not supported."))},GlobalizationMock.prototype.stringToNumber=function(e,n){return Promise.reject(new F(F.UNKNOWN_ERROR,"Not supported."))},GlobalizationMock}(p.a),U=(t(58),t(23),function(){function InAppBrowserObjectMock(e,n,o,r,i,l){if(void 0===l&&(l="location=yes"),this.fileProvider=n,this.urlUtils=o,this.url=r,e.isDesktop()){this.browserWindow=t(132).remote.BrowserWindow,this.screen=t(132).screen,this.isSSO=!(!r||!r.match(/\/launch\.php\?service=.+&passport=/));var s,a=800,u=600,d={webPreferences:{}};try{d.webPreferences.session=t(132).remote.session.fromPartition("inappbrowsersession")}catch(e){}if(screen&&(s=this.screen.getPrimaryDisplay())&&s.workArea&&(a=s.workArea.width||a,u=s.workArea.height||u),d.width=a,d.height=u,-1!=l.indexOf("hidden=yes")&&(d.show=!1),-1!=l.indexOf("location=no")&&(d.frame=!1),-1!=l.indexOf("fullscreen=yes")&&(d.fullscreen=!0),-1!=l.indexOf("clearsessioncache=yes")&&d.webPreferences.session&&d.webPreferences.session.clearStorageData({storages:"cookies"}),this.window=new this.browserWindow(d),this.window.loadURL(r),this.isSSO){this.window.webContents.setUserAgent("Mozilla/5.0 (iPad) AppleWebKit/603.3.8 (KHTML, like Gecko) Mobile/14G60")}}}return InAppBrowserObjectMock.prototype.close=function(){if(!this.window.isDestroyed())try{this.window.close()}catch(e){}},InAppBrowserObjectMock.prototype.executeScript=function(e){var n=this;return new Promise(function(t,o){e.code?n.window.webContents.executeJavaScript(e.code,!1,t):e.file?n.fileProvider.readFile(e.file).then(function(e){n.window.webContents.executeJavaScript(e,!1,t)}).catch(o):o("executeScript requires exactly one of code or file to be specified")})},InAppBrowserObjectMock.prototype.getLaunchUrl=function(e){var n=this;return void 0===e&&(e=0),this.window.isDestroyed()?Promise.reject(null):new Promise(function(t,o){var r=!1;n.window.webContents.executeJavaScript('var el = document.querySelector("#launchapp"); el && el.href;').then(function(e){r=!0,t(e)}),setTimeout(function(){r||(e>5?o():n.getLaunchUrl(e+1).then(t,o))},300)})},InAppBrowserObjectMock.prototype.hide=function(){this.window.hide()},InAppBrowserObjectMock.prototype.insertCSS=function(e){var n=this;return new Promise(function(t,o){e.code?(n.window.webContents.insertCSS(e.code),t()):e.file?n.fileProvider.readFile(e.file).then(function(e){n.window.webContents.insertCSS(e),t()}).catch(o):o("insertCSS requires exactly one of code or file to be specified")})},InAppBrowserObjectMock.prototype.on=function(e){var n=this;return new D.Observable(function(t){var o=function(o,r){try{o.url=r||(n.window.isDestroyed()?"":n.window.getURL()),o.type=e,t.next(o)}catch(e){}},r=function(e){n.urlUtils.removeUrlParams(n.url)==n.urlUtils.removeUrlParams(n.window.getURL())&&n.getLaunchUrl().then(function(n){n&&o(e,n)})};if(!n.window.isDestroyed()&&!n.window.webContents.isDestroyed())switch(e){case"loadstart":n.window.webContents.on("did-start-loading",o),n.isSSO&&n.window.webContents.on("did-finish-load",r);break;case"loadstop":n.window.webContents.on("did-finish-load",o);break;case"loaderror":n.window.webContents.on("did-fail-load",o);break;case"exit":n.window.on("close",o)}return function(){if(!n.window.isDestroyed()&&!n.window.webContents.isDestroyed())switch(e){case"loadstart":n.window.webContents.removeListener("did-start-loading",o),n.window.webContents.removeListener("did-finish-load",r);break;case"loadstop":n.window.webContents.removeListener("did-finish-load",o);break;case"loaderror":n.window.webContents.removeListener("did-fail-load",o);break;case"exit":n.window.removeListener("close",o)}}})},InAppBrowserObjectMock.prototype.show=function(){this.window.show()},InAppBrowserObjectMock}()),R=function(e){function InAppBrowserMock(n,t,o){var r=e.call(this)||this;return r.appProvider=n,r.fileProvider=t,r.urlUtils=o,r}return Object(o.__extends)(InAppBrowserMock,e),InAppBrowserMock.prototype.create=function(n,t,o){return void 0===o&&(o="location=yes"),o&&"string"!=typeof o&&(o=Object.keys(o).map(function(e){return e+"="+o[e]}).join(",")),this.appProvider.isDesktop()?new U(this.appProvider,this.fileProvider,this.urlUtils,n,t,o):e.prototype.create.call(this,n,t,o)},InAppBrowserMock}(f.a),H=(t(3),t(42)),N=t(15),B=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},V=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},W=function(e){function LocalNotificationsMock(n,t,o){var r=e.call(this)||this;return r.appProvider=n,r.utils=t,r.textUtils=o,r.toastTemplate='<toast><visual><binding template="ToastText02"><text id="1" hint-wrap="true">%s</text><text id="2" hint-wrap="true">%s</text></binding></visual></toast>',r.tileBindingTemplate='<text hint-style="base" hint-wrap="true">%s</text><text hint-style="captionSubtle" hint-wrap="true">%s</text>',r.tileTemplate='<tile><visual branding="nameAndLogo"><binding template="TileMedium">'+r.tileBindingTemplate+'</binding><binding template="TileWide">'+r.tileBindingTemplate+'</binding><binding template="TileLarge">'+r.tileBindingTemplate+"</binding></visual></tile>",r.DESKTOP_NOTIFS_TABLE="desktop_local_notifications",r.tableSchema={name:"LocalNotificationsMock",version:1,tables:[{name:r.DESKTOP_NOTIFS_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"title",type:"TEXT"},{name:"text",type:"TEXT"},{name:"at",type:"INTEGER"},{name:"data",type:"TEXT"},{name:"triggered",type:"INTEGER"}]}]},r.scheduled={},r.triggered={},r.defaults={actions:[],attachments:[],autoClear:!0,badge:null,channel:null,clock:!0,color:null,data:null,defaults:0,foreground:null,group:null,groupSummary:!1,icon:null,id:0,launch:!0,led:!0,lockscreen:!0,mediaSession:null,number:0,priority:0,progressBar:!1,silent:!1,smallIcon:"res://icon",sound:!0,sticky:!1,summary:null,text:"",timeoutAfter:!1,title:"",trigger:{type:"calendar"},vibrate:!1,wakeup:!0},r.appDB=n.getDB(),r.dbReady=n.createTablesFromSchema(r.tableSchema).catch(function(){}),r.observers={schedule:new D.Subject,trigger:new D.Subject,click:new D.Subject,update:new D.Subject,clear:new D.Subject,clearall:new D.Subject,cancel:new D.Subject,cancelall:new D.Subject},r}return Object(o.__extends)(LocalNotificationsMock,e),LocalNotificationsMock.prototype.addActions=function(e,n){return Promise.reject("Not supported in desktop apps.")},LocalNotificationsMock.prototype.cancel=function(e){var n=this,t=[];return e=Array.isArray(e)?e:[e],(e=this.convertIds(e)).forEach(function(e){n.scheduled[e]&&t.push(n.cancelNotification(e,!1,"cancel"))}),Promise.all(t)},LocalNotificationsMock.prototype.cancelAll=function(){var e=this;return this.cancel(Object.keys(this.scheduled)).then(function(){e.fireEvent("cancelall",{event:"cancelall",foreground:!0,queued:!1})})},LocalNotificationsMock.prototype.cancelNotification=function(e,n,t){if(this.scheduled[e]){var o=this.scheduled[e].notification;clearTimeout(this.scheduled[e].timeout),clearInterval(this.scheduled[e].interval),delete this.scheduled[e],delete this.triggered[e],this.removeNotification(e),n||this.fireEvent(t,o)}},LocalNotificationsMock.prototype.clear=function(e){var n=this,t=[];return e=Array.isArray(e)?e:[e],(e=this.convertIds(e)).forEach(function(e){!n.scheduled[e]||!n.scheduled[e].notification||n.scheduled[e].notification.trigger&&n.scheduled[e].notification.trigger.every||t.push(n.cancelNotification(e,!1,"clear"))}),Promise.all(t)},LocalNotificationsMock.prototype.clearAll=function(){var e=this;return this.clear(Object.keys(this.scheduled)).then(function(){e.fireEvent("clearall",{event:"clearall",foreground:!0,queued:!1})})},LocalNotificationsMock.prototype.convertIds=function(e){for(var n=[],t=0;t<e.length;t++)n.push(Number(e[t]));return n},LocalNotificationsMock.prototype.convertProperties=function(e){return e.id&&(e.id=this.parseToInt("id",e)),e.title&&(e.title=e.title.toString()),e.badge&&(e.badge=this.parseToInt("badge",e)),e.defaults&&(e.defaults=this.parseToInt("defaults",e)),"boolean"==typeof e.timeoutAfter&&(e.timeoutAfter=e.timeoutAfter?36e5:null),e.timeoutAfter&&(e.timeoutAfter=this.parseToInt("timeoutAfter",e)),this.convertPriority(e),this.convertTrigger(e),this.convertActions(e),this.convertProgressBar(e),e},LocalNotificationsMock.prototype.parseToInt=function(e,n){return isNaN(n[e])?this.defaults[e]:Number(n[e])},LocalNotificationsMock.prototype.convertPriority=function(e){var n=e.priority||e.prio||0;return"string"==typeof n&&(n={min:-2,low:-1,high:1,max:2}[n]||0),!0===e.foreground&&(n=Math.max(n,1)),!1===e.foreground&&(n=Math.min(n,0)),e.priority=n,e},LocalNotificationsMock.prototype.convertActions=function(e){var n=[];if(!e.actions||"string"==typeof e.actions)return e;for(var t=0,o=e.actions.length;t<o;t++){var r=e.actions[t];r.id&&(r.id=r.id.toString(),n.push(r))}return e.actions=n,e},LocalNotificationsMock.prototype.convertTrigger=function(e){var n=e.trigger||{},t=this.getValueFor(n,"at","firstAt","date"),o=function(e){var n="object"==typeof e?e.getTime():e;return Math.round(n)};if(!e.trigger)return e;n.type||(n.type=n.center?"location":"calendar");var r="calendar"==n.type;return r&&!t&&(t=this.getValueFor(e,"at","firstAt","date")),r&&!n.every&&e.every&&(n.every=e.every),r&&(n.in||n.every)&&(t=null),r&&t&&(n.at=o(t)),r&&n.firstAt&&(n.firstAt=o(n.firstAt)),r&&n.before&&(n.before=o(n.before)),r&&n.after&&(n.after=o(n.after)),n.count||(n.count=n.every?5:1),r||(n.notifyOnEntry=!!n.notifyOnEntry,n.notifyOnExit=!0===n.notifyOnExit,n.radius=n.radius||5,n.single=!!n.single),r&&!n.at||delete n.every,delete e.every,delete e.at,delete e.firstAt,delete e.date,e.trigger=n,e},LocalNotificationsMock.prototype.convertProgressBar=function(e){var n=e.progressBar;return void 0===n?e:("boolean"==typeof n&&(n=e.progressBar={enabled:n}),"boolean"!=typeof n.enabled&&(n.enabled=!(!n.value&&!n.maxValue&&null===n.indeterminate)),n.value=n.value||0,n.enabled=!!n.enabled,n.enabled&&!0===e.clock&&(e.clock="chronometer"),e)},LocalNotificationsMock.prototype.fireEvent=function(e,n){this.observers[e]&&this.observers[e].next(n)},LocalNotificationsMock.prototype.fireQueuedEvents=function(){return Promise.resolve()},LocalNotificationsMock.prototype.get=function(e){return Promise.resolve(this.getNotifications([Number(e)],!0,!0)[0])},LocalNotificationsMock.prototype.getAll=function(){return Promise.resolve(this.getNotifications(void 0,!0,!0))},LocalNotificationsMock.prototype.getDefaults=function(){return Promise.resolve(this.defaults)},LocalNotificationsMock.prototype.getIds=function(){var e=this.utils.mergeArraysWithoutDuplicates(Object.keys(this.scheduled),Object.keys(this.triggered));return e=e.map(function(e){return Number(e)}),Promise.resolve(e)},LocalNotificationsMock.prototype.getAllNotifications=function(){return B(this,void 0,void 0,function(){var e,n=this;return V(this,function(t){switch(t.label){case 0:return[4,this.dbReady];case 1:return t.sent(),[4,this.appDB.getAllRecords(this.DESKTOP_NOTIFS_TABLE)];case 2:return(e=t.sent()).forEach(function(e){e.trigger={at:new Date(e.at)},e.data=n.textUtils.parseJSON(e.data),e.triggered=!!e.triggered,n.mergeWithDefaults(e)}),[2,e]}})})},LocalNotificationsMock.prototype.getScheduled=function(){return Promise.resolve(this.getNotifications(void 0,!0,!1))},LocalNotificationsMock.prototype.getTriggered=function(){return Promise.resolve(this.getNotifications(void 0,!1,!0))},LocalNotificationsMock.prototype.getNotifications=function(e,n,t){var o=[];if(n)for(var r in this.scheduled)e&&-1==e.indexOf(Number(r))||o.push(this.scheduled[r].notification);if(t)for(var r in this.triggered)n&&this.scheduled[r]||e&&-1==e.indexOf(Number(r))||o.push(this.triggered[r].notification);return o},LocalNotificationsMock.prototype.getNotificationTriggerAt=function(e){var n=e.trigger&&e.trigger.at||new Date;return"number"!=typeof n?n.getTime():n},LocalNotificationsMock.prototype.getScheduledIds=function(){var e=Object.keys(this.scheduled).map(function(e){return Number(e)});return Promise.resolve(e)},LocalNotificationsMock.prototype.getTriggeredIds=function(){var e=Object.keys(this.triggered).map(function(e){return Number(e)});return Promise.resolve(e)},LocalNotificationsMock.prototype.getType=function(e){return this.scheduled[e]?Promise.resolve("scheduled"):this.triggered[e]?Promise.resolve("triggered"):Promise.resolve("unknown")},LocalNotificationsMock.prototype.getValueFor=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];for(var o in n){var r=n[o];if(e.hasOwnProperty(r))return e[r]}},LocalNotificationsMock.prototype.hasActions=function(e){return Promise.resolve(!1)},LocalNotificationsMock.prototype.hasPermission=function(){return Promise.resolve(!0)},LocalNotificationsMock.prototype.hasType=function(e,n){return this.getType(e).then(function(e){return n==e})},LocalNotificationsMock.prototype.isPresent=function(e){return Promise.resolve(!!this.scheduled[e]||!!this.triggered[e])},LocalNotificationsMock.prototype.isScheduled=function(e){return Promise.resolve(!!this.scheduled[e])},LocalNotificationsMock.prototype.isTriggered=function(e){return Promise.resolve(!!this.triggered[e])},LocalNotificationsMock.prototype.load=function(){var e=this;if(!this.appProvider.isDesktop())return Promise.resolve();if(this.appProvider.isWindows())try{this.winNotif=t(!function webpackMissingModule(){var e=new Error('Cannot find module "electron-windows-notifications"');throw e.code="MODULE_NOT_FOUND",e}())}catch(e){}return this.getAllNotifications().catch(function(){return[]}).then(function(n){n.forEach(function(n){n.triggered?(delete n.triggered,e.scheduled[n.id]={notification:n},e.triggered[n.id]=n):(delete n.triggered,n.at=1e3*n.at,n.at-Date.now()>1e3*-H.a.SECONDS_HOUR&&e.schedule(n))})})},LocalNotificationsMock.prototype.mergeWithDefaults=function(e){var n=this.getDefaults();n.hasOwnProperty("sticky")&&(e.sticky=this.getValueFor(e,"sticky","ongoing")),e.sticky&&!0!==e.autoClear&&(e.autoClear=!1),Object.assign(n,e);for(var t in n)null!==n[t]?e[t]=n[t]:delete e[t];return e},LocalNotificationsMock.prototype.notificationClicked=function(e){this.fireEvent("click",e),t(132).ipcRenderer.send("focusApp")},LocalNotificationsMock.prototype.on=function(e){return this.observers[e]},LocalNotificationsMock.prototype.parseInterval=function(e){var n;return(e=String(e).toLowerCase())&&"undefined"!=e?"second"==e?n=1e3:"minute"==e?n=1e3*H.a.SECONDS_MINUTE:"hour"==e?n=1e3*H.a.SECONDS_HOUR:"day"==e?n=1e3*H.a.SECONDS_DAY:"week"==e?n=7*H.a.SECONDS_DAY*1e3:"month"==e?n=31*H.a.SECONDS_DAY*1e3:"quarter"==e?n=2190*H.a.SECONDS_HOUR*1e3:"year"==e?n=1e3*H.a.SECONDS_YEAR:(n=parseInt(e,10),isNaN(n)?n=0:n*=6e4):n=0,n},LocalNotificationsMock.prototype.removeActions=function(e){return Promise.reject("Not supported in desktop apps.")},LocalNotificationsMock.prototype.removeNotification=function(e){return B(this,void 0,void 0,function(){return V(this,function(n){switch(n.label){case 0:return[4,this.dbReady];case 1:return n.sent(),[2,this.appDB.deleteRecords(this.DESKTOP_NOTIFS_TABLE,{id:e})]}})})},LocalNotificationsMock.prototype.requestPermission=function(){return Promise.resolve(!0)},LocalNotificationsMock.prototype.schedule=function(e){this.scheduleOrUpdate(e)},LocalNotificationsMock.prototype.scheduleOrUpdate=function(e,n){var t=this;void 0===n&&(n="schedule"),(e=Array.isArray(e)?e:[e]).forEach(function(e){t.mergeWithDefaults(e),t.convertProperties(e),t.cancelNotification(e.id,!0,"cancel"),t.scheduled[e.id]={notification:e},t.storeNotification(e,!1);var o=t.getNotificationTriggerAt(e);if(!(Math.abs(N().diff(o,"days"))>15)){var r=o-Date.now();t.scheduled[e.id].timeout=setTimeout(function(){t.triggerNotification(e),t.triggered[e.id]=e,t.storeNotification(e,!0),t.fireEvent("trigger",e)},r),t.fireEvent(n,e)}})},LocalNotificationsMock.prototype.setDefaults=function(e){return this.defaults=e,Promise.resolve()},LocalNotificationsMock.prototype.storeNotification=function(e,n){return B(this,void 0,void 0,function(){var t;return V(this,function(o){switch(o.label){case 0:return[4,this.dbReady];case 1:return o.sent(),t={id:e.id,title:e.title,text:e.text,at:this.getNotificationTriggerAt(e),data:e.data?JSON.stringify(e.data):"{}",triggered:n?1:0},[2,this.appDB.insertRecord(this.DESKTOP_NOTIFS_TABLE,t)]}})})},LocalNotificationsMock.prototype.triggerNotification=function(e){var n=this;if(this.winNotif){(t=new this.winNotif.ToastNotification({appId:M.a.app_id,template:this.toastTemplate,strings:[e.title,e.text]})).on("activated",function(){n.notificationClicked(e)}),t.show();try{new this.winNotif.TileNotification({tag:e.id+"",template:this.tileTemplate,strings:[e.title,e.text,e.title,e.text,e.title,e.text],expirationTime:new Date(Date.now()+1e3*H.a.SECONDS_HOUR)}).show()}catch(e){console.warn("Error showing TileNotification. Please notice they only work with the app installed.",e)}}else{var t;(t=new Notification(e.title,{body:e.text})).onclick=function(){n.notificationClicked(e)}}},LocalNotificationsMock.prototype.update=function(e){return this.scheduleOrUpdate(e,"update")},LocalNotificationsMock}(m.a),K=function(e){function MediaCaptureMock(n){var t=e.call(this)||this;return t.captureHelper=n,t}return Object(o.__extends)(MediaCaptureMock,e),MediaCaptureMock.prototype.captureAudio=function(e){return this.captureHelper.captureMedia("audio",e)},MediaCaptureMock.prototype.captureImage=function(e){return this.captureHelper.captureMedia("captureimage",e)},MediaCaptureMock.prototype.captureVideo=function(e){return this.captureHelper.captureMedia("video",e)},MediaCaptureMock}(_.a),q=function(e){function NetworkMock(){var n=e.call(this)||this;return window.Connection={UNKNOWN:"unknown",ETHERNET:"ethernet",WIFI:"wifi",CELL_2G:"2g",CELL_3G:"3g",CELL_4G:"4g",CELL:"cellular",NONE:"none"},n}return Object(o.__extends)(NetworkMock,e),NetworkMock.prototype.onchange=function(){return D.Observable.merge(this.onConnect(),this.onDisconnect())},NetworkMock.prototype.onConnect=function(){var e=new D.Subject;return window.addEventListener("online",function(n){e.next(n)},!1),e},NetworkMock.prototype.onDisconnect=function(){var e=new D.Subject;return window.addEventListener("offline",function(n){e.next(n)},!1),e},NetworkMock}(g.a),G=t(13),j=function(){function PushMock(e){this.appProvider=e}return PushMock.prototype.init=function(e){return new Q(this.appProvider)},PushMock.prototype.hasPermission=function(){return Promise.reject("hasPermission is only supported in mobile devices")},PushMock.prototype.createChannel=function(e){return Promise.reject("createChannel is only supported in mobile devices")},PushMock.prototype.deleteChannel=function(e){return Promise.reject("deleteChannel is only supported in mobile devices")},PushMock.prototype.listChannels=function(){return Promise.reject("listChannels is only supported in mobile devices")},PushMock}(),Q=function(e){function PushObjectMock(n){var t=e.call(this,{})||this;return t.appProvider=n,t}return Object(o.__extends)(PushObjectMock,e),PushObjectMock.prototype.on=function(e){return G.Observable.empty()},PushObjectMock.prototype.unregister=function(){return Promise.reject("unregister is only supported in mobile devices")},PushObjectMock.prototype.setApplicationIconBadgeNumber=function(e){if(!this.appProvider.isDesktop())return Promise.reject("setApplicationIconBadgeNumber is not supported in browser");try{return t(132).remote.app.setBadgeCount(e)?Promise.resolve():Promise.reject(null)}catch(e){return Promise.reject(e)}},PushObjectMock.prototype.getApplicationIconBadgeNumber=function(){if(!this.appProvider.isDesktop())return Promise.reject("getApplicationIconBadgeNumber is not supported in browser");try{var e=t(132).remote.app;return Promise.resolve(e.getBadgeCount())}catch(e){return Promise.reject(e)}},PushObjectMock.prototype.finish=function(e){return Promise.reject("finish is only supported in mobile devices")},PushObjectMock.prototype.clearAllNotifications=function(){return Promise.reject("clearAllNotifications is only supported in mobile devices")},PushObjectMock.prototype.subscribe=function(e){return Promise.reject("subscribe is only supported in mobile devices")},PushObjectMock.prototype.unsubscribe=function(e){return Promise.reject("unsubscribe is only supported in mobile devices")},PushObjectMock}(v.b),z=t(1914),$=function(e){function ZipMock(n,t){var o=e.call(this)||this;return o.file=n,o.textUtils=t,o}return Object(o.__extends)(ZipMock,e),ZipMock.prototype.createDir=function(e,n){for(var t=this,o=n.split("/"),r=Promise.resolve(),i=function(n){var i=o[n];r=r.then(function(){return t.file.createDir(e,i,!0).then(function(){e=t.textUtils.concatenatePaths(e,i)})})},l=0;l<o.length;l++)i(l);return r},ZipMock.prototype.unzip=function(e,n,t){var o=this;e=e.replace(/%20/g," "),n=n.replace(/%20/g," ");var r=e.substring(0,e.lastIndexOf("/")),i=e.substr(e.lastIndexOf("/")+1),l=new z;return this.file.readAsArrayBuffer(r,i).then(function(e){return l.loadAsync(e)}).then(function(){if(!l.files||!Object.keys(l.files).length)return 0;var e=n.substring(0,n.lastIndexOf("/")),t=n.substr(n.lastIndexOf("/")+1);return o.file.createDir(e,t,!0)}).then(function(){var e=[],r=Object.keys(l.files).length,i=0,s=function(s){var a=l.files[s],u=void 0;if(a.dir)u=o.createDir(n,s);else{var d,c=s.substring(0,s.lastIndexOf("/")),p=s.substr(s.lastIndexOf("/")+1),f=[];c&&f.push(o.createDir(n,c)),f.push(a.async("blob").then(function(e){d=e})),u=Promise.all(f).then(function(){var e=o.textUtils.concatenatePaths(n,c);return o.file.writeFile(e,p,d,{replace:!0})})}e.push(u.then(function(){i++,t&&t({loaded:i,total:r})}))};for(var a in l.files)s(a);return Promise.all(e).then(function(){return 0})}).catch(function(){return-1})},ZipMock}(b.a);t(310),t(155);t.d(n,"b",function(){return Y}),t.d(n,"a",function(){return ce}),t.d(n,"c",function(){return X}),t.d(n,"d",function(){return J}),t.d(n,"i",function(){return Z}),t.d(n,"j",function(){return ee}),t.d(n,"k",function(){return ne}),t.d(n,"l",function(){return te}),t.d(n,"m",function(){return oe}),t.d(n,"n",function(){return re}),t.d(n,"o",function(){return ie}),t.d(n,"p",function(){return le}),t.d(n,"e",function(){return se}),t.d(n,"f",function(){return ae}),t.d(n,"g",function(){return ue}),t.d(n,"h",function(){return de});var Y=[r.a,i.a,l.a,s.a,a.a,u.a,d.a,c.a,p.a,f.a,h.a,m.a,_.a,g.a,v.a,C.a,y.a,P.a,A.a,b.a],X=function(e){return e.isMobile()?new r.a:new I(e)},J=function(e,n){return e.isMobile()?new i.a:new S(n)},Z=function(e){return e.isMobile()?new l.a:new E(e)},ee=function(e,n,t){return e.isMobile()?new a.a:new k(e,n,t)},ne=function(e){return e.isMobile()?new u.a:new T(e)},te=function(e,n){return e.isMobile()?new d.a:new O.b(e,n)},oe=function(e){return e.isMobile()?new c.a:new x},re=function(e){return e.isMobile()?new p.a:new L(e)},ie=function(e,n,t){return e.isDesktop()?new R(e,n,t):new f.a},le=function(e,n,t){return e.isMobile()?new m.a:new W(e,n,t)},se=function(e,n){return e.isMobile()?new _.a:new K(n)},ae=function(e){return e.is("cordova")?new g.a:new q},ue=function(e){return e.isMobile()?new v.a:new j(e)},de=function(e,n,t){return e.isMobile()?new b.a:new $(n,t)},ce=function(){return function CoreEmulatorModule(e,n,o,r){var i=window;e.isDesktop()&&(t(132).ipcRenderer.on("coreAppLaunched",function(e,n){void 0!==i.handleOpenURL&&i.handleOpenURL(n)}),t(132).ipcRenderer.on("coreAppFocused",function(){r.resume.emit()})),e.isMobile()||n.registerProcess(o)}}()},,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0);var o=[t(216).a],r=function(){return function CoreEditorModule(e){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0);var o=[t(283).a],r=function(){return function CoreSearchModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(53);var o=function(){function CoreCoursesCourseOptionsMenuComponent(e,n,t){this.viewCtrl=n,this.coursesProvider=t,this.course=e.get("course")||{},this.prefetch=e.get("prefetch")||{}}return CoreCoursesCourseOptionsMenuComponent.prototype.ngOnInit=function(){this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite()},CoreCoursesCourseOptionsMenuComponent.prototype.action=function(e){this.viewCtrl.dismiss(e)},CoreCoursesCourseOptionsMenuComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return i});t(0);var o=t(284),r=(t(1124),t(1125),t(1126),t(1127),[o.a]),i=function(){return function AddonBadgesModule(e,n,t,o,r,i,l){e.registerHandler(n),t.registerHandler(o),t.registerHandler(r),i.registerClickHandler(l)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var o=t(187),r=t(275),i=t(276),l=t(478),s=(t(1128),t(1129),t(1130),[o.a,r.a,i.a,l.a]),a=function(){return function AddonCalendarModule(e,n,t,r,i,l,s,a,u,d){e.registerHandler(n),s.register(a),u.registerHandler(d),t.ready().then(function(){r.scheduleAllSitesEventsNotifications()}),l.registerClick(o.a.COMPONENT,function(e){e.eventid&&t.ready().then(function(){r.isDisabled(e.siteId).then(function(n){n||r.canViewMonth(e.siteId).then(function(n){i.redirect(n?"AddonCalendarIndexPage":"AddonCalendarListPage",{eventId:e.eventid},e.siteId)})})})})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});t(0);var o=t(166),r=t(375),i=(t(1131),t(1132),t(1133),t(1134),t(1135),t(1136),t(1137),t(1138),[o.a,r.a]),l=function(){return function AddonCompetencyModule(e,n,t,o,r,i,l,s,a,u,d,c,p){e.registerHandler(n),t.registerHandler(o),r.registerHandler(i),l.registerHandler(s),l.registerHandler(a),l.registerHandler(u),l.registerHandler(d),c.registerClickHandler(p)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});t(0);var o=t(389),r=t(753),i=(t(1139),[o.a,r.a]),l=function(){return function AddonFilesModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o}),t.d(n,"b",function(){return r});t(0);var o=[t(393).a],r=function(){return function AddonMessageOutputModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0),t(186);var o=t(162),r=t(380),i=t(503),l=(t(1140),t(1141),t(632),t(633),t(1142),t(1143),t(1144),t(1145),t(1146),t(1147),[o.a,r.a,i.a]),s=function(){return function AddonMessagesModule(e,n,t,r,i,l,s,a,u,d,c,p,f,h,m,_,g,v,C,y,P,A,b,I,S){e.registerHandler(n),t.registerHandler(r),t.registerHandler(i),t.registerHandler(I),s.registerHandler(l),s.registerHandler(A),s.registerHandler(b),a.register(u),a.register(n),C.registerHandler(v),y.registerClickHandler(S),d.onConnect().subscribe(function(){c.run(function(){p.syncAllDiscussions(void 0,!0)})});var E=function(e){m.isMessagingEnabledForSite(e.site).then(function(){_.isFeatureDisabled("CoreMainMenuDelegate_AddonMessages",e.site).then(function(n){n||m.invalidateDiscussionsCache(e.site).finally(function(){m.isGroupMessagingEnabledInSite(e.site).then(function(n){var t={},o="AddonMessagesIndexPage";n&&(o="AddonMessagesGroupConversationsPage"),e.convid&&n?t.conversationId=Number(e.convid):(e.userfromid||e.useridfrom)&&(t.discussionUserId=Number(e.userfromid||e.useridfrom)),g.goInSite(void 0,o,t,e.site)})})})})};f.isDesktop()&&h.registerClick(o.a.PUSH_SIMULATION_COMPONENT,E)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(105),r=(t(162),t(633)),i=(t(4),function(){function AddonMessagesAddContactUserHandler(e,n,t,i,l){var s=this;this.sitesProvider=e,this.messagesProvider=n,this.eventsProvider=t,this.domUtils=i,this.translate=l,this.name="AddonMessages:addContact",this.priority=800,this.type=o.a.TYPE_ACTION,this.disabled=!1,this.updateObs=t.on(r.a.UPDATED_EVENT,function(e){s.checkButton(e.userId)})}return e=AddonMessagesAddContactUserHandler,AddonMessagesAddContactUserHandler.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},AddonMessagesAddContactUserHandler.prototype.isEnabledForUser=function(e,n,t,o){return e.id!=this.sitesProvider.getCurrentSiteUserId()},AddonMessagesAddContactUserHandler.prototype.getDisplayData=function(n,t){var o=this;return this.checkButton(n.id),{icon:"",title:"",spinner:!1,class:"",action:function(n,t,r,i){n.preventDefault(),n.stopPropagation(),o.disabled||(o.disabled=!0,o.updateButton(r.id,{spinner:!0}),o.messagesProvider.isContact(r.id).then(function(e){if(e){var n=o.translate.instant("addon.messages.removecontactconfirm",{$a:r.fullname}),t=o.translate.instant("core.remove");return o.domUtils.showConfirm(n,void 0,t).then(function(){return o.messagesProvider.removeContact(r.id)})}return o.addContact(r)}).catch(function(e){o.domUtils.showErrorModalDefault(e,"core.error",!0)}).finally(function(){o.eventsProvider.trigger(e.UPDATED_EVENT,{userId:r.id}),o.checkButton(r.id).finally(function(){o.disabled=!1})}))}}},AddonMessagesAddContactUserHandler.prototype.checkButton=function(e){var n=this;this.updateButton(e,{spinner:!0});var t=this.messagesProvider.isGroupMessagingEnabled();return this.messagesProvider.isContact(e).then(function(o){n.updateButton(e,o?{title:t?"addon.messages.removefromyourcontacts":"addon.messages.removecontact",class:"addon-messages-removecontact-handler",icon:"remove",hidden:!1,spinner:!1}:{title:t?"addon.messages.addtoyourcontacts":"addon.messages.addcontact",class:"addon-messages-addcontact-handler",icon:"add",hidden:!1,spinner:!1})}).catch(function(){n.updateButton(e,{hidden:!0})})},AddonMessagesAddContactUserHandler.prototype.updateButton=function(e,n){this.eventsProvider.trigger(o.a.UPDATE_HANDLER_EVENT,{handler:this.name,data:n,userId:e})},AddonMessagesAddContactUserHandler.prototype.addContact=function(e){var n=this;return this.messagesProvider.isGroupMessagingEnabled()?this.messagesProvider.getMemberInfo(e.id).then(function(t){var o=n.sitesProvider.getCurrentSiteUserId();if(t.contactrequests.some(function(n){return n.userid==o&&n.requesteduserid==e.id})){var r=n.translate.instant("addon.messages.yourcontactrequestpending",{$a:e.fullname});return n.domUtils.showAlert(null,r)}var i=n.translate.instant("addon.messages.addcontactconfirm",{$a:e.fullname}),l=n.translate.instant("core.add");return n.domUtils.showConfirm(i,void 0,l).then(function(){return n.messagesProvider.createContactRequest(e.id)}).then(function(){var e=n.translate.instant("addon.messages.contactrequestsent");return n.domUtils.showAlert(null,e)})}):this.messagesProvider.addContact(e.id)},AddonMessagesAddContactUserHandler.prototype.ngOnDestroy=function(){this.updateObs&&this.updateObs.off()},AddonMessagesAddContactUserHandler.UPDATED_EVENT="AddonMessagesAddContactUserHandler_updated_event",AddonMessagesAddContactUserHandler;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(105),r=(t(162),t(632)),i=(t(4),function(){function AddonMessagesBlockContactUserHandler(e,n,t,i,l){var s=this;this.sitesProvider=e,this.messagesProvider=n,this.eventsProvider=t,this.domUtils=i,this.translate=l,this.name="AddonMessages:blockContact",this.priority=600,this.type=o.a.TYPE_ACTION,this.disabled=!1,this.updateObs=t.on(r.a.UPDATED_EVENT,function(e){s.checkButton(e.userId)})}return e=AddonMessagesBlockContactUserHandler,AddonMessagesBlockContactUserHandler.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},AddonMessagesBlockContactUserHandler.prototype.isEnabledForUser=function(e,n,t,o){return e.id!=this.sitesProvider.getCurrentSiteUserId()},AddonMessagesBlockContactUserHandler.prototype.getDisplayData=function(n,t){var o=this;return this.checkButton(n.id),{icon:"",title:"",spinner:!1,class:"",action:function(n,t,r,i){n.preventDefault(),n.stopPropagation(),o.disabled||(o.disabled=!0,o.updateButton(r.id,{spinner:!0}),o.messagesProvider.isBlocked(r.id).then(function(e){if(e){var n=o.translate.instant("addon.messages.unblockuserconfirm",{$a:r.fullname}),t=o.translate.instant("addon.messages.unblockuser");return o.domUtils.showConfirm(n,void 0,t).then(function(){return o.messagesProvider.unblockContact(r.id)})}n=o.translate.instant("addon.messages.blockuserconfirm",{$a:r.fullname}),t=o.translate.instant("addon.messages.blockuser");return o.domUtils.showConfirm(n,void 0,t).then(function(){return o.messagesProvider.blockContact(r.id)})}).catch(function(e){o.domUtils.showErrorModalDefault(e,"core.error",!0)}).finally(function(){o.eventsProvider.trigger(e.UPDATED_EVENT,{userId:r.id}),o.checkButton(r.id).finally(function(){o.disabled=!1})}))}}},AddonMessagesBlockContactUserHandler.prototype.checkButton=function(e){var n=this;return this.updateButton(e,{spinner:!0}),this.messagesProvider.isBlocked(e).then(function(t){n.updateButton(e,t?{title:"addon.messages.unblockuser",class:"addon-messages-unblockcontact-handler",icon:"checkmark-circle",hidden:!1,spinner:!1}:{title:"addon.messages.blockuser",class:"addon-messages-blockcontact-handler",icon:"close-circle",hidden:!1,spinner:!1})}).catch(function(){n.updateButton(e,{hidden:!0})})},AddonMessagesBlockContactUserHandler.prototype.updateButton=function(e,n){this.eventsProvider.trigger(o.a.UPDATE_HANDLER_EVENT,{handler:this.name,data:n,userId:e})},AddonMessagesBlockContactUserHandler.prototype.ngOnDestroy=function(){this.updateObs&&this.updateObs.off()},AddonMessagesBlockContactUserHandler.UPDATED_EVENT="AddonMessagesBlockContactUserHandler_updated_event",AddonMessagesBlockContactUserHandler;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return u}),t.d(n,"b",function(){return d});t(0);var o=t(78),r=t(134),i=t(319),l=t(184),s=t(153),a=t(167),u=(t(585),t(590),t(1148),t(1149),t(1150),t(1151),t(1152),t(1153),t(1154),t(1160),[o.a,r.a,i.a,l.a,s.a,a.a]),d=function(){return function AddonModAssignModule(e,n,t,o,r,i,l,s,a,u,d){e.registerHandler(n),t.registerHandler(o),r.register(i),l.registerHandler(s),l.registerHandler(a),u.registerClickHandler(d)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=(t(322),function(e){function AddonModAssignSubmissionCommentsComponent(n){var t=e.call(this)||this;return t.commentsProvider=n,t.commentsEnabled=!n.areCommentsDisabledInSite(),t}return Object(o.__extends)(AddonModAssignSubmissionCommentsComponent,e),AddonModAssignSubmissionCommentsComponent.prototype.invalidate=function(){return this.commentsProvider.invalidateCommentsData("module",this.assign.cmid,"assignsubmission_comments",this.submission.id,"submission_comments")},AddonModAssignSubmissionCommentsComponent.prototype.showComments=function(e){this.commentsComponent&&this.commentsComponent.openComments(e)},AddonModAssignSubmissionCommentsComponent}(t(636).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModAssignSubmissionPluginComponent(){}return AddonModAssignSubmissionPluginComponent.prototype.invalidate=function(){return Promise.resolve()},AddonModAssignSubmissionPluginComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(78),r=(t(134),t(184),t(638)),i=function(){function AddonModAssignSubmissionFileHandler(e,n,t,o,r,i,l){this.assignProvider=e,this.assignOfflineProvider=n,this.assignHelper=t,this.fileSessionProvider=o,this.fileUploaderProvider=r,this.fileHelper=i,this.utils=l,this.name="AddonModAssignSubmissionFileHandler",this.type="file"}return e=AddonModAssignSubmissionFileHandler,AddonModAssignSubmissionFileHandler.prototype.canEditOffline=function(e,n,t){return!0},AddonModAssignSubmissionFileHandler.prototype.isEmpty=function(e,n){return 0===this.assignProvider.getSubmissionPluginAttachments(n).length},AddonModAssignSubmissionFileHandler.prototype.clearTmpData=function(e,n,t,r){var i=this.fileSessionProvider.getFiles(o.a.COMPONENT,e.id);this.fileSessionProvider.clearFiles(o.a.COMPONENT,e.id),this.fileUploaderProvider.clearTmpFiles(i)},AddonModAssignSubmissionFileHandler.prototype.copySubmissionData=function(e,n,t,o,r){var i=this.assignProvider.getSubmissionPluginAttachments(n);return this.assignHelper.uploadFiles(e.id,i).then(function(e){t.files_filemanager=e})},AddonModAssignSubmissionFileHandler.prototype.getComponent=function(e,n,t){return r.a},AddonModAssignSubmissionFileHandler.prototype.deleteOfflineData=function(n,t,o,r,i){return this.assignHelper.deleteStoredSubmissionFiles(n.id,e.FOLDER_NAME,t.userid,i).catch(function(){})},AddonModAssignSubmissionFileHandler.prototype.getPluginFiles=function(e,n,t,o){return this.assignProvider.getSubmissionPluginAttachments(t)},AddonModAssignSubmissionFileHandler.prototype.getSizeForCopy=function(e,n){var t=this.assignProvider.getSubmissionPluginAttachments(n);return this.fileHelper.getTotalFilesSize(t)},AddonModAssignSubmissionFileHandler.prototype.getSizeForEdit=function(e,n,t,r){if(this.hasDataChanged(e,n,t,r)){var i=this.fileSessionProvider.getFiles(o.a.COMPONENT,e.id);return this.fileHelper.getTotalFilesSize(i)}return 0},AddonModAssignSubmissionFileHandler.prototype.hasDataChanged=function(e,n,t,r){var i=this;return this.assignOfflineProvider.getSubmission(e.id,n.userid).catch(function(){}).then(function(e){if(e&&e.plugindata&&e.plugindata.files_filemanager)return e.plugindata.files_filemanager.offline+e.plugindata.files_filemanager.online.length;var n=i.assignProvider.getSubmissionPluginAttachments(t);return n&&n.length}).then(function(n){var t=i.fileSessionProvider.getFiles(o.a.COMPONENT,e.id);if(t.length!=n)return!0;for(var r=0;r<t.length;r++){var l=t[r];if(!l.filename&&void 0!==l.name&&!l.offline)return!0}return!1})},AddonModAssignSubmissionFileHandler.prototype.isEnabled=function(){return!0},AddonModAssignSubmissionFileHandler.prototype.isEnabledForEdit=function(){return!0},AddonModAssignSubmissionFileHandler.prototype.prepareSubmissionData=function(n,t,r,i,l,s,a,u){if(this.hasDataChanged(n,t,r,i)){var d=this.fileSessionProvider.getFiles(o.a.COMPONENT,n.id),c=this.utils.hasRepeatedFilenames(d);return c?Promise.reject(c):this.assignHelper.uploadOrStoreFiles(n.id,e.FOLDER_NAME,d,s,a,u).then(function(e){l.files_filemanager=e})}},AddonModAssignSubmissionFileHandler.prototype.prepareSyncData=function(n,t,o,r,i,l){var s=this,a=r&&r.plugindata&&r.plugindata.files_filemanager;if(a){var u=a.online||[];return(a.offline?this.assignHelper.getStoredSubmissionFiles(n.id,e.FOLDER_NAME,t.userid,l).then(function(e){u=u.concat(e)}).catch(function(){}):Promise.resolve()).then(function(){return s.assignHelper.uploadFiles(n.id,u,l).then(function(e){i.files_filemanager=e})})}},AddonModAssignSubmissionFileHandler.FOLDER_NAME="submission_file",AddonModAssignSubmissionFileHandler;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(78),i=(t(184),t(134),t(637)),l=function(e){function AddonModAssignSubmissionFileComponent(n,t,o,i,l){var s=e.call(this)||this;return s.fileSessionprovider=n,s.assignProvider=t,s.assignOfflineProvider=o,s.assignHelper=i,s.fileUploaderProvider=l,s.component=r.a.COMPONENT,s}return Object(o.__extends)(AddonModAssignSubmissionFileComponent,e),AddonModAssignSubmissionFileComponent.prototype.ngOnInit=function(){var e=this;this.assignOfflineProvider.getSubmission(this.assign.id).catch(function(){}).then(function(n){if(n&&n.plugindata&&n.plugindata.files_filemanager){return(n.plugindata.files_filemanager.offline?e.assignHelper.getStoredSubmissionFiles(e.assign.id,i.a.FOLDER_NAME):Promise.resolve([])).then(function(t){var o=n.plugindata.files_filemanager.online||[];t=e.fileUploaderProvider.markOfflineFiles(t),e.files=o.concat(t)})}e.files=e.assignProvider.getSubmissionPluginAttachments(e.plugin)}).finally(function(){e.fileSessionprovider.setFiles(e.component,e.assign.id,e.files)})},AddonModAssignSubmissionFileComponent}(t(636).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(78),i=(t(134),function(e){function AddonModAssignSubmissionOnlineTextComponent(n,t,o,i,l,s,a){var u=e.call(this)||this;return u.fb=n,u.domUtils=t,u.textUtils=o,u.assignProvider=i,u.assignOfflineProvider=l,u.component=r.a.COMPONENT,u.element=s.nativeElement,u.currentUserId=a.getCurrentSiteUserId(),u}return Object(o.__extends)(AddonModAssignSubmissionOnlineTextComponent,e),AddonModAssignSubmissionOnlineTextComponent.prototype.ngOnInit=function(){var e=this;this.assignOfflineProvider.getSubmission(this.assign.id).catch(function(){}).then(function(n){return n&&n.plugindata&&n.plugindata.onlinetext_editor?n.plugindata.onlinetext_editor.text:e.assignProvider.getSubmissionPluginText(e.plugin)}).then(function(n){e.wordLimitEnabled=!!parseInt(e.configs.wordlimitenabled,10),e.text=n,e.edit?e.control=e.fb.control(n):e.element.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),n&&e.textUtils.expandText(e.plugin.name,n,e.component,e.assign.cmid,void 0,!0,"module",e.assign.cmid,e.assign.course)}),e.wordLimitEnabled&&(e.words=e.textUtils.countWords(n))}).finally(function(){e.loaded=!0})},AddonModAssignSubmissionOnlineTextComponent.prototype.onChange=function(e){var n=this;this.wordLimitEnabled&&(clearTimeout(this.wordCountTimeout),this.wordCountTimeout=setTimeout(function(){n.words=n.textUtils.countWords(e)},1500))},AddonModAssignSubmissionOnlineTextComponent}(t(636).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(78),t(134);var o=t(641),r=function(){function AddonModAssignFeedbackCommentsHandler(e,n,t,o){this.sitesProvider=e,this.textUtils=n,this.assignProvider=t,this.assignOfflineProvider=o,this.name="AddonModAssignFeedbackCommentsHandler",this.type="comments",this.drafts={}}return e=AddonModAssignFeedbackCommentsHandler,AddonModAssignFeedbackCommentsHandler.prototype.discardDraft=function(e,n,t){var o=this.getDraftId(e,n,t);void 0!==this.drafts[o]&&delete this.drafts[o]},AddonModAssignFeedbackCommentsHandler.prototype.getComponent=function(e,n){return o.a},AddonModAssignFeedbackCommentsHandler.prototype.getDraft=function(e,n,t){var o=this.getDraftId(e,n,t);if(void 0!==this.drafts[o])return this.drafts[o]},AddonModAssignFeedbackCommentsHandler.prototype.getDraftId=function(e,n,t){return(t=t||this.sitesProvider.getCurrentSiteId())+"#"+e+"#"+n},AddonModAssignFeedbackCommentsHandler.prototype.getPluginFiles=function(e,n,t,o){return this.assignProvider.getSubmissionPluginAttachments(t)},AddonModAssignFeedbackCommentsHandler.getTextFromInputData=function(e,n,t){var o=t.assignfeedbackcomments_editor;return o&&o.text&&(o=o.text),e.restorePluginfileUrls(o,n.fileareas&&n.fileareas[0]?n.fileareas[0].files:[])},AddonModAssignFeedbackCommentsHandler.prototype.hasDataChanged=function(n,t,o,r,i){var l=this;return this.assignOfflineProvider.getSubmissionGrade(n.id,i).catch(function(){}).then(function(e){return e&&e.plugindata&&e.plugindata.assignfeedbackcomments_editor?e.plugindata.assignfeedbackcomments_editor.text:l.assignProvider.getSubmissionPluginText(o)}).then(function(n){var t=e.getTextFromInputData(l.textUtils,o,r);return void 0!==t&&n!=t})},AddonModAssignFeedbackCommentsHandler.prototype.hasDraftData=function(e,n,t){return!!this.getDraft(e,n,t)},AddonModAssignFeedbackCommentsHandler.prototype.isEnabled=function(){return!0},AddonModAssignFeedbackCommentsHandler.prototype.prepareFeedbackData=function(e,n,t,o,r){var i=this.getDraft(e,n,r);i&&(i.text=this.textUtils.formatHtmlLines(i.text),o.assignfeedbackcomments_editor=i)},AddonModAssignFeedbackCommentsHandler.prototype.saveDraft=function(e,n,t,o,r){o&&(this.drafts[this.getDraftId(e,n,r)]=o)},AddonModAssignFeedbackCommentsHandler;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=(t(6),t(78)),i=(t(134),t(153),t(642)),l=t(640),s=function(e){function AddonModAssignFeedbackCommentsComponent(n,t,o,i,l,s,a,u){var d=e.call(this,n)||this;return d.domUtils=o,d.textUtils=i,d.assignOfflineProvider=l,d.assignProvider=s,d.fb=a,d.feedbackDelegate=u,d.component=r.a.COMPONENT,d.element=t.nativeElement,d}return Object(o.__extends)(AddonModAssignFeedbackCommentsComponent,e),AddonModAssignFeedbackCommentsComponent.prototype.ngOnInit=function(){var e=this;this.getText().then(function(n){e.text=n,e.canEdit||e.edit?e.edit&&(e.control=e.fb.control(n)):e.element.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.text&&e.textUtils.expandText(e.plugin.name,e.text,e.component,e.assign.cmid,void 0,!0,"module",e.assign.cmid,e.assign.course)})}).finally(function(){e.loaded=!0})},AddonModAssignFeedbackCommentsComponent.prototype.editComment=function(){var e=this;this.editFeedback().then(function(n){var t=l.a.getTextFromInputData(e.textUtils,e.plugin,n);e.isSent=!1,e.text=e.replacePluginfileUrls(t),e.feedbackDelegate.saveFeedbackDraft(e.assign.id,e.userId,e.plugin,{text:t,format:1})}).catch(function(){})},AddonModAssignFeedbackCommentsComponent.prototype.getText=function(){var e=this;return this.feedbackDelegate.getPluginDraftData(this.assign.id,this.userId,this.plugin).then(function(n){return n?(e.isSent=!1,e.replacePluginfileUrls(n.text)):e.assignOfflineProvider.getSubmissionGrade(e.assign.id,e.userId).catch(function(){}).then(function(n){return n&&n.plugindata&&n.plugindata.assignfeedbackcomments_editor?(e.isSent=!1,e.feedbackDelegate.saveFeedbackDraft(e.assign.id,e.userId,e.plugin,n.plugindata.assignfeedbackcomments_editor),e.replacePluginfileUrls(n.plugindata.assignfeedbackcomments_editor.text)):(e.isSent=!0,e.assignProvider.getSubmissionPluginText(e.plugin))})})},AddonModAssignFeedbackCommentsComponent.prototype.replacePluginfileUrls=function(e){return this.textUtils.replacePluginfileUrls(e,this.plugin.fileareas&&this.plugin.fileareas[0]&&this.plugin.fileareas[0].files||[])},AddonModAssignFeedbackCommentsComponent}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModAssignFeedbackPluginComponentBase(e){this.modalCtrl=e}return AddonModAssignFeedbackPluginComponentBase.prototype.editFeedback=function(){var e=this;return this.canEdit?new Promise(function(n,t){var o=e.modalCtrl.create("AddonModAssignEditFeedbackModalPage",{assign:e.assign,submission:e.submission,plugin:e.plugin,userId:e.userId});o.present(),o.onDidDismiss(function(e){void 0===e?t():n(e)})}):Promise.reject(null)},AddonModAssignFeedbackPluginComponentBase.prototype.invalidate=function(){return Promise.resolve()},AddonModAssignFeedbackPluginComponentBase}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(6),t(78)),i=function(e){function AddonModAssignFeedbackEditPdfComponent(n,t){var o=e.call(this,n)||this;return o.assignProvider=t,o.component=r.a.COMPONENT,o}return Object(o.__extends)(AddonModAssignFeedbackEditPdfComponent,e),AddonModAssignFeedbackEditPdfComponent.prototype.ngOnInit=function(){this.plugin&&(this.files=this.assignProvider.getSubmissionPluginAttachments(this.plugin))},AddonModAssignFeedbackEditPdfComponent}(t(642).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(6),t(78)),i=function(e){function AddonModAssignFeedbackFileComponent(n,t){var o=e.call(this,n)||this;return o.assignProvider=t,o.component=r.a.COMPONENT,o}return Object(o.__extends)(AddonModAssignFeedbackFileComponent,e),AddonModAssignFeedbackFileComponent.prototype.ngOnInit=function(){this.plugin&&(this.files=this.assignProvider.getSubmissionPluginAttachments(this.plugin))},AddonModAssignFeedbackFileComponent}(t(642).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return i});t(0);var o=t(221),r=(t(1166),t(1167),t(1168),t(398),t(1169),[o.a]),i=function(){return function AddonModBookModule(e,n,t,o,r,i,l,s,a){e.registerHandler(n),t.registerHandler(o),t.registerHandler(l),r.registerHandler(i),s.registerHandler(a)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return i});t(0);var o=t(279),r=(t(739),t(1170),t(1171),t(1172),t(1173),[o.a]),i=function(){return function AddonModChatModule(e,n,t,o,r,i,l){e.registerHandler(n),t.registerHandler(o),t.registerHandler(l),r.registerHandler(i)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0),t(1174);var o=t(294),r=(t(1175),t(1176),t(591),t(296)),i=(t(1177),t(295)),l=[o.a,r.a,i.a],s=function(){return function AddonModChoiceModule(e,n,t,o,r,i,l,s,a){e.registerHandler(n),t.registerHandler(o),r.registerHandler(i),r.registerHandler(a),l.register(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0),t(1178);var o=t(135),r=(t(1179),t(1180),t(1181),t(1182),t(1183),t(1184),t(1185),t(252)),i=(t(649),t(1186),t(285)),l=(t(1187),t(297)),s=[o.a,r.a,i.a,l.a],a=function(){return function AddonModFeedbackModule(e,n,t,o,r,i,l,s,a,u,d,c,p,f,h,m){e.registerHandler(n),t.registerHandler(o),r.registerHandler(i),r.registerHandler(a),r.registerHandler(u),r.registerHandler(d),r.registerHandler(c),r.registerHandler(p),r.registerHandler(f),l.register(s),h.registerClickHandler(m)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=(t(4),t(143)),i=t(135),l=(t(252),t(285)),s=function(e){function AddonModFeedbackPrefetchHandler(n,t,o,r,l,s,a,u,d,c,p,f,h,m){var _=e.call(this,n,t,o,r,l,s,a,u,d)||this;return _.feedbackProvider=c,_.feedbackHelper=p,_.timeUtils=f,_.groupsProvider=h,_.injector=m,_.name="AddonModFeedback",_.modName="feedback",_.component=i.a.COMPONENT,_.updatesNames=/^configuration$|^.*files$|^attemptsfinished|^attemptsunfinished$/,_}return Object(o.__extends)(AddonModFeedbackPrefetchHandler,e),AddonModFeedbackPrefetchHandler.prototype.getFiles=function(e,n,t){var o=this,r=[];return this.feedbackProvider.getFeedback(n,e.id).then(function(n){return r=n.pageaftersubmitfiles||[],r=r.concat(o.getIntroFilesFromInstance(e,n)),o.feedbackProvider.getItems(n.id)}).then(function(e){return e.items.forEach(function(e){r=r.concat(e.itemfiles)}),r}).catch(function(){return r})},AddonModFeedbackPrefetchHandler.prototype.getIntroFiles=function(e,n){var t=this;return this.feedbackProvider.getFeedback(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},AddonModFeedbackPrefetchHandler.prototype.invalidateContent=function(e,n){return this.feedbackProvider.invalidateContent(e,n)},AddonModFeedbackPrefetchHandler.prototype.invalidateModule=function(e,n){return this.feedbackProvider.invalidateFeedbackData(n)},AddonModFeedbackPrefetchHandler.prototype.isDownloadable=function(e,n){var t=this;return this.feedbackProvider.getFeedback(n,e.id,void 0,!0).then(function(e){var n=t.timeUtils.timestamp();return!(e.timeopen&&e.timeopen>n)&&(!(e.timeclose&&e.timeclose<n)&&t.feedbackProvider.getFeedbackAccessInformation(e.id).then(function(e){return e.isopen}))})},AddonModFeedbackPrefetchHandler.prototype.isEnabled=function(){return this.feedbackProvider.isPluginEnabled()},AddonModFeedbackPrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,t,this.prefetchFeedback.bind(this))},AddonModFeedbackPrefetchHandler.prototype.prefetchFeedback=function(e,n,t,o){var r=this;return this.feedbackProvider.getFeedback(n,e.id,o,!1,!0).then(function(n){var t=(n.pageaftersubmitfiles||[]).concat(r.getIntroFilesFromInstance(e,n));return r.feedbackProvider.getFeedbackAccessInformation(n.id,!1,!0,o).then(function(i){var l=[];return(i.canedititems||i.canviewreports)&&(l.push(r.feedbackProvider.getAnalysis(n.id,void 0,!0,o)),l.push(r.groupsProvider.getActivityGroupInfo(n.coursemodule,!0,void 0,o,!0).then(function(e){var t=[];return e.groups&&0!=e.groups.length||(e.groups=[{id:0}]),e.groups.forEach(function(e){t.push(r.feedbackProvider.getAnalysis(n.id,e.id,!0,o)),t.push(r.feedbackProvider.getAllResponsesAnalysis(n.id,e.id,!0,o)),i.isanonymous||t.push(r.feedbackProvider.getAllNonRespondents(n.id,e.id,!0,o))}),Promise.all(t)}))),l.push(r.feedbackProvider.getItems(n.id,!0,o).then(function(n){return n.items.forEach(function(e){t=t.concat(e.itemfiles)}),r.filepoolProvider.addFilesToQueue(o,t,r.component,e.id)})),i.cancomplete&&i.cansubmit&&!i.isempty&&l.push(r.feedbackProvider.processPageOnline(n.id,0,{},void 0,o).finally(function(){var e=[];return e.push(r.feedbackProvider.getCurrentValues(n.id,!1,!0,o)),e.push(r.feedbackProvider.getResumePage(n.id,!1,!0,o)),Promise.all(e)})),Promise.all(l)})})},AddonModFeedbackPrefetchHandler.prototype.sync=function(e,n,t){return this.syncProvider||(this.syncProvider=this.injector.get(l.a)),this.syncProvider.syncFeedback(e.instance,t)},AddonModFeedbackPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});t(0);var o=t(330),r=t(401),i=(t(1188),t(1189),t(1190),t(1191),t(1192),[o.a,r.a]),l=function(){return function AddonModFolderModule(e,n,t,o,r,i,l,s,a){e.registerHandler(n),t.registerHandler(o),r.registerHandler(i),r.registerHandler(a),l.registerHandler(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var o=t(136),r=t(233),i=t(280),l=t(254),s=(t(1193),t(402),t(1194),t(1195),t(1196),t(1197),t(1198),t(1199),t(1200),[o.a,r.a,i.a,l.a]),a=function(){return function AddonModForumModule(e,n,t,o,r,i,l,s,a,u,d,c,p,f,h){e.registerHandler(n),t.registerHandler(o),r.register(i),l.registerHandler(s),l.registerHandler(a),l.registerHandler(u),l.registerHandler(p),d.registerClickHandler(c),f.registerHandler(h)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(6);var o=t(136),r=function(){function AddonForumDiscussionOptionsMenuComponent(e,n,t,o,r,i){this.viewCtrl=n,this.forumProvider=t,this.domUtils=o,this.eventsProvider=r,this.sitesProvider=i,this.canPin=!1,this.discussion=e.get("discussion"),this.forumId=e.get("forumId"),this.cmId=e.get("cmId")}return AddonForumDiscussionOptionsMenuComponent.prototype.ngOnInit=function(){var e=this;this.forumProvider.isSetPinStateAvailableForSite()?this.forumProvider.canAddDiscussionToAll(this.forumId).then(function(n){e.canPin=!!n.canpindiscussions}).catch(function(){e.canPin=!1}):this.canPin=!1},AddonForumDiscussionOptionsMenuComponent.prototype.setLockState=function(e){var n=this,t=this.domUtils.showModalLoading("core.sending",!0);this.forumProvider.setLockState(this.forumId,this.discussion.discussion,e).then(function(t){n.viewCtrl.dismiss({action:"lock",value:e});n.eventsProvider.trigger(o.a.CHANGE_DISCUSSION_EVENT,{forumId:n.forumId,discussionId:n.discussion.discussion,cmId:n.cmId,locked:t.locked},n.sitesProvider.getCurrentSiteId()),n.domUtils.showToast("addon.mod_forum.lockupdated",!0)}).catch(function(e){n.domUtils.showErrorModal(e),n.viewCtrl.dismiss()}).finally(function(){t.dismiss()})},AddonForumDiscussionOptionsMenuComponent.prototype.setPinState=function(e){var n=this,t=this.domUtils.showModalLoading("core.sending",!0);this.forumProvider.setPinState(this.discussion.discussion,e).then(function(){n.viewCtrl.dismiss({action:"pin",value:e});n.eventsProvider.trigger(o.a.CHANGE_DISCUSSION_EVENT,{forumId:n.forumId,discussionId:n.discussion.discussion,cmId:n.cmId,pinned:e},n.sitesProvider.getCurrentSiteId()),n.domUtils.showToast("addon.mod_forum.pinupdated",!0)}).catch(function(e){n.domUtils.showErrorModal(e),n.viewCtrl.dismiss()}).finally(function(){t.dismiss()})},AddonForumDiscussionOptionsMenuComponent.prototype.toggleFavouriteState=function(e){var n=this,t=this.domUtils.showModalLoading("core.sending",!0);this.forumProvider.toggleFavouriteState(this.discussion.discussion,e).then(function(){n.viewCtrl.dismiss({action:"star",value:e});n.eventsProvider.trigger(o.a.CHANGE_DISCUSSION_EVENT,{forumId:n.forumId,discussionId:n.discussion.discussion,cmId:n.cmId,starred:e},n.sitesProvider.getCurrentSiteId()),n.domUtils.showToast("addon.mod_forum.favouriteupdated",!0)}).catch(function(e){n.domUtils.showErrorModal(e),n.viewCtrl.dismiss()}).finally(function(){t.dismiss()})},AddonForumDiscussionOptionsMenuComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(136);var o=function(){function AddonForumPostOptionsMenuComponent(e,n,t,o,r){this.viewCtrl=n,this.domUtils=t,this.forumProvider=o,this.sitesProvider=r,this.canEdit=!1,this.canDelete=!1,this.loaded=!1,this.post=e.get("post"),this.forumId=e.get("forumId")}return AddonForumPostOptionsMenuComponent.prototype.ngOnInit=function(){var e=this;if(this.forumId)if(this.post.id){var n=this.sitesProvider.getCurrentSite();this.url=n.createSiteUrl("/mod/forum/discuss.php",{d:this.post.discussion},"p"+this.post.id),this.forumProvider.getDiscussionPost(this.forumId,this.post.discussion,this.post.id,!0).then(function(n){e.canDelete=n.capabilities.delete&&e.forumProvider.isDeletePostAvailable(),e.canEdit=n.capabilities.edit&&e.forumProvider.isUpdatePostAvailable(),e.wordCount=n.wordcount}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error getting discussion post.")}).finally(function(){e.loaded=!0})}else this.canEdit=!0,this.canDelete=!0,this.loaded=!0;else this.loaded=!0},AddonForumPostOptionsMenuComponent.prototype.dismiss=function(){this.viewCtrl.dismiss()},AddonForumPostOptionsMenuComponent.prototype.deletePost=function(){this.viewCtrl.dismiss(this.post.id?{action:"delete"}:{action:"deleteoffline"})},AddonForumPostOptionsMenuComponent.prototype.editPost=function(){this.viewCtrl.dismiss(this.post.id?{action:"edit"}:{action:"editoffline"})},AddonForumPostOptionsMenuComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var o=t(205),r=t(258),i=t(507),l=t(363),s=(t(1201),t(403),t(1202),t(1203),t(1204),t(1205),t(1206),t(1207),[o.a,r.a,i.a,l.a]),a=function(){return function AddonModGlossaryModule(e,n,t,o,r,i,l,s,a,u,d,c,p){e.registerHandler(n),t.registerHandler(o),r.register(i),l.registerHandler(s),l.registerHandler(a),l.registerHandler(u),l.registerHandler(d),c.registerHandler(p)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){function AddonModGlossaryModePickerPopoverComponent(e,n){var t=this;this.viewCtrl=n,this.modes=[],this.selectedMode=e.get("selectedMode")||"";e.get("browsemodes").forEach(function(e){switch(e){case"letter":t.modes.push({key:"letter_all",langkey:"addon.mod_glossary.byalphabet"});break;case"cat":t.modes.push({key:"cat_all",langkey:"addon.mod_glossary.bycategory"});break;case"date":t.modes.push({key:"newest_first",langkey:"addon.mod_glossary.bynewestfirst"}),t.modes.push({key:"recently_updated",langkey:"addon.mod_glossary.byrecentlyupdated"});break;case"author":t.modes.push({key:"author_all",langkey:"addon.mod_glossary.byauthor"})}})}return AddonModGlossaryModePickerPopoverComponent.prototype.modePicked=function(e,n){return this.viewCtrl.dismiss(n),!0},AddonModGlossaryModePickerPopoverComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return i});t(0),t(1208);var o=t(237),r=(t(404),t(1209),t(1210),t(1211),[o.a]),i=function(){return function AddonModImscpModule(e,n,t,o,r,i,l,s,a){e.registerHandler(n),t.registerHandler(o),r.registerHandler(i),r.registerHandler(a),l.registerHandler(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var o=t(170),r=t(286),i=t(287),l=t(742),s=(t(1212),t(331),t(1213),t(1214),t(1215),t(1216),t(1217),t(1218),[o.a,r.a,i.a,l.a]),a=function(){return function AddonModLessonModule(e,n,t,o,r,i,l,s,a,u,d,c,p){e.registerHandler(n),t.registerHandler(o),r.register(i),l.registerHandler(s),l.registerHandler(a),l.registerHandler(u),l.registerHandler(d),c.registerClickHandler(p)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return i});t(0),t(1219);var o=t(298),r=(t(1220),t(1221),t(1222),[o.a]),i=function(){return function AddonModLtiModule(e,n,t,o,r,i,l){e.registerHandler(n),t.registerHandler(o),t.registerHandler(r),i.registerHandler(l)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});t(0),t(1223);var o=t(222),r=(t(405),t(1224),t(1225),t(1226),t(332)),i=[o.a,r.a],l=function(){return function AddonModPageModule(e,n,t,o,r,i,l,s,a){e.registerHandler(n),t.registerHandler(o),r.registerHandler(i),r.registerHandler(a),l.registerHandler(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return a}),t.d(n,"b",function(){return u});t(0);var o=t(130),r=t(168),i=t(263),l=t(253),s=t(259),a=(t(1227),t(333),t(1228),t(1229),t(1230),t(1231),t(1232),t(1233),t(1234),t(1236),t(1238),t(1240),t(1242),t(1244),t(1246),t(1248),t(1250),[o.a,r.a,i.a,l.a,s.a]),u=function(){return function AddonModQuizModule(e,n,t,o,r,i,l,s,a,u,d,c,p){e.registerHandler(n),t.registerHandler(o),r.register(i),l.registerHandler(s),l.registerHandler(a),l.registerHandler(u),l.registerHandler(d),c.registerClickHandler(p)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModQuizAccessOfflineAttemptsComponent(e){this.fb=e}return AddonModQuizAccessOfflineAttemptsComponent.prototype.ngOnInit=function(){this.form.addControl("confirmdatasaved",this.fb.control(1))},AddonModQuizAccessOfflineAttemptsComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModQuizAccessPasswordComponent(e){this.fb=e}return AddonModQuizAccessPasswordComponent.prototype.ngOnInit=function(){this.form.addControl("quizpassword",this.fb.control(""))},AddonModQuizAccessPasswordComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function AddonModQuizAccessTimeLimitComponent(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return i});t(0),t(1252);var o=t(223),r=(t(406),t(1253),t(1254),t(1255),t(299),[o.a]),i=function(){return function AddonModResourceModule(e,n,t,o,r,i,l,s,a){e.registerHandler(n),t.registerHandler(o),r.registerHandler(i),r.registerHandler(a),l.registerHandler(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0);var o=t(234),r=t(386),i=t(264),l=(t(1256),t(334),t(1257),t(1258),t(1259),t(1260),t(288)),s=[o.a,i.a,r.a,l.a],a=function(){return function AddonModScormModule(e,n,t,o,r,i,l,s,a,u){e.registerHandler(n),t.registerHandler(o),r.register(i),l.registerHandler(s),l.registerHandler(a),l.registerHandler(u)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});t(0),t(1261);var o=t(300),r=(t(1262),t(1263),t(335)),i=(t(667),t(302)),l=(t(1264),t(301)),s=[o.a,r.a,i.a,l.a],a=function(){return function AddonModSurveyModule(e,n,t,o,r,i,l,s,a){e.registerHandler(n),t.registerHandler(o),r.registerHandler(i),r.registerHandler(a),l.register(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});var o=t(0),r=(t(4),t(143)),i=t(300),l=t(302),s=(t(335),function(e){function AddonModSurveyPrefetchHandler(n,t,o,r,l,s,a,u,d,c,p,f){var h=e.call(this,n,t,o,r,l,s,a,u,d)||this;return h.surveyProvider=c,h.surveyHelper=p,h.injector=f,h.name="AddonModSurvey",h.modName="survey",h.component=i.a.COMPONENT,h.updatesNames=/^configuration$|^.*files$|^answers$/,h}return Object(o.__extends)(AddonModSurveyPrefetchHandler,e),AddonModSurveyPrefetchHandler.prototype.getIntroFiles=function(e,n){var t=this;return this.surveyProvider.getSurvey(n,e.id).catch(function(){}).then(function(n){return t.getIntroFilesFromInstance(e,n)})},AddonModSurveyPrefetchHandler.prototype.invalidateContent=function(e,n){return this.surveyProvider.invalidateContent(e,n)},AddonModSurveyPrefetchHandler.prototype.invalidateModule=function(e,n){return this.surveyProvider.invalidateSurveyData(n)},AddonModSurveyPrefetchHandler.prototype.isEnabled=function(){return!0},AddonModSurveyPrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,t,this.prefetchSurvey.bind(this))},AddonModSurveyPrefetchHandler.prototype.prefetchSurvey=function(e,n,t,o){var r=this;return this.surveyProvider.getSurvey(n,e.id,!0,o).then(function(n){var t=[],l=r.getIntroFilesFromInstance(e,n);return t.push(r.filepoolProvider.addFilesToQueue(o,l,i.a.COMPONENT,e.id)),n.surveydone||t.push(r.surveyProvider.getQuestions(n.id,!0,o)),Promise.all(t)})},AddonModSurveyPrefetchHandler.prototype.sync=function(e,n,t){return this.syncProvider||(this.syncProvider=this.injector.get(l.a)),this.syncProvider.syncSurvey(e.instance,void 0,t)},AddonModSurveyPrefetchHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});t(0),t(1265);var o=t(303),r=(t(1266),t(1267),t(1268),t(336)),i=[o.a,r.a],l=function(){return function AddonModUrlModule(e,n,t,o,r,i,l){e.registerHandler(n),t.registerHandler(o),t.registerHandler(r),i.registerHandler(l)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var o=t(235),r=t(289),i=t(290),l=(t(1269),t(1270),t(1271),t(1272),t(1273),t(1274),t(1275),t(1276),t(1277),[o.a,r.a,i.a]),s=function(){return function AddonModWikiModule(e,n,t,o,r,i,l,s,a,u,d,c,p,f){e.registerHandler(n),t.registerHandler(o),r.register(i),l.registerHandler(s),l.registerHandler(a),l.registerHandler(u),l.registerHandler(d),l.registerHandler(c),p.registerHandler(f)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6);var o=function(){function AddonModWikiSubwikiPickerComponent(e,n){this.viewCtrl=n,this.subwikis=e.get("subwikis"),this.currentSubwiki=e.get("currentSubwiki")}return AddonModWikiSubwikiPickerComponent.prototype.isSubwikiSelected=function(e){var n=parseInt(e.id,10)||0;if(n>0&&this.currentSubwiki.id>0)return n==this.currentSubwiki.id;var t=parseInt(e.userid,10)||0,o=parseInt(e.groupid,10)||0;return t==this.currentSubwiki.userid&&o==this.currentSubwiki.groupid},AddonModWikiSubwikiPickerComponent.prototype.openSubwiki=function(e){(e.id>0||e.canedit)&&e!=this.currentSubwiki&&this.viewCtrl.dismiss(e)},AddonModWikiSubwikiPickerComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return a}),t.d(n,"b",function(){return u});t(0),t(1278),t(1287);var o=t(176),r=(t(1288),t(1289),t(190)),i=t(291),l=t(204),s=t(193),a=(t(1290),t(1291),[o.a,r.a,i.a,l.a,s.a]),u=function(){return function AddonModWorkshopModule(e,n,t,o,r,i,l,s,a){e.registerHandler(n),t.registerHandler(o),t.registerHandler(a),r.registerHandler(i),l.register(s)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModWorkshopAssessmentStrategyAccumulativeComponent(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(AddonModWorkshopAssessmentStrategyAccumulativeComponent,e),AddonModWorkshopAssessmentStrategyAccumulativeComponent}(t(464).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModWorkshopAssessmentStrategyCommentsComponent(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(AddonModWorkshopAssessmentStrategyCommentsComponent,e),AddonModWorkshopAssessmentStrategyCommentsComponent}(t(464).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModWorkshopAssessmentStrategyNumErrorsComponent(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(AddonModWorkshopAssessmentStrategyNumErrorsComponent,e),AddonModWorkshopAssessmentStrategyNumErrorsComponent}(t(464).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModWorkshopAssessmentStrategyRubricComponent(){return null!==e&&e.apply(this,arguments)||this}return Object(o.__extends)(AddonModWorkshopAssessmentStrategyRubricComponent,e),AddonModWorkshopAssessmentStrategyRubricComponent}(t(464).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var o=t(260),r=t(304),i=t(337),l=(t(1292),t(1293),t(1294),[o.a,r.a,i.a]),s=function(){return function AddonNotesModule(e,n,t,o,r,i){e.registerHandler(n),t.registerHandler(o),r.register(i)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});t(0);var o=t(256),r=t(520),i=(t(1295),t(1296),t(1297),t(1298),[o.a,r.a]),l=function(){return function AddonNotificationsModule(e,n,t,r,i,l,s,a,u,d,c,p){e.registerHandler(n),t.registerHandler(r),i.register(l),c.registerClickHandler(p),a.isDesktop()&&u.registerClick(o.a.PUSH_SIMULATION_COMPONENT,function(e){d.ready().then(function(){c.clicked(e)})})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l}),t.d(n,"b",function(){return s});t(0);var o=t(1299),r=t(10),i=t(155),l=[o.a],s=function(){return function AddonRemoteThemesModule(e,n,t,o,l){var s=l.getInstance("AddonRemoteThemesModule");e.registerProcess({name:"AddonRemoteThemesPreloadCurrent",priority:i.a.MAX_RECOMMENDED_PRIORITY+250,blocking:!0,load:n.preloadCurrentSite.bind(n)}),e.registerProcess({name:"AddonRemoteThemesPreload",blocking:!0,load:n.preloadSites.bind(n)});var a;t.on(r.a.SITE_ADDED,function(e){a=e.siteId,n.addSite(e.siteId).catch(function(e){s.error("Error adding site",e)}).then(function(){a==e.siteId&&(a=!1),e.siteId==o.getCurrentSiteId()&&(n.unloadTmpStyles(),n.enable(e.siteId))})}),t.on(r.a.SITE_UPDATED,function(e){e.siteId===o.getCurrentSiteId()&&n.load(e.siteId).catch(function(e){s.error("Error loading site after site update",e)})}),t.on(r.a.LOGIN,function(e){n.unloadTmpStyles(),n.enable(e.siteId)}),t.on(r.a.LOGOUT,function(e){n.clear()}),t.on(r.a.SITE_DELETED,function(e){n.removeSite(e.id)}),t.on(r.a.LOGIN_SITE_CHECKED,function(e){n.loadTmpStylesForSiteConfig(e.config).catch(function(e){s.error("Error loading tmp styles",e)})}),t.on(r.a.LOGIN_SITE_UNCHECKED,function(e){e.siteId&&e.siteId===a||n.unloadTmpStyles()})}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(59),t(269)),i=function(e){function CoreSitePluginsWorkshopAssessmentStrategyComponent(n,t,o){var r=e.call(this,n,t)||this;return r.workshopAssessmentStrategyDelegate=o,r}return Object(o.__extends)(CoreSitePluginsWorkshopAssessmentStrategyComponent,e),CoreSitePluginsWorkshopAssessmentStrategyComponent.prototype.ngOnInit=function(){this.jsData.workshopId=this.workshopId,this.jsData.assessment=this.assessment,this.jsData.edit=this.edit,this.jsData.selectedValues=this.selectedValues,this.jsData.fieldErrors=this.fieldErrors,this.jsData.strategy=this.strategy,this.getHandlerData(this.workshopAssessmentStrategyDelegate.getHandlerName(this.strategy))},CoreSitePluginsWorkshopAssessmentStrategyComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(1),i=(t(6),t(197)),l=(t(59),t(29),function(e){function CoreSitePluginsOnlyTitleBlockComponent(n,t,o,r,i){var l=e.call(this,n,"CoreSitePluginsOnlyTitleBlockComponent")||this;return l.sitePluginsProvider=t,l.blockDelegate=o,l.navCtrl=r,l.svComponent=i,l}return Object(o.__extends)(CoreSitePluginsOnlyTitleBlockComponent,e),CoreSitePluginsOnlyTitleBlockComponent.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.fetchContentDefaultError="Error getting "+this.block.contents.title+" data."},CoreSitePluginsOnlyTitleBlockComponent.prototype.gotoBlock=function(){var e=this.blockDelegate.getHandlerName(this.block.name),n=this.sitePluginsProvider.getSitePluginHandler(e);if(n){(this.svComponent?this.svComponent.getMasterNav():this.navCtrl).push("CoreSitePluginsPluginPage",{title:this.title,component:n.plugin.component,method:n.handlerSchema.method,initResult:n.initResult,args:{contextlevel:this.contextLevel,instanceid:this.instanceId}})}},CoreSitePluginsOnlyTitleBlockComponent=Object(o.__decorate)([Object(o.__param)(4,Object(r.E)())],CoreSitePluginsOnlyTitleBlockComponent)}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(24),r=function(){function AddonUserProfileFieldCheckboxComponent(e,n){this.fb=e,this.utils=n,this.edit=!1,this.disabled=!1}return AddonUserProfileFieldCheckboxComponent.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname;var n={value:this.utils.isTrueOrOne(e.defaultdata),disabled:this.disabled};this.form.addControl(e.modelName,this.fb.control(n,e.required&&!e.locked?o.u.requiredTrue:null))}},AddonUserProfileFieldCheckboxComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(24),r=(t(4),function(){function AddonUserProfileFieldDatetimeComponent(e,n,t,o){this.fb=e,this.timeUtils=n,this.utils=t,this.translate=o,this.edit=!1,this.disabled=!1}return AddonUserProfileFieldDatetimeComponent.prototype.ngOnInit=function(){var e,n=this.field;if(n&&this.edit&&this.form){n.modelName="profile_field_"+n.shortname;var t=this.utils.isTrueOrOne(n.param3);n.format=this.timeUtils.fixFormatForDatetime(this.timeUtils.convertPHPToMoment(this.translate.instant("core."+(t?"strftimedatetime":"strftimedate")))),n.param1&&(e=parseInt(n.param1,10))&&(n.min=e),n.param2&&(e=parseInt(n.param2,10))&&(n.max=e);this.form.addControl(n.modelName,this.fb.control({value:n.defaultdata,disabled:this.disabled},n.required&&!n.locked?o.u.required:null))}},AddonUserProfileFieldDatetimeComponent}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(24),r=function(){function AddonUserProfileFieldMenuComponent(e){this.fb=e,this.edit=!1,this.disabled=!1}return AddonUserProfileFieldMenuComponent.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname,e.options=e.param1?e.param1.split(/\r\n|\r|\n/g):[];this.form.addControl(e.modelName,this.fb.control({value:e.defaultdata,disabled:this.disabled},e.required&&!e.locked?o.u.required:null))}},AddonUserProfileFieldMenuComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(24),r=function(){function AddonUserProfileFieldTextComponent(e,n){this.fb=e,this.utils=n,this.edit=!1,this.disabled=!1}return AddonUserProfileFieldTextComponent.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname,e.param2&&(e.maxlength=parseInt(e.param2,10)||""),e.inputType=this.utils.isTrueOrOne(e.param3)?"password":"text";this.form.addControl(e.modelName,this.fb.control({value:e.defaultdata,disabled:this.disabled},e.required&&!e.locked?o.u.required:null))}},AddonUserProfileFieldTextComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(24),r=function(){function AddonUserProfileFieldTextareaComponent(){this.edit=!1,this.disabled=!1}return AddonUserProfileFieldTextareaComponent.prototype.ngOnInit=function(){var e=this.field;if(e&&this.edit&&this.form){e.modelName="profile_field_"+e.shortname;this.control=new o.e({value:e.defaultdata,disabled:this.disabled},e.required&&!e.locked?o.u.required:null),this.form.addControl(e.modelName,this.control)}},AddonUserProfileFieldTextareaComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(197),i=t(42),l=(t(4),function(e){function AddonBlockActivityModulesComponent(n,t,o,r,i){var l=e.call(this,n,"AddonBlockActivityModulesComponent")||this;return l.courseProvider=t,l.translate=o,l.moduleDelegate=r,l.sitesProvider=i,l.entries=[],l.fetchContentDefaultError="Error getting activity modules data.",l}return Object(o.__extends)(AddonBlockActivityModulesComponent,e),AddonBlockActivityModulesComponent.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},AddonBlockActivityModulesComponent.prototype.invalidateContent=function(){return this.courseProvider.invalidateSections(this.instanceId)},AddonBlockActivityModulesComponent.prototype.fetchContent=function(){var e=this;return this.courseProvider.getSections(this.getCourseId(),!1,!0).then(function(n){e.entries=[];var t={},o={},r={};n.forEach(function(n){n.modules&&n.modules.forEach(function(n){!1!==n.uservisible&&e.courseProvider.moduleHasView(n)&&void 0===r[n.modname]&&(void 0===t[n.modname]&&(t[n.modname]=e.moduleDelegate.supportsFeature(n.modname,i.a.FEATURE_MOD_ARCHETYPE,i.a.MOD_ARCHETYPE_OTHER)),t[n.modname]==i.a.MOD_ARCHETYPE_RESOURCE?r.resources||(r.resources=e.translate.instant("core.resources")):r[n.modname]=n.modplural,o[n.modname]=n.modicon)})}),r=e.utils.sortValues(r);for(var l in r){var s=void 0;s="resources"===l?e.courseProvider.getModuleIconSrc("page",o.page):e.moduleDelegate.getModuleIconSrc(l,o[l]),e.entries.push({icon:s,name:r[l],modName:l})}})},AddonBlockActivityModulesComponent.prototype.getCourseId=function(){switch(this.contextLevel){case"course":return this.instanceId;default:return this.sitesProvider.getCurrentSiteHomeId()}},AddonBlockActivityModulesComponent}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(6),t(10)),i=t(53),l=function(e){function AddonBlockMyOverviewComponent(n,t,o,r,i,l,s,a,u){var d=e.call(this,n,"AddonBlockMyOverviewComponent")||this;return d.coursesProvider=t,d.courseCompletionProvider=o,d.eventsProvider=r,d.courseHelper=i,d.courseOptionsDelegate=l,d.coursesHelper=s,d.sitesProvider=a,d.timeUtils=u,d.courses={filter:"",all:[],allincludinghidden:[],past:[],inprogress:[],future:[],favourite:[],hidden:[],custom:[]},d.customFilter=[],d.selectedFilter="inprogress",d.sort="fullname",d.filteredCourses=[],d.prefetchCoursesData={all:{},allincludinghidden:{},inprogress:{},past:{},future:{},favourite:{},hidden:{},custom:{}},d.showFilters={all:"show",allincludinghidden:"show",past:"show",inprogress:"show",future:"show",favourite:"show",hidden:"show",custom:"hidden"},d.showFilter=!1,d.showSelectorFilter=!1,d.showSortFilter=!1,d.prefetchIconsInitialized=!1,d.courseIds=[],d.fetchContentDefaultError="Error getting my overview data.",d}return Object(o.__extends)(AddonBlockMyOverviewComponent,e),AddonBlockMyOverviewComponent.prototype.ngOnInit=function(){var n=this;this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),this.downloadCoursesEnabled=!this.coursesProvider.isDownloadCoursesDisabledInSite(),this.updateSiteObserver=this.eventsProvider.on(r.a.SITE_UPDATED,function(){n.downloadCourseEnabled=!n.coursesProvider.isDownloadCourseDisabledInSite(),n.downloadCoursesEnabled=!n.coursesProvider.isDownloadCoursesDisabledInSite()},this.sitesProvider.getCurrentSiteId()),this.coursesObserver=this.eventsProvider.on(i.a.EVENT_MY_COURSES_UPDATED,function(){n.refreshContent()},this.sitesProvider.getCurrentSiteId()),this.currentSite=this.sitesProvider.getCurrentSite();var t=[];t.push(this.currentSite.getLocalSiteConfig("AddonBlockMyOverviewSort",this.sort).then(function(e){n.sort=e})),t.push(this.currentSite.getLocalSiteConfig("AddonBlockMyOverviewFilter",this.selectedFilter).then(function(e){n.selectedFilter=e})),Promise.all(t).finally(function(){e.prototype.ngOnInit.call(n)})},AddonBlockMyOverviewComponent.prototype.ngOnChanges=function(e){e.downloadEnabled&&!e.downloadEnabled.previousValue&&this.downloadEnabled&&this.loaded&&this.initPrefetchCoursesIcons()},AddonBlockMyOverviewComponent.prototype.invalidateContent=function(){var e=this,n=[];return n.push(this.coursesProvider.invalidateUserCourses().finally(function(){n.push(e.coursesProvider.invalidateUserCourses().finally(function(){return e.utils.allPromises(e.courseIds.map(function(n){return e.courseCompletionProvider.invalidateCourseCompletion(n)}))}))})),n.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&n.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(n).finally(function(){e.prefetchIconsInitialized=!1})},AddonBlockMyOverviewComponent.prototype.fetchContent=function(){var e=this,n=this.block.configs;return this.coursesHelper.getUserCoursesWithOptions(this.sort,null,null,n&&n.displaycategories&&"1"==n.displaycategories.value).then(function(t){e.courseIds=t.map(function(e){return e.id}),e.showSortFilter=t.length>0&&void 0!==t[0].lastaccess,e.initCourseFilters(t),e.showSelectorFilter=t.length>0&&(e.courses.past.length>0||e.courses.future.length>0||void 0!==t[0].enddate),e.courses.filter="",e.showFilter=!1,e.showFilters.all=e.getShowFilterValue(!n||"1"==n.displaygroupingall.value,0===e.courses.all.length),e.showFilters.allincludinghidden=e.getShowFilterValue(n&&"1"==n.displaygroupingallincludinghidden.value,0===e.courses.allincludinghidden.length),e.showFilters.inprogress=e.getShowFilterValue(!n||"1"==n.displaygroupinginprogress.value,0===e.courses.inprogress.length),e.showFilters.past=e.getShowFilterValue(!n||"1"==n.displaygroupingpast.value,0===e.courses.past.length),e.showFilters.future=e.getShowFilterValue(!n||"1"==n.displaygroupingfuture.value,0===e.courses.future.length),e.showSelectorFilter=t.length>0&&(e.courses.past.length>0||e.courses.future.length>0||void 0!==t[0].enddate),e.showFilters.hidden=e.getShowFilterValue(e.showSelectorFilter&&void 0!==t[0].hidden&&(!n||"1"==n.displaygroupinghidden.value),0===e.courses.hidden.length),e.showFilters.favourite=e.getShowFilterValue(e.showSelectorFilter&&void 0!==t[0].isfavourite&&(!n||n.displaygroupingstarred&&"1"==n.displaygroupingstarred.value||n.displaygroupingfavourites&&"1"==n.displaygroupingfavourites.value),0===e.courses.favourite.length),e.showFilters.custom=e.getShowFilterValue(e.showSelectorFilter&&n&&"1"==n.displaygroupingcustomfield.value&&n.customfieldsexport&&n.customfieldsexport.value,!1),e.customFilter="show"==e.showFilters.custom?e.textUtils.parseJSON(n.customfieldsexport.value):[],e.showSelectorFilter&&(e.showSelectorFilter=Object.keys(e.showFilters).some(function(n){return"show"==e.showFilters[n]})),(!e.showSelectorFilter||"inprogress"===e.selectedFilter&&"disabled"==e.showFilters.inprogress)&&(e.selectedFilter="all"),e.setCourseFilter(e.selectedFilter),e.initPrefetchCoursesIcons()})},AddonBlockMyOverviewComponent.prototype.getShowFilterValue=function(e,n){return e?n?"disabled":"show":"hidden"},AddonBlockMyOverviewComponent.prototype.filterChanged=function(e){var n=e.target.value&&e.target.value.trim().toLowerCase();this.filteredCourses=!n||this.courses.allincludinghidden.length<=0?this.courses.allincludinghidden:this.courses.allincludinghidden.filter(this.courses.allincludinghidden.length>0&&void 0!==this.courses.allincludinghidden[0].displayname?function(e){return e.displayname.toLowerCase().indexOf(n)>-1}:function(e){return e.fullname.toLowerCase().indexOf(n)>-1})},AddonBlockMyOverviewComponent.prototype.initPrefetchCoursesIcons=function(){var e=this;!this.prefetchIconsInitialized&&this.downloadEnabled&&(this.prefetchIconsInitialized=!0,Object.keys(this.prefetchCoursesData).forEach(function(n){e.courseHelper.initPrefetchCoursesIcons(e.courses[n],e.prefetchCoursesData[n]).then(function(t){e.prefetchCoursesData[n]=t})}))},AddonBlockMyOverviewComponent.prototype.prefetchCourses=function(){var e=this,n=this.selectedFilter,t=this.prefetchCoursesData[n].icon;return this.courseHelper.prefetchCourses(this.courses[n],this.prefetchCoursesData[n]).catch(function(o){e.isDestroyed||(e.domUtils.showErrorModalDefault(o,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData[n].icon=t)})},AddonBlockMyOverviewComponent.prototype.selectedChanged=function(){this.setCourseFilter(this.selectedFilter)},AddonBlockMyOverviewComponent.prototype.setCourseFilter=function(e){var n=this;if(this.selectedFilter=e,"show"==this.showFilters.custom&&e.startsWith("custom-")&&void 0!==this.customFilter[e.substr(7)]){var t=this.block.configs.customfiltergrouping.value,o=this.customFilter[e.substr(7)].value;this.loaded=!1,this.coursesProvider.getEnrolledCoursesByCustomField(t,o).then(function(e){var t=e.map(function(e){return e.id});n.filteredCourses=n.courses.allincludinghidden.filter(function(e){return-1!==t.indexOf(e.id)})}).catch(function(e){n.domUtils.showErrorModalDefault(e,n.fetchContentDefaultError)}).finally(function(){n.loaded=!0})}else if(this.currentSite.setLocalSiteConfig("AddonBlockMyOverviewFilter",e),"show"==this.showFilters[e])this.filteredCourses=this.courses[e];else{var r=Object.keys(this.showFilters).find(function(e){return"show"==n.showFilters[e]});r&&this.setCourseFilter(r)}},AddonBlockMyOverviewComponent.prototype.initCourseFilters=function(e){var n=this;this.courses.allincludinghidden=e,this.showSortFilter&&("lastaccess"==this.sort?e.sort(function(e,n){return n.lastaccess-e.lastaccess}):"fullname"==this.sort&&e.sort(function(e,n){var t=e.fullname.toLowerCase(),o=n.fullname.toLowerCase();return t.localeCompare(o)})),this.courses.all=[],this.courses.past=[],this.courses.inprogress=[],this.courses.future=[],this.courses.favourite=[],this.courses.hidden=[];var t=this.timeUtils.timestamp();e.forEach(function(e){e.hidden?n.courses.hidden.push(e):(n.courses.all.push(e),e.enddate&&e.enddate<t||e.completed?n.courses.past.push(e):e.startdate>t?n.courses.future.push(e):n.courses.inprogress.push(e),e.isfavourite&&n.courses.favourite.push(e))}),this.setCourseFilter(this.selectedFilter)},AddonBlockMyOverviewComponent.prototype.switchSort=function(e){this.sort=e,this.currentSite.setLocalSiteConfig("AddonBlockMyOverviewSort",this.sort),this.initCourseFilters(this.courses.allincludinghidden)},AddonBlockMyOverviewComponent.prototype.switchFilter=function(){this.showFilter=!this.showFilter,this.courses.filter="",this.showFilter?this.filteredCourses=this.courses.allincludinghidden:this.setCourseFilter(this.selectedFilter)},AddonBlockMyOverviewComponent.prototype.switchFilterClosed=function(){var e=this;this.showFilter&&setTimeout(function(){e.searchbar.setFocus()})},AddonBlockMyOverviewComponent.prototype.showFilterSwitchButton=function(){return this.loaded&&this.courses.allincludinghidden&&this.courses.allincludinghidden.length>5},AddonBlockMyOverviewComponent.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.coursesObserver&&this.coursesObserver.off(),this.updateSiteObserver&&this.updateSiteObserver.off()},AddonBlockMyOverviewComponent}(t(197).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonBlockSiteMainMenuComponent(n,t,o,r,i,l){var s=e.call(this,n,"AddonBlockSiteMainMenuComponent")||this;return s.sitesProvider=t,s.courseProvider=o,s.courseHelper=r,s.siteHomeProvider=i,s.prefetchDelegate=l,s.component="AddonBlockSiteMainMenu",s.fetchContentDefaultError="Error getting main menu data.",s.siteHomeId=t.getCurrentSite().getSiteHomeId(),s}return Object(o.__extends)(AddonBlockSiteMainMenuComponent,e),AddonBlockSiteMainMenuComponent.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},AddonBlockSiteMainMenuComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.courseProvider.invalidateSections(this.siteHomeId)),e.push(this.siteHomeProvider.invalidateNewsForum(this.siteHomeId)),this.mainMenuBlock&&this.mainMenuBlock.modules&&e.push(this.prefetchDelegate.invalidateModules(this.mainMenuBlock.modules,this.siteHomeId)),Promise.all(e)},AddonBlockSiteMainMenuComponent.prototype.fetchContent=function(){var e=this;return this.courseProvider.getSections(this.siteHomeId,!1,!0).then(function(n){if(e.mainMenuBlock=n.find(function(e){return 0==e.section}),e.mainMenuBlock){e.mainMenuBlock.hasContent=e.courseHelper.sectionHasContent(e.mainMenuBlock),e.courseHelper.addHandlerDataForModules([e.mainMenuBlock],e.siteHomeId,void 0,void 0,!0);var t=e.sitesProvider.getCurrentSite(),o=t?t.getStoredConfig()||{}:{},r=!1;if(o.frontpageloggedin){r=o.frontpageloggedin.split(",").find(function(e){return"0"==e})}if(r&&e.mainMenuBlock.modules)return e.siteHomeProvider.getNewsForum(e.siteHomeId).then(function(n){for(var t=0;t<e.mainMenuBlock.modules.length;t++){var o=e.mainMenuBlock.modules[t];if("forum"==o.modname&&o.instance==n.id){e.mainMenuBlock.modules.splice(t,1);break}}}).catch(function(){})}})},AddonBlockSiteMainMenuComponent}(t(197).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(197),i=(t(312),function(e){function AddonBlockTimelineComponent(n,t,o,r,i,l,s){var a=e.call(this,n,"AddonBlockTimelineComponent")||this;return a.coursesProvider=t,a.timelineProvider=o,a.courseOptionsDelegate=r,a.coursesHelper=i,a.sitesProvider=l,a.timeUtils=s,a.sort="sortbydates",a.filter="next30days",a.timeline={events:[],loaded:!1,canLoadMore:void 0},a.timelineCourses={courses:[],loaded:!1,canLoadMore:!1},a.courseIds=[],a.fetchContentDefaultError="Error getting timeline data.",a}return Object(o.__extends)(AddonBlockTimelineComponent,e),AddonBlockTimelineComponent.prototype.ngOnInit=function(){var n=this;this.currentSite=this.sitesProvider.getCurrentSite(),this.currentSite.getLocalSiteConfig("AddonBlockTimelineFilter",this.filter).then(function(e){n.filter=e,n.switchFilter()}),this.currentSite.getLocalSiteConfig("AddonBlockTimelineSort",this.sort).then(function(t){n.sort=t,e.prototype.ngOnInit.call(n)})},AddonBlockTimelineComponent.prototype.invalidateContent=function(){var e=[];return e.push(this.timelineProvider.invalidateActionEventsByTimesort()),e.push(this.timelineProvider.invalidateActionEventsByCourses()),e.push(this.coursesProvider.invalidateUserCourses()),e.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&e.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(e)},AddonBlockTimelineComponent.prototype.fetchContent=function(){var e=this;return"sortbydates"==this.sort?this.fetchMyOverviewTimeline().finally(function(){e.timeline.loaded=!0}):"sortbycourses"==this.sort?this.fetchMyOverviewTimelineByCourses().finally(function(){e.timelineCourses.loaded=!0}):void 0},AddonBlockTimelineComponent.prototype.loadMoreTimeline=function(){var e=this;return this.fetchMyOverviewTimeline(this.timeline.canLoadMore).catch(function(n){e.domUtils.showErrorModalDefault(n,e.fetchContentDefaultError)})},AddonBlockTimelineComponent.prototype.loadMoreCourse=function(e){var n=this;return this.timelineProvider.getActionEventsByCourse(e.id,e.canLoadMore).then(function(n){e.events=e.events.concat(n.events),e.canLoadMore=n.canLoadMore}).catch(function(e){n.domUtils.showErrorModalDefault(e,n.fetchContentDefaultError)})},AddonBlockTimelineComponent.prototype.fetchMyOverviewTimeline=function(e){var n=this;return this.timelineProvider.getActionEventsByTimesort(e).then(function(e){n.timeline.events=e.events,n.timeline.canLoadMore=e.canLoadMore})},AddonBlockTimelineComponent.prototype.fetchMyOverviewTimelineByCourses=function(){var e=this;return this.coursesHelper.getUserCoursesWithOptions().then(function(n){var t=e.timeUtils.timestamp();if(n=n.filter(function(e){return e.startdate<=t&&(!e.enddate||e.enddate>=t)}),e.timelineCourses.courses=n,n.length>0)return e.courseIds=n.map(function(e){return e.id}),e.timelineProvider.getActionEventsByCourses(e.courseIds).then(function(n){e.timelineCourses.courses.forEach(function(e){e.events=n[e.id].events,e.canLoadMore=n[e.id].canLoadMore})})})},AddonBlockTimelineComponent.prototype.switchFilter=function(){switch(this.currentSite.setLocalSiteConfig("AddonBlockTimelineFilter",this.filter),this.filter){case"overdue":this.dataFrom=-14,this.dataTo=0;break;case"next7days":this.dataFrom=0,this.dataTo=7;break;case"next30days":this.dataFrom=0,this.dataTo=30;break;case"next3months":this.dataFrom=0,this.dataTo=90;break;case"next6months":this.dataFrom=0,this.dataTo=180;break;default:case"all":this.dataFrom=-14,this.dataTo=void 0}},AddonBlockTimelineComponent.prototype.switchSort=function(e){this.sort=e,this.currentSite.setLocalSiteConfig("AddonBlockTimelineSort",this.sort),this.timeline.loaded||"sortbydates"!=this.sort?this.timelineCourses.loaded||"sortbycourses"!=this.sort||this.fetchContent():this.fetchContent()},AddonBlockTimelineComponent}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(1),i=(t(6),t(15)),l=(t.n(i),function(){function AddonBlockTimelineEventsComponent(e,n,t,o,i,l,s,a){this.navCtrl=e,this.utils=n,this.textUtils=t,this.domUtils=o,this.sitesProvider=i,this.courseProvider=l,this.contentLinksHelper=s,this.timeUtils=a,this.events=[],this.filteredEvents=[],this.loadMore=new r.r}return AddonBlockTimelineEventsComponent.prototype.ngOnChanges=function(e){var n=this;if(this.showCourse=this.utils.isTrueOrOne(this.showCourse),e.events||e.from||e.to)if(this.events&&this.events.length>0){var t=this.filterEventsByTime(this.from,this.to);this.empty=!t||t.length<=0;var o={};t.forEach(function(e){var t=n.timeUtils.getMidnightForTimestamp(e.timesort);o[t]?o[t].push(e):o[t]=[e]});var r=this.timeUtils.getMidnightForTimestamp();this.filteredEvents=[],Object.keys(o).forEach(function(e){var t=parseInt(e);n.filteredEvents.push({color:t<r?"danger":"light",dayTimestamp:t,events:o[t]})})}else this.empty=!0},AddonBlockTimelineEventsComponent.prototype.filterEventsByTime=function(e,n){var t=this;return e=i().add(e,"days").startOf("day").unix(),n=void 0!==n?i().add(n,"days").startOf("day").unix():n,this.events.filter(function(t){return n?e<=t.timesort&&t.timesort<n:e<=t.timesort}).map(function(e){return e.iconUrl=t.courseProvider.getModuleIconSrc(e.icon.component),e})},AddonBlockTimelineEventsComponent.prototype.loadMoreEvents=function(){this.loadingMore=!0,this.loadMore.emit()},AddonBlockTimelineEventsComponent.prototype.action=function(e,n){var t=this;e.preventDefault(),e.stopPropagation(),n=this.textUtils.decodeHTMLEntities(n);var o=this.domUtils.showModalLoading();this.contentLinksHelper.handleLink(n,void 0,this.navCtrl).then(function(e){if(!e)return t.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(n)}).finally(function(){o.dismiss()})},AddonBlockTimelineEventsComponent=Object(o.__decorate)([Object(o.__param)(0,Object(r.E)())],AddonBlockTimelineEventsComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(10),i=t(53),l=function(e){function AddonBlockRecentlyAccessedCoursesComponent(n,t,o,r,i,l,s,a){var u=e.call(this,n,"AddonBlockRecentlyAccessedCoursesComponent")||this;return u.coursesProvider=t,u.courseCompletionProvider=o,u.eventsProvider=r,u.courseHelper=i,u.courseOptionsDelegate=l,u.coursesHelper=s,u.sitesProvider=a,u.courses=[],u.prefetchCoursesData={icon:"",badge:""},u.prefetchIconsInitialized=!1,u.courseIds=[],u.fetchContentDefaultError="Error getting recent courses data.",u}return Object(o.__extends)(AddonBlockRecentlyAccessedCoursesComponent,e),AddonBlockRecentlyAccessedCoursesComponent.prototype.ngOnInit=function(){var n=this;this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),this.downloadCoursesEnabled=!this.coursesProvider.isDownloadCoursesDisabledInSite(),this.updateSiteObserver=this.eventsProvider.on(r.a.SITE_UPDATED,function(){n.downloadCourseEnabled=!n.coursesProvider.isDownloadCourseDisabledInSite(),n.downloadCoursesEnabled=!n.coursesProvider.isDownloadCoursesDisabledInSite()},this.sitesProvider.getCurrentSiteId()),this.coursesObserver=this.eventsProvider.on(i.a.EVENT_MY_COURSES_UPDATED,function(){n.refreshContent()},this.sitesProvider.getCurrentSiteId()),e.prototype.ngOnInit.call(this)},AddonBlockRecentlyAccessedCoursesComponent.prototype.ngOnChanges=function(e){e.downloadEnabled&&!e.downloadEnabled.previousValue&&this.downloadEnabled&&this.loaded&&this.initPrefetchCoursesIcons()},AddonBlockRecentlyAccessedCoursesComponent.prototype.invalidateContent=function(){var e=this,n=[];return n.push(this.coursesProvider.invalidateUserCourses().finally(function(){return e.utils.allPromises(e.courseIds.map(function(n){return e.courseCompletionProvider.invalidateCourseCompletion(n)}))})),n.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&n.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(n).finally(function(){e.prefetchIconsInitialized=!1})},AddonBlockRecentlyAccessedCoursesComponent.prototype.fetchContent=function(){var e=this;return this.coursesHelper.getUserCoursesWithOptions("lastaccess",10,null,this.block.configs&&this.block.configs.displaycategories&&"1"==this.block.configs.displaycategories.value).then(function(n){e.courses=n,e.initPrefetchCoursesIcons()})},AddonBlockRecentlyAccessedCoursesComponent.prototype.initPrefetchCoursesIcons=function(){var e=this;!this.prefetchIconsInitialized&&this.downloadEnabled&&(this.prefetchIconsInitialized=!0,this.courseHelper.initPrefetchCoursesIcons(this.courses,this.prefetchCoursesData).then(function(n){e.prefetchCoursesData=n}))},AddonBlockRecentlyAccessedCoursesComponent.prototype.prefetchCourses=function(){var e=this,n=this.prefetchCoursesData.icon;return this.courseHelper.prefetchCourses(this.courses,this.prefetchCoursesData).catch(function(t){e.isDestroyed||(e.domUtils.showErrorModalDefault(t,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData.icon=n)})},AddonBlockRecentlyAccessedCoursesComponent.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.coursesObserver&&this.coursesObserver.off(),this.updateSiteObserver&&this.updateSiteObserver.off()},AddonBlockRecentlyAccessedCoursesComponent}(t(197).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(1),i=(t(6),t(197)),l=(t(467),function(e){function AddonBlockRecentlyAccessedItemsComponent(n,t,o,r,i){var l=e.call(this,n,"AddonBlockRecentlyAccessedItemsComponent")||this;return l.navCtrl=t,l.sitesProvider=o,l.recentItemsProvider=r,l.contentLinksHelper=i,l.items=[],l.fetchContentDefaultError="Error getting recently accessed items data.",l}return Object(o.__extends)(AddonBlockRecentlyAccessedItemsComponent,e),AddonBlockRecentlyAccessedItemsComponent.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},AddonBlockRecentlyAccessedItemsComponent.prototype.invalidateContent=function(){return this.recentItemsProvider.invalidateRecentItems()},AddonBlockRecentlyAccessedItemsComponent.prototype.fetchContent=function(){var e=this;return this.recentItemsProvider.getRecentItems().then(function(n){e.items=n})},AddonBlockRecentlyAccessedItemsComponent.prototype.action=function(e,n){var t=this;e.preventDefault(),e.stopPropagation();var o=this.textUtils.decodeHTMLEntities(n.viewurl),r=this.domUtils.showModalLoading();this.contentLinksHelper.handleLink(o,void 0,this.navCtrl).then(function(e){if(!e)return t.sitesProvider.getCurrentSite().openInBrowserWithAutoLoginIfSameSite(o)}).finally(function(){r.dismiss()})},AddonBlockRecentlyAccessedItemsComponent=Object(o.__decorate)([Object(o.__param)(1,Object(r.E)())],AddonBlockRecentlyAccessedItemsComponent)}(i.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(10),i=t(53),l=function(e){function AddonBlockStarredCoursesComponent(n,t,o,r,i,l,s,a){var u=e.call(this,n,"AddonBlockStarredCoursesComponent")||this;return u.coursesProvider=t,u.courseCompletionProvider=o,u.eventsProvider=r,u.courseHelper=i,u.courseOptionsDelegate=l,u.coursesHelper=s,u.sitesProvider=a,u.courses=[],u.prefetchCoursesData={icon:"",badge:""},u.prefetchIconsInitialized=!1,u.courseIds=[],u.fetchContentDefaultError="Error getting starred courses data.",u}return Object(o.__extends)(AddonBlockStarredCoursesComponent,e),AddonBlockStarredCoursesComponent.prototype.ngOnInit=function(){var n=this;this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),this.downloadCoursesEnabled=!this.coursesProvider.isDownloadCoursesDisabledInSite(),this.updateSiteObserver=this.eventsProvider.on(r.a.SITE_UPDATED,function(){n.downloadCourseEnabled=!n.coursesProvider.isDownloadCourseDisabledInSite(),n.downloadCoursesEnabled=!n.coursesProvider.isDownloadCoursesDisabledInSite()},this.sitesProvider.getCurrentSiteId()),this.coursesObserver=this.eventsProvider.on(i.a.EVENT_MY_COURSES_UPDATED,function(){n.refreshContent()},this.sitesProvider.getCurrentSiteId()),e.prototype.ngOnInit.call(this)},AddonBlockStarredCoursesComponent.prototype.ngOnChanges=function(e){e.downloadEnabled&&!e.downloadEnabled.previousValue&&this.downloadEnabled&&this.loaded&&this.initPrefetchCoursesIcons()},AddonBlockStarredCoursesComponent.prototype.invalidateContent=function(){var e=this,n=[];return n.push(this.coursesProvider.invalidateUserCourses().finally(function(){return e.utils.allPromises(e.courseIds.map(function(n){return e.courseCompletionProvider.invalidateCourseCompletion(n)}))})),n.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds.length>0&&n.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds.join(","))),this.utils.allPromises(n).finally(function(){e.prefetchIconsInitialized=!1})},AddonBlockStarredCoursesComponent.prototype.fetchContent=function(){var e=this;return this.coursesHelper.getUserCoursesWithOptions("timemodified",0,"isfavourite",this.block.configs&&this.block.configs.displaycategories&&"1"==this.block.configs.displaycategories.value).then(function(n){e.courses=n,e.initPrefetchCoursesIcons()})},AddonBlockStarredCoursesComponent.prototype.initPrefetchCoursesIcons=function(){var e=this;!this.prefetchIconsInitialized&&this.downloadEnabled&&(this.prefetchIconsInitialized=!0,this.courseHelper.initPrefetchCoursesIcons(this.courses,this.prefetchCoursesData).then(function(n){e.prefetchCoursesData=n}))},AddonBlockStarredCoursesComponent.prototype.prefetchCourses=function(){var e=this,n=this.prefetchCoursesData.icon;return this.courseHelper.prefetchCourses(this.courses,this.prefetchCoursesData).catch(function(t){e.isDestroyed||(e.domUtils.showErrorModalDefault(t,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData.icon=n)})},AddonBlockStarredCoursesComponent.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.coursesObserver&&this.coursesObserver.off(),this.updateSiteObserver&&this.updateSiteObserver.off()},AddonBlockStarredCoursesComponent}(t(197).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModDataFieldCheckboxComponent(n){var t=e.call(this,n)||this;return t.fb=n,t.options=[],t}return Object(o.__extends)(AddonModDataFieldCheckboxComponent,e),AddonModDataFieldCheckboxComponent.prototype.init=function(){var e=this;if(this.isShowOrListMode())this.updateValue(this.value);else{this.options=this.field.param1.split(/\r?\n/).map(function(e){return{key:e,value:e}});var n=[];"edit"==this.mode&&this.value&&this.value.content&&this.value.content.split("##").forEach(function(t){e.options.findIndex(function(e){return t==e.key})>=0&&n.push(t)}),"search"==this.mode&&this.addControl("f_"+this.field.id+"_allreq"),this.addControl("f_"+this.field.id,n)}},AddonModDataFieldCheckboxComponent.prototype.updateValue=function(e){this.value=e||{},this.value.content=e&&e.content&&e.content.split("##").join("<br>")},AddonModDataFieldCheckboxComponent}(t(181).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=(t(4),function(e){function AddonModDataFieldDateComponent(n,t,o){var r=e.call(this,n)||this;return r.fb=n,r.timeUtils=t,r.translate=o,r}return Object(o.__extends)(AddonModDataFieldDateComponent,e),AddonModDataFieldDateComponent.prototype.init=function(){if(!this.isShowOrListMode()){var e;this.format=this.timeUtils.fixFormatForDatetime(this.timeUtils.convertPHPToMoment(this.translate.instant("core.strftimedate"))),"search"==this.mode?(this.addControl("f_"+this.field.id+"_z"),e=this.search["f_"+this.field.id+"_y"]?new Date(this.search["f_"+this.field.id+"_y"]+"-"+this.search["f_"+this.field.id+"_m"]+"-"+this.search["f_"+this.field.id+"_d"]):new Date,this.search["f_"+this.field.id]=this.timeUtils.toDatetimeFormat(e.getTime())):(e=this.value&&this.value.content?new Date(1e3*parseInt(this.value.content,10)):new Date,e=this.timeUtils.toDatetimeFormat(e.getTime())),this.addControl("f_"+this.field.id,e)}},AddonModDataFieldDateComponent}(t(181).a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(181),i=t(98),l=function(e){function AddonModDataFieldFileComponent(n,t){var o=e.call(this,n)||this;return o.fb=n,o.fileSessionprovider=t,o.files=[],o}return Object(o.__extends)(AddonModDataFieldFileComponent,e),AddonModDataFieldFileComponent.prototype.getFiles=function(e){var n=e&&e.files||[];return n.length>0&&(n=[n[0]]),n},AddonModDataFieldFileComponent.prototype.init=function(){"search"!=this.mode?(this.component=i.a.COMPONENT,this.componentId=this.database.coursemodule,this.updateValue(this.value),"edit"==this.mode&&(this.maxSizeBytes=parseInt(this.field.param3,10),this.fileSessionprovider.setFiles(this.component,this.database.id+"_"+this.field.id,this.files))):this.addControl("f_"+this.field.id)},AddonModDataFieldFileComponent.prototype.updateValue=function(e){this.value=e,this.files=this.getFiles(e)},AddonModDataFieldFileComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=(t(6),t(361),t(181)),i=function(e){function AddonModDataFieldLatlongComponent(n,t,o,r,i,l){var s=e.call(this,n)||this;return s.fb=n,s.platform=t,s.geolocation=o,s.domUtils=r,s.sanitizer=i,s.appProvider=l,s.showGeolocation=!s.appProvider.isDesktop(),s}return Object(o.__extends)(AddonModDataFieldLatlongComponent,e),AddonModDataFieldLatlongComponent.prototype.formatLatLong=function(e,n){if(null!==e||null!==n){var t=e?Math.abs(e).toFixed(4):"0.0000",o=n?Math.abs(n).toFixed(4):"0.0000";return t+(e<0?"°S":"°N")+" "+o+(n<0?"°W":"°E")}},AddonModDataFieldLatlongComponent.prototype.getLatLongLink=function(e,n){if(null!==e||null!==n){var t=e?e.toFixed(4):"0.0000",o=n?n.toFixed(4):"0.0000",r=void 0;return r=this.platform.is("ios")?"http://maps.apple.com/?ll="+t+","+o+"&near="+t+","+o:"geo:"+t+","+o,this.sanitizer.bypassSecurityTrustUrl(r)}},AddonModDataFieldLatlongComponent.prototype.init=function(){this.value&&this.updateValue(this.value),"edit"==this.mode?(this.addControl("f_"+this.field.id+"_0",this.north),this.addControl("f_"+this.field.id+"_1",this.east)):"search"==this.mode&&this.addControl("f_"+this.field.id)},AddonModDataFieldLatlongComponent.prototype.updateValue=function(e){this.value=e,this.north=e&&parseFloat(e.content)||null,this.east=e&&parseFloat(e.content1)||null},AddonModDataFieldLatlongComponent.prototype.getLocation=function(e){var n=this;e.preventDefault();var t=this.domUtils.showModalLoading("addon.mod_data.gettinglocation",!0);this.geolocation.getCurrentPosition({enableHighAccuracy:!0,timeout:3e4}).then(function(e){n.form.controls["f_"+n.field.id+"_0"].setValue(e.coords.latitude),n.form.controls["f_"+n.field.id+"_1"].setValue(e.coords.longitude)}).catch(function(e){n.isPermissionDeniedError(e)?n.domUtils.showErrorModal("addon.mod_data.locationpermissiondenied",!0):n.domUtils.showErrorModalDefault(e,"Error getting location")}).finally(function(){t.dismiss()})},AddonModDataFieldLatlongComponent.prototype.isPermissionDeniedError=function(e){return e&&"code"in e&&"PERMISSION_DENIED"in e&&e.code===e.PERMISSION_DENIED},AddonModDataFieldLatlongComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModDataFieldMenuComponent(n){var t=e.call(this,n)||this;return t.fb=n,t.options=[],t}return Object(o.__extends)(AddonModDataFieldMenuComponent,e),AddonModDataFieldMenuComponent.prototype.init=function(){if(!this.isShowOrListMode()){this.options=this.field.param1.split("\n");var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},AddonModDataFieldMenuComponent}(t(181).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModDataFieldMultimenuComponent(n){var t=e.call(this,n)||this;return t.fb=n,t.options=[],t}return Object(o.__extends)(AddonModDataFieldMultimenuComponent,e),AddonModDataFieldMultimenuComponent.prototype.init=function(){var e=this;if(this.isShowOrListMode())this.updateValue(this.value);else{this.options=this.field.param1.split(/\r?\n/).map(function(e){return{key:e,value:e}});var n=[];"edit"==this.mode&&this.value&&this.value.content&&this.value.content.split("##").forEach(function(t){e.options.findIndex(function(e){return t==e.key})>=0&&n.push(t)}),"search"==this.mode&&this.addControl("f_"+this.field.id+"_allreq"),this.addControl("f_"+this.field.id,n)}},AddonModDataFieldMultimenuComponent.prototype.updateValue=function(e){this.value=e||{},this.value.content=e&&e.content&&e.content.split("##").join("<br>")},AddonModDataFieldMultimenuComponent}(t(181).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModDataFieldTextComponent(n){var t=e.call(this,n)||this;return t.fb=n,t}return Object(o.__extends)(AddonModDataFieldTextComponent,e),AddonModDataFieldTextComponent.prototype.init=function(){if(!this.isShowOrListMode()){var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},AddonModDataFieldTextComponent}(t(181).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModDataFieldNumberComponent(n){var t=e.call(this,n)||this;return t.fb=n,t}return Object(o.__extends)(AddonModDataFieldNumberComponent,e),AddonModDataFieldNumberComponent.prototype.init=function(){if(!this.isShowOrListMode()){var e;if("edit"==this.mode&&this.value){var n=parseFloat(this.value.content);e=isNaN(n)?"":n}this.addControl("f_"+this.field.id,e)}},AddonModDataFieldNumberComponent}(t(181).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(181),i=t(98),l=function(e){function AddonModDataFieldPictureComponent(n,t,o){var r=e.call(this,n)||this;return r.fb=n,r.fileSessionprovider=t,r.domUtils=o,r.files=[],r}return Object(o.__extends)(AddonModDataFieldPictureComponent,e),AddonModDataFieldPictureComponent.prototype.getFiles=function(e){var n=e&&e.files||[];return n.length>0&&(n=[n[0]]),n},AddonModDataFieldPictureComponent.prototype.findFile=function(e,n){return e.find(function(e){return e.filename==n})||!1},AddonModDataFieldPictureComponent.prototype.init=function(){if("search"!=this.mode){if(this.component=i.a.COMPONENT,this.componentId=this.database.coursemodule,this.updateValue(this.value),"edit"==this.mode){this.maxSizeBytes=parseInt(this.field.param3,10),this.fileSessionprovider.setFiles(this.component,this.database.id+"_"+this.field.id,this.files);this.addControl("f_"+this.field.id+"_alttext",this.value&&this.value.content1||"")}}else this.addControl("f_"+this.field.id)},AddonModDataFieldPictureComponent.prototype.updateValue=function(e){var n=this;this.value=e;var t=e&&e.files||[];if(t.length>0){this.image=this.findFile(t,"list"==this.mode?"thumb_"+e.content:e.content),this.image||"list"!=this.mode||(this.image=this.findFile(t,e.content)),this.files=[this.image]}else this.image=!1,this.files=[];"edit"!=this.mode&&(this.entryId=e&&e.recordid||null,this.title=e&&e.content1||"",this.imageUrl=null,setTimeout(function(){n.image&&(n.imageUrl=n.image.offline?n.image.toURL():n.image.fileurl)},1),this.width=this.domUtils.formatPixelsSize(this.field.param1),this.height=this.domUtils.formatPixelsSize(this.field.param2))},AddonModDataFieldPictureComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModDataFieldRadiobuttonComponent(n){var t=e.call(this,n)||this;return t.fb=n,t.options=[],t}return Object(o.__extends)(AddonModDataFieldRadiobuttonComponent,e),AddonModDataFieldRadiobuttonComponent.prototype.init=function(){if(!this.isShowOrListMode()){this.options=this.field.param1.split("\n");var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},AddonModDataFieldRadiobuttonComponent}(t(181).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(98),i=function(e){function AddonModDataFieldTextareaComponent(n,t){var o=e.call(this,n)||this;return o.fb=n,o.textUtils=t,o}return Object(o.__extends)(AddonModDataFieldTextareaComponent,e),AddonModDataFieldTextareaComponent.prototype.format=function(e){return e?this.textUtils.replacePluginfileUrls(e.content,e&&e.files||[]):""},AddonModDataFieldTextareaComponent.prototype.init=function(){if(this.component=r.a.COMPONENT,this.componentId=this.database.coursemodule,!this.isShowOrListMode()){var e;if("edit"==this.mode){e=this.value?this.textUtils.replacePluginfileUrls(this.value.content,this.value&&this.value.files||[]):""}this.addControl("f_"+this.field.id,e)}},AddonModDataFieldTextareaComponent}(t(181).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonModDataFieldUrlComponent(n){var t=e.call(this,n)||this;return t.fb=n,t}return Object(o.__extends)(AddonModDataFieldUrlComponent,e),AddonModDataFieldUrlComponent.prototype.init=function(){if(!this.isShowOrListMode()){var e;"edit"==this.mode&&this.value&&(e=this.value.content),this.addControl("f_"+this.field.id,e)}},AddonModDataFieldUrlComponent}(t(181).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(54),r=function(){function AddonModLabelProvider(e,n,t){this.sitesProvider=e,this.filepoolProvider=n,this.utils=t,this.ROOT_CACHE_KEY="mmaModLabel:"}return e=AddonModLabelProvider,AddonModLabelProvider.prototype.getLabelDataCacheKey=function(e){return this.ROOT_CACHE_KEY+"label:"+e},AddonModLabelProvider.prototype.getLabelByField=function(e,n,t,r,i,l){var s=this;return this.sitesProvider.getSite(l).then(function(l){var a={courseids:[e]},u={cacheKey:s.getLabelDataCacheKey(e),updateFrequency:o.a.FREQUENCY_RARELY};return r?u.omitExpires=!0:i&&(u.getFromCache=!1,u.emergencyCache=!1),l.read("mod_label_get_labels_by_courses",a,u).then(function(e){if(e&&e.labels){var o=e.labels.find(function(e){return e[n]==t});if(o)return o}return Promise.reject(null)})})},AddonModLabelProvider.prototype.getLabel=function(e,n,t,o,r){return this.getLabelByField(e,"coursemodule",n,t,o,r)},AddonModLabelProvider.prototype.getLabelById=function(e,n,t,o,r){return this.getLabelByField(e,"id",n,t,o,r)},AddonModLabelProvider.prototype.invalidateLabelData=function(e,n){var t=this;return this.sitesProvider.getSite(null).then(function(n){return n.invalidateWsCacheForKey(t.getLabelDataCacheKey(e))})},AddonModLabelProvider.prototype.invalidateContent=function(n,t,o){o=o||this.sitesProvider.getCurrentSiteId();var r=[];return r.push(this.invalidateLabelData(t,o)),r.push(this.filepoolProvider.invalidateFilesByComponent(o,e.COMPONENT,n,!0)),this.utils.allPromises(r)},AddonModLabelProvider.prototype.isGetLabelAvailable=function(e){return this.sitesProvider.getSite(e).then(function(e){return e.wsAvailable("mod_label_get_labels_by_courses")})},AddonModLabelProvider.prototype.isGetLabelAvailableForSite=function(e){return(e=e||this.sitesProvider.getCurrentSite()).wsAvailable("mod_label_get_labels_by_courses")},AddonModLabelProvider.COMPONENT="mmaModLabel",AddonModLabelProvider;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonQbehaviourDeferredFeedbackHandler(e,n){this.questionDelegate=e,this.questionProvider=n,this.name="AddonQbehaviourDeferredFeedback",this.type="deferredfeedback"}return AddonQbehaviourDeferredFeedbackHandler.prototype.determineNewState=function(e,n,t,o){return this.determineNewStateDeferred(e,n,t,o)},AddonQbehaviourDeferredFeedbackHandler.prototype.determineNewStateDeferred=function(e,n,t,o,r,i){var l=this;return this.questionProvider.getQuestion(e,n,t.slot,o).catch(function(){return t}).then(function(s){var a=l.questionProvider.getState(s.state);return a.finished||!a.active?a:l.questionProvider.getQuestionAnswers(e,n,t.slot,!1,o).then(function(e){var n=l.questionProvider.getBasicAnswers(t.answers);e=l.questionProvider.convertAnswersArrayToObject(e,!0);var o=l.questionProvider.getBasicAnswers(e);if(i){if(i(t,e,o,t.answers,n))return a}else if(l.questionDelegate.isSameResponse(t,o,n))return a;var s,u;if((s=r?r(t,t.answers):l.questionDelegate.isCompleteResponse(t,n))<0)u="cannotdeterminestatus";else if(s>0)u="complete";else{var d=l.questionDelegate.isGradableResponse(t,n);u=d<0?"cannotdeterminestatus":d>0?"invalid":"todo"}return l.questionProvider.getState(u)})})},AddonQbehaviourDeferredFeedbackHandler.prototype.isEnabled=function(){return!0},AddonQbehaviourDeferredFeedbackHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function AddonQbehaviourInformationItemComponent(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(365),r=function(){function AddonQtypeMultichoiceHandler(e){this.utils=e,this.name="AddonQtypeMultichoice",this.type="qtype_multichoice"}return AddonQtypeMultichoiceHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeMultichoiceHandler.prototype.isCompleteResponse=function(e,n){var t=!0,o=!1;for(var r in n)-1!=r.indexOf("choice")&&(t=!1,n[r]&&(o=!0));return t?this.isCompleteResponseSingle(n):o?1:0},AddonQtypeMultichoiceHandler.prototype.isCompleteResponseSingle=function(e){return e.answer&&""!==e.answer?1:0},AddonQtypeMultichoiceHandler.prototype.isEnabled=function(){return!0},AddonQtypeMultichoiceHandler.prototype.isGradableResponse=function(e,n){return this.isCompleteResponse(e,n)},AddonQtypeMultichoiceHandler.prototype.isGradableResponseSingle=function(e){return this.isCompleteResponseSingle(e)},AddonQtypeMultichoiceHandler.prototype.isSameResponse=function(e,n,t){var o=!0,r=!0;for(var i in t)-1!=i.indexOf("choice")&&(o=!1,this.utils.sameAtKeyMissingIsBlank(n,t,i)||(r=!1));return o?this.isSameResponseSingle(n,t):r},AddonQtypeMultichoiceHandler.prototype.isSameResponseSingle=function(e,n){return this.utils.sameAtKeyMissingIsBlank(e,n,"answer")},AddonQtypeMultichoiceHandler.prototype.prepareAnswers=function(e,n,t,o){!e||e.multi||void 0===n[e.optionsName]||n[e.optionsName]||delete n[e.optionsName]},AddonQtypeMultichoiceHandler}()},function(e,n,t){"use strict";var o=t(0),r=(t(1),t(7),t(198)),i=function(){function AddonQtypeDdImageOrTextQuestion(e,n,t,o,r,i){this.domUtils=n,this.container=t,this.question=o,this.readOnly=r,this.drops=i,this.toLoad=0,this.afterImageLoadDone=!1,this.proportion=1,this.logger=e.getInstance("AddonQtypeDdImageOrTextQuestion"),this.initializer(o)}return AddonQtypeDdImageOrTextQuestion.prototype.calculateImgProportion=function(){var e=this.doc.bgImg();this.proportion=1,e.width!=e.naturalWidth&&(this.proportion=e.width/e.naturalWidth)},AddonQtypeDdImageOrTextQuestion.prototype.convertToWindowXY=function(e){var n=this.doc.bgImg(),t=this.domUtils.getElementXY(n,null,"ddarea");return e[0]*=this.proportion,e[1]*=this.proportion,[Number(e[0])+t[0]+1,Number(e[1])+t[1]+1]},AddonQtypeDdImageOrTextQuestion.prototype.createAllDragAndDrops=function(){this.initDrops();this.doc.dragItemsArea().classList.add("clearfix"),this.makeDragAreaClickable();for(var e=this.doc.dragItemHomes(),n=0,t=0;t<e.length;t++){var o=e[t],r=this.doc.getClassnameNumericSuffix(o,"dragitemhomes"),i=this.doc.getClassnameNumericSuffix(o,"choice"),l=this.doc.getClassnameNumericSuffix(o,"group");if("IMG"==o.tagName){var s=document.createElement("div");s.className=o.className,o.className="",o.parentNode.insertBefore(s,o),s.appendChild(o)}var a=this.doc.cloneNewDragItem(n,r);if(n++,this.readOnly||this.draggableForQuestion(a,l,i),a.classList.contains("infinite"))for(var u=this.doc.dropZoneGroup(l).length-1;u>0;){var d=this.doc.cloneNewDragItem(n,r);n++,this.readOnly||this.draggableForQuestion(d,l,i),u--}}if(this.repositionDragsForQuestion(),!this.readOnly){this.doc.dropZones().forEach(function(e){e.setAttribute("tabIndex","0")})}},AddonQtypeDdImageOrTextQuestion.prototype.deselectDrags=function(){this.doc.dragItems().forEach(function(e){e.classList.remove("beingdragged")}),this.selected=null},AddonQtypeDdImageOrTextQuestion.prototype.destroy=function(){this.stopPolling(),this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},AddonQtypeDdImageOrTextQuestion.prototype.docStructure=function(e){var n=this,t=this.container.querySelector(".addon-qtype-ddimageortext-container"),o={},r=t.querySelector("div.draghomes");if(r){t.querySelector("div.dragitems").remove();var i=t.querySelector("div.ddarea");i.appendChild(t.querySelector("div.dropzones")),i.appendChild(r),r.classList.remove("draghomes"),r.classList.add("dragitems"),Array.from(r.querySelectorAll(".draghome")).forEach(function(e,n){e.classList.add("dragitemhomes"+n)})}else r=t.querySelector("div.dragitems");return o.topNode=function(){return t},o.dragItemsArea=function(){return r},o.dragItems=function(){return Array.from(r.querySelectorAll(".drag"))},o.dropZones=function(){return Array.from(t.querySelectorAll("div.dropzones div.dropzone"))},o.dropZoneGroup=function(e){return Array.from(t.querySelectorAll("div.dropzones div.group"+e))},o.dragItemsClonedFrom=function(e){return Array.from(r.querySelectorAll(".dragitems"+e))},o.dragItem=function(e){return r.querySelector(".draginstance"+e)},o.dragItemsInGroup=function(e){return Array.from(r.querySelectorAll(".drag.group"+e))},o.dragItemHomes=function(){return Array.from(r.querySelectorAll(".draghome"))},o.bgImg=function(){return t.querySelector(".dropbackground")},o.dragItemHome=function(e){return r.querySelector(".dragitemhomes"+e)},o.getClassnameNumericSuffix=function(e,t){if(e.classList&&e.classList.length)for(var o=new RegExp("^"+t+"([0-9])+$"),r=new RegExp("([0-9])+$"),i=0;i<e.classList.length;i++)if(o.test(e.classList[i])){var l=r.exec(e.classList[i]);return Number(l[0])}n.logger.warn('Prefix "'+t+'" not found in class names.')},o.cloneNewDragItem=function(e,n){var t=o.dragItemHome(n);if(null===t)return null;var r,i=t.querySelector("img");if(i){var l=i.cloneNode(!0);(r=document.createElement("div")).appendChild(l),r.className=t.className,l.className=""}else r=t.cloneNode(!0);return r.classList.remove("dragitemhomes"+n),r.classList.remove("draghome"),r.classList.add("dragitems"+n),r.classList.add("draginstance"+e),r.classList.add("drag"),r.style.visibility="inherit",r.style.position="absolute",r.setAttribute("draginstanceno",String(e)),r.setAttribute("dragitemno",String(n)),t.parentElement.insertBefore(r,t.nextSibling),r},o},AddonQtypeDdImageOrTextQuestion.prototype.draggableForQuestion=function(e,n,t){var o=this;e.setAttribute("group",String(n)),e.setAttribute("choice",String(t)),e.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.classList.contains("beingdragged")?o.deselectDrags():o.selectDrag(e)})},AddonQtypeDdImageOrTextQuestion.prototype.dropClick=function(e){var n=this.selected;n&&(this.deselectDrags(),Number(e.getAttribute("group"))===Number(n.getAttribute("group"))&&this.placeDragInDrop(n,e))},AddonQtypeDdImageOrTextQuestion.prototype.getChoicesForDrop=function(e,n){return Array.from(this.doc.topNode().querySelectorAll("div.dragitemgroup"+n.getAttribute("group")+" .choice"+e+".drag"))},AddonQtypeDdImageOrTextQuestion.prototype.getUnplacedChoiceForDrop=function(e,n){for(var t=this.getChoicesForDrop(e,n),o=0;o<t.length;o++){var r=t[o];if(this.readOnly||!r.classList.contains("placed")&&!r.classList.contains("beingdragged"))return r}return null},AddonQtypeDdImageOrTextQuestion.prototype.initDrops=function(){for(var e=this,n=this.doc.topNode().querySelector("div.dropzones"),t={},o=1;o<=8;o++){var r=document.createElement("div");r.className="dropzonegroup"+o,n.appendChild(r),t[o]=r}var i=function(n){var o=l.drops[n],r="dropzone group"+o.group+" place"+n,i=o.text.replace('"','"'),s=document.createElement("div");s.setAttribute("title",i),s.className=r,t[o.group].appendChild(s),s.style.opacity="0.5",s.setAttribute("xy",o.xy),s.setAttribute("aria-label",o.text),s.setAttribute("place",n),s.setAttribute("inputid",o.fieldname.replace(":","_")),s.setAttribute("group",o.group),s.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.dropClick(s)})},l=this;for(var s in this.drops)i(s)},AddonQtypeDdImageOrTextQuestion.prototype.initializer=function(e){var n=this;if(this.doc=this.docStructure(e.slot),this.readOnly){this.doc.topNode().classList.add("readonly")}setTimeout(function(){var e=n.doc.bgImg();e.complete&&e.naturalWidth||(n.toLoad++,e.addEventListener("load",function(){n.toLoad--}));n.doc.dragItemHomes().forEach(function(e){if("IMG"==e.tagName){var t=e;t.complete&&t.naturalWidth||(n.toLoad++,t.addEventListener("load",function(){n.toLoad--}))}}),n.pollForImageLoad()}),this.resizeFunction=this.repositionDragsForQuestion.bind(this),window.addEventListener("resize",this.resizeFunction)},AddonQtypeDdImageOrTextQuestion.prototype.makeDragAreaClickable=function(){var e=this;if(!this.readOnly){this.doc.dragItemsArea().addEventListener("click",function(n){var t=e.selected;if(!t)return!1;e.deselectDrags(),e.removeDragFromDrop(t),n.preventDefault(),n.stopPropagation()})}},AddonQtypeDdImageOrTextQuestion.prototype.placeDragInDrop=function(e,n){var t=n.getAttribute("inputid"),o=this.doc.topNode().querySelector("input#"+t),r=e.getAttribute("inputid");if(r&&r!=t){this.doc.topNode().querySelector("input#"+r).setAttribute("value","")}var i=this.domUtils.getElementXY(n,null,"ddarea");e.style.left=i[0]-1+"px",e.style.top=i[1]-1+"px",e.classList.add("placed"),o.setAttribute("value",e.getAttribute("choice")),e.setAttribute("inputid",t)},AddonQtypeDdImageOrTextQuestion.prototype.pollForImageLoad=function(){var e=this;this.afterImageLoadDone||(this.toLoad<=0&&(this.createAllDragAndDrops(),this.afterImageLoadDone=!0,this.question.loaded=!0),setTimeout(function(){e.pollForImageLoad()},1e3))},AddonQtypeDdImageOrTextQuestion.prototype.removeDragFromDrop=function(e){var n=e.getAttribute("inputid");if(n){this.doc.topNode().querySelector("input#"+n).setAttribute("value","")}var t=this.doc.dragItemHome(Number(e.getAttribute("dragitemno"))),o=this.domUtils.getElementXY(t,null,"ddarea");e.style.left=o[0]+"px",e.style.top=o[1]+"px",e.classList.remove("placed"),e.setAttribute("inputid","")},AddonQtypeDdImageOrTextQuestion.prototype.repositionDragsForQuestion=function(){var e=this.doc.dragItems();e.forEach(function(e){e.classList.remove("placed"),e.setAttribute("inputid","")}),this.calculateImgProportion();for(var n=this.doc.dragItemHomes(),t=function(e){var t=n[e],r=t.querySelector("img");if(r&&r.naturalWidth>0){var i=[Math.round(r.naturalWidth*o.proportion),Math.round(r.naturalHeight*o.proportion)];r.style.width=i[0]+"px",r.style.height=i[1]+"px";var l=o.doc.getClassnameNumericSuffix(t,"dragitemhomes"),s=o.doc.getClassnameNumericSuffix(t,"group");Array.from(o.doc.topNode().querySelectorAll(".drag.group"+s+".dragitems"+l+"  img")).forEach(function(e){e.style.width=i[0]+"px",e.style.height=i[1]+"px"})}},o=this,r=0;r<n.length;r++)t(r);this.updatePaddingSizesAll();var i=this.doc.dropZones();for(r=0;r<i.length;r++){var l=i[r],s=l.getAttribute("xy").split(",").map(function(e){return Number(e)}),a=this.convertToWindowXY(s);l.style.left=a[0]+"px",l.style.top=a[1]+"px";var u="input#"+l.getAttribute("inputid"),d=this.doc.topNode().querySelector(u),c=Number(d.value);if(c>0){null!==(p=this.getUnplacedChoiceForDrop(c,l))&&this.placeDragInDrop(p,l)}}for(r=0;r<e.length;r++){var p;(p=e[r]).classList.contains("placed")||p.classList.contains("beingdragged")||this.removeDragFromDrop(p)}},AddonQtypeDdImageOrTextQuestion.prototype.selectDrag=function(e){this.deselectDrags(),this.selected=e,e.classList.add("beingdragged")},AddonQtypeDdImageOrTextQuestion.prototype.stopPolling=function(){this.afterImageLoadDone=!0},AddonQtypeDdImageOrTextQuestion.prototype.updatePaddingSizeForGroup=function(e){var n=Array.from(this.doc.topNode().querySelectorAll(".draghome.group"+e));if(0!==n.length){for(var t=0,o=0,r=0;r<n.length;r++){var i=n[r],l=i.querySelector("img");if(l)t=Math.max(t,Math.round(this.proportion*l.naturalWidth)),o=Math.max(o,Math.round(this.proportion*l.naturalHeight));else{var s=i.style.padding;i.style.padding="",t=Math.max(t,Math.round(i.clientWidth)),o=Math.max(o,Math.round(i.clientHeight)),i.style.padding=s}}if(t<=0||o<=0)return;t=Math.round(t+8*this.proportion),o=Math.round(o+8*this.proportion);var a=function(r){var i=n[r],l=i.querySelector("img"),s=void 0,a=void 0;if(l)s=Math.round(l.naturalWidth*u.proportion),a=Math.round(l.naturalHeight*u.proportion);else{var d=i.style.padding;i.style.padding="",s=Math.round(i.clientWidth),a=Math.round(i.clientHeight),i.style.padding=d}var c=Math.round((o-a)/2),p=Math.round((t-s)/2),f=t-(s+2*p),h=o-(a+2*c);i.style.padding=c+"px "+p+"px "+(c+h)+"px "+(p+f)+"px";var m=u.doc.getClassnameNumericSuffix(i,"dragitemhomes");Array.from(u.doc.topNode().querySelectorAll(".drag.group"+e+".dragitems"+m)).forEach(function(e){e.style.padding=c+"px "+p+"px "+(c+h)+"px "+(p+f)+"px"})},u=this;for(r=0;r<n.length;r++)a(r);this.doc.dropZoneGroup(e).forEach(function(e){e.style.width=t+2+"px ",e.style.height=o+2+"px "})}},AddonQtypeDdImageOrTextQuestion.prototype.updatePaddingSizesAll=function(){for(var e=1;e<=8;e++)this.updatePaddingSizeForGroup(e)},AddonQtypeDdImageOrTextQuestion}();t.d(n,"a",function(){return l});var l=function(e){function AddonQtypeDdImageOrTextComponent(n,t,o){var r=e.call(this,n,"AddonQtypeDdImageOrTextComponent",t)||this;return r.loggerProvider=n,r.destroyed=!1,r.textIsRendered=!1,r.ddAreaisRendered=!1,r.element=o.nativeElement,r}return Object(o.__extends)(AddonQtypeDdImageOrTextComponent,e),AddonQtypeDdImageOrTextComponent.prototype.ngOnInit=function(){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var e=this.domUtils.convertToElement(this.question.html),n=e.querySelector(".ddarea");if(this.question.text=this.domUtils.getContentsOfElement(e,".qtext"),!n||void 0===this.question.text)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.ddArea=n.outerHTML,this.question.readOnly=!1,this.question.initObjects?(void 0!==this.question.initObjects.drops&&(this.drops=this.question.initObjects.drops),void 0!==this.question.initObjects.readonly&&(this.question.readOnly=this.question.initObjects.readonly)):this.question.amdArgs&&(void 0!==this.question.amdArgs[1]&&(this.question.readOnly=this.question.amdArgs[1]),void 0!==this.question.amdArgs[2]&&(this.drops=this.question.amdArgs[2])),this.question.loaded=!1},AddonQtypeDdImageOrTextComponent.prototype.ddAreaRendered=function(){this.ddAreaisRendered=!0,this.textIsRendered&&this.questionRendered()},AddonQtypeDdImageOrTextComponent.prototype.textRendered=function(){this.textIsRendered=!0,this.ddAreaisRendered&&this.questionRendered()},AddonQtypeDdImageOrTextComponent.prototype.questionRendered=function(){this.destroyed||(this.questionInstance=new i(this.loggerProvider,this.domUtils,this.element,this.question,this.question.readOnly,this.drops))},AddonQtypeDdImageOrTextComponent.prototype.ngOnDestroy=function(){this.destroyed=!0,this.questionInstance&&this.questionInstance.destroy()},AddonQtypeDdImageOrTextComponent}(r.a)},function(e,n,t){"use strict";var o=t(0),r=(t(1),t(7),t(198)),i=(t(18),t(2),t(23),function(){function AddonQtypeDdMarkerGraphicsApi(e,n){this.instance=e,this.domUtils=n,this.NS="http://www.w3.org/2000/svg"}return AddonQtypeDdMarkerGraphicsApi.prototype.addShape=function(e,n){var t=document.createElementNS(this.NS,e.type);t.setAttribute("fill",e.color),t.setAttribute("fill-opacity","0.5"),t.setAttribute("stroke","black");for(var o in n)t.setAttribute(o,String(n[o]));return this.dropZone.appendChild(t),t},AddonQtypeDdMarkerGraphicsApi.prototype.clear=function(){var e=this.instance.doc.bgImg(),n=this.domUtils.getElementXY(e,null,"ddarea"),t=this.instance.doc.topNode().querySelector("div.ddarea div.dropzones");t.style.left=n[0]+"px",t.style.top=n[1]+"px",t.style.width=e.width+"px",t.style.height=e.height+"px";var o=this.instance.doc.markerTexts();if(o.style.left=n[0]+"px",o.style.top=n[1]+"px",o.style.width=e.width+"px",o.style.height=e.height+"px",this.dropZone)for(;this.dropZone.firstChild;)this.dropZone.removeChild(this.dropZone.firstChild);else this.dropZone=document.createElementNS(this.NS,"svg"),t.appendChild(this.dropZone);this.dropZone.style.width=e.width+"px",this.dropZone.style.height=e.height+"px",this.instance.shapes=[]},AddonQtypeDdMarkerGraphicsApi}()),l=function(){function AddonQtypeDdMarkerQuestion(e,n,t,o,r,l,s,a){this.domUtils=n,this.textUtils=t,this.container=o,this.question=r,this.readOnly=l,this.dropZones=s,this.imgSrc=a,this.COLOURS=["#FFFFFF","#B0C4DE","#DCDCDC","#D8BFD8","#87CEFA","#DAA520","#FFD700","#F0E68C"],this.afterImageLoadDone=!1,this.nextColourIndex=0,this.proportion=1,this.shapes=[],this.logger=e.getInstance("AddonQtypeDdMarkerQuestion"),this.graphics=new i(this,this.domUtils),this.initializer(r)}return AddonQtypeDdMarkerQuestion.prototype.calculateImgProportion=function(){var e=this.doc.bgImg();this.proportion=1,e.width!=e.naturalWidth&&(this.proportion=e.width/e.naturalWidth)},AddonQtypeDdMarkerQuestion.prototype.cloneNewDragItem=function(e,n){e.querySelector("span.markertext").style.opacity="0.6";var t=e.cloneNode(!0);return t.classList.remove("draghome"),t.classList.add("dragitem"),t.classList.add("item"+n),e.parentElement.insertBefore(t,e.nextSibling),this.readOnly||this.draggable(t),t},AddonQtypeDdMarkerQuestion.prototype.convertToWindowXY=function(e){var n=this.doc.bgImg(),t=this.domUtils.getElementXY(n,null,"ddarea");return e[0]*=this.proportion,e[1]*=this.proportion,[Number(e[0])+t[0],Number(e[1])+t[1]]},AddonQtypeDdMarkerQuestion.prototype.coordsInImg=function(e){var n=this.doc.bgImg();return e[0]*this.proportion<=n.width&&e[1]*this.proportion<=n.height},AddonQtypeDdMarkerQuestion.prototype.deselectDrags=function(){this.doc.dragItems().forEach(function(e){e.classList.remove("beingdragged")}),this.selected=null},AddonQtypeDdMarkerQuestion.prototype.destroy=function(){this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},AddonQtypeDdMarkerQuestion.prototype.docStructure=function(e){var n=this,t=this.container.querySelector(".addon-qtype-ddmarker-container"),o=t.querySelector("div.dragitems");return{topNode:function(){return t},bgImg:function(){return t.querySelector(".dropbackground")},dragItemsArea:function(){return o},dragItems:function(){return Array.from(o.querySelectorAll(".dragitem"))},dragItemsForChoice:function(e){return Array.from(o.querySelectorAll("span.dragitem.choice"+e))},dragItemForChoice:function(e,n){return o.querySelector("span.dragitem.choice"+e+".item"+n)},dragItemBeingDragged:function(e){return o.querySelector("span.dragitem.beingdragged.choice"+e)},dragItemHome:function(e){return o.querySelector("span.draghome.choice"+e)},dragItemHomes:function(){return Array.from(o.querySelectorAll("span.draghome"))},getClassnameNumericSuffix:function(e,t){if(e.classList&&e.classList.length)for(var o=new RegExp("^"+t+"([0-9])+$"),r=new RegExp("([0-9])+$"),i=0;i<e.classList.length;i++)if(o.test(e.classList[i])){var l=r.exec(e.classList[i]);return Number(l[0])}n.logger.warn('Prefix "'+t+'" not found in class names.')},inputsForChoices:function(){return Array.from(t.querySelectorAll("input.choices"))},inputForChoice:function(e){return t.querySelector("input.choice"+e)},markerTexts:function(){return t.querySelector("div.markertexts")}}},AddonQtypeDdMarkerQuestion.prototype.draggable=function(e){var n=this;e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var o=n.selected;if(o&&!e.classList.contains("unplaced")){var r=n.domUtils.getElementXY(e,null,"ddarea"),i=n.doc.bgImg(),l=n.domUtils.getElementXY(i,null,"ddarea");if(r[0]=r[0]-l[0]+t.offsetX,r[1]=r[1]-l[1]+t.offsetY,r[0]<=i.width&&r[1]<=i.height)return n.deselectDrags(),void n.dropDrag(o,r)}e.classList.contains("beingdragged")?n.deselectDrags():n.selectDrag(e)})},AddonQtypeDdMarkerQuestion.prototype.dragHomeXY=function(e){var n=this.doc.dragItemHome(e),t=this.domUtils.getElementXY(n,null,"ddarea");return[t[0],t[1]]},AddonQtypeDdMarkerQuestion.prototype.drawDropZone=function(e,n,t,o,r){var i,l=this,s=this.doc.markerTexts();if(i=s.querySelector("span.markertext"+e))""!==n?i.innerHTML=n:i.remove();else if(""!==n){var a="markertext markertext"+e,u=document.createElement("span");u.className=a,u.innerHTML=n,s.appendChild(u)}var d="drawShape"+this.textUtils.ucFirst(t);if(this[d]instanceof Function){var c=this[d](e,o,r);if(null!==c){var p=this.doc.topNode().querySelector("div.ddarea div.markertexts span.markertext"+e);if(null!==p){c[0]=(c[0]-p.offsetWidth/2)*this.proportion,c[1]=(c[1]-p.offsetHeight/2)*this.proportion,p.style.opacity="0.6",p.style.left=c[0]+"px",p.style.top=c[1]+"px";var f=p.querySelector("a");null!==f&&(f.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),l.shapes.forEach(function(e){e.css("fill-opacity",.5)}),l.shapes[e].css("fill-opacity",1),setTimeout(function(){l.shapes[e].css("fill-opacity",.5)},2e3)}),f.setAttribute("tabIndex","0"))}}}},AddonQtypeDdMarkerQuestion.prototype.drawShapeCircle=function(e,n,t){var o=n.match(/(\d+),(\d+);(\d+)/);if(o&&4===o.length){o.shift();var r=o.map(function(e){return Number(e)});if(this.coordsInImg([r[0]-r[2],r[1]-r[2]]))return this.shapes[e]=this.graphics.addShape({type:"circle",color:t},{cx:r[0]*this.proportion,cy:r[1]*this.proportion,r:r[2]*this.proportion}),[r[0],r[1]]}return null},AddonQtypeDdMarkerQuestion.prototype.drawShapeRectangle=function(e,n,t){var o=n.match(/(\d+),(\d+);(\d+),(\d+)/);if(o&&5===o.length){o.shift();var r=o.map(function(e){return Number(e)});if(this.coordsInImg([r[0]+r[2],r[1]+r[3]]))return this.shapes[e]=this.graphics.addShape({type:"rect",color:t},{x:r[0]*this.proportion,y:r[1]*this.proportion,width:r[2]*this.proportion,height:r[3]*this.proportion}),[r[0]+r[2]/2,r[1]+r[3]/2]}return null},AddonQtypeDdMarkerQuestion.prototype.drawShapePolygon=function(e,n,t){var o=n.split(";"),r=[],i=this.doc.bgImg(),l=[0,0],s=[i.width,i.height];for(var a in o){var u=o[a].match(/^(\d+),(\d+)$/),d=u&&u.map(function(e){return Number(e)});null!==d&&this.coordsInImg([d[1],d[2]])&&(d[1]*=this.proportion,d[2]*=this.proportion,s[0]=Math.min(d[1],s[0]),s[1]=Math.min(d[2],s[1]),l[0]=Math.max(d[1],l[0]),l[1]=Math.max(d[2],l[1]),r.push(d[1]+","+d[2]))}return r.length>2?(this.shapes[e]=this.graphics.addShape({type:"polygon",color:t},{points:r.join(" ")}),[(s[0]+l[0])/2,(s[1]+l[1])/2]):null},AddonQtypeDdMarkerQuestion.prototype.dropDrag=function(e,n){var t=this.getChoiceNoForNode(e);n&&(this.proportion<1&&(n[0]=Math.round(n[0]/this.proportion)),this.proportion<1&&(n[1]=Math.round(n[1]/this.proportion))),this.saveAllXYForChoice(t,e,n),this.redrawDragsAndDrops()},AddonQtypeDdMarkerQuestion.prototype.getCoords=function(e){var n=this.getChoiceNoForNode(e),t=e.getAttribute("value"),o=e.classList.contains("infinite"),r=this.getNoOfDragsForNode(e),i=null!==this.doc.dragItemBeingDragged(n),l=[];if(""!==t&&void 0!==t&&null!==t)for(var s=t.split(";"),a=0;a<s.length;a++){var u=s[a].split(",").map(function(e){return Number(e)});l[l.length]=this.convertToWindowXY(u)}return(o||l.length+(i?1:0)<r)&&(l[l.length]=this.dragHomeXY(n)),l},AddonQtypeDdMarkerQuestion.prototype.getChoiceNoForNode=function(e){return Number(this.doc.getClassnameNumericSuffix(e,"choice"))},AddonQtypeDdMarkerQuestion.prototype.getDragXY=function(e){var n=this.domUtils.getElementXY(e,null,"ddarea"),t=this.doc.bgImg(),o=this.domUtils.getElementXY(t,null,"ddarea");return n[0]-=o[0],n[1]-=o[1],this.proportion<1&&(n[0]=Math.round(n[0]/this.proportion)),this.proportion<1&&(n[1]=Math.round(n[1]/this.proportion)),n},AddonQtypeDdMarkerQuestion.prototype.getItemNoForNode=function(e){return Number(this.doc.getClassnameNumericSuffix(e,"item"))},AddonQtypeDdMarkerQuestion.prototype.getNextColour=function(){var e=this.COLOURS[this.nextColourIndex];return this.nextColourIndex++,this.nextColourIndex===this.COLOURS.length&&(this.nextColourIndex=0),e},AddonQtypeDdMarkerQuestion.prototype.getNoOfDragsForNode=function(e){return Number(this.doc.getClassnameNumericSuffix(e,"noofdrags"))},AddonQtypeDdMarkerQuestion.prototype.initializer=function(e){var n=this;this.doc=this.docStructure(e.slot),setTimeout(function(){n.pollForImageLoad()}),this.resizeFunction=this.redrawDragsAndDrops.bind(this),window.addEventListener("resize",this.resizeFunction)},AddonQtypeDdMarkerQuestion.prototype.makeImageDropable=function(){var e=this;if(!this.readOnly){this.doc.bgImg().addEventListener("click",function(n){var t=e.selected;if(!t)return!1;var o=[n.offsetX,n.offsetY];e.deselectDrags(),e.dropDrag(t,o),n.preventDefault(),n.stopPropagation()});this.doc.dragItemsArea().addEventListener("click",function(n){var t=e.selected;return!!t&&(t.classList.contains("unplaced")?(e.deselectDrags(),!1):(e.deselectDrags(),e.dropDrag(t,null),n.preventDefault(),void n.stopPropagation()))})}},AddonQtypeDdMarkerQuestion.prototype.pollForImageLoad=function(){var e=this;if(!this.afterImageLoadDone){var n=this.doc.bgImg();!n.src&&this.imgSrc&&(n.src=this.imgSrc);var t=function(){n.removeEventListener("load",t),e.makeImageDropable(),setTimeout(function(){e.redrawDragsAndDrops()}),e.afterImageLoadDone=!0,e.question.loaded=!0};n.addEventListener("load",t),setTimeout(function(){e.pollForImageLoad()},500)}},AddonQtypeDdMarkerQuestion.prototype.redrawDragsAndDrops=function(){var e=this.doc.dragItems();e.forEach(function(e){e.classList.add("unneeded","unplaced")}),this.calculateImgProportion();for(var n=this.doc.inputsForChoices(),t=0;t<n.length;t++)for(var o=n[t],r=this.getChoiceNoForNode(o),i=this.getCoords(o),l=this.doc.dragItemHome(r),s=this.dragHomeXY(r),a=0;a<i.length;a++){var u=this.doc.dragItemForChoice(r,a);!u||u.classList.contains("beingdragged")?u=this.cloneNewDragItem(l,a):u.classList.remove("unneeded"),s[0]==i[a][0]&&s[1]==i[a][1]||u.classList.remove("unplaced"),u.style.left=i[a][0]+"px",u.style.top=i[a][1]+"px"}for(var d=0;d<e.length;d++){var c=e[d];c.classList.contains("unneeded")&&!c.classList.contains("beingdragged")&&c.remove()}if(this.dropZones&&0!==this.dropZones.length){this.graphics.clear(),this.restartColours();for(var p in this.dropZones){var f=this.getNextColour(),h=this.dropZones[p],m=Number(p);this.drawDropZone(m,h.markertext,h.shape,h.coords,f)}}},AddonQtypeDdMarkerQuestion.prototype.resetDragXY=function(e){this.setFormValue(e,"")},AddonQtypeDdMarkerQuestion.prototype.restartColours=function(){this.nextColourIndex=0},AddonQtypeDdMarkerQuestion.prototype.saveAllXYForChoice=function(e,n,t){for(var o,r=[],i=this.doc.dragItemsForChoice(e),l=0;l<i.length;l++){var s=this.doc.dragItemForChoice(e,l);s&&(s.classList.remove("item"+l),o=this.getDragXY(s),s.classList.add("item"+r.length),r.push(o))}null!==t?(n.classList.remove("unplaced"),n.classList.add("item"+r.length),r.push(t)):n.classList.add("unplaced"),r.length>0?this.setFormValue(e,r.join(";")):this.resetDragXY(e)},AddonQtypeDdMarkerQuestion.prototype.setFormValue=function(e,n){this.doc.inputForChoice(e).setAttribute("value",n)},AddonQtypeDdMarkerQuestion.prototype.selectDrag=function(e){this.deselectDrags(),this.selected=e,e.classList.add("beingdragged");var n=this.getItemNoForNode(e);null!==n&&e.classList.remove("item"+n)},AddonQtypeDdMarkerQuestion}();t.d(n,"a",function(){return s});var s=function(e){function AddonQtypeDdMarkerComponent(n,t,o,r,i,l){var s=e.call(this,n,"AddonQtypeDdMarkerComponent",t)||this;return s.loggerProvider=n,s.sitesProvider=r,s.urlUtils=i,s.filepoolProvider=l,s.destroyed=!1,s.textIsRendered=!1,s.ddAreaisRendered=!1,s.element=o.nativeElement,s}return Object(o.__extends)(AddonQtypeDdMarkerComponent,e),AddonQtypeDdMarkerComponent.prototype.ngOnInit=function(){if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var e=this.domUtils.convertToElement(this.question.html),n=e.querySelector(".ddarea"),t=e.querySelector(".ddform");if(this.question.text=this.domUtils.getContentsOfElement(e,".qtext"),!n||!t||void 0===this.question.text)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);this.question.ddArea=n.outerHTML;var o=e.querySelector(".wrongparts");o&&(this.question.ddArea+=o.outerHTML),this.question.ddArea+=t.outerHTML,this.question.readOnly=!1,this.question.initObjects?(void 0!==this.question.initObjects.dropzones&&(this.dropZones=this.question.initObjects.dropzones),void 0!==this.question.initObjects.readonly&&(this.question.readOnly=this.question.initObjects.readonly)):this.question.amdArgs&&(void 0!==this.question.amdArgs[1]&&(this.imgSrc=this.question.amdArgs[1]),void 0!==this.question.amdArgs[2]&&(this.question.readOnly=this.question.amdArgs[2]),void 0!==this.question.amdArgs[3]&&(this.dropZones=this.question.amdArgs[3])),this.question.loaded=!1},AddonQtypeDdMarkerComponent.prototype.ddAreaRendered=function(){this.ddAreaisRendered=!0,this.textIsRendered&&this.questionRendered()},AddonQtypeDdMarkerComponent.prototype.textRendered=function(){this.textIsRendered=!0,this.ddAreaisRendered&&this.questionRendered()},AddonQtypeDdMarkerComponent.prototype.questionRendered=function(){var e=this;if(!this.destroyed){var n=this.sitesProvider.getCurrentSite();(this.imgSrc&&n.canDownloadFiles()&&this.urlUtils.isPluginFileUrl(this.imgSrc)?this.filepoolProvider.getSrcByUrl(n.id,this.imgSrc,this.component,this.componentId,0,!0,!0):Promise.resolve(this.imgSrc)).then(function(n){e.domUtils.waitForImages(e.questionTextEl.nativeElement).then(function(){e.questionInstance=new l(e.loggerProvider,e.domUtils,e.textUtils,e.element,e.question,e.question.readOnly,e.dropZones,n)})})}},AddonQtypeDdMarkerComponent.prototype.ngOnDestroy=function(){this.destroyed=!0,this.questionInstance&&this.questionInstance.destroy()},AddonQtypeDdMarkerComponent}(r.a)},function(e,n,t){"use strict";var o=t(0),r=(t(1),t(7),t(198)),i=function(){function AddonQtypeDdwtosQuestion(e,n,t,o,r,i,l){this.domUtils=n,this.container=t,this.question=o,this.readOnly=r,this.inputIds=i,this.textUtils=l,this.nextDragItemNo=1,this.logger=e.getInstance("AddonQtypeDdwtosQuestion"),this.initializer(o)}return AddonQtypeDdwtosQuestion.prototype.cloneDragItem=function(e){var n=e.cloneNode(!0);n.classList.remove("draghome"),n.classList.add("drag"),n.classList.add("no"+this.nextDragItemNo),this.nextDragItemNo++,n.style.visibility="visible",n.style.position="absolute";this.container.querySelector(this.selectors.dragContainer()).appendChild(n),this.readOnly||this.makeDraggable(n)},AddonQtypeDdwtosQuestion.prototype.cloneDragItems=function(){for(var e=Array.from(this.container.querySelectorAll(this.selectors.dragHomes())),n=0;n<e.length;n++)this.cloneDragItemsForOneChoice(e[n])},AddonQtypeDdwtosQuestion.prototype.cloneDragItemsForOneChoice=function(e){if(e.classList.contains("infinite"))for(var n=this.getGroup(e),t=this.container.querySelectorAll(this.selectors.dropsInGroup(n)).length,o=0;o<t;o++)this.cloneDragItem(e);else this.cloneDragItem(e)},AddonQtypeDdwtosQuestion.prototype.cssSelectors=function(e){var n=".addon-qtype-ddwtos-container",t={};return t.topNode=function(){return n},t.dragContainer=function(){return n+" div.drags"},t.drags=function(){return t.dragContainer()+" span.drag"},t.drag=function(e){return t.drags()+".no"+e},t.dragsInGroup=function(e){return t.drags()+".group"+e},t.unplacedDragsInGroup=function(e){return t.dragsInGroup(e)+".unplaced"},t.dragsForChoiceInGroup=function(e,n){return t.dragsInGroup(n)+".choice"+e},t.unplacedDragsForChoiceInGroup=function(e,n){return t.unplacedDragsInGroup(n)+".choice"+e},t.drops=function(){return n+" span.drop"},t.dropForPlace=function(e){return t.drops()+".place"+e},t.dropsInGroup=function(e){return t.drops()+".group"+e},t.dragHomes=function(){return n+" span.draghome"},t.dragHomesGroup=function(e){return n+" .draggrouphomes"+e+" span.draghome"},t.dragHome=function(e,t){return n+" .draggrouphomes"+e+" span.draghome.choice"+t},t.dropsGroup=function(e){return n+" span.drop.group"+e},t},AddonQtypeDdwtosQuestion.prototype.deselectDrags=function(){Array.from(this.container.querySelectorAll(this.selectors.drags())).forEach(function(e){e.classList.remove("selected")}),this.selected=null},AddonQtypeDdwtosQuestion.prototype.destroy=function(){this.resizeFunction&&window.removeEventListener("resize",this.resizeFunction)},AddonQtypeDdwtosQuestion.prototype.getChoice=function(e){return this.getClassnameNumericSuffix(e,"choice")},AddonQtypeDdwtosQuestion.prototype.getClassnameNumericSuffix=function(e,n){if(e.classList&&e.classList.length)for(var t=new RegExp("^"+n+"([0-9])+$"),o=new RegExp("([0-9])+$"),r=0;r<e.classList.length;r++)if(t.test(e.classList[r])){var i=o.exec(e.classList[r]);return Number(i[0])}this.logger.warn('Prefix "'+n+'" not found in class names.')},AddonQtypeDdwtosQuestion.prototype.getGroup=function(e){return this.getClassnameNumericSuffix(e,"group")},AddonQtypeDdwtosQuestion.prototype.getNo=function(e){return this.getClassnameNumericSuffix(e,"no")},AddonQtypeDdwtosQuestion.prototype.getPlace=function(e){return this.getClassnameNumericSuffix(e,"place")},AddonQtypeDdwtosQuestion.prototype.initializer=function(e){var n=this;this.selectors=this.cssSelectors(e.slot);var t=this.container.querySelector(this.selectors.topNode());t.classList.add(this.readOnly?"readonly":"notreadonly"),this.setPaddingSizesAll(),this.cloneDragItems(),this.initialPlaceOfDragItems(),this.makeDropZones(),setTimeout(function(){n.positionDragItems()}),this.resizeFunction=this.positionDragItems.bind(this),window.addEventListener("resize",this.resizeFunction)},AddonQtypeDdwtosQuestion.prototype.initialPlaceOfDragItems=function(){Array.from(this.container.querySelectorAll(this.selectors.drags())).forEach(function(e){e.classList.add("unplaced")}),this.placed={};for(var e in this.inputIds){var n=this.container.querySelector("input#"+this.inputIds[e]),t=Number(n.getAttribute("value"));if(0!==t){var o=this.container.querySelector(this.selectors.dropForPlace(parseInt(e,10)+1)),r=this.getGroup(o),i=this.container.querySelector(this.selectors.unplacedDragsForChoiceInGroup(t,r));this.placeDragInDrop(i,o),this.positionDragItem(i)}}},AddonQtypeDdwtosQuestion.prototype.makeDraggable=function(e){var n=this;e.addEventListener("click",function(){e.classList.contains("selected")?n.deselectDrags():n.selectDrag(e)})},AddonQtypeDdwtosQuestion.prototype.makeDropZone=function(e){var n=this;e.addEventListener("click",function(){var t=n.selected;if(!t)return!1;n.getGroup(t)===n.getGroup(e)&&(n.placeDragInDrop(t,e),n.deselectDrags(),n.positionDragItem(t))})},AddonQtypeDdwtosQuestion.prototype.makeDropZones=function(){var e=this;if(!this.readOnly){Array.from(this.container.querySelectorAll(this.selectors.drops())).forEach(function(n){e.makeDropZone(n)});this.container.querySelector(this.selectors.topNode()+" .answercontainer").addEventListener("click",function(){var n=e.selected;n&&(n.classList.contains("unplaced")?e.deselectDrags():(e.removeDragFromDrop(n),e.deselectDrags(),e.positionDragItem(n)))})}},AddonQtypeDdwtosQuestion.prototype.padToWidthHeight=function(e,n,t){e.style.width=n+"px",e.style.height=t+"px"},AddonQtypeDdwtosQuestion.prototype.placeDragInDrop=function(e,n){var t=this.getPlace(n),o=this.container.querySelector("input#"+this.inputIds[t-1]);o.setAttribute("value",null!==e?String(this.getChoice(e)):"0");for(var r in this.placed)this.placed[r]===t&&delete this.placed[r];null!==e&&(this.placed[this.getNo(e)]=t)},AddonQtypeDdwtosQuestion.prototype.positionDragItem=function(e){var n,t=this.placed[this.getNo(e)];if(t)n=this.domUtils.getElementXY(this.container,this.selectors.dropForPlace(t),"addon-qtype-ddwtos-container"),e.classList.remove("unplaced");else{var o=this.getGroup(e),r=this.getChoice(e);n=this.domUtils.getElementXY(this.container,this.selectors.dragHome(o,r),"answercontainer"),e.classList.add("unplaced")}n&&(e.style.left=n[0]+"px",e.style.top=n[1]+"px")},AddonQtypeDdwtosQuestion.prototype.positionDragItems=function(){var e=this;Array.from(this.container.querySelectorAll(this.selectors.drags())).forEach(function(n){e.positionDragItem(n)})},AddonQtypeDdwtosQuestion.prototype.removeDragFromDrop=function(e){var n=this.placed[this.getNo(e)],t=this.container.querySelector(this.selectors.dropForPlace(n));this.placeDragInDrop(null,t)},AddonQtypeDdwtosQuestion.prototype.selectDrag=function(e){this.deselectDrags(),this.selected=e,e.classList.add("selected")},AddonQtypeDdwtosQuestion.prototype.setPaddingSizesAll=function(){for(var e=1;e<=8;e++)this.setPaddingSizeForGroup(e)},AddonQtypeDdwtosQuestion.prototype.setPaddingSizeForGroup=function(e){var n=this,t=Array.from(this.container.querySelectorAll(this.selectors.dragHomesGroup(e)));if(0!==t.length){var o=0,r=0;t.forEach(function(e){e.innerHTML=n.textUtils.decodeHTML(e.innerHTML),o=Math.max(o,Math.ceil(e.offsetWidth)),r=Math.max(r,Math.ceil(e.offsetHeight))}),o+=8,r+=2,t.forEach(function(e){n.padToWidthHeight(e,o,r)});Array.from(this.container.querySelectorAll(this.selectors.dropsGroup(e))).forEach(function(e){n.padToWidthHeight(e,o+2,r+2)})}},AddonQtypeDdwtosQuestion}();t.d(n,"a",function(){return l});var l=function(e){function AddonQtypeDdwtosComponent(n,t,o){var r=e.call(this,n,"AddonQtypeDdwtosComponent",t)||this;return r.loggerProvider=n,r.inputIds=[],r.destroyed=!1,r.textIsRendered=!1,r.answerAreRendered=!1,r.element=o.nativeElement,r}return Object(o.__extends)(AddonQtypeDdwtosComponent,e),AddonQtypeDdwtosComponent.prototype.ngOnInit=function(){var e=this;if(!this.question)return this.logger.warn("Aborting because of no question received."),this.questionHelper.showComponentError(this.onAbort);var n=this.domUtils.convertToElement(this.question.html);this.questionHelper.replaceCorrectnessClasses(n),this.questionHelper.replaceFeedbackClasses(n),this.questionHelper.treatCorrectnessIcons(n);var t=n.querySelector(".answercontainer");if(!t)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);if(this.question.readOnly=t.classList.contains("readonly"),this.question.answers=t.outerHTML,this.question.text=this.domUtils.getContentsOfElement(n,".qtext"),void 0===this.question.text)return this.logger.warn("Aborting because of an error parsing question.",this.question.name),this.questionHelper.showComponentError(this.onAbort);Array.from(n.querySelectorAll('input[type="hidden"]:not([name*=sequencecheck])')).forEach(function(n){e.question.text+=n.outerHTML,e.inputIds.push(n.getAttribute("id"))}),this.question.loaded=!1},AddonQtypeDdwtosComponent.prototype.answersRendered=function(){this.answerAreRendered=!0,this.textIsRendered&&this.questionRendered()},AddonQtypeDdwtosComponent.prototype.textRendered=function(){this.textIsRendered=!0,this.answerAreRendered&&this.questionRendered()},AddonQtypeDdwtosComponent.prototype.questionRendered=function(){var e=this;this.destroyed||this.domUtils.waitForImages(this.questionTextEl.nativeElement).then(function(){e.questionInstance=new i(e.loggerProvider,e.domUtils,e.element,e.question,e.question.readOnly,e.inputIds,e.textUtils),e.questionHelper.treatCorrectnessIconsClicks(e.element,e.component,e.componentId,e.contextLevel,e.contextInstanceId,e.courseId),e.question.loaded=!0})},AddonQtypeDdwtosComponent.prototype.ngOnDestroy=function(){this.destroyed=!0,this.questionInstance&&this.questionInstance.destroy()},AddonQtypeDdwtosComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonQtypeDescriptionComponent(n,t){return e.call(this,n,"AddonQtypeDescriptionComponent",t)||this}return Object(o.__extends)(AddonQtypeDescriptionComponent,e),AddonQtypeDescriptionComponent.prototype.ngOnInit=function(){var e=this.initComponent();if(e){var n=e.querySelector('input[type="hidden"][name*=seen]');n&&(this.question.seenInput={name:n.name,value:n.value})}},AddonQtypeDescriptionComponent}(t(198).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(198),i=function(e){function AddonQtypeEssayComponent(n,t,o){var r=e.call(this,n,"AddonQtypeEssayComponent",t)||this;return r.fb=o,r}return Object(o.__extends)(AddonQtypeEssayComponent,e),AddonQtypeEssayComponent.prototype.ngOnInit=function(){this.initEssayComponent(),this.formControl=this.fb.control(this.question.textarea&&this.question.textarea.text)},AddonQtypeEssayComponent}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonQtypeGapSelectComponent(n,t,o){var r=e.call(this,n,"AddonQtypeGapSelectComponent",t)||this;return r.element=o.nativeElement,r}return Object(o.__extends)(AddonQtypeGapSelectComponent,e),AddonQtypeGapSelectComponent.prototype.ngOnInit=function(){this.initOriginalTextComponent(".qtext")},AddonQtypeGapSelectComponent.prototype.questionRendered=function(){this.questionHelper.treatCorrectnessIconsClicks(this.element,this.component,this.componentId,this.contextLevel,this.contextInstanceId,this.courseId)},AddonQtypeGapSelectComponent}(t(198).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(471),r=function(){function AddonQtypeMatchHandler(e){this.questionProvider=e,this.name="AddonQtypeMatch",this.type="qtype_match"}return AddonQtypeMatchHandler.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},AddonQtypeMatchHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeMatchHandler.prototype.isCompleteResponse=function(e,n){for(var t in n){var o=n[t];if(!o||"0"===o)return 0}return 1},AddonQtypeMatchHandler.prototype.isEnabled=function(){return!0},AddonQtypeMatchHandler.prototype.isGradableResponse=function(e,n){for(var t in n){var o=n[t];if(o&&"0"!==o)return 1}return 0},AddonQtypeMatchHandler.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},AddonQtypeMatchHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonQtypeMultiAnswerComponent(n,t,o){var r=e.call(this,n,"AddonQtypeMultiAnswerComponent",t)||this;return r.element=o.nativeElement,r}return Object(o.__extends)(AddonQtypeMultiAnswerComponent,e),AddonQtypeMultiAnswerComponent.prototype.ngOnInit=function(){this.initOriginalTextComponent(".formulation")},AddonQtypeMultiAnswerComponent.prototype.questionRendered=function(){this.questionHelper.treatCorrectnessIconsClicks(this.element,this.component,this.componentId,this.contextLevel,this.contextInstanceId,this.courseId)},AddonQtypeMultiAnswerComponent}(t(198).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonQtypeShortAnswerComponent(n,t){return e.call(this,n,"AddonQtypeShortAnswerComponent",t)||this}return Object(o.__extends)(AddonQtypeShortAnswerComponent,e),AddonQtypeShortAnswerComponent.prototype.ngOnInit=function(){this.initInputTextComponent()},AddonQtypeShortAnswerComponent}(t(198).a)},,,,,,,function(e,n,t){"use strict";function View_CoreDynamicComponent_1(e){return o._42(0,[o._28(null,0),(e()(),o._11(0,null,null,0))],null,null)}function View_CoreDynamicComponent_0(e){return o._42(0,[o._37(402653184,1,{dynamicComponent:0}),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreDynamicComponent_1)),o._15(3,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(6,16777216,[[1,3],["dynamicComponent",1]],null,0,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,3,0,!n.component.instance)},null)}t.d(n,"a",function(){return i}),n.b=View_CoreDynamicComponent_0;var o=t(1),r=t(8),i=o._14({encapsulation:2,styles:[],data:{}})},,function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(1),i=(t(6),t(4),t(78)),l=(t(184),t(134),t(202),t(29),t(730),function(){function AddonModAssignSubmissionComponent(e,n,t,o,r,l,s,a,u,d,c,p,f,h,m,_,g,v,C,y){this.navCtrl=e,this.appProvider=n,this.domUtils=t,this.syncProvider=r,this.timeUtils=l,this.textUtils=s,this.translate=a,this.utils=u,this.eventsProvider=d,this.courseProvider=c,this.fileUploaderHelper=p,this.gradesHelper=f,this.userProvider=h,this.groupsProvider=m,this.langProvider=_,this.assignProvider=g,this.assignHelper=v,this.assignOfflineProvider=C,this.splitviewCtrl=y,this.submitModel={},this.statusNew=i.a.SUBMISSION_STATUS_NEW,this.statusReopened=i.a.SUBMISSION_STATUS_REOPENED,this.attemptReopenMethodNone=i.a.ATTEMPT_REOPEN_METHOD_NONE,this.unlimitedAttempts=i.a.UNLIMITED_ATTEMPTS,this.originalGrades={},this.siteId=o.getCurrentSiteId(),this.currentUserId=o.getCurrentSiteUserId()}return AddonModAssignSubmissionComponent.prototype.ngOnInit=function(){this.selectedTab=this.showGrade&&"false"!==this.showGrade?1:0,this.isSubmittedForGrading=!!this.submitId,this.loadData()},AddonModAssignSubmissionComponent.prototype.calculateTimeRemaining=function(e){if(this.assign.duedate>0){var n=this.timeUtils.timestamp(),t=e.lastattempt&&e.lastattempt.extensionduedate?e.lastattempt.extensionduedate:this.assign.duedate,o=t-n;if(o<=0)if(this.userSubmission&&this.userSubmission.status==i.a.SUBMISSION_STATUS_SUBMITTED){var r=this.userSubmission.timemodified-t;r>0?(this.timeRemaining=this.translate.instant("addon.mod_assign.submittedlate",{$a:this.timeUtils.formatDuration(r,2)}),this.timeRemainingClass="latesubmission"):(this.timeRemaining=this.translate.instant("addon.mod_assign.submittedearly",{$a:this.timeUtils.formatDuration(-r,2)}),this.timeRemainingClass="earlysubmission")}else e.lastattempt&&e.lastattempt.submissionsenabled||e.gradingsummary&&e.gradingsummary.submissionsenabled?(this.timeRemaining=this.translate.instant("addon.mod_assign.overdue",{$a:this.timeUtils.formatDuration(-o,3)}),this.timeRemainingClass="overdue"):(this.timeRemaining=this.translate.instant("addon.mod_assign.duedatereached"),this.timeRemainingClass="");else this.timeRemaining=this.timeUtils.formatDuration(o,3),this.timeRemainingClass=""}else this.timeRemaining="",this.timeRemainingClass=""},AddonModAssignSubmissionComponent.prototype.canLeave=function(){var e=this;return this.hasDataToSave().then(function(n){if(n)return e.domUtils.showConfirm(e.translate.instant("core.confirmcanceledit")).then(function(){return e.discardDrafts().catch(function(){})})})},AddonModAssignSubmissionComponent.prototype.copyPrevious=function(){var e=this;if(this.appProvider.isOnline()){if(!this.previousAttempt)return this.goToEdit();var n=this.previousAttempt.submission,t=this.domUtils.showModalLoading();this.assignHelper.getSubmissionSizeForCopy(this.assign,n).catch(function(){return-1}).then(function(n){return t.dismiss(),e.fileUploaderHelper.confirmUploadFile(n,!0)}).then(function(){t=e.domUtils.showModalLoading("core.sending",!0),e.assignHelper.copyPreviousAttempt(e.assign,n).then(function(){e.goToEdit(),e.assign.submissiondrafts?e.invalidateAndRefresh():e.eventsProvider.trigger(i.a.SUBMITTED_FOR_GRADING_EVENT,{assignmentId:e.assign.id,submissionId:e.userSubmission.id,userId:e.currentUserId},e.siteId)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"core.error",!0)}).finally(function(){t.dismiss()})}).catch(function(){})}else this.domUtils.showErrorModal("core.networkerrormsg",!0)},AddonModAssignSubmissionComponent.prototype.discardDrafts=function(){return this.feedback&&this.feedback.plugins?this.assignHelper.discardFeedbackPluginData(this.assign.id,this.submitId,this.feedback):Promise.resolve()},AddonModAssignSubmissionComponent.prototype.goToEdit=function(){this.navCtrl.push("AddonModAssignEditPage",{moduleId:this.moduleId,courseId:this.courseId,userId:this.submitId,blindId:this.blindId})},AddonModAssignSubmissionComponent.prototype.hasDataToSave=function(){if(!this.canSaveGrades||!this.loaded)return Promise.resolve(!1);if(this.originalGrades.grade!=this.grade.grade||this.originalGrades.addAttempt!=this.grade.addAttempt||this.originalGrades.applyToAll!=this.grade.applyToAll)return Promise.resolve(!0);if(this.gradeInfo&&this.gradeInfo.outcomes)for(var e in this.gradeInfo.outcomes){var n=this.gradeInfo.outcomes[e];if("undefined"==this.originalGrades.outcomes[n.id]||this.originalGrades.outcomes[n.id]!=n.selectedId)return Promise.resolve(!0)}return this.feedback&&this.feedback.plugins?this.assignHelper.hasFeedbackDataChanged(this.assign,this.userSubmission,this.feedback,this.submitId).catch(function(){return!1}):Promise.resolve(!1)},AddonModAssignSubmissionComponent.prototype.ionViewDidEnter=function(){this.tabs&&this.tabs.ionViewDidEnter()},AddonModAssignSubmissionComponent.prototype.ionViewDidLeave=function(){this.tabs&&this.tabs.ionViewDidLeave()},AddonModAssignSubmissionComponent.prototype.invalidateAndRefresh=function(){var e=this;this.loaded=!1;var n=[];return n.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(n.push(this.assignProvider.invalidateSubmissionStatusData(this.assign.id,this.submitId,void 0,!!this.blindId)),n.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),n.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),n.push(this.gradesHelper.invalidateGradeModuleItems(this.courseId,this.submitId)),n.push(this.courseProvider.invalidateModule(this.moduleId)),this.submissionComponents&&this.submissionComponents.length&&this.submissionComponents.forEach(function(e){n.push(e.invalidate())}),Promise.all(n).catch(function(){}).then(function(){return e.loadData()})},AddonModAssignSubmissionComponent.prototype.loadData=function(){var e=this,n=!!this.blindId;return this.previousAttempt=void 0,this.isPreviousAttemptEmpty=!0,this.submitId||(this.submitId=this.currentUserId,n=!1),this.assignProvider.getAssignment(this.courseId,this.moduleId).then(function(n){var t=e.timeUtils.timestamp(),o=[];return e.assign=n,n.allowsubmissionsfromdate&&n.allowsubmissionsfromdate>=t&&(e.fromDate=e.timeUtils.userDate(1e3*n.allowsubmissionsfromdate)),e.currentAttempt=0,e.maxAttemptsText=e.translate.instant("addon.mod_assign.unlimitedattempts"),e.blindMarking=e.isSubmittedForGrading&&n.blindmarking&&!n.revealidentities,e.blindMarking||e.submitId==e.currentUserId||o.push(e.userProvider.getProfile(e.submitId,e.courseId).then(function(n){e.user=n})),o.push(e.assignOfflineProvider.getSubmission(n.id,e.submitId).then(function(n){e.hasOffline=n&&n.plugindata&&Object.keys(n.plugindata).length>0,e.submittedOffline=n&&n.submitted}).catch(function(){e.hasOffline=!1,e.submittedOffline=!1})),Promise.all(o)}).then(function(){return e.assignProvider.getSubmissionStatusWithRetry(e.assign,e.submitId,void 0,n)}).then(function(n){var t=[];if(e.submissionStatusAvailable=!0,e.lastAttempt=n.lastattempt,e.membersToSubmit=[],n.previousattempts&&n.previousattempts.length>0){var o=n.previousattempts.sort(function(e,n){return e.attemptnumber-n.attemptnumber});e.previousAttempt=o[o.length-1],e.isPreviousAttemptEmpty=e.assignHelper.isSubmissionEmpty(e.assign,e.previousAttempt.submission)}return e.treatLastAttempt(n,t),e.calculateTimeRemaining(n),t.push(e.loadFeedback(n.feedback)),e.userSubmission&&e.userSubmission.plugins||(e.userSubmission=e.assignHelper.createEmptySubmission(),e.userSubmission.plugins=e.assignHelper.getPluginsEnabled(e.assign,"assignsubmission")),t.push(e.assignProvider.getUnsupportedEditPlugins(e.userSubmission.plugins).then(function(n){e.unsupportedEditPlugins=n})),Promise.all(t)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Error getting assigment data.")}).finally(function(){e.loaded=!0})},AddonModAssignSubmissionComponent.prototype.loadFeedback=function(e){var n=this;if(this.grade={method:!1,grade:!1,gradebookGrade:!1,modified:0,gradingStatus:!1,addAttempt:!1,applyToAll:!1,scale:!1,lang:!1,disabled:!1},this.originalGrades={grade:!1,addAttempt:!1,applyToAll:!1,outcomes:{}},e){if(this.feedback=e,e.grade&&e.grade.grader>0?this.userProvider.getProfile(e.grade.grader,this.courseId).then(function(e){n.grader=e}).catch(function(){}):delete this.grader,e.gradefordisplay){e.gradefordisplay.indexOf('class="advancedgrade"')>-1&&(this.feedback.advancedgrade=!0)}if(e.grade&&e.grade.grade&&!this.grade.grade){var t=parseFloat(e.grade.grade);this.grade.grade=t>=0?t:null,this.grade.gradebookGrade=this.utils.formatFloat(this.grade.grade),this.originalGrades.grade=this.grade.grade}}else this.selectedTab=0,this.tabs.selectTab(0);return this.grade.gradingStatus=this.lastAttempt&&this.lastAttempt.gradingstatus,this.courseProvider.getModuleBasicGradeInfo(this.moduleId).then(function(e){if(n.gradeInfo=e,e)return e.outcomes=e.outcomes||[],n.isDestroyed||n.syncProvider.blockOperation(i.a.COMPONENT,n.assign.id),n.treatGradeInfo()}).then(function(){if(n.isGrading){return n.allowAddAttempt=n.assign.attemptreopenmethod==i.a.ATTEMPT_REOPEN_METHOD_MANUAL&&(!n.userSubmission||n.assign.maxattempts==i.a.UNLIMITED_ATTEMPTS||n.userSubmission&&n.userSubmission.attemptnumber<n.assign.maxattempts-1),n.assign.teamsubmission&&(n.grade.applyToAll=!0,n.originalGrades.applyToAll=!0),n.assign.markingworkflow&&n.grade.gradingStatus&&(n.workflowStatusTranslationId=n.assignProvider.getSubmissionGradingStatusTranslationId(n.grade.gradingStatus)),n.isGrading&&"graded"==n.lastAttempt.gradingstatus&&!n.assign.markingworkflow&&n.feedback.gradeddate<n.lastAttempt.submission.timemodified&&(n.lastAttempt.gradingstatus=i.a.GRADED_FOLLOWUP_SUBMIT,n.gradingStatusTranslationId=n.assignProvider.getSubmissionGradingStatusTranslationId(n.lastAttempt.gradingstatus),n.gradingColor=n.assignProvider.getSubmissionGradingStatusColor(n.lastAttempt.gradingstatus)),n.feedback&&n.feedback.plugins||(n.feedback=n.assignHelper.createEmptyFeedback(),n.feedback.plugins=n.assignHelper.getPluginsEnabled(n.assign,"assignfeedback")),n.canSaveGrades?n.assignOfflineProvider.getSubmissionGrade(n.assign.id,n.submitId).catch(function(){}).then(function(t){t&&(!e||!e.gradeddate||e.gradeddate<t.timemodified)&&(n.grade.modified<t.timemodified&&(n.grade.grade=n.grade.scale?t.grade:n.utils.formatFloat(t.grade),n.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",n.gradingColor="",n.originalGrades.grade=n.grade.grade),n.grade.applyToAll=t.applytoall,n.grade.addAttempt=t.addattempt,n.originalGrades.applyToAll=n.grade.applyToAll,n.originalGrades.addAttempt=n.grade.addAttempt,t.outcomes&&Object.keys(t.outcomes).length&&n.gradeInfo.outcomes.forEach(function(e){void 0!==t.outcomes[e.itemNumber]&&e.modified<t.timemodified&&(e.selectedId=t.outcomes[e.itemNumber],n.originalGrades.outcomes[e.id]=e.selectedId)}))}):n.courseProvider.getModule(n.moduleId,n.courseId,void 0,!0).then(function(e){n.gradeUrl=e.url+"&action=grader&userid="+n.submitId})}})},AddonModAssignSubmissionComponent.prototype.setStatusNameAndClass=function(e){this.hasOffline||this.submittedOffline?(this.statusTranslated=this.translate.instant("core.notsent"),this.statusColor="warning"):this.assign.teamsubmission?!e.lastattempt.submissiongroup&&this.assign.preventsubmissionnotingroup?(this.statusTranslated=this.translate.instant("addon.mod_assign.nosubmission"),this.statusColor=this.assignProvider.getSubmissionStatusColor("nosubmission")):this.userSubmission&&this.userSubmission.status!=this.statusNew?(this.statusTranslated=this.translate.instant("addon.mod_assign.submissionstatus_"+this.userSubmission.status),this.statusColor=this.assignProvider.getSubmissionStatusColor(this.userSubmission.status)):e.lastattempt.submissionsenabled?(this.statusTranslated=this.translate.instant("addon.mod_assign.nosubmission"),this.statusColor=this.assignProvider.getSubmissionStatusColor("nosubmission")):(this.statusTranslated=this.translate.instant("addon.mod_assign.noonlinesubmissions"),this.statusColor=this.assignProvider.getSubmissionStatusColor("noonlinesubmissions")):this.userSubmission&&this.userSubmission.status!=this.statusNew?(this.statusTranslated=this.translate.instant("addon.mod_assign.submissionstatus_"+this.userSubmission.status),this.statusColor=this.assignProvider.getSubmissionStatusColor(this.userSubmission.status)):e.lastattempt.submissionsenabled?(this.statusTranslated=this.translate.instant("addon.mod_assign.noattempt"),this.statusColor=this.assignProvider.getSubmissionStatusColor("noattempt")):(this.statusTranslated=this.translate.instant("addon.mod_assign.noonlinesubmissions"),this.statusColor=this.assignProvider.getSubmissionStatusColor("noonlinesubmissions"))},AddonModAssignSubmissionComponent.prototype.showAdvancedGrade=function(){this.feedback&&this.feedback.advancedgrade&&this.textUtils.expandText(this.translate.instant("core.grades.grade"),this.feedback.gradefordisplay,i.a.COMPONENT,this.moduleId)},AddonModAssignSubmissionComponent.prototype.submitForGrading=function(e){var n=this;!this.assign.requiresubmissionstatement||e?this.domUtils.showConfirm(this.translate.instant("addon.mod_assign.confirmsubmission")).then(function(){var t=n.domUtils.showModalLoading("core.sending",!0);n.assignProvider.submitForGrading(n.assign.id,n.courseId,e,n.userSubmission.timemodified,n.hasOffline).then(function(){n.eventsProvider.trigger(i.a.SUBMITTED_FOR_GRADING_EVENT,{assignmentId:n.assign.id,submissionId:n.userSubmission.id,userId:n.currentUserId},n.siteId)}).finally(function(){t.dismiss()})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.error",!0)}):this.domUtils.showErrorModal("addon.mod_assign.acceptsubmissionstatement",!0)},AddonModAssignSubmissionComponent.prototype.submitGrade=function(){var e=this;return this.hasDataToSave().then(function(n){if(n){var t=e.userSubmission?e.userSubmission.attemptnumber:-1,o={},r=e.grade.scale&&0==e.grade.grade?-1:e.utils.unformatFloat(e.grade.grade,!0);if(!1===r)return Promise.reject(e.translate.instant("core.grades.badgrade"));var l=e.domUtils.showModalLoading("core.sending",!0);return e.gradeInfo.outcomes.forEach(function(e){e.itemNumber&&(o[e.itemNumber]=e.selectedId)}),(e.feedback&&e.feedback.plugins?e.assignHelper.prepareFeedbackPluginData(e.assign.id,e.submitId,e.feedback):Promise.resolve({})).then(function(n){return e.assignProvider.submitGradingForm(e.assign.id,e.submitId,e.courseId,r,t,e.grade.addAttempt,e.grade.gradingStatus,e.grade.applyToAll,o,n).then(function(){return e.discardDrafts()}).finally(function(){e.invalidateAndRefresh(),e.eventsProvider.trigger(i.a.GRADED_EVENT,{assignmentId:e.assign.id,submissionId:e.submitId,userId:e.currentUserId},e.siteId)})}).finally(function(){e.tabs.selectTab(0),l.dismiss()})}})},AddonModAssignSubmissionComponent.prototype.treatGradeInfo=function(){var e=this;return this.grade.method=this.gradeInfo.advancedgrading&&this.gradeInfo.advancedgrading[0]&&void 0!==this.gradeInfo.advancedgrading[0].method?this.gradeInfo.advancedgrading[0].method||"simple":"simple",this.isGrading=!0,this.canSaveGrades="simple"==this.grade.method,this.gradeInfo.scale?this.grade.scale=this.utils.makeMenuFromList(this.gradeInfo.scale,this.translate.instant("core.nograde")):(this.grade.grade=this.utils.formatFloat(this.grade.grade),this.originalGrades.grade=this.grade.grade,this.langProvider.getCurrentLanguage().then(function(n){e.grade.lang=n})),this.assignProvider.isOutcomesEditEnabled()&&this.gradeInfo.outcomes.forEach(function(n){n.scale&&(n.options=e.utils.makeMenuFromList(n.scale,e.translate.instant("core.grades.nooutcome"))),n.selectedId=0,e.originalGrades.outcomes[n.id]=n.selectedId}),this.gradesHelper.getGradeModuleItems(this.courseId,this.moduleId,this.submitId).then(function(n){var t=[];n.forEach(function(n){if(n.outcomeid||n.scaleid)n.outcomeid&&(e.gradeInfo.outcomes.forEach(function(o){o.id==n.outcomeid&&(o.selected=n.gradeformatted,o.modified=n.gradedategraded,o.options&&(o.selectedId=e.gradesHelper.getGradeValueFromLabel(o.options,o.selected),e.originalGrades.outcomes[o.id]=o.selectedId,o.itemNumber=n.itemnumber),t.push(o))}),e.gradeInfo.disabled=n.gradeislocked||n.gradeisoverridden);else{if(e.grade.scale)e.grade.gradebookGrade=e.utils.formatFloat(e.gradesHelper.getGradeValueFromLabel(e.grade.scale,n.gradeformatted));else{var o=parseFloat(n.gradeformatted);e.grade.gradebookGrade=o||0==o?e.utils.formatFloat(o):null}e.grade.disabled=n.gradeislocked||n.gradeisoverridden,e.grade.modified=n.gradedategraded}}),e.gradeInfo.outcomes=t})},AddonModAssignSubmissionComponent.prototype.treatLastAttempt=function(e,n){var t=this;if(e.lastattempt){var o=this.assign.requiresubmissionstatement&&void 0===this.assign.submissionstatement;this.canSubmit=!this.isSubmittedForGrading&&!this.submittedOffline&&(e.lastattempt.cansubmit||this.hasOffline&&this.assignProvider.canSubmitOffline(this.assign,e)),this.canEdit=!this.isSubmittedForGrading&&e.lastattempt.canedit&&(!this.submittedOffline||!this.assign.submissiondrafts),this.assign.requiresubmissionstatement&&this.assign.submissiondrafts&&this.submitId==this.currentUserId?(this.submissionStatement=this.assign.submissionstatement,this.submitModel.submissionStatement=!1):(this.submissionStatement=void 0,this.submitModel.submissionStatement=!0),this.showErrorStatementEdit=o&&!this.assign.submissiondrafts&&this.submitId==this.currentUserId,this.showErrorStatementSubmit=o&&!!this.assign.submissiondrafts,this.userSubmission=this.assignProvider.getSubmissionObjectFromAttempt(this.assign,e.lastattempt),this.assign.attemptreopenmethod!=this.attemptReopenMethodNone&&this.userSubmission&&(this.currentAttempt=this.userSubmission.attemptnumber+1),this.setStatusNameAndClass(e),this.assign.teamsubmission&&(e.lastattempt.submissiongroup&&n.push(this.groupsProvider.getActivityAllowedGroups(this.assign.cmid).then(function(n){n.groups.forEach(function(n){n.id==e.lastattempt.submissiongroup&&(t.lastAttempt.submissiongroupname=n.name)})})),this.userSubmission&&this.userSubmission.status!=this.statusNew&&e.lastattempt.submissiongroupmemberswhoneedtosubmit.forEach(function(e){n.push(t.blindMarking?t.assignProvider.getAssignmentUserMappings(t.assign.id,e).then(function(e){t.membersToSubmit.push(e)}):t.userProvider.getProfile(e,t.courseId).then(function(e){t.membersToSubmit.push(e)}))})),this.gradingStatusTranslationId=this.assignProvider.getSubmissionGradingStatusTranslationId(e.lastattempt.gradingstatus),this.gradingColor=this.assignProvider.getSubmissionGradingStatusColor(e.lastattempt.gradingstatus),this.userSubmission&&(this.assign.teamsubmission&&e.lastattempt.submissiongroup&&this.assign.preventsubmissionnotingroup||(this.submissionPlugins=this.previousAttempt&&this.previousAttempt.submission.plugins&&this.userSubmission.status==this.statusReopened?this.previousAttempt.submission.plugins:this.userSubmission.plugins))}},AddonModAssignSubmissionComponent.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.assign&&this.isGrading&&this.syncProvider.unblockOperation(i.a.COMPONENT,this.assign.id)},AddonModAssignSubmissionComponent=Object(o.__decorate)([Object(o.__param)(19,Object(r.E)())],AddonModAssignSubmissionComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(504);var o=function(){return function AddonModFeedbackComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return a});t(0);var o=t(10),r=t(42),i=t(117),l=(t(4),this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})}),s=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},a=function(){function CoreSettingsHelper(e,n,t,r,l,s,a,u,d,c,p,f){var h=this;if(this.appProvider=n,this.cronDelegate=t,this.domUtils=r,this.eventsProvider=l,this.filePoolProvider=s,this.sitesProvider=a,this.utils=u,this.translate=d,this.configProvider=c,this.filterProvider=p,this.courseProvider=f,this.syncPromises={},this.logger=e.getInstance("CoreSettingsHelper"),!i.a.forceColorScheme){var m=function(){h.isColorSchemeDisabledInSite()?h.setColorScheme("light"):h.initColorScheme()};l.on(o.a.LOGIN,m.bind(this)),l.on(o.a.SITE_UPDATED,m.bind(this)),l.on(o.a.LOGOUT,function(){h.initColorScheme()})}}return CoreSettingsHelper.prototype.deleteSiteStorage=function(e,n){return l(this,void 0,void 0,function(){var t,r,i,a,u,d,c=this;return s(this,function(p){switch(p.label){case 0:return t={cacheEntries:0,spaceUsage:0},[4,this.filterProvider.formatText(e,{clean:!0,singleLine:!0,filter:!1},[],n)];case 1:return e=p.sent(),r=this.translate.instant("core.settings.deletesitefilestitle"),i=this.translate.instant("core.settings.deletesitefiles",{sitename:e}),[4,this.domUtils.showConfirm(i,r)];case 2:return p.sent(),[4,this.sitesProvider.getSite(n)];case 3:return a=p.sent(),u=this.sitesProvider.getSiteTableSchemasToClear(a),(d=u.map(function(e){return a.getDb().deleteRecords(e)})).push(a.deleteFolder().then(function(){c.filePoolProvider.clearAllPackagesStatus(a.id),c.filePoolProvider.clearFilepool(a.id),c.courseProvider.clearAllCoursesStatus(a.id),t.spaceUsage=0}).catch(function(e){return l(c,void 0,void 0,function(){var n;return s(this,function(o){switch(o.label){case 0:return e&&e.code===FileError.NOT_FOUND_ERR?(this.filePoolProvider.clearAllPackagesStatus(a.id),t.spaceUsage=0,[3,3]):[3,1];case 1:return this.domUtils.showErrorModal("core.settings.errordeletesitefiles",!0),n=t,[4,a.getSpaceUsage()];case 2:n.spaceUsage=o.sent(),o.label=3;case 3:return[2]}})})}).then(function(){return l(c,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return this.eventsProvider.trigger(o.a.SITE_STORAGE_DELETED,{},a.getId()),e=t,[4,this.calcSiteClearRows(a)];case 1:return e.cacheEntries=n.sent(),[2]}})})})),[4,Promise.all(d)];case 4:return p.sent(),[2,t]}})})},CoreSettingsHelper.prototype.getSiteSpaceUsage=function(e){return l(this,void 0,void 0,function(){var n,t;return s(this,function(o){switch(o.label){case 0:return[4,this.sitesProvider.getSite(e)];case 1:return n=o.sent(),t={cacheEntries:0,spaceUsage:0},[4,Promise.all([this.calcSiteClearRows(n).then(function(e){return t.cacheEntries=e}),n.getSpaceUsage().then(function(e){return t.spaceUsage=e})])];case 2:return o.sent(),[2,t]}})})},CoreSettingsHelper.prototype.calcSiteClearRows=function(e){return l(this,void 0,void 0,function(){var n,t,o=this;return s(this,function(r){switch(r.label){case 0:return n=this.sitesProvider.getSiteTableSchemasToClear(e),t=0,[4,Promise.all(n.map(function(n){return l(o,void 0,void 0,function(){return s(this,function(o){switch(o.label){case 0:return[4,e.getDb().countRecords(n)];case 1:return[2,t=o.sent()+t]}})})}))];case 1:return r.sent(),[2,t]}})})},CoreSettingsHelper.prototype.getProcessor=function(e,n,t){if(void 0===t&&(t=!0),e&&e.length){for(var o=0;o<e.length;o++)if(e[o].name==n)return e[o];return t?e[0]:void 0}},CoreSettingsHelper.prototype.getProcessorComponents=function(e,n){var t=this,o=[];return n.forEach(function(n){var r=t.utils.clone(n);r.notifications=[],n.notifications.forEach(function(n){for(var t=!1,o=0;o<n.processors.length;o++){var i=n.processors[o];if(i.name==e){t=!0,n.currentProcessor=i;break}}t&&r.notifications.push(n)}),r.notifications.length&&o.push(r)}),o},CoreSettingsHelper.prototype.getSiteSyncPromise=function(e){return this.syncPromises[e]?this.syncPromises[e]:null},CoreSettingsHelper.prototype.synchronizeSite=function(e,n){var t=this;if(this.syncPromises[n])return this.syncPromises[n];var r=[],i=this.cronDelegate.hasManualSyncHandlers();if(i&&!this.appProvider.isOnline())return Promise.reject(this.translate.instant("core.settings.cannotsyncoffline"));if(i&&e&&this.appProvider.isNetworkAccessLimited())return Promise.reject(this.translate.instant("core.settings.cannotsyncwithoutwifi"));r.push(this.filePoolProvider.invalidateAllFiles(n).catch(function(){})),r.push(this.sitesProvider.getSite(n).then(function(e){return e.invalidateWsCache().then(function(){var r=[];return r.push(e.checkIfLocalMobileInstalledAndNotUsed().then(function(){return t.eventsProvider.trigger(o.a.SESSION_EXPIRED,{},n),Promise.reject(t.translate.instant("core.lostconnection"))},function(){return t.sitesProvider.updateSiteInfo(n)})),r.push(t.cronDelegate.forceSyncExecution(n)),Promise.all(r)})}));var l=Promise.all(r);return this.syncPromises[n]=l,l=l.finally(function(){delete t.syncPromises[n]})},CoreSettingsHelper.prototype.initDomSettings=function(){var e=this;this.configProvider.get(r.a.SETTINGS_FONT_SIZE,i.a.font_sizes[0].toString()).then(function(n){e.setFontSize(n)}),this.initColorScheme()},CoreSettingsHelper.prototype.initColorScheme=function(){var e=this;if(i.a.forceColorScheme)this.setColorScheme(i.a.forceColorScheme);else{var n="light";(window.matchMedia("(prefers-color-scheme: dark)").matches||window.matchMedia("(prefers-color-scheme: light)").matches)&&(n="auto"),this.configProvider.get(r.a.SETTINGS_COLOR_SCHEME,n).then(function(n){e.setColorScheme(n)})}},CoreSettingsHelper.prototype.isColorSchemeDisabled=function(e){return l(this,void 0,void 0,function(){var n;return s(this,function(t){switch(t.label){case 0:return[4,this.sitesProvider.getSite(e)];case 1:return n=t.sent(),[2,this.isColorSchemeDisabledInSite(n)]}})})},CoreSettingsHelper.prototype.isColorSchemeDisabledInSite=function(e){return!!(e=e||this.sitesProvider.getCurrentSite())&&e.isFeatureDisabled("NoDelegate_DarkMode")},CoreSettingsHelper.prototype.setFontSize=function(e){document.documentElement.style.fontSize=e+"%"},CoreSettingsHelper.prototype.setColorScheme=function(e){document.body.classList.remove("scheme-light"),document.body.classList.remove("scheme-dark"),document.body.classList.remove("scheme-auto"),document.body.classList.add("scheme-"+e)},CoreSettingsHelper}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(78),r=(t(184),t(167),t(200),function(){function AddonModAssignSubmissionPluginComponent(e,n,t,r){this.injector=e,this.submissionDelegate=n,this.assignProvider=t,this.assignHelper=r,this.component=o.a.COMPONENT,this.text="",this.files=[]}return AddonModAssignSubmissionPluginComponent.prototype.ngOnInit=function(){var e=this;this.plugin&&(this.plugin.name=this.submissionDelegate.getPluginName(this.plugin),this.plugin.name&&(this.edit=this.edit&&"false"!==this.edit,this.allowOffline=this.allowOffline&&"false"!==this.allowOffline,this.submissionDelegate.getComponentForPlugin(this.injector,this.plugin,this.edit).then(function(n){e.pluginComponent=n,n?e.data={assign:e.assign,submission:e.submission,plugin:e.plugin,configs:e.assignHelper.getPluginConfig(e.assign,"assignsubmission",e.plugin.type),edit:e.edit,allowOffline:e.allowOffline}:(e.text=e.assignProvider.getSubmissionPluginText(e.plugin),e.files=e.assignProvider.getSubmissionPluginAttachments(e.plugin),e.notSupported=e.submissionDelegate.isPluginSupported(e.plugin.type),e.pluginLoaded=!0)})))},AddonModAssignSubmissionPluginComponent.prototype.invalidate=function(){return Promise.resolve(this.dynamicComponent&&this.dynamicComponent.callComponentFunction("invalidate",[]))},AddonModAssignSubmissionPluginComponent}())},function(e,n,t){"use strict";function View_CoreTabsComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null)],function(e,n){e(n,1,0,"arrow-back","ios-arrow-back")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_CoreTabsComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-icon",[],null,null,null,l.b,l.a)),o._15(1,704512,null,0,s.a,[o.p,i.a],{name:[0,"name"]},null)],function(e,n){e(n,1,0,n.parent.parent.context.$implicit.icon)},null)}function View_CoreTabsComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"div",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.parent.context.$implicit.title)})}function View_CoreTabsComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-badge",[["class","tab-badge"]],null,null,null,null,null)),o._15(1,16384,null,0,a.a,[i.a,o.p,o.K],{color:[0,"color"]},null),(e()(),o._40(2,null,["",""]))],function(e,n){e(n,1,0,n.parent.parent.context.$implicit.badgeStyle)},function(e,n){e(n,2,0,n.parent.parent.context.$implicit.badge)})}function View_CoreTabsComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-slide",[["class","tab-slide"],["role","tab"]],[[1,"aria-selected",0],[1,"aria-label",0],[1,"aria-controls",0],[8,"id",0],[8,"tabIndex",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.selectTab(e.parent.context.index)&&o}return o},u.b,u.a)),o._15(1,180224,null,0,d.a,[o.p,o.K,c.a],null,null),(e()(),o._40(-1,0,["\n                            "])),(e()(),o._11(16777216,null,0,1,null,View_CoreTabsComponent_4)),o._15(4,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n                            "])),(e()(),o._11(16777216,null,0,1,null,View_CoreTabsComponent_5)),o._15(7,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n                            "])),(e()(),o._11(16777216,null,0,1,null,View_CoreTabsComponent_6)),o._15(10,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n                        "]))],function(e,n){e(n,4,0,n.parent.context.$implicit.icon);e(n,7,0,n.parent.context.$implicit.title);e(n,10,0,n.parent.context.$implicit.badge)},function(e,n){var t=n.component;e(n,0,0,t.selected==n.parent.context.index,n.parent.context.$implicit.title||"",n.parent.context.$implicit.id,n.parent.context.$implicit.id+"-tab",t.selected==n.parent.context.index?null:-1)})}function View_CoreTabsComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                       "])),(e()(),o._11(16777216,null,null,1,null,View_CoreTabsComponent_3)),o._15(3,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,3,0,n.context.$implicit.show)},null)}function View_CoreTabsComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null)],function(e,n){e(n,1,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_CoreTabsComponent_0(e){return o._42(0,[o._37(402653184,1,{originalTabsRef:0}),o._37(402653184,2,{topTabs:0}),o._37(402653184,3,{slides:0}),(e()(),o._16(3,0,null,null,39,"core-loading",[["class","core-loading-center"]],null,null,null,f.b,f.a)),o._15(4,638976,null,0,h.a,[m.a,o.p,_.a,g.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(6,0,[[2,0],["topTabs",1]],0,30,"div",[["class","core-tabs-bar"],["id","core-tabs-bar"]],[[8,"hidden",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(8,0,null,null,27,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(9,16384,null,0,v.a,[],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(11,0,null,null,5,"ion-col",[["class","col-with-arrow col"],["col-1",""],["no-padding",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.slidePrev()&&o}return o},null,null)),o._15(12,16384,null,0,C.a,[],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreTabsComponent_1)),o._15(15,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(18,0,null,null,9,"ion-col",[["class","col"],["col-10",""],["no-padding",""]],null,null,null,null,null)),o._15(19,16384,null,0,C.a,[],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(21,0,null,null,5,"ion-slides",[["aria-hidden","false"],["role","tablist"]],[[1,"aria-label",0]],[[null,"ionSlideDidChange"]],function(e,n,t){var o=!0;if("ionSlideDidChange"===n){o=!1!==e.component.slideChanged()&&o}return o},y.b,y.a)),o._15(22,1228800,[[3,4]],0,c.a,[i.a,P.a,o.D,[2,A.a],o.p,o.K],{dir:[0,"dir"],slidesPerView:[1,"slidesPerView"]},{ionSlideDidChange:"ionSlideDidChange"}),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._11(16777216,null,0,1,null,View_CoreTabsComponent_2)),o._15(25,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(29,0,null,null,5,"ion-col",[["class","col-with-arrow col"],["col-1",""],["no-padding",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.slideNext()&&o}return o},null,null)),o._15(30,16384,null,0,C.a,[],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreTabsComponent_7)),o._15(33,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(38,0,[[1,0],["originalTabs",1]],0,3,"div",[["class","core-tabs-content-container"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),o._28(null,0),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.hideUntil);e(n,15,0,t.showPrevButton);e(n,22,0,t.direction,t.slidesShown);e(n,25,0,t.tabs);e(n,33,0,t.showNextButton)},function(e,n){var t=n.component;e(n,6,0,!t.tabs||t.numTabsShown<2);e(n,21,0,t.description)})}t.d(n,"a",function(){return b}),n.b=View_CoreTabsComponent_0;var o=t(1),r=t(49),i=t(9),l=t(81),s=t(76),a=t(144),u=t(1054),d=t(357),c=t(267),p=t(8),f=t(55),h=t(52),m=t(19),_=t(10),g=t(3),v=t(121),C=t(120),y=t(1055),P=t(17),A=t(40),b=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";function View_CoreTabComponent_1(e){return o._42(0,[(e()(),o._16(0,16777216,null,null,1,null,null,null,null,null,null,null)),o._15(1,540672,null,0,r.r,[o.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),o._11(0,null,null,0))],function(e,n){e(n,1,0,n.component.template)},null)}function View_CoreTabComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreTabComponent_1)),o._15(1,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null)],function(e,n){e(n,1,0,n.component.loaded)},null)}t.d(n,"a",function(){return i}),n.b=View_CoreTabComponent_0;var o=t(1),r=t(8),i=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1546),t(1547);var o=function(){return function CoreRatingComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(1),i=t(6),l=(t(4),function(e){function CoreIonTabsComponent(n,t,o,r,i,l,s,a,u,d,c,p,f){var h=e.call(this,o,r,i,l,s,a,u,d,f)||this;return h.utils=n,h.appProvider=t,h.domUtils=c,h.translate=p,h.hidden=!1,h.tabsNotInit=[],h.tabsIds=[],h.tabsNotInitIds=[],h.viewInit=!1,h.initialized=!1,h}return Object(o.__extends)(CoreIonTabsComponent,e),CoreIonTabsComponent,Object.defineProperty(CoreIonTabsComponent.prototype,"loaded",{set:function(e){var n=this;this._loaded=this.utils.isTrueOrOne(e),this.viewInit&&!this.initialized&&setTimeout(function(){n.initTabs()})},enumerable:!0,configurable:!0}),CoreIonTabsComponent.prototype.ngAfterViewInit=function(){this.viewInit=!0,e.prototype.ngAfterViewInit.call(this),this.registerBackButtonAction()},CoreIonTabsComponent.prototype.add=function(e,n){var t=this._tabs.indexOf(e);if(-1!=t)return this.tabsIds[t];if(-1!=(t=this.tabsNotInit.indexOf(e))){if(!n)return this.tabsNotInitIds[t];var o=this.tabsNotInitIds[t];return this.tabsNotInit.splice(t,1),this.tabsNotInitIds.splice(t,1),this._tabs.push(e),this.tabsIds.push(o),this.sortTabs(),o}var r=this.id+"-"+ ++this._ids;return n?(this._tabs.push(e),this.tabsIds.push(r),this.sortTabs()):(this.tabsNotInit.push(e),this.tabsNotInitIds.push(r)),r},CoreIonTabsComponent.prototype.initTabs=function(){var n=this;return this.initialized||!this._loaded&&void 0!==this._loaded?(this.setTabbarPosition(-1,0),Promise.resolve()):(this.initialized=!0,e.prototype.initTabs.call(this).then(function(){if(n.selectedDisabled&&void 0!==n.selectedIndex){var e=n.getByIndex(n.selectedIndex);e&&!e.enabled&&n.select(e)}n.firstSelectedTab=n._selectHistory[0]||null}).finally(function(){n.selectTabPromiseDefer&&(n.selectTabPromiseDefer.resolve(),delete n.selectTabPromiseDefer)}))},CoreIonTabsComponent.prototype.registerBackButtonAction=function(){var e=this;this.unregisterBackButtonAction=this.appProvider.registerBackButtonAction(function(){var n=e.previousTab(!0);if(n){var t=e.getSelected();if(n.id==t.id&&(n=e.previousTab(!0)),n)return e._selectHistory=e._selectHistory.filter(function(e){return t.id!=e&&n.id!=e}),e.select(n),!0}else{var o=e.getSelected();if(o&&e.firstSelectedTab&&o.id!=e.firstSelectedTab&&(e._selectHistory=[],(n=e._tabs.find(function(n){return n.id===e.firstSelectedTab}))&&n.enabled))return e.select(n),!0}return!1},250)},CoreIonTabsComponent.prototype.remove=function(e){var n=this._tabs.indexOf(e);-1!=n?(this._tabs.splice(n,1),this.tabsIds.splice(n,1)):-1!=(n=this.tabsNotInit.indexOf(e))&&(this.tabsNotInit.splice(n,1),this.tabsNotInitIds.splice(n,1))},CoreIonTabsComponent.prototype.sortTabs=function(){var e=this;if(this.originalTabsRef){var n=[],t=[],o=this.originalTabsRef.nativeElement;this._tabs.forEach(function(r,i){var l=Array.prototype.indexOf.call(o.children,r.getNativeElement());-1!=l&&(n[l]=r,t[l]=e.tabsIds[i])}),this._tabs=n.filter(function(e){return void 0!==e}),this.tabsIds=t.filter(function(e){return void 0!==e})}},CoreIonTabsComponent.prototype.select=function(n,t,o,r){var i=this;if(void 0===t&&(t={}),this.initialized){if(r){var l="number"==typeof n?this.getByIndex(n):n;return this.confirmGoToRoot(l).then(function(){return e.prototype.select.call(i,n,t,o)},function(){})}return e.prototype.select.call(this,n,t,o)}return this.selectedIndex="number"==typeof n?n:this.getIndex(n),this.selectTabPromiseDefer=this.selectTabPromiseDefer||this.utils.promiseDefer(),this.selectTabPromiseDefer.promise},CoreIonTabsComponent.prototype.selectTabRootByIndex=function(e){var n=this;if(this.initialized){var t=this.getByIndex(e);return t?this.confirmGoToRoot(t).then(function(){return t.goToRoot({animate:t.isSelected,updateUrl:!0,isNavRoot:!0}).then(function(){if(!t.isSelected)return n.select(t,{animate:!1,updateUrl:!0,isNavRoot:!0})})},function(){}):Promise.reject(null)}return this.selectedIndex=e,this.selectTabPromiseDefer=this.selectTabPromiseDefer||this.utils.promiseDefer(),this.selectTabPromiseDefer.promise},CoreIonTabsComponent.prototype.changeVisibility=function(e){var n=this;this.hidden==e&&(this.hidden=!e,setTimeout(function(){n.viewCtrl.getContent().resize()}))},CoreIonTabsComponent.prototype.ngOnDestroy=function(){this.unregisterBackButtonAction&&this.unregisterBackButtonAction()},CoreIonTabsComponent.prototype.confirmGoToRoot=function(e){return!e||!e.isSelected||e.getActive()&&e.getActive().isFirst()?Promise.resolve():this.domUtils.showConfirm(e.tabTitle?this.translate.instant("core.confirmgotabroot",{name:e.tabTitle}):this.translate.instant("core.confirmgotabrootdefault"))},CoreIonTabsComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)()),Object(o.__param)(3,Object(r.E)())],CoreIonTabsComponent)}(i.l))},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var o=t(0),r=t(1),i=(t(6),t(159)),l=t(78),s=(t(184),t(134),t(319)),a=function(e){function AddonModAssignIndexComponent(n,t,o,r,i,a,u,d,c){var p=e.call(this,n,o)||this;return p.assignProvider=t,p.assignHelper=r,p.assignOffline=i,p.syncProvider=a,p.timeUtils=u,p.groupsProvider=d,p.navCtrl=c,p.component=l.a.COMPONENT,p.moduleName="assign",p.showNumbers=!0,p.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},p.submissionStatusSubmitted=l.a.SUBMISSION_STATUS_SUBMITTED,p.submissionStatusDraft=l.a.SUBMISSION_STATUS_DRAFT,p.needGrading=l.a.NEED_GRADING,p.syncEventName=s.a.AUTO_SYNCED,p}return Object(o.__extends)(AddonModAssignIndexComponent,e),AddonModAssignIndexComponent.prototype.ngOnInit=function(){var n=this;e.prototype.ngOnInit.call(this),this.userId=this.sitesProvider.getCurrentSiteUserId(),this.loadContent(!1,!0).then(function(){n.assignProvider.logView(n.assign.id,n.assign.name).then(function(){n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata)}).catch(function(){}),n.canViewAllSubmissions?n.assignProvider.logGradingView(n.assign.id,n.assign.name).catch(function(){}):n.canViewOwnSubmission&&n.assignProvider.logSubmissionView(n.assign.id,n.assign.name).catch(function(){})}),this.savedObserver=this.eventsProvider.on(l.a.SUBMISSION_SAVED_EVENT,function(e){n.assign&&e.assignmentId==n.assign.id&&e.userId==n.userId&&n.showLoadingAndRefresh(!0,!1)},this.siteId),this.submittedObserver=this.eventsProvider.on(l.a.SUBMITTED_FOR_GRADING_EVENT,function(e){n.assign&&e.assignmentId==n.assign.id&&e.userId==n.userId&&(n.courseProvider.checkModuleCompletion(n.courseId,n.module.completiondata),n.showLoadingAndRefresh(!0,!1))},this.siteId),this.gradedObserver=this.eventsProvider.on(l.a.GRADED_EVENT,function(e){n.assign&&e.assignmentId==n.assign.id&&e.userId==n.userId&&n.showLoadingAndRefresh(!0,!1)},this.siteId)},AddonModAssignIndexComponent.prototype.expandDescription=function(e){e&&e.preventDefault(),e&&e.stopPropagation(),this.assign&&(this.description||this.assign.introattachments)&&this.textUtils.expandText(this.translate.instant("core.description"),this.description,this.component,this.module.id,this.assign.introattachments,!0,"module",this.module.id,this.courseId)},AddonModAssignIndexComponent.prototype.fetchContent=function(e,n,t){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===t&&(t=!1),this.assignProvider.getAssignment(this.courseId,this.module.id).then(function(e){if(o.assign=e,o.dataRetrieved.emit(o.assign),o.description=o.assign.intro,n)return o.syncActivity(t).catch(function(){})}).then(function(){return o.assignOffline.hasAssignOfflineData(o.assign.id)}).then(function(e){return o.hasOffline=e,o.assignProvider.getSubmissions(o.assign.id).then(function(e){var n=o.timeUtils.timestamp();return o.canViewAllSubmissions=e.canviewsubmissions,e.canviewsubmissions?(o.assign.duedate>0?o.assign.duedate-n<=0?o.timeRemaining=o.translate.instant("addon.mod_assign.assignmentisdue"):(o.timeRemaining=o.timeUtils.formatDuration(o.assign.duedate-n,3),o.lateSubmissions=o.assign.cutoffdate?o.assign.cutoffdate>n?o.translate.instant("addon.mod_assign.latesubmissionsaccepted",{$a:o.timeUtils.userDate(1e3*o.assign.cutoffdate)}):o.translate.instant("addon.mod_assign.nomoresubmissionsaccepted"):""):(o.timeRemaining="",o.lateSubmissions=""),o.groupsProvider.getActivityGroupInfo(o.assign.cmid,!1).then(function(e){return o.groupInfo=e,o.showNumbers=0==e.groups.length||o.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.5"),o.setGroup(o.groupsProvider.validateGroupId(o.group,e))})):o.assignProvider.getSubmissionStatus(o.assign.id).then(function(){o.canViewOwnSubmission=!0}).catch(function(e){if(o.canViewOwnSubmission=!1,"nopermission"!==e.errorcode)return Promise.reject(e)})})}).finally(function(){o.fillContextMenu(e)})},AddonModAssignIndexComponent.prototype.setGroup=function(e){var n=this;return this.group=e,this.assignProvider.getSubmissionStatus(this.assign.id,void 0,this.group).then(function(e){if(n.summary=e.gradingsummary,"boolean"==typeof n.summary.warnofungroupedusers&&n.summary.warnofungroupedusers)n.summary.warnofungroupedusers="ungroupedusers";else switch(n.summary.warnofungroupedusers){case l.a.WARN_GROUPS_REQUIRED:n.summary.warnofungroupedusers="ungroupedusers";break;case l.a.WARN_GROUPS_OPTIONAL:n.summary.warnofungroupedusers="ungroupedusersoptional";break;default:n.summary.warnofungroupedusers=""}n.needsGradingAvalaible=e.gradingsummary&&e.gradingsummary.submissionsneedgradingcount>0&&n.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.2")})},AddonModAssignIndexComponent.prototype.goToSubmissionList=function(e,n){void 0===e?this.navCtrl.push("AddonModAssignSubmissionListPage",{courseId:this.courseId,groupId:this.group||0,moduleId:this.module.id,moduleName:this.moduleName}):!n&&this.showNumbers||this.navCtrl.push("AddonModAssignSubmissionListPage",{status:e,courseId:this.courseId,groupId:this.group||0,moduleId:this.module.id,moduleName:this.moduleName})},AddonModAssignIndexComponent.prototype.hasSyncSucceed=function(e){return e.updated&&this.submissionComponent&&this.submissionComponent.invalidateAndRefresh(),e.updated},AddonModAssignIndexComponent.prototype.invalidateContent=function(){var e=this,n=[];return n.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(n.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),this.canViewAllSubmissions&&n.push(this.assignProvider.invalidateSubmissionStatusData(this.assign.id,void 0,this.group))),Promise.all(n).finally(function(){e.submissionComponent&&e.submissionComponent.invalidateAndRefresh()})},AddonModAssignIndexComponent.prototype.ionViewDidEnter=function(){e.prototype.ionViewDidEnter.call(this),this.submissionComponent&&this.submissionComponent.ionViewDidEnter()},AddonModAssignIndexComponent.prototype.ionViewDidLeave=function(){e.prototype.ionViewDidLeave.call(this),this.submissionComponent&&this.submissionComponent.ionViewDidLeave()},AddonModAssignIndexComponent.prototype.isRefreshSyncNeeded=function(e){return!(!this.assign||e.assignId!=this.assign.id)&&(e.warnings&&e.warnings.length&&this.domUtils.showErrorModal(e.warnings[0]),!0)},AddonModAssignIndexComponent.prototype.sync=function(){return this.syncProvider.syncAssign(this.assign.id)},AddonModAssignIndexComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.savedObserver&&this.savedObserver.off(),this.submittedObserver&&this.submittedObserver.off(),this.gradedObserver&&this.gradedObserver.off()},AddonModAssignIndexComponent=Object(o.__decorate)([Object(o.__param)(2,Object(r.E)())],AddonModAssignIndexComponent)}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(498);var o=function(){return function AddonModChatComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(506),t(1590),t(652),t(653);var o=function(){return function AddonModForumComponentsModule(){}}()},function(e,n,t){"use strict";function View_CoreShowPasswordComponent_0(e){return o._42(0,[o._28(null,0),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(2,0,null,null,7,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"onClick"]],function(e,n,t){var o=!0;if("onClick"===n){o=!1!==e.component.toggle(t)&&o}return o},r.b,r.a)),o._15(3,1097728,null,0,i.a,[[8,""],l.a,o.p,o.K],{clear:[0,"clear"]},null),o._15(4,81920,null,0,s.a,[o.p],null,{onClick:"onClick"}),o._32(131072,a.a,[u.a,o.i]),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[],null,null,null,d.b,d.a)),o._15(8,704512,null,0,c.a,[o.p,l.a],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,""),e(n,4,0);e(n,8,0,t.iconName)},function(e,n){var t=n.component;e(n,2,0,o._41(n,2,0,o._29(n,5).transform(t.label)))})}t.d(n,"a",function(){return p}),n.b=View_CoreShowPasswordComponent_0;var o=t(1),r=t(47),i=t(44),l=t(9),s=t(491),a=t(26),u=t(19),d=t(81),c=t(76),p=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(15),r=(t.n(o),function(){function AddonModChatHelperProvider(e,n){this.translate=e,this.textUtils=n}return e=AddonModChatHelperProvider,AddonModChatHelperProvider.prototype.formatMessage=function(n,t,o){if(t.message=t.message.trim(),t.showDate=this.showDate(t,o),t.beep="beep "==t.message.substr(0,5)&&t.message.substr(5).trim(),t.special=t.issystem||t.system||!!t.beep,"/me "==t.message.substr(0,4)&&(t.special=!0,t.message=t.message.substr(4).trim()),!t.special&&t.message.match(e.patternto)){var r=t.message.match(e.patternto);t.message="<b>"+this.translate.instant("addon.mod_chat.saidto")+"</b> <i>"+r[1]+"</i>: "+r[2]}t.showUserData=this.showUserData(n,t,o),o&&(o.showTail=this.showTail(o,t))},AddonModChatHelperProvider.prototype.showUserData=function(e,n,t){return n.userid!=e&&(!t||t.userid!=n.userid||n.showDate||t.special)},AddonModChatHelperProvider.prototype.showTail=function(e,n){return!n||n.userid!=e.userid||n.showDate||n.special},AddonModChatHelperProvider.prototype.showDate=function(e,n){return!n||!o(1e3*e.timestamp).isSame(1e3*n.timestamp,"day")},AddonModChatHelperProvider.patternto=new RegExp(/^To\s([^:]+):(.*)/),AddonModChatHelperProvider;var e}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(501);var o=function(){return function CoreGradesComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(4);var o=function(){function CoreUserHelperProvider(e,n){this.translate=n,this.logger=e.getInstance("CoreUserHelperProvider")}return CoreUserHelperProvider.prototype.formatAddress=function(e,n,t){var o=this.translate.instant("core.listsep"),r=[e,n,t];return(r=r.filter(function(e){return e&&e.length>0})).join(o+" ")},CoreUserHelperProvider.prototype.formatRoleList=function(e){var n=this;if(!e||e.length<=0)return"";var t=this.translate.instant("core.listsep");return e.map(function(e){var t=n.translate.instant("core.user."+e.shortname);return t.indexOf("core.user.")<0?t:e.shortname}).join(t+" ")},CoreUserHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(170),r=function(){function AddonModLessonHelperProvider(e,n,t,o,r,i){this.domUtils=e,this.fb=n,this.translate=t,this.textUtils=o,this.timeUtils=r,this.lessonProvider=i}return AddonModLessonHelperProvider.prototype.formatActivityLink=function(e){var n=this.domUtils.convertToElement(e).querySelector("a");return n?{formatted:!0,label:n.innerHTML,href:n.href}:{formatted:!1,label:e,href:""}},AddonModLessonHelperProvider.prototype.getContentPageAnswerDataFromHtml=function(e){var n={buttonText:"",content:""},t=this.domUtils.convertToElement(e),o=t.querySelector('input[type="button"]');return o&&(n.buttonText=o.value,o.remove()),n.content=t.innerHTML.trim(),n},AddonModLessonHelperProvider.prototype.getPageButtonsFromHtml=function(e){var n=[],t=this.domUtils.convertToElement(e),o=t.querySelector(".branchbuttoncontainer");if(!o){if(!t.querySelector('form input[type="submit"]'))return n;o=t}return Array.from(o.querySelectorAll("form")).forEach(function(e){var t=e.querySelector('input[type="submit"], button[type="submit"]'),o=Array.from(e.querySelectorAll("input"));if(t&&o&&o.length){var r={id:t.id,title:t.title||t.value,content:"INPUT"==t.tagName?t.value:t.innerHTML.trim(),data:{}};o.forEach(function(e){"submit"!=e.type&&(r.data[e.name]=e.value)}),n.push(r)}}),n},AddonModLessonHelperProvider.prototype.getPageContentsFromPageData=function(e){var n=this.domUtils.convertToElement(e.pagecontent).querySelector(".contents");return n?n.innerHTML.trim():this.lessonProvider.isQuestionPage(e.page.type)||e.page.qtype==o.a.LESSON_PAGE_BRANCHTABLE?e.page.contents:e.pagecontent},AddonModLessonHelperProvider.prototype.getQuestionFromPageData=function(e,n){var t=this,r={},i=this.domUtils.convertToElement(n.pagecontent),l=i.querySelector(".fcontainer");Array.from(i.querySelectorAll('input[type="hidden"]')).forEach(function(n){e.addControl(n.name,t.fb.control(n.value))});var s=i.querySelector('input[type="submit"]');if(r.submitLabel=s?s.value:this.translate.instant("addon.mod_lesson.submit"),!l)return r;var a;switch(n.page.qtype){case o.a.LESSON_PAGE_TRUEFALSE:case o.a.LESSON_PAGE_MULTICHOICE:r.template="multichoice",r.options=[];var u=Array.from(l.querySelectorAll('input[type="radio"]'));if(!(u&&u.length||(r.multi=!0,(u=Array.from(l.querySelectorAll('input[type="checkbox"]')))&&u.length)))return r;var d=!1;u.forEach(function(n){var o={id:n.id,name:n.name,value:n.value,checked:!!n.checked,disabled:!!n.disabled},i=n.parentElement;if(o.checked||r.multi){e.addControl(o.name,t.fb.control(r.multi?{value:o.checked,disabled:o.disabled}:o.value)),d=!0}n.remove(),o.text=i.innerHTML.trim(),r.options.push(o)}),r.multi||(r.controlName=u[0].name,d||e.addControl(r.controlName,this.fb.control("")));break;case o.a.LESSON_PAGE_NUMERICAL:a="number";case o.a.LESSON_PAGE_SHORTANSWER:r.template="shortanswer";var c=l.querySelector('input[type="text"], input[type="number"]');if(!c)return r;r.input={id:c.id,name:c.name,maxlength:c.maxLength,type:a||"text"},e.addControl(c.name,this.fb.control({value:c.value,disabled:c.readOnly}));break;case o.a.LESSON_PAGE_ESSAY:r.template="essay";var p=l.querySelector("textarea");if(p)r.textarea={id:p.id,name:p.name||"answer[text]"},r.control=this.fb.control(""),e.addControl(r.textarea.name,r.control);else{var f=l.querySelector(".reviewessay");if(!f)return r;r.useranswer=f.innerHTML}break;case o.a.LESSON_PAGE_MATCHING:r.template="matching";var h=Array.from(l.querySelectorAll(".answeroption"));r.rows=[],h.forEach(function(n){var o=n.querySelector("label"),i=n.querySelector("select"),l=Array.from(n.querySelectorAll("option")),s={};if(o&&i&&l&&l.length){s.text=o.innerHTML.trim(),s.id=i.id,s.name=i.name,s.options=[];var a=!1;l.forEach(function(n){if(void 0!==n.value){var o={value:n.value,label:n.innerHTML.trim(),selected:n.selected};o.selected&&(a=!0,e.addControl(s.name,t.fb.control({value:o.value,disabled:!!i.disabled}))),s.options.push(o)}}),a||e.addControl(s.name,t.fb.control({value:"",disabled:!!i.disabled})),r.rows.push(s)}})}return r},AddonModLessonHelperProvider.prototype.getQuestionPageAnswerDataFromHtml=function(e){var n={},t=this.domUtils.convertToElement(e),o=t.querySelector('input[type="checkbox"][name*="answer"]');if(o)return n.isCheckbox=!0,n.checked=!!o.checked,n.name=o.name,n.highlight=!!t.querySelector(".highlight"),o.remove(),n.content=t.innerHTML.trim(),n;if(o=t.querySelector('input[type="number"],input[type="text"]'))return n.isText=!0,n.value=o.value,n;var r=t.querySelector("select");if(r&&r.options){var i=r.options[r.selectedIndex];return n.isSelect=!0,n.id=r.id,n.value=i?i.value:"",r.remove(),n.content=t.innerHTML.trim(),n}return e},AddonModLessonHelperProvider.prototype.getRetakeLabel=function(e,n){var t={retake:e.try+1,grade:"",timestart:"",duration:""},o=null!=e.grade;return o||e.end?(o&&(t.grade=this.translate.instant("core.percentagenumber",{$a:e.grade})),t.timestart=this.timeUtils.userDate(1e3*e.timestart),n&&(t.duration=this.timeUtils.formatTime(e.timeend-e.timestart))):(t.grade=this.translate.instant("addon.mod_lesson.notcompleted"),e.timestart&&(t.timestart=this.timeUtils.userDate(1e3*e.timestart))),this.translate.instant("addon.mod_lesson.retakelabel"+(n?"full":"short"),t)},AddonModLessonHelperProvider.prototype.prepareQuestionData=function(e,n){if("essay"==e.template&&e.textarea)n[e.textarea.name]=this.textUtils.formatHtmlLines(n[e.textarea.name]);else if("multichoice"==e.template&&e.multi)for(var t in n)t.match(/answer\[\d+\]/)&&0==n[t]&&delete n[t];return n},AddonModLessonHelperProvider.prototype.removeQuestionFromFeedback=function(e){var n=this.domUtils.convertToElement(e);return this.domUtils.removeElement(n,".generalbox:not(.feedback):not(.correctanswer)"),n.innerHTML.trim()},AddonModLessonHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(392),t(456),t(457),t(460),t(458),t(459),t(461),t(462),t(463),t(679),t(455),t(680);var o=function(){return function CoreSitePluginsComponentsModule(){}}()},function(e,n,t){"use strict";var o=t(413);Object(o.j)("coreShowHideAnimation",[Object(o.i)(":enter",[Object(o.h)({opacity:0}),Object(o.e)("500ms ease-in-out",Object(o.h)({opacity:1}))]),Object(o.i)(":leave",[Object(o.h)({opacity:1}),Object(o.e)("500ms ease-in-out",Object(o.h)({opacity:0}))])]),Object(o.j)("coreSlideInOut",[Object(o.i)("void => fromLeft",[Object(o.h)({transform:"translateX(0)",opacity:1}),Object(o.e)(300,Object(o.f)([Object(o.h)({opacity:0,transform:"translateX(-100%)",offset:0}),Object(o.h)({opacity:1,transform:"translateX(5%)",offset:.7}),Object(o.h)({opacity:1,transform:"translateX(0)",offset:1})]))]),Object(o.i)("fromLeft => void",[Object(o.h)({transform:"translateX(-100%)",opacity:0}),Object(o.e)(300,Object(o.f)([Object(o.h)({opacity:1,transform:"translateX(0)",offset:0}),Object(o.h)({opacity:1,transform:"translateX(5%)",offset:.3}),Object(o.h)({opacity:0,transform:"translateX(-100%)",offset:1})]))]),Object(o.i)("void => fromRight",[Object(o.h)({transform:"translateX(0)",opacity:1}),Object(o.e)(300,Object(o.f)([Object(o.h)({opacity:0,transform:"translateX(100%)",offset:0}),Object(o.h)({opacity:1,transform:"translateX(-5%)",offset:.7}),Object(o.h)({opacity:1,transform:"translateX(0)",offset:1})]))]),Object(o.i)("fromRight => void",[Object(o.h)({transform:"translateX(-100%)",opacity:0}),Object(o.e)(300,Object(o.f)([Object(o.h)({opacity:1,transform:"translateX(0)",offset:0}),Object(o.h)({opacity:1,transform:"translateX(-5%)",offset:.3}),Object(o.h)({opacity:0,transform:"translateX(100%)",offset:1})]))])])},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(6);var o=t(187),r=t(276),i=function(){function AddonCalendarFilterPopoverComponent(e,n){var t=this;this.eventsProvider=n,this.courseId=-1,this.types={},this.typeIcons={},this.typeKeys=[],this.courses=e.get("courses")||[];var i=e.get("filter")||{filtered:!1,courseId:null,categoryId:null,course:!0,group:!0,site:!0,user:!0,category:!0};this.courseId=i.courseId||-1,this.typeKeys=o.a.ALL_TYPES.map(function(e){return t.types[e]=i[e],t.typeIcons[e]=r.a.EVENTICONS[e],e})}return AddonCalendarFilterPopoverComponent.prototype.onChange=function(e){var n=this,t=this.types;if(this.courseId>0){var r=this.courses.find(function(e){return n.courseId==e.id});t.courseId=r&&r.id,t.categoryId=r&&r.category}else t.courseId=!1,t.categoryId=!1;t.filtered=t.courseId||o.a.ALL_TYPES.some(function(e){return!n.types[e]}),this.eventsProvider.trigger(o.a.FILTER_CHANGED_EVENT,t)},AddonCalendarFilterPopoverComponent}()},function(e,n,t){"use strict";function View_CoreLocalFileComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.fileName)})}function View_CoreLocalFileComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.size)})}function View_CoreLocalFileComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.timemodified)})}function View_CoreLocalFileComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"ion-input",[["autocapitalize","none"],["autocorrect","off"],["name","filename"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"ngModelChange"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==t.stopPropagation()&&o}if("ngModelChange"===n){o=!1!==(r.newFileName=t)&&o}return o},r.b,r.a)),o._15(1,671744,null,0,i.q,[[2,i.b],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),o._35(2048,null,i.m,null,[i.q]),o._15(3,16384,null,0,i.n,[i.m],null,null),o._15(4,5423104,null,0,l.a,[s.a,a.a,u.a,d.a,o.p,o.K,[2,c.a],[2,p.a],[2,i.m],f.a],{type:[0,"type"],autocorrect:[1,"autocorrect"],placeholder:[2,"placeholder"]},null),o._32(131072,h.a,[m.a,o.i]),o._15(6,81920,null,0,_.a,[o.p,g.a,v.a,[2,C.a]],null,null)],function(e,n){e(n,1,0,"filename",n.component.newFileName);e(n,4,0,"text","off",o._41(n,4,2,o._29(n,5).transform("core.filename"))),e(n,6,0)},function(e,n){e(n,0,0,o._29(n,3).ngClassUntouched,o._29(n,3).ngClassTouched,o._29(n,3).ngClassPristine,o._29(n,3).ngClassDirty,o._29(n,3).ngClassValid,o._29(n,3).ngClassInvalid,o._29(n,3).ngClassPending)})}function View_CoreLocalFileComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"onClick"]],function(e,n,t){var o=!0;if("onClick"===n){o=!1!==e.component.activateEdit(t)&&o}return o},y.b,y.a)),o._15(1,1097728,[[3,4]],0,P.a,[[8,""],s.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._15(2,81920,null,0,A.a,[o.p],null,{onClick:"onClick"}),o._32(131072,h.a,[m.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(5,0,null,0,1,"ion-icon",[["ios","md-create"],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(6,147456,null,0,b.a,[s.a,o.p,o.K],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),o._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"dark",""),e(n,2,0);e(n,6,0,"create","md-create")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,3).transform("core.edit")));e(n,5,0,o._29(n,6)._hidden)})}function View_CoreLocalFileComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["clear",""],["color","success"],["icon-only",""],["ion-button",""],["type","submit"]],[[1,"aria-label",0]],null,null,y.b,y.a)),o._15(1,1097728,[[3,4]],0,P.a,[[8,""],s.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,h.a,[m.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["ios","md-checkmark"],["name","checkmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,b.a,[s.a,o.p,o.K],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),o._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"success","");e(n,5,0,"checkmark","md-checkmark")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.save")));e(n,4,0,o._29(n,5)._hidden)})}function View_CoreLocalFileComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"div",[["class","buttons"],["item-end",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreLocalFileComponent_6)),o._15(3,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreLocalFileComponent_7)),o._15(6,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._16(8,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.deleteFile(t)&&o}return o},y.b,y.a)),o._15(9,1097728,[[3,4]],0,P.a,[[8,""],s.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,h.a,[m.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(12,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(13,147456,null,0,b.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,!t.editMode);e(n,6,0,t.editMode);e(n,9,0,"danger","");e(n,13,0,"trash")},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,10).transform("core.delete")));e(n,12,0,o._29(n,13)._hidden)})}function View_CoreLocalFileComponent_0(e){return o._42(0,[o._37(402653184,1,{formElement:0}),(e()(),o._16(1,0,[[1,0],["nameForm",1]],null,33,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,n,t){var r=!0,i=e.component;if("submit"===n){r=!1!==o._29(e,3).onSubmit(t)&&r}if("reset"===n){r=!1!==o._29(e,3).onReset()&&r}if("ngSubmit"===n){r=!1!==i.changeName(i.newFileName,t)&&r}return r},null,null)),o._15(2,16384,null,0,i.w,[],null,null),o._15(3,4210688,null,0,i.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),o._35(2048,null,i.b,null,[i.p]),o._15(5,16384,null,0,i.o,[i.b],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(7,0,null,null,26,"a",[["class","item-media item item-block"],["detail-none",""],["ion-item",""],["stacked",""],["text-wrap",""]],[[2,"item-input",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.fileClicked(t)&&o}return o},S.b,S.a)),o._15(8,1097728,null,3,p.a,[u.a,s.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(12,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(14,0,null,0,0,"img",[["item-start",""],["role","presentation"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(e()(),o._40(-1,2,["\n\n        "])),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_CoreLocalFileComponent_1)),o._15(18,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_CoreLocalFileComponent_2)),o._15(22,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_CoreLocalFileComponent_3)),o._15(25,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n\n        "])),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,3,1,null,View_CoreLocalFileComponent_4)),o._15(29,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n\n        "])),(e()(),o._11(16777216,null,4,1,null,View_CoreLocalFileComponent_5)),o._15(32,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,18,0,!t.editMode);e(n,22,0,t.size&&!t.editMode);e(n,25,0,t.timemodified&&!t.editMode);e(n,29,0,t.editMode);e(n,32,0,t.manage)},function(e,n){var t=n.component;e(n,1,0,o._29(n,5).ngClassUntouched,o._29(n,5).ngClassTouched,o._29(n,5).ngClassPristine,o._29(n,5).ngClassDirty,o._29(n,5).ngClassValid,o._29(n,5).ngClassInvalid,o._29(n,5).ngClassPending);e(n,7,0,t.editMode);e(n,14,0,t.fileIcon,o._19(1,"",t.fileExtension,""))})}t.d(n,"a",function(){return w}),n.b=View_CoreLocalFileComponent_0;var o=t(1),r=t(111),i=t(24),l=t(91),s=t(9),a=t(17),u=t(20),d=t(36),c=t(30),p=t(22),f=t(35),h=t(26),m=t(19),_=t(376),g=t(5),v=t(3),C=t(21),y=t(47),P=t(44),A=t(491),b=t(49),I=t(8),S=t(32),E=t(28),M=t(34),w=o._14({encapsulation:2,styles:[],data:{}})},,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(523);var o=function(){return function AddonBlogComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(525);var o=function(){return function AddonCompetencyComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(526);var o=function(){return function AddonCourseCompletionComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonFilesHelperProvider(e,n,t,o){this.sitesProvider=e,this.fileUploaderHelper=n,this.filesProvider=t,this.domUtils=o}return AddonFilesHelperProvider.prototype.uploadPrivateFile=function(e){var n=this,t=this.sitesProvider.getCurrentSite(),o=t.getInfo().usermaxuploadfilesize,r=t.getInfo().userquota;return 0===r?r=-1:r>0&&void 0!==e&&(r-=e.filesizewithoutreferences),void 0!==r&&(o=Math.min(o,r)),this.fileUploaderHelper.selectAndUploadFile(o).then(function(e){if(!e)return Promise.reject(null);var t=n.domUtils.showModalLoading("core.fileuploader.uploading",!0);return n.filesProvider.moveFromDraftToPrivate(e.itemid).catch(function(e){return n.domUtils.showErrorModalDefault(e,"core.fileuploader.errorwhileuploading",!0),Promise.reject(null)}).finally(function(){t.dismiss()})}).then(function(){n.domUtils.showToast("core.fileuploader.fileuploaded",!0,void 0,"core-toast-success")})},AddonFilesHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(497);var o=function(){return function AddonModBookComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(499);var o=function(){return function AddonModChoiceComponentsModule(){}}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1573),t(1574),t(746);var o=function(){return function AddonCalendarComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(505);var o=function(){return function AddonModFolderComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(508),t(655);var o=function(){return function AddonModGlossaryComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(509);var o=function(){return function AddonModImscpComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(510);var o=function(){return function AddonModLessonComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(511);var o=function(){return function AddonModLtiComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(512);var o=function(){return function AddonModPageComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(513),t(777);var o=function(){return function AddonModQuizComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(514);var o=function(){return function AddonModResourceComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(515);var o=function(){return function AddonModScormComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(516);var o=function(){return function AddonModSurveyComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(517);var o=function(){return function AddonModUrlComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(518),t(670);var o=function(){return function AddonModWikiComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(529);var o=function(){return function AddonNotesComponentsModule(){}}()},,,,,function(e,n,t){"use strict";function View_CoreNavigationBarComponent_3(e){return o._42(0,[(e()(),o._16(0,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),o._15(1,540672,null,0,r.a,[o.p,i.a,l.a,s.a,a.a,u.a,d.a,c.a,p.a,f.a,h.a,m.a,[2,_.a],[2,g.a],[2,v.a],C.a,y.a,P.a,A.a,b.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._11(0,null,null,0))],function(e,n){var t=n.component;e(n,1,0,t.previousTitle,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId)},null)}function View_CoreNavigationBarComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"a",[["class","core-navigation-bar-arrow"],["color","light"],["ion-button",""],["padding-end",""]],[[1,"icon-only",0],[1,"icon-start",0],[8,"title",0]],[[null,"click"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.action.emit(r.previous)&&o}return o},I.b,I.a)),o._15(1,1097728,null,0,S.a,[[8,""],E.a,o.p,o.K],{color:[0,"color"]},null),o._32(131072,M.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,w.a,[E.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._11(16777216,null,0,1,null,View_CoreNavigationBarComponent_3)),o._15(8,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n            "]))],function(e,n){var t=n.component;e(n,1,0,"light");e(n,5,0,"arrow-back","ios-arrow-back");e(n,8,0,t.previousTitle)},function(e,n){var t=n.component;e(n,0,0,!t.previousTitle||null,!!t.previousTitle||null,t.previousTitle||o._41(n,0,2,o._29(n,2).transform("core.previous")));e(n,4,0,o._29(n,5)._hidden)})}function View_CoreNavigationBarComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.showInfo()&&o}return o},I.b,I.a)),o._15(1,1097728,null,0,S.a,[[8,""],E.a,o.p,o.K],{clear:[0,"clear"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(3,0,null,0,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,w.a,[E.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,4,0,"information-circle")},function(e,n){e(n,0,0,n.component.title);e(n,3,0,o._29(n,4)._hidden)})}function View_CoreNavigationBarComponent_6(e){return o._42(0,[(e()(),o._16(0,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),o._15(1,540672,null,0,r.a,[o.p,i.a,l.a,s.a,a.a,u.a,d.a,c.a,p.a,f.a,h.a,m.a,[2,_.a],[2,g.a],[2,v.a],C.a,y.a,P.a,A.a,b.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._11(0,null,null,0))],function(e,n){var t=n.component;e(n,1,0,t.nextTitle,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId)},null)}function View_CoreNavigationBarComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"a",[["class","core-navigation-bar-arrow"],["ion-button",""],["padding-start",""]],[[1,"icon-only",0],[1,"icon-end",0],[8,"title",0]],[[null,"click"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.action.emit(r.next)&&o}return o},I.b,I.a)),o._15(1,1097728,null,0,S.a,[[8,""],E.a,o.p,o.K],null,null),o._32(131072,M.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._11(16777216,null,0,1,null,View_CoreNavigationBarComponent_6)),o._15(5,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(8,147456,null,0,w.a,[E.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(-1,0,["\n            "]))],function(e,n){e(n,5,0,n.component.nextTitle);e(n,8,0,"arrow-forward","ios-arrow-forward")},function(e,n){var t=n.component;e(n,0,0,!t.nextTitle||null,!!t.nextTitle||null,t.nextTitle||o._41(n,0,2,o._29(n,2).transform("core.next")));e(n,7,0,o._29(n,8)._hidden)})}function View_CoreNavigationBarComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,27,"ion-grid",[["class","grid"],["no-padding",""],["padding-bottom",""]],null,null,null,null,null)),o._15(1,16384,null,0,T.a,[],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(3,0,null,null,23,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(4,16384,null,0,O.a,[],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(6,0,null,null,5,"ion-col",[["class","col"],["col-4",""],["text-start",""]],null,null,null,null,null)),o._15(7,16384,null,0,D.a,[],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreNavigationBarComponent_2)),o._15(10,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(13,0,null,null,5,"ion-col",[["class","col"],["col-4",""],["text-center",""]],null,null,null,null,null)),o._15(14,16384,null,0,D.a,[],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreNavigationBarComponent_4)),o._15(17,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(20,0,null,null,5,"ion-col",[["class","col"],["col-4",""],["text-end",""]],null,null,null,null,null)),o._15(21,16384,null,0,D.a,[],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreNavigationBarComponent_5)),o._15(24,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,10,0,t.previous);e(n,17,0,t.info);e(n,24,0,t.next)},null)}function View_CoreNavigationBarComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreNavigationBarComponent_1)),o._15(1,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.previous||t.info||t.next)},null)}t.d(n,"a",function(){return x}),n.b=View_CoreNavigationBarComponent_0;var o=t(1),r=t(48),i=t(2),l=t(5),s=t(12),a=t(19),u=t(17),d=t(3),c=t(23),p=t(7),f=t(18),h=t(11),m=t(16),_=t(21),g=t(30),v=t(29),C=t(43),y=t(10),P=t(41),A=t(31),b=t(37),I=t(47),S=t(44),E=t(9),M=t(26),w=t(49),k=t(8),T=t(165),O=t(121),D=t(120),x=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4);var o=function(){return function CoreLoginSitesPageModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function AddonModQuizConnectionErrorComponent(){}}()},,,,,,,,,,,function(e,n){function webpackEmptyAsyncContext(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,e.exports=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id=788},,,,,,,,,,,,,,,,,,,,,,function(e,n,t){function webpackAsyncContext(e){var n=o[e];return n?t.e(n[1]).then(function(){return t(n[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var o={"../addon/badges/pages/issued-badge/issued-badge.module.ngfactory":[1974,145],"../addon/badges/pages/user-badges/user-badges.module.ngfactory":[1975,144],"../addon/blog/pages/entries/entries.module.ngfactory":[1976,143],"../addon/calendar/pages/day/day.module.ngfactory":[2113,142],"../addon/calendar/pages/edit-event/edit-event.module.ngfactory":[2104,141],"../addon/calendar/pages/event/event.module.ngfactory":[2105,140],"../addon/calendar/pages/index/index.module.ngfactory":[2079,139],"../addon/calendar/pages/list/list.module.ngfactory":[2114,138],"../addon/calendar/pages/settings/settings.module.ngfactory":[1977,137],"../addon/competency/pages/competencies/competencies.module.ngfactory":[1978,136],"../addon/competency/pages/competency/competency.module.ngfactory":[1980,135],"../addon/competency/pages/competencysummary/competencysummary.module.ngfactory":[1979,134],"../addon/competency/pages/coursecompetencies/coursecompetencies.module.ngfactory":[1981,133],"../addon/competency/pages/plan/plan.module.ngfactory":[1982,132],"../addon/competency/pages/planlist/planlist.module.ngfactory":[1983,131],"../addon/coursecompletion/pages/report/report.module.ngfactory":[1984,130],"../addon/files/pages/list/list.module.ngfactory":[1985,129],"../addon/messageoutput/airnotifier/pages/devices/devices.module.ngfactory":[1986,128],"../addon/messages/pages/contacts/contacts.module.ngfactory":[1987,3],"../addon/messages/pages/conversation-info/conversation-info.module.ngfactory":[1988,127],"../addon/messages/pages/discussion/discussion.module.ngfactory":[2119,16],"../addon/messages/pages/group-conversations/group-conversations.module.ngfactory":[2115,126],"../addon/messages/pages/index/index.module.ngfactory":[1989,2],"../addon/messages/pages/search/search.module.ngfactory":[2080,1],"../addon/messages/pages/settings/settings.module.ngfactory":[2081,0],"../addon/mod/assign/pages/edit-feedback-modal/edit-feedback-modal.module.ngfactory":[1990,7],"../addon/mod/assign/pages/edit/edit.module.ngfactory":[2082,6],"../addon/mod/assign/pages/index/index.module.ngfactory":[1991,5],"../addon/mod/assign/pages/submission-list/submission-list.module.ngfactory":[2083,125],"../addon/mod/assign/pages/submission-review/submission-review.module.ngfactory":[1992,4],"../addon/mod/book/pages/index/index.module.ngfactory":[1993,124],"../addon/mod/book/pages/toc/toc.module.ngfactory":[1994,123],"../addon/mod/chat/pages/chat/chat.module.ngfactory":[2084,15],"../addon/mod/chat/pages/index/index.module.ngfactory":[1995,122],"../addon/mod/chat/pages/session-messages/session-messages.module.ngfactory":[1996,121],"../addon/mod/chat/pages/sessions/sessions.module.ngfactory":[1997,120],"../addon/mod/chat/pages/users/users.module.ngfactory":[1998,119],"../addon/mod/choice/pages/index/index.module.ngfactory":[1999,118],"../addon/mod/data/pages/edit/edit.module.ngfactory":[2085,117],"../addon/mod/data/pages/entry/entry.module.ngfactory":[2086,14],"../addon/mod/data/pages/index/index.module.ngfactory":[2e3,116],"../addon/mod/data/pages/search/search.module.ngfactory":[2087,115],"../addon/mod/feedback/pages/attempt/attempt.module.ngfactory":[2001,114],"../addon/mod/feedback/pages/form/form.module.ngfactory":[2088,26],"../addon/mod/feedback/pages/index/index.module.ngfactory":[2002,113],"../addon/mod/feedback/pages/nonrespondents/nonrespondents.module.ngfactory":[2003,112],"../addon/mod/feedback/pages/respondents/respondents.module.ngfactory":[2004,111],"../addon/mod/folder/pages/index/index.module.ngfactory":[2005,110],"../addon/mod/forum/pages/discussion/discussion.module.ngfactory":[2116,13],"../addon/mod/forum/pages/edit-post/edit-post.module.ngfactory":[2006,109],"../addon/mod/forum/pages/index/index.module.ngfactory":[2007,108],"../addon/mod/forum/pages/new-discussion/new-discussion.module.ngfactory":[2106,107],"../addon/mod/forum/pages/sort-order-selector/sort-order-selector.module.ngfactory":[2008,106],"../addon/mod/glossary/pages/edit/edit.module.ngfactory":[2089,105],"../addon/mod/glossary/pages/entry/entry.module.ngfactory":[2009,12],"../addon/mod/glossary/pages/index/index.module.ngfactory":[2010,104],"../addon/mod/imscp/pages/index/index.module.ngfactory":[2011,103],"../addon/mod/imscp/pages/toc/toc.module.ngfactory":[2012,102],"../addon/mod/lesson/pages/index/index.module.ngfactory":[2013,101],"../addon/mod/lesson/pages/menu-modal/menu-modal.module.ngfactory":[2014,100],"../addon/mod/lesson/pages/password-modal/password-modal.module.ngfactory":[2015,99],"../addon/mod/lesson/pages/player/player.module.ngfactory":[2117,25],"../addon/mod/lesson/pages/user-retake/user-retake.module.ngfactory":[2090,98],"../addon/mod/lti/pages/index/index.module.ngfactory":[2016,97],"../addon/mod/page/pages/index/index.module.ngfactory":[2017,96],"../addon/mod/quiz/pages/attempt/attempt.module.ngfactory":[2018,95],"../addon/mod/quiz/pages/index/index.module.ngfactory":[2019,94],"../addon/mod/quiz/pages/navigation-modal/navigation-modal.module.ngfactory":[2020,93],"../addon/mod/quiz/pages/player/player.module.ngfactory":[2118,9],"../addon/mod/quiz/pages/preflight-modal/preflight-modal.module.ngfactory":[2021,92],"../addon/mod/quiz/pages/review/review.module.ngfactory":[2091,24],"../addon/mod/resource/pages/index/index.module.ngfactory":[2022,91],"../addon/mod/scorm/pages/index/index.module.ngfactory":[2023,90],"../addon/mod/scorm/pages/player/player.module.ngfactory":[2107,89],"../addon/mod/scorm/pages/toc/toc.module.ngfactory":[2024,88],"../addon/mod/survey/pages/index/index.module.ngfactory":[2025,87],"../addon/mod/url/pages/index/index.module.ngfactory":[2026,86],"../addon/mod/wiki/pages/edit/edit.module.ngfactory":[2108,85],"../addon/mod/wiki/pages/index/index.module.ngfactory":[2027,84],"../addon/mod/wiki/pages/map/map.module.ngfactory":[2028,83],"../addon/mod/workshop/pages/assessment/assessment.module.ngfactory":[2092,23],"../addon/mod/workshop/pages/edit-submission/edit-submission.module.ngfactory":[2093,82],"../addon/mod/workshop/pages/index/index.module.ngfactory":[2029,81],"../addon/mod/workshop/pages/phase/phase.module.ngfactory":[2030,80],"../addon/mod/workshop/pages/submission/submission.module.ngfactory":[2109,8],"../addon/notes/pages/add/add.module.ngfactory":[2031,79],"../addon/notes/pages/list/list.module.ngfactory":[2032,78],"../addon/notifications/pages/list/list.module.ngfactory":[2094,77],"../addon/notifications/pages/settings/settings.module.ngfactory":[2095,76],"../addon/storagemanager/pages/course-storage/course-storage.module.ngfactory":[2033,75],"../components/split-view/placeholder/placeholder.module.ngfactory":[2034,74],"../core/comments/pages/add/add.module.ngfactory":[2035,73],"../core/comments/pages/viewer/viewer.module.ngfactory":[2110,72],"../core/contentlinks/pages/choose-site/choose-site.module.ngfactory":[2036,71],"../core/course/pages/list-mod-type/list-mod-type.module.ngfactory":[2037,70],"../core/course/pages/section-selector/section-selector.module.ngfactory":[2038,69],"../core/course/pages/section/section.module.ngfactory":[2111,68],"../core/course/pages/unsupported-module/unsupported-module.module.ngfactory":[2039,67],"../core/courses/pages/available-courses/available-courses.module.ngfactory":[2040,22],"../core/courses/pages/categories/categories.module.ngfactory":[2041,21],"../core/courses/pages/course-preview/course-preview.module.ngfactory":[2112,66],"../core/courses/pages/dashboard/dashboard.module.ngfactory":[2096,10],"../core/courses/pages/my-courses/my-courses.module.ngfactory":[2042,19],"../core/courses/pages/search/search.module.ngfactory":[2043,20],"../core/courses/pages/self-enrol-password/self-enrol-password.module.ngfactory":[2044,65],"../core/emulator/pages/capture-media/capture-media.module.ngfactory":[2097,64],"../core/grades/pages/course/course.module.ngfactory":[2045,63],"../core/grades/pages/courses/courses.module.ngfactory":[2046,62],"../core/grades/pages/coursesplit/coursesplit.module.ngfactory":[2047,61],"../core/grades/pages/grade/grade.module.ngfactory":[2048,60],"../core/login/pages/change-password/change-password.module.ngfactory":[2049,59],"../core/login/pages/credentials/credentials.module.ngfactory":[2098,58],"../core/login/pages/email-signup/email-signup.module.ngfactory":[2099,11],"../core/login/pages/forgotten-password/forgotten-password.module.ngfactory":[2050,57],"../core/login/pages/init/init.module.ngfactory":[2051,56],"../core/login/pages/reconnect/reconnect.module.ngfactory":[2052,55],"../core/login/pages/site-error/site-error.module.ngfactory":[2053,54],"../core/login/pages/site-help/site-help.module.ngfactory":[2054,53],"../core/login/pages/site-policy/site-policy.module.ngfactory":[2055,52],"../core/login/pages/site/site.module.ngfactory":[2100,51],"../core/login/pages/sites/sites.module.ngfactory":[2056,50],"../core/mainmenu/pages/menu/menu.module.ngfactory":[2101,49],"../core/mainmenu/pages/more/more.module.ngfactory":[2057,48],"../core/rating/pages/ratings/ratings.module.ngfactory":[2058,47],"../core/settings/pages/about/about.module.ngfactory":[2059,46],"../core/settings/pages/app/app.module.ngfactory":[2060,45],"../core/settings/pages/deviceinfo/deviceinfo.module.ngfactory":[2102,44],"../core/settings/pages/general/general.module.ngfactory":[2061,43],"../core/settings/pages/licenses/licenses.module.ngfactory":[2062,42],"../core/settings/pages/site/site.module.ngfactory":[2063,41],"../core/settings/pages/space-usage/space-usage.module.ngfactory":[2064,40],"../core/settings/pages/synchronization/synchronization.module.ngfactory":[2065,39],"../core/sharedfiles/pages/choose-site/choose-site.module.ngfactory":[2066,38],"../core/sharedfiles/pages/list/list.module.ngfactory":[2067,37],"../core/sitehome/pages/index/index.module.ngfactory":[2068,18],"../core/siteplugins/pages/module-index/module-index.module.ngfactory":[2069,36],"../core/siteplugins/pages/plugin-page/plugin-page.module.ngfactory":[2070,35],"../core/tag/pages/index-area/index-area.module.ngfactory":[2071,34],"../core/tag/pages/index/index.module.ngfactory":[2072,33],"../core/tag/pages/search/search.module.ngfactory":[2073,32],"../core/user/pages/about/about.module.ngfactory":[2074,17],"../core/user/pages/participants/participants.module.ngfactory":[2075,31],"../core/user/pages/profile/profile.module.ngfactory":[2103,30],"../core/viewer/pages/iframe/iframe.module.ngfactory":[2076,29],"../core/viewer/pages/image/image.module.ngfactory":[2077,28],"../core/viewer/pages/text/text.module.ngfactory":[2078,27]};webpackAsyncContext.keys=function webpackAsyncContextKeys(){return Object.keys(o)},webpackAsyncContext.id=810,e.exports=webpackAsyncContext},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";(function(e){t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});var o=t(0),r=t(439),i=function(){function FileTransferErrorMock(e,n,t,o,r,i){this.code=e,this.source=n,this.target=t,this.http_status=o,this.body=r,this.exception=i}return FileTransferErrorMock.FILE_NOT_FOUND_ERR=1,FileTransferErrorMock.INVALID_URL_ERR=2,FileTransferErrorMock.CONNECTION_ERR=3,FileTransferErrorMock.ABORT_ERR=4,FileTransferErrorMock.NOT_MODIFIED_ERR=5,FileTransferErrorMock}(),l=function(e){function FileTransferMock(n,t){var o=e.call(this)||this;return o.appProvider=n,o.fileProvider=t,o}return Object(o.__extends)(FileTransferMock,e),FileTransferMock.prototype.create=function(){return new s(this.appProvider,this.fileProvider)},FileTransferMock}(r.a),s=function(n){function FileTransferObjectMock(e,t){var o=n.call(this)||this;return o.appProvider=e,o.fileProvider=t,o}return Object(o.__extends)(FileTransferObjectMock,n),FileTransferObjectMock.prototype.abort=function(){this.xhr&&(this.xhr.abort(),this.reject(new i(i.ABORT_ERR,this.source,this.target,null,null,null)))},FileTransferObjectMock.prototype.download=function(n,t,o,r){var l=this;return new Promise(function(o,s){var a=l.getBasicAuthHeader(n),u=new XMLHttpRequest,d=l.appProvider.isDesktop(),c=null;l.xhr=u,l.source=n,l.target=t,l.reject=s,a&&(n=n.replace(l.getUrlCredentials(n)+"@",""),(r=r||{}).headers=r.headers||{},r.headers[a.name]=a.value),r&&(c=r.headers||null),u.open("GET",n,!0),u.responseType=d?"arraybuffer":"blob";for(var p in c)u.setRequestHeader(p,c[p]);u.onprogress=function(e,n){l.progressListener&&l.progressListener(n)},u.onerror=function(e){s(new i(-1,n,t,u.status,u.statusText,null))},u.onload=function(){var r=u.response||u.responseText,a=Math.max(1223===u.status?204:u.status,0);if(a<200||a>=300)l.parseResponse(r).then(function(e){s(new i(-1,n,t,u.status,e||u.statusText,null))});else if(r){var c=l.fileProvider.getBasePathInstant();t=(t=t.replace(c,"")).replace(/%20/g," "),d&&(r=e.from(new Uint8Array(r))),l.fileProvider.writeFile(t,r).then(o,s)}else s()},u.send()})},FileTransferObjectMock.prototype.getBasicAuthHeader=function(e){var n=null;if(window.btoa){var t=this.getUrlCredentials(e);if(t){n={name:"Authorization",value:"Basic "+window.btoa(t)}}}return n},FileTransferObjectMock.prototype.getHeadersAsObject=function(e){var n=e.getAllResponseHeaders(),t={};if(n){var o=n.split("\n");for(var r in o){var i=o[r],l=i.indexOf(":");-1!=l&&(t[i.substr(0,l)]=i.substr(l+1).trim())}}return t},FileTransferObjectMock.prototype.getUrlCredentials=function(e){var n=/^https?\:\/\/(?:(?:(([^:@\/]*)(?::([^@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?).*$/.exec(e);return n&&n[1]},FileTransferObjectMock.prototype.onProgress=function(e){this.progressListener=e},FileTransferObjectMock.prototype.parseJSON=function(e){try{return JSON.parse(e)}catch(e){}return e},FileTransferObjectMock.prototype.parseResponse=function(e){var n=this;return new Promise(function(n,t){if(e)if(e.toString&&"[object Blob]"==e.toString()){var o=new FileReader;o.onloadend=function(){n(o.result)},o.readAsText(e)}else e.toString&&"[object ArrayBuffer]"==e.toString()?n(String.fromCharCode.apply(null,new Uint8Array(e))):n(e);else n("")}).then(function(e){return n.parseJSON(e)})},FileTransferObjectMock.prototype.upload=function(e,n,t,o){var r=this;return new Promise(function(o,l){var s=r.getBasicAuthHeader(n),a=null,u=null,d=null,c=null,p=null;s&&(n=n.replace(r.getUrlCredentials(n)+"@",""),(t=t||{}).headers=t.headers||{},t.headers[s.name]=s.value),t&&(a=t.fileKey,u=t.fileName,c=t.headers,p="PUT"==(p=t.httpMethod||"POST").toUpperCase()?"PUT":"POST",d=t.params?t.params:{}),(c=c||{})["Content-Disposition"]||(c["Content-Disposition"]="form-data;"+(a?' name="'+a+'";':"")+(u?' filename="'+u+'"':"")),delete c["Content-Type"],r.fileProvider.getFile(e).then(function(e){return r.fileProvider.getFileObjectFromFileEntry(e)}).then(function(t){var s=new XMLHttpRequest;s.open(p||"POST",n);for(var a in c)"Connection"!=a&&s.setRequestHeader(a,c[a]);s.onprogress=function(e){r.progressListener&&r.progressListener(e)},r.xhr=s,r.source=e,r.target=n,r.reject=l,s.onerror=function(){l(new i(-1,e,n,s.status,s.statusText,null))},s.onload=function(){o({bytesSent:t.size,responseCode:s.status,response:s.response,headers:r.getHeadersAsObject(s)})};var f=new FormData;for(var h in d)f.append(h,d[h]);f.append("file",t,u),s.send(f)}).catch(l)})},FileTransferObjectMock}(r.b)}).call(n,t(358).Buffer)},,,function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function AddonModAssignBaseFeedbackHandler(e){this.translate=e,this.name="AddonModAssignBaseFeedbackHandler",this.type="base"}return AddonModAssignBaseFeedbackHandler.prototype.discardDraft=function(e,n,t){},AddonModAssignBaseFeedbackHandler.prototype.getComponent=function(e,n){},AddonModAssignBaseFeedbackHandler.prototype.getDraft=function(e,n,t){},AddonModAssignBaseFeedbackHandler.prototype.getPluginFiles=function(e,n,t,o){return[]},AddonModAssignBaseFeedbackHandler.prototype.getPluginName=function(e){var n="addon.mod_assign_feedback_"+e.type+".pluginname",t=this.translate.instant(n);return n!=t?t:e.name?e.name:void 0},AddonModAssignBaseFeedbackHandler.prototype.hasDataChanged=function(e,n,t,o,r){return!1},AddonModAssignBaseFeedbackHandler.prototype.hasDraftData=function(e,n,t){return!1},AddonModAssignBaseFeedbackHandler.prototype.isEnabled=function(){return!0},AddonModAssignBaseFeedbackHandler.prototype.prefetch=function(e,n,t,o){return Promise.resolve()},AddonModAssignBaseFeedbackHandler.prototype.prepareFeedbackData=function(e,n,t,o,r){},AddonModAssignBaseFeedbackHandler.prototype.saveDraft=function(e,n,t,o,r){},AddonModAssignBaseFeedbackHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreCache(){this.cacheStore={}}return CoreCache.prototype.clear=function(){this.cacheStore={}},CoreCache.prototype.getEntry=function(e){return this.cacheStore[e]||(this.cacheStore[e]={}),this.cacheStore[e]},CoreCache.prototype.getValue=function(e,n,t){var o=this.getEntry(e);if(o[n]&&void 0!==o[n].value){var r=Date.now();if(t||o[n].timemodified+3e5>=r)return o[n].value}},CoreCache.prototype.invalidate=function(e){var n=this.getEntry(e);for(var t in n)n[t].timemodified=0},CoreCache.prototype.setValue=function(e,n,t){return this.getEntry(e)[n]={value:t,timemodified:Date.now()},t},CoreCache}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function AddonModAssignBaseSubmissionHandler(e){this.translate=e,this.name="AddonModAssignBaseSubmissionHandler",this.type="base"}return AddonModAssignBaseSubmissionHandler.prototype.canEditOffline=function(e,n,t){return!1},AddonModAssignBaseSubmissionHandler.prototype.isEmpty=function(e,n){return!0},AddonModAssignBaseSubmissionHandler.prototype.clearTmpData=function(e,n,t,o){},AddonModAssignBaseSubmissionHandler.prototype.copySubmissionData=function(e,n,t,o,r){},AddonModAssignBaseSubmissionHandler.prototype.deleteOfflineData=function(e,n,t,o,r){},AddonModAssignBaseSubmissionHandler.prototype.getComponent=function(e,n,t){},AddonModAssignBaseSubmissionHandler.prototype.getPluginFiles=function(e,n,t,o){return[]},AddonModAssignBaseSubmissionHandler.prototype.getPluginName=function(e){var n="addon.mod_assign_submission_"+e.type+".pluginname",t=this.translate.instant(n);return n!=t?t:e.name?e.name:void 0},AddonModAssignBaseSubmissionHandler.prototype.getSizeForCopy=function(e,n){return 0},AddonModAssignBaseSubmissionHandler.prototype.getSizeForEdit=function(e,n,t,o){return 0},AddonModAssignBaseSubmissionHandler.prototype.hasDataChanged=function(e,n,t,o){return!1},AddonModAssignBaseSubmissionHandler.prototype.isEnabled=function(){return!0},AddonModAssignBaseSubmissionHandler.prototype.isEnabledForEdit=function(){return!1},AddonModAssignBaseSubmissionHandler.prototype.prefetch=function(e,n,t,o){return Promise.resolve()},AddonModAssignBaseSubmissionHandler.prototype.prepareSubmissionData=function(e,n,t,o,r,i,l,s){},AddonModAssignBaseSubmissionHandler.prototype.prepareSyncData=function(e,n,t,o,r,i){},AddonModAssignBaseSubmissionHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreCourseModulePrefetchHandlerBase(e,n,t,o,r,i,l,s,a){this.translate=e,this.appProvider=n,this.utils=t,this.courseProvider=o,this.filepoolProvider=r,this.sitesProvider=i,this.domUtils=l,this.filterHelper=s,this.pluginFileDelegate=a,this.name="CoreCourseModulePrefetchHandler",this.modName="default",this.component="core_module",this.updatesNames=/^.*files$/,this.skipListStatus=!1,this.downloadPromises={}}return CoreCourseModulePrefetchHandlerBase.prototype.addOngoingDownload=function(e,n,t){var o=this;t=t||this.sitesProvider.getCurrentSiteId();var r=this.getUniqueId(e);return this.downloadPromises[t]||(this.downloadPromises[t]={}),this.downloadPromises[t][r]=n.finally(function(){delete o.downloadPromises[t][r]}),this.downloadPromises[t][r]},CoreCourseModulePrefetchHandlerBase.prototype.download=function(e,n,t){return Promise.resolve()},CoreCourseModulePrefetchHandlerBase.prototype.getContentDownloadableFiles=function(e){var n=this,t=[];return e.contents&&e.contents.length&&e.contents.forEach(function(e){n.isFileDownloadable(e)&&t.push(e)}),t},CoreCourseModulePrefetchHandlerBase.prototype.getDownloadSize=function(e,n,t){var o=this;return this.getFiles(e,n).then(function(e){return o.pluginFileDelegate.getFilesSize(e)}).catch(function(){return{size:-1,total:!1}})},CoreCourseModulePrefetchHandlerBase.prototype.getDownloadedSize=function(e,n){var t=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getFilesSizeByComponent(t,this.component,e.id)},CoreCourseModulePrefetchHandlerBase.prototype.getFiles=function(e,n,t){return Promise.resolve([])},CoreCourseModulePrefetchHandlerBase.prototype.getIntroFiles=function(e,n,t){return Promise.resolve(this.getIntroFilesFromInstance(e))},CoreCourseModulePrefetchHandlerBase.prototype.getIntroFilesFromInstance=function(e,n){if(n){if(void 0!==n.introfiles)return n.introfiles;if(n.intro)return this.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(n.intro)}return e.description?this.filepoolProvider.extractDownloadableFilesFromHtmlAsFakeFileObjects(e.description):[]},CoreCourseModulePrefetchHandlerBase.prototype.getOngoingDownload=function(e,n){return n=n||this.sitesProvider.getCurrentSiteId(),this.isDownloading(e,n)?this.downloadPromises[n][this.getUniqueId(e)]:Promise.resolve()},CoreCourseModulePrefetchHandlerBase.prototype.getUniqueId=function(e){return this.component+"#"+e},CoreCourseModulePrefetchHandlerBase.prototype.invalidateContent=function(e,n){return Promise.resolve()},CoreCourseModulePrefetchHandlerBase.prototype.invalidateModule=function(e,n){return this.courseProvider.invalidateModule(e.id)},CoreCourseModulePrefetchHandlerBase.prototype.isDownloadable=function(e,n){return!0},CoreCourseModulePrefetchHandlerBase.prototype.isDownloading=function(e,n){return n=n||this.sitesProvider.getCurrentSiteId(),!(!this.downloadPromises[n]||!this.downloadPromises[n][this.getUniqueId(e)])},CoreCourseModulePrefetchHandlerBase.prototype.isEnabled=function(){return!0},CoreCourseModulePrefetchHandlerBase.prototype.isFileDownloadable=function(e){return"file"===e.type},CoreCourseModulePrefetchHandlerBase.prototype.loadContents=function(e,n,t){return Promise.resolve()},CoreCourseModulePrefetchHandlerBase.prototype.prefetch=function(e,n,t,o){return Promise.resolve()},CoreCourseModulePrefetchHandlerBase.prototype.removeFiles=function(e,n){return this.filepoolProvider.removeFilesByComponent(this.sitesProvider.getCurrentSiteId(),this.component,e.id)},CoreCourseModulePrefetchHandlerBase}()},function(e,n,t){"use strict";function View_CoreChartComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,0,null,0,1,"ion-icon",[["item-start",""],["name","square"],["role","img"]],[[4,"color",null],[2,"hide",null]],null,null,null,null)),o._15(8,147456,[[4,4]],0,d.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(9,2,["\n        ","\n    "]))],function(e,n){e(n,8,0,"square")},function(e,n){e(n,7,0,n.context.$implicit.fillStyle,o._29(n,8)._hidden);e(n,9,0,n.context.$implicit.text)})}function View_CoreChartComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-list",[["inset",""]],null,null,null,null,null)),o._15(1,16384,null,0,c.a,[s.a,o.p,o.K,p.a,f.l,h.a],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreChartComponent_2)),o._15(4,802816,null,0,m.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,4,0,n.component.chart.legend.legendItems)},null)}function View_CoreChartComponent_0(e){return o._42(0,[o._37(402653184,1,{canvas:0}),(e()(),o._16(1,0,[[1,0],["canvas",1]],null,0,"canvas",[],[[1,"height",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreChartComponent_1)),o._15(4,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,4,0,n.component.chart)},function(e,n){e(n,1,0,n.component.height)})}t.d(n,"a",function(){return _}),n.b=View_CoreChartComponent_0;var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(49),c=t(87),p=t(17),f=t(45),h=t(35),m=t(8),_=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(450),t(597),t(179);var o=function(){return function CoreCourseFormatSingleActivityModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1063),t(179);var o=function(){return function CoreCourseFormatSocialModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function CoreCourseFormatSocialHandler(){var n=null!==e&&e.apply(this,arguments)||this;return n.name="CoreCourseFormatSocial",n.format="social",n}return Object(o.__extends)(CoreCourseFormatSocialHandler,e),CoreCourseFormatSocialHandler}(t(597).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1065),t(179);var o=function(){return function CoreCourseFormatTopicsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreCourseFormatTopicsHandler(){this.name="CoreCourseFormatTopics",this.format="topics"}return CoreCourseFormatTopicsHandler.prototype.isEnabled=function(){return!0},CoreCourseFormatTopicsHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1067),t(179);var o=function(){return function CoreCourseFormatWeeksModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(42),r=function(){function CoreCourseFormatWeeksHandler(e){this.timeUtils=e,this.name="CoreCourseFormatWeeks",this.format="weeks"}return CoreCourseFormatWeeksHandler.prototype.isEnabled=function(){return!0},CoreCourseFormatWeeksHandler.prototype.getCurrentSection=function(e,n){var t=this.timeUtils.timestamp();if(t<e.startdate||e.enddate&&t>e.enddate)return n[0];for(var o=0;o<n.length;o++){var r=n[o];if(!(void 0===r.section||r.section<1)){var i=this.getSectionDates(r,e.startdate);if(t>=i.start&&t<i.end)return r}}return n[0]},CoreCourseFormatWeeksHandler.prototype.getSectionDates=function(e,n){var t={start:(n+=7200)+o.a.SECONDS_WEEK*(e.section-1),end:0};return t.end=t.start+o.a.SECONDS_WEEK,t},CoreCourseFormatWeeksHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(397);var o=function(){function CoreCourseSyncCronHandler(e){this.courseSync=e,this.name="CoreCourseSyncCronHandler"}return CoreCourseSyncCronHandler.prototype.execute=function(e,n){return this.courseSync.syncAllCourses(e)},CoreCourseSyncCronHandler.prototype.getInterval=function(){return this.courseSync.syncInterval},CoreCourseSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreCourseLogCronHandler(e,n){this.courseProvider=e,this.sitesProvider=n,this.name="CoreCourseLogCronHandler"}return CoreCourseLogCronHandler.prototype.execute=function(e,n){var t=this;return this.sitesProvider.getSite(e).then(function(e){return t.courseProvider.logView(e.getSiteHomeId(),void 0,e.getId(),e.getInfo().sitename)})},CoreCourseLogCronHandler.prototype.isSync=function(){return!1},CoreCourseLogCronHandler.prototype.getInterval=function(){return 24e4},CoreCourseLogCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(589),r=function(){function CoreCourseTagAreaHandler(e){this.domUtils=e,this.name="CoreCourseTagAreaHandler",this.type="core/course"}return CoreCourseTagAreaHandler.prototype.isEnabled=function(){return!0},CoreCourseTagAreaHandler.prototype.parseContent=function(e){var n=[],t=this.domUtils.convertToElement(e);return Array.from(t.querySelectorAll("div.coursebox")).forEach(function(e){var t=parseInt(e.getAttribute("data-courseid"),10),o=e.querySelector(".coursename > a"),r=e.querySelector(".coursecat > a");t>0&&o&&n.push({courseId:t,courseName:o.innerHTML,categoryName:r?r.innerHTML:null})}),n},CoreCourseTagAreaHandler.prototype.getComponent=function(e){return o.a},CoreCourseTagAreaHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(225),r=function(){function CoreCourseModulesTagAreaHandler(e){this.tagHelper=e,this.name="CoreCourseModulesTagAreaHandler",this.type="core/course_modules"}return CoreCourseModulesTagAreaHandler.prototype.isEnabled=function(){return!0},CoreCourseModulesTagAreaHandler.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},CoreCourseModulesTagAreaHandler.prototype.getComponent=function(e){return o.a},CoreCourseModulesTagAreaHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(56)),i=t(53),l=function(e){function CoreCoursesCourseLinkHandler(n,t,o,r,i,l,s,a){var u=e.call(this)||this;return u.sitesProvider=n,u.coursesProvider=t,u.domUtils=o,u.translate=r,u.courseProvider=i,u.textUtils=l,u.courseHelper=s,u.name="CoreCoursesCourseLinkHandler",u.pattern=/((\/enrol\/index\.php)|(\/course\/enrol\.php)|(\/course\/view\.php)).*([\?\&]id=\d+)/,u.waitStart=0,u.logger=a.getInstance("CoreCoursesCourseLinkHandler"),u}return Object(o.__extends)(CoreCoursesCourseLinkHandler,e),CoreCoursesCourseLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;o=parseInt(t.id,10);var i=t.sectionid?parseInt(t.sectionid,10):null,l={sectionId:i||null},s=void 0!==t.section?parseInt(t.section,10):NaN;if(!i&&!s){var a=n.match(/#section-(\d+)/);a&&a[1]&&(s=parseInt(a[1],10))}return isNaN(s)||(l.sectionNumber=s),[{action:function(e,t){if((e=e||r.sitesProvider.getCurrentSiteId())==r.sitesProvider.getCurrentSiteId()){if(r.courseProvider.currentViewIsCourse(t,o))return void r.courseProvider.selectCourseTab("",l);r.actionEnrol(o,n,l,t).catch(function(){})}else r.courseHelper.getAndOpenCourse(void 0,o,l,e)}}]},CoreCoursesCourseLinkHandler.prototype.isEnabled=function(e,n,t,o){return!!(o=parseInt(t.id,10))&&this.sitesProvider.getSiteHomeId(e).then(function(e){return o!=e})},CoreCoursesCourseLinkHandler.prototype.actionEnrol=function(e,n,t,o){var r,i=this,l=this.domUtils.showModalLoading(),s=!!n.match(/(\/enrol\/index\.php)|(\/course\/enrol\.php)/);return this.coursesProvider.getUserCourse(e).then(function(e){r=e}).catch(function(){return i.canSelfEnrol(e).then(function(){l.dismiss();return(s?Promise.resolve():i.domUtils.showConfirm(i.translate.instant("core.courses.confirmselfenrol"))).then(function(){return i.selfEnrol(e).then(function(e){r=e}).catch(function(e){return e&&i.domUtils.showErrorModal(e),Promise.reject(null)})},function(){return i.courseProvider.getSections(e,!1,!0)})},function(t){return i.courseProvider.getSections(e,!1,!0).catch(function(){l.dismiss(),t&&(t=i.textUtils.getErrorMessageFromError(t)||t),t||(t=i.translate.instant("core.courses.notenroled"));var e=i.textUtils.buildSeveralParagraphsMessage([t,i.translate.instant("core.confirmopeninbrowser")]);return i.domUtils.showConfirm(e).then(function(){i.sitesProvider.getCurrentSite().openInBrowserWithAutoLogin(n)}).catch(function(){}),Promise.reject(null)})})}).then(function(){return r||i.courseHelper.getCourse(e).then(function(e){return e.course}).catch(function(){return{id:e}})}).then(function(e){l.dismiss(),void 0===o&&i.logger.warn("navCtrl was not passed to actionEnrol"),i.courseHelper.openCourse(o,e,t)})},CoreCoursesCourseLinkHandler.prototype.canSelfEnrol=function(e){return this.coursesProvider.getCourseEnrolmentMethods(e).then(function(e){var n=!1,t=0;if(e.forEach(function(e){"self"==e.type&&e.status&&(n=!0,t++)}),!n||1!=t)return Promise.reject(null)})},CoreCoursesCourseLinkHandler.prototype.selfEnrol=function(e,n){var t=this,o=this.domUtils.showModalLoading();return this.coursesProvider.selfEnrol(e,n).then(function(){return t.coursesProvider.invalidateUserCourses().catch(function(){}).then(function(){return t.waitForEnrolled(e,!0).finally(function(){o.dismiss()})})}).catch(function(r){if(o.dismiss(),r&&r.code===i.a.ENROL_INVALID_KEY){var l=t.translate.instant("core.courses.selfenrolment"),s=t.translate.instant("core.courses.password");return void 0!==n&&t.domUtils.showErrorModal(r),t.domUtils.showPrompt(" ",l,s).then(function(n){return t.selfEnrol(e,n)})}return Promise.reject(r)})},CoreCoursesCourseLinkHandler.prototype.waitForEnrolled=function(e,n){var t=this;return n&&(this.waitStart=Date.now()),this.coursesProvider.invalidateUserCourses().catch(function(){}).then(function(){return t.coursesProvider.getUserCourse(e)}).catch(function(){if(!(Date.now()-t.waitStart>6e4))return new Promise(function(n,o){setTimeout(function(){t.waitForEnrolled(e).then(n)},5e3)})})},CoreCoursesCourseLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(53),function(e){function CoreCoursesIndexLinkHandler(n,t){var o=e.call(this)||this;return o.coursesProvider=n,o.linkHelper=t,o.name="CoreCoursesIndexLinkHandler",o.featureName="CoreMainMenuDelegate_CoreCourses",o.pattern=/\/course\/?(index\.php.*)?$/,o}return Object(o.__extends)(CoreCoursesIndexLinkHandler,e),CoreCoursesIndexLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o="CoreCoursesMyCoursesPage",i={};r.coursesProvider.isGetCoursesByFieldAvailable()&&(t.categoryid?(o="CoreCoursesCategoriesPage",i.categoryId=parseInt(t.categoryid,10)):o="CoreCoursesAvailableCoursesPage"),r.linkHelper.goInSite(n,o,i,e)}}]},CoreCoursesIndexLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(599),function(e){function CoreCoursesDashboardLinkHandler(n,t){var o=e.call(this)||this;return o.loginHelper=n,o.mainMenuHandler=t,o.name="CoreCoursesMyOverviewLinkHandler",o.pattern=/\/my\/?$/,o}return Object(o.__extends)(CoreCoursesDashboardLinkHandler,e),CoreCoursesDashboardLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){r.loginHelper.redirect("CoreCoursesDashboardPage",void 0,e)}}]},CoreCoursesDashboardLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.mainMenuHandler.isEnabledForSite(e)},CoreCoursesDashboardLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreCoursesEnrolPushClickHandler(e,n,t,o){this.utils=e,this.domUtils=n,this.courseHelper=t,this.loginHelper=o,this.name="CoreCoursesEnrolPushClickHandler",this.priority=200}return CoreCoursesEnrolPushClickHandler.prototype.handles=function(e){return this.utils.isTrueOrOne(e.notif)&&0===e.moodlecomponent.indexOf("enrol_")&&"expiry_notification"==e.name},CoreCoursesEnrolPushClickHandler.prototype.handleClick=function(e){var n=this,t=Number(e.courseid),o=this.domUtils.showModalLoading();return this.courseHelper.getCourse(t,e.site).then(function(t){var o,r={course:t.course};return e.contexturl&&-1!=e.contexturl.indexOf("user/index.php")?(o="CoreCourseSectionPage",r.selectedTab="CoreUserParticipants"):o=t.enrolled?"CoreCourseSectionPage":"CoreCoursesCoursePreviewPage",n.loginHelper.redirect(o,r,e.site)}).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error getting course.")}).finally(function(){o.dismiss()})},CoreCoursesEnrolPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreCoursesRequestPushClickHandler(e,n,t,o,r,i,l){this.utils=e,this.domUtils=n,this.sitesProvider=t,this.courseHelper=o,this.loginHelper=r,this.textUtils=i,this.coursesProvider=l,this.name="CoreCoursesRequestPushClickHandler",this.priority=200,this.SUPPORTED_NAMES=["courserequested","courserequestapproved","courserequestrejected"]}return CoreCoursesRequestPushClickHandler.prototype.handles=function(e){return this.utils.isTrueOrOne(e.notif)&&"moodle"==e.moodlecomponent&&("courserequested"==e.name||"courserequestapproved"==e.name)},CoreCoursesRequestPushClickHandler.prototype.handleClick=function(e){var n=this,t=Number(e.courseid);if("courserequested"==e.name)return this.sitesProvider.getSite(e.site).then(function(e){var t=n.textUtils.concatenatePaths(e.getURL(),"course/pending.php");return e.openInBrowserWithAutoLogin(t)});var o=this.domUtils.showModalLoading();return this.coursesProvider.invalidateUserCourses(e.site).catch(function(){}).then(function(){return n.courseHelper.getCourse(t,e.site)}).then(function(t){var o;return o=t.enrolled?"CoreCourseSectionPage":"CoreCoursesCoursePreviewPage",n.loginHelper.redirect(o,{course:t.course},e.site)}).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error getting course.")}).finally(function(){o.dismiss()})},CoreCoursesRequestPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(150);var o=function(){function CoreFileUploaderAlbumHandler(e,n,t){this.appProvider=e,this.utils=n,this.uploaderHelper=t,this.name="CoreFileUploaderAlbum",this.priority=2e3}return CoreFileUploaderAlbumHandler.prototype.isEnabled=function(){return this.appProvider.isMobile()},CoreFileUploaderAlbumHandler.prototype.getSupportedMimetypes=function(e){return this.utils.filterByRegexp(e,/^(image|video)\//)},CoreFileUploaderAlbumHandler.prototype.getData=function(){var e=this;return{title:"core.fileuploader.photoalbums",class:"core-fileuploader-album-handler",icon:"images",action:function(n,t,o,r){return e.uploaderHelper.uploadImage(!0,n,t,r).then(function(e){return{treated:!0,result:e}})}}},CoreFileUploaderAlbumHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(150);var o=function(){function CoreFileUploaderAudioHandler(e,n,t,o){this.appProvider=e,this.utils=n,this.platform=t,this.uploaderHelper=o,this.name="CoreFileUploaderAudio",this.priority=1600}return CoreFileUploaderAudioHandler.prototype.isEnabled=function(){return this.appProvider.isMobile()||this.appProvider.canGetUserMedia()&&this.appProvider.canRecordMedia()},CoreFileUploaderAudioHandler.prototype.getSupportedMimetypes=function(e){if(this.platform.is("ios"))return this.utils.filterByRegexp(e,/^audio\/wav$/);if(this.platform.is("android"))return this.utils.filterByRegexp(e,/^audio\//);var n=window.MediaRecorder;return n?e.filter(function(e){var t=e.match(/^audio\//);return t&&t.length&&n.isTypeSupported(e)}):[]},CoreFileUploaderAudioHandler.prototype.getData=function(){var e=this;return{title:"core.fileuploader.audio",class:"core-fileuploader-audio-handler",icon:"microphone",action:function(n,t,o,r){return e.uploaderHelper.uploadAudioOrVideo(!0,n,t,r).then(function(e){return{treated:!0,result:e}})}}},CoreFileUploaderAudioHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(150);var o=function(){function CoreFileUploaderCameraHandler(e,n,t){this.appProvider=e,this.utils=n,this.uploaderHelper=t,this.name="CoreFileUploaderCamera",this.priority=1800}return CoreFileUploaderCameraHandler.prototype.isEnabled=function(){return this.appProvider.isMobile()||this.appProvider.canGetUserMedia()},CoreFileUploaderCameraHandler.prototype.getSupportedMimetypes=function(e){return this.utils.filterByRegexp(e,/^image\/(jpeg|png)$/)},CoreFileUploaderCameraHandler.prototype.getData=function(){var e=this;return{title:"core.fileuploader.camera",class:"core-fileuploader-camera-handler",icon:"camera",action:function(n,t,o,r){return e.uploaderHelper.uploadImage(!1,n,t,r).then(function(e){return{treated:!0,result:e}})}}},CoreFileUploaderCameraHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(150),t(73);var o=function(){function CoreFileUploaderFileHandler(e,n,t,o,r,i){this.appProvider=e,this.platform=n,this.timeUtils=t,this.uploaderHelper=o,this.uploaderProvider=r,this.domUtils=i,this.name="CoreFileUploaderFile",this.priority=1200}return CoreFileUploaderFileHandler.prototype.isEnabled=function(){return this.platform.is("android")||!this.appProvider.isMobile()||this.platform.is("ios")&&this.platform.version().major>=9},CoreFileUploaderFileHandler.prototype.getSupportedMimetypes=function(e){return e},CoreFileUploaderFileHandler.prototype.getData=function(){var e=this,n=this.platform.is("ios");return{title:n?"core.fileuploader.more":"core.fileuploader.file",class:"core-fileuploader-file-handler",icon:n?"more":"folder",afterRender:function(t,o,r,i){var l=document.querySelector(".core-fileuploader-file-handler");if(l){var s=document.createElement("input");s.setAttribute("type","file"),s.classList.add("core-fileuploader-file-handler-input"),!i||!i.length||e.platform.is("android")&&1!=i.length||s.setAttribute("accept",i.join(", ")),s.addEventListener("change",function(l){var a,u=s.files[0];if(s.value="",u){var d=e.uploaderProvider.isInvalidMimetype(i,u.name,u.type);if(d)e.domUtils.showErrorModal(d);else{if(a=u.name,n){var c=a.match(/image\.(jpe?g|png)/);c&&(a="image_"+e.timeUtils.readableTimestamp()+"."+c[1])}e.uploaderHelper.uploadFileObject(u,t,o,r,a).then(function(n){e.uploaderHelper.fileUploaded(n)}).catch(function(n){n&&e.domUtils.showErrorModal(n)})}}}),e.platform.is("ios")?(l.parentElement.appendChild(s),s.addEventListener("mousedown",function(){l.classList.add("activated")}),s.addEventListener("mouseup",function(){e.platform.timeout(function(){l.classList.remove("activated")},80)})):l.appendChild(s)}}}},CoreFileUploaderFileHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(150);var o=function(){function CoreFileUploaderVideoHandler(e,n,t,o){this.appProvider=e,this.utils=n,this.platform=t,this.uploaderHelper=o,this.name="CoreFileUploaderVideo",this.priority=1400}return CoreFileUploaderVideoHandler.prototype.isEnabled=function(){return this.appProvider.isMobile()||this.appProvider.canGetUserMedia()&&this.appProvider.canRecordMedia()},CoreFileUploaderVideoHandler.prototype.getSupportedMimetypes=function(e){if(this.platform.is("ios"))return this.utils.filterByRegexp(e,/^video\/quicktime$/);if(this.platform.is("android"))return this.utils.filterByRegexp(e,/^video\//);var n=window.MediaRecorder;return n?e.filter(function(e){var t=e.match(/^video\//);return t&&t.length&&n.isTypeSupported(e)}):[]},CoreFileUploaderVideoHandler.prototype.getData=function(){var e=this;return{title:"core.fileuploader.video",class:"core-fileuploader-video-handler",icon:"videocam",action:function(n,t,o,r){return e.uploaderHelper.uploadAudioOrVideo(!1,n,t,r).then(function(e){return{treated:!0,result:e}})}}},CoreFileUploaderVideoHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(169);var o=function(){function CoreGradesMainMenuHandler(e){this.gradesProvider=e,this.name="CoreGrades",this.priority=600}return CoreGradesMainMenuHandler.prototype.isEnabled=function(){return this.gradesProvider.isCourseGradesEnabled()},CoreGradesMainMenuHandler.prototype.getDisplayData=function(){return{icon:"stats",title:"core.grades.grades",page:"CoreGradesCoursesPage",class:"core-grades-coursesgrades-handler"}},CoreGradesMainMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(14),r=(t(169),t(501)),i=function(){function CoreGradesCourseOptionHandler(e,n){this.gradesProvider=e,this.coursesProvider=n,this.name="CoreGrades",this.priority=400}return CoreGradesCourseOptionHandler.prototype.invalidateEnabledForCourse=function(e,n,t){return n&&void 0!==n.grades?Promise.resolve():this.coursesProvider.invalidateUserCourses()},CoreGradesCourseOptionHandler.prototype.isEnabled=function(){return!0},CoreGradesCourseOptionHandler.prototype.isEnabledForCourse=function(e,n,t,r){return(!n||n.type!=o.a.ACCESS_GUEST)&&(t&&void 0!==t.grades?t.grades:this.gradesProvider.isPluginEnabledForCourse(e))},CoreGradesCourseOptionHandler.prototype.getDisplayData=function(e,n){return{title:"core.grades.grades",class:"core-grades-course-handler",component:r.a}},CoreGradesCourseOptionHandler.prototype.prefetch=function(e){return this.gradesProvider.getCourseGradesTable(e.id,void 0,void 0,!0)},CoreGradesCourseOptionHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(169),t(185),function(e){function CoreGradesUserLinkHandler(n,t){var o=e.call(this)||this;return o.gradesProvider=n,o.gradesHelper=t,o.name="CoreGradesUserLinkHandler",o.pattern=/\/grade\/report(\/user)?\/index.php/,o}return Object(o.__extends)(CoreGradesUserLinkHandler,e),CoreGradesUserLinkHandler.prototype.getActions=function(e,n,t,o,r){var i=this;return o=o||t.id,r=r||{},[{action:function(e,n){var l=t.userid&&parseInt(t.userid,10),s=r.cmid&&parseInt(r.cmid,10);i.gradesHelper.goToGrades(o,l,s,n,e)}}]},CoreGradesUserLinkHandler.prototype.isEnabled=function(e,n,t,o){return!(!o&&!t.id)&&this.gradesProvider.isPluginEnabledForCourse(o||t.id,e)},CoreGradesUserLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(169),function(e){function CoreGradesOverviewLinkHandler(n,t){var o=e.call(this)||this;return o.linkHelper=n,o.gradesProvider=t,o.name="CoreGradesOverviewLinkHandler",o.pattern=/\/grade\/report\/overview\/index.php/,o}return Object(o.__extends)(CoreGradesOverviewLinkHandler,e),CoreGradesOverviewLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){r.linkHelper.goInSite(n,"CoreGradesCoursesPage",void 0,e)}}]},CoreGradesOverviewLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.gradesProvider.isCourseGradesEnabled(e)},CoreGradesOverviewLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(105),r=(t(169),function(){function CoreGradesUserHandler(e,n,t){this.linkHelper=e,this.sitesProvider=n,this.gradesProvider=t,this.name="CoreGrades:viewGrades",this.priority=400,this.type=o.a.TYPE_NEW_PAGE,this.viewGradesEnabledCache={}}return CoreGradesUserHandler.prototype.clearViewGradesCache=function(e,n){e&&n?delete this.viewGradesEnabledCache[this.getCacheKey(e,n)]:this.viewGradesEnabledCache={}},CoreGradesUserHandler.prototype.getCacheKey=function(e,n){return e+"#"+n},CoreGradesUserHandler.prototype.isEnabled=function(){return!0},CoreGradesUserHandler.prototype.isEnabledForUser=function(e,n,t,o){var r=this,i=this.getCacheKey(n,e.id),l=this.viewGradesEnabledCache[i];return void 0!==l?l:this.gradesProvider.isPluginEnabledForCourse(n).then(function(){return r.gradesProvider.getCourseGradesTable(n,e.id).then(function(){return r.viewGradesEnabledCache[i]=!0,!0}).catch(function(){return r.viewGradesEnabledCache[i]=!1,!1})})},CoreGradesUserHandler.prototype.getDisplayData=function(e,n){var t=this;return{icon:"stats",title:"core.grades.grades",class:"core-grades-user-handler",action:function(e,n,o,r){e.preventDefault(),e.stopPropagation();t.linkHelper.goInSite(n,"CoreGradesCoursePage",{courseId:r,userId:o.id})}}},CoreGradesUserHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(604);var o=function(){return function CoreH5PComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(360),t(4);var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},r=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},i=function(){function CoreH5PPluginFileHandler(e,n,t,o,r,i,l){this.urlUtils=e,this.mimeUtils=n,this.textUtils=t,this.utils=o,this.fileProvider=r,this.h5pProvider=i,this.translate=l,this.name="CoreH5PPluginFileHandler"}return CoreH5PPluginFileHandler.prototype.fileDeleted=function(e,n,t){return this.h5pProvider.deleteContentByUrl(e,t)},CoreH5PPluginFileHandler.prototype.getDownloadableFile=function(e,n){return this.h5pProvider.getTrustedH5PFile(e.fileurl,{},!1,n)},CoreH5PPluginFileHandler.prototype.getDownloadableFilesFromHTML=function(e){for(var n=Array.from(e.querySelectorAll("iframe.h5p-iframe")),t=[],o=0;o<n.length;o++){var r=this.urlUtils.extractUrlParams(n[o].src);r.url&&t.push(r.url)}return t},CoreH5PPluginFileHandler.prototype.getFileSize=function(e,n){var t=this;return this.h5pProvider.getTrustedH5PFile(e.fileurl,{},!1,n).then(function(e){return e.filesize}).catch(function(e){return t.utils.isWebServiceError(e)?0:Promise.reject(e)})},CoreH5PPluginFileHandler.prototype.isEnabled=function(){return this.h5pProvider.canGetTrustedH5PFileInSite()},CoreH5PPluginFileHandler.prototype.isFileDownloadable=function(e,n){return o(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,this.h5pProvider.isOfflineDisabled(n)];case 1:return e.sent()?[2,{downloadable:!1,reason:this.translate.instant("core.h5p.offlinedisabled")}]:[2,{downloadable:!0}]}})})},CoreH5PPluginFileHandler.prototype.shouldHandleFile=function(e){return"h5p"==this.mimeUtils.guessExtensionFromUrl(e.fileurl)},CoreH5PPluginFileHandler.prototype.treatDownloadedFile=function(e,n,t){return this.h5pProvider.extractH5PFile(e,n,t)},CoreH5PPluginFileHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreLoginCronHandler(e){this.sitesProvider=e,this.name="CoreLoginCronHandler"}return CoreLoginCronHandler.prototype.execute=function(e){var n=this;return(e=e||this.sitesProvider.getCurrentSiteId())?this.sitesProvider.getSite(e).then(function(e){return e.getPublicConfig().catch(function(){return{}}).then(function(e){n.sitesProvider.checkRequiredMinimumVersion(e).catch(function(){})})}):Promise.resolve()},CoreLoginCronHandler.prototype.isSync=function(){return!0},CoreLoginCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreQuestionBaseHandler(){this.name="CoreQuestionBase",this.type="base"}return CoreQuestionBaseHandler.prototype.isEnabled=function(){return!0},CoreQuestionBaseHandler.prototype.getComponent=function(e,n){},CoreQuestionBaseHandler.prototype.getBehaviour=function(e,n){return n},CoreQuestionBaseHandler.prototype.getPreventSubmitMessage=function(e){return""},CoreQuestionBaseHandler.prototype.isCompleteResponse=function(e,n){return-1},CoreQuestionBaseHandler.prototype.isGradableResponse=function(e,n){return-1},CoreQuestionBaseHandler.prototype.isSameResponse=function(e,n,t){return!1},CoreQuestionBaseHandler.prototype.prepareAnswers=function(e,n,t,o){},CoreQuestionBaseHandler.prototype.validateSequenceCheck=function(e,n){return e.sequencecheck==n},CoreQuestionBaseHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreQuestionBehaviourBaseHandler(e){this.questionProvider=e,this.name="CoreQuestionBehaviourBase",this.type="base"}return CoreQuestionBehaviourBaseHandler.prototype.determineNewState=function(e,n,t,o){return this.questionProvider.getState(t.state)},CoreQuestionBehaviourBaseHandler.prototype.handleQuestion=function(e,n){},CoreQuestionBehaviourBaseHandler.prototype.isEnabled=function(){return!0},CoreQuestionBehaviourBaseHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(502);var o=function(){function CoreSharedFilesUploadHandler(e,n){this.sharedFilesHelper=e,this.platform=n,this.name="CoreSharedFilesUpload",this.priority=1300}return CoreSharedFilesUploadHandler.prototype.isEnabled=function(){return this.platform.is("ios")},CoreSharedFilesUploadHandler.prototype.getSupportedMimetypes=function(e){return e},CoreSharedFilesUploadHandler.prototype.getData=function(){var e=this;return{title:"core.sharedfiles.sharedfiles",class:"core-sharedfiles-fileuploader-handler",icon:"folder",action:function(n,t,o,r){return e.sharedFilesHelper.pickSharedFile(r)}}},CoreSharedFilesUploadHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(232),function(e){function CoreSiteHomeIndexLinkHandler(n,t,o){var r=e.call(this)||this;return r.sitesProvider=n,r.siteHomeProvider=t,r.linkHelper=o,r.name="CoreSiteHomeIndexLinkHandler",r.featureName="CoreMainMenuDelegate_CoreSiteHome",r.pattern=/\/course\/view\.php.*([\?\&]id=\d+)/,r}return Object(o.__extends)(CoreSiteHomeIndexLinkHandler,e),CoreSiteHomeIndexLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){r.linkHelper.goInSite(n,"CoreSiteHomeIndexPage",void 0,e)}}]},CoreSiteHomeIndexLinkHandler.prototype.isEnabled=function(e,n,t,o){var r=this;return!!(o=parseInt(t.id,10))&&this.sitesProvider.getSite(e).then(function(n){return o==n.getSiteHomeId()&&r.siteHomeProvider.isAvailable(e).then(function(){return!0}).catch(function(){return!1})})},CoreSiteHomeIndexLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(105),r=function(){function CoreUserProfileMailHandler(e,n){this.sitesProvider=e,this.utils=n,this.name="CoreUserProfileMail",this.priority=700,this.type=o.a.TYPE_COMMUNICATION}return CoreUserProfileMailHandler.prototype.isEnabled=function(){return!0},CoreUserProfileMailHandler.prototype.isEnabledForUser=function(e,n,t,o){return e.id!=this.sitesProvider.getCurrentSite().getUserId()&&!!e.email},CoreUserProfileMailHandler.prototype.getDisplayData=function(e,n){var t=this;return{icon:"mail",title:"core.user.sendemail",class:"core-user-profile-mail",action:function(e,n,o,r){e.preventDefault(),e.stopPropagation(),t.utils.openInBrowser("mailto:"+o.email)}}},CoreUserProfileMailHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=function(e){function CoreUserProfileLinkHandler(n){var t=e.call(this)||this;return t.linkHelper=n,t.name="CoreUserProfileLinkHandler",t.pattern=/((\/user\/view\.php)|(\/user\/profile\.php)).*([\?\&]id=\d+)/,t}return Object(o.__extends)(CoreUserProfileLinkHandler,e),CoreUserProfileLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o={courseId:t.course,userId:parseInt(t.id,10)};r.linkHelper.goInSite(n,"CoreUserProfilePage",o,e)}}]},CoreUserProfileLinkHandler.prototype.isEnabled=function(e,n,t,o){return-1==n.indexOf("/grade/report/")},CoreUserProfileLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(14),r=(t(46),t(527)),i=function(){function CoreUserParticipantsCourseOptionHandler(e){this.userProvider=e,this.name="CoreUserParticipants",this.priority=600}return CoreUserParticipantsCourseOptionHandler.prototype.invalidateEnabledForCourse=function(e,n,t){return n&&void 0!==n.participants?Promise.resolve():this.userProvider.invalidateParticipantsList(e)},CoreUserParticipantsCourseOptionHandler.prototype.isEnabled=function(){return!0},CoreUserParticipantsCourseOptionHandler.prototype.isEnabledForCourse=function(e,n,t,r){return(!n||n.type!=o.a.ACCESS_GUEST)&&(t&&void 0!==t.participants?t.participants:this.userProvider.isPluginEnabledForCourse(e))},CoreUserParticipantsCourseOptionHandler.prototype.getDisplayData=function(e,n){return{title:"core.user.participants",class:"core-user-participants-handler",component:r.a}},CoreUserParticipantsCourseOptionHandler.prototype.prefetch=function(e){return this.getParticipantsPage(e.id,0)},CoreUserParticipantsCourseOptionHandler.prototype.getParticipantsPage=function(e,n){var t=this;return this.userProvider.getParticipants(e,n,void 0,void 0,!0).then(function(o){if(o.canLoadMore)return t.getParticipantsPage(e,n+o.participants.length)})},CoreUserParticipantsCourseOptionHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(46),function(e){function CoreUserParticipantsLinkHandler(n,t,o,r,i){var l=e.call(this)||this;return l.userProvider=n,l.courseHelper=t,l.domUtils=o,l.linkHelper=r,l.courseProvider=i,l.name="CoreUserParticipants",l.featureName="CoreCourseOptionsDelegate_CoreUserParticipants",l.pattern=/\/user\/index\.php/,l}return Object(o.__extends)(CoreUserParticipantsLinkHandler,e),CoreUserParticipantsLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return o=parseInt(t.id,10)||o,[{action:function(e,n){if(r.courseProvider.currentViewIsCourse(n,o))r.courseProvider.selectCourseTab("CoreUserParticipants");else{var t=r.domUtils.showModalLoading();r.courseHelper.getCourse(o,e).then(function(t){return r.linkHelper.goInSite(n,"CoreCourseSectionPage",{course:t.course,selectedTab:"CoreUserParticipants"},e).catch(function(){})}).catch(function(){return r.linkHelper.goInSite(n,"CoreUserParticipantsPage",{courseId:o},e)}).finally(function(){t.dismiss()})}}}]},CoreUserParticipantsLinkHandler.prototype.isEnabled=function(e,n,t,o){return!(!(o=parseInt(t.id,10)||o)||-1!=n.indexOf("/grade/report/"))&&this.userProvider.isPluginEnabledForCourse(o,e)},CoreUserParticipantsLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(615);var o=function(){function CoreUserSyncCronHandler(e){this.userSync=e,this.name="CoreUserSyncCronHandler"}return CoreUserSyncCronHandler.prototype.execute=function(e,n){return this.userSync.syncPreferences(e)},CoreUserSyncCronHandler.prototype.getInterval=function(){return 3e5},CoreUserSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(614),r=function(){function CoreUserTagAreaHandler(e){this.domUtils=e,this.name="CoreUserTagAreaHandler",this.type="core/user"}return CoreUserTagAreaHandler.prototype.isEnabled=function(){return!0},CoreUserTagAreaHandler.prototype.parseContent=function(e){var n=[],t=this.domUtils.convertToElement(e);return Array.from(t.querySelectorAll("div.user-box")).forEach(function(e){var t={},o=e.querySelector("a:first-child");if(o){var r=(o.getAttribute("href")||"").match(/.*\/user\/(?:profile|view)\.php\?id=(\d+)/);if(r){t.id=parseInt(r[1],10);var i=o.querySelector("img.userpicture");t.profileimageurl=i?i.getAttribute("src"):"",t.fullname=e.innerText,n.push(t)}}}),n},CoreUserTagAreaHandler.prototype.getComponent=function(e){return o.a},CoreUserTagAreaHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(137);var o=function(){function CorePushNotificationsRegisterCronHandler(e){this.pushNotificationsProvider=e,this.name="CorePushNotificationsRegisterCronHandler"}return CorePushNotificationsRegisterCronHandler.prototype.canManualSync=function(){return!0},CorePushNotificationsRegisterCronHandler.prototype.execute=function(e){return e&&this.pushNotificationsProvider.canRegisterOnMoodle()?this.pushNotificationsProvider.registerDeviceOnMoodle(e,!0):Promise.resolve()},CorePushNotificationsRegisterCronHandler.prototype.getInterval=function(){return 864e5},CorePushNotificationsRegisterCronHandler.prototype.isSync=function(){return!1},CorePushNotificationsRegisterCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(137);var o=function(){function CorePushNotificationsUnregisterCronHandler(e){this.pushNotificationsProvider=e,this.name="CorePushNotificationsUnregisterCronHandler"}return CorePushNotificationsUnregisterCronHandler.prototype.execute=function(e){return this.pushNotificationsProvider.retryUnregisters(e)},CorePushNotificationsUnregisterCronHandler.prototype.getInterval=function(){return 3e5},CorePushNotificationsUnregisterCronHandler}()},,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(105),r=(t(284),function(){function AddonBadgesUserHandler(e){this.badgesProvider=e,this.name="AddonBadges",this.priority=50,this.type=o.a.TYPE_NEW_PAGE}return AddonBadgesUserHandler.prototype.isEnabled=function(){return this.badgesProvider.isPluginEnabled()},AddonBadgesUserHandler.prototype.isEnabledForUser=function(e,n,t,o){return!t||void 0===t.badges||t.badges},AddonBadgesUserHandler.prototype.getDisplayData=function(e,n){return{icon:"trophy",title:"addon.badges.badges",class:"",action:function(e,n,t,o){e.preventDefault(),e.stopPropagation(),n.push("AddonBadgesUserBadgesPage",{courseId:o,userId:t.id})}}},AddonBadgesUserHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(284),function(e){function AddonBadgesMyBadgesLinkHandler(n,t){var o=e.call(this)||this;return o.badgesProvider=n,o.linkHelper=t,o.name="AddonBadgesMyBadgesLinkHandler",o.featureName="CoreUserDelegate_AddonBadges",o.pattern=/\/badges\/mybadges\.php/,o}return Object(o.__extends)(AddonBadgesMyBadgesLinkHandler,e),AddonBadgesMyBadgesLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){r.linkHelper.goInSite(n,"AddonBadgesUserBadgesPage",{},e)}}]},AddonBadgesMyBadgesLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.badgesProvider.isPluginEnabled(e)},AddonBadgesMyBadgesLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(284),function(e){function AddonBadgesBadgeLinkHandler(n,t){var o=e.call(this)||this;return o.badgesProvider=n,o.linkHelper=t,o.name="AddonBadgesBadgeLinkHandler",o.pattern=/\/badges\/badge\.php.*([\?\&]hash=)/,o}return Object(o.__extends)(AddonBadgesBadgeLinkHandler,e),AddonBadgesBadgeLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){r.linkHelper.goInSite(n,"AddonBadgesIssuedBadgePage",{courseId:0,badgeHash:t.hash},e)}}]},AddonBadgesBadgeLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.badgesProvider.isPluginEnabled(e)},AddonBadgesBadgeLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(284);var o=function(){function AddonBadgesPushClickHandler(e,n,t){this.utils=e,this.badgesProvider=n,this.loginHelper=t,this.name="AddonBadgesPushClickHandler",this.priority=200,this.featureName="CoreUserDelegate_AddonBadges"}return AddonBadgesPushClickHandler.prototype.handles=function(e){var n=e.customdata||{};return!(!this.utils.isTrueOrOne(e.notif)||"moodle"!=e.moodlecomponent||!("badgerecipientnotice"==e.name||"badgecreatornotice"==e.name&&n.hash))&&this.badgesProvider.isPluginEnabled(e.site)},AddonBadgesPushClickHandler.prototype.handleClick=function(e){var n=this,t=e.customdata||{};return t.hash?this.loginHelper.redirect("AddonBadgesIssuedBadgePage",{courseId:0,badgeHash:t.hash},e.site):this.badgesProvider.invalidateUserBadges(0,Number(e.usertoid),e.site).catch(function(){}).then(function(){return n.loginHelper.redirect("AddonBadgesUserBadgesPage",{},e.site)})},AddonBadgesPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(187);var o=function(){function AddonCalendarMainMenuHandler(e){this.calendarProvider=e,this.name="AddonCalendar",this.priority=900}return AddonCalendarMainMenuHandler.prototype.isEnabled=function(){return!this.calendarProvider.isCalendarDisabledInSite()},AddonCalendarMainMenuHandler.prototype.getDisplayData=function(){return{icon:"calendar",title:"addon.calendar.calendar",page:this.calendarProvider.canViewMonthInSite()?"AddonCalendarIndexPage":"AddonCalendarListPage",class:"addon-calendar-handler"}},AddonCalendarMainMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(478);var o=function(){function AddonCalendarSyncCronHandler(e){this.calendarSync=e,this.name="AddonCalendarSyncCronHandler"}return AddonCalendarSyncCronHandler.prototype.execute=function(e,n){return this.calendarSync.syncAllEvents(e,n)},AddonCalendarSyncCronHandler.prototype.getInterval=function(){return this.calendarSync.syncInterval},AddonCalendarSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(187),function(e){function AddonCalendarViewLinkHandler(n,t){var o=e.call(this)||this;return o.linkHelper=n,o.calendarProvider=t,o.name="AddonCalendarViewLinkHandler",o.pattern=/\/calendar\/view\.php/,o.SUPPORTED_VIEWS=["month","mini","minithree","day","upcoming","upcoming_mini"],o}return Object(o.__extends)(AddonCalendarViewLinkHandler,e),AddonCalendarViewLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){if(t.view&&"month"!=t.view&&"mini"!=t.view&&"minithree"!=t.view){if("day"==t.view){o={courseId:t.course},i=t.time?1e3*t.time:Date.now(),l=new Date(i);o.year=l.getFullYear(),o.month=l.getMonth()+1,o.day=l.getDate(),r.linkHelper.goInSite(n,"AddonCalendarDayPage",o,e)}else if("upcoming"==t.view||"upcoming_mini"==t.view){r.linkHelper.goInSite(n,"AddonCalendarIndexPage",o={courseId:t.course,upcoming:!0},e)}}else{var o={courseId:t.course},i=t.time?1e3*t.time:Date.now(),l=new Date(i);o.year=l.getFullYear(),o.month=l.getMonth()+1,r.linkHelper.goInSite(n,"AddonCalendarIndexPage",o,e)}}}]},AddonCalendarViewLinkHandler.prototype.isEnabled=function(e,n,t,o){var r=this;return(!t.view||-1!=this.SUPPORTED_VIEWS.indexOf(t.view))&&this.calendarProvider.isDisabled(e).then(function(n){return!n&&r.calendarProvider.canViewMonth(e)})},AddonCalendarViewLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(14),r=t(525),i=(t(166),function(){function AddonCompetencyCourseOptionHandler(e,n){this.competencyProvider=e,this.filterHelper=n,this.name="AddonCompetency",this.priority=300}return AddonCompetencyCourseOptionHandler.prototype.isEnabled=function(){return!0},AddonCompetencyCourseOptionHandler.prototype.isEnabledForCourse=function(e,n,t,r){return(!n||n.type!=o.a.ACCESS_GUEST)&&(t&&void 0!==t.competencies?t.competencies:this.competencyProvider.isPluginForCourseEnabled(e).then(function(e){return!!e&&!e.canmanagecoursecompetencies}))},AddonCompetencyCourseOptionHandler.prototype.getDisplayData=function(e,n){return{title:"addon.competency.competencies",class:"addon-competency-course-handler",component:r.a}},AddonCompetencyCourseOptionHandler.prototype.invalidateEnabledForCourse=function(e,n,t){return n&&void 0!==n.competencies?Promise.resolve():this.competencyProvider.invalidateCourseCompetencies(e)},AddonCompetencyCourseOptionHandler.prototype.prefetch=function(e){var n=this;return this.competencyProvider.getCourseCompetencies(e.id,void 0,void 0,!0).then(function(t){var o=[];return t&&t.competencies&&t.competencies.forEach(function(t){o.push(n.competencyProvider.getCompetencyInCourse(e.id,t.competency.id,void 0,void 0,!0)),o.push(n.competencyProvider.getCompetencySummary(t.competency.id,void 0,void 0,!0)),t.coursemodules&&t.coursemodules.forEach(function(t){o.push(n.filterHelper.getFilters("module",t.id,{courseId:e.id}))}),t.plans&&t.plans.forEach(function(e){o.push(n.filterHelper.getFilters("user",e.userid))})}),Promise.all(o)})},AddonCompetencyCourseOptionHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(166);var o=function(){function AddonCompetencyMainMenuHandler(e){this.competencyProvider=e,this.name="AddonCompetency",this.priority=500}return AddonCompetencyMainMenuHandler.prototype.isEnabled=function(){return this.competencyProvider.getLearningPlans().then(function(e){return e.length>0})},AddonCompetencyMainMenuHandler.prototype.getDisplayData=function(){return{icon:"map",title:"addon.competency.myplans",page:"AddonCompetencyPlanListPage",class:"addon-competency-handler"}},AddonCompetencyMainMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(105),r=t(10),i=t(46),l=(t(166),function(){function AddonCompetencyUserHandler(e,n,t,l){this.linkHelper=e,this.sitesProvider=n,this.competencyProvider=t,this.name="AddonCompetency:learningPlan",this.priority=900,this.type=o.a.TYPE_NEW_PAGE,this.participantsNavEnabledCache={},this.usersNavEnabledCache={},l.on(r.a.LOGOUT,this.clearUsersNavCache.bind(this)),l.on(i.a.PROFILE_REFRESHED,this.clearUsersNavCache.bind(this))}return AddonCompetencyUserHandler.prototype.clearUsersNavCache=function(){this.participantsNavEnabledCache={},this.usersNavEnabledCache={}},AddonCompetencyUserHandler.prototype.isEnabled=function(){return!0},AddonCompetencyUserHandler.prototype.isEnabledForUser=function(e,n,t,o){var r=this;if(n){var i=n+"."+e.id;return void 0!==this.participantsNavEnabledCache[i]?this.participantsNavEnabledCache[i]:this.competencyProvider.getCourseCompetencies(n,e.id).then(function(e){var n=e.competencies.length>0;return r.participantsNavEnabledCache[i]=n,n}).catch(function(e){return r.participantsNavEnabledCache[i]=!1,!1})}return void 0!==this.usersNavEnabledCache[e.id]?this.usersNavEnabledCache[e.id]:this.competencyProvider.getLearningPlans(e.id).then(function(n){var t=n.length>0;return r.usersNavEnabledCache[e.id]=t,t})},AddonCompetencyUserHandler.prototype.getDisplayData=function(e,n){var t=this;return n?{icon:"ribbon",title:"addon.competency.competencies",class:"addon-competency-handler",action:function(e,n,o,r){e.preventDefault(),e.stopPropagation(),t.linkHelper.goInSite(n,"AddonCompetencyCourseCompetenciesPage",{courseId:r,userId:o.id})}}:{icon:"map",title:"addon.competency.learningplans",class:"addon-competency-handler",action:function(e,n,o,r){e.preventDefault(),e.stopPropagation(),t.linkHelper.goInSite(n,"AddonCompetencyPlanListPage",{userId:o.id})}}},AddonCompetencyUserHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(166),function(e){function AddonCompetencyCompetencyLinkHandler(n,t){var o=e.call(this)||this;return o.linkHelper=n,o.competencyProvider=t,o.name="AddonCompetencyCompetencyLinkHandler",o.pattern=/\/admin\/tool\/lp\/(user_competency_in_course|user_competency_in_plan)\.php/,o}return Object(o.__extends)(AddonCompetencyCompetencyLinkHandler,e),AddonCompetencyCompetencyLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return o=o||t.courseid||t.cid,[{action:function(e,n){r.linkHelper.goInSite(n,"AddonCompetencyCompetencyPage",{planId:t.planid,competencyId:t.competencyid,courseId:o,userId:t.userid},e)}}]},AddonCompetencyCompetencyLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.competencyProvider.allCompetenciesDisabled(e).then(function(e){return!e})},AddonCompetencyCompetencyLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(166),function(e){function AddonCompetencyPlanLinkHandler(n,t){var o=e.call(this)||this;return o.linkHelper=n,o.competencyProvider=t,o.name="AddonCompetencyPlanLinkHandler",o.pattern=/\/admin\/tool\/lp\/plan\.php.*([\?\&]id=\d+)/,o}return Object(o.__extends)(AddonCompetencyPlanLinkHandler,e),AddonCompetencyPlanLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){r.linkHelper.goInSite(n,"AddonCompetencyPlanPage",{planId:t.id},e)}}]},AddonCompetencyPlanLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.competencyProvider.allCompetenciesDisabled(e).then(function(e){return!e})},AddonCompetencyPlanLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(166),function(e){function AddonCompetencyPlansLinkHandler(n,t){var o=e.call(this)||this;return o.linkHelper=n,o.competencyProvider=t,o.name="AddonCompetencyPlansLinkHandler",o.pattern=/\/admin\/tool\/lp\/plans\.php/,o}return Object(o.__extends)(AddonCompetencyPlansLinkHandler,e),AddonCompetencyPlansLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){r.linkHelper.goInSite(n,"AddonCompetencyPlanListPage",{userId:t.userid},e,void 0===t.userid)}}]},AddonCompetencyPlansLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.competencyProvider.allCompetenciesDisabled(e).then(function(e){return!e})},AddonCompetencyPlansLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(166),function(e){function AddonCompetencyUserCompetencyLinkHandler(n,t){var o=e.call(this)||this;return o.linkHelper=n,o.competencyProvider=t,o.name="AddonCompetencyUserCompetencyLinkHandler",o.pattern=/\/admin\/tool\/lp\/user_competency\.php.*([\?\&]id=\d+)/,o}return Object(o.__extends)(AddonCompetencyUserCompetencyLinkHandler,e),AddonCompetencyUserCompetencyLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){r.linkHelper.goInSite(n,"AddonCompetencyCompetencySummaryPage",{competencyId:t.id},e)}}]},AddonCompetencyUserCompetencyLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.competencyProvider.allCompetenciesDisabled(e).then(function(e){return!e})},AddonCompetencyUserCompetencyLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(166);var o=function(){function AddonCompetencyPushClickHandler(e,n,t,o){this.utils=e,this.urlUtils=n,this.competencyProvider=t,this.loginHelper=o,this.name="AddonCompetencyPushClickHandler",this.priority=200}return AddonCompetencyPushClickHandler.prototype.handles=function(e){return!(!this.utils.isTrueOrOne(e.notif)||"moodle"!=e.moodlecomponent||"competencyplancomment"!=e.name&&"competencyusercompcomment"!=e.name)&&this.competencyProvider.allCompetenciesDisabled(e.site).then(function(e){return!e})},AddonCompetencyPushClickHandler.prototype.handleClick=function(e){var n=this,t=this.urlUtils.extractUrlParams(e.contexturl);if("competencyplancomment"==e.name){var o=Number(t.id);return this.competencyProvider.invalidateLearningPlan(o,e.site).catch(function(){}).then(function(){return n.loginHelper.redirect("AddonCompetencyPlanPage",{planId:o},e.site)})}if(e.contexturl&&-1!=e.contexturl.indexOf("user_competency_in_plan.php")){var r=Number(e.course),i=Number(t.competencyid),l=Number(t.planid),s=Number(t.userid);return this.competencyProvider.invalidateCompetencyInPlan(l,i,e.site).catch(function(){}).then(function(){return n.loginHelper.redirect("AddonCompetencyCompetencyPage",{planId:l,competencyId:i,courseId:r,userId:s},e.site)})}var a=Number(t.userid);return this.competencyProvider.invalidateLearningPlans(a,e.site).catch(function(){}).then(function(){return n.loginHelper.redirect("AddonCompetencyPlanListPage",{userId:a},e.site)})},AddonCompetencyPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonFilesMainMenuHandler(e){this.filesProvider=e,this.name="AddonFiles",this.priority=400}return AddonFilesMainMenuHandler.prototype.isEnabled=function(){return this.filesProvider.isPluginEnabled()},AddonFilesMainMenuHandler.prototype.getDisplayData=function(){return{icon:"folder",title:"addon.files.files",page:"AddonFilesListPage",class:"addon-files-handler"}},AddonFilesMainMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(162),r=t(10),i=function(){function AddonMessagesMainMenuHandler(e,n,t,i,l,s,a,u,d,c){var p=this;this.messagesProvider=e,this.sitesProvider=n,this.appProvider=i,this.localNotificationsProvider=l,this.filterHelper=s,this.pushNotificationsProvider=a,this.emulatorHelper=c,this.name="AddonMessages",this.priority=800,this.handler={icon:"chatbubbles",title:"addon.messages.messages",page:"AddonMessagesIndexPage",class:"addon-messages-handler",showBadge:!0,badge:"",loading:!0},this.unreadCount=0,this.contactRequestsCount=0,this.orMore=!1,t.on(o.a.UNREAD_CONVERSATION_COUNTS_EVENT,function(e){p.unreadCount=e.favourites+e.individual+e.group+e.self,p.orMore=e.orMore,p.updateBadge(e.siteId)}),t.on(o.a.CONTACT_REQUESTS_COUNT_EVENT,function(e){p.contactRequestsCount=e.count,p.updateBadge(e.siteId)}),t.on(r.a.LOGOUT,function(e){p.unreadCount=0,p.contactRequestsCount=0,p.orMore=!1,p.handler.badge="",p.handler.loading=!0}),d.on("receive").subscribe(function(e){(u.isFalseOrZero(e.notif)||"messagecontactrequests"==e.name)&&p.sitesProvider.isCurrentSite(e.site)&&p.refreshBadge(e.site)}),d.registerCounterHandler("AddonMessages")}return AddonMessagesMainMenuHandler.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},AddonMessagesMainMenuHandler.prototype.getDisplayData=function(){return this.handler.page=this.messagesProvider.isGroupMessagingEnabled()?"AddonMessagesGroupConversationsPage":"AddonMessagesIndexPage",this.handler.loading&&this.refreshBadge(),this.handler},AddonMessagesMainMenuHandler.prototype.refreshBadge=function(e,n){var t=this;if(e=e||this.sitesProvider.getCurrentSiteId()){var o=[];return o.push(this.messagesProvider.refreshUnreadConversationCounts(e).catch(function(){t.unreadCount=0,t.orMore=!1})),!n&&this.messagesProvider.isGroupMessagingEnabled()&&o.push(this.messagesProvider.refreshContactRequestsCount(e).catch(function(){t.contactRequestsCount=0})),Promise.all(o).finally(function(){t.updateBadge(e),t.handler.loading=!1})}},AddonMessagesMainMenuHandler.prototype.updateBadge=function(e){var n=this.unreadCount+(this.contactRequestsCount||0);this.handler.badge=n>0?n+(this.orMore?"+":""):"",this.pushNotificationsProvider.updateAddonCounter("AddonMessages",n,e)},AddonMessagesMainMenuHandler.prototype.execute=function(e,n){return this.sitesProvider.isCurrentSite(e)&&this.refreshBadge(),this.appProvider.isDesktop()&&this.localNotificationsProvider.isAvailable()&&this.emulatorHelper.checkNewNotifications(o.a.PUSH_SIMULATION_COMPONENT,this.fetchMessages.bind(this),this.getTitleAndText.bind(this),e),Promise.resolve()},AddonMessagesMainMenuHandler.prototype.getInterval=function(){return this.appProvider.isDesktop()?6e4:this.messagesProvider.isGroupMessagingEnabled()||this.messagesProvider.isMessageCountEnabled()?3e5:6e5},AddonMessagesMainMenuHandler.prototype.isSync=function(){return!!this.appProvider.isDesktop()||!this.messagesProvider.isMessageCountEnabled()&&!this.messagesProvider.isGroupMessagingEnabled()},AddonMessagesMainMenuHandler.prototype.canManualSync=function(){return!0},AddonMessagesMainMenuHandler.prototype.fetchMessages=function(e){var n=this;return this.sitesProvider.getSite(e).then(function(t){return t.isVersionGreaterEqualThan("3.7")?n.messagesProvider.getConversations(void 0,void 0,0,t.id,void 0,!1,!0).then(function(e){var n=e.conversations.find(function(e){return!e.ismuted});if(n.isread)return[];var o=t.getUserId(),r=n.messages[0];if(!r||r.useridfrom==o)return[];r.contexturl="",r.contexturlname="",r.convid=n.id,r.fullmessage=r.text,r.fullmessageformat=0,r.fullmessagehtml="",r.notification=0,r.read=0,r.smallmessage=r.smallmessage||r.text,r.subject=n.name,r.timecreated=1e3*r.timecreated,r.timeread=0,r.useridto=o,r.usertofullname=t.getInfo().fullname;var i=n.members.find(function(e){return e.id==r.useridfrom});return r.userfromfullname=i&&i.fullname,[r]}):n.messagesProvider.getUnreadReceivedMessages(!0,!1,!0,e).then(function(e){return e.messages})})},AddonMessagesMainMenuHandler.prototype.getTitleAndText=function(e){var n={title:e.name||e.userfromfullname};return this.filterHelper.getFiltersAndFormatText(e.text,"system",0,{clean:!0,singleLine:!0}).catch(function(){return{text:e.text}}).then(function(e){return n.text=e.text,n})},AddonMessagesMainMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(105),r=(t(162),function(){function AddonMessagesSendMessageUserHandler(e,n,t){this.linkHelper=e,this.sitesProvider=n,this.messagesProvider=t,this.name="AddonMessages:sendMessage",this.priority=1e3,this.type=o.a.TYPE_COMMUNICATION}return AddonMessagesSendMessageUserHandler.prototype.isEnabled=function(){return this.messagesProvider.isPluginEnabled()},AddonMessagesSendMessageUserHandler.prototype.isEnabledForUser=function(e,n,t,o){var r=this.sitesProvider.getCurrentSite();return!!r&&(e.id!=r.getUserId()||r.isVersionGreaterEqualThan("3.7"))},AddonMessagesSendMessageUserHandler.prototype.getDisplayData=function(e,n){var t=this;return{icon:"send",title:"addon.messages.message",class:"addon-messages-send-message-handler",action:function(e,n,o,r){e.preventDefault(),e.stopPropagation();t.linkHelper.goInSite(n,"AddonMessagesDiscussionPage",{showKeyboard:!0,userId:o.id})}}},AddonMessagesSendMessageUserHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(162),function(e){function AddonMessagesContactRequestLinkHandler(n,t){var o=e.call(this)||this;return o.linkHelper=n,o.messagesProvider=t,o.name="AddonMessagesContactRequestLinkHandler",o.pattern=/\/message\/pendingcontactrequests\.php/,o}return Object(o.__extends)(AddonMessagesContactRequestLinkHandler,e),AddonMessagesContactRequestLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){r.linkHelper.goInSite(n,"AddonMessagesContactsPage",{},e)}}]},AddonMessagesContactRequestLinkHandler.prototype.isEnabled=function(e,n,t,o){var r=this;return this.messagesProvider.isPluginEnabled(e).then(function(e){return!!e&&r.messagesProvider.isGroupMessagingEnabled()})},AddonMessagesContactRequestLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(162),function(e){function AddonMessagesDiscussionLinkHandler(n,t,o){var r=e.call(this)||this;return r.linkHelper=n,r.messagesProvider=t,r.sitesProvider=o,r.name="AddonMessagesDiscussionLinkHandler",r.pattern=/\/message\/index\.php.*([\?\&](id|user1|user2)=\d+)/,r}return Object(o.__extends)(AddonMessagesDiscussionLinkHandler,e),AddonMessagesDiscussionLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o={userId:parseInt(t.id||t.user2,10)};r.linkHelper.goInSite(n,"AddonMessagesDiscussionPage",o,e)}}]},AddonMessagesDiscussionLinkHandler.prototype.isEnabled=function(e,n,t,o){var r=this;return this.messagesProvider.isPluginEnabled(e).then(function(n){return!!n&&((void 0!==t.id||void 0!==t.user2)&&(void 0===t.user1||r.sitesProvider.getSite(e).then(function(e){return parseInt(t.user1,10)==e.getUserId()})))})},AddonMessagesDiscussionLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(162),function(e){function AddonMessagesIndexLinkHandler(n,t){var o=e.call(this)||this;return o.linkHelper=n,o.messagesProvider=t,o.name="AddonMessagesIndexLinkHandler",o.pattern=/\/message\/index\.php((?![\?\&](id|user1|user2)=\d+).)*$/,o}return Object(o.__extends)(AddonMessagesIndexLinkHandler,e),AddonMessagesIndexLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var t="AddonMessagesIndexPage";r.messagesProvider.isGroupMessagingEnabled()&&(t="AddonMessagesGroupConversationsPage"),r.linkHelper.goInSite(n,t,void 0,e)}}]},AddonMessagesIndexLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.messagesProvider.isPluginEnabled(e)},AddonMessagesIndexLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(503);var o=function(){function AddonMessagesSyncCronHandler(e){this.messagesSync=e,this.name="AddonMessagesSyncCronHandler"}return AddonMessagesSyncCronHandler.prototype.execute=function(e,n){return this.messagesSync.syncAllDiscussions(e)},AddonMessagesSyncCronHandler.prototype.getInterval=function(){return 3e5},AddonMessagesSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(162);var o=function(){function AddonMessagesPushClickHandler(e,n,t){this.utils=e,this.messagesProvider=n,this.loginHelper=t,this.name="AddonMessagesPushClickHandler",this.priority=200,this.featureName="CoreMainMenuDelegate_AddonMessages"}return AddonMessagesPushClickHandler.prototype.handles=function(e){return(!this.utils.isTrueOrOne(e.notif)||"messagecontactrequests"==e.name)&&this.messagesProvider.isPluginEnabled(e.site)},AddonMessagesPushClickHandler.prototype.handleClick=function(e){var n=this;return this.messagesProvider.invalidateDiscussionsCache(e.site).catch(function(){}).then(function(){return n.messagesProvider.isGroupMessagingEnabledInSite(e.site).then(function(t){var o={},r="AddonMessagesIndexPage";return t&&(r="AddonMessagesGroupConversationsPage"),e.convid&&t?o.conversationId=Number(e.convid):e.userfromid&&(o.discussionUserId=Number(e.userfromid)),n.loginHelper.redirect(r,o,e.site)})})},AddonMessagesPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(162);var o=function(){function AddonMessagesSettingsHandler(e){this.messagesProvider=e,this.name="AddonMessages",this.priority=600}return AddonMessagesSettingsHandler.prototype.isEnabled=function(){return this.messagesProvider.isMessagePreferencesEnabled()},AddonMessagesSettingsHandler.prototype.getDisplayData=function(){return{icon:"chatbubbles",title:"addon.messages.messages",page:"AddonMessagesSettingsPage",class:"addon-messages-settings-handler"}},AddonMessagesSettingsHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(78);var o=t(735),r=t(42),i=function(){function AddonModAssignModuleHandler(e,n){this.courseProvider=e,this.assignProvider=n,this.name="AddonModAssign",this.modName="assign",this.supportedFeatures=(t={},t[r.a.FEATURE_GROUPS]=!0,t[r.a.FEATURE_GROUPINGS]=!0,t[r.a.FEATURE_MOD_INTRO]=!0,t[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[r.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[r.a.FEATURE_GRADE_HAS_GRADE]=!0,t[r.a.FEATURE_GRADE_OUTCOMES]=!0,t[r.a.FEATURE_BACKUP_MOODLE2]=!0,t[r.a.FEATURE_SHOW_DESCRIPTION]=!0,t[r.a.FEATURE_ADVANCED_GRADING]=!0,t[r.a.FEATURE_PLAGIARISM]=!0,t[r.a.FEATURE_COMMENT]=!0,t);var t}return AddonModAssignModuleHandler.prototype.isEnabled=function(){return this.assignProvider.isPluginEnabled()},AddonModAssignModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_assign-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModAssignIndexPage",l,r)}}},AddonModAssignModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModAssignModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(143)),i=t(78),l=(t(184),t(319),t(153),t(167),function(n){function AddonModAssignPrefetchHandler(e,t,o,r,l,s,a,u,d,c,p,f,h,m,_,g,v,C,y){var P=n.call(this,e,t,o,r,l,s,a,u,d)||this;return P.assignProvider=c,P.textUtils=p,P.feedbackDelegate=f,P.submissionDelegate=h,P.courseHelper=m,P.groupsProvider=_,P.gradesHelper=g,P.userProvider=v,P.assignHelper=C,P.syncProvider=y,P.name="AddonModAssign",P.modName="assign",P.component=i.a.COMPONENT,P.updatesNames=/^configuration$|^.*files$|^submissions$|^grades$|^gradeitems$|^outcomes$|^comments$/,P}return Object(o.__extends)(AddonModAssignPrefetchHandler,n),AddonModAssignPrefetchHandler.prototype.canUseCheckUpdates=function(e,n){var t=this;return this.assignProvider.getAssignment(n,e.id).then(function(e){return t.assignProvider.getSubmissions(e.id).then(function(n){return!n.canviewsubmissions&&t.assignProvider.getSubmissionStatus(e.id).then(function(){return!0})})}).catch(function(){return!1})},AddonModAssignPrefetchHandler.prototype.getFiles=function(e,n,t,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.assignProvider.getAssignment(n,e.id,!1,o).then(function(n){var t=n.introattachments||[];return t=t.concat(r.getIntroFilesFromInstance(e,n)),r.assignProvider.getSubmissions(n.id,!1,o).then(function(e){var i=n.blindmarking&&!n.revealidentities;if(e.canviewsubmissions)return r.assignHelper.getSubmissionsUserData(n,e.submissions,0,!1,o).then(function(e){var i=[];return e.forEach(function(e){i.push(r.getSubmissionFiles(n,e.submitid,!!e.blindid,o).then(function(e){t=t.concat(e)}).catch(function(e){return e&&"nopermission"==e.errorcode?Promise.resolve():Promise.reject(e)}))}),Promise.all(i).then(function(){return t})});var l=r.sitesProvider.getCurrentSiteUserId();return r.getSubmissionFiles(n,l,i,o).then(function(e){return t=t.concat(e)})})}).catch(function(){return[]})},AddonModAssignPrefetchHandler.prototype.getSubmissionFiles=function(e,n,t,o){var r=this;return this.assignProvider.getSubmissionStatusWithRetry(e,n,void 0,t,!0,!1,o).then(function(n){var t,i=[];return n.lastattempt&&(t=r.assignProvider.getSubmissionObjectFromAttempt(e,n.lastattempt))&&t.plugins&&t.plugins.forEach(function(n){i.push(r.submissionDelegate.getPluginFiles(e,t,n,o))}),n.feedback&&n.feedback.plugins&&n.feedback.plugins.forEach(function(n){i.push(r.feedbackDelegate.getPluginFiles(e,t,n,o))}),Promise.all(i)}).then(function(e){var n=[];return e.forEach(function(e){n=n.concat(e)}),n})},AddonModAssignPrefetchHandler.prototype.invalidateContent=function(e,n){return this.assignProvider.invalidateContent(e,n)},AddonModAssignPrefetchHandler.prototype.invalidateModule=function(e,n){return this.assignProvider.invalidateAssignmentData(n)},AddonModAssignPrefetchHandler.prototype.isEnabled=function(){return this.assignProvider.isPluginEnabled()},AddonModAssignPrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,t,this.prefetchAssign.bind(this))},AddonModAssignPrefetchHandler.prototype.prefetchAssign=function(e,n,t,o){var r=this,i=this.sitesProvider.getCurrentSiteUserId(),l=[];return o=o||this.sitesProvider.getCurrentSiteId(),l.push(this.assignProvider.getAssignment(n,e.id,!0,o).then(function(t){var l=[];t.blindmarking&&!t.revealidentities&&l.push(r.assignProvider.getAssignmentUserMappings(t.id,void 0,!0,o).catch(function(){})),l.push(r.prefetchSubmissions(t,n,e.id,i,o)),l.push(r.courseHelper.getModuleCourseIdByInstance(t.id,"assign",o));var s=t.introattachments||[];return s=s.concat(r.getIntroFilesFromInstance(e,t)),l.push(r.filepoolProvider.addFilesToQueue(o,s,r.component,e.id)),Promise.all(l)})),Promise.all(l)},AddonModAssignPrefetchHandler.prototype.prefetchSubmissions=function(e,n,t,o,r){var i=this;return this.assignProvider.getSubmissions(e.id,!0,r).then(function(l){var s=[];return s.push(i.groupsProvider.getActivityGroupInfo(e.cmid,!1,void 0,r).then(function(s){if(l.canviewsubmissions){var a=[];return s.groups&&0!=s.groups.length||(s.groups=[{id:0}]),s.groups.forEach(function(s){a.push(i.assignHelper.getSubmissionsUserData(e,l.submissions,s.id,!0,r).then(function(a){var u=[];return a.forEach(function(o){u.push(i.assignProvider.getSubmissionStatusWithRetry(e,o.submitid,s.id,!!o.blindid,!0,!0,r).then(function(l){return i.prefetchSubmission(e,n,t,l,o.submitid,r)}).catch(function(e){return e&&"nopermission"==e.errorcode?Promise.resolve():Promise.reject(e)}))}),e.markingworkflow||u.push(i.assignProvider.getAssignmentGrades(e.id,!0,r)),l.submissions&&l.submissions.find(function(e){return e.submitid==o})||u.push(i.assignProvider.getSubmissionStatusWithRetry(e,o,s.id,!1,!0,!0,r).then(function(l){return i.prefetchSubmission(e,n,t,l,o,r)})),Promise.all(u)}).then(function(){return i.assignHelper.getParticipants(e,s.id,!1,r).then(function(e){return i.userProvider.prefetchUserAvatars(e,"profileimageurl",r)}).catch(function(){})}))}),Promise.all(a)}})),s.push(i.assignProvider.getSubmissionStatusWithRetry(e,o,void 0,!1,!0,!0,r).then(function(l){return i.prefetchSubmission(e,n,t,l,o,r)}).catch(function(e){if("nopermission"!=e.errorcode)return Promise.reject(e)})),Promise.all(s)})},AddonModAssignPrefetchHandler.prototype.prefetchSubmission=function(n,t,o,r,i,l){var s,a=this,u=[],d=n.blindmarking&&!n.revealidentities,c=[];return r.lastattempt&&(s=this.assignProvider.getSubmissionObjectFromAttempt(n,r.lastattempt),!d&&r.lastattempt.submissiongroupmemberswhoneedtosubmit&&(c=c.concat(r.lastattempt.submissiongroupmemberswhoneedtosubmit)),s&&s.id&&(s.plugins&&s.plugins.forEach(function(t){u.push(a.submissionDelegate.prefetch(n,s,t,l)),u.push(a.submissionDelegate.getPluginFiles(n,s,t,l).then(function(n){return a.filepoolProvider.addFilesToQueue(l,n,a.component,e.i)}).catch(function(){}))}),s.userid&&c.push(s.userid))),i&&u.push(this.courseProvider.getModuleBasicGradeInfo(o,l).then(function(e){e&&u.push(a.gradesHelper.getGradeModuleItems(t,o,i,void 0,l,!0))})),r.feedback&&(r.feedback.grade&&r.feedback.grade.grader>0&&c.push(r.feedback.grade.grader),r.feedback.plugins&&r.feedback.plugins.forEach(function(t){u.push(a.feedbackDelegate.prefetch(n,s,t,l)),u.push(a.feedbackDelegate.getPluginFiles(n,s,t,l).then(function(n){return a.filepoolProvider.addFilesToQueue(l,n,a.component,e.i)}).catch(function(){}))})),u.push(this.userProvider.prefetchProfiles(c,t,l)),Promise.all(u)},AddonModAssignPrefetchHandler.prototype.sync=function(e,n,t){return this.syncProvider.syncAssign(e.instance,t)},AddonModAssignPrefetchHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(319);var o=function(){function AddonModAssignSyncCronHandler(e){this.assignSync=e,this.name="AddonModAssignSyncCronHandler"}return AddonModAssignSyncCronHandler.prototype.execute=function(e,n){return this.assignSync.syncAllAssignments(e,n)},AddonModAssignSyncCronHandler.prototype.getInterval=function(){return this.assignSync.syncInterval},AddonModAssignSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModAssignIndexLinkHandler(n){var t=e.call(this,n,"AddonModAssign","assign")||this;return t.name="AddonModAssignIndexLinkHandler",t}return Object(o.__extends)(AddonModAssignIndexLinkHandler,e),AddonModAssignIndexLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),t(78),function(e){function AddonModAssignListLinkHandler(n,t,o){var r=e.call(this,n,t,"AddonModAssign","assign")||this;return r.assignProvider=o,r.name="AddonModAssignListLinkHandler",r}return Object(o.__extends)(AddonModAssignListLinkHandler,e),AddonModAssignListLinkHandler.prototype.isEnabled=function(){return this.assignProvider.isPluginEnabled()},AddonModAssignListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(78);var o=function(){function AddonModAssignPushClickHandler(e,n,t,o){this.utils=e,this.assignProvider=n,this.urlUtils=t,this.courseHelper=o,this.name="AddonModAssignPushClickHandler",this.priority=200,this.featureName="CoreCourseModuleDelegate_AddonModAssign"}return AddonModAssignPushClickHandler.prototype.handles=function(e){return this.utils.isTrueOrOne(e.notif)&&"mod_assign"==e.moodlecomponent&&"assign_notification"==e.name},AddonModAssignPushClickHandler.prototype.handleClick=function(e){var n=this,t=this.urlUtils.extractUrlParams(e.contexturl),o=Number(e.courseid),r=Number(t.id);return this.assignProvider.invalidateContent(r,o,e.site).catch(function(){}).then(function(){return n.courseHelper.navigateToModule(r,e.site,o)})},AddonModAssignPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1155),t(1157),t(1158);var o=function(){return function AddonModAssignSubmissionModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1156),t(635),t(167);var o=function(){return function AddonModAssignSubmissionCommentsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(635),r=function(){function AddonModAssignSubmissionCommentsHandler(e){this.commentsProvider=e,this.name="AddonModAssignSubmissionCommentsHandler",this.type="comments"}return AddonModAssignSubmissionCommentsHandler.prototype.canEditOffline=function(e,n,t){return!0},AddonModAssignSubmissionCommentsHandler.prototype.getComponent=function(e,n,t){return t?void 0:o.a},AddonModAssignSubmissionCommentsHandler.prototype.isEnabled=function(){return!0},AddonModAssignSubmissionCommentsHandler.prototype.isEnabledForEdit=function(){return!0},AddonModAssignSubmissionCommentsHandler.prototype.prefetch=function(e,n,t,o){return this.commentsProvider.getComments("module",e.cmid,"assignsubmission_comments",n.id,"submission_comments",0,o).catch(function(){})},AddonModAssignSubmissionCommentsHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(637),t(638),t(167);var o=function(){return function AddonModAssignSubmissionFileModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1159),t(639),t(167);var o=function(){return function AddonModAssignSubmissionOnlineTextModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(4),t(78),t(134),t(184);var o=t(639),r=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},i=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},l=function(){function AddonModAssignSubmissionOnlineTextHandler(e,n,t,o,r,i,l){this.translate=e,this.sitesProvider=n,this.fileHelper=t,this.textUtils=o,this.assignProvider=r,this.assignOfflineProvider=i,this.assignHelper=l,this.name="AddonModAssignSubmissionOnlineTextHandler",this.type="onlinetext"}return AddonModAssignSubmissionOnlineTextHandler.prototype.canEditOffline=function(e,n,t){return!1},AddonModAssignSubmissionOnlineTextHandler.prototype.isEmpty=function(e,n){return 0===this.assignProvider.getSubmissionPluginText(n,!0).trim().length},AddonModAssignSubmissionOnlineTextHandler.prototype.copySubmissionData=function(e,n,t,o,r){var i=this.assignProvider.getSubmissionPluginText(n,!0),l=this.assignProvider.getSubmissionPluginAttachments(n);return(l.length?this.assignHelper.uploadFiles(e.id,l,r):Promise.resolve(0)).then(function(e){t.onlinetext_editor={text:i,format:1,itemid:e}})},AddonModAssignSubmissionOnlineTextHandler.prototype.getComponent=function(e,n,t){return o.a},AddonModAssignSubmissionOnlineTextHandler.prototype.getPluginFiles=function(e,n,t,o){return this.assignProvider.getSubmissionPluginAttachments(t)},AddonModAssignSubmissionOnlineTextHandler.prototype.getSizeForCopy=function(e,n){return r(this,void 0,void 0,function(){var e,t,o;return i(this,function(r){switch(r.label){case 0:return e=this.assignProvider.getSubmissionPluginText(n,!0),t=this.assignProvider.getSubmissionPluginAttachments(n),[4,this.fileHelper.getTotalFilesSize(t)];case 1:return o=r.sent(),[2,e.length+o]}})})},AddonModAssignSubmissionOnlineTextHandler.prototype.getSizeForEdit=function(e,n,t,o){return this.assignProvider.getSubmissionPluginText(t,!0).length},AddonModAssignSubmissionOnlineTextHandler.prototype.getTextToSubmit=function(e,n){return this.textUtils.restorePluginfileUrls(n.onlinetext_editor_text,e.fileareas&&e.fileareas[0]?e.fileareas[0].files:[])},AddonModAssignSubmissionOnlineTextHandler.prototype.hasDataChanged=function(e,n,t,o){var r=this;return this.assignOfflineProvider.getSubmission(e.id,n.userid).catch(function(){}).then(function(e){return e&&e.plugindata&&e.plugindata.onlinetext_editor?e.plugindata.onlinetext_editor.text:t.editorfields&&t.editorfields[0]?t.editorfields[0].text:""}).then(function(e){return e!=r.getTextToSubmit(t,o)})},AddonModAssignSubmissionOnlineTextHandler.prototype.isEnabled=function(){return!0},AddonModAssignSubmissionOnlineTextHandler.prototype.isEnabledForEdit=function(){var e=this.sitesProvider.getCurrentSite();return e.isVersionGreaterEqualThan("3.1.1")||e.checkIfAppUsesLocalMobile()},AddonModAssignSubmissionOnlineTextHandler.prototype.prepareSubmissionData=function(e,n,t,o,r,i,l,s){var a=this.getTextToSubmit(t,o),u=this.assignHelper.getPluginConfig(e,"assignsubmission",t.type);if(parseInt(u.wordlimitenabled,10)){var d=this.textUtils.countWords(a),c=parseInt(u.wordlimit,10);if(d>c){var p=this.translate.instant("addon.mod_assign_submission_onlinetext.wordlimitexceeded",{$a:{count:d,limit:c}});return Promise.reject(p)}}a=this.textUtils.formatHtmlLines(a),r.onlinetext_editor={text:a,format:1,itemid:0}},AddonModAssignSubmissionOnlineTextHandler.prototype.prepareSyncData=function(e,n,t,o,r,i){var l=o&&o.plugindata&&o.plugindata.onlinetext_editor;l&&(r.onlinetext_editor=l)},AddonModAssignSubmissionOnlineTextHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1161),t(1162),t(1164);var o=function(){return function AddonModAssignFeedbackModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(640),t(641),t(153);var o=function(){return function AddonModAssignFeedbackCommentsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1163),t(643),t(153);var o=function(){return function AddonModAssignFeedbackEditPdfModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(78);var o=t(643),r=function(){function AddonModAssignFeedbackEditPdfHandler(e){this.assignProvider=e,this.name="AddonModAssignFeedbackEditPdfHandler",this.type="editpdf"}return AddonModAssignFeedbackEditPdfHandler.prototype.getComponent=function(e,n){return o.a},AddonModAssignFeedbackEditPdfHandler.prototype.getPluginFiles=function(e,n,t,o){return this.assignProvider.getSubmissionPluginAttachments(t)},AddonModAssignFeedbackEditPdfHandler.prototype.isEnabled=function(){return!0},AddonModAssignFeedbackEditPdfHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1165),t(644),t(153);var o=function(){return function AddonModAssignFeedbackFileModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(78);var o=t(644),r=function(){function AddonModAssignFeedbackFileHandler(e){this.assignProvider=e,this.name="AddonModAssignFeedbackFileHandler",this.type="file"}return AddonModAssignFeedbackFileHandler.prototype.getComponent=function(e,n){return o.a},AddonModAssignFeedbackFileHandler.prototype.getPluginFiles=function(e,n,t,o){return this.assignProvider.getSubmissionPluginAttachments(t)},AddonModAssignFeedbackFileHandler.prototype.isEnabled=function(){return!0},AddonModAssignFeedbackFileHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(221);var o=t(497),r=t(42),i=function(){function AddonModBookModuleHandler(e,n){this.bookProvider=e,this.courseProvider=n,this.name="AddonModBook",this.modName="book",this.supportedFeatures=(t={},t[r.a.FEATURE_MOD_ARCHETYPE]=r.a.MOD_ARCHETYPE_RESOURCE,t[r.a.FEATURE_GROUPS]=!1,t[r.a.FEATURE_GROUPINGS]=!1,t[r.a.FEATURE_MOD_INTRO]=!0,t[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[r.a.FEATURE_GRADE_HAS_GRADE]=!1,t[r.a.FEATURE_GRADE_OUTCOMES]=!1,t[r.a.FEATURE_BACKUP_MOODLE2]=!0,t[r.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return AddonModBookModuleHandler.prototype.isEnabled=function(){return this.bookProvider.isPluginEnabled()},AddonModBookModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_book-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModBookIndexPage",l,r)}}},AddonModBookModuleHandler.prototype.getMainComponent=function(e,n,t){return o.a},AddonModBookModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=(t(221),function(e){function AddonModBookLinkHandler(n,t){var o=e.call(this,n,"AddonModBook","book","b")||this;return o.bookProvider=t,o.name="AddonModBookLinkHandler",o}return Object(o.__extends)(AddonModBookLinkHandler,e),AddonModBookLinkHandler.prototype.getPageParams=function(e,n,t){return n.chapterid?{chapterId:parseInt(n.chapterid,10)}:void 0},AddonModBookLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.bookProvider.isPluginEnabled()},AddonModBookLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),t(221),function(e){function AddonModBookListLinkHandler(n,t,o){var r=e.call(this,n,t,"AddonModBook","book")||this;return r.bookProvider=o,r.name="AddonModBookListLinkHandler",r}return Object(o.__extends)(AddonModBookListLinkHandler,e),AddonModBookListLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.bookProvider.isPluginEnabled()},AddonModBookListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(225),r=(t(221),function(){function AddonModBookTagAreaHandler(e,n,t,o){this.tagHelper=e,this.bookProvider=n,this.courseProvider=t,this.urlUtils=o,this.name="AddonModBookTagAreaHandler",this.type="mod_book/book_chapters"}return AddonModBookTagAreaHandler.prototype.isEnabled=function(){return this.bookProvider.isPluginEnabled()},AddonModBookTagAreaHandler.prototype.parseContent=function(e){var n=this,t=this.tagHelper.parseFeedContent(e);return Promise.all(t.map(function(e){var t=n.urlUtils.extractUrlParams(e.url);if(t.b&&!t.id){var o=parseInt(t.b,10);return n.courseProvider.getModuleBasicInfoByInstance(o,"book").then(function(n){e.url+="&id="+n.id})}})).then(function(){return t})},AddonModBookTagAreaHandler.prototype.getComponent=function(e){return o.a},AddonModBookTagAreaHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModChatLinkHandler(n){var t=e.call(this,n,"AddonModChat","chat","c")||this;return t.name="AddonModChatLinkHandler",t}return Object(o.__extends)(AddonModChatLinkHandler,e),AddonModChatLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModChatListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModChat","chat")||this;return o.name="AddonModChatListLinkHandler",o}return Object(o.__extends)(AddonModChatListLinkHandler,e),AddonModChatListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(498),r=t(42),i=(t(279),function(){function AddonModChatModuleHandler(e,n){this.courseProvider=e,this.chatProvider=n,this.name="AddonModChat",this.modName="chat",this.supportedFeatures=(t={},t[r.a.FEATURE_GROUPS]=!0,t[r.a.FEATURE_GROUPINGS]=!0,t[r.a.FEATURE_MOD_INTRO]=!0,t[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[r.a.FEATURE_GRADE_HAS_GRADE]=!1,t[r.a.FEATURE_GRADE_OUTCOMES]=!0,t[r.a.FEATURE_BACKUP_MOODLE2]=!0,t[r.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return AddonModChatModuleHandler.prototype.isEnabled=function(){return!0},AddonModChatModuleHandler.prototype.getData=function(e,n,t){var o={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_chat-handler",action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModChatIndexPage",l,r)}};return this.chatProvider.areSessionsAvailable().then(function(e){o.showDownloadButton=e}),o},AddonModChatModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModChatModuleHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(143)),i=t(279),l=function(e){function AddonModChatPrefetchHandler(n,t,o,r,l,s,a,u,d,c,p,f){var h=e.call(this,n,t,o,r,l,s,a,u,d)||this;return h.groupsProvider=c,h.userProvider=p,h.chatProvider=f,h.name="AddonModChat",h.modName="chat",h.component=i.a.COMPONENT,h}return Object(o.__extends)(AddonModChatPrefetchHandler,e),AddonModChatPrefetchHandler.prototype.isEnabled=function(){return this.chatProvider.areSessionsAvailable()},AddonModChatPrefetchHandler.prototype.invalidateContent=function(e,n){var t=this;return this.chatProvider.getChat(n,e).then(function(e){var n=[t.chatProvider.invalidateAllSessions(e.id),t.chatProvider.invalidateAllSessionMessages(e.id)];return t.utils.allPromises(n)})},AddonModChatPrefetchHandler.prototype.invalidateModule=function(e,n){var t=[this.chatProvider.invalidateChats(n),this.courseProvider.invalidateModule(e.id)];return this.utils.allPromises(t)},AddonModChatPrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,t,this.prefetchChat.bind(this))},AddonModChatPrefetchHandler.prototype.prefetchChat=function(e,n,t,o){var r=this,i=[this.chatProvider.getChat(n,e.id,o),this.groupsProvider.getActivityGroupInfo(e.id,!1,void 0,o)];return Promise.all(i).then(function(e){var t=e[0],i=e[1],l=[],s=[0];return i.groups&&i.groups.length>0&&(s=i.groups.map(function(e){return e.id})),s.forEach(function(e){l.push(r.chatProvider.getSessions(t.id,e,!1,!0,o).catch(function(e){if("notingroup"!=e.errorcode)return Promise.reject(e)})),l.push(r.chatProvider.getSessions(t.id,e,!0,!0,o).then(function(e){var i=e.map(function(e){return r.prefetchSession(t.id,e,0,n,o)});return Promise.all(i)}).catch(function(e){if("notingroup"!=e.errorcode)return Promise.reject(e)}))}),Promise.all(l)})},AddonModChatPrefetchHandler.prototype.prefetchSession=function(e,n,t,o,r){var i=this;return this.chatProvider.getSessionMessages(e,n.sessionstart,n.sessionend,t,!0,r).then(function(e){var t={};n.sessionusers.forEach(function(e){t[e.userid]=!0}),e.forEach(function(e){t[e.userid]=!0});var l=Object.keys(t).map(Number);return i.userProvider.prefetchProfiles(l,o,r)})},AddonModChatPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(499),r=t(42),i=function(){function AddonModChoiceModuleHandler(e){this.courseProvider=e,this.name="AddonModChoice",this.modName="choice",this.supportedFeatures=(n={},n[r.a.FEATURE_GROUPS]=!0,n[r.a.FEATURE_GROUPINGS]=!0,n[r.a.FEATURE_MOD_INTRO]=!0,n[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[r.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[r.a.FEATURE_GRADE_HAS_GRADE]=!1,n[r.a.FEATURE_GRADE_OUTCOMES]=!1,n[r.a.FEATURE_BACKUP_MOODLE2]=!0,n[r.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return AddonModChoiceModuleHandler.prototype.isEnabled=function(){return!0},AddonModChoiceModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_choice-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModChoiceIndexPage",l,r)}}},AddonModChoiceModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModChoiceModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModChoiceLinkHandler(n){var t=e.call(this,n,"AddonModChoice","choice")||this;return t.name="AddonModChoiceLinkHandler",t}return Object(o.__extends)(AddonModChoiceLinkHandler,e),AddonModChoiceLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModChoiceListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModChoice","choice")||this;return o.name="AddonModChoiceListLinkHandler",o}return Object(o.__extends)(AddonModChoiceListLinkHandler,e),AddonModChoiceListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(296);var o=function(){function AddonModChoiceSyncCronHandler(e){this.choiceSync=e,this.name="AddonModChoiceSyncCronHandler"}return AddonModChoiceSyncCronHandler.prototype.execute=function(e,n){return this.choiceSync.syncAllChoices(e,n)},AddonModChoiceSyncCronHandler.prototype.getInterval=function(){return this.choiceSync.syncInterval},AddonModChoiceSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(504),r=(t(135),t(42)),i=function(){function AddonModFeedbackModuleHandler(e,n){this.courseProvider=e,this.feedbackProvider=n,this.name="AddonModFeedback",this.modName="feedback",this.supportedFeatures=(t={},t[r.a.FEATURE_GROUPS]=!0,t[r.a.FEATURE_GROUPINGS]=!0,t[r.a.FEATURE_MOD_INTRO]=!0,t[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[r.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[r.a.FEATURE_GRADE_HAS_GRADE]=!1,t[r.a.FEATURE_GRADE_OUTCOMES]=!1,t[r.a.FEATURE_BACKUP_MOODLE2]=!0,t[r.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return AddonModFeedbackModuleHandler.prototype.isEnabled=function(){return this.feedbackProvider.isPluginEnabled()},AddonModFeedbackModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_feedback-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModFeedbackIndexPage",l,r)}}},AddonModFeedbackModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModFeedbackModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=(t(135),function(e){function AddonModFeedbackLinkHandler(n,t){var o=e.call(this,n,"AddonModFeedback","feedback")||this;return o.feedbackProvider=t,o.name="AddonModFeedbackLinkHandler",o}return Object(o.__extends)(AddonModFeedbackLinkHandler,e),AddonModFeedbackLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.feedbackProvider.isPluginEnabled()},AddonModFeedbackLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(135),function(e){function AddonModFeedbackAnalysisLinkHandler(n,t,o,r){var i=e.call(this)||this;return i.linkHelper=n,i.feedbackProvider=t,i.courseProvider=o,i.domUtils=r,i.name="AddonModFeedbackAnalysisLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModFeedback",i.pattern=/\/mod\/feedback\/analysis\.php.*([\&\?]id=\d+)/,i}return Object(o.__extends)(AddonModFeedbackAnalysisLinkHandler,e),AddonModFeedbackAnalysisLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o=r.domUtils.showModalLoading();r.courseProvider.getModuleBasicInfo(t.id,e).then(function(t){return r.linkHelper.goInSite(n,"AddonModFeedbackIndexPage",{module:t,courseId:t.course,tab:"analysis"},e)}).finally(function(){o.dismiss()})}}]},AddonModFeedbackAnalysisLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.feedbackProvider.isPluginEnabled(e).then(function(e){return!!e&&void 0!==t.id})},AddonModFeedbackAnalysisLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(135),t(252),function(e){function AddonModFeedbackShowEntriesLinkHandler(n,t){var o=e.call(this)||this;return o.feedbackProvider=n,o.feedbackHelper=t,o.name="AddonModFeedbackShowEntriesLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModFeedback",o.pattern=/\/mod\/feedback\/show_entries\.php.*([\?\&](id|showcompleted)=\d+)/,o}return Object(o.__extends)(AddonModFeedbackShowEntriesLinkHandler,e),AddonModFeedbackShowEntriesLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){r.feedbackHelper.handleShowEntriesLink(n,t,e)}}]},AddonModFeedbackShowEntriesLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.feedbackProvider.isPluginEnabled(e).then(function(e){return!!e&&void 0!==t.id})},AddonModFeedbackShowEntriesLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(135),function(e){function AddonModFeedbackShowNonRespondentsLinkHandler(n,t,o,r){var i=e.call(this)||this;return i.linkHelper=n,i.feedbackProvider=t,i.courseProvider=o,i.domUtils=r,i.name="AddonModFeedbackShowNonRespondentsLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModFeedback",i.pattern=/\/mod\/feedback\/show_nonrespondents\.php.*([\?\&](id)=\d+)/,i}return Object(o.__extends)(AddonModFeedbackShowNonRespondentsLinkHandler,e),AddonModFeedbackShowNonRespondentsLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o=r.domUtils.showModalLoading();r.courseProvider.getModuleBasicInfo(t.id,e).then(function(t){return r.linkHelper.goInSite(n,"AddonModFeedbackNonRespondentsPage",{module:t,moduleId:t.id,courseId:t.course},e)}).finally(function(){o.dismiss()})}}]},AddonModFeedbackShowNonRespondentsLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.feedbackProvider.isPluginEnabled(e).then(function(e){return!!e&&void 0!==t.id})},AddonModFeedbackShowNonRespondentsLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(135),function(e){function AddonModFeedbackCompleteLinkHandler(n,t,o,r){var i=e.call(this)||this;return i.linkHelper=n,i.feedbackProvider=t,i.courseProvider=o,i.domUtils=r,i.name="AddonModFeedbackCompleteLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModFeedback",i.pattern=/\/mod\/feedback\/complete\.php.*([\?\&](id|gopage)=\d+)/,i}return Object(o.__extends)(AddonModFeedbackCompleteLinkHandler,e),AddonModFeedbackCompleteLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o=r.domUtils.showModalLoading();r.courseProvider.getModuleBasicInfo(t.id,e).then(function(o){var i={module:o,moduleId:o.id,courseId:o.course};return void 0===t.gopage&&(i.page=parseInt(t.gopage,10)),r.linkHelper.goInSite(n,"AddonModFeedbackFormPage",i,e)}).finally(function(){o.dismiss()})}}]},AddonModFeedbackCompleteLinkHandler.prototype.isEnabled=function(e,n,t,o){return void 0!==t.id&&this.feedbackProvider.isPluginEnabled(e)},AddonModFeedbackCompleteLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(135),function(e){function AddonModFeedbackPrintLinkHandler(n,t,o,r){var i=e.call(this)||this;return i.linkHelper=n,i.feedbackProvider=t,i.courseProvider=o,i.domUtils=r,i.name="AddonModFeedbackPrintLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModFeedback",i.pattern=/\/mod\/feedback\/print\.php.*([\?\&](id)=\d+)/,i}return Object(o.__extends)(AddonModFeedbackPrintLinkHandler,e),AddonModFeedbackPrintLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o=r.domUtils.showModalLoading();r.courseProvider.getModuleBasicInfo(t.id,e).then(function(t){return r.linkHelper.goInSite(n,"AddonModFeedbackFormPage",{module:t,moduleId:t.id,courseId:t.course,preview:!0},e)}).finally(function(){o.dismiss()})}}]},AddonModFeedbackPrintLinkHandler.prototype.isEnabled=function(e,n,t,o){return void 0!==t.id&&this.feedbackProvider.isPluginEnabled(e)},AddonModFeedbackPrintLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),t(135),function(e){function AddonModFeedbackListLinkHandler(n,t,o){var r=e.call(this,n,t,"AddonModFeedback","feedback")||this;return r.feedbackProvider=o,r.name="AddonModFeedbackListLinkHandler",r}return Object(o.__extends)(AddonModFeedbackListLinkHandler,e),AddonModFeedbackListLinkHandler.prototype.isEnabled=function(){return this.feedbackProvider.isPluginEnabled()},AddonModFeedbackListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(135),t(252);var o=function(){function AddonModFeedbackPushClickHandler(e,n,t,o,r){this.utils=e,this.feedbackHelper=n,this.urlUtils=t,this.courseHelper=o,this.feedbackProvider=r,this.name="AddonModFeedbackPushClickHandler",this.priority=200,this.featureName="CoreCourseModuleDelegate_AddonModFeedback"}return AddonModFeedbackPushClickHandler.prototype.handles=function(e){return!(!this.utils.isTrueOrOne(e.notif)||"mod_feedback"!=e.moodlecomponent||"submission"!=e.name&&"message"!=e.name)&&this.feedbackProvider.isPluginEnabled(e.site)},AddonModFeedbackPushClickHandler.prototype.handleClick=function(e){var n=this.urlUtils.extractUrlParams(e.contexturl),t=Number(e.courseid),o=Number(n.id);return"submission"==e.name?this.feedbackHelper.handleShowEntriesLink(void 0,n,e.site):this.courseHelper.navigateToModule(o,e.site,t)},AddonModFeedbackPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(285);var o=function(){function AddonModFeedbackSyncCronHandler(e){this.feedbackSync=e,this.name="AddonModFeedbackSyncCronHandler"}return AddonModFeedbackSyncCronHandler.prototype.execute=function(e,n){return this.feedbackSync.syncAllFeedbacks(e,n)},AddonModFeedbackSyncCronHandler.prototype.getInterval=function(){return this.feedbackSync.syncInterval},AddonModFeedbackSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(505),r=t(42),i=function(){function AddonModFolderModuleHandler(e){this.courseProvider=e,this.name="AddonModFolder",this.modName="folder",this.supportedFeatures=(n={},n[r.a.FEATURE_MOD_ARCHETYPE]=r.a.MOD_ARCHETYPE_RESOURCE,n[r.a.FEATURE_GROUPS]=!1,n[r.a.FEATURE_GROUPINGS]=!1,n[r.a.FEATURE_MOD_INTRO]=!0,n[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[r.a.FEATURE_GRADE_HAS_GRADE]=!1,n[r.a.FEATURE_GRADE_OUTCOMES]=!1,n[r.a.FEATURE_BACKUP_MOODLE2]=!0,n[r.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return AddonModFolderModuleHandler.prototype.isEnabled=function(){return!0},AddonModFolderModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_folder-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModFolderIndexPage",l,r)}}},AddonModFolderModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModFolderModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(244)),i=t(330),l=function(e){function AddonModFolderPrefetchHandler(n,t,o,r,l,s,a,u,d,c){var p=e.call(this,n,t,o,r,l,s,a,u,d)||this;return p.folderProvider=c,p.name="AddonModFolder",p.modName="folder",p.component=i.a.COMPONENT,p}return Object(o.__extends)(AddonModFolderPrefetchHandler,e),AddonModFolderPrefetchHandler.prototype.downloadOrPrefetch=function(n,t,o,r){var i=[];return i.push(e.prototype.downloadOrPrefetch.call(this,n,t,o)),this.folderProvider.isGetFolderWSAvailable()&&i.push(this.folderProvider.getFolder(t,n.id)),Promise.all(i)},AddonModFolderPrefetchHandler.prototype.invalidateContent=function(e,n){return this.folderProvider.invalidateContent(e,n)},AddonModFolderPrefetchHandler.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.folderProvider.invalidateFolderData(n)),t.push(this.courseProvider.invalidateModule(e.id)),Promise.all(t)},AddonModFolderPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModFolderLinkHandler(n){var t=e.call(this,n,"AddonModFolder","folder","f")||this;return t.name="AddonModFolderLinkHandler",t}return Object(o.__extends)(AddonModFolderLinkHandler,e),AddonModFolderLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModFolderListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModFolder","folder")||this;return o.name="AddonModFolderListLinkHandler",o}return Object(o.__extends)(AddonModFolderListLinkHandler,e),AddonModFolderListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModFolderPluginFileHandler(){this.name="AddonModFolderPluginFileHandler",this.component="mod_folder"}return AddonModFolderPluginFileHandler.prototype.getComponentRevisionRegExp=function(e){if("content"==e[2])return new RegExp("/mod_folder/content/([0-9]+)/")},AddonModFolderPluginFileHandler.prototype.getComponentRevisionReplace=function(e){return"/mod_folder/content/0/"},AddonModFolderPluginFileHandler.prototype.isEnabled=function(){return!0},AddonModFolderPluginFileHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(4);var o=t(136),r=t(506),i=t(42),l=function(){function AddonModForumModuleHandler(e,n,t,o,r){this.courseProvider=e,this.forumProvider=n,this.translate=t,this.eventsProvider=o,this.sitesProvider=r,this.name="AddonModForum",this.modName="forum",this.supportedFeatures=(l={},l[i.a.FEATURE_GROUPS]=!0,l[i.a.FEATURE_GROUPINGS]=!0,l[i.a.FEATURE_MOD_INTRO]=!0,l[i.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,l[i.a.FEATURE_COMPLETION_HAS_RULES]=!0,l[i.a.FEATURE_GRADE_HAS_GRADE]=!0,l[i.a.FEATURE_GRADE_OUTCOMES]=!0,l[i.a.FEATURE_BACKUP_MOODLE2]=!0,l[i.a.FEATURE_SHOW_DESCRIPTION]=!0,l[i.a.FEATURE_RATE]=!0,l[i.a.FEATURE_PLAGIARISM]=!0,l);var l}return AddonModForumModuleHandler.prototype.isEnabled=function(){return!0},AddonModForumModuleHandler.prototype.getData=function(e,n,t){var r=this,i={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_forum-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModForumIndexPage",l,r)}};if(void 0!==e.afterlink){i.extraBadgeColor="";var l=/>(\d+)[^<]+/.exec(e.afterlink);i.extraBadge=l?this.translate.instant("addon.mod_forum.unreadpostsnumber",{$a:l[1]}):""}else this.updateExtraBadge(i,n,e.id);var s=this.eventsProvider.on(o.a.MARK_READ_EVENT,function(t){t.courseId==n&&t.moduleId==e.id&&r.updateExtraBadge(i,t.courseId,t.moduleId,t.siteId)},this.sitesProvider.getCurrentSiteId());return i.onDestroy=function(){s&&s.off()},i},AddonModForumModuleHandler.prototype.getMainComponent=function(e,n){return r.a},AddonModForumModuleHandler.prototype.displayRefresherInSingleActivity=function(){return!1},AddonModForumModuleHandler.prototype.updateExtraBadge=function(e,n,t,o){var r=this;(o=o||this.sitesProvider.getCurrentSiteId())&&(e.extraBadge=this.translate.instant("core.loading"),e.extraBadgeColor="light",this.forumProvider.invalidateForumData(n).finally(function(){r.forumProvider.getForum(n,t,o).then(function(n){e.extraBadgeColor="",e.extraBadge=n.unreadpostscount?r.translate.instant("addon.mod_forum.unreadpostsnumber",{$a:n.unreadpostscount}):""}).catch(function(){e.extraBadgeColor="",e.extraBadge=""})}))},AddonModForumModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(254);var o=function(){function AddonModForumSyncCronHandler(e){this.forumSync=e,this.name="AddonModForumSyncCronHandler"}return AddonModForumSyncCronHandler.prototype.execute=function(e,n){return this.forumSync.syncAllForums(e,n)},AddonModForumSyncCronHandler.prototype.getInterval=function(){return this.forumSync.syncInterval},AddonModForumSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModForumIndexLinkHandler(n){var t=e.call(this,n,"AddonModForum","forum","f")||this;return t.name="AddonModForumIndexLinkHandler",t}return Object(o.__extends)(AddonModForumIndexLinkHandler,e),AddonModForumIndexLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=function(e){function AddonModForumDiscussionLinkHandler(n,t){var o=e.call(this)||this;return o.domUtils=n,o.linkHelper=t,o.name="AddonModForumDiscussionLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModForum",o.pattern=/\/mod\/forum\/discuss\.php.*([\&\?]d=\d+)/,o}return Object(o.__extends)(AddonModForumDiscussionLinkHandler,e),AddonModForumDiscussionLinkHandler.prototype.getActions=function(e,n,t,o,r){var i=this;return r=r||{},[{action:function(e,n){var l={courseId:o||parseInt(t.courseid,10)||parseInt(t.cid,10)||void 0,discussionId:parseInt(t.d,10),cmId:r.cmid&&parseInt(r.cmid,10),forumId:r.instance&&parseInt(r.instance,10)};(r.postid||t.urlHash)&&(l.postId=parseInt(r.postid||t.urlHash.replace("p",""))),i.linkHelper.goInSite(n,"AddonModForumDiscussionPage",l,e)}}]},AddonModForumDiscussionLinkHandler.prototype.isEnabled=function(e,n,t,o){return!0},AddonModForumDiscussionLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModForumListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModForum","forum")||this;return o.name="AddonModForumListLinkHandler",o}return Object(o.__extends)(AddonModForumListLinkHandler,e),AddonModForumListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=function(e){function AddonModForumPostLinkHandler(n,t,o){var r=e.call(this)||this;return r.linkHelper=n,r.courseProvider=t,r.domUtils=o,r.name="AddonModForumPostLinkHandler",r.featureName="CoreCourseModuleDelegate_AddonModForum",r.pattern=/\/mod\/forum\/post\.php.*([\?\&](forum)=\d+)/,r}return Object(o.__extends)(AddonModForumPostLinkHandler,e),AddonModForumPostLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o=r.domUtils.showModalLoading(),i=parseInt(t.forum,10);r.courseProvider.getModuleBasicInfoByInstance(i,"forum",e).then(function(t){return r.linkHelper.goInSite(n,"AddonModForumNewDiscussionPage",{courseId:t.course,cmId:t.id,forumId:t.instance,timeCreated:0},e)}).finally(function(){o.dismiss()})}}]},AddonModForumPostLinkHandler.prototype.isEnabled=function(e,n,t,o){return void 0!==t.forum},AddonModForumPostLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(136);var o=function(){function AddonModForumPushClickHandler(e,n,t,o){this.utils=e,this.forumProvider=n,this.urlUtils=t,this.linkHelper=o,this.name="AddonModForumPushClickHandler",this.priority=200,this.featureName="CoreCourseModuleDelegate_AddonModForum"}return AddonModForumPushClickHandler.prototype.handles=function(e){return this.utils.isTrueOrOne(e.notif)&&"mod_forum"==e.moodlecomponent&&"posts"==e.name},AddonModForumPushClickHandler.prototype.handleClick=function(e){var n=this,t=this.urlUtils.extractUrlParams(e.contexturl),o=e.customdata||{},r={courseId:Number(e.courseid),discussionId:Number(t.d||o.discussionid),cmId:Number(o.cmid),forumId:Number(o.instance)};return(o.postid||t.urlHash)&&(r.postId=Number(o.postid||t.urlHash.replace("p",""))),this.forumProvider.invalidateDiscussionPosts(r.discussionId,void 0,e.site).catch(function(){}).then(function(){return n.linkHelper.goInSite(void 0,"AddonModForumDiscussionPage",r,e.site)})},AddonModForumPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(225),r=function(){function AddonModForumTagAreaHandler(e){this.tagHelper=e,this.name="AddonModForumTagAreaHandler",this.type="mod_forum/forum_posts"}return AddonModForumTagAreaHandler.prototype.isEnabled=function(){return!0},AddonModForumTagAreaHandler.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},AddonModForumTagAreaHandler.prototype.getComponent=function(e){return o.a},AddonModForumTagAreaHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(508),r=t(42),i=function(){function AddonModGlossaryModuleHandler(e){this.courseProvider=e,this.name="AddonModGlossary",this.modName="glossary",this.supportedFeatures=(n={},n[r.a.FEATURE_GROUPS]=!1,n[r.a.FEATURE_GROUPINGS]=!1,n[r.a.FEATURE_MOD_INTRO]=!0,n[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[r.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[r.a.FEATURE_GRADE_HAS_GRADE]=!0,n[r.a.FEATURE_GRADE_OUTCOMES]=!0,n[r.a.FEATURE_BACKUP_MOODLE2]=!0,n[r.a.FEATURE_SHOW_DESCRIPTION]=!0,n[r.a.FEATURE_RATE]=!0,n[r.a.FEATURE_PLAGIARISM]=!0,n);var n}return AddonModGlossaryModuleHandler.prototype.isEnabled=function(){return!0},AddonModGlossaryModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_glossary-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModGlossaryIndexPage",l,r)}}},AddonModGlossaryModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModGlossaryModuleHandler.prototype.displayRefresherInSingleActivity=function(){return!1},AddonModGlossaryModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(363);var o=function(){function AddonModGlossarySyncCronHandler(e){this.glossarySync=e,this.name="AddonModGlossarySyncCronHandler"}return AddonModGlossarySyncCronHandler.prototype.execute=function(e,n){return this.glossarySync.syncAllGlossaries(e,n)},AddonModGlossarySyncCronHandler.prototype.getInterval=function(){return this.glossarySync.syncInterval},AddonModGlossarySyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=(t(205),function(e){function AddonModGlossaryIndexLinkHandler(n,t){var o=e.call(this,n,"AddonModGlossary","glossary","g")||this;return o.glossaryProvider=t,o.name="AddonModGlossaryIndexLinkHandler",o}return Object(o.__extends)(AddonModGlossaryIndexLinkHandler,e),AddonModGlossaryIndexLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(205),function(e){function AddonModGlossaryEntryLinkHandler(n,t,o,r){var i=e.call(this)||this;return i.domUtils=n,i.linkHelper=t,i.glossaryProvider=o,i.courseHelper=r,i.name="AddonModGlossaryEntryLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModGlossary",i.pattern=/\/mod\/glossary\/(showentry|view)\.php.*([\&\?](eid|g|mode|hook)=\d+)/,i}return Object(o.__extends)(AddonModGlossaryEntryLinkHandler,e),AddonModGlossaryEntryLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var i,l=r.domUtils.showModalLoading();i="entry"==t.mode?parseInt(t.hook,10):parseInt(t.eid,10);return(o?Promise.resolve(o):r.glossaryProvider.getEntry(i,e).catch(function(e){return r.domUtils.showErrorModalDefault(e,"addon.mod_glossary.errorloadingentry",!0),Promise.reject(null)}).then(function(n){return r.courseHelper.getModuleCourseIdByInstance(n.entry.glossaryid,"glossary",e)})).then(function(t){r.linkHelper.goInSite(n,"AddonModGlossaryEntryPage",{courseId:t,entryId:i},e)}).finally(function(){l.dismiss()})}}]},AddonModGlossaryEntryLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModGlossaryListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModGlossary","glossary")||this;return o.name="AddonModGlossaryListLinkHandler",o}return Object(o.__extends)(AddonModGlossaryListLinkHandler,e),AddonModGlossaryListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(205),function(e){function AddonModGlossaryEditLinkHandler(n,t,o,r){var i=e.call(this)||this;return i.linkHelper=n,i.courseProvider=t,i.domUtils=o,i.glossaryProvider=r,i.name="AddonModGlossaryEditLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModGlossary",i.pattern=/\/mod\/glossary\/edit\.php.*([\?\&](cmid)=\d+)/,i}return Object(o.__extends)(AddonModGlossaryEditLinkHandler,e),AddonModGlossaryEditLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o=r.domUtils.showModalLoading(),i=parseInt(t.cmid,10);r.courseProvider.getModuleBasicInfo(i,e).then(function(t){return r.glossaryProvider.getGlossary(t.course,t.id).then(function(o){r.linkHelper.goInSite(n,"AddonModGlossaryEditPage",{courseId:t.course,module:t,glossary:o,entry:null},e)})}).finally(function(){o.dismiss()})}}]},AddonModGlossaryEditLinkHandler.prototype.isEnabled=function(e,n,t,o){return void 0!==t.cmid},AddonModGlossaryEditLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(225),r=function(){function AddonModGlossaryTagAreaHandler(e){this.tagHelper=e,this.name="AddonModGlossaryTagAreaHandler",this.type="mod_glossary/glossary_entries"}return AddonModGlossaryTagAreaHandler.prototype.isEnabled=function(){return!0},AddonModGlossaryTagAreaHandler.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},AddonModGlossaryTagAreaHandler.prototype.getComponent=function(e){return o.a},AddonModGlossaryTagAreaHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(509),r=(t(237),t(42)),i=function(){function AddonModImscpModuleHandler(e,n){this.courseProvider=e,this.imscpProvider=n,this.name="AddonModImscp",this.modName="imscp",this.supportedFeatures=(t={},t[r.a.FEATURE_MOD_ARCHETYPE]=r.a.MOD_ARCHETYPE_RESOURCE,t[r.a.FEATURE_GROUPS]=!1,t[r.a.FEATURE_GROUPINGS]=!1,t[r.a.FEATURE_MOD_INTRO]=!0,t[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[r.a.FEATURE_GRADE_HAS_GRADE]=!1,t[r.a.FEATURE_GRADE_OUTCOMES]=!1,t[r.a.FEATURE_BACKUP_MOODLE2]=!0,t[r.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return AddonModImscpModuleHandler.prototype.isEnabled=function(){return this.imscpProvider.isPluginEnabled()},AddonModImscpModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_imscp-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModImscpIndexPage",l,r)}}},AddonModImscpModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModImscpModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=(t(237),function(e){function AddonModImscpLinkHandler(n,t){var o=e.call(this,n,"AddonModImscp","imscp","i")||this;return o.imscpProvider=t,o.name="AddonModImscpLinkHandler",o}return Object(o.__extends)(AddonModImscpLinkHandler,e),AddonModImscpLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.imscpProvider.isPluginEnabled()},AddonModImscpLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),t(237),function(e){function AddonModImscpListLinkHandler(n,t,o){var r=e.call(this,n,t,"AddonModImscp","imscp")||this;return r.imscpProvider=o,r.name="AddonModImscpListLinkHandler",r}return Object(o.__extends)(AddonModImscpListLinkHandler,e),AddonModImscpListLinkHandler.prototype.isEnabled=function(){return this.imscpProvider.isPluginEnabled()},AddonModImscpListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModImscpPluginFileHandler(){this.name="AddonModImscpPluginFileHandler",this.component="mod_imscp"}return AddonModImscpPluginFileHandler.prototype.getComponentRevisionRegExp=function(e){return"content"==e[2]?new RegExp("/mod_imscp/content/([0-9]+)/"):"backup"==e[2]?new RegExp("/mod_imscp/backup/([0-9]+)/"):null},AddonModImscpPluginFileHandler.prototype.getComponentRevisionReplace=function(e){return"/mod_imscp/"+e[2]+"/0/"},AddonModImscpPluginFileHandler.prototype.isEnabled=function(){return!0},AddonModImscpPluginFileHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(510),r=(t(170),t(42)),i=function(){function AddonModLessonModuleHandler(e,n){this.courseProvider=e,this.lessonProvider=n,this.name="AddonModLesson",this.modName="lesson",this.supportedFeatures=(t={},t[r.a.FEATURE_GROUPS]=!0,t[r.a.FEATURE_GROUPINGS]=!0,t[r.a.FEATURE_MOD_INTRO]=!0,t[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[r.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[r.a.FEATURE_GRADE_HAS_GRADE]=!0,t[r.a.FEATURE_GRADE_OUTCOMES]=!0,t[r.a.FEATURE_BACKUP_MOODLE2]=!0,t[r.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return AddonModLessonModuleHandler.prototype.isEnabled=function(){return this.lessonProvider.isPluginEnabled()},AddonModLessonModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_lesson-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModLessonIndexPage",l,r)}}},AddonModLessonModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModLessonModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(287);var o=function(){function AddonModLessonSyncCronHandler(e){this.lessonSync=e,this.name="AddonModLessonSyncCronHandler"}return AddonModLessonSyncCronHandler.prototype.execute=function(e,n){return this.lessonSync.syncAllLessons(e,n)},AddonModLessonSyncCronHandler.prototype.getInterval=function(){return this.lessonSync.syncInterval},AddonModLessonSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=(t(170),function(e){function AddonModLessonIndexLinkHandler(n,t,o,r){var i=e.call(this,n,"AddonModLesson","lesson")||this;return i.lessonProvider=t,i.domUtils=o,i.courseProvider=r,i.name="AddonModLessonIndexLinkHandler",i}return Object(o.__extends)(AddonModLessonIndexLinkHandler,e),AddonModLessonIndexLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return o=o||t.courseid||t.cid,[{action:function(e,n){t.userpassword?r.navigateToModuleWithPassword(parseInt(t.id,10),o,t.userpassword,e,n):r.courseHelper.navigateToModule(parseInt(t.id,10),e,o,void 0,void 0,void 0,n)}}]},AddonModLessonIndexLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.lessonProvider.isPluginEnabled()},AddonModLessonIndexLinkHandler.prototype.navigateToModuleWithPassword=function(e,n,t,o,r){var i=this,l=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(e,o).then(function(l){return n=n||l.course,i.lessonProvider.storePassword(parseInt(l.instance,10),t,o).catch(function(){}).then(function(){return i.courseHelper.navigateToModule(e,o,n,l.section,void 0,void 0,r)})}).catch(function(){return i.courseHelper.navigateToModule(e,o,n,void 0,void 0,void 0,r)}).finally(function(){l.dismiss()})},AddonModLessonIndexLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(454),i=(t(170),function(e){function AddonModLessonGradeLinkHandler(n,t,o,r,i,l){var s=e.call(this,n,t,o,"AddonModLesson","lesson")||this;return s.lessonProvider=r,s.courseProvider=i,s.linkHelper=l,s.name="AddonModLessonGradeLinkHandler",s.canReview=!0,s}return Object(o.__extends)(AddonModLessonGradeLinkHandler,e),AddonModLessonGradeLinkHandler.prototype.goToReview=function(e,n,t,o,r){var i,l=this,s=parseInt(n.id,10),a=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(s,o).then(function(e){return i=e,t=i.course||t||n.courseid||n.cid,l.lessonProvider.getAccessInformation(i.instance)}).then(function(e){if(e.canviewreports){var a={courseId:Number(t),lessonId:i.instance,userId:parseInt(n.userid,10)};l.linkHelper.goInSite(r,"AddonModLessonUserRetakePage",a,o)}else l.courseHelper.navigateToModule(s,o,t,i.section,void 0,void 0,r)}).catch(function(e){l.domUtils.showErrorModalDefault(e,"core.course.errorgetmodule",!0)}).finally(function(){a.dismiss()})},AddonModLessonGradeLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.lessonProvider.isPluginEnabled()},AddonModLessonGradeLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(170),function(e){function AddonModLessonReportLinkHandler(n,t,o,r,i){var l=e.call(this)||this;return l.domUtils=n,l.lessonProvider=t,l.courseHelper=o,l.linkHelper=r,l.courseProvider=i,l.name="AddonModLessonReportLinkHandler",l.featureName="CoreCourseModuleDelegate_AddonModLesson",l.pattern=/\/mod\/lesson\/report\.php.*([\&\?]id=\d+)/,l}return Object(o.__extends)(AddonModLessonReportLinkHandler,e),AddonModLessonReportLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return o=o||t.courseid||t.cid,[{action:function(e,n){t.action&&"reportoverview"!=t.action?"reportdetail"==t.action&&r.openUserRetake(parseInt(t.id,10),parseInt(t.userid,10),o,parseInt(t.try,10),e,n):r.openReportOverview(parseInt(t.id,10),o,parseInt(t.group,10),e,n)}}]},AddonModLessonReportLinkHandler.prototype.isEnabled=function(e,n,t,o){return!("reportdetail"==t.action&&!t.userid)&&this.lessonProvider.isPluginEnabled()},AddonModLessonReportLinkHandler.prototype.openReportOverview=function(e,n,t,o,r){var i=this,l=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(e,o).then(function(e){n=n||e.course;var l={module:e,courseId:Number(n),action:"report",group:isNaN(t)?null:t};i.linkHelper.goInSite(r,"AddonModLessonIndexPage",l,o)}).catch(function(e){i.domUtils.showErrorModalDefault(e,"Error processing link.")}).finally(function(){l.dismiss()})},AddonModLessonReportLinkHandler.prototype.openUserRetake=function(e,n,t,o,r,i){var l=this,s=this.domUtils.showModalLoading();return this.courseProvider.getModuleBasicInfo(e,r).then(function(e){t=t||e.course;var s={lessonId:e.instance,courseId:Number(t),userId:n,retake:o||0};l.linkHelper.goInSite(i,"AddonModLessonUserRetakePage",s,r)}).catch(function(e){l.domUtils.showErrorModalDefault(e,"Error processing link.")}).finally(function(){s.dismiss()})},AddonModLessonReportLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),t(170),function(e){function AddonModLessonListLinkHandler(n,t,o){var r=e.call(this,n,t,"AddonModLesson","lesson")||this;return r.lessonProvider=o,r.name="AddonModLessonListLinkHandler",r}return Object(o.__extends)(AddonModLessonListLinkHandler,e),AddonModLessonListLinkHandler.prototype.isEnabled=function(){return this.lessonProvider.isPluginEnabled()},AddonModLessonListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModLessonPushClickHandler(e,n,t){this.utils=e,this.gradesHelper=n,this.gradesProvider=t,this.name="AddonModLessonPushClickHandler",this.priority=200,this.featureName="CoreCourseModuleDelegate_AddonModLesson"}return AddonModLessonPushClickHandler.prototype.handles=function(e){return!(!this.utils.isTrueOrOne(e.notif)||"mod_lesson"!=e.moodlecomponent||"graded_essay"!=e.name)&&this.gradesProvider.isPluginEnabledForCourse(Number(e.courseid),e.site)},AddonModLessonPushClickHandler.prototype.handleClick=function(e){var n=e.customdata||{},t=Number(e.courseid),o=Number(n.cmid);return this.gradesHelper.goToGrades(t,void 0,o,void 0,e.site)},AddonModLessonPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(511),r=t(298),i=t(42),l=function(){function AddonModLtiModuleHandler(e,n,t,o,r,l,s){this.appProvider=e,this.courseProvider=n,this.domUtils=t,this.filepoolProvider=o,this.sitesProvider=r,this.ltiProvider=l,this.sanitizer=s,this.name="AddonModLti",this.modName="lti",this.supportedFeatures=(a={},a[i.a.FEATURE_GROUPS]=!1,a[i.a.FEATURE_GROUPINGS]=!1,a[i.a.FEATURE_MOD_INTRO]=!0,a[i.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,a[i.a.FEATURE_GRADE_HAS_GRADE]=!0,a[i.a.FEATURE_GRADE_OUTCOMES]=!0,a[i.a.FEATURE_BACKUP_MOODLE2]=!0,a[i.a.FEATURE_SHOW_DESCRIPTION]=!0,a);var a}return AddonModLtiModuleHandler.prototype.isEnabled=function(){return!0},AddonModLtiModuleHandler.prototype.getData=function(e,n,t){var o=this,i={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_lti-handler",action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModLtiIndexPage",l,r)},buttons:[{icon:"link",label:"addon.mod_lti.launchactivity",action:function(e,n,t,r){var i=o.domUtils.showModalLoading();o.ltiProvider.getLti(r,t.id).then(function(e){return o.ltiProvider.getLtiLaunchData(e.id).then(function(n){return o.ltiProvider.logView(e.id,e.name).then(function(){o.courseProvider.checkModuleCompletion(r,t.completiondata)}).catch(function(){}),o.ltiProvider.launch(n.endpoint,n.parameters)})}).catch(function(e){o.domUtils.showErrorModalDefault(e,"addon.mod_lti.errorgetlti",!0)}).finally(function(){i.dismiss()})}}]};return this.ltiProvider.getLti(n,e.id).then(function(n){var t=n.secureicon||n.icon;if(t){var l=o.sitesProvider.getCurrentSiteId();o.filepoolProvider.downloadUrl(l,t,!1,r.a.COMPONENT,e.id).then(function(){return o.filepoolProvider.getSrcByUrl(l,t,r.a.COMPONENT,e.id)}).then(function(e){i.icon=o.sanitizer.bypassSecurityTrustUrl(e)}).catch(function(){o.appProvider.isOnline()&&(i.icon=o.sanitizer.bypassSecurityTrustUrl(t))})}}).catch(function(){}),i},AddonModLtiModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModLtiModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModLtiLinkHandler(n){var t=e.call(this,n,"AddonModLti","lti","l")||this;return t.name="AddonModLtiLinkHandler",t}return Object(o.__extends)(AddonModLtiLinkHandler,e),AddonModLtiLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModLtiListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModLti","lti")||this;return o.name="AddonModLtiListLinkHandler",o}return Object(o.__extends)(AddonModLtiListLinkHandler,e),AddonModLtiListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(143)),i=t(298),l=function(e){function AddonModLtiPrefetchHandler(n,t,o,r,l,s,a,u,d,c){var p=e.call(this,n,t,o,r,l,s,a,u,d)||this;return p.ltiProvider=c,p.name="AddonModLti",p.modName="lti",p.component=i.a.COMPONENT,p}return Object(o.__extends)(AddonModLtiPrefetchHandler,e),AddonModLtiPrefetchHandler.prototype.download=function(e,n,t){return Promise.resolve()},AddonModLtiPrefetchHandler.prototype.invalidateModule=function(e,n){return this.ltiProvider.invalidateLti(n)},AddonModLtiPrefetchHandler.prototype.isDownloadable=function(e,n){return!1},AddonModLtiPrefetchHandler.prototype.prefetch=function(e,n,t,o){return Promise.resolve()},AddonModLtiPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(222);var o=t(512),r=t(42),i=function(){function AddonModPageModuleHandler(e,n){this.courseProvider=e,this.pageProvider=n,this.name="AddonModPage",this.modName="page",this.supportedFeatures=(t={},t[r.a.FEATURE_MOD_ARCHETYPE]=r.a.MOD_ARCHETYPE_RESOURCE,t[r.a.FEATURE_GROUPS]=!1,t[r.a.FEATURE_GROUPINGS]=!1,t[r.a.FEATURE_MOD_INTRO]=!0,t[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[r.a.FEATURE_GRADE_HAS_GRADE]=!1,t[r.a.FEATURE_GRADE_OUTCOMES]=!1,t[r.a.FEATURE_BACKUP_MOODLE2]=!0,t[r.a.FEATURE_SHOW_DESCRIPTION]=!0,t);var t}return AddonModPageModuleHandler.prototype.isEnabled=function(){return this.pageProvider.isPluginEnabled()},AddonModPageModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_page-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModPageIndexPage",l,r)}}},AddonModPageModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModPageModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=(t(222),function(e){function AddonModPageLinkHandler(n,t){var o=e.call(this,n,"AddonModPage","page","p")||this;return o.pageProvider=t,o.name="AddonModPageLinkHandler",o}return Object(o.__extends)(AddonModPageLinkHandler,e),AddonModPageLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.pageProvider.isPluginEnabled()},AddonModPageLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),t(222),function(e){function AddonModPageListLinkHandler(n,t,o){var r=e.call(this,n,t,"AddonModPage","page")||this;return r.pageProvider=o,r.name="AddonModPageListLinkHandler",r}return Object(o.__extends)(AddonModPageListLinkHandler,e),AddonModPageListLinkHandler.prototype.isEnabled=function(){return this.pageProvider.isPluginEnabled()},AddonModPageListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModPagePluginFileHandler(){this.name="AddonModPagePluginFileHandler",this.component="mod_page"}return AddonModPagePluginFileHandler.prototype.getComponentRevisionRegExp=function(e){if("content"==e[2])return new RegExp("/mod_page/content/([0-9]+)/")},AddonModPagePluginFileHandler.prototype.getComponentRevisionReplace=function(e){return"/mod_page/content/0/"},AddonModPagePluginFileHandler.prototype.isEnabled=function(){return!0},AddonModPagePluginFileHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(513),r=t(42),i=function(){function AddonModQuizModuleHandler(e){this.courseProvider=e,this.name="AddonModQuiz",this.modName="quiz",this.supportedFeatures=(n={},n[r.a.FEATURE_GROUPS]=!0,n[r.a.FEATURE_GROUPINGS]=!0,n[r.a.FEATURE_MOD_INTRO]=!0,n[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[r.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[r.a.FEATURE_GRADE_HAS_GRADE]=!0,n[r.a.FEATURE_GRADE_OUTCOMES]=!0,n[r.a.FEATURE_BACKUP_MOODLE2]=!0,n[r.a.FEATURE_SHOW_DESCRIPTION]=!0,n[r.a.FEATURE_CONTROLS_GRADE_VISIBILITY]=!0,n[r.a.FEATURE_USES_QUESTIONS]=!0,n);var n}return AddonModQuizModuleHandler.prototype.isEnabled=function(){return!0},AddonModQuizModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_quiz-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModQuizIndexPage",l,r)}}},AddonModQuizModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModQuizModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(259);var o=function(){function AddonModQuizSyncCronHandler(e){this.quizSync=e,this.name="AddonModQuizSyncCronHandler"}return AddonModQuizSyncCronHandler.prototype.execute=function(e,n){return this.quizSync.syncAllQuizzes(e,n)},AddonModQuizSyncCronHandler.prototype.getInterval=function(){return this.quizSync.syncInterval},AddonModQuizSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=(t(168),function(e){function AddonModQuizIndexLinkHandler(n,t){var o=e.call(this,n,"AddonModQuiz","quiz","q")||this;return o.quizProvider=t,o.name="AddonModQuizIndexLinkHandler",o}return Object(o.__extends)(AddonModQuizIndexLinkHandler,e),AddonModQuizIndexLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(454),i=(t(168),function(e){function AddonModQuizGradeLinkHandler(n,t,o,r){var i=e.call(this,n,t,o,"AddonModQuiz","quiz")||this;return i.quizProvider=r,i.name="AddonModQuizGradeLinkHandler",i.canReview=!1,i}return Object(o.__extends)(AddonModQuizGradeLinkHandler,e),AddonModQuizGradeLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.quizProvider.isPluginEnabled()},AddonModQuizGradeLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(168),t(253),function(e){function AddonModQuizReviewLinkHandler(n,t){var o=e.call(this)||this;return o.quizProvider=n,o.quizHelper=t,o.name="AddonModQuizReviewLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModQuiz",o.pattern=/\/mod\/quiz\/review\.php.*([\&\?]attempt=\d+)/,o}return Object(o.__extends)(AddonModQuizReviewLinkHandler,e),AddonModQuizReviewLinkHandler.prototype.getActions=function(e,n,t,o,r){var i=this;return o=o||t.courseid||t.cid,r=r||{},[{action:function(e,n){var l=parseInt(t.attempt,10),s=parseInt(t.page,10),a=r.instance&&parseInt(r.instance,10);i.quizHelper.handleReviewLink(n,l,s,o,a,e)}}]},AddonModQuizReviewLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.quizProvider.isPluginEnabled()},AddonModQuizReviewLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModQuizListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModQuiz","quiz")||this;return o.name="AddonModQuizListLinkHandler",o}return Object(o.__extends)(AddonModQuizListLinkHandler,e),AddonModQuizListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(168),t(253);var o=function(){function AddonModQuizPushClickHandler(e,n,t,o,r){this.utils=e,this.quizProvider=n,this.urlUtils=t,this.courseHelper=o,this.quizHelper=r,this.name="AddonModQuizPushClickHandler",this.priority=200,this.featureName="CoreCourseModuleDelegate_AddonModQuiz",this.SUPPORTED_NAMES=["submission","confirmation","attempt_overdue"]}return AddonModQuizPushClickHandler.prototype.handles=function(e){return this.utils.isTrueOrOne(e.notif)&&"mod_quiz"==e.moodlecomponent&&-1!=this.SUPPORTED_NAMES.indexOf(e.name)},AddonModQuizPushClickHandler.prototype.handleClick=function(e){var n=this,t=this.urlUtils.extractUrlParams(e.contexturl),o=e.customdata||{},r=Number(e.courseid);if("submission"==e.name)return this.quizHelper.handleReviewLink(void 0,Number(t.attempt),Number(t.page),r,Number(o.instance),e.site);var i=Number(t.id);return this.quizProvider.invalidateContent(i,r,e.site).catch(function(){}).then(function(){return n.courseHelper.navigateToModule(i,e.site,r)})},AddonModQuizPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1235),t(130);var o=function(){return function AddonModQuizAccessDelayBetweenAttemptsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModQuizAccessDelayBetweenAttemptsHandler(){this.name="AddonModQuizAccessDelayBetweenAttempts",this.ruleName="quizaccess_delaybetweenattempts"}return AddonModQuizAccessDelayBetweenAttemptsHandler.prototype.isEnabled=function(){return!0},AddonModQuizAccessDelayBetweenAttemptsHandler.prototype.isPreflightCheckRequired=function(e,n,t,o){return!1},AddonModQuizAccessDelayBetweenAttemptsHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1237),t(130);var o=function(){return function AddonModQuizAccessIpAddressModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModQuizAccessIpAddressHandler(){this.name="AddonModQuizAccessIpAddress",this.ruleName="quizaccess_ipaddress"}return AddonModQuizAccessIpAddressHandler.prototype.isEnabled=function(){return!0},AddonModQuizAccessIpAddressHandler.prototype.isPreflightCheckRequired=function(e,n,t,o){return!1},AddonModQuizAccessIpAddressHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1239),t(130);var o=function(){return function AddonModQuizAccessNumAttemptsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModQuizAccessNumAttemptsHandler(){this.name="AddonModQuizAccessNumAttempts",this.ruleName="quizaccess_numattempts"}return AddonModQuizAccessNumAttemptsHandler.prototype.isEnabled=function(){return!0},AddonModQuizAccessNumAttemptsHandler.prototype.isPreflightCheckRequired=function(e,n,t,o){return!1},AddonModQuizAccessNumAttemptsHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1241),t(661),t(130);var o=function(){return function AddonModQuizAccessOfflineAttemptsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(259);var o=t(661),r=function(){function AddonModQuizAccessOfflineAttemptsHandler(e){this.quizSync=e,this.name="AddonModQuizAccessOfflineAttempts",this.ruleName="quizaccess_offlineattempts"}return AddonModQuizAccessOfflineAttemptsHandler.prototype.getFixedPreflightData=function(e,n,t,o,r){n.confirmdatasaved=1},AddonModQuizAccessOfflineAttemptsHandler.prototype.getPreflightComponent=function(e){return o.a},AddonModQuizAccessOfflineAttemptsHandler.prototype.isEnabled=function(){return!0},AddonModQuizAccessOfflineAttemptsHandler.prototype.isPreflightCheckRequired=function(e,n,t,o){return!t&&(!n||Date.now()-this.quizSync.syncInterval>e.syncTime)},AddonModQuizAccessOfflineAttemptsHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1243),t(130);var o=function(){return function AddonModQuizAccessOpenCloseDateModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(168),r=function(){function AddonModQuizAccessOpenCloseDateHandler(){this.name="AddonModQuizAccessOpenCloseDate",this.ruleName="quizaccess_openclosedate"}return AddonModQuizAccessOpenCloseDateHandler.prototype.isEnabled=function(){return!0},AddonModQuizAccessOpenCloseDateHandler.prototype.isPreflightCheckRequired=function(e,n,t,o){return!1},AddonModQuizAccessOpenCloseDateHandler.prototype.shouldShowTimeLeft=function(e,n,t){return!(e.preview&&t>n)&&t>n-o.a.QUIZ_SHOW_TIME_BEFORE_DEADLINE},AddonModQuizAccessOpenCloseDateHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1245),t(662),t(130);var o=function(){return function AddonModQuizAccessPasswordModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(662),r=function(){function AddonModQuizAccessPasswordHandler(n){this.sitesProvider=n,this.siteSchema={name:"AddonModQuizAccessPasswordHandler",version:1,tables:[{name:e.PASSWORD_TABLE,columns:[{name:"id",type:"INTEGER",primaryKey:!0},{name:"password",type:"TEXT"},{name:"timemodified",type:"INTEGER"}]}]},this.name="AddonModQuizAccessPassword",this.ruleName="quizaccess_password",this.sitesProvider.registerSiteSchema(this.siteSchema)}return e=AddonModQuizAccessPasswordHandler,AddonModQuizAccessPasswordHandler.prototype.getFixedPreflightData=function(e,n,t,o,r){if(e&&e.id&&void 0===n.quizpassword)return this.getPasswordEntry(e.id,r).then(function(e){n.quizpassword=e.password}).catch(function(){})},AddonModQuizAccessPasswordHandler.prototype.getPasswordEntry=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().getRecord(e.PASSWORD_TABLE,{id:n})})},AddonModQuizAccessPasswordHandler.prototype.getPreflightComponent=function(e){return o.a},AddonModQuizAccessPasswordHandler.prototype.isEnabled=function(){return!0},AddonModQuizAccessPasswordHandler.prototype.isPreflightCheckRequired=function(e,n,t,o){return this.getPasswordEntry(e.id,o).then(function(){return!1}).catch(function(){return!0})},AddonModQuizAccessPasswordHandler.prototype.notifyPreflightCheckPassed=function(e,n,t,o,r){if(e&&e.id&&void 0!==t.quizpassword)return this.storePassword(e.id,t.quizpassword,r)},AddonModQuizAccessPasswordHandler.prototype.notifyPreflightCheckFailed=function(e,n,t,o,r){if(e&&e.id)return this.removePassword(e.id,r)},AddonModQuizAccessPasswordHandler.prototype.removePassword=function(n,t){return this.sitesProvider.getSite(t).then(function(t){return t.getDb().deleteRecords(e.PASSWORD_TABLE,{id:n})})},AddonModQuizAccessPasswordHandler.prototype.storePassword=function(n,t,o){return this.sitesProvider.getSite(o).then(function(o){var r={id:n,password:t,timemodified:Date.now()};return o.getDb().insertRecord(e.PASSWORD_TABLE,r)})},AddonModQuizAccessPasswordHandler.PASSWORD_TABLE="addon_mod_quiz_access_password",AddonModQuizAccessPasswordHandler;var e}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1247),t(130);var o=function(){return function AddonModQuizAccessSafeBrowserModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModQuizAccessSafeBrowserHandler(){this.name="AddonModQuizAccessSafeBrowser",this.ruleName="quizaccess_safebrowser"}return AddonModQuizAccessSafeBrowserHandler.prototype.isEnabled=function(){return!0},AddonModQuizAccessSafeBrowserHandler.prototype.isPreflightCheckRequired=function(e,n,t,o){return!1},AddonModQuizAccessSafeBrowserHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1249),t(130);var o=function(){return function AddonModQuizAccessSecureWindowModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModQuizAccessSecureWindowHandler(){this.name="AddonModQuizAccessSecureWindow",this.ruleName="quizaccess_securewindow"}return AddonModQuizAccessSecureWindowHandler.prototype.isEnabled=function(){return!0},AddonModQuizAccessSecureWindowHandler.prototype.isPreflightCheckRequired=function(e,n,t,o){return!1},AddonModQuizAccessSecureWindowHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1251),t(663),t(130);var o=function(){return function AddonModQuizAccessTimeLimitModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(663),r=function(){function AddonModQuizAccessTimeLimitHandler(){this.name="AddonModQuizAccessTimeLimit",this.ruleName="quizaccess_timelimit"}return AddonModQuizAccessTimeLimitHandler.prototype.getPreflightComponent=function(e){return o.a},AddonModQuizAccessTimeLimitHandler.prototype.isEnabled=function(){return!0},AddonModQuizAccessTimeLimitHandler.prototype.isPreflightCheckRequired=function(e,n,t,o){return!n},AddonModQuizAccessTimeLimitHandler.prototype.shouldShowTimeLeft=function(e,n,t){return!(e.preview&&t>n)},AddonModQuizAccessTimeLimitHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4),t(223),t(299);var o=t(514),r=t(42),i=function(){function AddonModResourceModuleHandler(e,n,t,o,i,l,s,a){this.resourceProvider=e,this.courseProvider=n,this.mimetypeUtils=t,this.resourceHelper=o,this.prefetchDelegate=i,this.textUtils=l,this.translate=s,this.timeUtils=a,this.name="AddonModResource",this.modName="resource",this.supportedFeatures=(u={},u[r.a.FEATURE_MOD_ARCHETYPE]=r.a.MOD_ARCHETYPE_RESOURCE,u[r.a.FEATURE_GROUPS]=!1,u[r.a.FEATURE_GROUPINGS]=!1,u[r.a.FEATURE_MOD_INTRO]=!0,u[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,u[r.a.FEATURE_GRADE_HAS_GRADE]=!1,u[r.a.FEATURE_GRADE_OUTCOMES]=!1,u[r.a.FEATURE_BACKUP_MOODLE2]=!0,u[r.a.FEATURE_SHOW_DESCRIPTION]=!0,u);var u}return AddonModResourceModuleHandler.prototype.isEnabled=function(){return this.resourceProvider.isPluginEnabled()},AddonModResourceModuleHandler.prototype.getData=function(e,n,t){var o=this,i={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_resource-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModResourceIndexPage",l,r)},updateStatus:function(n){i.buttons[0].hidden=n!==r.a.DOWNLOADED||o.resourceHelper.isDisplayedInIframe(e)}.bind(this),buttons:[{hidden:!0,icon:"document",label:"addon.mod_resource.openthefile",action:function(e,n,t,r){o.hideOpenButton(t,r).then(function(e){e||o.resourceHelper.openModuleFile(t,r)})}}]};return this.getResourceData(e,n,i).then(function(e){i.icon=e.icon,i.extraBadge=e.extra,i.extraBadgeColor="light"}),i},AddonModResourceModuleHandler.prototype.hideOpenButton=function(e,n){var t=this;return(e.contentsinfo?Promise.resolve():this.courseProvider.loadModuleContents(e,n,void 0,!1,!1,void 0,this.modName)).then(function(){return t.prefetchDelegate.getModuleStatus(e,n).then(function(n){return n!==r.a.DOWNLOADED||t.resourceHelper.isDisplayedInIframe(e)})})},AddonModResourceModuleHandler.prototype.getResourceData=function(e,n,t){var o=this,i=[],l=[],s={};return i.push(this.hideOpenButton(e,n).then(function(e){t.buttons[0].hidden=e})),void 0!==e.customdata?s=this.textUtils.unserialize(this.textUtils.parseJSON(e.customdata)):this.resourceProvider.isGetResourceWSAvailable()&&i.push(this.resourceProvider.getResourceData(n,e.id).then(function(e){l=e.contentfiles,s=o.textUtils.unserialize(e.displayoptions)})),Promise.all(i).then(function(){var n=e.contents&&e.contents.length?e.contents:l,t={icon:"",extra:""},i=[];if(e.contentsinfo){var a=e.contentsinfo.mimetypes[0];a&&(t.icon=o.mimetypeUtils.getMimetypeIcon(a)),t.extra=o.textUtils.cleanTags(e.afterlink)}else if(n&&n.length){var u=n[0];if(t.icon=o.mimetypeUtils.getFileIcon(u.filename),s.showsize){var d=void 0;d=s.filedetails?s.filedetails.size:n.reduce(function(e,n){return e+n.filesize},0),i.push(o.textUtils.bytesToSize(d,1))}s.showtype&&i.push(o.mimetypeUtils.getMimetypeDescription(u)),s.showdate&&i.push(s.filedetails&&s.filedetails.modifieddate?o.translate.instant("addon.mod_resource.modifieddate",{$a:o.timeUtils.userDate(1e3*s.filedetails.modifieddate,"core.strftimedatetimeshort")}):s.filedetails&&s.filedetails.uploadeddate?o.translate.instant("addon.mod_resource.uploadeddate",{$a:o.timeUtils.userDate(1e3*s.filedetails.uploadeddate,"core.strftimedatetimeshort")}):u.timemodified>u.timecreated+5*r.a.SECONDS_MINUTE?o.translate.instant("addon.mod_resource.modifieddate",{$a:o.timeUtils.userDate(1e3*u.timemodified,"core.strftimedatetimeshort")}):o.translate.instant("addon.mod_resource.uploadeddate",{$a:o.timeUtils.userDate(1e3*u.timecreated,"core.strftimedatetimeshort")})),t.extra+=i.join(" ")}return""==t.icon&&(t.icon=o.courseProvider.getModuleIconSrc(o.modName,e.modicon)),t})},AddonModResourceModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModResourceModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=(t(223),function(e){function AddonModResourceLinkHandler(n,t){var o=e.call(this,n,"AddonModResource","resource","r")||this;return o.resourceProvider=t,o.name="AddonModResourceLinkHandler",o}return Object(o.__extends)(AddonModResourceLinkHandler,e),AddonModResourceLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.resourceProvider.isPluginEnabled()},AddonModResourceLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),t(223),function(e){function AddonModResourceListLinkHandler(n,t,o){var r=e.call(this,n,t,"AddonModResource","resource")||this;return r.resourceProvider=o,r.name="AddonModResourceListLinkHandler",r}return Object(o.__extends)(AddonModResourceListLinkHandler,e),AddonModResourceListLinkHandler.prototype.isEnabled=function(){return this.resourceProvider.isPluginEnabled()},AddonModResourceListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonModResourcePluginFileHandler(){this.name="AddonModResourcePluginFileHandler",this.component="mod_resource"}return AddonModResourcePluginFileHandler.prototype.getComponentRevisionRegExp=function(e){if("content"==e[2])return new RegExp("/mod_resource/content/([0-9]+)/")},AddonModResourcePluginFileHandler.prototype.getComponentRevisionReplace=function(e){return"/mod_resource/content/0/"},AddonModResourcePluginFileHandler.prototype.isEnabled=function(){return!0},AddonModResourcePluginFileHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(515),r=t(42),i=function(){function AddonModScormModuleHandler(e){this.courseProvider=e,this.name="AddonModScorm",this.modName="scorm",this.supportedFeatures=(n={},n[r.a.FEATURE_GROUPS]=!0,n[r.a.FEATURE_GROUPINGS]=!0,n[r.a.FEATURE_MOD_INTRO]=!0,n[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[r.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[r.a.FEATURE_GRADE_HAS_GRADE]=!0,n[r.a.FEATURE_GRADE_OUTCOMES]=!0,n[r.a.FEATURE_BACKUP_MOODLE2]=!0,n[r.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return AddonModScormModuleHandler.prototype.isEnabled=function(){return!0},AddonModScormModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_scorm-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModScormIndexPage",l,r)}}},AddonModScormModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModScormModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(288);var o=function(){function AddonModScormSyncCronHandler(e){this.scormSync=e,this.name="AddonModScormSyncCronHandler"}return AddonModScormSyncCronHandler.prototype.execute=function(e,n){return this.scormSync.syncAllScorms(e,n)},AddonModScormSyncCronHandler.prototype.getInterval=function(){return this.scormSync.syncInterval},AddonModScormSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModScormIndexLinkHandler(n){var t=e.call(this,n,"AddonModScorm","scorm","a")||this;return t.name="AddonModScormIndexLinkHandler",t}return Object(o.__extends)(AddonModScormIndexLinkHandler,e),AddonModScormIndexLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(454),i=function(e){function AddonModScormGradeLinkHandler(n,t,o){var r=e.call(this,n,t,o,"AddonModScorm","scorm")||this;return r.name="AddonModScormGradeLinkHandler",r.canReview=!1,r}return Object(o.__extends)(AddonModScormGradeLinkHandler,e),AddonModScormGradeLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModScormListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModScorm","scorm")||this;return o.name="AddonModScormListLinkHandler",o}return Object(o.__extends)(AddonModScormListLinkHandler,e),AddonModScormListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(516),r=t(42),i=function(){function AddonModSurveyModuleHandler(e){this.courseProvider=e,this.name="AddonModSurvey",this.modName="survey",this.supportedFeatures=(n={},n[r.a.FEATURE_GROUPS]=!0,n[r.a.FEATURE_GROUPINGS]=!0,n[r.a.FEATURE_MOD_INTRO]=!0,n[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[r.a.FEATURE_COMPLETION_HAS_RULES]=!0,n[r.a.FEATURE_GRADE_HAS_GRADE]=!1,n[r.a.FEATURE_GRADE_OUTCOMES]=!1,n[r.a.FEATURE_BACKUP_MOODLE2]=!0,n[r.a.FEATURE_SHOW_DESCRIPTION]=!0,n);var n}return AddonModSurveyModuleHandler.prototype.isEnabled=function(){return!0},AddonModSurveyModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_survey-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModSurveyIndexPage",l,r)}}},AddonModSurveyModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModSurveyModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModSurveyLinkHandler(n){var t=e.call(this,n,"AddonModSurvey","survey")||this;return t.name="AddonModSurveyLinkHandler",t}return Object(o.__extends)(AddonModSurveyLinkHandler,e),AddonModSurveyLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModSurveyListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModSurvey","survey")||this;return o.name="AddonModSurveyListLinkHandler",o}return Object(o.__extends)(AddonModSurveyListLinkHandler,e),AddonModSurveyListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(302);var o=function(){function AddonModSurveySyncCronHandler(e){this.surveySync=e,this.name="AddonModSurveySyncCronHandler"}return AddonModSurveySyncCronHandler.prototype.execute=function(e,n){return this.surveySync.syncAllSurveys(e,n)},AddonModSurveySyncCronHandler.prototype.getInterval=function(){return this.surveySync.syncInterval},AddonModSurveySyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(517),r=(t(336),t(42)),i=function(){function AddonModUrlModuleHandler(e,n,t,o,i){this.courseProvider=e,this.urlProvider=n,this.urlHelper=t,this.domUtils=o,this.contentLinksHelper=i,this.name="AddonModUrl",this.modName="url",this.supportedFeatures=(l={},l[r.a.FEATURE_MOD_ARCHETYPE]=r.a.MOD_ARCHETYPE_RESOURCE,l[r.a.FEATURE_GROUPS]=!1,l[r.a.FEATURE_GROUPINGS]=!1,l[r.a.FEATURE_MOD_INTRO]=!0,l[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,l[r.a.FEATURE_GRADE_HAS_GRADE]=!1,l[r.a.FEATURE_GRADE_OUTCOMES]=!1,l[r.a.FEATURE_BACKUP_MOODLE2]=!0,l[r.a.FEATURE_SHOW_DESCRIPTION]=!0,l);var l}return AddonModUrlModuleHandler.prototype.isEnabled=function(){return!0},AddonModUrlModuleHandler.prototype.getData=function(e,n,t){var o=this,i=this,l={icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_url-handler",showDownloadButton:!1,action:function(e,n,t,o,l,s){var a=i.domUtils.showModalLoading();i.courseProvider.loadModuleContents(t,o,void 0,!1,!1,void 0,i.modName).then(function(){return i.contentLinksHelper.canHandleLink(t.contents[0].fileurl,o,void 0,!0)}).then(function(e){return!!e||!!i.urlProvider.isGetUrlWSAvailable()&&i.urlProvider.getUrl(o,t.id).catch(function(){}).then(function(e){var n=i.urlProvider.getFinalDisplayType(e);return n==r.a.RESOURCELIB_DISPLAY_OPEN||n==r.a.RESOURCELIB_DISPLAY_POPUP})}).then(function(e){if(e)i.openUrl(t,o);else{var r={module:t,courseId:o};s&&Object.assign(r,s),n.push("AddonModUrlIndexPage",r,l)}}).finally(function(){a.dismiss()})},buttons:[{hidden:!0,icon:"link",label:"core.openinbrowser",action:function(e,n,t,o){i.openUrl(t,o)}}]};return this.hideLinkButton(e,n).then(function(n){l.buttons[0].hidden=n,e.contents&&e.contents[0]&&(l.icon=o.urlProvider.guessIcon(e.contents[0].fileurl)||o.courseProvider.getModuleIconSrc(o.modName,e.modicon))}),l},AddonModUrlModuleHandler.prototype.hideLinkButton=function(e,n){return this.courseProvider.loadModuleContents(e,n,void 0,!1,!1,void 0,this.modName).then(function(){return!(e.contents&&e.contents[0]&&e.contents[0].fileurl)}).catch(function(){return!0})},AddonModUrlModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModUrlModuleHandler.prototype.openUrl=function(e,n){var t=this;this.urlProvider.logView(e.instance,e.name).then(function(){t.courseProvider.checkModuleCompletion(n,e.completiondata)}).catch(function(){}),this.urlHelper.open(e.contents[0].fileurl)},AddonModUrlModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModUrlLinkHandler(n){var t=e.call(this,n,"AddonModUrl","url","u")||this;return t.name="AddonModUrlLinkHandler",t.useModNameToGetModule=!0,t}return Object(o.__extends)(AddonModUrlLinkHandler,e),AddonModUrlLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModUrlListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModUrl","url")||this;return o.name="AddonModUrlListLinkHandler",o}return Object(o.__extends)(AddonModUrlListLinkHandler,e),AddonModUrlListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(244)),i=t(303),l=function(e){function AddonModUrlPrefetchHandler(n,t,o,r,l,s,a,u,d){var c=e.call(this,n,t,o,r,l,s,a,u,d)||this;return c.name="AddonModUrl",c.modName="url",c.component=i.a.COMPONENT,c}return Object(o.__extends)(AddonModUrlPrefetchHandler,e),AddonModUrlPrefetchHandler.prototype.download=function(e,n,t){return Promise.resolve()},AddonModUrlPrefetchHandler.prototype.invalidateModule=function(e,n){return this.courseProvider.invalidateModule(e.id,void 0,this.modName)},AddonModUrlPrefetchHandler.prototype.isDownloadable=function(e,n){return!1},AddonModUrlPrefetchHandler.prototype.prefetch=function(e,n,t,o){return Promise.resolve()},AddonModUrlPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(518),r=t(42),i=function(){function AddonModWikiModuleHandler(e){this.courseProvider=e,this.name="AddonModWiki",this.modName="wiki",this.supportedFeatures=(n={},n[r.a.FEATURE_GROUPS]=!0,n[r.a.FEATURE_GROUPINGS]=!0,n[r.a.FEATURE_MOD_INTRO]=!0,n[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,n[r.a.FEATURE_GRADE_HAS_GRADE]=!1,n[r.a.FEATURE_GRADE_OUTCOMES]=!1,n[r.a.FEATURE_BACKUP_MOODLE2]=!0,n[r.a.FEATURE_SHOW_DESCRIPTION]=!0,n[r.a.FEATURE_RATE]=!1,n[r.a.FEATURE_COMMENT]=!0,n);var n}return AddonModWikiModuleHandler.prototype.isEnabled=function(){return!0},AddonModWikiModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_wiki-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModWikiIndexPage",l,r)}}},AddonModWikiModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModWikiModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(143)),i=t(235),l=(t(290),function(e){function AddonModWikiPrefetchHandler(n,t,o,r,l,s,a,u,d,c,p,f,h,m,_){var g=e.call(this,n,t,o,r,l,s,a,u,d)||this;return g.wikiProvider=c,g.userProvider=p,g.textUtils=f,g.courseHelper=h,g.groupsProvider=m,g.syncProvider=_,g.name="AddonModWiki",g.modName="wiki",g.component=i.a.COMPONENT,g.updatesNames=/^.*files$|^pages$/,g}return Object(o.__extends)(AddonModWikiPrefetchHandler,e),AddonModWikiPrefetchHandler.prototype.getAllPages=function(e,n,t,o,r){var i=this;return r=r||this.sitesProvider.getCurrentSiteId(),this.wikiProvider.getWiki(n,e.id,t,r).then(function(e){return i.wikiProvider.getWikiPageList(e,t,o,r)}).catch(function(){return[]})},AddonModWikiPrefetchHandler.prototype.getDownloadSize=function(e,n,t){var o=this,r=[],i=this.sitesProvider.getCurrentSiteId();return r.push(this.getFiles(e,n,t,i).then(function(e){return o.pluginFileDelegate.getFilesSize(e)})),r.push(this.getAllPages(e,n,!1,!0,i).then(function(e){var n=0;return e.forEach(function(e){e.contentsize&&(n+=e.contentsize)}),{size:n,total:!0}})),Promise.all(r).then(function(e){return e.reduce(function(e,n){return{size:e.size+n.size,total:e.total&&n.total}},{size:0,total:!0})})},AddonModWikiPrefetchHandler.prototype.getFiles=function(e,n,t,o){var r=this;return o=o||this.sitesProvider.getCurrentSiteId(),this.wikiProvider.getWiki(n,e.id,!1,o).then(function(n){var t=r.getIntroFilesFromInstance(e,n);return r.wikiProvider.getWikiFileList(n,!1,!1,o).then(function(e){return t.concat(e)})}).catch(function(){return[]})},AddonModWikiPrefetchHandler.prototype.invalidateContent=function(e,n){return this.wikiProvider.invalidateContent(e,n)},AddonModWikiPrefetchHandler.prototype.prefetch=function(e,n,t,o){var r=this,i=this.sitesProvider.getCurrentSiteId();return this.filepoolProvider.getPackageData(i,this.component,e.id).catch(function(){}).then(function(o){var l=o&&o.downloadTime||0;return r.prefetchPackage(e,n,t,r.prefetchWiki.bind(r),i,[l])})},AddonModWikiPrefetchHandler.prototype.prefetchWiki=function(e,n,t,o,r){var i=this,l=this.sitesProvider.getCurrentSiteUserId();return this.getAllPages(e,n,!1,!0,o).then(function(s){var a=[];return s.forEach(function(e){e.timemodified>r&&a.push(i.wikiProvider.getPageContents(e.id,!1,!0,o))}),a.push(i.groupsProvider.getActivityGroupInfo(e.id,!1,l,o)),a.push(i.wikiProvider.getWiki(n,e.id,!1,o).then(function(e){return i.courseHelper.getModuleCourseIdByInstance(e.id,"wiki",o)})),a.push(i.getFiles(e,n,t,o).then(function(n){return i.filepoolProvider.addFilesToQueue(o,n,i.component,e.id)})),Promise.all(a)})},AddonModWikiPrefetchHandler.prototype.sync=function(e,n,t){return this.syncProvider.syncWiki(e.instance,e.course,e.id,t)},AddonModWikiPrefetchHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(290);var o=function(){function AddonModWikiSyncCronHandler(e){this.wikiSync=e,this.name="AddonModWikiSyncCronHandler"}return AddonModWikiSyncCronHandler.prototype.execute=function(e,n){return this.wikiSync.syncAllWikis(e,n)},AddonModWikiSyncCronHandler.prototype.getInterval=function(){return this.wikiSync.syncInterval},AddonModWikiSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModWikiIndexLinkHandler(n){var t=e.call(this,n,"AddonModWiki","wiki","wid")||this;return t.name="AddonModWikiIndexLinkHandler",t}return Object(o.__extends)(AddonModWikiIndexLinkHandler,e),AddonModWikiIndexLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(235),function(e){function AddonModWikiPageOrMapLinkHandler(n,t,o,r){var i=e.call(this)||this;return i.domUtils=n,i.wikiProvider=t,i.courseHelper=o,i.linkHelper=r,i.name="AddonModWikiPageOrMapLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModWiki",i.pattern=/\/mod\/wiki\/(view|map)\.php.*([\&\?]pageid=\d+)/,i}return Object(o.__extends)(AddonModWikiPageOrMapLinkHandler,e),AddonModWikiPageOrMapLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return o=o||t.courseid||t.cid,[{action:function(e,i){var l=r.domUtils.showModalLoading(),s=parseInt(t.pageid,10),a=-1!=n.indexOf("mod/wiki/map.php")?"map":"page";r.wikiProvider.getPageContents(s,!1,!1,e).then(function(n){return(o?Promise.resolve(o):r.courseHelper.getModuleCourseIdByInstance(n.wikiid,"wiki",e)).then(function(t){r.linkHelper.goInSite(i,"AddonModWikiIndexPage",{courseId:t,pageId:n.id,pageTitle:n.title,wikiId:n.wikiid,subwikiId:n.subwikiid,action:a},e)})}).catch(function(e){r.domUtils.showErrorModalDefault(e,"addon.mod_wiki.errorloadingpage",!0)}).finally(function(){l.dismiss()})}}]},AddonModWikiPageOrMapLinkHandler.prototype.isEnabled=function(e,n,t,o){var r=-1!=n.indexOf("mod/wiki/map.php");return!(t.id&&!r)&&(!r||void 0===t.option||5==t.option)},AddonModWikiPageOrMapLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(235),function(e){function AddonModWikiCreateLinkHandler(n,t,o,r,i){var l=e.call(this)||this;return l.domUtils=n,l.wikiProvider=t,l.courseHelper=o,l.linkHelper=r,l.courseProvider=i,l.name="AddonModWikiCreateLinkHandler",l.featureName="CoreCourseModuleDelegate_AddonModWiki",l.pattern=/\/mod\/wiki\/create\.php.*([\&\?]swid=\d+)/,l}return Object(o.__extends)(AddonModWikiCreateLinkHandler,e),AddonModWikiCreateLinkHandler.prototype.currentStateIsSameWiki=function(e,n,t){var o=this;if(e&&"AddonModWikiIndexPage"==e.component.name){if(e.data.subwikiId==n)return Promise.resolve(!0);if(e.data.pageId)return this.wikiProvider.getPageContents(e.data.pageId,!1,!1,t).then(function(e){return e.subwikiid==n}).catch(function(){return!1});if(e.data.wikiId)return this.wikiProvider.wikiHasSubwiki(e.data.wikiId,n,!1,!1,t);if(e.data.courseId&&e.data.module){var r=e.data.module&&e.data.module.id;if(r)return this.wikiProvider.getWiki(e.data.courseId,r,!1,t).then(function(e){return o.wikiProvider.wikiHasSubwiki(e.id,n,!1,!1,t)}).catch(function(){return!1})}}return Promise.resolve(!1)},AddonModWikiCreateLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return o=o||t.courseid||t.cid,[{action:function(e,n){var i=r.domUtils.showModalLoading(),l=parseInt(t.swid,10),s=n&&n.getActive();r.currentStateIsSameWiki(s,l,e).then(function(n){if(n){if(s&&s.data.module&&s.data.module.id)return s.data.module;if(s&&s.data.wikiId)return r.courseProvider.getModuleBasicInfoByInstance(s.data.wikiId,"wiki",e).catch(function(){})}}).then(function(i){r.linkHelper.goInSite(n,"AddonModWikiEditPage",{module:i,courseId:o||i&&i.course||s&&s.data.courseId,pageTitle:t.title,subwikiId:l},e)}).finally(function(){i.dismiss()})}}]},AddonModWikiCreateLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=function(e){function AddonModWikiEditLinkHandler(n,t){var o=e.call(this)||this;return o.linkHelper=n,o.textUtils=t,o.name="AddonModWikiEditLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModWiki",o.pattern=/\/mod\/wiki\/edit\.php.*([\&\?]pageid=\d+)/,o}return Object(o.__extends)(AddonModWikiEditLinkHandler,e),AddonModWikiEditLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return o=o||t.courseid||t.cid,[{action:function(e,n){var i="";void 0!==t.section&&(i=t.section.replace(/\+/g," "));var l={courseId:o,section:i,pageId:parseInt(t.pageid,10)};r.linkHelper.goInSite(n,"AddonModWikiEditPage",l,e)}}]},AddonModWikiEditLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),function(e){function AddonModWikiListLinkHandler(n,t){var o=e.call(this,n,t,"AddonModWiki","wiki")||this;return o.name="AddonModWikiListLinkHandler",o}return Object(o.__extends)(AddonModWikiListLinkHandler,e),AddonModWikiListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(225),r=function(){function AddonModWikiTagAreaHandler(e){this.tagHelper=e,this.name="AddonModWikiTagAreaHandler",this.type="mod_wiki/wiki_pages"}return AddonModWikiTagAreaHandler.prototype.isEnabled=function(){return!0},AddonModWikiTagAreaHandler.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},AddonModWikiTagAreaHandler.prototype.getComponent=function(e){return o.a},AddonModWikiTagAreaHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1279),t(1281),t(1283),t(1285);var o=function(){return function AddonModWorkshopAssessmentStrategyModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(672),t(1280),t(193);var o=function(){return function AddonModWorkshopAssessmentStrategyAccumulativeModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(672),r=function(){function AddonModWorkshopAssessmentStrategyAccumulativeHandler(e,n){this.translate=e,this.gradesHelper=n,this.name="AddonModWorkshopAssessmentStrategyAccumulative",this.strategyName="accumulative"}return AddonModWorkshopAssessmentStrategyAccumulativeHandler.prototype.isEnabled=function(){return!0},AddonModWorkshopAssessmentStrategyAccumulativeHandler.prototype.getComponent=function(e){return o.a},AddonModWorkshopAssessmentStrategyAccumulativeHandler.prototype.getOriginalValues=function(e,n){var t=this,o=this.translate.instant("core.choosedots"),r=[],i=[];return e.fields.forEach(function(n,l){n.dimtitle=t.translate.instant("addon.mod_workshop_assessment_accumulative.dimensionnumber",{$a:n.number}),e.current[l]||(e.current[l]={}),r[l]={peercomment:e.current[l].peercomment||"",number:n.number},e.current[l].grade=e.current[l].grade?parseInt(e.current[l].grade,10):-1;var s=parseInt(n.grade,10),a=e.dimensionsinfo.find(function(e){return e.id==n.dimensionid});i.push(t.gradesHelper.makeGradesMenu(s,void 0,o,-1,a&&s<0?a.scale:null).then(function(t){n.grades=t,r[l].grade=e.current[l].grade}))}),Promise.all(i).then(function(){return r})},AddonModWorkshopAssessmentStrategyAccumulativeHandler.prototype.hasDataChanged=function(e,n){for(var t in e){if(e[t].grade!=n[t].grade)return!0;if(e[t].peercomment!=n[t].peercomment)return!0}return!1},AddonModWorkshopAssessmentStrategyAccumulativeHandler.prototype.prepareAssessmentData=function(e,n){var t=this,o={},r={},i=!1;return n.fields.forEach(function(l,s){if(s<n.dimenssionscount){var a=parseInt(e[s].grade,10);!isNaN(a)&&a>=0?o["grade__idx_"+s]=a:(r["grade_"+s]=t.translate.instant("addon.mod_workshop_assessment_accumulative.mustchoosegrade"),i=!0),e[s].peercomment&&(o["peercomment__idx_"+s]=e[s].peercomment),o["gradeid__idx_"+s]=parseInt(n.current[s].gradeid,10)||0,o["dimensionid__idx_"+s]=parseInt(l.dimensionid,10),o["weight__idx_"+s]=parseInt(l.weight,10)||0}}),i?Promise.reject(r):Promise.resolve(o)},AddonModWorkshopAssessmentStrategyAccumulativeHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(673),t(1282),t(193);var o=function(){return function AddonModWorkshopAssessmentStrategyCommentsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(673),r=function(){function AddonModWorkshopAssessmentStrategyCommentsHandler(e){this.translate=e,this.name="AddonModWorkshopAssessmentStrategyComments",this.strategyName="comments"}return AddonModWorkshopAssessmentStrategyCommentsHandler.prototype.isEnabled=function(){return!0},AddonModWorkshopAssessmentStrategyCommentsHandler.prototype.getComponent=function(e){return o.a},AddonModWorkshopAssessmentStrategyCommentsHandler.prototype.getOriginalValues=function(e,n){var t=this,o=[];return e.fields.forEach(function(n,r){n.dimtitle=t.translate.instant("addon.mod_workshop_assessment_comments.dimensionnumber",{$a:n.number}),e.current[r]||(e.current[r]={}),o[r]={peercomment:e.current[r].peercomment||"",number:n.number}}),Promise.resolve(o)},AddonModWorkshopAssessmentStrategyCommentsHandler.prototype.hasDataChanged=function(e,n){for(var t in e)if(e[t].peercomment!=n[t].peercomment)return!0;return!1},AddonModWorkshopAssessmentStrategyCommentsHandler.prototype.prepareAssessmentData=function(e,n){var t=this,o={},r={},i=!1;return n.fields.forEach(function(l,s){s<n.dimenssionscount&&(e[s].peercomment?o["peercomment__idx_"+s]=e[s].peercomment:(r["peercomment_"+s]=t.translate.instant("core.err_required"),i=!0),o["gradeid__idx_"+s]=parseInt(n.current[s].gradeid,10)||0,o["dimensionid__idx_"+s]=parseInt(l.dimensionid,10))}),i?Promise.reject(r):Promise.resolve(o)},AddonModWorkshopAssessmentStrategyCommentsHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(674),t(1284),t(193);var o=function(){return function AddonModWorkshopAssessmentStrategyNumErrorsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(674),r=function(){function AddonModWorkshopAssessmentStrategyNumErrorsHandler(e){this.translate=e,this.name="AddonModWorkshopAssessmentStrategyNumErrors",this.strategyName="numerrors"}return AddonModWorkshopAssessmentStrategyNumErrorsHandler.prototype.isEnabled=function(){return!0},AddonModWorkshopAssessmentStrategyNumErrorsHandler.prototype.getComponent=function(e){return o.a},AddonModWorkshopAssessmentStrategyNumErrorsHandler.prototype.getOriginalValues=function(e,n){var t=this,o=[];return e.fields.forEach(function(n,r){n.dimtitle=t.translate.instant("addon.mod_workshop_assessment_numerrors.dimensionnumber",{$a:n.number}),e.current[r]||(e.current[r]={}),o[r]={peercomment:e.current[r].peercomment||"",number:n.number,grade:e.current[r].grade||""}}),Promise.resolve(o)},AddonModWorkshopAssessmentStrategyNumErrorsHandler.prototype.hasDataChanged=function(e,n){for(var t in e){if(e[t].grade!=n[t].grade)return!0;if(e[t].peercomment!=n[t].peercomment)return!0}return!1},AddonModWorkshopAssessmentStrategyNumErrorsHandler.prototype.prepareAssessmentData=function(e,n){var t=this,o={},r={},i=!1;return n.fields.forEach(function(l,s){if(s<n.dimenssionscount){var a=parseInt(e[s].grade);isNaN(a)||1!=a&&-1!=a?(r["grade_"+s]=t.translate.instant("core.required"),i=!0):o["grade__idx_"+s]=a,e[s].peercomment&&(o["peercomment__idx_"+s]=e[s].peercomment),o["gradeid__idx_"+s]=parseInt(n.current[s].gradeid,10)||0,o["dimensionid__idx_"+s]=parseInt(l.dimensionid,10),o["weight__idx_"+s]=parseInt(l.weight,10)||0}}),i?Promise.reject(r):Promise.resolve(o)},AddonModWorkshopAssessmentStrategyNumErrorsHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(675),t(1286),t(193);var o=function(){return function AddonModWorkshopAssessmentStrategyRubricModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(675),r=function(){function AddonModWorkshopAssessmentStrategyRubricHandler(e){this.translate=e,this.name="AddonModWorkshopAssessmentStrategyRubric",this.strategyName="rubric"}return AddonModWorkshopAssessmentStrategyRubricHandler.prototype.isEnabled=function(){return!0},AddonModWorkshopAssessmentStrategyRubricHandler.prototype.getComponent=function(e){return o.a},AddonModWorkshopAssessmentStrategyRubricHandler.prototype.getOriginalValues=function(e,n){var t=this,o=[];return e.fields.forEach(function(n,r){n.dimtitle=t.translate.instant("addon.mod_workshop_assessment_rubric.dimensionnumber",{$a:n.number}),e.current[r]||(e.current[r]={}),o[r]={chosenlevelid:e.current[r].chosenlevelid||"",number:n.number}}),Promise.resolve(o)},AddonModWorkshopAssessmentStrategyRubricHandler.prototype.hasDataChanged=function(e,n){for(var t in e)if(e[t].chosenlevelid!=(n[t].chosenlevelid||""))return!0;return!1},AddonModWorkshopAssessmentStrategyRubricHandler.prototype.prepareAssessmentData=function(e,n){var t=this,o={},r={},i=!1;return n.fields.forEach(function(l,s){if(s<n.dimenssionscount){var a=parseInt(e[s].chosenlevelid,10);!isNaN(a)&&a>=0?o["chosenlevelid__idx_"+s]=a:(r["chosenlevelid_"+s]=t.translate.instant("addon.mod_workshop_assessment_rubric.mustchooseone"),i=!0),o["gradeid__idx_"+s]=parseInt(n.current[s].gradeid,10)||0,o["dimensionid__idx_"+s]=parseInt(l.dimensionid,10)}}),i?Promise.reject(r):Promise.resolve(o)},AddonModWorkshopAssessmentStrategyRubricHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(519),r=(t(176),t(42)),i=function(){function AddonModWorkshopModuleHandler(e,n){this.courseProvider=e,this.workshopProvider=n,this.name="AddonModWorkshop",this.modName="workshop",this.supportedFeatures=(t={},t[r.a.FEATURE_GROUPS]=!0,t[r.a.FEATURE_GROUPINGS]=!0,t[r.a.FEATURE_MOD_INTRO]=!0,t[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[r.a.FEATURE_GRADE_HAS_GRADE]=!0,t[r.a.FEATURE_BACKUP_MOODLE2]=!0,t[r.a.FEATURE_SHOW_DESCRIPTION]=!0,t[r.a.FEATURE_PLAGIARISM]=!0,t);var t}return AddonModWorkshopModuleHandler.prototype.isEnabled=function(){return this.workshopProvider.isPluginEnabled()},AddonModWorkshopModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_workshop-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModWorkshopIndexPage",l,r)}}},AddonModWorkshopModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModWorkshopModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(100),i=t(176),l=function(e){function AddonModWorkshopLinkHandler(n,t){var o=e.call(this,n,i.a.COMPONENT,"workshop","w")||this;return o.workshopProvider=t,o.name="AddonModWorkshopLinkHandler",o}return Object(o.__extends)(AddonModWorkshopLinkHandler,e),AddonModWorkshopLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.workshopProvider.isPluginEnabled(e)},AddonModWorkshopLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),t(176),function(e){function AddonModWorkshopListLinkHandler(n,t,o){var r=e.call(this,n,t,"AddonModWorkshop","workshop")||this;return r.workshopProvider=o,r.name="AddonModWorkshopListLinkHandler",r}return Object(o.__extends)(AddonModWorkshopListLinkHandler,e),AddonModWorkshopListLinkHandler.prototype.isEnabled=function(){return this.workshopProvider.isPluginEnabled()},AddonModWorkshopListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(143)),i=t(176),l=(t(291),t(204),function(e){function AddonModWorkshopPrefetchHandler(n,t,o,r,l,s,a,u,d,c,p,f,h,m){var _=e.call(this,n,t,o,r,l,s,a,u,d)||this;return _.groupsProvider=c,_.userProvider=p,_.workshopProvider=f,_.workshopHelper=h,_.syncProvider=m,_.name="AddonModWorkshop",_.modName="workshop",_.component=i.a.COMPONENT,_.updatesNames=new RegExp("^configuration$|^.*files$|^completion|^gradeitems$|^outcomes$|^submissions$|^assessments$|^assessmentgrades$|^usersubmissions$|^userassessments$|^userassessmentgrades$|^userassessmentgrades$"),_}return Object(o.__extends)(AddonModWorkshopPrefetchHandler,e),AddonModWorkshopPrefetchHandler.prototype.getFiles=function(e,n,t){return this.getWorkshopInfoHelper(e,n,!0).then(function(e){return e.files})},AddonModWorkshopPrefetchHandler.prototype.getWorkshopInfoHelper=function(e,n,t,o,r,l){var s=this;void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===r&&(r=!1);var a,u,d=[],c=[];return this.sitesProvider.getSite(l).then(function(t){var r=t.getUserId();return s.workshopProvider.getWorkshop(n,e.id,l,o).then(function(n){return c=s.getIntroFilesFromInstance(e,n),c=c.concat(n.instructauthorsfiles).concat(n.instructreviewersfiles),a=n,s.workshopProvider.getWorkshopAccessInformation(a.id,!1,!0,l).then(function(n){if((u=n).canviewallsubmissions)return s.groupsProvider.getActivityGroupInfo(e.id,!1,void 0,l).then(function(e){e.groups&&0!=e.groups.length||(e.groups=[{id:0}]),d=e.groups})})}).then(function(){return s.workshopProvider.getUserPlanPhases(a.id,!1,!0,l).then(function(e){var n=s.workshopHelper.canSubmit(a,u,e[i.a.PHASE_SUBMISSION].tasks),t=s.workshopHelper.canAssess(a,u),o=[];return n&&o.push(s.workshopHelper.getUserSubmission(a.id,r).then(function(e){e&&(c=c.concat(e.contentfiles).concat(e.attachmentfiles))})),u.canviewallsubmissions&&a.phase>=i.a.PHASE_SUBMISSION&&o.push(s.workshopProvider.getSubmissions(a.id).then(function(e){var n=[];return e.forEach(function(e){c=c.concat(e.contentfiles).concat(e.attachmentfiles),n.push(s.workshopProvider.getSubmissionAssessments(a.id,e.id).then(function(e){e.forEach(function(e){c=c.concat(e.feedbackattachmentfiles).concat(e.feedbackcontentfiles)})}))}),Promise.all(n)})),a.phase>=i.a.PHASE_ASSESSMENT&&t&&o.push(s.workshopHelper.getReviewerAssessments(a.id).then(function(e){e.forEach(function(e){c=c.concat(e.feedbackattachmentfiles).concat(e.feedbackcontentfiles)})})),Promise.all(o)})})}).then(function(){return{workshop:a,groups:d,files:c.filter(function(e){return void 0!==e})}}).catch(function(e){return t?{workshop:a,groups:d,files:c.filter(function(e){return void 0!==e})}:Promise.reject(e)})},AddonModWorkshopPrefetchHandler.prototype.invalidateContent=function(e,n){return this.workshopProvider.invalidateContent(e,n)},AddonModWorkshopPrefetchHandler.prototype.isDownloadable=function(e,n){var t=this;return this.workshopProvider.getWorkshop(n,e.id,void 0,!0).then(function(e){return t.workshopProvider.getWorkshopAccessInformation(e.id).then(function(n){return n.canswitchphase||e.phase>i.a.PHASE_SETUP})})},AddonModWorkshopPrefetchHandler.prototype.isEnabled=function(){return this.workshopProvider.isPluginEnabled()},AddonModWorkshopPrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,t,this.prefetchWorkshop.bind(this))},AddonModWorkshopPrefetchHandler.prototype.getAllGradesReport=function(e,n,t){var o=this,r=[];return n.forEach(function(n){r.push(o.workshopProvider.fetchAllGradeReports(e,n.id,void 0,!1,!1,t))}),Promise.all(r).then(function(e){var n={};return e.forEach(function(e){e.forEach(function(e){e.submissionid&&(n[e.submissionid]=e)})}),o.utils.objectToArray(n)})},AddonModWorkshopPrefetchHandler.prototype.prefetchWorkshop=function(e,n,t,o){var r=this,l=[];return o=o||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(o).then(function(t){var s=t.getUserId();return r.getWorkshopInfoHelper(e,n,!1,!1,!0,o).then(function(n){var t=n.workshop,a=[],u=[];return a.push(r.filepoolProvider.addFilesToQueue(o,n.files,r.component,e.id)),a.push(r.workshopProvider.getWorkshopAccessInformation(t.id,!1,!0,o).then(function(a){return r.workshopProvider.getUserPlanPhases(t.id,!1,!0,o).then(function(d){var c=r.workshopHelper.canSubmit(t,a,d[i.a.PHASE_SUBMISSION].tasks),p=r.workshopHelper.canAssess(t,a),f=[];c&&(f.push(r.workshopProvider.getSubmissions(t.id)),l.push(s));var h=Promise.resolve();return a.canviewallsubmissions&&t.phase>=i.a.PHASE_SUBMISSION&&(h=r.getAllGradesReport(t.id,n.groups,o).then(function(e){e.forEach(function(e){l.push(e.userid),l.push(e.gradeoverby),e.reviewedby&&e.reviewedby.forEach(function(e){l.push(e.userid),l.push(e.gradinggradeoverby),u[e.assessmentid]=e}),e.reviewerof&&e.reviewerof.forEach(function(e){l.push(e.userid),l.push(e.gradinggradeoverby),u[e.assessmentid]=e})})})),t.phase>=i.a.PHASE_ASSESSMENT&&p&&(h=h.finally(function(){return r.workshopHelper.getReviewerAssessments(t.id,s,void 0,void 0,o).then(function(n){var i=[],a=[];return n.forEach(function(e){e.submission.authorid==s&&i.push(r.workshopProvider.getAssessment(t.id,e.id)),l.push(e.reviewerid),l.push(e.gradinggradeoverby),u[e.id]=e,a=a.concat(e.submission.attachmentfiles||[]).concat(e.submission.contentfiles||[])}),i.push(r.filepoolProvider.addFilesToQueue(o,a,r.component,e.id)),Promise.all(i)})})),h=h.finally(function(){if(u.length>0)return Promise.all(u.map(function(e,n){return r.workshopProvider.getAssessmentForm(t.id,n,void 0,void 0,void 0,o)}))}),f.push(h),t.phase==i.a.PHASE_CLOSED&&(f.push(r.workshopProvider.getGrades(t.id)),a.canviewpublishedsubmissions&&f.push(r.workshopProvider.getSubmissions(t.id))),Promise.all(f)})})),a.push(r.courseProvider.getModuleBasicInfoByInstance(t.id,"workshop",o)),a.push(r.courseProvider.getModuleBasicGradeInfo(e.id,o)),Promise.all(a)})}).then(function(){return r.userProvider.prefetchProfiles(l,n,o)})},AddonModWorkshopPrefetchHandler.prototype.sync=function(e,n,t){return this.syncProvider.syncWorkshop(e.instance,t)},AddonModWorkshopPrefetchHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(291);var o=function(){function AddonModWorkshopSyncCronHandler(e){this.workshopSync=e,this.name="AddonModWorkshopSyncCronHandler"}return AddonModWorkshopSyncCronHandler.prototype.execute=function(e,n){return this.workshopSync.syncAllWorkshops(e,n)},AddonModWorkshopSyncCronHandler.prototype.getInterval=function(){return this.workshopSync.syncInterval},AddonModWorkshopSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(260);var o=t(14),r=t(529),i=function(){function AddonNotesCourseOptionHandler(e){this.notesProvider=e,this.name="AddonNotes",this.priority=200}return AddonNotesCourseOptionHandler.prototype.isEnabled=function(){return this.notesProvider.isPluginEnabled()},AddonNotesCourseOptionHandler.prototype.isEnabledForCourse=function(e,n,t,r){return(!n||n.type!=o.a.ACCESS_GUEST)&&(t&&void 0!==t.notes?t.notes:this.notesProvider.isPluginViewNotesEnabledForCourse(e))},AddonNotesCourseOptionHandler.prototype.getDisplayData=function(e,n){return{title:"addon.notes.notes",class:"addon-notes-course-handler",component:r.a}},AddonNotesCourseOptionHandler.prototype.prefetch=function(e){return this.notesProvider.getNotes(e.id,void 0,!0)},AddonNotesCourseOptionHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(337);var o=function(){function AddonNotesSyncCronHandler(e){this.notesSync=e,this.name="AddonNotesSyncCronHandler"}return AddonNotesSyncCronHandler.prototype.execute=function(e,n){return this.notesSync.syncAllNotes(e,n)},AddonNotesSyncCronHandler.prototype.getInterval=function(){return 3e5},AddonNotesSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(10),r=t(46),i=t(105),l=(t(260),function(){function AddonNotesUserHandler(e,n,t,l){var s=this;this.linkHelper=e,this.sitesProvider=n,this.notesProvider=t,this.name="AddonNotes:notes",this.priority=100,this.type=i.a.TYPE_NEW_PAGE,this.noteEnabledCache={},l.on(o.a.LOGOUT,this.clearNoteCache.bind(this)),l.on(r.a.PROFILE_REFRESHED,function(e){s.clearNoteCache(e.courseId)})}return AddonNotesUserHandler.prototype.clearNoteCache=function(e){e?delete this.noteEnabledCache[e]:this.noteEnabledCache={}},AddonNotesUserHandler.prototype.isEnabled=function(){return this.notesProvider.isPluginEnabled()},AddonNotesUserHandler.prototype.isEnabledForUser=function(e,n,t,o){var r=this;return!(!n||e.id==this.sitesProvider.getCurrentSiteUserId())&&(void 0!==this.noteEnabledCache[n]?this.noteEnabledCache[n]:this.notesProvider.isPluginViewNotesEnabledForCourse(n).then(function(e){return r.noteEnabledCache[n]=e,e}))},AddonNotesUserHandler.prototype.getDisplayData=function(e,n){var t=this;return{icon:"list",title:"addon.notes.notes",class:"addon-notes-handler",action:function(e,n,o,r){e.preventDefault(),e.stopPropagation(),t.linkHelper.goInSite(n,"AddonNotesListPage",{userId:o.id,courseId:r})}}},AddonNotesUserHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(10),r=t(256),i=function(){function AddonNotificationsMainMenuHandler(e,n,t,i,l,s){var a=this;this.sitesProvider=n,this.notificationsProvider=i,this.pushNotificationsProvider=l,this.name="AddonNotifications",this.priority=700,this.handler={icon:"notifications",title:"addon.notifications.notifications",page:"AddonNotificationsListPage",class:"addon-notifications-handler",showBadge:!0,badge:"",loading:!0},e.on(r.a.READ_CHANGED_EVENT,function(e){a.updateBadge(e.siteId)}),e.on(r.a.READ_CRON_EVENT,function(e){a.updateBadge(e.siteId)}),e.on(o.a.LOGOUT,function(e){a.handler.badge="",a.handler.loading=!0}),s.on("receive").subscribe(function(e){t.isTrueOrOne(e.notif)&&a.sitesProvider.isCurrentSite(e.site)&&a.updateBadge(e.site)}),s.registerCounterHandler("AddonNotifications")}return AddonNotificationsMainMenuHandler.prototype.isEnabled=function(){return!0},AddonNotificationsMainMenuHandler.prototype.getDisplayData=function(){return this.handler.loading&&this.updateBadge(),this.handler},AddonNotificationsMainMenuHandler.prototype.updateBadge=function(e){var n=this;(e=e||this.sitesProvider.getCurrentSiteId())&&this.notificationsProvider.getUnreadNotificationsCount(null,e).then(function(t){n.handler.badge=t>0?String(t):"",n.pushNotificationsProvider.updateAddonCounter("AddonNotifications",t,e)}).catch(function(){n.handler.badge=""}).finally(function(){n.handler.loading=!1})},AddonNotificationsMainMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(256);var o=function(){function AddonNotificationsSettingsHandler(e,n,t){this.appProvider=e,this.localNotificationsProvider=n,this.notificationsProvider=t,this.name="AddonNotifications",this.priority=500}return AddonNotificationsSettingsHandler.prototype.isEnabled=function(){return this.notificationsProvider.isNotificationPreferencesEnabled()||this.localNotificationsProvider.isAvailable()&&!this.appProvider.isDesktop()},AddonNotificationsSettingsHandler.prototype.getDisplayData=function(){return{icon:"notifications",title:"addon.notifications.notifications",page:"AddonNotificationsSettingsPage",class:"addon-notifications-settings-handler"}},AddonNotificationsSettingsHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(256),r=(t(520),function(){function AddonNotificationsCronHandler(e,n,t,o,r,i,l,s){this.appProvider=e,this.eventsProvider=n,this.sitesProvider=t,this.localNotifications=o,this.notificationsProvider=r,this.textUtils=i,this.emulatorHelper=l,this.notificationsHelper=s,this.name="AddonNotificationsCronHandler"}return AddonNotificationsCronHandler.prototype.getInterval=function(){return this.appProvider.isDesktop()?6e4:6e5},AddonNotificationsCronHandler.prototype.isSync=function(){return!this.notificationsProvider.isPreciseNotificationCountEnabled()||this.appProvider.isDesktop()},AddonNotificationsCronHandler.prototype.canManualSync=function(){return!0},AddonNotificationsCronHandler.prototype.execute=function(e,n){return this.sitesProvider.isCurrentSite(e)&&this.eventsProvider.trigger(o.a.READ_CRON_EVENT,{},this.sitesProvider.getCurrentSiteId()),this.appProvider.isDesktop()&&this.localNotifications.isAvailable()&&this.emulatorHelper.checkNewNotifications(o.a.PUSH_SIMULATION_COMPONENT,this.fetchNotifications.bind(this),this.getTitleAndText.bind(this),e),Promise.resolve(null)},AddonNotificationsCronHandler.prototype.fetchNotifications=function(e){return this.notificationsHelper.getNotifications([],void 0,!0,!1,!0,e).then(function(e){return e.notifications})},AddonNotificationsCronHandler.prototype.getTitleAndText=function(e){var n={title:e.subject||e.userfromfullname,text:e.mobiletext.replace(/-{4,}/gi,"")};return n.text=this.textUtils.replaceNewLines(n.text,"<br>"),Promise.resolve(n)},AddonNotificationsCronHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(256),r=function(){function AddonNotificationsPushClickHandler(e,n,t,o){this.utils=e,this.notificationsProvider=n,this.linkHelper=t,this.eventsProvider=o,this.name="AddonNotificationsPushClickHandler",this.priority=0,this.featureName="CoreMainMenuDelegate_AddonNotifications"}return AddonNotificationsPushClickHandler.prototype.handles=function(e){var n=this;if(this.utils.isTrueOrOne(e.notif)){return this.notificationsProvider.markNotificationRead(e.savedmessageid||e.id,e.site).then(function(){n.eventsProvider.trigger(o.a.READ_CHANGED_EVENT,null,e.site)}).catch(function(){}),!0}return!1},AddonNotificationsPushClickHandler.prototype.handleClick=function(e){var n=this;return(e.customdata&&e.customdata.appurl?this.linkHelper.handleLink(e.customdata.appurl,void 0,void 0,!0):Promise.resolve(!1)).then(function(t){return!!t||!!e.contexturl&&n.linkHelper.handleLink(e.contexturl)}).then(function(t){if(!t)return n.notificationsProvider.invalidateNotificationsList(e.site).catch(function(){}).then(function(){return n.linkHelper.goInSite(void 0,"AddonNotificationsListPage",void 0,e.site)})})},AddonNotificationsPushClickHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return s});t(0);var o=t(42),r=t(195),i=(t.n(r),this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})}),l=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},s=function(){function AddonRemoteThemesProvider(e,n,t,o,r,i,l){this.sitesProvider=n,this.fileProvider=t,this.filepoolProvider=o,this.wsProvider=r,this.utils=i,this.appProvider=l,this.SEPARATOR_35=/\/\*\*? *3\.5(\.0)? *styles? *\*\//i,this.TMP_SITE_ID="tmpsite",this.stylesEls={},this.logger=e.getInstance("AddonRemoteThemesProvider")}return e=AddonRemoteThemesProvider,AddonRemoteThemesProvider.prototype.addSite=function(e){var n=this;return!e||this.stylesEls[e]?Promise.resolve():(this.initSiteStyleElement(e,!0),this.load(e,!0).catch(function(e){n.logger.error("Error loading site after site init",e)}))},AddonRemoteThemesProvider.prototype.clear=function(){this.disableElementsBySelector("style[id*=mobilecssurl]"),this.appProvider.setStatusBarColor()},AddonRemoteThemesProvider.prototype.createStyleElement=function(e,n){var t=document.createElement("style");return t.setAttribute("id",e),this.disableElement(t,n),t},AddonRemoteThemesProvider.prototype.disableElement=function(e,n){n?(e.disabled=!0,e.setAttribute("disabled","disabled")):(e.disabled=!1,e.removeAttribute("disabled"),""!=e.innerHTML&&this.appProvider.resetStatusBarColor())},AddonRemoteThemesProvider.prototype.disableElementsBySelector=function(e){var n=this;Array.from(document.querySelectorAll(e)).forEach(function(e){n.disableElement(e,!0)})},AddonRemoteThemesProvider.prototype.downloadFileAndRemoveOld=function(n,t){var r=this;return this.filepoolProvider.getFileStateByUrl(n,t).then(function(e){return e!==o.a.NOT_DOWNLOADED}).catch(function(){return!0}).then(function(t){if(!t)return r.filepoolProvider.removeFilesByComponent(n,e.COMPONENT,1)}).then(function(){return r.filepoolProvider.downloadUrl(n,t,!1,e.COMPONENT,1)})},AddonRemoteThemesProvider.prototype.enable=function(e){e=e||this.sitesProvider.getCurrentSiteId(),this.stylesEls[e]&&this.disableElement(this.stylesEls[e].element,!1)},AddonRemoteThemesProvider.prototype.get=function(n){var t=this;return n=n||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSite(n).then(function(o){var r,s=o.getInfo();if(s&&s.mobilecssurl)return r=s.mobilecssurl,(t.fileProvider.isAvailable()?t.downloadFileAndRemoveOld(n,r):Promise.resolve(r)).then(function(e){return i(t,void 0,void 0,function(){var n;return l(this,function(t){switch(t.label){case 0:return this.logger.debug("Loading styles from: ",e),[4,this.wsProvider.getText(e)];case 1:return n=t.sent(),[2,{fileUrl:r,styles:this.get35Styles(n)}]}})})});s&&""===s.mobilecssurl&&t.filepoolProvider.removeFilesByComponent(n,e.COMPONENT,1)})},AddonRemoteThemesProvider.prototype.get35Styles=function(e){var n=e.search(this.SEPARATOR_35);return n>-1?e.substr(n).replace(this.SEPARATOR_35,""):e},AddonRemoteThemesProvider.prototype.initSiteStyleElement=function(e,n){if(!this.stylesEls[e]){var t=this.createStyleElement("mobilecssurl-"+e,n);document.head.appendChild(t),this.stylesEls[e]={element:t,hash:""}}},AddonRemoteThemesProvider.prototype.load=function(n,t){var o=this;return n=n||this.sitesProvider.getCurrentSiteId(),t=!!t,this.logger.debug("Load site",n,t),n&&this.stylesEls[n]?(this.disableElement(this.stylesEls[n].element,t),this.get(n).then(function(i){if(void 0!==i){var l=r.Md5.hashAsciiStr(i.styles);o.stylesEls[n].hash!==l&&(o.stylesEls[n].element.innerHTML=i.styles,o.stylesEls[n].hash=l,t&&o.disableElement(o.stylesEls[n].element,!0)),o.filepoolProvider.treatCSSCode(n,i.fileUrl,i.styles,e.COMPONENT,2).catch(function(){})}})):Promise.reject(null)},AddonRemoteThemesProvider.prototype.loadTmpStyles=function(e){var n=this;return e?this.wsProvider.getText(e).then(function(e){e=n.get35Styles(e),n.initSiteStyleElement(n.TMP_SITE_ID,!1),n.stylesEls[n.TMP_SITE_ID].element.innerHTML=e}):Promise.resolve()},AddonRemoteThemesProvider.prototype.loadTmpStylesForSiteConfig=function(e){return this.loadTmpStyles(e.mobilecssurl)},AddonRemoteThemesProvider.prototype.preloadCurrentSite=function(){var e=this;return this.sitesProvider.getStoredCurrentSiteId().then(function(n){return e.addSite(n)},function(){})},AddonRemoteThemesProvider.prototype.preloadSites=function(){var e=this;return this.sitesProvider.getSitesIds().then(function(n){var t=[];return n.forEach(function(n){t.push(e.addSite(n))}),e.utils.allPromises(t)})},AddonRemoteThemesProvider.prototype.removeSite=function(e){e&&this.stylesEls[e]&&(document.head.removeChild(this.stylesEls[e].element),delete this.stylesEls[e])},AddonRemoteThemesProvider.prototype.unloadTmpStyles=function(){return this.removeSite(this.TMP_SITE_ID)},AddonRemoteThemesProvider.COMPONENT="mmaRemoteStyles",AddonRemoteThemesProvider;var e}()},,function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(127);var o=t(155),r=(t(7),t(117)),i=function(){function CoreUpdateManagerProvider(e,n){this.configProvider=n,this.name="CoreUpdateManager",this.priority=o.a.MAX_RECOMMENDED_PRIORITY+300,this.blocking=!0,this.VERSION_APPLIED="version_applied",this.logger=e.getInstance("CoreUpdateManagerProvider")}return CoreUpdateManagerProvider.prototype.load=function(){var e=this,n=[],t=r.a.versioncode;return this.configProvider.get(this.VERSION_APPLIED,0).then(function(o){return Promise.all(n).then(function(){return e.configProvider.set(e.VERSION_APPLIED,t)}).catch(function(n){e.logger.error("Error applying update from "+o+" to "+t,n)})})},CoreUpdateManagerProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=this&&this.__awaiter||function(e,n,t,o){return new(t||(t=Promise))(function(r,i){function fulfilled(e){try{step(o.next(e))}catch(e){i(e)}}function rejected(e){try{step(o.throw(e))}catch(e){i(e)}}function step(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(fulfilled,rejected)}step((o=o.apply(e,n||[])).next())})},r=this&&this.__generator||function(e,n){function verb(i){return function(s){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;l;)try{if(t=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}var t,o,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},i=function(){function CoreSiteInfoCronHandler(e){this.sitesProvider=e,this.name="CoreSiteInfoCronHandler"}return CoreSiteInfoCronHandler.prototype.execute=function(e){return o(this,void 0,void 0,function(){var n,t=this;return r(this,function(o){switch(o.label){case 0:return e?[3,2]:[4,this.sitesProvider.getSitesIds()];case 1:return n=o.sent(),[2,Promise.all(n.map(function(e){return t.sitesProvider.updateSiteInfo(e)}))];case 2:return[2,this.sitesProvider.updateSiteInfo(e)]}})})},CoreSiteInfoCronHandler.prototype.getInterval=function(){return 108e5},CoreSiteInfoCronHandler.prototype.isSync=function(){return!1},CoreSiteInfoCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(326),t(729);var o=function(){return function CoreSettingsModule(e){e.initDomSettings()}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(59),t(1305);var o=function(){return function CoreSitePluginsModule(e){}}()},function(e,n,t){"use strict";t(0),t(1),t(4),t(11);var o=t(10),r=(t(18),t(151),t(7),t(2),t(5),t(12),t(23),t(3),t(59)),i=(t(156),t(129),t(14),t(53)),l=(t(31),t(57),t(172),t(171),t(62),t(51),t(103),t(179),t(105)),s=(t(192),t(326),t(74),t(118),t(393),t(130),t(153),t(167),t(193),function(){function CoreSitePluginsBaseHandler(e){this.name=e}return CoreSitePluginsBaseHandler.prototype.isEnabled=function(){return!0},CoreSitePluginsBaseHandler}()),a=t(457),u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),d=function(e){function CoreSitePluginsCourseFormatHandler(n,t,o){var r=e.call(this,n)||this;return r.format=t,r.handlerSchema=o,r}return u(CoreSitePluginsCourseFormatHandler,e),CoreSitePluginsCourseFormatHandler.prototype.canViewAllSections=function(e){return void 0===this.handlerSchema.canviewallsections||this.handlerSchema.canviewallsections},CoreSitePluginsCourseFormatHandler.prototype.displayEnableDownload=function(e){return void 0===this.handlerSchema.displayenabledownload||this.handlerSchema.displayenabledownload},CoreSitePluginsCourseFormatHandler.prototype.displaySectionSelector=function(e){return void 0===this.handlerSchema.displaysectionselector||this.handlerSchema.displaysectionselector},CoreSitePluginsCourseFormatHandler.prototype.getCourseFormatComponent=function(e,n){if(this.handlerSchema.method)return a.a},CoreSitePluginsCourseFormatHandler}(s),c=t(456),p=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),f=function(e){function CoreSitePluginsCourseOptionHandler(n,t,o,r,i,l,s){var a=e.call(this,n)||this;return a.title=t,a.plugin=o,a.handlerSchema=r,a.initResult=i,a.sitePluginsProvider=l,a.utils=s,a.priority=r.priority,a.isMenuHandler=!!r.ismenuhandler,a}return p(CoreSitePluginsCourseOptionHandler,e),CoreSitePluginsCourseOptionHandler.prototype.isEnabledForCourse=function(e,n,t,o){var r=this;return(this.updatingDefer?this.updatingDefer.promise:Promise.resolve()).then(function(){return r.sitePluginsProvider.isHandlerEnabledForCourse(e,r.handlerSchema.restricttoenrolledcourses,r.initResult.restrict)})},CoreSitePluginsCourseOptionHandler.prototype.getDisplayData=function(e,n){return{title:this.title,class:this.handlerSchema.displaydata.class,component:c.a,componentData:{handlerUniqueName:this.name}}},CoreSitePluginsCourseOptionHandler.prototype.getMenuDisplayData=function(e,n){return{title:this.title,class:this.handlerSchema.displaydata.class,icon:this.handlerSchema.displaydata.icon||"",page:"CoreSitePluginsPluginPage",pageParams:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,args:{courseid:n.id},initResult:this.initResult}}},CoreSitePluginsCourseOptionHandler.prototype.prefetch=function(e){return this.sitePluginsProvider.prefetchFunctions(this.plugin.component,{courseid:e.id},this.handlerSchema,e.id,void 0,!0)},CoreSitePluginsCourseOptionHandler.prototype.setInitResult=function(e){this.initResult=e,this.updatingDefer.resolve(),delete this.updatingDefer},CoreSitePluginsCourseOptionHandler.prototype.updatingInit=function(){this.updatingDefer=this.utils.promiseDefer()},CoreSitePluginsCourseOptionHandler}(s),h=t(392),m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),_=function(e){function CoreSitePluginsModuleHandler(n,t,o,r,i,l,s){var a=e.call(this,n)||this;return a.modName=t,a.plugin=o,a.handlerSchema=r,a.initResult=i,a.sitePluginsProvider=l,a.logger=s.getInstance("CoreSitePluginsModuleHandler"),a.supportedFeatures=r.supportedfeatures,i&&i.jsResult&&i.jsResult.supportsFeature&&(a.supportsFeature=i.jsResult.supportsFeature.bind(i.jsResult)),a}return m(CoreSitePluginsModuleHandler,e),CoreSitePluginsModuleHandler.prototype.getData=function(e,n,t,o){var r=this,i=o&&this.handlerSchema.coursepagemethod;if(e.noviewlink&&!i){var l=e.description;return e.description="",{icon:this.handlerSchema.displaydata.icon,title:l,a11yTitle:"",class:this.handlerSchema.displaydata.class}}var s=!(!this.handlerSchema.offlinefunctions||!Object.keys(this.handlerSchema.offlinefunctions).length),a=this.handlerSchema.downloadbutton,u={title:e.name,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,showDownloadButton:void 0!==a?a:s};if(this.handlerSchema.method&&(u.action=function(e,n,t,o,r){e.preventDefault(),e.stopPropagation(),n.push("CoreSitePluginsModuleIndexPage",{title:t.name,module:t,courseId:o},r)}),i&&0!==e.visibleoncoursepage){u.loading=!0;this.sitePluginsProvider.getContent(this.plugin.component,this.handlerSchema.coursepagemethod,{courseid:n,cmid:e.id}).then(function(n){u.title=n.templates&&n.templates[0]?n.templates[0].html:"",e.description=""}).catch(function(e){r.logger.error("Error calling course page method:",e)}).finally(function(){u.loading=!1})}return u},CoreSitePluginsModuleHandler.prototype.getIconSrc=function(){return this.handlerSchema.displaydata.icon},CoreSitePluginsModuleHandler.prototype.getMainComponent=function(e,n,t){return h.a},CoreSitePluginsModuleHandler}(s),g=t(143),v=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),C=function(e){function CoreSitePluginsModulePrefetchHandler(n,t,o,r,i,l,s,a,u,d,c,p,f,h){var m=e.call(this,n,t,o,r,i,l,s,a,u)||this;if(m.sitePluginsProvider=d,m.handlerSchema=h,m.ROOT_CACHE_KEY="CoreSitePluginsModulePrefetchHandler:",m.component=c,m.name=p,m.modName=f,m.isResource=h.isresource,h.updatesnames)try{m.updatesNames=new RegExp(h.updatesnames)}catch(e){}return m}return v(CoreSitePluginsModulePrefetchHandler,e),CoreSitePluginsModulePrefetchHandler.prototype.download=function(e,n,t){return this.prefetchPackage(e,n,!1,this.downloadPrefetchPlugin.bind(this),void 0,!1,t)},CoreSitePluginsModulePrefetchHandler.prototype.downloadPrefetchPlugin=function(e,n,t,o,r,i){var l=this;return this.sitesProvider.getSite(o).then(function(t){var o=[],s={courseid:n,cmid:e.id,userid:t.getUserId()};return o.push(l.downloadOrPrefetchFiles(t.id,e,n,r,i)),o.push(l.sitePluginsProvider.prefetchFunctions(l.component,s,l.handlerSchema,n,e,r,i,t)),Promise.all(o)})},CoreSitePluginsModulePrefetchHandler.prototype.downloadOrPrefetchFiles=function(e,n,t,o,r){var i=this;return this.loadContents(n,t,!0).then(function(){return i.getIntroFiles(n,t)}).then(function(t){var l=i.getContentDownloadableFiles(n),s=[];if(r)s.push(i.filepoolProvider.downloadOrPrefetchFiles(e,t,o,!1,i.component,n.id)),s.push(i.filepoolProvider.downloadOrPrefetchFiles(e,l,o,!1,i.component,n.id,r));else{var a=t.concat(l);s.push(i.filepoolProvider.downloadOrPrefetchFiles(e,a,o,!1,i.component,n.id))}return Promise.all(s)})},CoreSitePluginsModulePrefetchHandler.prototype.getDownloadSize=function(e,n,t){return Promise.resolve({size:-1,total:!1})},CoreSitePluginsModulePrefetchHandler.prototype.invalidateContent=function(e,n){var t=[],o=this.sitesProvider.getCurrentSite(),r=o.getId(),i={courseid:n,cmid:e,userid:o.getUserId()};t.push(this.filepoolProvider.invalidateFilesByComponent(r,this.component,e)),t.push(this.courseProvider.invalidateModule(e,r));for(var l in this.handlerSchema.offlinefunctions)o.wsAvailable(l)?t.push(o.invalidateWsCacheForKey(this.sitePluginsProvider.getCallWSCacheKey(l,i))):t.push(this.sitePluginsProvider.invalidateContent(this.component,l,i));return this.utils.allPromises(t)},CoreSitePluginsModulePrefetchHandler.prototype.isEnabled=function(){return!0},CoreSitePluginsModulePrefetchHandler.prototype.loadContents=function(e,n,t){return this.isResource?this.courseProvider.loadModuleContents(e,n,void 0,!1,t):Promise.resolve()},CoreSitePluginsModulePrefetchHandler.prototype.prefetch=function(e,n,t,o){return this.prefetchPackage(e,n,!1,this.downloadPrefetchPlugin.bind(this),void 0,!0,o)},CoreSitePluginsModulePrefetchHandler}(g.a),y=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),P=function(e){function CoreSitePluginsMainMenuHandler(n,t,o,r,i){var l=e.call(this,n)||this;return l.title=t,l.plugin=o,l.handlerSchema=r,l.initResult=i,l.priority=r.priority,l}return y(CoreSitePluginsMainMenuHandler,e),CoreSitePluginsMainMenuHandler.prototype.getDisplayData=function(){return{title:this.title,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,page:"CoreSitePluginsPluginPage",pageParams:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,initResult:this.initResult},onlyInMore:!0}},CoreSitePluginsMainMenuHandler}(s),A=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),b=function(e){function CoreSitePluginsUserProfileHandler(n,t,o,r,i,s,a){var u=e.call(this,n)||this;return u.title=t,u.plugin=o,u.handlerSchema=r,u.initResult=i,u.sitePluginsProvider=s,u.utils=a,u.priority=r.priority,u.type=r.type!=l.a.TYPE_COMMUNICATION?l.a.TYPE_NEW_PAGE:l.a.TYPE_COMMUNICATION,u}return A(CoreSitePluginsUserProfileHandler,e),CoreSitePluginsUserProfileHandler.prototype.isEnabledForUser=function(e,n,t,o){return!!this.sitePluginsProvider.isHandlerEnabledForUser(e.id,this.handlerSchema.restricttocurrentuser,this.initResult.restrict)&&this.sitePluginsProvider.isHandlerEnabledForCourse(n,this.handlerSchema.restricttoenrolledcourses,this.initResult.restrict)},CoreSitePluginsUserProfileHandler.prototype.getDisplayData=function(e,n){var t=this;return{title:this.title,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,action:function(e,n,o,r){e.preventDefault(),e.stopPropagation(),n.push("CoreSitePluginsPluginPage",{title:t.title,component:t.plugin.component,method:t.handlerSchema.method,args:{courseid:r,userid:o.id},initResult:t.initResult})}}},CoreSitePluginsUserProfileHandler.prototype.setInitResult=function(e){this.initResult=e,this.updatingDefer.resolve(),delete this.updatingDefer},CoreSitePluginsUserProfileHandler.prototype.updatingInit=function(){this.updatingDefer=this.utils.promiseDefer()},CoreSitePluginsUserProfileHandler}(s),I=t(460),S=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),E=function(e){function CoreSitePluginsUserProfileFieldHandler(n,t){var o=e.call(this,n)||this;return o.type=t,o}return S(CoreSitePluginsUserProfileFieldHandler,e),CoreSitePluginsUserProfileFieldHandler.prototype.getComponent=function(e){return I.a},CoreSitePluginsUserProfileFieldHandler.prototype.getData=function(e,n,t,o){var r="profile_field_"+e.shortname;return{type:e.type||e.datatype,name:r,value:o[r]}},CoreSitePluginsUserProfileFieldHandler}(s),M=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),w=function(e){function CoreSitePluginsSettingsHandler(n,t,o,r,i){var l=e.call(this,n)||this;return l.title=t,l.plugin=o,l.handlerSchema=r,l.initResult=i,l.priority=r.priority,l}return M(CoreSitePluginsSettingsHandler,e),CoreSitePluginsSettingsHandler.prototype.getDisplayData=function(){return{title:this.title,icon:this.handlerSchema.displaydata.icon,class:this.handlerSchema.displaydata.class,page:"CoreSitePluginsPluginPage",params:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,initResult:this.initResult}}},CoreSitePluginsSettingsHandler}(s),k=t(1090),T=t(458),O=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),D=function(e){function CoreSitePluginsQuestionHandler(n,t){var o=e.call(this)||this;return o.name=n,o.type=t,o}return O(CoreSitePluginsQuestionHandler,e),CoreSitePluginsQuestionHandler.prototype.getComponent=function(e){return T.a},CoreSitePluginsQuestionHandler}(k.a),x=t(1091),F=t(459),L=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),U=function(e){function CoreSitePluginsQuestionBehaviourHandler(n,t,o,r){var i=e.call(this,n)||this;return i.name=t,i.type=o,i.hasTemplate=r,i}return L(CoreSitePluginsQuestionBehaviourHandler,e),CoreSitePluginsQuestionBehaviourHandler.prototype.handleQuestion=function(e,n){if(this.hasTemplate)return[F.a]},CoreSitePluginsQuestionBehaviourHandler}(x.a),R=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),H=function(e){function CoreSitePluginsMessageOutputHandler(n,t,o,r,i,l){var s=e.call(this,n)||this;return s.processorName=t,s.title=o,s.plugin=r,s.handlerSchema=i,s.initResult=l,s}return R(CoreSitePluginsMessageOutputHandler,e),CoreSitePluginsMessageOutputHandler.prototype.getDisplayData=function(){return{priority:this.handlerSchema.priority,label:this.title,icon:this.handlerSchema.displaydata.icon,page:"CoreSitePluginsPluginPage",pageParams:{title:this.title,component:this.plugin.component,method:this.handlerSchema.method,initResult:this.initResult}}},CoreSitePluginsMessageOutputHandler}(s),N=t(461),B=function(){function CoreSitePluginsQuizAccessRuleHandler(e,n,t){this.name=e,this.ruleName=n,this.hasTemplate=t}return CoreSitePluginsQuizAccessRuleHandler.prototype.isPreflightCheckRequired=function(e,n,t,o){return this.hasTemplate},CoreSitePluginsQuizAccessRuleHandler.prototype.getFixedPreflightData=function(e,n,t,o,r){},CoreSitePluginsQuizAccessRuleHandler.prototype.getPreflightComponent=function(e){if(this.hasTemplate)return N.a},CoreSitePluginsQuizAccessRuleHandler.prototype.notifyPreflightCheckPassed=function(e,n,t,o,r){},CoreSitePluginsQuizAccessRuleHandler.prototype.notifyPreflightCheckFailed=function(e,n,t,o,r){},CoreSitePluginsQuizAccessRuleHandler.prototype.shouldShowTimeLeft=function(e,n,t){return!1},CoreSitePluginsQuizAccessRuleHandler}(),V=t(1056),W=t(462),K=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),q=function(e){function CoreSitePluginsAssignFeedbackHandler(n,t,o,r){var i=e.call(this,n)||this;return i.name=t,i.type=o,i.prefix=r,i}return K(CoreSitePluginsAssignFeedbackHandler,e),CoreSitePluginsAssignFeedbackHandler.prototype.getComponent=function(e,n,t){return W.a},CoreSitePluginsAssignFeedbackHandler.prototype.getPluginName=function(e){var n=this.prefix+"pluginname",t=this.translate.instant(n);return n!=t?t:e.name?e.name:void 0},CoreSitePluginsAssignFeedbackHandler}(V.a),G=t(1058),j=t(463),Q=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),z=function(e){function CoreSitePluginsAssignSubmissionHandler(n,t,o,r){var i=e.call(this,n)||this;return i.name=t,i.type=o,i.prefix=r,i}return Q(CoreSitePluginsAssignSubmissionHandler,e),CoreSitePluginsAssignSubmissionHandler.prototype.getComponent=function(e,n,t){return j.a},CoreSitePluginsAssignSubmissionHandler.prototype.getPluginName=function(e){var n=this.prefix+"pluginname",t=this.translate.instant(n);return n!=t?t:e.name?e.name:void 0},CoreSitePluginsAssignSubmissionHandler.prototype.isEnabledForEdit=function(){return!0},CoreSitePluginsAssignSubmissionHandler}(G.a),$=t(679),Y=function(){function CoreSitePluginsWorkshopAssessmentStrategyHandler(e,n){this.name=e,this.strategyName=n}return CoreSitePluginsWorkshopAssessmentStrategyHandler.prototype.getComponent=function(e){return $.a},CoreSitePluginsWorkshopAssessmentStrategyHandler.prototype.getOriginalValues=function(e,n){return Promise.resolve([])},CoreSitePluginsWorkshopAssessmentStrategyHandler.prototype.hasDataChanged=function(e,n){return!1},CoreSitePluginsWorkshopAssessmentStrategyHandler.prototype.isEnabled=function(){return!0},CoreSitePluginsWorkshopAssessmentStrategyHandler.prototype.prepareAssessmentData=function(e,n){return Promise.resolve({})},CoreSitePluginsWorkshopAssessmentStrategyHandler}(),X=(t(61),t(158)),J=t(455),Z=t(680),ee=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),ne=function(e){function CoreSitePluginsBlockHandler(n,t,o,r,i){var l=e.call(this,n)||this;return l.title=t,l.blockName=o,l.handlerSchema=r,l.initResult=i,l}return ee(CoreSitePluginsBlockHandler,e),CoreSitePluginsBlockHandler.prototype.getDisplayData=function(e,n,t,o){var r,i;return r=this.handlerSchema.displaydata&&this.handlerSchema.displaydata.class?this.handlerSchema.displaydata.class:"block_"+n.name,i=this.handlerSchema.displaydata&&"title"==this.handlerSchema.displaydata.type?Z.a:this.handlerSchema.displaydata&&"prerendered"==this.handlerSchema.displaydata.type?X.a:J.a,{title:this.title,class:r,component:i}},CoreSitePluginsBlockHandler}(s);t.d(n,"a",function(){return te});var te=function(){function CoreSitePluginsHelperProvider(e,n,t,r,l,s,a,u,d,c,p,f,h,m,_,g,v,C,y,P,A,b,I,S,E,M,w,k,T,O,D,x,F,L){var U=this;this.loggerProvider=e,this.sitesProvider=n,this.domUtils=t,this.mainMenuDelegate=r,this.moduleDelegate=l,this.userDelegate=s,this.langProvider=a,this.wsProvider=u,this.sitePluginsProvider=d,this.prefetchDelegate=c,this.compileProvider=p,this.utils=f,this.urlUtils=h,this.courseOptionsDelegate=m,this.eventsProvider=_,this.courseFormatDelegate=g,this.profileFieldDelegate=v,this.textUtils=C,this.filepoolProvider=y,this.settingsDelegate=P,this.questionDelegate=A,this.questionBehaviourDelegate=b,this.questionProvider=I,this.messageOutputDelegate=S,this.accessRulesDelegate=E,this.assignSubmissionDelegate=M,this.translate=w,this.assignFeedbackDelegate=k,this.appProvider=T,this.workshopAssessmentStrategyDelegate=O,this.courseProvider=D,this.blockDelegate=x,this.filterHelper=F,this.pluginFileDelegate=L,this.HANDLER_DISABLED="core_site_plugins_helper_handler_disabled",this.courseRestrictHandlers={},this.logger=e.getInstance("CoreSitePluginsHelperProvider"),_.on(o.a.LOGIN,function(e){U.fetchSitePlugins(e.siteId).then(function(n){e.siteId==U.sitesProvider.getCurrentSiteId()&&n.length&&U.loadSitePlugins(n).catch(function(e){U.logger.error(e)}).finally(function(){_.trigger(o.a.SITE_PLUGINS_LOADED,{},e.siteId)})}).catch(function(e){}).finally(function(){U.sitePluginsProvider.setPluginsFetched()})}),_.on(o.a.LOGOUT,function(){U.sitePluginsProvider.hasSitePluginsLoaded&&window.location.reload()}),_.on(i.a.EVENT_MY_COURSES_CHANGED,function(e){e&&e.siteId&&e.siteId==U.sitesProvider.getCurrentSiteId()&&e.added&&e.added.length&&U.reloadCourseRestrictHandlers()})}return CoreSitePluginsHelperProvider.prototype.downloadStyles=function(e,n,t,o){var i=this;return this.sitesProvider.getSite(o).then(function(o){var l=t.styles&&t.styles.url;l&&!i.urlUtils.isAbsoluteURL(l)&&(l=i.textUtils.concatenatePaths(o.getURL(),l)),l&&t.styles.version&&(l+=(-1!=l.indexOf("?")?"&":"?")+"version="+t.styles.version);var s=i.sitePluginsProvider.getHandlerUniqueName(e,n)+"#main";return i.filepoolProvider.getFilesByComponent(o.id,r.a.COMPONENT,s).then(function(e){e.forEach(function(e){e.url!=l&&i.filepoolProvider.removeFileByUrl(o.id,e.url).catch(function(){})})}).catch(function(){}),l?i.filepoolProvider.downloadUrl(o.id,l,!1,r.a.COMPONENT,s,0,void 0,void 0,void 0,t.styles.version).then(function(e){return i.wsProvider.getText(e)}):""})},CoreSitePluginsHelperProvider.prototype.executeHandlerInit=function(e,n){return n.init?this.executeMethodAndJS(e,n.init,!0):Promise.resolve({})},CoreSitePluginsHelperProvider.prototype.executeMethodAndJS=function(e,n,t){var o=this,r=this.sitesProvider.getCurrentSiteId();return this.sitePluginsProvider.getContent(e.component,n,{},{getFromCache:!1,deleteCacheIfWSError:t}).then(function(e){if(!e.javascript||o.sitesProvider.getCurrentSiteId()!=r)return e;var n={HANDLER_DISABLED:o.HANDLER_DISABLED};o.compileProvider.injectLibraries(n);var t=o.sitePluginsProvider.createDataForJS(e);for(var i in t)n[i]=t[i];return e.jsResult=o.compileProvider.executeJavascript(n,e.javascript),e.jsResult==o.HANDLER_DISABLED&&(e.disabled=!0),e})},CoreSitePluginsHelperProvider.prototype.fetchSitePlugins=function(e){var n=this,t=[];return this.sitesProvider.getSite(e).then(function(e){return n.sitePluginsProvider.isGetContentAvailable(e)?e.read("tool_mobile_get_plugins_supporting_mobile",{},{getFromCache:!1}).then(function(o){return o.plugins.forEach(function(o){n.isSitePluginEnabled(o,e)&&t.push(o)}),t}):t})},CoreSitePluginsHelperProvider.prototype.getPrefixForStrings=function(e){return e?"plugin."+e+".":""},CoreSitePluginsHelperProvider.prototype.getPrefixedString=function(e,n){return this.getPrefixForStrings(e)+n},CoreSitePluginsHelperProvider.prototype.isSitePluginEnabled=function(e,n){return!(n.isFeatureDisabled("sitePlugin_"+e.component+"_"+e.addon)||!e.handlers)&&(e.parsedHandlers||(e.parsedHandlers=this.textUtils.parseJSON(e.handlers,null,this.logger.error.bind(this.logger,"Error parsing site plugin handlers"))),!(!e.parsedHandlers||!Object.keys(e.parsedHandlers).length))},CoreSitePluginsHelperProvider.prototype.loadLangStrings=function(e){if(e.parsedLang)for(var n in e.parsedLang){var t=this.getPrefixForStrings(e.addon);this.langProvider.addSitePluginsStrings(n,e.parsedLang[n],t)}},CoreSitePluginsHelperProvider.prototype.loadSitePlugin=function(e){var n=[];this.logger.debug("Load site plugin:",e),e.parsedHandlers||(e.parsedHandlers=this.textUtils.parseJSON(e.handlers,null,this.logger.error.bind(this.logger,"Error parsing site plugin handlers"))),!e.parsedLang&&e.lang&&(e.parsedLang=this.textUtils.parseJSON(e.lang,null,this.logger.error.bind(this.logger,"Error parsing site plugin lang"))),this.sitePluginsProvider.hasSitePluginsLoaded=!0,this.loadLangStrings(e);for(var t in e.parsedHandlers)n.push(this.registerHandler(e,t,e.parsedHandlers[t]));return this.utils.allPromises(n)},CoreSitePluginsHelperProvider.prototype.loadSitePlugins=function(e){var n=this,t=[];return this.courseRestrictHandlers={},e.forEach(function(e){var o=n.loadSitePlugin(e);t.push(o),n.sitePluginsProvider.registerSitePluginPromise(e.component,o)}),this.utils.allPromises(t)},CoreSitePluginsHelperProvider.prototype.loadStyles=function(e,n,t,o,i,l){l=l||this.sitesProvider.getCurrentSiteId();var s=document.createElement("style"),a=this.sitePluginsProvider.getHandlerUniqueName(e,n);s.setAttribute("id","siteplugin-"+a),s.innerHTML=o,document.head.appendChild(s),this.filepoolProvider.treatCSSCode(l,t,o,r.a.COMPONENT,a,i).catch(function(){})},CoreSitePluginsHelperProvider.prototype.registerHandler=function(e,n,t){var o,r,i=this,l=[],s=this.sitesProvider.getCurrentSiteId();return l.push(this.downloadStyles(e,n,t,s).then(function(e){r=e}).catch(function(e){i.logger.error("Error getting styles for plugin",n,t,e)})),l.push(this.executeHandlerInit(e,t).then(function(e){o=e})),Promise.all(l).then(function(){if(!o||!o.disabled){r&&i.loadStyles(e,n,t.styles.url,r,t.styles.version,s);var l;switch(t.delegate){case"CoreMainMenuDelegate":l=Promise.resolve(i.registerMainMenuHandler(e,n,t,o));break;case"CoreCourseModuleDelegate":l=Promise.resolve(i.registerModuleHandler(e,n,t,o));break;case"CoreUserDelegate":l=Promise.resolve(i.registerUserProfileHandler(e,n,t,o));break;case"CoreCourseOptionsDelegate":l=Promise.resolve(i.registerCourseOptionHandler(e,n,t,o));break;case"CoreCourseFormatDelegate":l=Promise.resolve(i.registerCourseFormatHandler(e,n,t));break;case"CoreUserProfileFieldDelegate":l=Promise.resolve(i.registerUserProfileFieldHandler(e,n,t));break;case"CoreSettingsDelegate":l=Promise.resolve(i.registerSettingsHandler(e,n,t,o));break;case"CoreQuestionDelegate":l=Promise.resolve(i.registerQuestionHandler(e,n,t));break;case"CoreQuestionBehaviourDelegate":l=Promise.resolve(i.registerQuestionBehaviourHandler(e,n,t));break;case"CoreBlockDelegate":l=Promise.resolve(i.registerBlockHandler(e,n,t,o));break;case"AddonMessageOutputDelegate":l=Promise.resolve(i.registerMessageOutputHandler(e,n,t,o));break;case"AddonModQuizAccessRuleDelegate":l=Promise.resolve(i.registerQuizAccessRuleHandler(e,n,t));break;case"AddonModAssignFeedbackDelegate":l=Promise.resolve(i.registerAssignFeedbackHandler(e,n,t));break;case"AddonModAssignSubmissionDelegate":l=Promise.resolve(i.registerAssignSubmissionHandler(e,n,t));break;case"AddonWorkshopAssessmentStrategyDelegate":l=Promise.resolve(i.registerWorkshopAssessmentStrategyHandler(e,n,t));break;default:l=Promise.resolve()}return l.then(function(r){r&&i.sitePluginsProvider.setSitePluginHandler(r,{plugin:e,handlerName:n,handlerSchema:t,initResult:o})})}i.logger.warn("Handler disabled by init function",e,t)}).catch(function(e){return Promise.reject("Error executing init method "+t.init+": "+e.message)})},CoreSitePluginsHelperProvider.prototype.registerComponentInitHandler=function(e,n,t,o,r){var i=this;if(t.method)return this.logger.debug("Register site plugin",e,t),this.executeMethodAndJS(e,t.method).then(function(l){var s=i.sitePluginsProvider.getHandlerUniqueName(e,n),a=r(s,l);if(t.methodTemplates=l.templates,t.methodJSResult=l.jsResult,t.methodOtherdata=l.otherdata,l&&l.jsResult)for(var u in a)"constructor"!=u&&"function"==typeof a[u]&&"function"==typeof l.jsResult[u]&&(a[u]=l.jsResult[u].bind(a));return o.registerHandler(a),s}).catch(function(n){i.logger.error("Error executing main method",e.component,t.method,n)});this.logger.warn("Ignore site plugin because it doesn't provide method",e,t)},CoreSitePluginsHelperProvider.prototype.registerAssignFeedbackHandler=function(e,n,t){var o=this;return this.registerComponentInitHandler(e,n,t,this.assignFeedbackDelegate,function(n,r){var i=(t.moodlecomponent||e.component).replace("assignfeedback_",""),l=o.getPrefixForStrings(e.addon);return new q(o.translate,n,i,l)})},CoreSitePluginsHelperProvider.prototype.registerAssignSubmissionHandler=function(e,n,t){var o=this;return this.registerComponentInitHandler(e,n,t,this.assignSubmissionDelegate,function(n,r){var i=(t.moodlecomponent||e.component).replace("assignsubmission_",""),l=o.getPrefixForStrings(e.addon);return new z(o.translate,n,i,l)})},CoreSitePluginsHelperProvider.prototype.registerBlockHandler=function(e,n,t,o){var r=this.sitePluginsProvider.getHandlerUniqueName(e,n),i=(t.moodlecomponent||e.component).replace("block_",""),l=this.getPrefixedString(e.addon,t.displaydata&&t.displaydata.title?t.displaydata.title:"pluginname");return this.blockDelegate.registerHandler(new ne(r,l,i,t,o)),r},CoreSitePluginsHelperProvider.prototype.registerCourseFormatHandler=function(e,n,t){this.logger.debug("Register site plugin in course format delegate:",e,t);var o=this.sitePluginsProvider.getHandlerUniqueName(e,n),r=(t.moodlecomponent||e.component).replace("format_","");return this.courseFormatDelegate.registerHandler(new d(o,r,t)),o},CoreSitePluginsHelperProvider.prototype.registerCourseOptionHandler=function(e,n,t,o){if(t.displaydata){this.logger.debug("Register site plugin in course option delegate:",e,t,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,n),i=this.getPrefixedString(e.addon,t.displaydata.title||"pluginname"),l=new f(r,i,e,t,o,this.sitePluginsProvider,this.utils);return this.courseOptionsDelegate.registerHandler(l),o&&o.restrict&&o.restrict.courses&&(this.courseRestrictHandlers[r]={plugin:e,handlerName:n,handlerSchema:t,handler:l}),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},CoreSitePluginsHelperProvider.prototype.registerMainMenuHandler=function(e,n,t,o){if(t.displaydata){this.logger.debug("Register site plugin in main menu delegate:",e,t,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,n),i=this.getPrefixedString(e.addon,t.displaydata.title||"pluginname");return this.mainMenuDelegate.registerHandler(new P(r,i,e,t,o)),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},CoreSitePluginsHelperProvider.prototype.registerMessageOutputHandler=function(e,n,t,o){if(t.displaydata){this.logger.debug("Register site plugin in message output delegate:",e,t,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,n),i=this.getPrefixedString(e.addon,t.displaydata.title||"pluginname"),l=(t.moodlecomponent||e.component).replace("message_","");return this.messageOutputDelegate.registerHandler(new H(r,l,i,e,t,o)),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},CoreSitePluginsHelperProvider.prototype.registerModuleHandler=function(e,n,t,o){if(t.displaydata){this.logger.debug("Register site plugin in module delegate:",e,t,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,n),i=(t.moodlecomponent||e.component).replace("mod_","");return this.moduleDelegate.registerHandler(new _(r,i,e,t,o,this.sitePluginsProvider,this.loggerProvider)),t.offlinefunctions&&Object.keys(t.offlinefunctions).length&&this.prefetchDelegate.registerHandler(new C(this.translate,this.appProvider,this.utils,this.courseProvider,this.filepoolProvider,this.sitesProvider,this.domUtils,this.filterHelper,this.pluginFileDelegate,this.sitePluginsProvider,e.component,r,i,t)),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},CoreSitePluginsHelperProvider.prototype.registerQuestionHandler=function(e,n,t){return this.registerComponentInitHandler(e,n,t,this.questionDelegate,function(n,o){return new D(n,t.moodlecomponent||e.component)})},CoreSitePluginsHelperProvider.prototype.registerQuestionBehaviourHandler=function(e,n,t){var o=this;return this.registerComponentInitHandler(e,n,t,this.questionBehaviourDelegate,function(n,r){var i=(t.moodlecomponent||e.component).replace("qbehaviour_","");return new U(o.questionProvider,n,i,r.templates.length)})},CoreSitePluginsHelperProvider.prototype.registerQuizAccessRuleHandler=function(e,n,t){return this.registerComponentInitHandler(e,n,t,this.accessRulesDelegate,function(n,o){return new B(n,t.moodlecomponent||e.component,o.templates.length)})},CoreSitePluginsHelperProvider.prototype.registerSettingsHandler=function(e,n,t,o){if(t.displaydata){this.logger.debug("Register site plugin in settings delegate:",e,t,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,n),i=this.getPrefixedString(e.addon,t.displaydata.title||"pluginname");return this.settingsDelegate.registerHandler(new w(r,i,e,t,o)),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},CoreSitePluginsHelperProvider.prototype.registerUserProfileHandler=function(e,n,t,o){if(t.displaydata){this.logger.debug("Register site plugin in user profile delegate:",e,t,o);var r=this.sitePluginsProvider.getHandlerUniqueName(e,n),i=this.getPrefixedString(e.addon,t.displaydata.title||"pluginname"),l=new b(r,i,e,t,o,this.sitePluginsProvider,this.utils);return this.userDelegate.registerHandler(l),o&&o.restrict&&o.restrict.courses&&(this.courseRestrictHandlers[r]={plugin:e,handlerName:n,handlerSchema:t,handler:l}),r}this.logger.warn("Ignore site plugin because it doesn't provide displaydata",e,t)},CoreSitePluginsHelperProvider.prototype.registerUserProfileFieldHandler=function(e,n,t){return this.registerComponentInitHandler(e,n,t,this.profileFieldDelegate,function(n,o){var r=(t.moodlecomponent||e.component).replace("profilefield_","");return new E(n,r)})},CoreSitePluginsHelperProvider.prototype.registerWorkshopAssessmentStrategyHandler=function(e,n,t){return this.registerComponentInitHandler(e,n,t,this.workshopAssessmentStrategyDelegate,function(n,o){var r=(t.moodlecomponent||e.component).replace("workshopform_","");return new Y(n,r)})},CoreSitePluginsHelperProvider.prototype.reloadCourseRestrictHandlers=function(){var e=this;if(!Object.keys(this.courseRestrictHandlers).length)return Promise.resolve();var n=[],t=function(t){var o=r.courseRestrictHandlers[t];if(!o.handler||!o.handler.setInitResult)return"continue";o.handler.updatingInit&&o.handler.updatingInit(),n.push(r.executeHandlerInit(o.plugin,o.handlerSchema).then(function(e){o.handler.setInitResult(e)}).catch(function(n){e.logger.error("Error reloading course restrict handler",n,o.plugin)}))},r=this;for(var i in this.courseRestrictHandlers)t(i);return Promise.all(n).then(function(){e.eventsProvider.trigger(o.a.SITE_PLUGINS_COURSE_RESTRICT_UPDATED,{})})},CoreSitePluginsHelperProvider}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(156);var o=function(){return function CoreCompileModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(10),r=t(154),i=(t(388),t(1308),function(){return function CoreCommentsModule(e,n,t){e.on(o.a.LOGIN,function(){r.a.pageSize=1,r.a.pageSizeOK=!1}),n.register(t)}}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(521);var o=function(){function CoreCommentsSyncCronHandler(e){this.commentsSync=e,this.name="CoreCommentsSyncCronHandler"}return CoreCommentsSyncCronHandler.prototype.execute=function(e,n){return this.commentsSync.syncAllComments(e,n)},CoreCommentsSyncCronHandler.prototype.getInterval=function(){return 3e5},CoreCommentsSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(231),t(203);var o=function(){return function CoreRatingModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(164),t(227),t(206),t(1311),t(1312),t(1313);var o=function(){return function CoreTagModule(e,n,t,o,r){e.registerHandler(n),t.registerHandler(o),t.registerHandler(r)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(164);var o=function(){function CoreTagMainMenuHandler(e,n){this.tagProvider=e,this.utils=n,this.name="CoreTag",this.priority=300}return CoreTagMainMenuHandler.prototype.isEnabled=function(){var e=this;return this.tagProvider.areTagsAvailable().then(function(n){return!!n&&e.utils.promiseWorks(e.tagProvider.getTagCollections())})},CoreTagMainMenuHandler.prototype.getDisplayData=function(){return{icon:"pricetags",title:"core.tag.tags",page:"CoreTagSearchPage",class:"core-tag-search-handler"}},CoreTagMainMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(164),function(e){function CoreTagIndexLinkHandler(n,t){var o=e.call(this)||this;return o.tagProvider=n,o.linkHelper=t,o.name="CoreTagIndexLinkHandler",o.pattern=/\/tag\/index\.php/,o}return Object(o.__extends)(CoreTagIndexLinkHandler,e),CoreTagIndexLinkHandler.prototype.getActions=function(e,n,t,o,r){var i=this;return[{action:function(e,n){var o={tagId:parseInt(t.id,10)||0,tagName:t.tag||"",collectionId:parseInt(t.tc,10)||0,areaId:parseInt(t.ta,10)||0,fromContextId:parseInt(t.from,10)||0,contextId:parseInt(t.ctx,10)||0,recursive:parseInt(t.rec,10)||1};o.tagId||o.tagName&&o.collectionId?i.linkHelper.goInSite(n,o.areaId?"CoreTagIndexAreaPage":"CoreTagIndexPage",o,e):i.linkHelper.goInSite(n,"CoreTagSearchPage",{},e)}}]},CoreTagIndexLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.tagProvider.areTagsAvailable(e)},CoreTagIndexLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(164),function(e){function CoreTagSearchLinkHandler(n,t){var o=e.call(this)||this;return o.tagProvider=n,o.linkHelper=t,o.name="CoreTagSearchLinkHandler",o.pattern=/\/tag\/search\.php/,o}return Object(o.__extends)(CoreTagSearchLinkHandler,e),CoreTagSearchLinkHandler.prototype.getActions=function(e,n,t,o,r){var i=this;return[{action:function(e,n){var o={collectionId:parseInt(t.tc,10)||0,query:t.query||""};i.linkHelper.goInSite(n,"CoreTagSearchPage",o,e)}}]},CoreTagSearchLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.tagProvider.areTagsAvailable(e)},CoreTagSearchLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(208),t(1315),t(1316),t(1317),t(1318),t(1319);var o=function(){return function AddonBlogModule(e,n,t,o,r,i,l,s,a,u){e.registerHandler(n),o.registerHandler(t),i.registerHandler(r),s.registerHandler(l),a.registerHandler(u)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(208);var o=function(){function AddonBlogMainMenuHandler(e){this.blogProvider=e,this.name="AddonBlog",this.priority=450}return AddonBlogMainMenuHandler.prototype.isEnabled=function(){return this.blogProvider.isPluginEnabled()},AddonBlogMainMenuHandler.prototype.getDisplayData=function(){return{icon:"fa-newspaper-o",title:"addon.blog.siteblogheading",page:"AddonBlogEntriesPage",class:"addon-blog-handler"}},AddonBlogMainMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(105),r=(t(208),function(){function AddonBlogUserHandler(e,n){this.linkHelper=e,this.blogProvider=n,this.name="AddonBlog:blogs",this.priority=300,this.type=o.a.TYPE_NEW_PAGE}return AddonBlogUserHandler.prototype.isEnabled=function(){return this.blogProvider.isPluginEnabled()},AddonBlogUserHandler.prototype.isEnabledForUser=function(e,n,t,o){return!0},AddonBlogUserHandler.prototype.getDisplayData=function(e,n){var t=this;return{icon:"fa-newspaper-o",title:"addon.blog.blogentries",class:"addon-blog-handler",action:function(e,n,o,r){e.preventDefault(),e.stopPropagation(),t.linkHelper.goInSite(n,"AddonBlogEntriesPage",{userId:o.id,courseId:r})}}},AddonBlogUserHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(523),r=(t(208),function(){function AddonBlogCourseOptionHandler(e,n,t,o,r,i){this.coursesProvider=e,this.blogProvider=n,this.courseHelper=t,this.courseProvider=o,this.sitesProvider=r,this.filepoolProvider=i,this.name="AddonBlog",this.priority=100}return AddonBlogCourseOptionHandler.prototype.invalidateEnabledForCourse=function(e,n,t){return this.courseProvider.invalidateCourseBlocks(e)},AddonBlogCourseOptionHandler.prototype.isEnabled=function(){return this.blogProvider.isPluginEnabled()},AddonBlogCourseOptionHandler.prototype.isEnabledForCourse=function(e,n,t,o){return this.courseHelper.hasABlockNamed(e,"blog_menu").then(function(e){return e&&t&&void 0!==t.blogs?t.blogs:e})},AddonBlogCourseOptionHandler.prototype.getDisplayData=function(e,n){return{title:"addon.blog.blog",class:"addon-blog-handler",component:o.a}},AddonBlogCourseOptionHandler.prototype.prefetch=function(e){var n=this,t=this.sitesProvider.getCurrentSiteId();return this.blogProvider.getEntries({courseid:e.id}).then(function(e){return e.entries.map(function(e){var o=[];return e.attachmentfiles&&e.attachmentfiles.length&&(o=e.attachmentfiles),e.summaryfiles&&e.summaryfiles.length&&(o=o.concat(e.summaryfiles)),o.length>0?n.filepoolProvider.addFilesToQueue(t,o,e.module,e.id):Promise.resolve()})})},AddonBlogCourseOptionHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(208),function(e){function AddonBlogIndexLinkHandler(n,t){var o=e.call(this)||this;return o.blogProvider=n,o.linkHelper=t,o.name="AddonBlogIndexLinkHandler",o.featureName="CoreUserDelegate_AddonBlog:blogs",o.pattern=/\/blog\/index\.php/,o}return Object(o.__extends)(AddonBlogIndexLinkHandler,e),AddonBlogIndexLinkHandler.prototype.getActions=function(e,n,t,o){var r=this,i={};return t.userid&&(i.userId=parseInt(t.userid,10)),t.modid&&(i.cmId=parseInt(t.modid,10)),t.courseid&&(i.courseId=parseInt(t.courseid,10)),t.entryid&&(i.entryId=parseInt(t.entryid,10)),t.groupid&&(i.groupId=parseInt(t.groupid,10)),t.tagid&&(i.tagId=parseInt(t.tagid,10)),[{action:function(e,n){r.linkHelper.goInSite(n,"AddonBlogEntriesPage",i,e,!Object.keys(i).length)}}]},AddonBlogIndexLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.blogProvider.isPluginEnabled(e)},AddonBlogIndexLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(225),r=(t(208),function(){function AddonBlogTagAreaHandler(e,n){this.tagHelper=e,this.blogProvider=n,this.name="AddonBlogTagAreaHandler",this.type="core/post"}return AddonBlogTagAreaHandler.prototype.isEnabled=function(){return this.blogProvider.isPluginEnabled()},AddonBlogTagAreaHandler.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},AddonBlogTagAreaHandler.prototype.getComponent=function(e){return o.a},AddonBlogTagAreaHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(173),t(1321),t(1322);var o=function(){return function AddonCourseCompletionModule(e,n,t,o){e.registerHandler(n),t.registerHandler(o)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(173);var o=t(14),r=t(526),i=function(){function AddonCourseCompletionCourseOptionHandler(e){this.courseCompletionProvider=e,this.name="AddonCourseCompletion",this.priority=200}return AddonCourseCompletionCourseOptionHandler.prototype.isEnabled=function(){return this.courseCompletionProvider.isPluginViewEnabled()},AddonCourseCompletionCourseOptionHandler.prototype.isEnabledForCourse=function(e,n,t,r){var i=this;return(!n||n.type!=o.a.ACCESS_GUEST)&&this.courseCompletionProvider.isPluginViewEnabledForCourse(e).then(function(n){return!!n&&i.courseCompletionProvider.isPluginViewEnabledForUser(e)})},AddonCourseCompletionCourseOptionHandler.prototype.getDisplayData=function(e,n){return{title:"addon.coursecompletion.completionmenuitem",class:"addon-coursecompletion-course-handler",component:r.a}},AddonCourseCompletionCourseOptionHandler.prototype.invalidateEnabledForCourse=function(e,n,t){return this.courseCompletionProvider.invalidateCourseCompletion(e)},AddonCourseCompletionCourseOptionHandler.prototype.prefetch=function(e){return this.courseCompletionProvider.getCompletion(e.id,void 0,{getFromCache:!1,emergencyCache:!1}).catch(function(e){if(!e||"notenroled"!=e.errorcode)return Promise.reject(e)})},AddonCourseCompletionCourseOptionHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(105),r=t(10),i=t(46),l=(t(173),function(){function AddonCourseCompletionUserHandler(e,n){var t=this;this.courseCompletionProvider=n,this.name="AddonCourseCompletion",this.type=o.a.TYPE_NEW_PAGE,this.priority=200,this.enabledCache={},e.on(r.a.LOGOUT,function(){t.enabledCache={}}),e.on(i.a.PROFILE_REFRESHED,function(e){delete t.enabledCache[e.userId+"-"+e.courseId]})}return AddonCourseCompletionUserHandler.prototype.isEnabled=function(){return this.courseCompletionProvider.isPluginViewEnabled()},AddonCourseCompletionUserHandler.prototype.isEnabledForUser=function(e,n,t,o){var r=this;return!!n&&this.courseCompletionProvider.isPluginViewEnabledForCourse(n).then(function(t){if(!t)return!1;var o=e.id+"-"+n;return void 0!==r.enabledCache[o]?r.enabledCache[o]:r.courseCompletionProvider.isPluginViewEnabledForUser(n,e.id).then(function(e){return r.enabledCache[o]=e,e})})},AddonCourseCompletionUserHandler.prototype.getDisplayData=function(e,n){return{icon:"checkbox-outline",title:"addon.coursecompletion.coursecompletion",class:"addon-coursecompletion-handler",action:function(e,n,t,o){e.preventDefault(),e.stopPropagation(),n.push("AddonCourseCompletionReportPage",{courseId:o,userId:t.id})}}},AddonCourseCompletionUserHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1324),t(1326),t(1328),t(1330),t(1332);var o=function(){return function AddonUserProfileFieldModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1325),t(681);var o=function(){return function AddonUserProfileFieldCheckboxModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(681),r=function(){function AddonUserProfileFieldCheckboxHandler(){this.name="AddonUserProfileFieldCheckbox",this.type="checkbox"}return AddonUserProfileFieldCheckboxHandler.prototype.isEnabled=function(){return!0},AddonUserProfileFieldCheckboxHandler.prototype.getData=function(e,n,t,o){var r="profile_field_"+e.shortname;if(void 0!==o[r])return{type:"checkbox",name:r,value:o[r]?1:0}},AddonUserProfileFieldCheckboxHandler.prototype.getComponent=function(e){return o.a},AddonUserProfileFieldCheckboxHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1327),t(682);var o=function(){return function AddonUserProfileFieldDatetimeModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(682),r=function(){function AddonUserProfileFieldDatetimeHandler(e){this.timeUtils=e,this.name="AddonUserProfileFieldDatetime",this.type="datetime"}return AddonUserProfileFieldDatetimeHandler.prototype.isEnabled=function(){return!0},AddonUserProfileFieldDatetimeHandler.prototype.getData=function(e,n,t,o){var r="profile_field_"+e.shortname;if(o[r])return{type:"datetime",name:"profile_field_"+e.shortname,value:this.timeUtils.convertToTimestamp(o[r])}},AddonUserProfileFieldDatetimeHandler.prototype.getComponent=function(e){return o.a},AddonUserProfileFieldDatetimeHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1329),t(683);var o=function(){return function AddonUserProfileFieldMenuModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(683),r=function(){function AddonUserProfileFieldMenuHandler(){this.name="AddonUserProfileFieldMenu",this.type="menu"}return AddonUserProfileFieldMenuHandler.prototype.isEnabled=function(){return!0},AddonUserProfileFieldMenuHandler.prototype.getData=function(e,n,t,o){var r="profile_field_"+e.shortname;if(o[r])return{type:"menu",name:r,value:o[r]}},AddonUserProfileFieldMenuHandler.prototype.getComponent=function(e){return o.a},AddonUserProfileFieldMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1331),t(684);var o=function(){return function AddonUserProfileFieldTextModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(684),r=function(){function AddonUserProfileFieldTextHandler(e){this.textUtils=e,this.name="AddonUserProfileFieldText",this.type="text"}return AddonUserProfileFieldTextHandler.prototype.isEnabled=function(){return!0},AddonUserProfileFieldTextHandler.prototype.getData=function(e,n,t,o){var r="profile_field_"+e.shortname;return{type:"text",name:r,value:this.textUtils.cleanTags(o[r])}},AddonUserProfileFieldTextHandler.prototype.getComponent=function(e){return o.a},AddonUserProfileFieldTextHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1333),t(685);var o=function(){return function AddonUserProfileFieldTextareaModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(685),r=function(){function AddonUserProfileFieldTextareaHandler(e){this.textUtils=e,this.name="AddonUserProfileFieldTextarea",this.type="textarea"}return AddonUserProfileFieldTextareaHandler.prototype.isEnabled=function(){return!0},AddonUserProfileFieldTextareaHandler.prototype.getData=function(e,n,t,o){var r="profile_field_"+e.shortname;if(o[r]){var i=o[r]||"";return i=this.textUtils.formatHtmlLines(i),{type:"textarea",name:r,value:JSON.stringify({text:i,format:1})}}},AddonUserProfileFieldTextareaHandler.prototype.getComponent=function(e){return o.a},AddonUserProfileFieldTextareaHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1336);var o=function(){return function AddonBlockActivityModulesModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(686);var o=function(){return function AddonBlockActivityModulesComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(686),i=function(e){function AddonBlockActivityModulesHandler(){var n=e.call(this)||this;return n.name="AddonBlockActivityModules",n.blockName="activity_modules",n}return Object(o.__extends)(AddonBlockActivityModulesHandler,e),AddonBlockActivityModulesHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_activitymodules.pluginname",class:"addon-block-activitymodules",component:r.a}},AddonBlockActivityModulesHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1338);var o=function(){return function AddonBlockBadgesModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockBadgesHandler(){var n=e.call(this)||this;return n.name="AddonBlockBadges",n.blockName="badges",n}return Object(o.__extends)(AddonBlockBadgesHandler,e),AddonBlockBadgesHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_badges.pluginname",class:"addon-block-badges",component:r.a}},AddonBlockBadgesHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1340);var o=function(){return function AddonBlockBlogMenuModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockBlogMenuHandler(){var n=e.call(this)||this;return n.name="AddonBlockBlogMenu",n.blockName="blog_menu",n}return Object(o.__extends)(AddonBlockBlogMenuHandler,e),AddonBlockBlogMenuHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_blogmenu.pluginname",class:"addon-block-blog-menu",component:r.a}},AddonBlockBlogMenuHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1342);var o=function(){return function AddonBlockBlogTagsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockBlogTagsHandler(){var n=e.call(this)||this;return n.name="AddonBlockBlogTags",n.blockName="blog_tags",n}return Object(o.__extends)(AddonBlockBlogTagsHandler,e),AddonBlockBlogTagsHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_blogtags.pluginname",class:"addon-block-blog-tags",component:r.a}},AddonBlockBlogTagsHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1344);var o=function(){return function AddonBlockBlogRecentModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockBlogRecentHandler(){var n=e.call(this)||this;return n.name="AddonBlockBlogRecent",n.blockName="blog_recent",n}return Object(o.__extends)(AddonBlockBlogRecentHandler,e),AddonBlockBlogRecentHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_blogrecent.pluginname",class:"addon-block-blog-recent",component:r.a}},AddonBlockBlogRecentHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1346);var o=function(){return function AddonBlockCalendarMonthModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(226),i=t(83),l=function(e){function AddonBlockCalendarMonthHandler(n){var t=e.call(this)||this;return t.calendarProvider=n,t.name="AddonBlockCalendarMonth",t.blockName="calendar_month",t}return Object(o.__extends)(AddonBlockCalendarMonthHandler,e),AddonBlockCalendarMonthHandler.prototype.getDisplayData=function(e,n,t,o){var i="AddonCalendarListPage",l="course"==t?{courseId:o}:{};return this.calendarProvider.canViewMonthInSite()&&(i="AddonCalendarIndexPage"),{title:"addon.block_calendarmonth.pluginname",class:"addon-block-calendar-month",component:r.a,link:i,linkParams:l}},AddonBlockCalendarMonthHandler}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1348);var o=function(){return function AddonBlockCalendarUpcomingModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(226),i=t(83),l=function(e){function AddonBlockCalendarUpcomingHandler(n){var t=e.call(this)||this;return t.calendarProvider=n,t.name="AddonBlockCalendarUpcoming",t.blockName="calendar_upcoming",t}return Object(o.__extends)(AddonBlockCalendarUpcomingHandler,e),AddonBlockCalendarUpcomingHandler.prototype.getDisplayData=function(e,n,t,o){var i="AddonCalendarListPage",l="course"==t?{courseId:o}:{};return this.calendarProvider.canViewMonthInSite()&&(i="AddonCalendarIndexPage",l.upcoming=!0),{title:"addon.block_calendarupcoming.pluginname",class:"addon-block-calendar-upcoming",component:r.a,link:i,linkParams:l}},AddonBlockCalendarUpcomingHandler}(i.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1350);var o=function(){return function AddonBlockCommentsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(226),i=function(e){function AddonBlockCommentsHandler(){var n=e.call(this)||this;return n.name="AddonBlockComments",n.blockName="comments",n}return Object(o.__extends)(AddonBlockCommentsHandler,e),AddonBlockCommentsHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_comments.pluginname",class:"addon-block-comments",component:r.a,link:"CoreCommentsViewerPage",linkParams:{contextLevel:t,instanceId:o,componentName:"block_comments",area:"page_comments",itemId:0}}},AddonBlockCommentsHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1352);var o=function(){return function AddonBlockCompletionStatusModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(226),i=function(e){function AddonBlockCompletionStatusHandler(){var n=e.call(this)||this;return n.name="AddonBlockCompletionStatus",n.blockName="completionstatus",n}return Object(o.__extends)(AddonBlockCompletionStatusHandler,e),AddonBlockCompletionStatusHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_completionstatus.pluginname",class:"addon-block-completion-status",component:r.a,link:"AddonCourseCompletionReportPage",linkParams:{courseId:o}}},AddonBlockCompletionStatusHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1354);var o=function(){return function AddonBlockGlossaryRandomModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockGlossaryRandomHandler(){var n=e.call(this)||this;return n.name="AddonBlockGlossaryRandom",n.blockName="glossary_random",n}return Object(o.__extends)(AddonBlockGlossaryRandomHandler,e),AddonBlockGlossaryRandomHandler.prototype.getDisplayData=function(e,n,t,o){return{title:n.contents.title||"addon.block_glossaryrandom.pluginname",class:"addon-block-glossary-random",component:r.a}},AddonBlockGlossaryRandomHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1356);var o=function(){return function AddonBlockHtmlModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockHtmlHandler(){var n=e.call(this)||this;return n.name="AddonBlockHtml",n.blockName="html",n}return Object(o.__extends)(AddonBlockHtmlHandler,e),AddonBlockHtmlHandler.prototype.getDisplayData=function(e,n,t,o){return{title:n.contents.title,class:"addon-block-html",component:r.a}},AddonBlockHtmlHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1359);var o=function(){return function AddonBlockMyOverviewModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(687);var o=function(){return function AddonBlockMyOverviewComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(687),i=function(e){function AddonBlockMyOverviewHandler(n,t){var o=e.call(this)||this;return o.coursesProvider=n,o.sitesProvider=t,o.name="AddonBlockMyOverview",o.blockName="myoverview",o}return Object(o.__extends)(AddonBlockMyOverviewHandler,e),AddonBlockMyOverviewHandler.prototype.isEnabled=function(){return this.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.6")||!this.coursesProvider.isMyCoursesDisabledInSite()},AddonBlockMyOverviewHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_myoverview.pluginname",class:"addon-block-myoverview",component:r.a}},AddonBlockMyOverviewHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1361);var o=function(){return function AddonBlockNewsItemsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockNewsItemsHandler(){var n=e.call(this)||this;return n.name="AddonBlockNewsItems",n.blockName="news_items",n}return Object(o.__extends)(AddonBlockNewsItemsHandler,e),AddonBlockNewsItemsHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_newsitems.pluginname",class:"addon-block-news-items",component:r.a}},AddonBlockNewsItemsHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1363);var o=function(){return function AddonBlockOnlineUsersModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockOnlineUsersHandler(){var n=e.call(this)||this;return n.name="AddonBlockOnlineUsers",n.blockName="online_users",n}return Object(o.__extends)(AddonBlockOnlineUsersHandler,e),AddonBlockOnlineUsersHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_onlineusers.pluginname",class:"addon-block-online-users",component:r.a}},AddonBlockOnlineUsersHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1365);var o=function(){return function AddonBlockLearningPlansModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(226),i=function(e){function AddonBlockLearningPlansHandler(){var n=e.call(this)||this;return n.name="AddonBlockLearningPlans",n.blockName="lp",n}return Object(o.__extends)(AddonBlockLearningPlansHandler,e),AddonBlockLearningPlansHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_learningplans.pluginname",class:"addon-block-learning-plans",component:r.a,link:"AddonCompetencyPlanListPage"}},AddonBlockLearningPlansHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1367);var o=function(){return function AddonBlockPrivateFilesModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(226),i=function(e){function AddonBlockPrivateFilesHandler(){var n=e.call(this)||this;return n.name="AddonBlockPrivateFiles",n.blockName="private_files",n}return Object(o.__extends)(AddonBlockPrivateFilesHandler,e),AddonBlockPrivateFilesHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_privatefiles.pluginname",class:"addon-block-private-files",component:r.a,link:"AddonFilesListPage",linkParams:{root:"my"}}},AddonBlockPrivateFilesHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1370);var o=function(){return function AddonBlockSiteMainMenuModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(688);var o=function(){return function AddonBlockSiteMainMenuComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(688),i=function(e){function AddonBlockSiteMainMenuHandler(){var n=e.call(this)||this;return n.name="AddonBlockSiteMainMenu",n.blockName="site_main_menu",n}return Object(o.__extends)(AddonBlockSiteMainMenuHandler,e),AddonBlockSiteMainMenuHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_sitemainmenu.pluginname",class:"addon-block-sitemainmenu",component:r.a}},AddonBlockSiteMainMenuHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(312),t(1373);var o=function(){return function AddonBlockTimelineModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(689);var o=function(){return function AddonBlockTimelineComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(689),i=function(e){function AddonBlockTimelineHandler(n,t,o){var r=e.call(this)||this;return r.timelineProvider=n,r.coursesProvider=t,r.sitesProvider=o,r.name="AddonBlockTimeline",r.blockName="timeline",r}return Object(o.__extends)(AddonBlockTimelineHandler,e),AddonBlockTimelineHandler.prototype.isEnabled=function(){var e=this;return this.timelineProvider.isAvailable().then(function(n){return n&&(e.sitesProvider.getCurrentSite().isVersionGreaterEqualThan("3.6")||!e.coursesProvider.isMyCoursesDisabledInSite())})},AddonBlockTimelineHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_timeline.pluginname",class:"addon-block-timeline",component:r.a}},AddonBlockTimelineHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1376);var o=function(){return function AddonBlockRecentlyAccessedCoursesModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(691);var o=function(){return function AddonBlockRecentlyAccessedCoursesComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(691),i=function(e){function AddonBlockRecentlyAccessedCoursesHandler(){var n=e.call(this)||this;return n.name="AddonBlockRecentlyAccessedCourses",n.blockName="recentlyaccessedcourses",n}return Object(o.__extends)(AddonBlockRecentlyAccessedCoursesHandler,e),AddonBlockRecentlyAccessedCoursesHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_recentlyaccessedcourses.pluginname",class:"addon-block-recentlyaccessedcourses",component:r.a}},AddonBlockRecentlyAccessedCoursesHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1379),t(467);var o=function(){return function AddonBlockRecentlyAccessedItemsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(692);var o=function(){return function AddonBlockRecentlyAccessedItemsComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(692),i=function(e){function AddonBlockRecentlyAccessedItemsHandler(){var n=e.call(this)||this;return n.name="AddonBlockRecentlyAccessedItems",n.blockName="recentlyaccesseditems",n}return Object(o.__extends)(AddonBlockRecentlyAccessedItemsHandler,e),AddonBlockRecentlyAccessedItemsHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_recentlyaccesseditems.pluginname",class:"addon-block-recentlyaccesseditems",component:r.a}},AddonBlockRecentlyAccessedItemsHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1381);var o=function(){return function AddonBlockRecentActivityModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockRecentActivityHandler(){var n=e.call(this)||this;return n.name="AddonBlockRecentActivity",n.blockName="recent_activity",n}return Object(o.__extends)(AddonBlockRecentActivityHandler,e),AddonBlockRecentActivityHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_recentactivity.pluginname",class:"addon-block-recent-activity",component:r.a}},AddonBlockRecentActivityHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1383);var o=function(){return function AddonBlockRssClientModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockRssClientHandler(){var n=e.call(this)||this;return n.name="AddonBlockRssClient",n.blockName="rss_client",n}return Object(o.__extends)(AddonBlockRssClientHandler,e),AddonBlockRssClientHandler.prototype.getDisplayData=function(e,n,t,o){return{title:n.contents.title||"addon.block_rssclient.pluginname",class:"addon-block-rss-client",component:r.a}},AddonBlockRssClientHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1386);var o=function(){return function AddonBlockStarredCoursesModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(693);var o=function(){return function AddonBlockStarredCoursesComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(693),i=function(e){function AddonBlockStarredCoursesHandler(){var n=e.call(this)||this;return n.name="AddonBlockStarredCourses",n.blockName="starredcourses",n}return Object(o.__extends)(AddonBlockStarredCoursesHandler,e),AddonBlockStarredCoursesHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.starredcourses.pluginname",class:"addon-block-starredcourses",component:r.a}},AddonBlockStarredCoursesHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1388);var o=function(){return function AddonBlockSelfCompletionModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(226),i=function(e){function AddonBlockSelfCompletionHandler(){var n=e.call(this)||this;return n.name="AddonBlockSelfCompletion",n.blockName="selfcompletion",n}return Object(o.__extends)(AddonBlockSelfCompletionHandler,e),AddonBlockSelfCompletionHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_selfcompletion.pluginname",class:"addon-block-self-completion",component:r.a,link:"AddonCourseCompletionReportPage",linkParams:{courseId:o}}},AddonBlockSelfCompletionHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1390);var o=function(){return function AddonBlockTagsModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(158),i=function(e){function AddonBlockTagsHandler(){var n=e.call(this)||this;return n.name="AddonBlockTags",n.blockName="tags",n}return Object(o.__extends)(AddonBlockTagsHandler,e),AddonBlockTagsHandler.prototype.getDisplayData=function(e,n,t,o){return{title:"addon.block_tags.pluginname",class:"addon-block-tags",component:r.a}},AddonBlockTagsHandler}(t(83).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1392),t(98),t(1393),t(1394),t(1395),t(1396),t(1397),t(1398),t(217),t(399),t(1399),t(292),t(128),t(592),t(1400),t(1401);var o=function(){return function AddonModDataModule(e,n,t,o,r,i,l,s,a,u,d,c,p,f,h){e.registerHandler(n),t.registerHandler(o),r.registerHandler(i),r.registerHandler(a),r.registerHandler(u),r.registerHandler(d),r.registerHandler(c),r.registerHandler(p),l.register(s),f.registerHandler(h)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(500),r=(t(98),t(42)),i=function(){function AddonModDataModuleHandler(e,n){this.courseProvider=e,this.dataProvider=n,this.name="AddonModData",this.modName="data",this.supportedFeatures=(t={},t[r.a.FEATURE_GROUPS]=!0,t[r.a.FEATURE_GROUPINGS]=!0,t[r.a.FEATURE_MOD_INTRO]=!0,t[r.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!0,t[r.a.FEATURE_COMPLETION_HAS_RULES]=!0,t[r.a.FEATURE_GRADE_HAS_GRADE]=!0,t[r.a.FEATURE_GRADE_OUTCOMES]=!0,t[r.a.FEATURE_BACKUP_MOODLE2]=!0,t[r.a.FEATURE_SHOW_DESCRIPTION]=!0,t[r.a.FEATURE_RATE]=!0,t[r.a.FEATURE_COMMENT]=!0,t);var t}return AddonModDataModuleHandler.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},AddonModDataModuleHandler.prototype.getData=function(e,n,t){return{icon:this.courseProvider.getModuleIconSrc(this.modName,e.modicon),title:e.name,class:"addon-mod_data-handler",showDownloadButton:!0,action:function(e,n,t,o,r,i){var l={module:t,courseId:o};i&&Object.assign(l,i),n.push("AddonModDataIndexPage",l,r)}}},AddonModDataModuleHandler.prototype.getMainComponent=function(e,n){return o.a},AddonModDataModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=(t(98),function(e){function AddonModDataLinkHandler(n,t){var o=e.call(this,n,"AddonModData","data","d")||this;return o.dataProvider=t,o.name="AddonModDataLinkHandler",o}return Object(o.__extends)(AddonModDataLinkHandler,e),AddonModDataLinkHandler.prototype.isEnabled=function(e,n,t,o){return this.dataProvider.isPluginEnabled()},AddonModDataLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(98),t(217),function(e){function AddonModDataApproveLinkHandler(n,t){var o=e.call(this)||this;return o.dataProvider=n,o.dataHelper=t,o.name="AddonModDataApproveLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModData",o.pattern=/\/mod\/data\/view\.php.*([\?\&](d|approve|disapprove)=\d+)/,o}return Object(o.__extends)(AddonModDataApproveLinkHandler,e),AddonModDataApproveLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var i=parseInt(t.d,10),l=parseInt(t.approve,10)||parseInt(t.disapprove,10),s=!!parseInt(t.approve,10);r.dataHelper.approveOrDisapproveEntry(i,l,s,o,e)}}]},AddonModDataApproveLinkHandler.prototype.isEnabled=function(e,n,t,o){return void 0!==t.d&&(void 0!==t.approve||void 0!==t.disapprove)&&this.dataProvider.isPluginEnabled(e)},AddonModDataApproveLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(98),t(217),function(e){function AddonModDataDeleteLinkHandler(n,t){var o=e.call(this)||this;return o.dataProvider=n,o.dataHelper=t,o.name="AddonModDataDeleteLinkHandler",o.featureName="CoreCourseModuleDelegate_AddonModData",o.pattern=/\/mod\/data\/view\.php.*([\?\&](d|delete)=\d+)/,o}return Object(o.__extends)(AddonModDataDeleteLinkHandler,e),AddonModDataDeleteLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var i=parseInt(t.d,10),l=parseInt(t.delete,10);r.dataHelper.showDeleteEntryModal(i,l,o)}}]},AddonModDataDeleteLinkHandler.prototype.isEnabled=function(e,n,t,o){return void 0!==t.d&&void 0!==t.delete&&this.dataProvider.isPluginEnabled(e)},AddonModDataDeleteLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(98),function(e){function AddonModDataShowLinkHandler(n,t,o,r){var i=e.call(this)||this;return i.linkHelper=n,i.dataProvider=t,i.courseProvider=o,i.domUtils=r,i.name="AddonModDataShowLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModData",i.pattern=/\/mod\/data\/view\.php.*([\?\&](d|rid|page|group|mode)=\d+)/,i}return Object(o.__extends)(AddonModDataShowLinkHandler,e),AddonModDataShowLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o=r.domUtils.showModalLoading(),i=parseInt(t.d,10),l=parseInt(t.rid,10)||!1,s=parseInt(t.group,10)||!1,a=parseInt(t.page,10)||!1;r.courseProvider.getModuleBasicInfoByInstance(i,"data",e).then(function(o){var i={module:o,courseId:o.course};return s&&(i.group=s),t.mode&&"single"==t.mode?i.offset=a||0:l&&(i.entryId=l),r.linkHelper.goInSite(n,"AddonModDataEntryPage",i,e)}).finally(function(){o.dismiss()})}}]},AddonModDataShowLinkHandler.prototype.isEnabled=function(e,n,t,o){return void 0!==t.d&&(!!(t.mode&&"single"==t.mode||void 0!==t.rid)&&this.dataProvider.isPluginEnabled(e))},AddonModDataShowLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(56),i=(t(98),function(e){function AddonModDataEditLinkHandler(n,t,o,r){var i=e.call(this)||this;return i.linkHelper=n,i.dataProvider=t,i.courseProvider=o,i.domUtils=r,i.name="AddonModDataEditLinkHandler",i.featureName="CoreCourseModuleDelegate_AddonModData",i.pattern=/\/mod\/data\/edit\.php.*([\?\&](d|rid)=\d+)/,i}return Object(o.__extends)(AddonModDataEditLinkHandler,e),AddonModDataEditLinkHandler.prototype.getActions=function(e,n,t,o){var r=this;return[{action:function(e,n){var o=r.domUtils.showModalLoading(),i=parseInt(t.d,10),l=parseInt(t.rid,10)||!1;r.courseProvider.getModuleBasicInfoByInstance(i,"data",e).then(function(t){var o={module:t,courseId:t.course};return l&&(o.entryId=l),r.linkHelper.goInSite(n,"AddonModDataEditPage",o,e)}).finally(function(){o.dismiss()})}}]},AddonModDataEditLinkHandler.prototype.isEnabled=function(e,n,t,o){return void 0!==t.d&&this.dataProvider.isPluginEnabled(e)},AddonModDataEditLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(114),i=(t(4),t(98),function(e){function AddonModDataListLinkHandler(n,t,o){var r=e.call(this,n,t,"AddonModData","data")||this;return r.dataProvider=o,r.name="AddonModDataListLinkHandler",r}return Object(o.__extends)(AddonModDataListLinkHandler,e),AddonModDataListLinkHandler.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},AddonModDataListLinkHandler}(r.a))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(329);var o=function(){function AddonModDataSyncCronHandler(e){this.dataSync=e,this.name="AddonModDataSyncCronHandler"}return AddonModDataSyncCronHandler.prototype.execute=function(e,n){return this.dataSync.syncAllDatabases(e,n)},AddonModDataSyncCronHandler.prototype.getInterval=function(){return this.dataSync.syncInterval},AddonModDataSyncCronHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(225),r=(t(98),function(){function AddonModDataTagAreaHandler(e,n){this.tagHelper=e,this.dataProvider=n,this.name="AddonModDataTagAreaHandler",this.type="mod_data/data_records"}return AddonModDataTagAreaHandler.prototype.isEnabled=function(){return this.dataProvider.isPluginEnabled()},AddonModDataTagAreaHandler.prototype.parseContent=function(e){return this.tagHelper.parseFeedContent(e)},AddonModDataTagAreaHandler.prototype.getComponent=function(e){return o.a},AddonModDataTagAreaHandler}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1402),t(1404),t(1406),t(1408),t(1410),t(1412),t(1414),t(1416),t(1418),t(1420),t(1421),t(1423);var o=function(){return function AddonModDataFieldModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1403),t(128),t(694);var o=function(){return function AddonModDataFieldCheckboxModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(694),r=function(){function AddonModDataFieldCheckboxHandler(e){this.translate=e,this.name="AddonModDataFieldCheckboxHandler",this.type="checkbox"}return AddonModDataFieldCheckboxHandler.prototype.getComponent=function(e,n){return o.a},AddonModDataFieldCheckboxHandler.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id,o="f_"+e.id+"_allreq",r=[];return!!(n[t]&&n[t].length>0)&&(r.push({name:t,value:n[t]}),n[o]&&r.push({name:o,value:!0}),r)},AddonModDataFieldCheckboxHandler.prototype.getFieldEditData=function(e,n,t){return[{fieldid:e.id,value:n["f_"+e.id]||[]}]},AddonModDataFieldCheckboxHandler.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",n["f_"+e.id].join("##")!=t},AddonModDataFieldCheckboxHandler.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},AddonModDataFieldCheckboxHandler.prototype.overrideData=function(e,n,t){return e.content=n[""]&&n[""].join("##")||"",e},AddonModDataFieldCheckboxHandler.prototype.isEnabled=function(){return!0},AddonModDataFieldCheckboxHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1405),t(128),t(695);var o=function(){return function AddonModDataFieldDateModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(695),r=function(){function AddonModDataFieldDateHandler(e,n){this.translate=e,this.timeUtils=n,this.name="AddonModDataFieldDateHandler",this.type="date"}return AddonModDataFieldDateHandler.prototype.getComponent=function(e,n){return o.a},AddonModDataFieldDateHandler.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id,o="f_"+e.id+"_z";if(n[o]&&"string"==typeof n[t]){var r=[],i=n[t].substr(0,10).split("-"),l=i[1],s=i[2];return r.push({name:t+"_y",value:i[0]}),r.push({name:t+"_m",value:l}),r.push({name:t+"_d",value:s}),r.push({name:o,value:1}),r}return!1},AddonModDataFieldDateHandler.prototype.getFieldEditData=function(e,n,t){var o="f_"+e.id;if("string"==typeof n[o]){var r=[],i=n[o].substr(0,10).split("-"),l=i[1],s=i[2];return r.push({fieldid:e.id,subfield:"year",value:i[0]}),r.push({fieldid:e.id,subfield:"month",value:l}),r.push({fieldid:e.id,subfield:"day",value:s}),r}return!1},AddonModDataFieldDateHandler.prototype.hasFieldDataChanged=function(e,n,t){var o="f_"+e.id,r=n[o]&&n[o].substr(0,10)||"";return t=t&&t.content&&this.timeUtils.toDatetimeFormat(1e3*t.content).substr(0,10)||"",r!=t},AddonModDataFieldDateHandler.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&!(n.length<2)&&n[0].value&&n[1].value&&n[2].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},AddonModDataFieldDateHandler.prototype.overrideData=function(e,n,t){var o=Date.UTC(n.year||"",n.month?n.month-1:null,n.day||null);return o=Math.floor(o/1e3),e.content=o||"",e},AddonModDataFieldDateHandler.prototype.isEnabled=function(){return!0},AddonModDataFieldDateHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1407),t(128),t(696);var o=function(){return function AddonModDataFieldFileModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var o=t(98),r=t(696),i=function(){function AddonModDataFieldFileHandler(e,n,t){this.translate=e,this.fileSessionprovider=n,this.fileUploaderProvider=t,this.name="AddonModDataFieldFileHandler",this.type="file"}return AddonModDataFieldFileHandler.prototype.getComponent=function(e,n){return r.a},AddonModDataFieldFileHandler.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},AddonModDataFieldFileHandler.prototype.getFieldEditData=function(e,n,t){var o=this.getFieldEditFiles(e);return[{fieldid:e.id,subfield:"file",files:o}]},AddonModDataFieldFileHandler.prototype.getFieldEditFiles=function(e){return this.fileSessionprovider.getFiles(o.a.COMPONENT,e.dataid+"_"+e.id)},AddonModDataFieldFileHandler.prototype.hasFieldDataChanged=function(e,n,t){var r=this.fileSessionprovider.getFiles(o.a.COMPONENT,e.dataid+"_"+e.id)||[],i=t&&t.files||[];return i.length&&(i=[i[0]]),this.fileUploaderProvider.areFileListDifferent(r,i)},AddonModDataFieldFileHandler.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},AddonModDataFieldFileHandler.prototype.overrideData=function(e,n,t){return n&&n.file&&n.file.offline>0&&t&&t.length>0?(e.content=t[0].filename,e.files=[t[0]]):n&&n.file&&n.file.online&&n.file.online.length>0&&(e.content=n.file.online[0].filename,e.files=[n.file.online[0]]),e},AddonModDataFieldFileHandler.prototype.isEnabled=function(){return!0},AddonModDataFieldFileHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1409),t(128),t(697);var o=function(){return function AddonModDataFieldLatlongModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(697),r=function(){function AddonModDataFieldLatlongHandler(e){this.translate=e,this.name="AddonModDataFieldLatlongHandler",this.type="latlong"}return AddonModDataFieldLatlongHandler.prototype.getComponent=function(e,n){return o.a},AddonModDataFieldLatlongHandler.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},AddonModDataFieldLatlongHandler.prototype.getFieldEditData=function(e,n,t){var o="f_"+e.id;return[{fieldid:e.id,subfield:"0",value:n[o+"_0"]||""},{fieldid:e.id,subfield:"1",value:n[o+"_1"]||""}]},AddonModDataFieldLatlongHandler.prototype.hasFieldDataChanged=function(e,n,t){var o="f_"+e.id;return(n[o+"_0"]||"")!=(t&&t.content||"")||(n[o+"_1"]||"")!=(t&&t.content1||"")},AddonModDataFieldLatlongHandler.prototype.getFieldsNotifications=function(e,n){var t=0;return n.forEach(function(e){void 0!==e.value&&""!=e.value&&t++}),1==t?this.translate.instant("addon.mod_data.latlongboth"):!(!e.required||0!=t)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},AddonModDataFieldLatlongHandler.prototype.overrideData=function(e,n,t){return e.content=n[0]||"",e.content1=n[1]||"",e},AddonModDataFieldLatlongHandler.prototype.isEnabled=function(){return!0},AddonModDataFieldLatlongHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1411),t(128),t(698);var o=function(){return function AddonModDataFieldMenuModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(698),r=function(){function AddonModDataFieldMenuHandler(e){this.translate=e,this.name="AddonModDataFieldMenuHandler",this.type="menu"}return AddonModDataFieldMenuHandler.prototype.getComponent=function(e,n){return o.a},AddonModDataFieldMenuHandler.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},AddonModDataFieldMenuHandler.prototype.getFieldEditData=function(e,n,t){var o="f_"+e.id;return!!n[o]&&[{fieldid:e.id,value:n[o]}]},AddonModDataFieldMenuHandler.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",(n["f_"+e.id]||"")!=t},AddonModDataFieldMenuHandler.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},AddonModDataFieldMenuHandler.prototype.overrideData=function(e,n,t){return e.content=n[""]||"",e},AddonModDataFieldMenuHandler.prototype.isEnabled=function(){return!0},AddonModDataFieldMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1413),t(128),t(699);var o=function(){return function AddonModDataFieldMultimenuModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(699),r=function(){function AddonModDataFieldMultimenuHandler(e){this.translate=e,this.name="AddonModDataFieldMultimenuHandler",this.type="multimenu"}return AddonModDataFieldMultimenuHandler.prototype.getComponent=function(e,n){return o.a},AddonModDataFieldMultimenuHandler.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id,o="f_"+e.id+"_allreq";if(n[t]&&n[t].length>0){var r=[];return r.push({name:t,value:n[t]}),n[o]&&r.push({name:o,value:!0}),r}return!1},AddonModDataFieldMultimenuHandler.prototype.getFieldEditData=function(e,n,t){return[{fieldid:e.id,value:n["f_"+e.id]||[]}]},AddonModDataFieldMultimenuHandler.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",n["f_"+e.id].join("##")!=t},AddonModDataFieldMultimenuHandler.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},AddonModDataFieldMultimenuHandler.prototype.overrideData=function(e,n,t){return e.content=n[""]&&n[""].join("##")||"",e},AddonModDataFieldMultimenuHandler.prototype.isEnabled=function(){return!0},AddonModDataFieldMultimenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1415),t(128),t(701);var o=function(){return function AddonModDataFieldNumberModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(364)),i=t(701),l=function(e){function AddonModDataFieldNumberHandler(n){var t=e.call(this,n)||this;return t.translate=n,t.name="AddonModDataFieldNumberHandler",t.type="number",t}return Object(o.__extends)(AddonModDataFieldNumberHandler,e),AddonModDataFieldNumberHandler.prototype.getComponent=function(e,n){return i.a},AddonModDataFieldNumberHandler.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",(n["f_"+e.id]||"")!=t},AddonModDataFieldNumberHandler.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&""!=n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},AddonModDataFieldNumberHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1417),t(128),t(702);var o=function(){return function AddonModDataFieldPictureModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(4);var o=t(98),r=t(702),i=function(){function AddonModDataFieldPictureHandler(e,n,t){this.translate=e,this.fileSessionprovider=n,this.fileUploaderProvider=t,this.name="AddonModDataFieldPictureHandler",this.type="picture"}return AddonModDataFieldPictureHandler.prototype.getComponent=function(e,n){return r.a},AddonModDataFieldPictureHandler.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},AddonModDataFieldPictureHandler.prototype.getFieldEditData=function(e,n,t){var o=this.getFieldEditFiles(e);return[{fieldid:e.id,subfield:"file",files:o},{fieldid:e.id,subfield:"alttext",value:n["f_"+e.id+"_alttext"]}]},AddonModDataFieldPictureHandler.prototype.getFieldEditFiles=function(e){return this.fileSessionprovider.getFiles(o.a.COMPONENT,e.dataid+"_"+e.id)},AddonModDataFieldPictureHandler.prototype.hasFieldDataChanged=function(e,n,t){var o=n["f_"+e.id+"_alttext"]||"",r=t&&t.content1||"",i=this.getFieldEditFiles(e)||[],l=t&&t.files||[];if(l.length>0){var s=t&&t.content||"",a=l.find(function(e){return e.filename==s});a&&(l=[a])}else l=[];return o!=r||this.fileUploaderProvider.areFileListDifferent(i,l)},AddonModDataFieldPictureHandler.prototype.getFieldsNotifications=function(e,n){if(e.required){if(!n||!n.length)return this.translate.instant("addon.mod_data.errormustsupplyvalue");if(!n.some(function(e){return void 0!==e.subfield&&"file"==e.subfield&&!!e.value}))return this.translate.instant("addon.mod_data.errormustsupplyvalue")}return!1},AddonModDataFieldPictureHandler.prototype.overrideData=function(e,n,t){return n&&n.file&&n.file.offline>0&&t&&t.length>0?(e.content=t[0].filename,e.files=[t[0]]):n&&n.file&&n.file.online&&n.file.online.length>0&&(e.content=n.file.online[0].filename,e.files=[n.file.online[0]]),e.content1=n.alttext||"",e},AddonModDataFieldPictureHandler.prototype.isEnabled=function(){return!0},AddonModDataFieldPictureHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1419),t(128),t(703);var o=function(){return function AddonModDataFieldRadiobuttonModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(4);var o=t(703),r=function(){function AddonModDataFieldRadiobuttonHandler(e){this.translate=e,this.name="AddonModDataFieldRadiobuttonHandler",this.type="radiobutton"}return AddonModDataFieldRadiobuttonHandler.prototype.getComponent=function(e,n){return o.a},AddonModDataFieldRadiobuttonHandler.prototype.getFieldSearchData=function(e,n){var t="f_"+e.id;return!!n[t]&&[{name:t,value:n[t]}]},AddonModDataFieldRadiobuttonHandler.prototype.getFieldEditData=function(e,n,t){return[{fieldid:e.id,value:n["f_"+e.id]||""}]},AddonModDataFieldRadiobuttonHandler.prototype.hasFieldDataChanged=function(e,n,t){return t=t&&t.content||"",(n["f_"+e.id]||"")!=t},AddonModDataFieldRadiobuttonHandler.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},AddonModDataFieldRadiobuttonHandler.prototype.overrideData=function(e,n,t){return e.content=n[""]||"",e},AddonModDataFieldRadiobuttonHandler.prototype.isEnabled=function(){return!0},AddonModDataFieldRadiobuttonHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(364),t(128),t(700);var o=function(){return function AddonModDataFieldTextModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1422),t(128),t(704);var o=function(){return function AddonModDataFieldTextareaModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(364)),i=t(704),l=function(e){function AddonModDataFieldTextareaHandler(n,t){var o=e.call(this,n)||this;return o.translate=n,o.textUtils=t,o.name="AddonModDataFieldTextareaHandler",o.type="textarea",o}return Object(o.__extends)(AddonModDataFieldTextareaHandler,e),AddonModDataFieldTextareaHandler.prototype.getComponent=function(e,n){return i.a},AddonModDataFieldTextareaHandler.prototype.getFieldEditData=function(e,n,t){var o="f_"+e.id,r=this.getFieldEditFiles(e,n,t),i=this.textUtils.restorePluginfileUrls(n[o]||"",r);return i=this.textUtils.formatHtmlLines(i),this.textUtils.htmlIsBlank(i)&&(i=""),[{fieldid:e.id,value:i},{fieldid:e.id,subfield:"content1",value:1},{fieldid:e.id,subfield:"itemid",files:r}]},AddonModDataFieldTextareaHandler.prototype.getFieldEditFiles=function(e,n,t){return t&&t.files||[]},AddonModDataFieldTextareaHandler.prototype.getFieldsNotifications=function(e,n){if(e.required){if(!n||!n.length)return this.translate.instant("addon.mod_data.errormustsupplyvalue");var t=n.find(function(e){return""==e.subfield});if(!t||this.textUtils.htmlIsBlank(t.value))return this.translate.instant("addon.mod_data.errormustsupplyvalue")}return!1},AddonModDataFieldTextareaHandler.prototype.overrideData=function(e,n,t){return e.content=n[""]||"",e.content.length>0&&e.files&&e.files.length>0&&(e.content=this.textUtils.replacePluginfileUrls(e.content,e.files)),e},AddonModDataFieldTextareaHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1424),t(128),t(705);var o=function(){return function AddonModDataFieldUrlModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(364)),i=t(705),l=function(e){function AddonModDataFieldUrlHandler(n){var t=e.call(this,n)||this;return t.translate=n,t.name="AddonModDataFieldUrlHandler",t.type="url",t}return Object(o.__extends)(AddonModDataFieldUrlHandler,e),AddonModDataFieldUrlHandler.prototype.getComponent=function(e,n){return i.a},AddonModDataFieldUrlHandler.prototype.getFieldEditData=function(e,n,t){var o="f_"+e.id;return[{fieldid:e.id,subfield:"0",value:n[o]&&n[o].trim()||""}]},AddonModDataFieldUrlHandler.prototype.getFieldsNotifications=function(e,n){return!(!e.required||n&&n.length&&n[0].value)&&this.translate.instant("addon.mod_data.errormustsupplyvalue")},AddonModDataFieldUrlHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(706),t(1426),t(1427),t(1428);var o=function(){return function AddonModLabelModule(e,n,t,o,r,i){e.registerHandler(n),t.registerHandler(o),r.registerHandler(i)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(42),r=function(){function AddonModLabelModuleHandler(){this.name="AddonModLabel",this.modName="label",this.supportedFeatures=(e={},e[o.a.FEATURE_MOD_ARCHETYPE]=o.a.MOD_ARCHETYPE_RESOURCE,e[o.a.FEATURE_IDNUMBER]=!0,e[o.a.FEATURE_GROUPS]=!1,e[o.a.FEATURE_GROUPINGS]=!1,e[o.a.FEATURE_MOD_INTRO]=!0,e[o.a.FEATURE_COMPLETION_TRACKS_VIEWS]=!1,e[o.a.FEATURE_GRADE_HAS_GRADE]=!1,e[o.a.FEATURE_GRADE_OUTCOMES]=!1,e[o.a.FEATURE_BACKUP_MOODLE2]=!0,e[o.a.FEATURE_SHOW_DESCRIPTION]=!0,e);var e}return AddonModLabelModuleHandler.prototype.isEnabled=function(){return!0},AddonModLabelModuleHandler.prototype.getData=function(e,n,t){var o=e.description;return e.description="",{icon:"",title:o,a11yTitle:"",class:"addon-mod-label-handler"}},AddonModLabelModuleHandler.prototype.getMainComponent=function(e,n,t){},AddonModLabelModuleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(100),i=function(e){function AddonModLabelLinkHandler(n){var t=e.call(this,n,"AddonModLabel","label","l")||this;return t.name="AddonModLabelLinkHandler",t}return Object(o.__extends)(AddonModLabelLinkHandler,e),AddonModLabelLinkHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=(t(4),t(244)),i=t(706),l=function(e){function AddonModLabelPrefetchHandler(n,t,o,r,l,s,a,u,d,c){var p=e.call(this,n,t,o,r,l,s,a,u,d)||this;return p.labelProvider=c,p.name="AddonModLabel",p.modName="label",p.component=i.a.COMPONENT,p.updatesNames=/^.*files$/,p.skipListStatus=!0,p}return Object(o.__extends)(AddonModLabelPrefetchHandler,e),AddonModLabelPrefetchHandler.prototype.getIntroFiles=function(e,n,t){var o=this;return(this.labelProvider.isGetLabelAvailableForSite()?this.labelProvider.getLabel(n,e.id,!1,t):Promise.resolve()).then(function(n){return o.getIntroFilesFromInstance(e,n)})},AddonModLabelPrefetchHandler.prototype.invalidateContent=function(e,n){return this.labelProvider.invalidateContent(e,n)},AddonModLabelPrefetchHandler.prototype.invalidateModule=function(e,n){var t=[];return t.push(this.labelProvider.invalidateLabelData(n)),t.push(this.courseProvider.invalidateModule(e.id)),this.utils.allPromises(t)},AddonModLabelPrefetchHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(495),t(1430);var o=function(){return function AddonMessageOutputAirnotifierModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(495);var o=function(){function AddonMessageOutputAirnotifierHandler(e){this.airnotifierProvider=e,this.name="AddonMessageOutputAirnotifier",this.processorName="airnotifier"}return AddonMessageOutputAirnotifierHandler.prototype.isEnabled=function(){return this.airnotifierProvider.isEnabled()},AddonMessageOutputAirnotifierHandler.prototype.getDisplayData=function(e){return{priority:600,label:"addon.messageoutput_airnotifier.processorsettingsdesc",icon:"settings",page:"AddonMessageOutputAirnotifierDevicesPage"}},AddonMessageOutputAirnotifierHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1432),t(1434),t(1436),t(1438),t(1439),t(1441),t(1443),t(1445),t(1447),t(1449);var o=function(){return function AddonQbehaviourModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1433);var o=function(){return function AddonQbehaviourAdaptiveModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonQbehaviourAdaptiveHandler(e){this.questionHelper=e,this.name="AddonQbehaviourAdaptive",this.type="adaptive"}return AddonQbehaviourAdaptiveHandler.prototype.handleQuestion=function(e,n){this.questionHelper.extractQbehaviourButtons(n)},AddonQbehaviourAdaptiveHandler.prototype.isEnabled=function(){return!0},AddonQbehaviourAdaptiveHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1435);var o=function(){return function AddonQbehaviourAdaptiveNoPenaltyModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonQbehaviourAdaptiveNoPenaltyHandler(e){this.questionHelper=e,this.name="AddonQbehaviourAdaptiveNoPenalty",this.type="adaptivenopenalty"}return AddonQbehaviourAdaptiveNoPenaltyHandler.prototype.handleQuestion=function(e,n){this.questionHelper.extractQbehaviourButtons(n)},AddonQbehaviourAdaptiveNoPenaltyHandler.prototype.isEnabled=function(){return!0},AddonQbehaviourAdaptiveNoPenaltyHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1437),t(468);var o=function(){return function AddonQbehaviourDeferredCBMModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(468),r=function(){function AddonQbehaviourDeferredCBMHandler(e,n,t){this.questionDelegate=e,this.questionHelper=n,this.deferredFeedbackHandler=t,this.name="AddonQbehaviourDeferredCBM",this.type="deferredcbm"}return AddonQbehaviourDeferredCBMHandler.prototype.determineNewState=function(e,n,t,o){return this.deferredFeedbackHandler.determineNewStateDeferred(e,n,t,o,this.isCompleteResponse.bind(this),this.isSameResponse.bind(this))},AddonQbehaviourDeferredCBMHandler.prototype.handleQuestion=function(e,n){if(this.questionHelper.extractQbehaviourCBM(n))return[o.a]},AddonQbehaviourDeferredCBMHandler.prototype.isCompleteResponse=function(e,n){var t=this.questionDelegate.isCompleteResponse(e,n);return t>0?n["-certainty"]?1:0:t},AddonQbehaviourDeferredCBMHandler.prototype.isEnabled=function(){return!0},AddonQbehaviourDeferredCBMHandler.prototype.isSameResponse=function(e,n,t,o,r){var i=this.questionDelegate.isSameResponse(e,t,r);return i?n["-certainty"]==o["-certainty"]:i},AddonQbehaviourDeferredCBMHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(707);var o=function(){return function AddonQbehaviourDeferredFeedbackModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1440);var o=function(){return function AddonQbehaviourImmediateCBMModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(468),r=function(){function AddonQbehaviourImmediateCBMHandler(e){this.questionHelper=e,this.name="AddonQbehaviourImmediateCBM",this.type="immediatecbm"}return AddonQbehaviourImmediateCBMHandler.prototype.handleQuestion=function(e,n){if(this.questionHelper.extractQbehaviourButtons(n),this.questionHelper.extractQbehaviourCBM(n))return[o.a]},AddonQbehaviourImmediateCBMHandler.prototype.isEnabled=function(){return!0},AddonQbehaviourImmediateCBMHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1442);var o=function(){return function AddonQbehaviourImmediateFeedbackModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonQbehaviourImmediateFeedbackHandler(e){this.questionHelper=e,this.name="AddonQbehaviourImmediateFeedback",this.type="immediatefeedback"}return AddonQbehaviourImmediateFeedbackHandler.prototype.handleQuestion=function(e,n){this.questionHelper.extractQbehaviourButtons(n)},AddonQbehaviourImmediateFeedbackHandler.prototype.isEnabled=function(){return!0},AddonQbehaviourImmediateFeedbackHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1444),t(708);var o=function(){return function AddonQbehaviourInformationItemModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(708),r=function(){function AddonQbehaviourInformationItemHandler(e,n){this.questionHelper=e,this.questionProvider=n,this.name="AddonQbehaviourInformationItem",this.type="informationitem"}return AddonQbehaviourInformationItemHandler.prototype.determineNewState=function(e,n,t,o){return this.questionProvider.getState(t.answers["-seen"]?"complete":t.state||"todo")},AddonQbehaviourInformationItemHandler.prototype.handleQuestion=function(e,n){if(this.questionHelper.extractQbehaviourSeenInput(n))return[o.a]},AddonQbehaviourInformationItemHandler.prototype.isEnabled=function(){return!0},AddonQbehaviourInformationItemHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1446);var o=function(){return function AddonQbehaviourInteractiveModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonQbehaviourInteractiveHandler(e){this.questionHelper=e,this.name="AddonQbehaviourInteractive",this.type="interactive"}return AddonQbehaviourInteractiveHandler.prototype.handleQuestion=function(e,n){this.questionHelper.extractQbehaviourButtons(n)},AddonQbehaviourInteractiveHandler.prototype.isEnabled=function(){return!0},AddonQbehaviourInteractiveHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1448);var o=function(){return function AddonQbehaviourInteractiveCountbackModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonQbehaviourInteractiveCountbackHandler(e){this.questionHelper=e,this.name="AddonQbehaviourInteractiveCountback",this.type="interactivecountback"}return AddonQbehaviourInteractiveCountbackHandler.prototype.handleQuestion=function(e,n){this.questionHelper.extractQbehaviourButtons(n)},AddonQbehaviourInteractiveCountbackHandler.prototype.isEnabled=function(){return!0},AddonQbehaviourInteractiveCountbackHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1450);var o=function(){return function AddonQbehaviourManualGradedModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonQbehaviourManualGradedHandler(e,n){this.questionDelegate=e,this.questionProvider=n,this.name="AddonQbehaviourManualGraded",this.type="manualgraded"}return AddonQbehaviourManualGradedHandler.prototype.determineNewState=function(e,n,t,o){return this.determineNewStateManualGraded(e,n,t,o)},AddonQbehaviourManualGradedHandler.prototype.determineNewStateManualGraded=function(e,n,t,o,r,i){var l=this;return this.questionProvider.getQuestion(e,n,t.slot,o).catch(function(){return t}).then(function(s){var a=l.questionProvider.getState(s.state);return a.finished||!a.active?a:l.questionProvider.getQuestionAnswers(e,n,t.slot,!1,o).then(function(e){var n=l.questionProvider.getBasicAnswers(t.answers);e=l.questionProvider.convertAnswersArrayToObject(e,!0);var o=l.questionProvider.getBasicAnswers(e);if(i){if(i(t,e,o,t.answers,n))return a}else if(l.questionDelegate.isSameResponse(t,o,n))return a;var s,u;return s=r?r(t,t.answers):l.questionDelegate.isCompleteResponse(t,n),u=s<0?"cannotdeterminestatus":s>0?"complete":"todo",l.questionProvider.getState(u)})})},AddonQbehaviourManualGradedHandler.prototype.isEnabled=function(){return!0},AddonQbehaviourManualGradedHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1452),t(1453),t(1455),t(1457),t(1459),t(1461),t(1463),t(1465),t(1467),t(1469),t(1470),t(1472),t(1473),t(1475),t(1477),t(1479);var o=function(){return function AddonQtypeModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(469),t(470);var o=function(){return function AddonQtypeCalculatedModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1454);var o=function(){return function AddonQtypeCalculatedMultiModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(365),r=function(){function AddonQtypeCalculatedMultiHandler(e){this.multichoiceHandler=e,this.name="AddonQtypeCalculatedMulti",this.type="qtype_calculatedmulti"}return AddonQtypeCalculatedMultiHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeCalculatedMultiHandler.prototype.isCompleteResponse=function(e,n){return this.multichoiceHandler.isCompleteResponseSingle(n)},AddonQtypeCalculatedMultiHandler.prototype.isEnabled=function(){return!0},AddonQtypeCalculatedMultiHandler.prototype.isGradableResponse=function(e,n){return this.multichoiceHandler.isGradableResponseSingle(n)},AddonQtypeCalculatedMultiHandler.prototype.isSameResponse=function(e,n,t){return this.multichoiceHandler.isSameResponseSingle(n,t)},AddonQtypeCalculatedMultiHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1456);var o=function(){return function AddonQtypeCalculatedSimpleModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(470),r=function(){function AddonQtypeCalculatedSimpleHandler(e){this.calculatedHandler=e,this.name="AddonQtypeCalculatedSimple",this.type="qtype_calculatedsimple"}return AddonQtypeCalculatedSimpleHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeCalculatedSimpleHandler.prototype.isCompleteResponse=function(e,n){return this.calculatedHandler.isCompleteResponse(e,n)},AddonQtypeCalculatedSimpleHandler.prototype.isEnabled=function(){return!0},AddonQtypeCalculatedSimpleHandler.prototype.isGradableResponse=function(e,n){return this.calculatedHandler.isGradableResponse(e,n)},AddonQtypeCalculatedSimpleHandler.prototype.isSameResponse=function(e,n,t){return this.calculatedHandler.isSameResponse(e,n,t)},AddonQtypeCalculatedSimpleHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1458),t(710);var o=function(){return function AddonQtypeDdImageOrTextModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(710),r=function(){function AddonQtypeDdImageOrTextHandler(e){this.questionProvider=e,this.name="AddonQtypeDdImageOrText",this.type="qtype_ddimageortext"}return AddonQtypeDdImageOrTextHandler.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},AddonQtypeDdImageOrTextHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeDdImageOrTextHandler.prototype.isCompleteResponse=function(e,n){for(var t in n){var o=n[t];if(!o||"0"===o)return 0}return 1},AddonQtypeDdImageOrTextHandler.prototype.isEnabled=function(){return!0},AddonQtypeDdImageOrTextHandler.prototype.isGradableResponse=function(e,n){for(var t in n){var o=n[t];if(o&&"0"!==o)return 1}return 0},AddonQtypeDdImageOrTextHandler.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},AddonQtypeDdImageOrTextHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1460),t(711);var o=function(){return function AddonQtypeDdMarkerModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(711),r=function(){function AddonQtypeDdMarkerHandler(e,n){this.questionProvider=e,this.questionHelper=n,this.name="AddonQtypeDdMarker",this.type="qtype_ddmarker"}return AddonQtypeDdMarkerHandler.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},AddonQtypeDdMarkerHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeDdMarkerHandler.prototype.isCompleteResponse=function(e,n){for(var t in n)if(n[t])return 1;return 0},AddonQtypeDdMarkerHandler.prototype.isEnabled=function(){return!0},AddonQtypeDdMarkerHandler.prototype.isGradableResponse=function(e,n){return this.isCompleteResponse(e,n)},AddonQtypeDdMarkerHandler.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},AddonQtypeDdMarkerHandler.prototype.getAdditionalDownloadableFiles=function(e,n){return this.questionHelper.extractQuestionScripts(e,n),e.amdArgs&&void 0!==e.amdArgs[1]?[e.amdArgs[1]]:[]},AddonQtypeDdMarkerHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1462),t(712);var o=function(){return function AddonQtypeDdwtosModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(712),r=function(){function AddonQtypeDdwtosHandler(e){this.questionProvider=e,this.name="AddonQtypeDdwtos",this.type="qtype_ddwtos"}return AddonQtypeDdwtosHandler.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},AddonQtypeDdwtosHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeDdwtosHandler.prototype.isCompleteResponse=function(e,n){for(var t in n){var o=n[t];if(!o||"0"===o)return 0}return 1},AddonQtypeDdwtosHandler.prototype.isEnabled=function(){return!0},AddonQtypeDdwtosHandler.prototype.isGradableResponse=function(e,n){for(var t in n){var o=n[t];if(o&&"0"!==o)return 1}return 0},AddonQtypeDdwtosHandler.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},AddonQtypeDdwtosHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1464),t(713);var o=function(){return function AddonQtypeDescriptionModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(713),r=function(){function AddonQtypeDescriptionHandler(){this.name="AddonQtypeDescription",this.type="qtype_description"}return AddonQtypeDescriptionHandler.prototype.getBehaviour=function(e,n){return"informationitem"},AddonQtypeDescriptionHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeDescriptionHandler.prototype.isEnabled=function(){return!0},AddonQtypeDescriptionHandler.prototype.validateSequenceCheck=function(e,n){return!0},AddonQtypeDescriptionHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1466),t(714);var o=function(){return function AddonQtypeEssayModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(714),r=function(){function AddonQtypeEssayHandler(e,n,t,o){this.utils=e,this.questionHelper=n,this.textUtils=t,this.domUtils=o,this.name="AddonQtypeEssay",this.type="qtype_essay"}return AddonQtypeEssayHandler.prototype.getBehaviour=function(e,n){return"manualgraded"},AddonQtypeEssayHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeEssayHandler.prototype.getPreventSubmitMessage=function(e){var n=this.domUtils.convertToElement(e.html);return n.querySelector("div[id*=filemanager]")?"core.question.errorattachmentsnotsupported":this.questionHelper.hasDraftFileUrls(n.innerHTML)?"core.question.errorinlinefilesnotsupported":void 0},AddonQtypeEssayHandler.prototype.isCompleteResponse=function(e,n){var t=this.domUtils.convertToElement(e.html),o=n.answer&&""!==n.answer;return!!t.querySelector("div[id*=filemanager]")?-1:o?1:0},AddonQtypeEssayHandler.prototype.isEnabled=function(){return!0},AddonQtypeEssayHandler.prototype.isGradableResponse=function(e,n){return 0},AddonQtypeEssayHandler.prototype.isSameResponse=function(e,n,t){return this.utils.sameAtKeyMissingIsBlank(n,t,"answer")},AddonQtypeEssayHandler.prototype.prepareAnswers=function(e,n,t,o){var r=this.domUtils.convertToElement(e.html).querySelector("textarea[name*=_answer]");r&&void 0!==n[r.name]&&(n[r.name]=this.textUtils.formatHtmlLines(n[r.name]))},AddonQtypeEssayHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1468),t(715);var o=function(){return function AddonQtypeGapSelectModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(715),r=function(){function AddonQtypeGapSelectHandler(e){this.questionProvider=e,this.name="AddonQtypeGapSelect",this.type="qtype_gapselect"}return AddonQtypeGapSelectHandler.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},AddonQtypeGapSelectHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeGapSelectHandler.prototype.isCompleteResponse=function(e,n){for(var t in n){var o=n[t];if(!o||"0"===o)return 0}return 1},AddonQtypeGapSelectHandler.prototype.isEnabled=function(){return!0},AddonQtypeGapSelectHandler.prototype.isGradableResponse=function(e,n){for(var t in n){if(n[t])return 1}return 0},AddonQtypeGapSelectHandler.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},AddonQtypeGapSelectHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(716),t(471);var o=function(){return function AddonQtypeMatchModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1471),t(717);var o=function(){return function AddonQtypeMultiAnswerModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(717),r=function(){function AddonQtypeMultiAnswerHandler(e,n){this.questionProvider=e,this.questionHelper=n,this.name="AddonQtypeMultiAnswer",this.type="qtype_multianswer"}return AddonQtypeMultiAnswerHandler.prototype.getBehaviour=function(e,n){return"interactive"===n?"interactivecountback":n},AddonQtypeMultiAnswerHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeMultiAnswerHandler.prototype.isCompleteResponse=function(e,n){var t=this.questionProvider.getBasicAnswers(this.questionHelper.getAllInputNamesFromHtml(e.html));for(var o in t){var r=n[o];if(!r&&!1!==r&&0!==r)return 0}return 1},AddonQtypeMultiAnswerHandler.prototype.isEnabled=function(){return!0},AddonQtypeMultiAnswerHandler.prototype.isGradableResponse=function(e,n){for(var t in n){var o=n[t];if(o||!1===o)return 1}return 0},AddonQtypeMultiAnswerHandler.prototype.isSameResponse=function(e,n,t){return this.questionProvider.compareAllAnswers(n,t)},AddonQtypeMultiAnswerHandler.prototype.validateSequenceCheck=function(e,n){return e.sequencecheck==n||2==e.sequencecheck&&"todo"==e.state&&"1"==n},AddonQtypeMultiAnswerHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(709),t(365);var o=function(){return function AddonQtypeMultichoiceModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1474);var o=function(){return function AddonQtypeNumericalModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonQtypeNumericalHandler(){var n=null!==e&&e.apply(this,arguments)||this;return n.name="AddonQtypeNumerical",n.type="qtype_numerical",n}return Object(o.__extends)(AddonQtypeNumericalHandler,e),AddonQtypeNumericalHandler}(t(469).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1476);var o=function(){return function AddonQtypeRandomSaMatchModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(471),r=function(){function AddonQtypeRandomSaMatchHandler(e){this.matchHandler=e,this.name="AddonQtypeRandomSaMatch",this.type="qtype_randomsamatch"}return AddonQtypeRandomSaMatchHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeRandomSaMatchHandler.prototype.isCompleteResponse=function(e,n){return this.matchHandler.isCompleteResponse(e,n)},AddonQtypeRandomSaMatchHandler.prototype.isEnabled=function(){return!0},AddonQtypeRandomSaMatchHandler.prototype.isGradableResponse=function(e,n){return this.matchHandler.isGradableResponse(e,n)},AddonQtypeRandomSaMatchHandler.prototype.isSameResponse=function(e,n,t){return this.matchHandler.isSameResponse(e,n,t)},AddonQtypeRandomSaMatchHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1478),t(718);var o=function(){return function AddonQtypeShortAnswerModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(718),r=function(){function AddonQtypeShortAnswerHandler(e){this.utils=e,this.name="AddonQtypeShortAnswer",this.type="qtype_shortanswer"}return AddonQtypeShortAnswerHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeShortAnswerHandler.prototype.isCompleteResponse=function(e,n){return n.answer||0===n.answer?1:0},AddonQtypeShortAnswerHandler.prototype.isEnabled=function(){return!0},AddonQtypeShortAnswerHandler.prototype.isGradableResponse=function(e,n){return this.isCompleteResponse(e,n)},AddonQtypeShortAnswerHandler.prototype.isSameResponse=function(e,n,t){return this.utils.sameAtKeyMissingIsBlank(n,t,"answer")},AddonQtypeShortAnswerHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1480);var o=function(){return function AddonQtypeTrueFalseModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(365),r=function(){function AddonQtypeTrueFalseHandler(e){this.utils=e,this.name="AddonQtypeTrueFalse",this.type="qtype_truefalse"}return AddonQtypeTrueFalseHandler.prototype.getComponent=function(e,n){return o.a},AddonQtypeTrueFalseHandler.prototype.isCompleteResponse=function(e,n){return n.answer?1:0},AddonQtypeTrueFalseHandler.prototype.isEnabled=function(){return!0},AddonQtypeTrueFalseHandler.prototype.isGradableResponse=function(e,n){return this.isCompleteResponse(e,n)},AddonQtypeTrueFalseHandler.prototype.isSameResponse=function(e,n,t){return this.utils.sameAtKeyMissingIsBlank(n,t,"answer")},AddonQtypeTrueFalseHandler.prototype.prepareAnswers=function(e,n,t,o){e&&void 0!==n[e.optionsName]&&!n[e.optionsName]&&delete n[e.optionsName]},AddonQtypeTrueFalseHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function AddonStorageManagerModule(e,n){this.courseOptionsDelegate=e,this.courseMenuHandler=n,this.courseOptionsDelegate.registerHandler(this.courseMenuHandler)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function AddonStorageManagerCourseMenuHandler(){this.name="AddonStorageManager",this.priority=500,this.isMenuHandler=!0}return AddonStorageManagerCourseMenuHandler.prototype.isEnabledForCourse=function(e,n,t,o){return!0},AddonStorageManagerCourseMenuHandler.prototype.isEnabled=function(){return!0},AddonStorageManagerCourseMenuHandler.prototype.getMenuDisplayData=function(e,n){return{icon:"cube",title:"addon.storagemanager.managestorage",page:"AddonStorageManagerCourseStoragePage",class:"addon-storagemanager-coursemenu-handler"}},AddonStorageManagerCourseMenuHandler}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(1484),t(1486),t(1488),t(1490),t(1492),t(1494),t(1496),t(1498),t(1500),t(1502),t(1504),t(1506),t(1508),t(1510);var o=function(){return function AddonFilterModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1485);var o=function(){return function AddonFilterActivityNamesModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonFilterActivityNamesHandler(){var n=e.call(this)||this;return n.name="AddonFilterActivityNamesHandler",n.filterName="activitynames",n}return Object(o.__extends)(AddonFilterActivityNamesHandler,e),AddonFilterActivityNamesHandler.prototype.shouldBeApplied=function(e,n){return!1},AddonFilterActivityNamesHandler}(t(133).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1487);var o=function(){return function AddonFilterAlgebraModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonFilterAlgebraHandler(){var n=e.call(this)||this;return n.name="AddonFilterAlgebraHandler",n.filterName="algebra",n}return Object(o.__extends)(AddonFilterAlgebraHandler,e),AddonFilterAlgebraHandler.prototype.shouldBeApplied=function(e,n){return!1},AddonFilterAlgebraHandler}(t(133).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1489);var o=function(){return function AddonFilterCensorModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonFilterCensorHandler(){var n=e.call(this)||this;return n.name="AddonFilterCensorHandler",n.filterName="censor",n}return Object(o.__extends)(AddonFilterCensorHandler,e),AddonFilterCensorHandler.prototype.shouldBeApplied=function(e,n){return!1},AddonFilterCensorHandler}(t(133).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1491);var o=function(){return function AddonFilterDataModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonFilterDataHandler(){var n=e.call(this)||this;return n.name="AddonFilterDataHandler",n.filterName="data",n}return Object(o.__extends)(AddonFilterDataHandler,e),AddonFilterDataHandler.prototype.shouldBeApplied=function(e,n){return!1},AddonFilterDataHandler}(t(133).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1493);var o=function(){return function AddonFilterDisplayH5PModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(133),i=t(604),l=function(e){function AddonFilterDisplayH5PHandler(n){var t=e.call(this)||this;return t.factoryResolver=n,t.name="AddonFilterDisplayH5PHandler",t.filterName="displayh5p",t.template=document.createElement("template"),t}return Object(o.__extends)(AddonFilterDisplayH5PHandler,e),AddonFilterDisplayH5PHandler.prototype.filter=function(e,n,t,o){this.template.innerHTML=e;return Array.from(this.template.content.querySelectorAll("iframe.h5p-iframe")).forEach(function(e){var n=document.createElement("div");n.classList.add("core-h5p-tmp-placeholder"),n.setAttribute("data-player-src",e.src),e.parentElement.replaceChild(n,e)}),this.template.innerHTML},AddonFilterDisplayH5PHandler.prototype.handleHtml=function(e,n,t,o,r,l,s){var a=this;Array.from(e.querySelectorAll("div.core-h5p-tmp-placeholder")).forEach(function(e){var n=e.getAttribute("data-player-src"),t=a.factoryResolver.resolveComponentFactory(i.a),s=o.createComponent(t);s.instance.src=n,s.instance.component=r,s.instance.componentId=l,e.parentElement.replaceChild(s.instance.elementRef.nativeElement,e)})},AddonFilterDisplayH5PHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1495);var o=function(){return function AddonFilterEmailProtectModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonFilterEmailProtectHandler(){var n=e.call(this)||this;return n.name="AddonFilterEmailProtectHandler",n.filterName="emailprotect",n}return Object(o.__extends)(AddonFilterEmailProtectHandler,e),AddonFilterEmailProtectHandler.prototype.shouldBeApplied=function(e,n){return!1},AddonFilterEmailProtectHandler}(t(133).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1497);var o=function(){return function AddonFilterEmoticonModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonFilterEmoticonHandler(){var n=e.call(this)||this;return n.name="AddonFilterEmoticonHandler",n.filterName="emoticon",n}return Object(o.__extends)(AddonFilterEmoticonHandler,e),AddonFilterEmoticonHandler.prototype.shouldBeApplied=function(e,n){return!1},AddonFilterEmoticonHandler}(t(133).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1499);var o=function(){return function AddonFilterGlossaryModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonFilterGlossaryHandler(){var n=e.call(this)||this;return n.name="AddonFilterGlossaryHandler",n.filterName="glossary",n}return Object(o.__extends)(AddonFilterGlossaryHandler,e),AddonFilterGlossaryHandler.prototype.shouldBeApplied=function(e,n){return!1},AddonFilterGlossaryHandler}(t(133).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1501);var o=function(){return function AddonFilterMathJaxLoaderModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(133),i=t(10),l=function(e){function AddonFilterMathJaxLoaderHandler(n,t,o,r,l){var s=e.call(this)||this;return s.langProvider=t,s.sitesProvider=o,s.textUtils=r,s.utils=l,s.name="AddonFilterMathJaxLoaderHandler",s.filterName="mathjaxloader",s.DEFAULT_URL="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js",s.DEFAULT_CONFIG='\n        MathJax.Hub.Config({\n            extensions: [\n                "Safe.js",\n                "tex2jax.js",\n                "mml2jax.js",\n                "MathEvents.js",\n                "MathZoom.js",\n                "MathMenu.js",\n                "toMathML.js",\n                "TeX/noErrors.js",\n                "TeX/noUndefined.js",\n                "TeX/AMSmath.js",\n                "TeX/AMSsymbols.js",\n                "fast-preview.js",\n                "AssistiveMML.js",\n                "[a11y]/accessibility-menu.js"\n            ],\n            jax: ["input/TeX","input/MathML","output/SVG"],\n            showMathMenu: false,\n            errorSettings: { message: ["!"] },\n            skipStartupTypeset: true,\n            messageStyle: "none"\n        });\n    ',s.MATHJAX_LANG_CODES=["ar","ast","bcc","bg","br","ca","cdo","ce","cs","cy","da","de","diq","en","eo","es","fa","fi","fr","gl","he","ia","it","ja","kn","ko","lb","lki","lt","mk","nl","oc","pl","pt","pt-br","qqq","ru","scn","sco","sk","sl","sv","th","tr","uk","vi","zh-hans","zh-hant"],s.EXPLICIT_MAPPING={"zh-tw":"zh-hant","zh-cn":"zh-hans"},s.window=window,s.loadJS(),s.langProvider.getCurrentLanguage().then(function(e){e=s.mapLanguageCode(e),s.window.M.filter_mathjaxloader.configure({mathjaxconfig:s.DEFAULT_CONFIG,lang:e})}),n.on(i.a.LANGUAGE_CHANGED,function(e){void 0!==s.window.MathJax&&(e=s.mapLanguageCode(e),s.window.MathJax.Hub.Queue(function(){s.window.MathJax.Localization.setLocale(e)}))}),s}return Object(o.__extends)(AddonFilterMathJaxLoaderHandler,e),AddonFilterMathJaxLoaderHandler.prototype.filter=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(n){if(!t.wsNotFiltered&&n.isVersionGreaterEqualThan("3.7"))return e;if(-1!=e.indexOf('class="filter_mathjaxloader_equation"'))return e;var o=!1;if(e.match(/\\[\[\(]/)||e.match(/\$\$/)){var i=r.wrapMathInNoLink(e);e=i.text,o=i.changed}return o?'<span class="filter_mathjaxloader_equation">'+e+"</span>":e})},AddonFilterMathJaxLoaderHandler.prototype.handleHtml=function(e,n,t,o,r,i,l){var s=this;return this.waitForReady().then(function(){s.window.M.filter_mathjaxloader.typeset(e)})},AddonFilterMathJaxLoaderHandler.prototype.insertSpan=function(e,n,t){return this.textUtils.substrReplace(e,'<span class="nolink">'+e.substr(n,t-n+1)+"</span>",n,t-n+1)},AddonFilterMathJaxLoaderHandler.prototype.jsLoaded=function(){return this.window.M&&this.window.M.filter_mathjaxloader},AddonFilterMathJaxLoaderHandler.prototype.loadJS=function(){var e=this;this.window.M=this.window.M||{},this.window.M.filter_mathjaxloader=this.window.M.filter_mathjaxloader||{_lang:"",_configured:!1,configure:function(e){var n=document.createElement("script");n.type="text/x-mathjax-config",n.text=e.mathjaxconfig,document.head.appendChild(n),this._lang=e.lang},_setLocale:function(){if(!this._configured){var n=this._lang;void 0!==e.window.MathJax&&(e.window.MathJax.Hub.Queue(function(){e.window.MathJax.Localization.setLocale(n)}),e.window.MathJax.Hub.Configured(),this._configured=!0)}},typeset:function(n){if(this._configured||this._setLocale(),void 0!==e.window.MathJax){var t=e.window.MathJax.Hub.processSectionDelay;e.window.MathJax.Hub.processSectionDelay=0;Array.from(n.querySelectorAll(".filter_mathjaxloader_equation")).forEach(function(n){e.window.MathJax.Hub.Queue(["Typeset",e.window.MathJax.Hub,n])}),e.window.MathJax.Hub.processSectionDelay=t}}}},AddonFilterMathJaxLoaderHandler.prototype.mapLanguageCode=function(e){if(this.EXPLICIT_MAPPING[e])return this.EXPLICIT_MAPPING[e];if(-1!=this.MATHJAX_LANG_CODES.indexOf(e))return e;var n=e.split("-");return-1!=this.MATHJAX_LANG_CODES.indexOf(n[0])?n[0]:this.langProvider.getDefaultLanguage()},AddonFilterMathJaxLoaderHandler.prototype.shouldBeApplied=function(e,n){return n&&n.getId()==this.sitesProvider.getCurrentSiteId()},AddonFilterMathJaxLoaderHandler.prototype.waitForReady=function(e){var n=this;if(void 0===e&&(e=0),this.window.MathJax&&this.jsLoaded()||e>=20)return Promise.resolve();var t=this.utils.promiseDefer();return setTimeout(function(){return n.waitForReady(e+1).finally(function(){t.resolve()})},250),t.promise},AddonFilterMathJaxLoaderHandler.prototype.wrapMathInNoLink=function(e){for(var n=e.length,t=1,o=-1,r=!1,i=!1,l=-1,s=!1;t<n;)-1===o?"\\"===e[t-1]?"["===e[t]?(o=t-1,r=!0):"("===e[t]?l=t-1:")"===e[t]&&l>-1&&(e=this.insertSpan(e,l,t),l=-1,t+=28,n+=28,s=!0):"$"===e[t-1]&&"$"===e[t]&&(o=t-1,i=!0):("\\"===e[t-1]&&"]"===e[t]&&r||"$"===e[t-1]&&"$"===e[t]&&i)&&(e=this.insertSpan(e,o,t),o=-1,r=!1,i=!1,t+=28,n+=28,s=!0),t++;return{text:e,changed:s}},AddonFilterMathJaxLoaderHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1503);var o=function(){return function AddonFilterMediaPluginModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(133),i=function(e){function AddonFilterMediaPluginHandler(n,t){var o=e.call(this)||this;return o.textUtils=n,o.urlUtils=t,o.name="AddonFilterMediaPluginHandler",o.filterName="mediaplugin",o.template=document.createElement("template"),o}return Object(o.__extends)(AddonFilterMediaPluginHandler,e),AddonFilterMediaPluginHandler.prototype.filter=function(e,n,t,o){var r=this;this.template.innerHTML=e;return Array.from(this.template.content.querySelectorAll("video")).forEach(function(e){r.treatVideoFilters(e)}),this.template.innerHTML},AddonFilterMediaPluginHandler.prototype.treatVideoFilters=function(e){if(e.classList.contains("video-js")){var n=this.textUtils.parseJSON(e.getAttribute("data-setup")||e.getAttribute("data-setup-lazy")||"{}"),t=n.techOrder&&n.techOrder[0]&&"youtube"==n.techOrder[0]&&this.urlUtils.getYoutubeEmbedUrl(n.sources&&n.sources[0]&&n.sources[0].src);if(t){var o=document.createElement("iframe");o.id=e.id,o.src=t,o.setAttribute("frameborder","0"),o.setAttribute("allowfullscreen","1"),o.width="100%",o.height="300",e.parentNode.replaceChild(o,e)}}},AddonFilterMediaPluginHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1505);var o=function(){return function AddonFilterMultilangModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(133),i=function(e){function AddonFilterMultilangHandler(n,t){var o=e.call(this)||this;return o.langProvider=n,o.sitesProvider=t,o.name="AddonFilterMultilangHandler",o.filterName="multilang",o}return Object(o.__extends)(AddonFilterMultilangHandler,e),AddonFilterMultilangHandler.prototype.filter=function(e,n,t,o){var r=this;return this.sitesProvider.getSite(o).then(function(n){return r.langProvider.getCurrentLanguage().then(function(n){var t=/<(?:lang|span)[^>]+lang="[a-zA-Z0-9_-]+"[^>]*>(.*?)<\/(?:lang|span)>/g,o=new RegExp('<(?:lang|span)[^>]+lang="'+n+'"[^>]*>(.*?)</(?:lang|span)>',"g");if(!e.match(o)){var r=e.match(t);if(!r||!r[0])return e;n=r[0].match(/lang="([a-zA-Z0-9_-]+)"/)[1],o=new RegExp('<(?:lang|span)[^>]+lang="'+n+'"[^>]*>(.*?)</(?:lang|span)>',"g")}return e=e.replace(o,"$1"),e=e.replace(t,"")})})},AddonFilterMultilangHandler.prototype.shouldBeApplied=function(e,n){return e.wsNotFiltered||!n.isVersionGreaterEqualThan("3.7")},AddonFilterMultilangHandler}(r.a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1507);var o=function(){return function AddonFilterTexModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonFilterTexHandler(){var n=e.call(this)||this;return n.name="AddonFilterTexHandler",n.filterName="tex",n}return Object(o.__extends)(AddonFilterTexHandler,e),AddonFilterTexHandler.prototype.shouldBeApplied=function(e,n){return!1},AddonFilterTexHandler}(t(133).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1509);var o=function(){return function AddonFilterTidyModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonFilterTidyHandler(){var n=e.call(this)||this;return n.name="AddonFilterTidyHandler",n.filterName="tidy",n}return Object(o.__extends)(AddonFilterTidyHandler,e),AddonFilterTidyHandler.prototype.shouldBeApplied=function(e,n){return!1},AddonFilterTidyHandler}(t(133).a)},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(1511);var o=function(){return function AddonFilterUrlToLinkModule(e,n){e.registerHandler(n)}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});var o=t(0),r=function(e){function AddonFilterUrlToLinkHandler(){var n=e.call(this)||this;return n.name="AddonFilterUrlToLinkHandler",n.filterName="urltolink",n}return Object(o.__extends)(AddonFilterUrlToLinkHandler,e),AddonFilterUrlToLinkHandler.prototype.shouldBeApplied=function(e,n){return!1},AddonFilterUrlToLinkHandler}(t(133).a)},,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";function View_CoreContextMenuPopoverComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"ion-list-header",[["class","item"]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,u.a,[s.a,o.K,o.p,[8,null]],null,null),(e()(),o._40(6,2,["",""]))],null,function(e,n){e(n,6,0,n.component.title)})}function View_CoreContextMenuPopoverComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,d.b,d.a)),o._15(1,704512,null,0,c.a,[o.p,s.a],{name:[0,"name"],ariaLabel:[1,"ariaLabel"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit.iconDescription,n.parent.context.$implicit.ariaDescription)},null)}function View_CoreContextMenuPopoverComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-icon",[["item-end",""]],null,null,null,d.b,d.a)),o._15(1,704512,null,0,c.a,[o.p,s.a],{name:[0,"name"],slash:[1,"slash"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit.iconAction,n.parent.context.$implicit.iconSlash)},null)}function View_CoreContextMenuPopoverComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-spinner",[["item-end",""]],[[2,"spinner-paused",null]],null,null,p.b,p.a)),o._15(1,114688,null,0,f.a,[s.a,o.p,o.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,o._29(n,1)._paused)})}function View_CoreContextMenuPopoverComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-badge",[["item-end",""]],[[8,"className",0]],null,null,null,null)),o._15(1,16384,null,0,h.a,[s.a,o.p,o.K],null,null),(e()(),o._40(2,null,["",""]))],null,function(e,n){e(n,0,0,o._19(1,"",n.parent.context.$implicit.badgeClass,""));e(n,2,0,n.parent.context.$implicit.badge)})}function View_CoreContextMenuPopoverComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,22,"a",[["class","item item-block"],["core-link",""],["ion-item",""],["role","menuitem"],["text-wrap",""]],[[8,"href",4],[1,"aria-label",0],[8,"hidden",0],[1,"detail-none",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.itemClicked(t,e.context.$implicit)&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),o._15(6,81920,null,0,_.a,[o.p,g.a,v.a,C.a,y.a,P.a,[2,A.a],[2,b.a],[2,I.a],S.a],{capture:[0,"capture"],autoLogin:[1,"autoLogin"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_CoreContextMenuPopoverComponent_3)),o._15(9,16384,null,0,E.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(11,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),o._15(12,540672,null,0,M.a,[o.p,C.a,g.a,S.a,w.a,k.a,v.a,y.a,T.a,O.a,D.a,P.a,[2,A.a],[2,b.a],[2,I.a],x.a,F.a,L.a,U.a,R.a,o.W],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,4,1,null,View_CoreContextMenuPopoverComponent_4)),o._15(15,16384,null,0,E.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,4,1,null,View_CoreContextMenuPopoverComponent_5)),o._15(18,16384,null,0,E.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,4,1,null,View_CoreContextMenuPopoverComponent_6)),o._15(21,16384,null,0,E.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "]))],function(e,n){e(n,6,0,n.context.$implicit.captureLink,n.context.$implicit.autoLogin);e(n,9,0,n.context.$implicit.iconDescription);e(n,12,0,n.context.$implicit.content,!0,!1);e(n,15,0,(n.context.$implicit.href||n.context.$implicit.action)&&n.context.$implicit.iconAction&&"spinner"!=n.context.$implicit.iconAction);e(n,18,0,(n.context.$implicit.href||n.context.$implicit.action)&&"spinner"==n.context.$implicit.iconAction);e(n,21,0,n.context.$implicit.badge)},function(e,n){e(n,0,0,n.context.$implicit.href,n.context.$implicit.ariaAction,n.context.$implicit.hidden,!n.context.$implicit.href||n.context.$implicit.iconAction)})}function View_CoreContextMenuPopoverComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"ion-list",[["role","menu"]],[[8,"id",0]],null,null,null,null)),o._15(1,16384,null,0,H.a,[s.a,o.p,o.K,k.a,N.l,B.a],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreContextMenuPopoverComponent_1)),o._15(4,16384,null,0,E.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreContextMenuPopoverComponent_2)),o._15(7,802816,null,0,E.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.title);e(n,7,0,t.items)},function(e,n){e(n,0,0,n.component.uniqueId)})}t.d(n,"a",function(){return G});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(321),d=t(81),c=t(76),p=t(122),f=t(102),h=t(144),m=t(34),_=t(175),g=t(5),v=t(3),C=t(2),y=t(23),P=t(16),A=t(21),b=t(30),I=t(29),S=t(12),E=t(8),M=t(48),w=t(19),k=t(17),T=t(7),O=t(18),D=t(11),x=t(43),F=t(10),L=t(41),U=t(31),R=t(37),H=t(87),N=t(45),B=t(35),V=t(569),W=t(70),K=t(40),q=o._14({encapsulation:2,styles:[],data:{}}),G=o._12("core-context-menu-popover",V.a,function View_CoreContextMenuPopoverComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-popover",[],null,null,null,View_CoreContextMenuPopoverComponent_0,q)),o._15(1,49152,null,0,V.a,[W.a,K.a,T.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function View_CoreCoursePickerMenuPopoverComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),o._15(8,16384,[[2,4]],0,d.a,[s.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._16(9,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),o._15(10,540672,null,0,c.a,[o.p,p.a,f.a,h.a,m.a,_.a,g.a,v.a,C.a,y.a,P.a,A.a,[2,b.a],[2,I.a],[2,S.a],E.a,M.a,w.a,k.a,T.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(12,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"ionSelect"],[null,"click"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,13)._click(t)&&r}if("ionSelect"===n){r=!1!==i.coursePicked(t,e.context.$implicit)&&r}return r},O.b,O.a)),o._15(13,245760,null,0,D.a,[l.a,s.a,o.p,o.K,[2,i.a],[2,x.a]],{value:[0,"value"]},{ionSelect:"ionSelect"}),(e()(),o._40(-1,2,["\n    "]))],function(e,n){e(n,10,0,n.context.$implicit.fullname,"course",n.component.courseId);e(n,13,0,o._19(1,"",n.context.$implicit.id,""))},function(e,n){e(n,12,0,o._29(n,13)._disabled)})}function View_CoreCoursePickerMenuPopoverComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.courseId=t)&&o}return o},null,null)),o._15(1,1064960,null,1,x.a,[o.K,o.p,o.i],null,null),o._37(335544320,1,{_header:0}),o._35(1024,null,F.l,function(e){return[e]},[x.a]),o._15(4,671744,null,0,F.q,[[8,null],[8,null],[8,null],[2,F.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,F.m,null,[F.q]),o._15(6,16384,null,0,F.n,[F.m],null,null),o._15(7,16384,null,0,L.a,[s.a,o.p,o.K,_.a,U.l,R.a],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursePickerMenuPopoverComponent_1)),o._15(10,802816,null,0,H.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.courseId);e(n,10,0,t.courses)},function(e,n){e(n,0,0,o._29(n,6).ngClassUntouched,o._29(n,6).ngClassTouched,o._29(n,6).ngClassPristine,o._29(n,6).ngClassDirty,o._29(n,6).ngClassValid,o._29(n,6).ngClassInvalid,o._29(n,6).ngClassPending)})}t.d(n,"a",function(){return K});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(68),c=t(48),p=t(2),f=t(5),h=t(12),m=t(19),_=t(17),g=t(3),v=t(23),C=t(7),y=t(18),P=t(11),A=t(16),b=t(21),I=t(30),S=t(29),E=t(43),M=t(10),w=t(41),k=t(31),T=t(37),O=t(177),D=t(146),x=t(138),F=t(24),L=t(87),U=t(45),R=t(35),H=t(8),N=t(570),B=t(70),V=t(40),W=o._14({encapsulation:2,styles:[],data:{}}),K=o._12("core-course-picker-menu-popover",N.a,function View_CoreCoursePickerMenuPopoverComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-course-picker-menu-popover",[],null,null,null,View_CoreCoursePickerMenuPopoverComponent_0,W)),o._15(1,49152,null,0,N.a,[B.a,V.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function View_CoreRecaptchaModalComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,25,"ion-header",[],null,null,null,null,null)),o._15(1,16384,null,0,r.a,[i.a,o.p,o.K,[2,l.a]],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(3,0,null,null,21,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,s.b,s.a)),o._15(4,49152,null,0,a.a,[u.a,[2,l.a],[2,d.a],i.a,o.p,o.K],null,null),o._15(5,212992,null,0,c.a,[a.a,p.a,f.a,h.a],null,null),(e()(),o._40(-1,3,["\n        "])),(e()(),o._16(7,0,null,3,3,"ion-title",[],null,null,null,m.b,m.a)),o._15(8,49152,null,0,_.a,[i.a,o.p,o.K,[2,g.a],[2,a.a]],null,null),(e()(),o._40(9,0,["",""])),o._32(131072,v.a,[f.a,o.i]),(e()(),o._40(-1,3,["\n\n        "])),(e()(),o._16(12,0,null,2,11,"ion-buttons",[["end",""]],null,null,null,null,null)),o._15(13,16384,null,1,C.a,[i.a,o.p,o.K,[2,g.a],[2,a.a]],null,null),o._37(603979776,1,{_buttons:1}),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(16,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.closeModal()&&o}return o},y.b,y.a)),o._15(17,1097728,[[1,4]],0,P.a,[[8,""],i.a,o.p,o.K],null,null),o._32(131072,v.a,[f.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(20,0,null,0,1,"ion-icon",[["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(21,147456,null,0,A.a,[i.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,3,["\n    "])),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(27,0,null,null,5,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,b.b,b.a)),o._15(28,4374528,null,0,I.a,[i.a,p.a,S.a,o.p,o.K,u.a,E.a,o.D,[2,l.a],[2,d.a]],null,null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(30,0,null,1,1,"core-iframe",[],null,[[null,"loaded"]],function(e,n,t){var o=!0;if("loaded"===n){o=!1!==e.component.loaded(t)&&o}return o},M.b,M.a)),o._15(31,638976,null,0,w.a,[k.a,T.a,O.a,D.c,d.a,x.a,F.a,[2,L.a]],{src:[0,"src"]},{loaded:"loaded"}),(e()(),o._40(-1,1,["\n"]))],function(e,n){var t=n.component;e(n,5,0);e(n,21,0,"close");e(n,31,0,t.src)},function(e,n){e(n,3,0,o._29(n,4)._hidden,o._29(n,4)._sbPadding);e(n,9,0,o._41(n,9,0,o._29(n,10).transform("core.login.security_question")));e(n,16,0,o._41(n,16,0,o._29(n,18).transform("core.close")));e(n,20,0,o._29(n,21)._hidden);e(n,27,0,o._29(n,28).statusbarPadding,o._29(n,28)._hasRefresher)})}t.d(n,"a",function(){return N});var o=t(1),r=t(371),i=t(9),l=t(40),s=t(723),a=t(212),u=t(36),d=t(21),c=t(473),p=t(17),f=t(19),h=t(10),m=t(724),_=t(314),g=t(247),v=t(26),C=t(372),y=t(47),P=t(44),A=t(49),b=t(182),I=t(30),S=t(35),E=t(108),M=t(323),w=t(257),k=t(7),T=t(43),O=t(5),D=t(80),x=t(23),F=t(3),L=t(29),U=t(571),R=t(70),H=o._14({encapsulation:2,styles:[],data:{}}),N=o._12("core-recaptcha-modal",U.a,function View_CoreRecaptchaModalComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-recaptcha-modal",[],null,null,null,View_CoreRecaptchaModalComponent_0,H)),o._15(1,49152,null,0,U.a,[l.a,R.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function View_CoreBSTooltipComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,"p",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,0,0,n.component.content)})}function View_CoreBSTooltipComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.content)})}function View_CoreBSTooltipComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,2,1,null,View_CoreBSTooltipComponent_1)),o._15(8,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,2,1,null,View_CoreBSTooltipComponent_2)),o._15(11,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,8,0,t.html);e(n,11,0,!t.html)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(8),c=t(565),p=t(70),f=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-bs-tooltip",c.a,function View_CoreBSTooltipComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-bs-tooltip",[],null,null,null,View_CoreBSTooltipComponent_0,f)),o._15(1,49152,null,0,c.a,[p.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function View_CoreBlockCourseBlocksComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-block",[["contextLevel","course"]],null,null,null,r.b,r.a)),o._15(1,507904,[[1,4]],0,i.a,[o.u,l.a,o.w,s.a],{block:[0,"block"],contextLevel:[1,"contextLevel"],instanceId:[2,"instanceId"],extraData:[3,"extraData"]},null),o._33(2,{downloadEnabled:0})],function(e,n){var t=n.component;e(n,1,0,n.parent.context.$implicit,"course",t.courseId,e(n,2,0,t.downloadEnabled))},null)}function View_CoreBlockCourseBlocksComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreBlockCourseBlocksComponent_3)),o._15(3,16384,null,0,a.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){e(n,3,0,n.context.$implicit.visible)},null)}function View_CoreBlockCourseBlocksComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"div",[["class","core-course-blocks-side"]],[[2,"core-hide-blocks",null]],null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(2,0,null,null,10,"core-loading",[["class","core-loading-center"]],null,null,null,u.b,u.a)),o._15(3,638976,null,0,d.a,[c.a,o.p,s.a,p.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(5,0,null,0,6,"ion-list",[],null,null,null,null,null)),o._15(6,16384,null,0,f.a,[h.a,o.p,o.K,m.a,_.l,g.a],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreBlockCourseBlocksComponent_2)),o._15(10,802816,null,0,a.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.dataLoaded);e(n,10,0,t.blocks)},function(e,n){e(n,0,0,n.component.hideBlocks)})}function View_CoreBlockCourseBlocksComponent_0(e){return o._42(0,[o._37(671088640,1,{blocksComponents:1}),(e()(),o._16(1,0,null,null,3,"div",[["class","core-course-blocks-content"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),o._28(null,0),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreBlockCourseBlocksComponent_1)),o._15(7,16384,null,0,a.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,7,0,t.blocks&&t.blocks.length>0)},null)}t.d(n,"b",function(){return b}),n.c=View_CoreBlockCourseBlocksComponent_0,t.d(n,"a",function(){return I});var o=t(1),r=t(1618),i=t(390),l=t(61),s=t(10),a=t(8),u=t(55),d=t(52),c=t(19),p=t(3),f=t(87),h=t(9),m=t(17),_=t(45),g=t(35),v=t(384),C=t(5),y=t(14),P=t(385),A=t(30),b=o._14({encapsulation:2,styles:[],data:{}}),I=o._12("core-block-course-blocks",v.a,function View_CoreBlockCourseBlocksComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-block-course-blocks",[],null,null,null,View_CoreBlockCourseBlocksComponent_0,b)),o._15(1,114688,null,0,v.a,[C.a,y.a,P.a,o.p,A.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",hideBlocks:"hideBlocks",downloadEnabled:"downloadEnabled"},{},["*"])},function(e,n,t){"use strict";function View_CoreCourseUnsupportedModuleComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.whoops")))})}function View_CoreCourseUnsupportedModuleComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.uhoh")))})}function View_CoreCourseUnsupportedModuleComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[["class","core-big"]],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.course.activitydisabled")))})}function View_CoreCourseUnsupportedModuleComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[["class","core-big"]],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.course.activitynotyetviewablesiteupgradeneeded")))})}function View_CoreCourseUnsupportedModuleComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[["class","core-big"]],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.course.activitynotyetviewableremoteaddon")))})}function View_CoreCourseUnsupportedModuleComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._16(1,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(2,null,["",""])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.course.askadmintosupport")))})}function View_CoreCourseUnsupportedModuleComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._16(3,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(4,null,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(7,0,null,null,7,"a",[["block",""],["core-link",""],["icon-end",""],["ion-button",""]],[[8,"href",4]],null,null,l.b,l.a)),o._15(8,1097728,null,0,s.a,[[8,""],a.a,o.p,o.K],{block:[0,"block"]},null),o._15(9,81920,null,0,u.a,[o.p,d.a,c.a,p.a,f.a,h.a,[2,m.a],[2,_.a],[2,g.a],v.a],null,null),(e()(),o._40(10,0,["\n            ","\n            "])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._16(12,0,null,0,1,"ion-icon",[["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(13,147456,null,0,C.a,[a.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,8,0,""),e(n,9,0);e(n,13,0,"open")},function(e,n){var t=n.component;e(n,4,0,o._41(n,4,0,o._29(n,5).transform("core.course.useactivityonbrowser")));e(n,7,0,t.module.url);e(n,10,0,o._41(n,10,0,o._29(n,11).transform("core.openinbrowser")));e(n,12,0,o._29(n,13)._hidden)})}function View_CoreCourseUnsupportedModuleComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,25,"div",[["padding",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(2,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,y.b,y.a)),o._15(3,49152,null,0,P.a,[],{description:[0,"description"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseUnsupportedModuleComponent_1)),o._15(6,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseUnsupportedModuleComponent_2)),o._15(9,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseUnsupportedModuleComponent_3)),o._15(12,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseUnsupportedModuleComponent_4)),o._15(15,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseUnsupportedModuleComponent_5)),o._15(18,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseUnsupportedModuleComponent_6)),o._15(21,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseUnsupportedModuleComponent_7)),o._15(24,16384,null,0,A.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.module&&t.module.description,"module",t.module.id,t.courseId);e(n,6,0,!t.isDisabledInSite&&t.isSupportedByTheApp);e(n,9,0,t.isDisabledInSite||!t.isSupportedByTheApp);e(n,12,0,t.isDisabledInSite);e(n,15,0,!t.isDisabledInSite&&t.isSupportedByTheApp);e(n,18,0,!t.isDisabledInSite&&!t.isSupportedByTheApp);e(n,21,0,t.isDisabledInSite||!t.isSupportedByTheApp);e(n,24,0,t.module&&t.module.url)},null)}t.d(n,"b",function(){return E}),n.c=View_CoreCourseUnsupportedModuleComponent_0,t.d(n,"a",function(){return M});var o=t(1),r=t(26),i=t(19),l=t(47),s=t(44),a=t(9),u=t(175),d=t(5),c=t(3),p=t(2),f=t(23),h=t(16),m=t(21),_=t(30),g=t(29),v=t(12),C=t(49),y=t(123),P=t(113),A=t(8),b=t(396),I=t(14),S=t(62),E=o._14({encapsulation:2,styles:[],data:{}}),M=o._12("core-course-unsupported-module",b.a,function View_CoreCourseUnsupportedModuleComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-course-unsupported-module",[],null,null,null,View_CoreCourseUnsupportedModuleComponent_0,E)),o._15(1,114688,null,0,b.a,[I.a,S.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",module:"module"},{},[])},function(e,n,t){"use strict";function View_CoreBlockOnlyTitleComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["detail-push",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoBlock(t)&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,u.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,d.a,[c.a,o.i]),(e()(),o._40(-1,2,["\n"]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform(t.title)))})}t.d(n,"a",function(){return _});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(101),d=t(26),c=t(19),p=t(226),f=t(21),h=t(16),m=o._14({encapsulation:2,styles:[],data:{}}),_=o._12("core-block-only-title",p.a,function View_CoreBlockOnlyTitleComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-block-only-title",[],null,null,null,View_CoreBlockOnlyTitleComponent_0,m)),o._15(1,114688,null,0,p.a,[o.u,f.a,h.a],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[])},function(e,n,t){"use strict";function View_CoreBlockPreRenderedComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,u.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),o._16(8,16777216,null,null,2,"core-format-text",[["contextLevel","block"]],null,null,null,null,null)),o._15(9,540672,null,0,d.a,[o.p,c.a,p.a,f.a,h.a,m.a,_.a,g.a,v.a,C.a,y.a,P.a,[2,A.a],[2,b.a],[2,I.a],S.a,E.a,M.a,w.a,k.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),o._32(131072,T.a,[h.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,9,0,o._41(n,9,0,o._29(n,10).transform(t.title)),"block",t.block.instanceid,t.courseId)},null)}function View_CoreBlockPreRenderedComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-item",[["class","core-block-content item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(5,16384,null,0,O.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,16777216,null,2,1,"core-format-text",[["contextLevel","block"]],null,null,null,null,null)),o._15(8,540672,null,0,d.a,[o.p,c.a,p.a,f.a,h.a,m.a,_.a,g.a,v.a,C.a,y.a,P.a,[2,A.a],[2,b.a],[2,I.a],S.a,E.a,M.a,w.a,k.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,8,0,t.block.contents.content,"block",t.block.instanceid,t.courseId)},null)}function View_CoreBlockPreRenderedComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-item",[["class","core-block-footer item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,7,{contentLabel:0}),o._37(603979776,8,{_buttons:1}),o._37(603979776,9,{_icons:1}),o._15(5,16384,null,0,O.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,16777216,null,2,1,"core-format-text",[["contextLevel","block"]],null,null,null,null,null)),o._15(8,540672,null,0,d.a,[o.p,c.a,p.a,f.a,h.a,m.a,_.a,g.a,v.a,C.a,y.a,P.a,[2,A.a],[2,b.a],[2,I.a],S.a,E.a,M.a,w.a,k.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,8,0,t.block.contents.footer,"block",t.block.instanceid,t.courseId)},null)}function View_CoreBlockPreRenderedComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreBlockPreRenderedComponent_1)),o._15(1,16384,null,0,D.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(3,0,null,null,8,"core-loading",[["class","core-loading-center"]],null,null,null,x.b,x.a)),o._15(4,638976,null,0,F.a,[h.a,o.p,E.a,_.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_CoreBlockPreRenderedComponent_2)),o._15(7,16384,null,0,D.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_CoreBlockPreRenderedComponent_3)),o._15(10,16384,null,0,D.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.title);e(n,4,0,t.loaded);e(n,7,0,t.block.contents.content);e(n,10,0,t.block.contents.footer)},null)}t.d(n,"a",function(){return R});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(101),d=t(48),c=t(2),p=t(5),f=t(12),h=t(19),m=t(17),_=t(3),g=t(23),v=t(7),C=t(18),y=t(11),P=t(16),A=t(21),b=t(30),I=t(29),S=t(43),E=t(10),M=t(41),w=t(31),k=t(37),T=t(26),O=t(34),D=t(8),x=t(55),F=t(52),L=t(158),U=o._14({encapsulation:2,styles:[],data:{}}),R=o._12("core-block-pre-rendered",L.a,function View_CoreBlockPreRenderedComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-block-pre-rendered",[],null,null,null,View_CoreBlockPreRenderedComponent_0,U)),o._15(1,114688,null,0,L.a,[o.u],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[])},function(e,n,t){"use strict";function View_CoreCourseTagAreaComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",": ",""])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.category")),n.parent.context.$implicit.categoryName)})}function View_CoreCourseTagAreaComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openCourse(e.context.$implicit.courseId)&&o}return o},l.b,l.a)),o._15(1,1097728,null,3,s.a,[a.a,u.a,o.p,o.K,[2,d.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,c.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-graduation-cap"]],null,null,null,p.b,p.a)),o._15(8,704512,null,0,f.a,[o.p,u.a],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,2,1,null,View_CoreCourseTagAreaComponent_2)),o._15(14,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-graduation-cap");e(n,14,0,n.context.$implicit.categoryName)},function(e,n){e(n,0,0,n.context.$implicit.courseName);e(n,11,0,n.context.$implicit.courseName)})}function View_CoreCourseTagAreaComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreCourseTagAreaComponent_1)),o._15(1,802816,null,0,h.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.items)},null)}t.d(n,"a",function(){return y});var o=t(1),r=t(26),i=t(19),l=t(32),s=t(22),a=t(20),u=t(9),d=t(28),c=t(34),p=t(81),f=t(76),h=t(8),m=t(589),_=t(21),g=t(29),v=t(39),C=o._14({encapsulation:2,styles:[],data:{}}),y=o._12("core-course-tag-area",m.a,function View_CoreCourseTagAreaComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-course-tag-area",[],null,null,null,View_CoreCourseTagAreaComponent_0,C)),o._15(1,49152,null,0,m.a,[_.a,[2,g.a],v.a],null,null)],null,null)},{items:"items"},{},[])},function(e,n,t){"use strict";function View_CoreTagFeedComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-avatar",[["item-start",""]],null,null,null,null,null)),o._15(1,16384,null,0,r.a,[],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,1,"img",[["alt",""],["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],null,null,null,null,null)),o._15(4,4734976,null,0,i.a,[o.p,l.a,s.a,a.a,u.a,d.a,c.a,p.a,f.a],{src:[0,"src"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,4,0,n.parent.context.$implicit.avatarUrl)},null)}function View_CoreTagFeedComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"img",[["alt",""],["class","core-module-icon"],["core-external-content",""],["item-start",""],["role","presentation"]],null,null,null,null,null)),o._15(1,4734976,null,0,i.a,[o.p,l.a,s.a,a.a,u.a,d.a,c.a,p.a,f.a],{src:[0,"src"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit.iconUrl)},null)}function View_CoreTagFeedComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function View_CoreTagFeedComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,19,"a",[["class","item item-block"],["core-link",""],["ion-item",""],["text-wrap",""]],[[8,"href",4]],null,null,h.b,h.a)),o._15(1,1097728,null,3,m.a,[_.a,g.a,o.p,o.K,[2,v.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,C.a,[],null,null),o._15(6,81920,null,0,y.a,[o.p,d.a,f.a,u.a,c.a,P.a,[2,A.a],[2,b.a],[2,I.a],S.a],{capture:[0,"capture"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_CoreTagFeedComponent_2)),o._15(9,16384,null,0,E.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_CoreTagFeedComponent_3)),o._15(12,16384,null,0,E.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(14,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),o._40(15,null,["",""])),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,2,1,null,View_CoreTagFeedComponent_4)),o._15(18,802816,null,0,E.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,6,0,!0);e(n,9,0,n.context.$implicit.avatarUrl);e(n,12,0,n.context.$implicit.iconUrl);e(n,18,0,n.context.$implicit.details)},function(e,n){e(n,0,0,n.context.$implicit.url);e(n,15,0,n.context.$implicit.heading)})}function View_CoreTagFeedComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreTagFeedComponent_1)),o._15(1,802816,null,0,E.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.items)},null)}t.d(n,"a",function(){return k});var o=t(1),r=t(161),i=t(229),l=t(7),s=t(18),a=t(17),u=t(2),d=t(5),c=t(23),p=t(11),f=t(3),h=t(32),m=t(22),_=t(20),g=t(9),v=t(28),C=t(34),y=t(175),P=t(16),A=t(21),b=t(30),I=t(29),S=t(12),E=t(8),M=t(225),w=o._14({encapsulation:2,styles:[],data:{}}),k=o._12("core-tag-feed",M.a,function View_CoreTagFeedComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-tag-feed",[],null,null,null,View_CoreTagFeedComponent_0,w)),o._15(1,49152,null,0,M.a,[],null,null)],null,null)},{items:"items"},{},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(78),r=(t(184),t(153),t(200),function(){function AddonModAssignFeedbackPluginComponent(e,n,t,r){this.injector=e,this.feedbackDelegate=n,this.assignProvider=t,this.assignHelper=r,this.component=o.a.COMPONENT,this.text="",this.files=[]}return AddonModAssignFeedbackPluginComponent.prototype.ngOnInit=function(){var e=this;this.plugin?(this.plugin.name=this.feedbackDelegate.getPluginName(this.plugin),this.plugin.name?(this.edit=this.edit&&"false"!==this.edit,this.canEdit=this.canEdit&&"false"!==this.canEdit,this.feedbackDelegate.getComponentForPlugin(this.injector,this.plugin).then(function(n){e.pluginComponent=n,n?e.data={assign:e.assign,submission:e.submission,plugin:e.plugin,userId:e.userId,configs:e.assignHelper.getPluginConfig(e.assign,"assignfeedback",e.plugin.type),edit:e.edit,canEdit:e.canEdit}:(e.text=e.assignProvider.getSubmissionPluginText(e.plugin),e.files=e.assignProvider.getSubmissionPluginAttachments(e.plugin),e.notSupported=e.feedbackDelegate.isPluginSupported(e.plugin.type),e.pluginLoaded=!0)})):this.pluginLoaded=!0):this.pluginLoaded=!0},AddonModAssignFeedbackPluginComponent.prototype.invalidate=function(){return Promise.resolve(this.dynamicComponent&&this.dynamicComponent.callComponentFunction("invalidate",[]))},AddonModAssignFeedbackPluginComponent}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(735),t(730),t(1541);var o=function(){return function AddonModAssignComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});var o=t(0),r=t(1),i=(t(6),t(4),t(53),function(){function CoreCoursesCourseListItemComponent(e,n,t,o){this.navCtrl=e,this.translate=n,this.coursesProvider=t,this.courseHelper=o}return CoreCoursesCourseListItemComponent.prototype.ngOnInit=function(){var e=this;this.coursesProvider.getUserCourse(this.course.id).then(function(){e.course.isEnrolled=!0}).catch(function(){e.course.isEnrolled=!1,e.course.enrollment=[],e.course.enrollmentmethods.forEach(function(n){"self"===n?e.course.enrollment.push({name:e.translate.instant("core.courses.selfenrolment"),icon:"unlock"}):"guest"===n?e.course.enrollment.push({name:e.translate.instant("core.courses.allowguests"),icon:"person"}):"paypal"===n&&e.course.enrollment.push({name:e.translate.instant("core.courses.paypalaccepted"),img:"assets/img/icons/paypal.png"})}),0==e.course.enrollment.length&&e.course.enrollment.push({name:e.translate.instant("core.courses.notenrollable"),icon:"lock"})})},CoreCoursesCourseListItemComponent.prototype.openCourse=function(e){e.isEnrolled?this.courseHelper.openCourse(this.navCtrl,e):this.navCtrl.push("CoreCoursesCoursePreviewPage",{course:e})},CoreCoursesCourseListItemComponent=Object(o.__decorate)([Object(o.__param)(0,Object(r.E)())],CoreCoursesCourseListItemComponent)}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(6);var o=t(10),r=t(53),i=(t(189),function(){function CoreCoursesMyCoursesComponent(e,n,t,o,r,i,l){this.coursesProvider=e,this.domUtils=n,this.eventsProvider=t,this.sitesProvider=o,this.courseHelper=r,this.courseOptionsDelegate=i,this.coursesHelper=l,this.filter="",this.showFilter=!1,this.coursesLoaded=!1,this.prefetchCoursesData={},this.prefetchIconInitialized=!1,this.isDestroyed=!1,this.courseIds=""}return CoreCoursesMyCoursesComponent.prototype.ngOnInit=function(){var e=this;this.searchEnabled=!this.coursesProvider.isSearchCoursesDisabledInSite(),this.downloadAllCoursesEnabled=!this.coursesProvider.isDownloadCoursesDisabledInSite(),this.fetchCourses().finally(function(){e.coursesLoaded=!0}),this.myCoursesObserver=this.eventsProvider.on(r.a.EVENT_MY_COURSES_UPDATED,function(){e.fetchCourses()},this.sitesProvider.getCurrentSiteId()),this.siteUpdatedObserver=this.eventsProvider.on(o.a.SITE_UPDATED,function(){var n=e.downloadAllCoursesEnabled;e.searchEnabled=!e.coursesProvider.isSearchCoursesDisabledInSite(),e.downloadAllCoursesEnabled=!e.coursesProvider.isDownloadCoursesDisabledInSite(),!n&&e.downloadAllCoursesEnabled&&e.coursesLoaded&&e.initPrefetchCoursesIcon()},this.sitesProvider.getCurrentSiteId())},CoreCoursesMyCoursesComponent.prototype.fetchCourses=function(){var e=this;return this.coursesProvider.getUserCourses().then(function(n){var t=[],o=n.map(function(e){return e.id});return e.courseIds=o.join(","),t.push(e.coursesHelper.loadCoursesExtraInfo(n)),e.coursesProvider.canGetAdminAndNavOptions()&&t.push(e.coursesProvider.getCoursesAdminAndNavOptions(o).then(function(e){n.forEach(function(n){n.navOptions=e.navOptions[n.id],n.admOptions=e.admOptions[n.id]})})),Promise.all(t).then(function(){e.courses=n,e.filteredCourses=e.courses,e.filter="",e.initPrefetchCoursesIcon()})}).catch(function(n){e.domUtils.showErrorModalDefault(n,"core.courses.errorloadcourses",!0)})},CoreCoursesMyCoursesComponent.prototype.refreshCourses=function(e){var n=this,t=[];t.push(this.coursesProvider.invalidateUserCourses()),t.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds&&t.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds)),Promise.all(t).finally(function(){n.prefetchIconInitialized=!1,n.fetchCourses().finally(function(){e.complete()})})},CoreCoursesMyCoursesComponent.prototype.switchFilter=function(){var e=this;this.filter="",this.showFilter=!this.showFilter,this.filteredCourses=this.courses,this.showFilter&&setTimeout(function(){e.searchbar.setFocus()},500)},CoreCoursesMyCoursesComponent.prototype.filterChanged=function(e){var n=e.target.value&&e.target.value.trim().toLowerCase();this.filteredCourses=n&&this.courses?this.courses.filter(this.courses.length>0&&void 0!==this.courses[0].displayname?function(e){return e.displayname.toLowerCase().indexOf(n)>-1}:function(e){return e.fullname.toLowerCase().indexOf(n)>-1}):this.courses},CoreCoursesMyCoursesComponent.prototype.prefetchCourses=function(){var e=this,n=this.prefetchCoursesData.icon;return this.prefetchCoursesData.icon="spinner",this.prefetchCoursesData.badge="",this.courseHelper.confirmAndPrefetchCourses(this.courses,function(n){e.prefetchCoursesData.badge=n.count+" / "+n.total}).then(function(){e.prefetchCoursesData.icon="ion-android-refresh"}).catch(function(t){e.isDestroyed||(e.domUtils.showErrorModalDefault(t,"core.course.errordownloadingcourse",!0),e.prefetchCoursesData.icon=n)}).finally(function(){e.prefetchCoursesData.badge=""})},CoreCoursesMyCoursesComponent.prototype.initPrefetchCoursesIcon=function(){var e=this;!this.prefetchIconInitialized&&this.downloadAllCoursesEnabled&&(this.prefetchIconInitialized=!0,!this.courses||this.courses.length<2?this.prefetchCoursesData.icon="":this.courseHelper.determineCoursesStatus(this.courses).then(function(n){var t=e.courseHelper.getCourseStatusIconAndTitleFromStatus(n).icon;"spinner"==t&&(t="cloud-download"),e.prefetchCoursesData.icon=t}))},CoreCoursesMyCoursesComponent.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.myCoursesObserver&&this.myCoursesObserver.off(),this.siteUpdatedObserver&&this.siteUpdatedObserver.off()},CoreCoursesMyCoursesComponent}())},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(384);var o=function(){function CoreSiteHomeIndexComponent(e,n,t,o,r){this.domUtils=e,this.courseProvider=t,this.courseHelper=o,this.prefetchDelegate=r,this.dataLoaded=!1,this.items=[],this.currentSite=n.getCurrentSite(),this.siteHomeId=this.currentSite.getSiteHomeId()}return CoreSiteHomeIndexComponent.prototype.ngOnInit=function(){var e=this;this.loadContent().finally(function(){e.dataLoaded=!0})},CoreSiteHomeIndexComponent.prototype.doRefresh=function(e){var n=this,t=[];t.push(this.courseProvider.invalidateSections(this.siteHomeId)),t.push(this.currentSite.invalidateConfig().then(function(){return n.currentSite.getConfig().then(function(e){n.currentSite.setConfig(e)})})),this.section&&this.section.modules&&t.push(this.prefetchDelegate.invalidateModules(this.section.modules,this.siteHomeId)),t.push(this.courseBlocksComponent.invalidateBlocks()),Promise.all(t).finally(function(){var t=[];return t.push(n.loadContent()),t.push(n.courseBlocksComponent.loadContent()),Promise.all(t).finally(function(){e.complete()})})},CoreSiteHomeIndexComponent.prototype.loadContent=function(){var e=this;this.hasContent=!1;var n=this.currentSite.getStoredConfig()||{numsections:1};if(n.frontpageloggedin){var t=["news",!1,"categories",!1,"categories","enrolled-course-list","all-course-list","course-search"],o=n.frontpageloggedin.split(",");this.items=[],o.forEach(function(n){var o=t[parseInt(n,10)];!o||e.items.indexOf(o)>=0||(e.hasContent=!0,e.items.push(o))})}return this.courseProvider.getSections(this.siteHomeId,!1,!0).then(function(t){e.section=!!n.numsections&&t.find(function(e){return 1==e.section}),e.section&&(e.section.hasContent=e.courseHelper.sectionHasContent(e.section),e.hasContent=e.courseHelper.addHandlerDataForModules([e.section],e.siteHomeId,void 0,void 0,!0)||e.hasContent),e.courseProvider.logView(e.siteHomeId,void 0,void 0,e.currentSite&&e.currentSite.getInfo().sitename).catch(function(){})}).catch(function(n){e.domUtils.showErrorModalDefault(n,"core.course.couldnotloadsectioncontent",!0)})},CoreSiteHomeIndexComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0),t(6);var o=t(10),r=t(231),i=function(){function CoreRatingAggregateComponent(e,n,t,r){var i=this;this.eventsProvider=e,this.modalCtrl=n,this.ratingProvider=t,this.disabled=!1,this.disabled=this.ratingProvider.isRatingDisabledInSite(),this.updateSiteObserver=e.on(o.a.SITE_UPDATED,function(){i.disabled=i.ratingProvider.isRatingDisabledInSite()},r.getCurrentSiteId())}return CoreRatingAggregateComponent.prototype.ngOnChanges=function(e){var n=this;if(this.aggregateObserver&&this.aggregateObserver.off(),this.item=(this.ratingInfo.ratings||[]).find(function(e){return e.itemid==n.itemId}),this.item){if(this.aggregateMethod==r.a.AGGREGATE_AVERAGE)this.labelKey="core.rating.aggregateavg";else if(this.aggregateMethod==r.a.AGGREGATE_COUNT)this.labelKey="core.rating.aggregatecount";else if(this.aggregateMethod==r.a.AGGREGATE_MAXIMUM)this.labelKey="core.rating.aggregatemax";else if(this.aggregateMethod==r.a.AGGREGATE_MINIMUM)this.labelKey="core.rating.aggregatemin";else{if(this.aggregateMethod!=r.a.AGGREGATE_SUM)return void(this.labelKey="");this.labelKey="core.rating.aggregatesum"}this.showCount=this.aggregateMethod!=r.a.AGGREGATE_COUNT,this.aggregateObserver=this.eventsProvider.on(r.a.AGGREGATE_CHANGED_EVENT,function(e){e.contextLevel==n.contextLevel&&e.instanceId==n.instanceId&&e.component==n.ratingInfo.component&&e.ratingArea==n.ratingInfo.ratingarea&&e.itemId==n.itemId&&(n.item.aggregatestr=e.aggregate,n.item.count=e.count)})}},CoreRatingAggregateComponent.prototype.openRatings=function(){if(this.ratingInfo.canviewall&&this.item.count&&!this.disabled){this.modalCtrl.create("CoreRatingRatingsPage",{contextLevel:this.contextLevel,instanceId:this.instanceId,ratingComponent:this.ratingInfo.component,ratingArea:this.ratingInfo.ratingarea,itemId:this.itemId,scaleId:this.scaleId,courseId:this.courseId}).present()}},CoreRatingAggregateComponent.prototype.ngOnDestroy=function(){this.aggregateObserver&&this.aggregateObserver.off(),this.updateSiteObserver&&this.updateSiteObserver.off()},CoreRatingAggregateComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(1),r=(t(4),t(231)),i=t(10),l=function(){function CoreRatingRateComponent(e,n,t,r,l,s){var a=this;this.domUtils=e,this.translate=n,this.ratingProvider=r,this.ratingOffline=l,this.disabled=!1,this.onLoading=new o.r,this.onUpdate=new o.r,this.disabled=this.ratingProvider.isRatingDisabledInSite(),this.updateSiteObserver=t.on(i.a.SITE_UPDATED,function(){a.disabled=a.ratingProvider.isRatingDisabledInSite()},s.getCurrentSiteId())}return CoreRatingRateComponent.prototype.ngOnChanges=function(e){var n=this;if(this.item=(this.ratingInfo.ratings||[]).find(function(e){return e.itemid==n.itemId}),this.scale=(this.ratingInfo.scales||[]).find(function(e){return e.id==n.scaleId}),this.item&&this.scale&&this.ratingProvider.isAddRatingWSAvailable()){if(!this.scale.items&&(this.scale.items=[],this.scale.isnumeric))for(var t=0;t<=this.scale.max;t++)this.scale.items.push({name:String(t),value:t});this.scale.items[0]&&this.scale.items[0].value==r.a.UNSET_RATING||this.scale.items.unshift({name:this.translate.instant("core.none"),value:r.a.UNSET_RATING}),this.onLoading.emit(!0),this.ratingOffline.getRating(this.contextLevel,this.instanceId,this.ratingInfo.component,this.ratingInfo.ratingarea,this.itemId).then(function(e){n.rating=e.rating}).catch(function(){n.rating=n.item&&null!=n.item.rating?n.item.rating:r.a.UNSET_RATING}).finally(function(){n.onLoading.emit(!1)})}else this.item=null},CoreRatingRateComponent.prototype.userRatingChanged=function(){var e=this,n=this.domUtils.showModalLoading("core.sending",!0);this.ratingProvider.addRating(this.ratingInfo.component,this.ratingInfo.ratingarea,this.contextLevel,this.instanceId,this.itemId,this.itemSetId,this.courseId,this.scaleId,this.rating,this.userId,this.aggregateMethod).then(function(n){null==n?e.domUtils.showToast("core.datastoredoffline",!0,3e3):e.onUpdate.emit()}).catch(function(n){e.domUtils.showErrorModal(n)}).finally(function(){n.dismiss()})},CoreRatingRateComponent.prototype.ngOnDestroy=function(){this.updateSiteObserver&&this.updateSiteObserver.off()},CoreRatingRateComponent}()},function(e,n,t){"use strict";function View_AddonModFeedbackIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModFeedbackIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModFeedbackIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModFeedbackIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModFeedbackIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function View_AddonModFeedbackIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModFeedbackIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",400)},null)}function View_AddonModFeedbackIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function View_AddonModFeedbackIndexComponent_9(e){return o._42(0,[(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,[[3,2]],null,1,null,View_AddonModFeedbackIndexComponent_10)),o._15(2,540672,null,0,u.r,[o.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),o._40(-1,null,["\n                "]))],function(e,n){e(n,2,0,o._29(n.parent.parent,50))},null)}function View_AddonModFeedbackIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function View_AddonModFeedbackIndexComponent_11(e){return o._42(0,[(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,[[5,2]],null,1,null,View_AddonModFeedbackIndexComponent_12)),o._15(2,540672,null,0,u.r,[o.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),o._40(-1,null,["\n                "]))],function(e,n){e(n,2,0,o._29(n.parent.parent,53))},null)}function View_AddonModFeedbackIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function View_AddonModFeedbackIndexComponent_13(e){return o._42(0,[(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,[[7,2]],null,1,null,View_AddonModFeedbackIndexComponent_14)),o._15(2,540672,null,0,u.r,[o.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),o._40(-1,null,["\n                "]))],function(e,n){e(n,2,0,o._29(n.parent.parent,53))},null)}function View_AddonModFeedbackIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,32,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,29,"core-tabs",[],null,null,null,d.b,d.a)),o._15(3,4964352,[[1,4]],0,c.a,[o.p,p.a,f.a,h.a,m.a,_.a,a.a],{selectedIndex:[0,"selectedIndex"],hideUntil:[1,"hideUntil"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(5,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,n,t){var o=!0;if("ionSelect"===n){o=!1!==e.component.tabChanged("overview")&&o}return o},g.b,g.a)),o._15(6,245760,null,2,v.a,[c.a,o.p,f.a,C.a],{title:[0,"title"]},{ionSelect:"ionSelect"}),o._37(603979776,3,{template:0}),o._37(335544320,4,{content:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(0,[[3,2]],null,0,null,View_AddonModFeedbackIndexComponent_9)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(14,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,n,t){var o=!0;if("ionSelect"===n){o=!1!==e.component.tabChanged("analysis")&&o}return o},g.b,g.a)),o._15(15,245760,null,2,v.a,[c.a,o.p,f.a,C.a],{title:[0,"title"],show:[1,"show"]},{ionSelect:"ionSelect"}),o._37(603979776,5,{template:0}),o._37(335544320,6,{content:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(0,[[5,2]],null,0,null,View_AddonModFeedbackIndexComponent_11)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n\n            "])),(e()(),o._16(23,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,n,t){var o=!0;if("ionSelect"===n){o=!1!==e.component.tabChanged("analysis")&&o}return o},g.b,g.a)),o._15(24,245760,null,2,v.a,[c.a,o.p,f.a,C.a],{title:[0,"title"],show:[1,"show"]},{ionSelect:"ionSelect"}),o._37(603979776,7,{template:0}),o._37(335544320,8,{content:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(0,[[7,2]],null,0,null,View_AddonModFeedbackIndexComponent_13)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.firstSelectedTab,t.tabsReady);e(n,6,0,o._41(n,6,0,o._29(n,9).transform("addon.mod_feedback.overview")));e(n,15,0,o._41(n,15,0,o._29(n,18).transform("addon.mod_feedback.analysis")),t.access.canviewreports);e(n,24,0,o._41(n,24,0,o._29(n,27).transform("addon.mod_feedback.completed_feedbacks")),!t.access.canviewreports)},null)}function View_AddonModFeedbackIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function View_AddonModFeedbackIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_16)),o._15(3,540672,null,0,u.r,[o.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,o._29(n.parent,50))},null)}function View_AddonModFeedbackIndexComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-label",[["id","addon-feedback-groupslabel"]],null,null,null,null,null)),o._15(1,16384,[[9,4]],0,y.a,[P.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"addon-feedback-groupslabel")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.groupsseparate")))})}function View_AddonModFeedbackIndexComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-label",[["id","addon-feedback-groupslabel"]],null,null,null,null,null)),o._15(1,16384,[[9,4]],0,y.a,[P.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"addon-feedback-groupslabel")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.groupsvisible")))})}function View_AddonModFeedbackIndexComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),o._15(1,16384,[[12,4]],0,A.a,[o.p],{value:[0,"value"]},null),(e()(),o._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.id)},function(e,n){e(n,2,0,n.context.$implicit.name)})}function View_AddonModFeedbackIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,b.b,b.a)),o._15(1,1097728,null,3,I.a,[S.a,P.a,o.p,o.K,[2,E.a]],null,null),o._37(603979776,9,{contentLabel:0}),o._37(603979776,10,{_buttons:1}),o._37(603979776,11,{_icons:1}),o._15(5,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,1,1,null,View_AddonModFeedbackIndexComponent_20)),o._15(8,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,1,1,null,View_AddonModFeedbackIndexComponent_21)),o._15(11,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-feedback-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,14)._click(t)&&r}if("keyup.space"===n){r=!1!==o._29(e,14)._keyup()&&r}if("ngModelChange"===n){r=!1!==(i.group=t)&&r}if("ionChange"===n){r=!1!==i.setGroup(i.group)&&r}return r},w.b,w.a)),o._15(14,1228800,null,1,k.a,[T.a,S.a,P.a,o.p,o.K,[2,I.a],O.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),o._37(603979776,12,{options:1}),o._35(1024,null,D.l,function(e){return[e]},[k.a]),o._15(17,671744,null,0,D.q,[[8,null],[8,null],[8,null],[2,D.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,D.m,null,[D.q]),o._15(19,16384,null,0,D.n,[D.m],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_22)),o._15(22,802816,null,0,u.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,t.groupInfo.separateGroups);e(n,11,0,t.groupInfo.visibleGroups);e(n,14,0,"action-sheet");e(n,17,0,t.group);e(n,22,0,t.groupInfo.groups)},function(e,n){e(n,13,0,o._29(n,14)._disabled,o._29(n,19).ngClassUntouched,o._29(n,19).ngClassTouched,o._29(n,19).ngClassPristine,o._29(n,19).ngClassDirty,o._29(n,19).ngClassValid,o._29(n,19).ngClassInvalid,o._29(n,19).ngClassPending)})}function View_AddonModFeedbackIndexComponent_23(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"a",[["class","item item-block"],["detail-push",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openFeature("NonRespondents")&&o}return o},b.b,b.a)),o._15(1,1097728,null,3,I.a,[S.a,P.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,16,{contentLabel:0}),o._37(603979776,17,{_buttons:1}),o._37(603979776,18,{_icons:1}),o._15(5,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n        "]))],null,function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_feedback.show_nonrespondents")))})}function View_AddonModFeedbackIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,40,"ion-list",[],null,null,null,null,null)),o._15(1,16384,null,0,x.a,[P.a,o.p,o.K,_.a,F.l,L.a],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_19)),o._15(4,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(6,0,null,null,14,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[1,"detail-none",0]],[[null,"click"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==(r.access.canviewreports&&r.feedback.completedCount>0&&r.openFeature("Respondents"))&&o}return o},b.b,b.a)),o._15(7,1097728,null,3,I.a,[S.a,P.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,13,{contentLabel:0}),o._37(603979776,14,{_buttons:1}),o._37(603979776,15,{_icons:1}),o._15(11,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(14,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(17,0,null,4,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),o._15(18,16384,null,0,U.a,[P.a,o.p,o.K],null,null),(e()(),o._40(19,null,["",""])),(e()(),o._40(-1,2,["\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_23)),o._15(23,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(25,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,b.b,b.a)),o._15(26,1097728,null,3,I.a,[S.a,P.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,19,{contentLabel:0}),o._37(603979776,20,{_buttons:1}),o._37(603979776,21,{_icons:1}),o._15(30,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(32,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(33,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(36,0,null,4,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),o._15(37,16384,null,0,U.a,[P.a,o.p,o.K],null,null),(e()(),o._40(38,null,["",""])),(e()(),o._40(-1,2,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.groupInfo&&(t.groupInfo.separateGroups||t.groupInfo.visibleGroups));e(n,23,0,!t.access.isanonymous&&t.access.canviewreports)},function(e,n){var t=n.component;e(n,6,0,!(t.access.canviewreports&&t.feedback.completedCount>0)||null);e(n,14,0,o._41(n,14,0,o._29(n,15).transform("addon.mod_feedback.completed_feedbacks")));e(n,19,0,t.feedback.completedCount);e(n,33,0,o._41(n,33,0,o._29(n,34).transform("addon.mod_feedback.questions")));e(n,38,0,t.feedback.itemsCount)})}function View_AddonModFeedbackIndexComponent_17(e){return o._42(0,[(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_18)),o._15(2,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.access.canviewanalysis&&!t.access.isempty)},null)}function View_AddonModFeedbackIndexComponent_25(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function View_AddonModFeedbackIndexComponent_26(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,R.a,[P.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n            ","\n        "])),o._33(5,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function View_AddonModFeedbackIndexComponent_27(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,R.a,[P.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n            ","\n        "])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,5).transform("addon.mod_feedback.feedback_is_not_open")))})}function View_AddonModFeedbackIndexComponent_28(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"div",[["class","core-success-card"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","checkmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,R.a,[P.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n            ","\n        "])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"checkmark")},function(e,n){e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,5).transform("addon.mod_feedback.this_feedback_is_already_submitted")))})}function View_AddonModFeedbackIndexComponent_30(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,b.b,b.a)),o._15(1,1097728,null,3,I.a,[S.a,P.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,22,{contentLabel:0}),o._37(603979776,23,{_buttons:1}),o._37(603979776,24,{_icons:1}),o._15(5,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_feedback.feedbackopen")));e(n,12,0,t.overview.openTimeReadable)})}function View_AddonModFeedbackIndexComponent_31(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,b.b,b.a)),o._15(1,1097728,null,3,I.a,[S.a,P.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,25,{contentLabel:0}),o._37(603979776,26,{_buttons:1}),o._37(603979776,27,{_icons:1}),o._15(5,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_feedback.feedbackclose")));e(n,12,0,t.overview.closeTimeReadable)})}function View_AddonModFeedbackIndexComponent_32(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,b.b,b.a)),o._15(1,1097728,null,3,I.a,[S.a,P.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,28,{contentLabel:0}),o._37(603979776,29,{_buttons:1}),o._37(603979776,30,{_icons:1}),o._15(5,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(12,540672,null,0,H.a,[o.p,N.a,f.a,B.a,a.a,_.a,C.a,V.a,W.a,K.a,h.a,q.a,[2,G.a],[2,p.a],[2,j.a],Q.a,z.a,$.a,Y.a,X.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,12,0,t.feedback.page_after_submit,t.component,t.componentId,"module",t.module.id,t.courseId)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_feedback.page_after_submit")))})}function View_AddonModFeedbackIndexComponent_34(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_feedback.anonymous")))})}function View_AddonModFeedbackIndexComponent_35(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_feedback.non_anonymous")))})}function View_AddonModFeedbackIndexComponent_37(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoAnswerQuestions()&&o}return o},J.b,J.a)),o._15(1,1097728,null,0,Z.a,[[8,""],P.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(2,0,["\n                                ","\n                                "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,R.a,[P.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n                            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"arrow-forward")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("addon.mod_feedback.complete_the_form")));e(n,4,0,o._29(n,5)._hidden)})}function View_AddonModFeedbackIndexComponent_38(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoAnswerQuestions()&&o}return o},J.b,J.a)),o._15(1,1097728,null,0,Z.a,[[8,""],P.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(2,0,["\n                                ","\n                                "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,R.a,[P.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n                            "]))],function(e,n){e(n,1,0,"");e(n,5,0,"arrow-forward")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("addon.mod_feedback.continue_the_form")));e(n,4,0,o._29(n,5)._hidden)})}function View_AddonModFeedbackIndexComponent_36(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(1,16384,null,0,ee.a,[],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_37)),o._15(4,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_38)),o._15(7,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "]))],function(e,n){var t=n.component;e(n,4,0,!t.goPage);e(n,7,0,t.goPage)},null)}function View_AddonModFeedbackIndexComponent_33(e){return o._42(0,[(e()(),o._16(0,0,null,null,42,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(2,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,b.b,b.a)),o._15(3,1097728,null,3,I.a,[S.a,P.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,31,{contentLabel:0}),o._37(603979776,32,{_buttons:1}),o._37(603979776,33,{_icons:1}),o._15(7,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(9,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(10,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModFeedbackIndexComponent_34)),o._15(14,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModFeedbackIndexComponent_35)),o._15(17,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(20,0,null,null,21,"ion-grid",[["class","grid"]],null,null,null,null,null)),o._15(21,16384,null,0,ne.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(23,0,null,null,17,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),o._15(24,16384,null,0,te.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(26,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(27,16384,null,0,ee.a,[],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(29,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoAnswerQuestions(!0)&&o}return o},J.b,J.a)),o._15(30,1097728,null,0,Z.a,[[8,""],P.a,o.p,o.K],{outline:[0,"outline"],block:[1,"block"]},null),(e()(),o._40(-1,0,["\n                                "])),(e()(),o._16(32,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(33,147456,null,0,R.a,[P.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(34,0,["\n                                ","\n                            "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_36)),o._15(39,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n\n            "]))],function(e,n){var t=n.component;e(n,14,0,t.access.isanonymous);e(n,17,0,!t.access.isanonymous);e(n,30,0,"","");e(n,33,0,"search");e(n,39,0,t.access.cancomplete&&t.access.cansubmit&&t.access.isopen)},function(e,n){e(n,10,0,o._41(n,10,0,o._29(n,11).transform("addon.mod_feedback.mode")));e(n,32,0,o._29(n,33)._hidden);e(n,34,0,o._41(n,34,0,o._29(n,35).transform("addon.mod_feedback.preview")))})}function View_AddonModFeedbackIndexComponent_29(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-list",[],null,null,null,null,null)),o._15(1,16384,null,0,x.a,[P.a,o.p,o.K,_.a,F.l,L.a],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_30)),o._15(4,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_31)),o._15(7,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_32)),o._15(10,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_33)),o._15(13,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,t.access.canedititems&&t.overview.timeopen);e(n,7,0,t.access.canedititems&&t.overview.timeclose);e(n,10,0,t.access.canedititems&&t.feedback.page_after_submit);e(n,13,0,!t.access.isempty)},null)}function View_AddonModFeedbackIndexComponent_24(e){return o._42(0,[(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(1,0,null,null,18,"core-loading",[],null,null,null,oe.b,oe.a)),o._15(2,638976,null,0,re.a,[a.a,o.p,z.a,C.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_25)),o._15(5,540672,null,0,u.r,[o.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_26)),o._15(9,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_27)),o._15(12,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_28)),o._15(15,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_29)),o._15(18,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.tabsLoaded.overview);e(n,5,0,o._29(n.parent,47));e(n,9,0,t.hasOffline);e(n,12,0,t.access.cancomplete&&!t.access.isopen);e(n,15,0,t.access.cancomplete&&t.access.isopen&&!t.access.cansubmit);e(n,18,0,t.access.canedititems||t.access.canviewreports||!t.access.isempty)},null)}function View_AddonModFeedbackIndexComponent_40(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function View_AddonModFeedbackIndexComponent_42(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,R.a,[P.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n                ","\n            "]))],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,t.warning)})}function View_AddonModFeedbackIndexComponent_46(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function View_AddonModFeedbackIndexComponent_45(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(2,0,null,null,4,"ul",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_46)),o._15(5,802816,null,0,u.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(8,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(9,null,["",": ",""])),o._32(131072,s.a,[a.a,o.i]),o._34(11,2),(e()(),o._40(-1,null,["\n                        "]))],function(e,n){e(n,5,0,n.parent.context.$implicit.data)},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.mod_feedback.average")),o._41(n,9,1,e(n,11,0,o._29(n.parent.parent.parent.parent.parent,0),n.parent.context.$implicit.average,"1.2-2")))})}function View_AddonModFeedbackIndexComponent_49(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"li",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit)})}function View_AddonModFeedbackIndexComponent_48(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_49)),o._15(3,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "]))],function(e,n){e(n,3,0,n.context.$implicit)},null)}function View_AddonModFeedbackIndexComponent_47(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(2,0,null,null,4,"ul",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_48)),o._15(5,802816,null,0,u.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._40(-1,null,["\n                        "]))],function(e,n){e(n,5,0,n.parent.context.$implicit.data)},null)}function View_AddonModFeedbackIndexComponent_51(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",": ",""])),o._32(131072,s.a,[a.a,o.i]),o._34(3,2)],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_feedback.average")),o._41(n,1,1,e(n,3,0,o._29(n.parent.parent.parent.parent.parent.parent,0),n.parent.parent.context.$implicit.average,"1.2-2")))})}function View_AddonModFeedbackIndexComponent_50(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(2,0,null,null,1,"core-chart",[["contextLevel","module"],["height","300"]],null,null,null,ie.b,ie.a)),o._15(3,770048,null,0,le.a,[$.a,C.a,Y.a],{data:[0,"data"],labels:[1,"labels"],type:[2,"type"],height:[3,"height"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"],wsNotFiltered:[7,"wsNotFiltered"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_51)),o._15(6,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "]))],function(e,n){var t=n.component;e(n,3,0,n.parent.context.$implicit.chartData,n.parent.context.$implicit.labels,n.parent.context.$implicit.chartType,"300","module",t.module.id,t.courseId,!0);e(n,6,0,n.parent.context.$implicit.average)},null)}function View_AddonModFeedbackIndexComponent_44(e){return o._42(0,[(e()(),o._16(0,0,null,null,28,"ion-item",[["class","core-analysis item item-block"],["text-wrap",""]],null,null,null,b.b,b.a)),o._15(1,1097728,null,3,I.a,[S.a,P.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,34,{contentLabel:0}),o._37(603979776,35,{_buttons:1}),o._37(603979776,36,{_icons:1}),o._15(5,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",". "])),(e()(),o._16(9,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(10,540672,null,0,H.a,[o.p,N.a,f.a,B.a,a.a,_.a,C.a,V.a,W.a,K.a,h.a,q.a,[2,G.a],[2,p.a],[2,j.a],Q.a,z.a,$.a,Y.a,X.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._16(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(14,540672,null,0,H.a,[o.p,N.a,f.a,B.a,a.a,_.a,C.a,V.a,W.a,K.a,h.a,q.a,[2,G.a],[2,p.a],[2,j.a],Q.a,z.a,$.a,Y.a,X.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(16,0,null,2,11,null,null,null,null,null,null,null)),o._15(17,16384,null,0,u.o,[],{ngSwitch:[0,"ngSwitch"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_45)),o._15(20,278528,null,0,u.p,[o.W,o.T,u.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_47)),o._15(23,278528,null,0,u.p,[o.W,o.T,u.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_50)),o._15(26,278528,null,0,u.p,[o.W,o.T,u.o],{ngSwitchCase:[0,"ngSwitchCase"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,10,0,n.context.$implicit.name,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,14,0,n.context.$implicit.label,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,17,0,n.context.$implicit.template);e(n,20,0,"numeric");e(n,23,0,"list");e(n,26,0,"chart")},function(e,n){e(n,8,0,n.context.$implicit.number)})}function View_AddonModFeedbackIndexComponent_43(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),o._15(1,16384,null,0,x.a,[P.a,o.p,o.K,_.a,F.l,L.a],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_44)),o._15(4,802816,null,0,u.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){e(n,4,0,n.component.items)},null)}function View_AddonModFeedbackIndexComponent_41(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_42)),o._15(3,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFeedbackIndexComponent_43)),o._15(6,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.warning);e(n,6,0,t.items&&t.items.length)},null)}function View_AddonModFeedbackIndexComponent_39(e){return o._42(0,[(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(1,0,null,null,8,"core-loading",[],null,null,null,oe.b,oe.a)),o._15(2,638976,null,0,re.a,[a.a,o.p,z.a,C.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_40)),o._15(5,540672,null,0,u.r,[o.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_41)),o._15(8,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.tabsLoaded.analysis);e(n,5,0,o._29(n.parent,47));e(n,8,0,t.access.canedititems||!t.access.isempty)},null)}function View_AddonModFeedbackIndexComponent_0(e){return o._42(0,[o._32(0,u.d,[o.x]),o._37(671088640,1,{tabsComponent:0}),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(3,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,se.b,se.a)),o._15(4,245760,null,1,ae.a,[o.p,W.a,f.a],null,null),o._37(603979776,2,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(7,0,null,0,23,"core-context-menu",[],null,null,null,ue.b,ue.a)),o._15(8,245760,null,0,l.a,[a.a,de.a,o.p,f.a,[2,v.a],C.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_1)),o._15(11,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_2)),o._15(14,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_3)),o._15(17,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_4)),o._15(20,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_5)),o._15(23,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_6)),o._15(26,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_7)),o._15(29,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(34,0,null,null,11,"core-loading",[["class","core-loading-center"]],null,null,null,oe.b,oe.a)),o._15(35,638976,null,0,re.a,[a.a,o.p,z.a,C.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(37,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,ce.b,ce.a)),o._15(38,49152,null,0,pe.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_8)),o._15(41,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFeedbackIndexComponent_15)),o._15(44,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n\n"])),(e()(),o._11(0,[["basicInfo",2]],null,0,null,View_AddonModFeedbackIndexComponent_17)),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(0,[["tabOverview",2]],null,0,null,View_AddonModFeedbackIndexComponent_24)),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(0,[["tabAnalysis",2]],null,0,null,View_AddonModFeedbackIndexComponent_39)),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0),e(n,8,0);e(n,11,0,t.externalUrl);e(n,14,0,t.description);e(n,17,0,t.blog);e(n,20,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,23,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,26,0,t.prefetchStatusIcon);e(n,29,0,t.size);e(n,35,0,t.loaded);e(n,38,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,41,0,t.showTabs);e(n,44,0,t.feedback&&!t.showTabs)},null)}t.d(n,"b",function(){return ye}),n.c=View_AddonModFeedbackIndexComponent_0,t.d(n,"a",function(){return Pe});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(8),d=t(731),c=t(202),p=t(30),f=t(5),h=t(11),m=t(127),_=t(17),g=t(732),v=t(77),C=t(3),y=t(68),P=t(9),A=t(109),b=t(32),I=t(22),S=t(20),E=t(28),M=t(34),w=t(124),k=t(110),T=t(36),O=t(60),D=t(24),x=t(87),F=t(45),L=t(35),U=t(144),R=t(49),H=t(48),N=t(2),B=t(12),V=t(23),W=t(7),K=t(18),q=t(16),G=t(21),j=t(29),Q=t(43),z=t(10),$=t(41),Y=t(31),X=t(37),J=t(47),Z=t(44),ee=t(120),ne=t(165),te=t(121),oe=t(55),re=t(52),ie=t(1060),le=t(444),se=t(97),ae=t(88),ue=t(92),de=t(71),ce=t(123),pe=t(113),fe=t(504),he=t(135),me=t(297),_e=t(72),ge=t(285),ve=t(252),Ce=t(25),ye=o._14({encapsulation:2,styles:[],data:{}}),Pe=o._12("addon-mod-feedback-index",fe.a,function View_AddonModFeedbackIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-feedback-index",[],null,null,null,View_AddonModFeedbackIndexComponent_0,ye)),o._15(1,245760,null,0,fe.a,[o.u,he.a,[2,p.a],me.a,_e.a,ge.a,G.a,ve.a,Ce.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group",tab:"tab"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_CoreCourseModuleCompletionComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"button",[],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.completionClicked(t)&&o}return o},null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(2,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n"]))],null,function(e,n){var t=n.component;e(n,2,0,t.completionImage,t.completionDescription)})}function View_CoreCourseModuleCompletionComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleCompletionComponent_1)),o._15(1,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.completion)},null)}function View_CoreCourseModuleComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,"img",[["class","core-module-icon"],["item-start",""]],[[8,"src",4],[8,"alt",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.module.handlerData.icon,t.module.modnametranslated)})}function View_CoreCourseModuleComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-course-module-completion",[],null,[[null,"completionChanged"]],function(e,n,t){var o=!0;if("completionChanged"===n){o=!1!==e.component.completionChanged.emit(t)&&o}return o},View_CoreCourseModuleCompletionComponent_0,c)),o._15(1,573440,null,0,i.a,[l.a,s.a,a.a,u.a,d.a],{completion:[0,"completion"],moduleId:[1,"moduleId"],moduleName:[2,"moduleName"]},{completionChanged:"completionChanged"})],function(e,n){var t=n.component;e(n,1,0,t.module.completiondata,t.module.id,t.module.name)},null)}function View_CoreCourseModuleComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["class","core-animate-show-hide"],["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.buttonClicked(t,e.context.$implicit)&&o}return o},p.b,p.a)),o._15(1,1097728,null,0,f.a,[[8,""],h.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,m.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._16(4,0,null,0,1,"core-icon",[],null,null,null,_.b,_.a)),o._15(5,704512,null,0,g.a,[o.p,h.a],{name:[0,"name"],md:[1,"md"],ios:[2,"ios"]},null),(e()(),o._40(-1,0,["\n                "]))],function(e,n){e(n,1,0,"dark","");e(n,5,0,n.context.$implicit.icon,n.context.$implicit.mdIcon||"",n.context.$implicit.iosIcon||"")},function(e,n){var t=n.component;e(n,0,0,n.context.$implicit.hidden||t.spinner||t.module.handlerData.spinner,o._41(n,0,1,o._29(n,2).transform(n.context.$implicit.label)))})}function View_CoreCourseModuleComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"div",[["class","buttons core-module-buttons"],["item-end",""]],null,null,null,null,null)),o._15(1,278528,null,0,r.i,[o.v,o.w,o.p,o.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o._33(2,{"core-button-completion":0}),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleComponent_4)),o._15(6,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._16(8,0,null,null,8,"div",[["class","core-module-buttons-more"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(10,0,null,null,1,"core-download-refresh",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.download(t)&&o}return o},v.b,v.a)),o._15(11,49152,null,0,C.a,[],{status:[0,"status"],enabled:[1,"enabled"],loading:[2,"loading"],canTrustDownload:[3,"canTrustDownload"]},{action:"action"}),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleComponent_5)),o._15(15,802816,null,0,r.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,"buttons core-module-buttons",e(n,2,0,t.module.completiondata));e(n,6,0,t.module.completiondata);e(n,11,0,t.downloadStatus,t.downloadEnabled,t.spinner||t.module.handlerData.spinner,t.canCheckUpdates);e(n,15,0,t.module.handlerData.buttons)},null)}function View_CoreCourseModuleComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"ion-badge",[["item-end",""],["text-start",""],["text-wrap",""]],null,null,null,null,null)),o._15(1,16384,null,0,y.a,[h.a,o.p,o.K],{color:[0,"color"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,1,0,n.component.module.handlerData.extraBadgeColor)},function(e,n){e(n,3,0,n.component.module.handlerData.extraBadge)})}function View_CoreCourseModuleComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-badge",[["item-end",""],["text-wrap",""]],null,null,null,null,null)),o._15(1,16384,null,0,y.a,[h.a,o.p,o.K],null,null),(e()(),o._40(2,null,["",""])),o._32(131072,m.a,[a.a,o.i])],null,function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.course.hiddenfromstudents")))})}function View_CoreCourseModuleComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-badge",[["item-end",""],["text-wrap",""]],null,null,null,null,null)),o._15(1,16384,null,0,y.a,[h.a,o.p,o.K],null,null),(e()(),o._40(2,null,["",""])),o._32(131072,m.a,[a.a,o.i])],null,function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.course.hiddenoncoursepage")))})}function View_CoreCourseModuleComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"div",[["class","core-module-availabilityinfo"],["item-end",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,3,"ion-badge",[["text-wrap",""]],null,null,null,null,null)),o._15(3,16384,null,0,y.a,[h.a,o.p,o.K],null,null),(e()(),o._40(4,null,["",""])),o._32(131072,m.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(7,16777216,null,null,1,"core-format-text",[["contextLevel","module"],["text-wrap",""]],null,null,null,null,null)),o._15(8,540672,null,0,P.a,[o.p,A.a,s.a,b.a,a.a,I.a,S.a,E.a,M.a,w.a,k.a,T.a,[2,O.a],[2,D.a],[2,x.a],F.a,L.a,U.a,l.a,R.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,t.module.availabilityinfo,"module",t.module.id,t.courseId)},function(e,n){e(n,4,0,o._41(n,4,0,o._29(n,5).transform("core.restricted")))})}function View_CoreCourseModuleComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-badge",[["color","warning"],["item-end",""],["text-wrap",""]],null,null,null,null,null)),o._15(1,16384,null,0,y.a,[h.a,o.p,o.K],{color:[0,"color"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,m.a,[a.a,o.i])],function(e,n){e(n,1,0,"warning")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.course.manualcompletionnotsynced")))})}function View_CoreCourseModuleComponent_11(e){return o._42(0,[(e()(),o._16(0,16777216,null,null,1,"core-format-text",[["class","core-module-description"],["contextLevel","module"],["maxHeight","80"]],null,null,null,null,null)),o._15(1,540672,null,0,P.a,[o.p,A.a,s.a,b.a,a.a,I.a,S.a,E.a,M.a,w.a,k.a,T.a,[2,O.a],[2,D.a],[2,x.a],F.a,L.a,U.a,l.a,R.a,o.W],{text:[0,"text"],maxHeight:[1,"maxHeight"],contextLevel:[2,"contextLevel"],contextInstanceId:[3,"contextInstanceId"],courseId:[4,"courseId"]},null),(e()(),o._11(0,null,null,0))],function(e,n){var t=n.component;e(n,1,0,t.module.description,"80","module",t.module.id,t.courseId)},null)}function View_CoreCourseModuleComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,42,"ion-item",[["class","item item-block"],["detail-none",""],["text-wrap",""]],[[8,"id",0],[8,"title",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.moduleClicked(t)&&o}return o},H.b,H.a)),o._15(1,278528,null,0,r.i,[o.v,o.w,o.p,o.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o._33(2,{"item-media":0,"core-not-clickable":1,"item-dimmed":2}),o._15(3,1097728,null,3,N.a,[B.a,h.a,o.p,o.K,[2,V.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(7,16384,null,0,W.a,[],null,null),(e()(),o._40(-1,2,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_CoreCourseModuleComponent_2)),o._15(10,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(12,0,null,2,8,"div",[["class","core-module-title"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(14,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(15,540672,null,0,P.a,[o.p,A.a,s.a,b.a,a.a,I.a,S.a,E.a,M.a,w.a,k.a,T.a,[2,O.a],[2,D.a],[2,x.a],F.a,L.a,U.a,l.a,R.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleComponent_3)),o._15(19,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(22,0,null,2,16,"div",[["class","core-module-more-info"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleComponent_6)),o._15(25,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleComponent_7)),o._15(28,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleComponent_8)),o._15(31,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleComponent_9)),o._15(34,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleComponent_10)),o._15(37,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,2,1,null,View_CoreCourseModuleComponent_11)),o._15(41,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,o._19(1,"core-course-module-handler ",t.module.handlerData.class,""),e(n,2,0,t.module.handlerData.icon,!t.module.handlerData.action||!1===t.module.uservisible,0===t.module.visible||!1===t.module.uservisible));e(n,10,0,t.module.handlerData.icon);e(n,15,0,t.module.handlerData.title,"module",t.module.id,t.courseId);e(n,19,0,!1!==t.module.uservisible);e(n,25,0,t.module.handlerData.extraBadge);e(n,28,0,0===t.module.visible&&(!t.section||t.section.visible));e(n,31,0,0!==t.module.visible&&t.module.isStealth);e(n,34,0,t.module.availabilityinfo);e(n,37,0,t.module.completiondata&&t.module.completiondata.offline);e(n,41,0,t.module.description)},function(e,n){var t=n.component;e(n,0,0,o._19(1,"core-course-module-",t.module.id,""),t.module.handlerData.a11yTitle)})}function View_CoreCourseModuleComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-item",[["class","item item-block"],["detail-none",""],["role","status"],["text-wrap",""]],[[8,"id",0],[8,"title",0]],null,null,H.b,H.a)),o._15(1,278528,null,0,r.i,[o.v,o.w,o.p,o.L],{ngClass:[0,"ngClass"]},null),o._31(2,3),o._15(3,1097728,null,3,N.a,[B.a,h.a,o.p,o.K,[2,V.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(7,16384,null,0,W.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(9,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,K.b,K.a)),o._15(10,114688,null,0,q.a,[h.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,1,0,e(n,2,0,"core-course-module-handler","core-module-loading",n.component.module.handlerData.class)),e(n,10,0)},function(e,n){var t=n.component;e(n,0,0,o._19(1,"core-course-module-",t.module.id,""),t.module.handlerData.a11yTitle);e(n,9,0,o._29(n,10)._paused)})}function View_CoreCourseModuleComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleComponent_1)),o._15(1,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreCourseModuleComponent_12)),o._15(5,16384,null,0,r.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.module&&0!==t.module.visibleoncoursepage&&!t.module.handlerData.loading);e(n,5,0,t.module&&0!==t.module.visibleoncoursepage&&t.module.handlerData.loading)},null)}var o=t(1),r=t(8),i=t(588),l=t(31),s=t(5),a=t(19),u=t(14),d=t(46),c=o._14({encapsulation:2,styles:[],data:{}}),p=t(47),f=t(44),h=t(9),m=t(26),_=t(81),g=t(76),v=t(524),C=t(328),y=t(144),P=t(48),A=t(2),b=t(12),I=t(17),S=t(3),E=t(23),M=t(7),w=t(18),k=t(11),T=t(16),O=t(21),D=t(30),x=t(29),F=t(43),L=t(10),U=t(41),R=t(37),H=t(32),N=t(22),B=t(20),V=t(28),W=t(34),K=t(122),q=t(102);t(482),t(51),t(39);t.d(n,"a",function(){return G}),n.b=View_CoreCourseModuleComponent_0;var G=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(1),r=t(10),i=t(42),l=function(){function CoreSendMessageFormComponent(e,n,t,l,s,a,u){var d=this;this.utils=e,this.textUtils=n,this.eventsProvider=l,this.sitesProvider=s,this.appProvider=a,this.domUtils=u,this.placeholder="",this.showKeyboard=!1,this.sendDisabled=!1,this.onSubmit=new o.r,this.onResize=new o.r,t.get(i.a.SETTINGS_SEND_ON_ENTER,!this.appProvider.isMobile()).then(function(e){d.sendOnEnter=!!e}),l.on(r.a.SEND_ON_ENTER_CHANGED,function(e){d.sendOnEnter=e},s.getCurrentSiteId())}return CoreSendMessageFormComponent.prototype.ngOnInit=function(){this.showKeyboard=this.utils.isTrueOrOne(this.showKeyboard)},CoreSendMessageFormComponent.prototype.submitForm=function(e){e.preventDefault(),e.stopPropagation();var n=this.message.trim();n&&(this.message="",this.domUtils.triggerFormSubmittedEvent(this.formElement,!1,this.sitesProvider.getCurrentSiteId()),n=this.textUtils.replaceNewLines(n,"<br>"),this.onSubmit.emit(n))},CoreSendMessageFormComponent.prototype.textareaResized=function(){this.onResize.emit()},CoreSendMessageFormComponent.prototype.enterClicked=function(e,n){this.sendDisabled||(this.sendOnEnter&&!n?this.submitForm(e):this.sendOnEnter||this.appProvider.isMobile()||(this.appProvider.isMac()&&"meta"==n||!this.appProvider.isMac()&&"control"==n)&&this.submitForm(e))},CoreSendMessageFormComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=(t(4),t(129),t(74),t(118),t(139),function(){function CoreQuestionComponent(e,n,t,r,i,l,s,a,u,d){this.injector=n,this.questionDelegate=t,this.utils=r,this.behaviourDelegate=i,this.questionHelper=l,this.translate=s,this.questionProvider=a,this.domUtils=u,this.cdr=d,this.data={},this.behaviourComponents=[],this.loaded=!1,e=e.getInstance("CoreQuestionComponent"),this.buttonClicked=new o.r,this.onAbort=new o.r}return CoreQuestionComponent.prototype.ngOnInit=function(){var e=this;this.offlineEnabled=this.utils.isTrueOrOne(this.offlineEnabled),this.question&&("random"==this.question.type||this.questionDelegate.isQuestionSupported(this.question.type))?this.questionDelegate.getComponentForQuestion(this.injector,this.question).then(function(n){if(e.componentClass=n,n){e.data={question:e.question,component:e.component,componentId:e.componentId,attemptId:e.attemptId,offlineEnabled:e.offlineEnabled,contextLevel:e.contextLevel,contextInstanceId:e.contextInstanceId,courseId:e.courseId,buttonClicked:e.buttonClicked,onAbort:e.onAbort},e.questionHelper.extractQuestionScripts(e.question,e.usageId);var t=e.questionDelegate.getBehaviourForQuestion(e.question,e.question.preferredBehaviour);if(!e.behaviourDelegate.isBehaviourSupported(t))return e.logger.warn("Aborting question because the behaviour is not supported.",e.question.name),void e.questionHelper.showComponentError(e.onAbort,e.translate.instant("addon.mod_quiz.errorbehaviournotsupported")+" "+t);if(e.seqCheck=e.questionHelper.getQuestionSequenceCheckFromHtml(e.question.html),!e.seqCheck)return e.logger.warn("Aborting question because couldn't retrieve sequence check.",e.question.name),void e.questionHelper.showComponentError(e.onAbort);var o=void 0;e.offlineEnabled?o=e.questionProvider.getQuestionAnswers(e.component,e.attemptId,e.question.slot).then(function(n){e.question.localAnswers=e.questionProvider.convertAnswersArrayToObject(n,!0)}).catch(function(){e.question.localAnswers={}}):(e.question.localAnswers={},o=Promise.resolve()),o.then(function(){e.behaviourDelegate.handleQuestion(e.injector,e.question.preferredBehaviour,e.question).then(function(n){e.behaviourComponents=n}).finally(function(){e.question.html=e.domUtils.removeElementFromHtml(e.question.html,".im-controls"),e.loaded=!0}),e.questionHelper.extractQbehaviourRedoButton(e.question),e.question.validationError=e.questionHelper.getValidationErrorFromHtml(e.question.html),e.questionHelper.loadLocalAnswersInHtml(e.question),e.questionHelper.extractQuestionFeedback(e.question),e.questionHelper.extractQuestionComment(e.question)})}else e.loaded=!0}).catch(function(){}):this.loaded=!0},CoreQuestionComponent.prototype.updateSequenceCheck=function(e){e[this.question.slot]&&(this.seqCheck=e[this.question.slot],this.cdr.detectChanges())},CoreQuestionComponent}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(24),r=(t(4),t(176)),i=(t(204),t(190),t(193),function(){function AddonModWorkshopAssessmentStrategyComponent(e,n,t,i,l,s,a,u,d,c,p,f,h,m){this.translate=e,this.injector=n,this.eventsProvider=t,this.fileSessionProvider=i,this.syncProvider=l,this.domUtils=s,this.textUtils=a,this.utils=u,this.sitesProvider=d,this.uploaderProvider=c,this.workshopProvider=p,this.workshopHelper=f,this.workshopOffline=h,this.strategyDelegate=m,this.data={workshopId:0,assessment:null,edit:!1,selectedValues:[],fieldErrors:{},strategy:"",moduleId:0,courseId:null},this.assessmentStrategyLoaded=!1,this.notSupported=!1,this.feedbackText="",this.feedbackControl=new o.e,this.overallFeedkback=!1,this.overallFeedkbackRequired=!1,this.component=r.a.COMPONENT,this.originalData={text:"",files:[],weight:1,selectedValues:[]}}return AddonModWorkshopAssessmentStrategyComponent.prototype.ngOnInit=function(){var e=this;if(this.assessmentId&&this.strategy)if(this.data.workshopId=this.workshop.id,this.data.edit=this.edit,this.data.strategy=this.strategy,this.data.moduleId=this.workshop.coursemodule,this.data.courseId=this.workshop.course,this.componentClass=this.strategyDelegate.getComponentForPlugin(this.injector,this.strategy),this.componentClass){if(this.overallFeedkback=!!this.workshop.overallfeedbackmode,this.overallFeedkbackRequired=2==this.workshop.overallfeedbackmode,this.componentId=this.workshop.coursemodule,this.edit&&this.access.canallocate){this.weights=[];for(var n=16;n>=0;n--)this.weights[n]=n}this.edit&&this.syncProvider.blockOperation(r.a.COMPONENT,this.workshop.id),this.load().then(function(){e.obsInvalidated=e.eventsProvider.on(r.a.ASSESSMENT_INVALIDATED,e.load.bind(e),e.sitesProvider.getCurrentSiteId())}).finally(function(){e.assessmentStrategyLoaded=!0})}else this.notSupported=!this.strategyDelegate.isPluginSupported(this.strategy),this.assessmentStrategyLoaded=!0;else this.assessmentStrategyLoaded=!0},AddonModWorkshopAssessmentStrategyComponent.prototype.load=function(){var e=this;return this.workshopHelper.getReviewerAssessmentById(this.workshop.id,this.assessmentId,this.userId).then(function(n){e.data.assessment=n;return(e.edit?e.workshopOffline.getAssessment(e.workshop.id,e.assessmentId).then(function(t){var o=t.inputdata;if(e.hasOffline=!0,n.feedbackauthor=o.feedbackauthor,e.access.canallocate&&(n.weight=o.weight),n.form.current=e.workshopProvider.parseFields(e.utils.objectToArrayOfObjects(o,"name","value")),o)return e.workshopHelper.getAssessmentFilesFromOfflineFilesObject(o.feedbackauthorattachmentsid,e.workshop.id,e.assessmentId).then(function(e){n.feedbackattachmentfiles=e})}).catch(function(){e.hasOffline=!1}).finally(function(){e.feedbackText=n.feedbackauthor,e.feedbackControl.setValue(e.feedbackText),e.originalData.text=e.data.assessment.feedbackauthor,e.access.canallocate&&(e.originalData.weight=n.weight),e.originalData.files=[],n.feedbackattachmentfiles.forEach(function(n){var t;t=n.filename?n.filename:"/"==n.filepath[0]?n.filepath.substr(1):n.filepath,e.originalData.files.push({filename:t,fileurl:n.fileurl})})}):Promise.resolve()).then(function(){return e.strategyDelegate.getOriginalValues(e.strategy,n.form,e.workshop.id).then(function(n){e.data.selectedValues=n}).finally(function(){e.originalData.selectedValues=e.utils.clone(e.data.selectedValues),e.edit&&(e.fileSessionProvider.setFiles(r.a.COMPONENT,e.workshop.id+"_"+e.assessmentId,n.feedbackattachmentfiles),e.access.canallocate&&(e.weight=n.weight))})})})},AddonModWorkshopAssessmentStrategyComponent.prototype.hasDataChanged=function(){if(!this.assessmentStrategyLoaded)return!1;var e=this.textUtils.restorePluginfileUrls(this.feedbackText,this.data.assessment.feedbackcontentfiles||[]);if(this.originalData.text!=e)return!0;if(this.access.canallocate&&this.originalData.weight!=this.weight)return!0;var n=this.fileSessionProvider.getFiles(r.a.COMPONENT,this.workshop.id+"_"+this.assessmentId)||[];return!!this.uploaderProvider.areFileListDifferent(n,this.originalData.files)||this.strategyDelegate.hasDataChanged(this.workshop,this.originalData.selectedValues,this.data.selectedValues)},AddonModWorkshopAssessmentStrategyComponent.prototype.saveAssessment=function(){var e=this,n=this.fileSessionProvider.getFiles(r.a.COMPONENT,this.workshop.id+"_"+this.assessmentId)||[],t=!1,o=!n.length,i=this.domUtils.showModalLoading("core.sending",!0);return this.data.fieldErrors={},this.workshopHelper.uploadOrStoreAssessmentFiles(this.workshop.id,this.assessmentId,n,t).catch(function(){return t=!0,o=!0,e.workshopHelper.uploadOrStoreAssessmentFiles(e.workshop.id,e.assessmentId,n,t)}).then(function(t){var o=e.textUtils.restorePluginfileUrls(e.feedbackText,e.data.assessment.feedbackcontentfiles||[]);return e.workshopHelper.prepareAssessmentData(e.workshop,e.data.selectedValues,o,n,e.data.assessment.form,t).catch(function(n){return e.data.fieldErrors=n,Promise.reject(e.translate.instant("core.errorinvalidform"))})}).then(function(n){return t?e.workshopOffline.saveAssessment(e.workshop.id,e.assessmentId,e.workshop.course,n).then(function(){return!1}):e.workshopProvider.updateAssessment(e.workshop.id,e.assessmentId,e.workshop.course,n,!1,o)}).then(function(t){e.domUtils.triggerFormSubmittedEvent(e.formElement,!!t,e.sitesProvider.getCurrentSiteId());var o=[];return t&&(o.push(e.workshopHelper.deleteAssessmentStoredFiles(e.workshop.id,e.assessmentId)),o.push(e.workshopProvider.invalidateAssessmentFormData(e.workshop.id,e.assessmentId)),o.push(e.workshopProvider.invalidateAssessmentData(e.workshop.id,e.assessmentId))),Promise.all(o).catch(function(){}).finally(function(){e.eventsProvider.trigger(r.a.ASSESSMENT_SAVED,{workshopId:e.workshop.id,assessmentId:e.assessmentId,userId:e.sitesProvider.getCurrentSiteUserId()},e.sitesProvider.getCurrentSiteId()),n&&e.uploaderProvider.clearTmpFiles(n)})}).catch(function(n){return e.domUtils.showErrorModalDefault(n,"Error saving assessment."),Promise.reject(null)}).finally(function(){i.dismiss()})},AddonModWorkshopAssessmentStrategyComponent.prototype.onFeedbackChange=function(e){this.feedbackText=e},AddonModWorkshopAssessmentStrategyComponent.prototype.ngOnDestroy=function(){this.obsInvalidated&&this.obsInvalidated.off(),this.data.assessment.feedbackattachmentfiles&&this.uploaderProvider.clearTmpFiles(this.data.assessment.feedbackattachmentfiles)},AddonModWorkshopAssessmentStrategyComponent}())},function(e,n,t){"use strict";function View_AddonModDataIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.showSearch(t)&&o}return o},r.b,r.a)),o._15(1,1097728,[[1,4]],0,i.a,[[8,""],l.a,o.p,o.K],null,null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n    "]))],function(e,n){e(n,5,0,"search")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("addon.mod_data.search")));e(n,4,0,o._29(n,5)._hidden)})}function View_AddonModDataIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModDataIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModDataIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModDataIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModDataIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function View_AddonModDataIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoAddEntries(t)&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_data.addentries")),"add",500)},null)}function View_AddonModDataIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0,r=e.component;if("action"===n){o=!1!==r.gotoEntry(r.firstEntry)&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_data.single")),"document",400)},null)}function View_AddonModDataIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,300)},null)}function View_AddonModDataIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",200)},null)}function View_AddonModDataIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n        ","\n    "])),o._33(5,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function View_AddonModDataIndexComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-label",[["id","addon-data-groupslabel"]],null,null,null,null,null)),o._15(1,16384,[[2,4]],0,f.a,[l.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"addon-data-groupslabel")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.groupsseparate")))})}function View_AddonModDataIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-label",[["id","addon-data-groupslabel"]],null,null,null,null,null)),o._15(1,16384,[[2,4]],0,f.a,[l.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"addon-data-groupslabel")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.groupsvisible")))})}function View_AddonModDataIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),o._15(1,16384,[[5,4]],0,h.a,[o.p],{value:[0,"value"]},null),(e()(),o._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.id)},function(e,n){e(n,2,0,n.context.$implicit.name)})}function View_AddonModDataIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,m.b,m.a)),o._15(1,1097728,null,3,_.a,[g.a,l.a,o.p,o.K,[2,v.a]],null,null),o._37(603979776,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,C.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,1,1,null,View_AddonModDataIndexComponent_13)),o._15(8,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,1,1,null,View_AddonModDataIndexComponent_14)),o._15(11,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-data-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,14)._click(t)&&r}if("keyup.space"===n){r=!1!==o._29(e,14)._keyup()&&r}if("ngModelChange"===n){r=!1!==(i.selectedGroup=t)&&r}if("ionChange"===n){r=!1!==i.setGroup(i.selectedGroup)&&r}return r},P.b,P.a)),o._15(14,1228800,null,1,A.a,[b.a,g.a,l.a,o.p,o.K,[2,_.a],I.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),o._37(603979776,5,{options:1}),o._35(1024,null,S.l,function(e){return[e]},[A.a]),o._15(17,671744,null,0,S.q,[[8,null],[8,null],[8,null],[2,S.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,S.m,null,[S.q]),o._15(19,16384,null,0,S.n,[S.m],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModDataIndexComponent_15)),o._15(22,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,8,0,t.groupInfo.separateGroups);e(n,11,0,t.groupInfo.visibleGroups);e(n,14,0,"action-sheet");e(n,17,0,t.selectedGroup);e(n,22,0,t.groupInfo.groups)},function(e,n){e(n,13,0,o._29(n,14)._disabled,o._29(n,19).ngClassUntouched,o._29(n,19).ngClassTouched,o._29(n,19).ngClassPristine,o._29(n,19).ngClassDirty,o._29(n,19).ngClassValid,o._29(n,19).ngClassInvalid,o._29(n,19).ngClassPending)})}function View_AddonModDataIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n        ","\n    "])),o._33(5,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,6).transform("addon.mod_data.notopenyet",e(n,5,0,t.timeAvailableFromReadable))))})}function View_AddonModDataIndexComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n        ","\n    "])),o._33(5,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,6).transform("addon.mod_data.expired",e(n,5,0,t.timeAvailableToReadable))))})}function View_AddonModDataIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n        ","\n    "])),o._33(5,{entrieslefttoview:0}),o._33(6,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,7).transform("addon.mod_data.entrieslefttoaddtoview",e(n,6,0,e(n,5,0,t.access.entrieslefttoview)))))})}function View_AddonModDataIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n        ","\n    "])),o._33(5,{entriesleft:0}),o._33(6,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,7).transform("addon.mod_data.entrieslefttoadd",e(n,6,0,e(n,5,0,t.access.entrieslefttoadd)))))})}function View_AddonModDataIndexComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item",[["class","item item item-block"]],null,null,null,m.b,m.a)),o._15(1,1097728,null,3,_.a,[g.a,l.a,o.p,o.K,[2,v.a]],null,null),o._37(335544320,6,{contentLabel:0}),o._37(603979776,7,{_buttons:1}),o._37(603979776,8,{_icons:1}),o._15(5,16384,null,0,C.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(7,0,null,2,2,"a",[],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.searchReset()&&o}return o},null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n        "]))],null,function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_data.resetsettings")))})}function View_AddonModDataIndexComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"div",[["class","core-success-card"]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.searchReset()&&o}return o},null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,2,"p",[],[[8,"innerHTML",1]],null,null,null,null)),o._33(3,{$a:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n        "]))],null,function(e,n){var t=n.component;e(n,2,0,o._41(n,2,0,o._29(n,4).transform("addon.mod_data.foundrecords",e(n,3,0,t.foundRecordsData))))})}function View_AddonModDataIndexComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModDataIndexComponent_21)),o._15(3,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModDataIndexComponent_22)),o._15(6,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,!t.foundRecordsData);e(n,6,0,t.foundRecordsData)},null)}function View_AddonModDataIndexComponent_23(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"core-style",[],null,null,null,E.b,E.a)),o._15(3,573440,null,0,M.a,[o.p],{css:[0,"css"],prefix:[1,"prefix"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._16(5,0,null,null,1,"core-compile-html",[],null,null,null,w.b,w.a)),o._15(6,966656,null,0,k.a,[T.a,o.i,o.p,[2,O.a],o.w,D.a,x.a],{text:[0,"text"],jsData:[1,"jsData"],extraImports:[2,"extraImports"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.data.csstemplate,o._19(1,".addon-data-entries-",t.data.id,""));e(n,6,0,t.entriesRendered,t.jsData,t.extraImports)},function(e,n){e(n,0,0,o._19(1,"addon-data-contents addon-data-entries-",n.component.data.id," safe-padding-horizontal"))})}function View_AddonModDataIndexComponent_25(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(1,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.searchEntries(r.search.page-1)&&o}return o},r.b,r.a)),o._15(4,1097728,null,0,i.a,[[8,""],l.a,o.p,o.K],{outline:[0,"outline"],block:[1,"block"]},null),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._16(6,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(7,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(8,0,["\n                    ","\n                "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n            "]))],function(e,n){e(n,4,0,"","");e(n,7,0,"arrow-back","ios-arrow-back")},function(e,n){e(n,6,0,o._29(n,7)._hidden);e(n,8,0,o._41(n,8,0,o._29(n,9).transform("core.previous")))})}function View_AddonModDataIndexComponent_26(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(1,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.searchEntries(r.search.page+1)&&o}return o},r.b,r.a)),o._15(4,1097728,null,0,i.a,[[8,""],l.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(5,0,["\n                    ","\n                    "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(8,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._40(-1,null,["\n            "]))],function(e,n){e(n,4,0,"");e(n,8,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,5,0,o._41(n,5,0,o._29(n,6).transform("core.next")));e(n,7,0,o._29(n,8)._hidden)})}function View_AddonModDataIndexComponent_24(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"ion-grid",[["class","grid"]],null,null,null,null,null)),o._15(1,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,8,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),o._15(4,16384,null,0,U.a,[],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModDataIndexComponent_25)),o._15(7,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModDataIndexComponent_26)),o._15(10,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,7,0,t.search.page>0);e(n,10,0,t.hasNextPage)},null)}function View_AddonModDataIndexComponent_27(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-empty-box",[["icon","archive"]],null,null,null,R.b,R.a)),o._15(1,49152,null,0,H.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n    "]))],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_data.norecords")),"archive")},null)}function View_AddonModDataIndexComponent_28(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"core-empty-box",[["class","core-empty-box-clickable"],["icon","archive"]],null,null,null,R.b,R.a)),o._15(1,49152,null,0,H.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(4,0,null,0,2,"a",[],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.searchReset()&&o}return o},null,null)),(e()(),o._40(5,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n    "]))],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_data.nomatch")),"archive")},function(e,n){e(n,5,0,o._41(n,5,0,o._29(n,6).transform("addon.mod_data.resetsettings")))})}function View_AddonModDataIndexComponent_29(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,N.b,N.a)),o._15(1,1228800,null,2,B.a,[V.a],null,null),o._37(335544320,9,{_mainButton:0}),o._37(603979776,10,{_fabLists:1}),o._15(4,212992,null,0,W.a,[o.p,K.a],null,null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoAddEntries(t)&&o}return o},q.b,q.a)),o._15(7,49152,[[9,4]],0,G.a,[l.a,o.p,o.K],null,null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(11,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"]))],function(e,n){e(n,4,0);e(n,11,0,"add")},function(e,n){e(n,6,0,o._41(n,6,0,o._29(n,8).transform("addon.mod_data.addentries")));e(n,10,0,o._29(n,11)._hidden)})}function View_AddonModDataIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,37,"core-navbar-buttons",[["end",""]],null,null,null,j.b,j.a)),o._15(2,245760,null,1,Q.a,[o.p,z.a,D.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_1)),o._15(6,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(8,0,null,0,29,"core-context-menu",[],null,null,null,$.b,$.a)),o._15(9,245760,null,0,p.a,[a.a,Y.a,o.p,D.a,[2,X.a],x.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_2)),o._15(12,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_3)),o._15(15,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_4)),o._15(18,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_5)),o._15(21,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_6)),o._15(24,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_7)),o._15(27,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_8)),o._15(30,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_9)),o._15(33,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_10)),o._15(36,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(41,0,null,null,40,"core-loading",[["class","core-loading-center"]],null,null,null,J.b,J.a)),o._15(42,638976,null,0,Z.a,[a.a,o.p,ee.a,x.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(44,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,ne.b,ne.a)),o._15(45,49152,null,0,te.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_11)),o._15(49,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_12)),o._15(52,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_16)),o._15(55,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_17)),o._15(58,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_18)),o._15(61,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_19)),o._15(64,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_20)),o._15(68,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_23)),o._15(71,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_24)),o._15(74,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_27)),o._15(77,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModDataIndexComponent_28)),o._15(80,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._11(16777216,null,null,1,null,View_AddonModDataIndexComponent_29)),o._15(84,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0);e(n,6,0,t.canSearch),e(n,9,0);e(n,12,0,t.externalUrl);e(n,15,0,t.description);e(n,18,0,t.blog);e(n,21,0,t.loaded&&!(t.hasOffline||t.hasOfflineRatings)&&t.isOnline);e(n,24,0,t.loaded&&(t.hasOffline||t.hasOfflineRatings)&&t.isOnline);e(n,27,0,t.canAdd);e(n,30,0,t.firstEntry);e(n,33,0,t.prefetchStatusIcon);e(n,36,0,t.size);e(n,42,0,t.loaded);e(n,45,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,49,0,t.hasOffline||t.hasOfflineRatings);e(n,52,0,t.groupInfo&&(t.groupInfo.separateGroups||t.groupInfo.visibleGroups));e(n,55,0,!t.access.timeavailable&&t.timeAvailableFrom);e(n,58,0,!t.access.timeavailable&&t.timeAvailableTo);e(n,61,0,t.access.entrieslefttoview);e(n,64,0,t.access.entrieslefttoadd);e(n,68,0,t.search.searching&&!t.isEmpty);e(n,71,0,!t.isEmpty);e(n,74,0,t.search.page>0||t.hasNextPage);e(n,77,0,t.isEmpty&&!t.search.searching);e(n,80,0,t.isEmpty&&t.search.searching);e(n,84,0,t.canAdd)},null)}t.d(n,"b",function(){return de}),n.c=View_AddonModDataIndexComponent_0,t.d(n,"a",function(){return ce});var o=t(1),r=t(47),i=t(44),l=t(9),s=t(26),a=t(19),u=t(49),d=t(93),c=t(84),p=t(79),f=t(68),h=t(109),m=t(32),_=t(22),g=t(20),v=t(28),C=t(34),y=t(8),P=t(124),A=t(110),b=t(36),I=t(60),S=t(24),E=t(1592),M=t(492),w=t(219),k=t(194),T=t(156),O=t(21),D=t(5),x=t(3),F=t(120),L=t(165),U=t(121),R=t(125),H=t(115),N=t(281),B=t(218),V=t(17),W=t(255),K=t(30),q=t(282),G=t(191),j=t(97),Q=t(88),z=t(7),$=t(92),Y=t(71),X=t(77),J=t(55),Z=t(52),ee=t(10),ne=t(123),te=t(113),oe=t(500),re=t(98),ie=t(217),le=t(399),se=t(25),ae=t(72),ue=t(163),de=o._14({encapsulation:2,styles:[],data:{}}),ce=o._12("addon-mod-data-index",oe.a,function View_AddonModDataIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-data-index",[],null,null,null,View_AddonModDataIndexComponent_0,de)),o._15(1,245760,null,0,oe.a,[o.u,[2,K.a],re.a,ie.a,le.a,se.a,ae.a,ue.a,x.a,O.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_CoreCoursesCourseOptionsMenuComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["item-start",""],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,[[3,4]],0,r.a,[i.a,o.p,o.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,n.component.prefetch.prefetchCourseIcon)},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_CoreCoursesCourseOptionsMenuComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-spinner",[["item-start",""]],[[2,"spinner-paused",null]],null,null,l.b,l.a)),o._15(1,114688,null,0,s.a,[i.a,o.p,o.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,o._29(n,1)._paused)})}function View_CoreCoursesCourseOptionsMenuComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.action("download")&&o}return o},a.b,a.a)),o._15(1,1097728,null,3,u.a,[d.a,i.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,p.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_CoreCoursesCourseOptionsMenuComponent_2)),o._15(8,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_CoreCoursesCourseOptionsMenuComponent_3)),o._15(11,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(14,null,["",""])),o._32(131072,h.a,[m.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,8,0,"spinner"!=t.prefetch.prefetchCourseIcon);e(n,11,0,"spinner"==t.prefetch.prefetchCourseIcon)},function(e,n){var t=n.component;e(n,14,0,o._41(n,14,0,o._29(n,15).transform(t.prefetch.title)))})}function View_CoreCoursesCourseOptionsMenuComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.action("hide")&&o}return o},a.b,a.a)),o._15(1,1097728,null,3,u.a,[d.a,i.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(5,16384,null,0,p.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-eye"]],null,null,null,_.b,_.a)),o._15(8,704512,null,0,g.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,h.a,[m.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-eye")},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("core.courses.hidecourse")))})}function View_CoreCoursesCourseOptionsMenuComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.action("show")&&o}return o},a.b,a.a)),o._15(1,1097728,null,3,u.a,[d.a,i.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,7,{contentLabel:0}),o._37(603979776,8,{_buttons:1}),o._37(603979776,9,{_icons:1}),o._15(5,16384,null,0,p.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-eye-slash"]],null,null,null,_.b,_.a)),o._15(8,704512,null,0,g.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,h.a,[m.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-eye-slash")},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("core.courses.show")))})}function View_CoreCoursesCourseOptionsMenuComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.action("favourite")&&o}return o},a.b,a.a)),o._15(1,1097728,null,3,u.a,[d.a,i.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,10,{contentLabel:0}),o._37(603979776,11,{_buttons:1}),o._37(603979776,12,{_icons:1}),o._15(5,16384,null,0,p.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-star"]],null,null,null,_.b,_.a)),o._15(8,704512,null,0,g.a,[o.p,i.a],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,h.a,[m.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-star")},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("core.courses.addtofavourites")))})}function View_CoreCoursesCourseOptionsMenuComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.action("unfavourite")&&o}return o},a.b,a.a)),o._15(1,1097728,null,3,u.a,[d.a,i.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,13,{contentLabel:0}),o._37(603979776,14,{_buttons:1}),o._37(603979776,15,{_icons:1}),o._15(5,16384,null,0,p.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-star"]],null,null,null,_.b,_.a)),o._15(8,704512,null,0,g.a,[o.p,i.a],{name:[0,"name"],slash:[1,"slash"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,h.a,[m.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-star",!0)},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("core.courses.removefromfavourites")))})}function View_CoreCoursesCourseOptionsMenuComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseOptionsMenuComponent_1)),o._15(1,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseOptionsMenuComponent_4)),o._15(4,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseOptionsMenuComponent_5)),o._15(7,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseOptionsMenuComponent_6)),o._15(10,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreCoursesCourseOptionsMenuComponent_7)),o._15(13,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n"]))],function(e,n){var t=n.component;e(n,1,0,t.downloadCourseEnabled);e(n,4,0,!t.course.hidden);e(n,7,0,t.course.hidden);e(n,10,0,!t.course.isfavourite);e(n,13,0,t.course.isfavourite)},null)}t.d(n,"a",function(){return b});var o=t(1),r=t(49),i=t(9),l=t(122),s=t(102),a=t(32),u=t(22),d=t(20),c=t(28),p=t(34),f=t(8),h=t(26),m=t(19),_=t(81),g=t(76),v=t(625),C=t(70),y=t(40),P=t(53),A=o._14({encapsulation:2,styles:[],data:{}}),b=o._12("core-courses-course-options-menu",v.a,function View_CoreCoursesCourseOptionsMenuComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-courses-course-options-menu",[],null,null,null,View_CoreCoursesCourseOptionsMenuComponent_0,A)),o._15(1,114688,null,0,v.a,[C.a,y.a,P.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=function(){function CoreTimerComponent(e){this.timeUtils=e,this.finished=new o.r}return CoreTimerComponent.prototype.ngOnInit=function(){var e=this,n=this.timeLeftClass||"core-timer-timeleft-",t=Math.round(Number(this.endTime)),o=this.containerRef&&this.containerRef.nativeElement;t&&(this.timeInterval=setInterval(function(){if(e.timeLeft=t-e.timeUtils.timestamp(),e.timeLeft<0)return clearInterval(e.timeInterval),void e.finished.emit();e.timeLeft<100&&!o.classList.contains(n+e.timeLeft)&&(o.classList.remove(n+(e.timeLeft+1)),o.classList.remove(n+(e.timeLeft+2)),o.classList.add(n+e.timeLeft))},200))},CoreTimerComponent.prototype.ngOnDestroy=function(){clearInterval(this.timeInterval)},CoreTimerComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0),t(6);var o=t(571),r=function(){function CoreRecaptchaComponent(e,n,t,o){var r=this;this.sitesProvider=e,this.textUtils=t,this.modalCtrl=o,this.modelValueName="recaptcharesponse",this.expired=!1,n.getCurrentLanguage().then(function(e){r.lang=e})}return CoreRecaptchaComponent.prototype.ngOnInit=function(){this.siteUrl=this.siteUrl||this.sitesProvider.getCurrentSite().getURL()},CoreRecaptchaComponent.prototype.answerRecaptcha=function(){var e=this,n=this.textUtils.concatenatePaths(this.siteUrl,"webservice/recaptcha.php?lang="+this.lang),t=this.modalCtrl.create(o.a,{src:n},{cssClass:"core-modal-fullscreen"});t.onDidDismiss(function(n){e.expired=n.expired,e.model[e.modelValueName]=n.value}),t.present()},CoreRecaptchaComponent}()},function(e,n,t){"use strict";function View_AddonModChatIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModChatIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModChatIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModChatIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModChatIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModChatIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),o._15(1,16384,null,0,u.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,c.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(5,null,[" ","\n    "])),o._33(6,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,4,0,"time")},function(e,n){var t=n.component;e(n,3,0,o._29(n,4)._hidden);e(n,5,0,o._41(n,5,0,o._29(n,7).transform("addon.mod_chat.sessionstart",e(n,6,0,t.chatInfo))))})}function View_AddonModChatIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"a",[["block",""],["color","light"],["ion-button",""],["margin-top",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.viewSessions()&&o}return o},p.b,p.a)),o._15(1,1097728,null,0,f.a,[[8,""],d.a,o.p,o.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),o._40(2,0,["",""])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("addon.mod_chat.viewreport")))})}function View_AddonModChatIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"div",[["padding",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,3,"a",[["block",""],["color","primary"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.enterChat()&&o}return o},p.b,p.a)),o._15(3,1097728,null,0,f.a,[[8,""],d.a,o.p,o.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),o._40(4,0,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChatIndexComponent_8)),o._15(8,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,"primary","");e(n,8,0,t.sessionsAvailable)},function(e,n){e(n,4,0,o._41(n,4,0,o._29(n,5).transform("addon.mod_chat.enterchat")))})}function View_AddonModChatIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,22,"core-navbar-buttons",[["end",""]],null,null,null,m.b,m.a)),o._15(2,245760,null,1,_.a,[o.p,g.a,v.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,17,"core-context-menu",[],null,null,null,C.b,C.a)),o._15(6,245760,null,0,l.a,[a.a,y.a,o.p,v.a,[2,P.a],A.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChatIndexComponent_1)),o._15(9,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChatIndexComponent_2)),o._15(12,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChatIndexComponent_3)),o._15(15,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChatIndexComponent_4)),o._15(18,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChatIndexComponent_5)),o._15(21,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(26,0,null,null,11,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,b.b,b.a)),o._15(27,638976,null,0,I.a,[a.a,o.p,S.a,A.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(29,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,E.b,E.a)),o._15(30,49152,null,0,M.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChatIndexComponent_6)),o._15(33,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChatIndexComponent_7)),o._15(36,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.blog);e(n,18,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,21,0,t.prefetchStatusIcon);e(n,27,0,t.loaded);e(n,30,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,33,0,t.chatInfo);e(n,36,0,t.chat)},null)}t.d(n,"b",function(){return D}),n.c=View_AddonModChatIndexComponent_0,t.d(n,"a",function(){return x});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(90),d=t(9),c=t(49),p=t(47),f=t(44),h=t(8),m=t(97),_=t(88),g=t(7),v=t(5),C=t(92),y=t(71),P=t(77),A=t(3),b=t(55),I=t(52),S=t(10),E=t(123),M=t(113),w=t(498),k=t(279),T=t(25),O=t(21),D=o._14({encapsulation:2,styles:[],data:{}}),x=o._12("addon-mod-chat-index",w.a,function View_AddonModChatIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-chat-index",[],null,null,null,View_AddonModChatIndexComponent_0,D)),o._15(1,245760,null,0,w.a,[o.u,k.a,T.a,O.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(192);var o=function(){function CoreUserProfileFieldComponent(e,n,t){this.ufDelegate=e,this.utilsProvider=n,this.injector=t,this.signup=!1,this.edit=!1,this.data={}}return CoreUserProfileFieldComponent.prototype.ngOnInit=function(){var e=this;this.ufDelegate.getComponent(this.injector,this.field,this.signup).then(function(n){e.componentClass=n}),this.data.field=this.field,this.data.edit=this.utilsProvider.isTrueOrOne(this.edit),this.edit&&(this.data.signup=this.utilsProvider.isTrueOrOne(this.signup),this.data.disabled=this.utilsProvider.isTrueOrOne(this.field.locked),this.data.form=this.form,this.data.registerAuth=this.registerAuth,this.data.contextLevel=this.contextLevel,this.data.contextInstanceId=this.contextInstanceId,this.data.courseId=this.courseId)},CoreUserProfileFieldComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1545),t(1560),t(1561),t(1562),t(1563),t(1564);var o=function(){return function CoreSiteHomeComponentsModule(){}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function CoreSiteHomeAllCourseListComponent(e){this.show=e.isGetCoursesByFieldAvailable()}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function CoreSiteHomeCategoriesComponent(e){this.show=e.isGetCoursesByFieldAvailable()}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){return function CoreSiteHomeCourseSearchComponent(e){this.show=!e.isSearchCoursesDisabledInSite()}}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreSiteHomeEnrolledCourseListComponent(e){this.coursesProvider=e}return CoreSiteHomeEnrolledCourseListComponent.prototype.ngOnInit=function(){var e=this;this.coursesProvider.isMyCoursesDisabledInSite()?this.show=!1:this.coursesProvider.getUserCourses().then(function(n){e.show=n.length>0})},CoreSiteHomeEnrolledCourseListComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(232);var o=function(){function CoreSiteHomeNewsComponent(e,n,t,o){this.sitesProvider=e,this.courseProvider=n,this.moduleDelegate=t,this.siteHomeProvider=o,this.siteHomeId=e.getCurrentSite().getSiteHomeId()}return CoreSiteHomeNewsComponent.prototype.ngOnInit=function(){var e=this,n=this.sitesProvider.getCurrentSite();if(n.getStoredConfig("newsitems")||0){var t=n.getSiteHomeId();this.siteHomeProvider.getNewsForum(t).then(function(n){return e.courseProvider.getModuleBasicInfo(n.cmid).then(function(n){e.show=!0,e.module=n,n.handlerData=e.moduleDelegate.getModuleDataFor(n.modname,n,t,n.section,!0)})}).catch(function(){})}},CoreSiteHomeNewsComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(4),t(1551);var o=function(){return function CoreQuestionComponentsModule(){}}()},function(e,n,t){"use strict";function View_AddonModForumIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModForumIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModForumIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModForumIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_forum.refreshdiscussions")),t.refreshIcon,!1,700)},null)}function View_AddonModForumIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function View_AddonModForumIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModForumIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",400)},null)}function View_AddonModForumIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[["iconAction","fa-sort"]],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.showSortOrderSelector(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.sort")),"fa-sort",300)},null)}function View_AddonModForumIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,u.b,u.a)),o._15(1,49152,null,0,d.a,[],{description:[0,"description"],note:[1,"note"],component:[2,"component"],componentId:[3,"componentId"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.descriptionNote,t.component,t.componentId,"module",t.module.id,t.courseId)},null)}function View_AddonModForumIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),o._15(1,16384,null,0,c.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,f.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(5,null,[" ","\n            "])),o._33(6,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,4,0,"warning")},function(e,n){var t=n.component;e(n,3,0,o._29(n,4)._hidden);e(n,5,0,o._41(n,5,0,o._29(n,7).transform("core.hasdatatosync",e(n,6,0,t.moduleName))))})}function View_AddonModForumIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),o._15(1,16384,null,0,c.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,f.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(5,null,[" ","\n            "]))],function(e,n){e(n,4,0,"information-circle")},function(e,n){var t=n.component;e(n,3,0,o._29(n,4)._hidden);e(n,5,0,t.availabilityMessage)})}function View_AddonModForumIndexComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-empty-box",[["icon","chatbubbles"]],null,null,null,h.b,h.a)),o._15(1,49152,null,0,m.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                "]))],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_forum.forumnodiscussionsyet")),"chatbubbles")},null)}function View_AddonModForumIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"button",[["aria-controls","addon-mod-forum-sort-order-selector"],["aria-haspopup","true"],["class","core-button-select button-no-uppercase col"],["color","light"],["icon-end",""],["id","addon-mod-forum-sort-order-button"],["ion-button",""],["ion-col",""],["padding-horizontal",""]],[[1,"aria-label",0],[1,"aria-expanded",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.showSortOrderSelector(t)&&o}return o},_.b,_.a)),o._15(1,1097728,null,0,g.a,[[8,""],p.a,o.p,o.K],{color:[0,"color"]},null),o._15(2,16384,null,0,v.a,[],null,null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                        "])),(e()(),o._16(5,0,null,0,2,"span",[["class","core-button-select-text"]],null,null,null,null,null)),(e()(),o._40(6,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                        "])),(e()(),o._16(9,0,null,0,1,"ion-icon",[["ios","md-arrow-dropdown"],["name","arrow-dropdown"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(10,147456,null,0,f.a,[p.a,o.p,o.K],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),o._40(-1,0,["\n                    "]))],function(e,n){e(n,1,0,"light");e(n,10,0,"arrow-dropdown","md-arrow-dropdown")},function(e,n){var t=n.component;e(n,0,0,o._41(n,0,0,o._29(n,3).transform("core.sort")),t.sortOrderSelectorExpanded);e(n,6,0,o._41(n,6,0,o._29(n,7).transform(t.selectedSortOrder.label)));e(n,9,0,o._29(n,10)._hidden)})}function View_AddonModForumIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"div",[["class","row"],["ion-row",""],["margin-bottom",""],["padding-horizontal",""],["padding-top",""],["text-wrap",""]],null,null,null,null,null)),o._15(1,16384,null,0,C.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_15)),o._15(4,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "]))],function(e,n){e(n,4,0,n.component.sortingAvailable)},null)}function View_AddonModForumIndexComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,P.b,P.a)),o._15(1,16384,null,0,A.a,[],null,null),o._15(2,770048,null,0,b.a,[I.a,S.a,E.a,M.a,w.a,[2,k.a]],{user:[0,"user"],courseId:[1,"courseId"]},null)],function(e,n){e(n,2,0,n.parent.context.$implicit,n.component.courseId)},null)}function View_AddonModForumIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.userfullname)})}function View_AddonModForumIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._16(1,0,null,null,1,"ion-icon",[["name","people"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(2,147456,[[5,4]],0,f.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(3,null,[" ",""]))],function(e,n){e(n,2,0,"people")},function(e,n){e(n,1,0,o._29(n,2)._hidden);e(n,3,0,n.parent.context.$implicit.groupname)})}function View_AddonModForumIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,39,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(2,0,null,null,36,"a",[["class","addon-mod-forum-discussion item item-block"],["ion-item",""],["text-wrap",""]],[[1,"no-lines",0],[2,"core-split-item-selected",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openNewDiscussion(e.context.$implicit.timecreated)&&o}return o},T.b,T.a)),o._15(3,1097728,null,3,O.a,[D.a,p.a,o.p,o.K,[2,x.a]],null,null),o._37(335544320,3,{contentLabel:0}),o._37(603979776,4,{_buttons:1}),o._37(603979776,5,{_icons:1}),o._15(7,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(9,0,null,2,7,"div",[["class","addon-mod-forum-discussion-title"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(11,0,null,null,4,"h2",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._16(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(14,540672,null,0,L.a,[o.p,S.a,U.a,R.a,a.a,H.a,E.a,N.a,B.a,V.a,M.a,W.a,[2,I.a],[2,K.a],[2,k.a],q.a,w.a,G.a,j.a,Q.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(18,0,null,2,19,"div",[["class","addon-mod-forum-discussion-info"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_17)),o._15(21,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(23,0,null,null,13,"div",[["class","addon-mod-forum-discussion-author"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_18)),o._15(26,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_19)),o._15(29,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._16(31,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),o._16(32,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(33,147456,[[5,4]],0,f.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(34,null,[" ",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,14,0,n.context.$implicit.subject,"module",t.module.id,t.courseId);e(n,21,0,n.context.$implicit.userfullname);e(n,26,0,n.context.$implicit.userfullname);e(n,29,0,n.context.$implicit.groupname);e(n,33,0,"time")},function(e,n){e(n,2,0,n.context.$implicit.groupname,n.context.$implicit.timecreated==0-n.component.selectedDiscussion);e(n,32,0,o._29(n,33)._hidden);e(n,34,0,o._41(n,34,0,o._29(n,35).transform("core.notsent")))})}function View_AddonModForumIndexComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-icon",[["name","fa-map-pin"]],null,null,null,z.b,z.a)),o._15(1,704512,null,0,$.a,[o.p,p.a],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"fa-map-pin")},null)}function View_AddonModForumIndexComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-icon",[["class","addon-forum-star"],["name","fa-star"]],null,null,null,z.b,z.a)),o._15(1,704512,null,0,$.a,[o.p,p.a],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"fa-star")},null)}function View_AddonModForumIndexComponent_23(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.showOptionsMenu(t,e.parent.context.$implicit)&&o}return o},_.b,_.a)),o._15(1,1097728,[[7,4]],0,g.a,[[8,""],p.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                                "])),(e()(),o._16(4,0,null,0,1,"core-icon",[["name","more"]],null,null,null,z.b,z.a)),o._15(5,704512,null,0,$.a,[o.p,p.a],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n                            "]))],function(e,n){e(n,1,0,"dark","");e(n,5,0,"more")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.displayoptions")))})}function View_AddonModForumIndexComponent_24(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,P.b,P.a)),o._15(1,16384,null,0,A.a,[],null,null),o._15(2,770048,null,0,b.a,[I.a,S.a,E.a,M.a,w.a,[2,k.a]],{user:[0,"user"],courseId:[1,"courseId"]},null)],function(e,n){e(n,2,0,n.parent.context.$implicit,n.component.courseId)},null)}function View_AddonModForumIndexComponent_25(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.userfullname)})}function View_AddonModForumIndexComponent_26(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._16(1,0,null,null,1,"ion-icon",[["name","people"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(2,147456,[[8,4]],0,f.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(3,null,[" ",""]))],function(e,n){e(n,2,0,"people")},function(e,n){e(n,1,0,o._29(n,2)._hidden);e(n,3,0,n.parent.context.$implicit.groupname)})}function View_AddonModForumIndexComponent_27(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._34(2,1)],null,function(e,n){e(n,1,0,o._41(n,1,0,e(n,2,0,o._29(n.parent.parent.parent,1),n.parent.context.$implicit.timemodified)))})}function View_AddonModForumIndexComponent_28(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,null,null,null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._34(2,1)],null,function(e,n){e(n,1,0,o._41(n,1,0,e(n,2,0,o._29(n.parent.parent.parent,1),n.parent.context.$implicit.created)))})}function View_AddonModForumIndexComponent_29(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"ion-badge",[["text-center",""]],[[1,"aria-label",0]],null,null,null,null)),o._15(1,16384,null,0,Y.a,[p.a,o.p,o.K],null,null),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(4,null,["",""]))],null,function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,3).transform("addon.mod_forum.unreadpostsnumber",e(n,2,0,n.parent.context.$implicit.numunread))));e(n,4,0,n.parent.context.$implicit.numunread)})}function View_AddonModForumIndexComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,84,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(2,0,null,null,81,"a",[["class","addon-mod-forum-discussion item item-block"],["ion-item",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openDiscussion(e.context.$implicit)&&o}return o},T.b,T.a)),o._15(3,1097728,null,3,O.a,[D.a,p.a,o.p,o.K,[2,x.a]],null,null),o._37(335544320,6,{contentLabel:0}),o._37(603979776,7,{_buttons:1}),o._37(603979776,8,{_icons:1}),o._15(7,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(9,0,null,2,16,"div",[["class","addon-mod-forum-discussion-title"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(11,0,null,null,10,"h2",[["text-wrap",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_21)),o._15(14,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_22)),o._15(17,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._16(19,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(20,540672,null,0,L.a,[o.p,S.a,U.a,R.a,a.a,H.a,E.a,N.a,B.a,V.a,M.a,W.a,[2,I.a],[2,K.a],[2,k.a],q.a,w.a,G.a,j.a,Q.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_23)),o._15(24,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(27,0,null,2,17,"div",[["class","addon-mod-forum-discussion-info"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_24)),o._15(30,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(32,0,null,null,11,"div",[["class","addon-mod-forum-discussion-author"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_25)),o._15(35,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_26)),o._15(38,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._16(40,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(41,null,["",""])),o._34(42,2),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(46,0,null,2,36,"ion-row",[["class","addon-mod-forum-discussion-more-info row"],["text-center",""]],null,null,null,null,null)),o._15(47,16384,null,0,C.a,[],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(49,0,null,null,16,"ion-col",[["class","col"],["text-start",""]],null,null,null,null,null)),o._15(50,16384,null,0,v.a,[],null,null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._16(52,0,null,null,12,"ion-note",[],null,null,null,null,null)),o._15(53,16384,null,0,X.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._16(55,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(56,147456,null,0,f.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(57,null,[" ","\n                                    "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_27)),o._15(60,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_28)),o._15(63,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(67,0,null,null,14,"ion-col",[["class","col"],["text-end",""]],null,null,null,null,null)),o._15(68,16384,null,0,v.a,[],null,null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._16(70,0,null,null,10,"ion-note",[],null,null,null,null,null)),o._15(71,16384,null,0,X.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._16(73,0,null,null,1,"ion-icon",[["name","chatboxes"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(74,147456,null,0,f.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(75,null,[" ","\n                                    "])),o._33(76,{numreplies:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_29)),o._15(79,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,14,0,n.context.$implicit.pinned);e(n,17,0,!n.context.$implicit.pinned&&n.context.$implicit.starred);e(n,20,0,n.context.$implicit.subject,"module",t.module.id,t.courseId);e(n,24,0,t.canPin||n.context.$implicit.canlock||n.context.$implicit.canfavourite);e(n,30,0,n.context.$implicit.userfullname);e(n,35,0,n.context.$implicit.userfullname);e(n,38,0,n.context.$implicit.groupname);e(n,56,0,"time");e(n,60,0,n.context.$implicit.timemodified>n.context.$implicit.created);e(n,63,0,n.context.$implicit.timemodified<=n.context.$implicit.created);e(n,74,0,"chatboxes");e(n,79,0,n.context.$implicit.numunread)},function(e,n){e(n,2,0,n.context.$implicit.discussion==n.component.selectedDiscussion);e(n,41,0,o._41(n,41,0,e(n,42,0,o._29(n.parent.parent,0),1e3*n.context.$implicit.created,"strftimerecentfull")));e(n,55,0,o._29(n,56)._hidden);e(n,57,0,o._41(n,57,0,o._29(n,58).transform("addon.mod_forum.lastpost")));e(n,73,0,o._29(n,74)._hidden);e(n,75,0,o._41(n,75,0,o._29(n,77).transform("addon.mod_forum.numreplies",e(n,76,0,n.context.$implicit.numreplies))))})}function View_AddonModForumIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_13)),o._15(3,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_14)),o._15(6,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_16)),o._15(9,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModForumIndexComponent_20)),o._15(12,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._16(14,0,null,null,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.fetchMoreDiscussions(t)&&o}return o},J.b,J.a)),o._15(15,573440,null,0,Z.a,[[2,K.a],U.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,3,0,0==t.discussions.length&&0==t.offlineDiscussions.length);e(n,6,0,t.discussions.length>0&&t.sortingAvailable&&t.selectedSortOrder);e(n,9,0,t.offlineDiscussions);e(n,12,0,t.discussions);e(n,15,0,t.canLoadMore,t.loadMoreError)},null)}function View_AddonModForumIndexComponent_30(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,ee.b,ee.a)),o._15(1,1228800,null,2,ne.a,[H.a],null,null),o._37(335544320,9,{_mainButton:0}),o._37(603979776,10,{_fabLists:1}),o._15(4,212992,null,0,te.a,[o.p,K.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(6,0,null,0,5,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openNewDiscussion()&&o}return o},oe.b,oe.a)),o._15(7,49152,[[9,4]],0,re.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(9,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(10,147456,null,0,f.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._40(-1,0,["\n        "]))],function(e,n){e(n,4,0);e(n,10,0,"add")},function(e,n){e(n,6,0,n.component.addDiscussionText);e(n,9,0,o._29(n,10)._hidden)})}function View_AddonModForumIndexComponent_0(e){return o._42(0,[o._32(0,ie.a,[B.a,le.a]),o._32(0,se.a,[B.a,a.a]),o._37(402653184,1,{splitviewCtrl:0}),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(4,0,null,null,31,"core-navbar-buttons",[["end",""]],null,null,null,ae.b,ae.a)),o._15(5,245760,null,1,ue.a,[o.p,B.a,U.a],null,null),o._37(603979776,2,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(8,0,null,0,26,"core-context-menu",[],null,null,null,de.b,de.a)),o._15(9,245760,null,0,l.a,[a.a,ce.a,o.p,U.a,[2,pe.a],E.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_1)),o._15(12,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_2)),o._15(15,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_3)),o._15(18,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_4)),o._15(21,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_5)),o._15(24,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_6)),o._15(27,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_7)),o._15(30,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_8)),o._15(33,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(38,0,null,null,35,"core-split-view",[],null,null,null,fe.b,fe.a)),o._15(39,245760,[[1,4]],0,k.a,[[2,I.a],o.p,he.a,H.a,a.a],null,null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(41,0,null,0,31,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,me.b,me.a)),o._15(42,4374528,null,0,K.a,[p.a,H.a,_e.a,o.p,o.K,ge.a,ve.a,o.D,[2,Ce.a],[2,I.a]],null,null),(e()(),o._40(-1,1,["\n        "])),(e()(),o._16(44,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var o=!0;if("ionRefresh"===n){o=!1!==e.component.doRefresh(t)&&o}return o},null,null)),o._15(45,212992,null,0,ye.a,[H.a,K.a,o.D,Pe.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(47,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ae.b,Ae.a)),o._15(48,114688,null,0,be.a,[ye.a,p.a],{pullingText:[0,"pullingText"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,1,["\n        "])),(e()(),o._16(52,0,null,1,16,"core-loading",[["class","core-loading-center"]],null,null,null,Ie.b,Ie.a)),o._15(53,638976,null,0,Se.a,[a.a,o.p,w.a,E.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_9)),o._15(56,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n            "])),(e()(),o._40(-1,0,["\n            "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_10)),o._15(60,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n            "])),(e()(),o._40(-1,0,["\n            "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_11)),o._15(64,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n            "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_12)),o._15(67,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,1,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModForumIndexComponent_30)),o._15(71,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0),e(n,9,0);e(n,12,0,t.externalUrl);e(n,15,0,t.description);e(n,18,0,t.blog);e(n,21,0,t.loaded&&!(t.hasOffline||t.hasOfflineRatings)&&t.isOnline);e(n,24,0,t.loaded&&(t.hasOffline||t.hasOfflineRatings)&&t.isOnline);e(n,27,0,t.prefetchStatusIcon);e(n,30,0,t.size);e(n,33,0,t.sortingAvailable),e(n,39,0);e(n,45,0,t.loaded);e(n,48,0,o._19(1,"",o._41(n,48,0,o._29(n,49).transform("core.pulltorefresh")),""));e(n,53,0,t.loaded);e(n,56,0,t.forum&&"single"!=t.forum.type);e(n,60,0,t.hasOffline||t.hasOfflineRatings);e(n,64,0,t.availabilityMessage);e(n,67,0,t.forum);e(n,71,0,t.forum&&t.canAddDiscussion)},function(e,n){e(n,41,0,o._29(n,42).statusbarPadding,o._29(n,42)._hasRefresher);e(n,44,0,"inactive"!==o._29(n,45).state,o._29(n,45)._top);e(n,47,0,o._29(n,48).r.state)})}t.d(n,"b",function(){return Re}),n.c=View_AddonModForumIndexComponent_0,t.d(n,"a",function(){return He});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(123),d=t(113),c=t(90),p=t(9),f=t(49),h=t(125),m=t(115),_=t(47),g=t(44),v=t(120),C=t(121),y=t(8),P=t(214),A=t(161),b=t(183),I=t(21),S=t(2),E=t(3),M=t(11),w=t(10),k=t(29),T=t(32),O=t(22),D=t(20),x=t(28),F=t(34),L=t(48),U=t(5),R=t(12),H=t(17),N=t(23),B=t(7),V=t(18),W=t(16),K=t(30),q=t(43),G=t(41),j=t(31),Q=t(37),z=t(81),$=t(76),Y=t(144),X=t(248),J=t(373),Z=t(273),ee=t(281),ne=t(218),te=t(255),oe=t(282),re=t(191),ie=t(228),le=t(25),se=t(443),ae=t(97),ue=t(88),de=t(92),ce=t(71),pe=t(77),fe=t(474),he=t(73),me=t(182),_e=t(35),ge=t(36),ve=t(108),Ce=t(40),ye=t(160),Pe=t(45),Ae=t(213),be=t(174),Ie=t(55),Se=t(52),Ee=t(506),Me=t(163),we=t(72),ke=t(46),Te=t(136),Oe=t(280),De=t(233),xe=t(254),Fe=t(51),Le=t(402),Ue=t(203),Re=o._14({encapsulation:2,styles:[],data:{}}),He=o._12("addon-mod-forum-index",Ee.a,function View_AddonModForumIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-forum-index",[],null,null,null,View_AddonModForumIndexComponent_0,Re)),o._15(1,245760,null,0,Ee.a,[o.u,[2,K.a],Me.a,we.a,ke.a,Te.a,Oe.a,De.a,xe.a,Fe.a,Le.a,Ue.a,ce.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModWorkshopIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModWorkshopIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModWorkshopIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModWorkshopIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModWorkshopIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function View_AddonModWorkshopIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModWorkshopIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",400)},null)}function View_AddonModWorkshopIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["item-start",""],["name","radio-button-off"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,[[7,4]],0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"radio-button-off")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_AddonModWorkshopIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["color","danger"],["item-start",""],["name","close-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,[[7,4]],0,u.a,[d.a,o.p,o.K],{color:[0,"color"],name:[1,"name"]},null)],function(e,n){e(n,1,0,"danger","close-circle")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_AddonModWorkshopIndexComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["color","info"],["item-start",""],["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,[[7,4]],0,u.a,[d.a,o.p,o.K],{color:[0,"color"],name:[1,"name"]},null)],function(e,n){e(n,1,0,"info","information-circle")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_AddonModWorkshopIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["color","success"],["item-start",""],["name","checkmark-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,[[7,4]],0,u.a,[d.a,o.p,o.K],{color:[0,"color"],name:[1,"name"]},null)],function(e,n){e(n,1,0,"success","checkmark-circle")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_AddonModWorkshopIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,"p",[],[[8,"innerHTML",1]],null,null,null,null))],null,function(e,n){e(n,0,0,n.parent.context.$implicit.details)})}function View_AddonModWorkshopIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["item-end",""],["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,[[7,4]],0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"open")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_AddonModWorkshopIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,27,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[2,"item-dimmed",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.runTask(e.context.$implicit)&&o}return o},c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,5,{contentLabel:0}),o._37(603979776,6,{_buttons:1}),o._37(603979776,7,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_11)),o._15(8,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_12)),o._15(11,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_13)),o._15(14,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_14)),o._15(17,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n\n                "])),(e()(),o._16(19,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),o._40(20,null,["",""])),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopIndexComponent_15)),o._15(23,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,4,1,null,View_AddonModWorkshopIndexComponent_16)),o._15(26,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,8,0,null==n.context.$implicit.completed);e(n,11,0,""==n.context.$implicit.completed);e(n,14,0,"info"==n.context.$implicit.completed);e(n,17,0,"1"==n.context.$implicit.completed);e(n,23,0,n.context.$implicit.details);e(n,26,0,n.context.$implicit.link&&"submit"!=n.context.$implicit.code)},function(e,n){e(n,0,0,"submit"==n.context.$implicit.code&&!n.component.showSubmit);e(n,20,0,n.context.$implicit.title)})}function View_AddonModWorkshopIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_10)),o._15(3,802816,null,0,_.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.phases[t.workshop.phase].tasks)},null)}function View_AddonModWorkshopIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,"ion-card",[["class","with-borders"]],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,9,"a",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.viewPhaseInfo()&&o}return o},c.b,c.a)),o._15(4,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(8,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(10,0,null,2,1,"h2",[["stacked",""],["text-wrap",""]],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),(e()(),o._40(-1,2,["\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_9)),o._15(15,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,15,0,t.phases&&t.phases[t.workshop.phase]&&t.phases[t.workshop.phase].tasks&&t.phases[t.workshop.phase].tasks.length)},function(e,n){var t=n.component;e(n,11,0,t.phases[t.workshop.phase].title)})}function View_AddonModWorkshopIndexComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n        ","\n    "])),o._33(5,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function View_AddonModWorkshopIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(4,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,8,{contentLabel:0}),o._37(603979776,9,{_buttons:1}),o._37(603979776,10,{_icons:1}),o._15(8,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(14,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(15,540672,null,0,v.a,[o.p,C.a,y.a,P.a,a.a,A.a,b.a,I.a,S.a,E.a,M.a,w.a,[2,k.a],[2,T.a],[2,O.a],D.a,x.a,F.a,L.a,U.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,15,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId)},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("core.description")))})}function View_AddonModWorkshopIndexComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(4,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,11,{contentLabel:0}),o._37(603979776,12,{_buttons:1}),o._37(603979776,13,{_icons:1}),o._15(8,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(14,16777216,null,2,1,"core-format-text",[["contextLevel","module"],["fullOnClick","true"]],null,null,null,null,null)),o._15(15,540672,null,0,v.a,[o.p,C.a,y.a,P.a,a.a,A.a,b.a,I.a,S.a,E.a,M.a,w.a,[2,k.a],[2,T.a],[2,O.a],D.a,x.a,F.a,L.a,U.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],fullOnClick:[3,"fullOnClick"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,15,0,t.workshop.conclusion,t.component,t.module.id,"true","module",t.module.id,t.courseId)},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_workshop.conclusion")))})}function View_AddonModWorkshopIndexComponent_23(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,17,{contentLabel:0}),o._37(603979776,18,{_buttons:1}),o._37(603979776,19,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(10,2,["\n                    ","\n                "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_workshop.submissiongrade")));e(n,10,0,t.userGrades.submissionlongstrgrade)})}function View_AddonModWorkshopIndexComponent_24(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,20,{contentLabel:0}),o._37(603979776,21,{_buttons:1}),o._37(603979776,22,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(10,2,["\n                    ","\n                "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_workshop.gradinggrade")));e(n,10,0,t.userGrades.assessmentlongstrgrade)})}function View_AddonModWorkshopIndexComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,20,"ion-card",[["class","with-borders"]],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(4,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,14,{contentLabel:0}),o._37(603979776,15,{_buttons:1}),o._37(603979776,16,{_icons:1}),o._15(8,16384,null,0,R.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_23)),o._15(16,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_24)),o._15(19,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,16,0,t.userGrades.submissionlongstrgrade);e(n,19,0,t.userGrades.assessmentlongstrgrade)},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_workshop.yourgrades")))})}function View_AddonModWorkshopIndexComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_21)),o._15(3,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_22)),o._15(6,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.workshop.conclusion);e(n,6,0,t.userGrades)},null)}function View_AddonModWorkshopIndexComponent_25(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(4,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,23,{contentLabel:0}),o._37(603979776,24,{_buttons:1}),o._37(603979776,25,{_icons:1}),o._15(8,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(14,16777216,null,2,1,"core-format-text",[["contextLevel","module"],["fullOnClick","true"]],null,null,null,null,null)),o._15(15,540672,null,0,v.a,[o.p,C.a,y.a,P.a,a.a,A.a,b.a,I.a,S.a,E.a,M.a,w.a,[2,k.a],[2,T.a],[2,O.a],D.a,x.a,F.a,L.a,U.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],fullOnClick:[3,"fullOnClick"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,15,0,t.workshop.instructauthors,t.component,t.module.id,"true","module",t.module.id,t.courseId)},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_workshop.areainstructauthors")))})}function View_AddonModWorkshopIndexComponent_27(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,26,{contentLabel:0}),o._37(603979776,27,{_buttons:1}),o._37(603979776,28,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_workshop.yoursubmission")));e(n,12,0,o._41(n,12,0,o._29(n,13).transform("addon.mod_workshop.noyoursubmission")))})}function View_AddonModWorkshopIndexComponent_28(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(2,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(3,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,29,{contentLabel:0}),o._37(603979776,30,{_buttons:1}),o._37(603979776,31,{_icons:1}),o._15(7,16384,null,0,R.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(9,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(10,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(14,0,null,null,1,"addon-mod-workshop-submission",[],null,null,null,H.b,H.a)),o._15(15,114688,null,0,N.a,[B.a,V.a,k.a,W.a,C.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,15,0,t.submission,t.module,t.workshop,t.access,t.workshop.course)},function(e,n){e(n,10,0,o._41(n,10,0,o._29(n,11).transform("addon.mod_workshop.yoursubmission")))})}function View_AddonModWorkshopIndexComponent_26(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_27)),o._15(4,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_28)),o._15(7,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,!t.submission);e(n,7,0,t.submission)},null)}function View_AddonModWorkshopIndexComponent_31(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoSubmit()&&o}return o},K.b,K.a)),o._15(1,1097728,[[33,4]],0,q.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._16(3,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(5,0,["\n                    ","\n                "])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"");e(n,4,0,"add")},function(e,n){e(n,3,0,o._29(n,4)._hidden);e(n,5,0,o._41(n,5,0,o._29(n,6).transform("addon.mod_workshop.createsubmission")))})}function View_AddonModWorkshopIndexComponent_32(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoSubmit()&&o}return o},K.b,K.a)),o._15(1,1097728,[[33,4]],0,q.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._16(3,0,null,0,1,"ion-icon",[["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(5,0,["\n                    ","\n                "])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"");e(n,4,0,"create")},function(e,n){e(n,3,0,o._29(n,4)._hidden);e(n,5,0,o._41(n,5,0,o._29(n,6).transform("addon.mod_workshop.editsubmission")))})}function View_AddonModWorkshopIndexComponent_30(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,32,{contentLabel:0}),o._37(603979776,33,{_buttons:1}),o._37(603979776,34,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopIndexComponent_31)),o._15(8,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopIndexComponent_32)),o._15(11,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,8,0,t.access.creatingsubmissionallowed&&!t.submission);e(n,11,0,t.access.modifyingsubmissionallowed&&t.submission)},null)}function View_AddonModWorkshopIndexComponent_29(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_30)),o._15(3,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,n.component.showSubmit)},null)}function View_AddonModWorkshopIndexComponent_35(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(2,0,null,null,1,"addon-mod-workshop-submission",[["summary","true"]],null,null,null,H.b,H.a)),o._15(3,114688,null,0,N.a,[B.a,V.a,k.a,W.a,C.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"],summary:[5,"summary"]},null),(e()(),o._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,3,0,n.context.$implicit,t.module,t.workshop,t.access,t.workshop.course,"true")},null)}function View_AddonModWorkshopIndexComponent_34(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"ion-card",[["class","with-borders"]],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(4,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,35,{contentLabel:0}),o._37(603979776,36,{_buttons:1}),o._37(603979776,37,{_icons:1}),o._15(8,16384,null,0,R.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_35)),o._15(16,802816,null,0,_.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){e(n,16,0,n.component.publishedSubmissions)},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_workshop.publishedsubmissions")))})}function View_AddonModWorkshopIndexComponent_33(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_34)),o._15(3,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.publishedSubmissions&&t.publishedSubmissions.length)},null)}function View_AddonModWorkshopIndexComponent_37(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(4,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,38,{contentLabel:0}),o._37(603979776,39,{_buttons:1}),o._37(603979776,40,{_icons:1}),o._15(8,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(14,16777216,null,2,1,"core-format-text",[["contextLevel","module"],["fullOnClick","true"]],null,null,null,null,null)),o._15(15,540672,null,0,v.a,[o.p,C.a,y.a,P.a,a.a,A.a,b.a,I.a,S.a,E.a,M.a,w.a,[2,k.a],[2,T.a],[2,O.a],D.a,x.a,F.a,L.a,U.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],fullOnClick:[3,"fullOnClick"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,15,0,t.workshop.instructreviewers,t.component,t.module.id,"true","module",t.module.id,t.courseId)},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_workshop.areainstructreviewers")))})}function View_AddonModWorkshopIndexComponent_39(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,44,{contentLabel:0}),o._37(603979776,45,{_buttons:1}),o._37(603979776,46,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "]))],null,function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_workshop.assignedassessmentsnone")))})}function View_AddonModWorkshopIndexComponent_40(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(2,0,null,null,1,"addon-mod-workshop-submission",[["summary","true"]],null,null,null,H.b,H.a)),o._15(3,114688,null,0,N.a,[B.a,V.a,k.a,W.a,C.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"],assessment:[5,"assessment"],summary:[6,"summary"]},null),(e()(),o._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,3,0,n.context.$implicit.submission,t.module,t.workshop,t.access,t.workshop.course,n.context.$implicit,"true")},null)}function View_AddonModWorkshopIndexComponent_38(e){return o._42(0,[(e()(),o._16(0,0,null,null,20,"ion-card",[["class","with-borders"]],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(4,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,41,{contentLabel:0}),o._37(603979776,42,{_buttons:1}),o._37(603979776,43,{_icons:1}),o._15(8,16384,null,0,R.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_39)),o._15(16,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_40)),o._15(19,802816,null,0,_.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,16,0,!t.assessments||!t.assessments.length);e(n,19,0,t.assessments||o._8)},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_workshop.assignedassessments")))})}function View_AddonModWorkshopIndexComponent_36(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_37)),o._15(3,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_38)),o._15(6,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,t.workshop.phase==t.workshopPhases.PHASE_ASSESSMENT&&t.workshop.instructreviewers);e(n,6,0,t.canAssess)},null)}function View_AddonModWorkshopIndexComponent_42(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,47,{contentLabel:0}),o._37(603979776,48,{_buttons:1}),o._37(603979776,49,{_icons:1}),o._15(5,16384,null,0,R.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_workshop.submissionsreport")))})}function View_AddonModWorkshopIndexComponent_43(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,50,{contentLabel:0}),o._37(603979776,51,{_buttons:1}),o._37(603979776,52,{_icons:1}),o._15(5,16384,null,0,R.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_workshop.gradesreport")))})}function View_AddonModWorkshopIndexComponent_45(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-label",[["id","addon-workshop-groupslabel"]],null,null,null,null,null)),o._15(1,16384,[[53,4]],0,G.a,[d.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"addon-workshop-groupslabel")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.groupsseparate")))})}function View_AddonModWorkshopIndexComponent_46(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-label",[["id","addon-workshop-groupslabel"]],null,null,null,null,null)),o._15(1,16384,[[53,4]],0,G.a,[d.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"addon-workshop-groupslabel")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.groupsvisible")))})}function View_AddonModWorkshopIndexComponent_47(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),o._15(1,16384,[[56,4]],0,j.a,[o.p],{value:[0,"value"]},null),(e()(),o._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.id)},function(e,n){e(n,2,0,n.context.$implicit.name)})}function View_AddonModWorkshopIndexComponent_44(e){return o._42(0,[(e()(),o._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(603979776,53,{contentLabel:0}),o._37(603979776,54,{_buttons:1}),o._37(603979776,55,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,1,1,null,View_AddonModWorkshopIndexComponent_45)),o._15(8,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,1,1,null,View_AddonModWorkshopIndexComponent_46)),o._15(11,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-workshop-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,14)._click(t)&&r}if("keyup.space"===n){r=!1!==o._29(e,14)._keyup()&&r}if("ngModelChange"===n){r=!1!==(i.group=t)&&r}if("ionChange"===n){r=!1!==i.setGroup(i.group)&&r}return r},Q.b,Q.a)),o._15(14,1228800,null,1,z.a,[$.a,f.a,d.a,o.p,o.K,[2,p.a],Y.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),o._37(603979776,56,{options:1}),o._35(1024,null,X.l,function(e){return[e]},[z.a]),o._15(17,671744,null,0,X.q,[[8,null],[8,null],[8,null],[2,X.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,X.m,null,[X.q]),o._15(19,16384,null,0,X.n,[X.m],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_47)),o._15(22,802816,null,0,_.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,8,0,t.groupInfo.separateGroups);e(n,11,0,t.groupInfo.visibleGroups);e(n,14,0,"action-sheet");e(n,17,0,t.group);e(n,22,0,t.groupInfo.groups)},function(e,n){e(n,13,0,o._29(n,14)._disabled,o._29(n,19).ngClassUntouched,o._29(n,19).ngClassTouched,o._29(n,19).ngClassPristine,o._29(n,19).ngClassDirty,o._29(n,19).ngClassValid,o._29(n,19).ngClassInvalid,o._29(n,19).ngClassPending)})}function View_AddonModWorkshopIndexComponent_48(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(2,0,null,null,1,"addon-mod-workshop-submission",[["summary","true"]],null,null,null,H.b,H.a)),o._15(3,114688,null,0,N.a,[B.a,V.a,k.a,W.a,C.a],{submission:[0,"submission"],module:[1,"module"],workshop:[2,"workshop"],access:[3,"access"],courseId:[4,"courseId"],summary:[5,"summary"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,3,0,n.context.$implicit,t.module,t.workshop,t.access,t.workshop.course,"true")},null)}function View_AddonModWorkshopIndexComponent_50(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(1,16384,null,0,J.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(3,0,null,null,6,"button",[["block",""],["icon-start",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.gotoSubmissionsPage(r.page-1)&&o}return o},K.b,K.a)),o._15(4,1097728,null,0,q.a,[[8,""],d.a,o.p,o.K],{outline:[0,"outline"],block:[1,"block"]},null),(e()(),o._40(-1,0,["\n                            "])),(e()(),o._16(6,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(7,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(8,0,["\n                            ","\n                        "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,4,0,"","");e(n,7,0,"arrow-back","ios-arrow-back")},function(e,n){e(n,6,0,o._29(n,7)._hidden);e(n,8,0,o._41(n,8,0,o._29(n,9).transform("core.previous")))})}function View_AddonModWorkshopIndexComponent_51(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(1,16384,null,0,J.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(3,0,null,null,6,"button",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.gotoSubmissionsPage(r.page+1)&&o}return o},K.b,K.a)),o._15(4,1097728,null,0,q.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(5,0,["\n                            ","\n                            "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(8,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(-1,0,["\n                        "])),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,4,0,"");e(n,8,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,5,0,o._41(n,5,0,o._29(n,6).transform("core.next")));e(n,7,0,o._29(n,8)._hidden)})}function View_AddonModWorkshopIndexComponent_49(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"ion-grid",[["class","grid"]],null,null,null,null,null)),o._15(1,16384,null,0,Z.a,[],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,8,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),o._15(4,16384,null,0,ee.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_50)),o._15(7,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_51)),o._15(10,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,7,0,t.page>0);e(n,10,0,t.hasNextPage)},null)}function View_AddonModWorkshopIndexComponent_41(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"ion-card",[["class","with-borders"]],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_42)),o._15(4,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n           "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_43)),o._15(7,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_44)),o._15(10,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_48)),o._15(13,802816,null,0,_.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_49)),o._15(16,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,t.workshop.phase==t.workshopPhases.PHASE_SUBMISSION);e(n,7,0,t.workshop.phase>t.workshopPhases.PHASE_SUBMISSION);e(n,10,0,t.groupInfo&&(t.groupInfo.separateGroups||t.groupInfo.visibleGroups));e(n,13,0,t.grades);e(n,16,0,t.page>0||t.hasNextPage)},null)}function View_AddonModWorkshopIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,27,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_20)),o._15(4,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_25)),o._15(8,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_26)),o._15(11,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_29)),o._15(15,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_33)),o._15(18,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_36)),o._15(22,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopIndexComponent_41)),o._15(26,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.workshop.phase>=t.workshopPhases.PHASE_CLOSED);e(n,8,0,t.workshop.phase==t.workshopPhases.PHASE_SUBMISSION&&t.workshop.instructauthors);e(n,11,0,t.canSubmit);e(n,15,0,t.workshop.phase==t.workshopPhases.PHASE_SUBMISSION);e(n,18,0,t.workshop.phase>=t.workshopPhases.PHASE_CLOSED);e(n,22,0,t.workshop.phase>=t.workshopPhases.PHASE_ASSESSMENT);e(n,26,0,t.access.canviewallsubmissions&&t.workshop.phase>=t.workshopPhases.PHASE_SUBMISSION&&(t.grades&&t.grades.length||t.groupInfo&&(t.groupInfo.separateGroups||t.groupInfo.visibleGroups)))},null)}function View_AddonModWorkshopIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,ne.b,ne.a)),o._15(2,245760,null,1,te.a,[o.p,S.a,y.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,23,"core-context-menu",[],null,null,null,oe.b,oe.a)),o._15(6,245760,null,0,l.a,[a.a,re.a,o.p,y.a,[2,ie.a],b.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_1)),o._15(9,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_2)),o._15(12,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_3)),o._15(15,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_4)),o._15(18,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_5)),o._15(21,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_6)),o._15(24,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_7)),o._15(27,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(32,0,null,null,16,"core-loading",[["class","core-loading-center"]],null,null,null,le.b,le.a)),o._15(33,638976,null,0,se.a,[a.a,o.p,x.a,b.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_8)),o._15(36,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_17)),o._15(40,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_18)),o._15(44,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopIndexComponent_19)),o._15(47,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.blog);e(n,18,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,21,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,24,0,t.prefetchStatusIcon);e(n,27,0,t.size);e(n,33,0,t.loaded);e(n,36,0,t.phases);e(n,40,0,t.hasOffline);e(n,44,0,t.description&&t.workshop&&t.workshop.phase==t.workshopPhases.PHASE_SETUP);e(n,47,0,t.access&&t.workshop&&t.workshop.phase>=t.workshopPhases.PHASE_SUBMISSION)},null)}t.d(n,"b",function(){return fe}),n.c=View_AddonModWorkshopIndexComponent_0,t.d(n,"a",function(){return he});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(49),d=t(9),c=t(32),p=t(22),f=t(20),h=t(28),m=t(34),_=t(8),g=t(90),v=t(48),C=t(2),y=t(5),P=t(12),A=t(17),b=t(3),I=t(23),S=t(7),E=t(18),M=t(11),w=t(16),k=t(21),T=t(30),O=t(29),D=t(43),x=t(10),F=t(41),L=t(31),U=t(37),R=t(101),H=t(1623),N=t(528),B=t(190),V=t(204),W=t(46),K=t(47),q=t(44),G=t(68),j=t(109),Q=t(124),z=t(110),$=t(36),Y=t(60),X=t(24),J=t(120),Z=t(165),ee=t(121),ne=t(97),te=t(88),oe=t(92),re=t(71),ie=t(77),le=t(55),se=t(52),ae=t(519),ue=t(176),de=t(72),ce=t(163),pe=t(291),fe=o._14({encapsulation:2,styles:[],data:{}}),he=o._12("addon-mod-workshop-index",ae.a,function View_AddonModWorkshopIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-workshop-index",[],null,null,null,View_AddonModWorkshopIndexComponent_0,fe)),o._15(1,245760,null,0,ae.a,[o.u,ue.a,[2,T.a],B.a,de.a,k.a,ce.a,b.a,A.a,V.a,pe.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_CoreGradesCourseComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-empty-box",[["icon","stats"]],null,null,null,r.b,r.a)),o._15(1,49152,null,0,i.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,0,["\n        "]))],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.grades.nogradesreturned")),"stats")},null)}function View_CoreGradesCourseComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"th",[["text-start",""]],[[8,"id",0],[2,"hidden-phone",null],[1,"colspan",0]],null,null,null,null)),(e()(),o._40(1,null,["\n                            ","\n                        "])),o._32(131072,l.a,[s.a,o.i])],null,function(e,n){e(n,0,0,o._19(1,"",n.context.$implicit.name,""),n.context.$implicit.hiddenPhone,n.context.$implicit.colspan);e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.grades."+n.context.$implicit.name)))})}function View_CoreGradesCourseComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"td",[["class","core-grades-table-category"]],[[1,"rowspan",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n                            "]))],null,function(e,n){e(n,0,0,n.parent.parent.context.$implicit.rowspan)})}function View_CoreGradesCourseComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,a.b,a.a)),o._15(1,704512,null,0,u.a,[o.p,d.a],{name:[0,"name"]},null)],function(e,n){e(n,1,0,o._19(1,"",n.parent.parent.context.$implicit.icon,""))},null)}function View_CoreGradesCourseComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,"img",[["item-start",""]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,n.parent.parent.context.$implicit.image)})}function View_CoreGradesCourseComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"td",[["text-start",""]],[[8,"className",0],[8,"innerHTML",1],[2,"hidden-phone",null]],null,null,null,null)),(e()(),o._40(-1,null,["\n                                "]))],null,function(e,n){e(n,0,0,"core-grades-table-"+n.parent.context.$implicit.name,n.parent.parent.parent.context.$implicit[n.parent.context.$implicit.name],n.parent.context.$implicit.hiddenPhone)})}function View_CoreGradesCourseComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreGradesCourseComponent_10)),o._15(3,16384,null,0,c.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                            "]))],function(e,n){e(n,3,0,"gradeitem"!=n.context.$implicit.name&&void 0!=n.parent.parent.context.$implicit[n.context.$implicit.name])},null)}function View_CoreGradesCourseComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,18,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreGradesCourseComponent_6)),o._15(3,16384,null,0,c.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(5,0,null,null,9,"th",[["class","core-grades-table-gradeitem"],["text-start",""]],[[2,"column-itemname",null],[1,"colspan",0],[2,"core-split-item-selected",null]],null,null,null,null)),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreGradesCourseComponent_7)),o._15(8,16384,null,0,c.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreGradesCourseComponent_8)),o._15(11,16384,null,0,c.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._16(13,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreGradesCourseComponent_9)),o._15(17,802816,null,0,c.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                        "]))],function(e,n){var t=n.component;e(n,3,0,"category"==n.parent.context.$implicit.itemtype);e(n,8,0,n.parent.context.$implicit.icon);e(n,11,0,n.parent.context.$implicit.image);e(n,17,0,t.gradesTable.columns)},function(e,n){e(n,5,0,"category"==n.parent.context.$implicit.itemtype,n.parent.context.$implicit.colspan,n.component.gradeId==n.parent.context.$implicit.id);e(n,13,0,n.parent.context.$implicit.gradeitem)})}function View_CoreGradesCourseComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"tr",[],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==("category"!=e.context.$implicit.itemtype&&e.component.gotoGrade(e.context.$implicit.id))&&o}return o},null,null)),o._15(1,278528,null,0,c.i,[o.v,o.w,o.p,o.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o._33(2,{"core-grades-grade-clickable":0}),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreGradesCourseComponent_5)),o._15(5,16384,null,0,c.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,1,0,n.context.$implicit.rowclass,e(n,2,0,"category"!=n.context.$implicit.itemtype));e(n,5,0,n.context.$implicit.itemtype)},null)}function View_CoreGradesCourseComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,19,"div",[["class","core-grades-container"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,16,"table",[["cellpadding","0"],["cellspacing","0"],["class","core-grades-table"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(4,0,null,null,7,"thead",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(6,0,null,null,4,"tr",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreGradesCourseComponent_3)),o._15(9,802816,null,0,c.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(13,0,null,null,4,"tbody",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_CoreGradesCourseComponent_4)),o._15(16,802816,null,0,c.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,9,0,t.gradesTable.columns);e(n,16,0,t.gradesTable.rows)},null)}function View_CoreGradesCourseComponent_0(e){return o._42(0,[o._37(402653184,1,{content:0}),(e()(),o._16(1,0,null,null,20,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,p.b,p.a)),o._15(2,4374528,[[1,4]],0,f.a,[d.a,h.a,m.a,o.p,o.K,_.a,g.a,o.D,[2,v.a],[2,C.a]],null,null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var o=!0;if("ionRefresh"===n){o=!1!==e.component.refreshGrades(t)&&o}return o},null,null)),o._15(5,212992,null,0,y.a,[h.a,f.a,o.D,P.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,A.b,A.a)),o._15(8,114688,null,0,b.a,[y.a,d.a],{pullingText:[0,"pullingText"]},null),o._32(131072,l.a,[s.a,o.i]),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(12,0,null,1,8,"core-loading",[["class","safe-area-page"]],null,null,null,I.b,I.a)),o._15(13,638976,null,0,S.a,[s.a,o.p,E.a,M.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_CoreGradesCourseComponent_1)),o._15(16,16384,null,0,c.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_CoreGradesCourseComponent_2)),o._15(19,16384,null,0,c.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,1,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.gradesLoaded);e(n,8,0,o._19(1,"",o._41(n,8,0,o._29(n,9).transform("core.pulltorefresh")),""));e(n,13,0,t.gradesLoaded);e(n,16,0,!t.gradesTable);e(n,19,0,t.gradesTable)},function(e,n){e(n,1,0,o._29(n,2).statusbarPadding,o._29(n,2)._hasRefresher);e(n,4,0,"inactive"!==o._29(n,5).state,o._29(n,5)._top);e(n,7,0,o._29(n,8).r.state)})}t.d(n,"b",function(){return L}),n.c=View_CoreGradesCourseComponent_0,t.d(n,"a",function(){return U});var o=t(1),r=t(125),i=t(115),l=t(26),s=t(19),a=t(81),u=t(76),d=t(9),c=t(8),p=t(182),f=t(30),h=t(17),m=t(35),_=t(36),g=t(108),v=t(40),C=t(21),y=t(160),P=t(45),A=t(213),b=t(174),I=t(55),S=t(52),E=t(10),M=t(3),w=t(501),k=t(169),T=t(5),O=t(70),D=t(185),x=t(11),F=t(29),L=o._14({encapsulation:2,styles:[],data:{}}),U=o._12("core-grades-course",w.a,function View_CoreGradesCourseComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-grades-course",[],null,null,null,View_CoreGradesCourseComponent_0,L)),o._15(1,114688,null,0,w.a,[k.a,T.a,O.a,D.a,[2,C.a],x.a,[2,F.a]],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",userId:"userId",gradeId:"gradeId"},{},[])},function(e,n,t){"use strict";function View_CoreUserParticipantsComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-search-box",[["autocorrect","off"],["searchArea","CoreUserParticipants"]],null,[[null,"onSubmit"],[null,"onClear"]],function(e,n,t){var o=!0,r=e.component;if("onSubmit"===n){o=!1!==r.search(t)&&o}if("onClear"===n){o=!1!==r.clearSearch(t)&&o}return o},r.c,r.b)),o._15(1,114688,null,0,i.a,[l.a,s.a,a.a,u.a,d.a,c.a],{autocorrect:[0,"autocorrect"],spellcheck:[1,"spellcheck"],autoFocus:[2,"autoFocus"],lengthCheck:[3,"lengthCheck"],disabled:[4,"disabled"],searchArea:[5,"searchArea"]},{onSubmit:"onSubmit",onClear:"onClear"})],function(e,n){e(n,1,0,"off",!1,!0,1,n.component.disableSearch,"CoreUserParticipants")},null)}function View_CoreUserParticipantsComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-empty-box",[["icon","person"]],null,null,null,p.b,p.a)),o._15(1,49152,null,0,f.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,h.a,[l.a,o.i]),(e()(),o._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.user.noparticipants")),"person")},null)}function View_CoreUserParticipantsComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-empty-box",[["icon","search"]],null,null,null,p.b,p.a)),o._15(1,49152,null,0,f.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,h.a,[l.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.noresults")),"search")},null)}function View_CoreUserParticipantsComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"p",[],null,null,null,null,null)),(e()(),o._16(1,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(2,null,["",": "])),o._32(131072,h.a,[l.a,o.i]),(e()(),o._40(4,null,["",""])),o._34(5,1)],null,function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.lastaccess")));e(n,4,0,o._41(n,4,0,e(n,5,0,o._29(n.parent.parent.parent.parent,0),n.parent.parent.context.$implicit.lastcourseaccess)))})}function View_CoreUserParticipantsComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"p",[],null,null,null,null,null)),(e()(),o._16(1,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(2,null,["",": "])),o._32(131072,h.a,[l.a,o.i]),(e()(),o._40(4,null,["",""])),o._34(5,1)],null,function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.lastaccess")));e(n,4,0,o._41(n,4,0,e(n,5,0,o._29(n.parent.parent.parent.parent,0),n.parent.parent.context.$implicit.lastaccess)))})}function View_CoreUserParticipantsComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(2,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),o._40(3,null,["",""])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreUserParticipantsComponent_7)),o._15(6,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreUserParticipantsComponent_8)),o._15(9,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,6,0,n.parent.context.$implicit.lastcourseaccess);e(n,9,0,null==n.parent.context.$implicit.lastcourseaccess&&n.parent.context.$implicit.lastaccess)},function(e,n){e(n,3,0,n.parent.context.$implicit.fullname)})}function View_CoreUserParticipantsComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(2,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),o._16(3,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),o._15(4,540672,null,0,_.a,[o.p,d.a,c.a,g.a,l.a,v.a,s.a,C.a,y.a,P.a,A.a,b.a,[2,I.a],[2,S.a],[2,E.a],M.a,u.a,w.a,k.a,T.a,o.W],{text:[0,"text"],highlight:[1,"highlight"],filter:[2,"filter"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,4,0,n.parent.context.$implicit.fullname,n.component.searchQuery,!1)},null)}function View_CoreUserParticipantsComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0],[2,"core-split-item-selected",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoParticipant(e.context.$implicit.id)&&o}return o},O.b,O.a)),o._15(1,1097728,null,3,D.a,[x.a,F.a,o.p,o.K,[2,L.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(5,16384,null,0,U.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,R.b,R.a)),o._15(8,16384,null,0,H.a,[],null,null),o._15(9,770048,null,0,N.a,[I.a,d.a,s.a,A.a,u.a,[2,E.a]],{user:[0,"user"],userId:[1,"userId"],checkOnline:[2,"checkOnline"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_CoreUserParticipantsComponent_6)),o._15(12,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_CoreUserParticipantsComponent_9)),o._15(15,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,9,0,n.context.$implicit,n.context.$implicit.id,!0);e(n,12,0,!t.displaySearchResults);e(n,15,0,t.displaySearchResults)},function(e,n){e(n,0,0,n.context.$implicit.fullname,n.context.$implicit.id==n.component.participantId)})}function View_CoreUserParticipantsComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),o._15(1,16384,null,0,B.a,[F.a,o.p,o.K,v.a,V.l,W.a],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_CoreUserParticipantsComponent_5)),o._15(4,802816,null,0,m.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){e(n,4,0,n.component.participants)},null)}function View_CoreUserParticipantsComponent_0(e){return o._42(0,[o._32(0,K.a,[y.a,l.a]),o._37(402653184,1,{content:0}),o._37(402653184,2,{splitviewCtrl:0}),(e()(),o._16(3,0,null,null,11,"core-navbar-buttons",[],null,null,null,q.b,q.a)),o._15(4,245760,null,1,G.a,[o.p,y.a,c.a],null,null),o._37(603979776,3,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(7,0,null,0,6,"button",[["icon-only",""],["ion-button",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.toggleSearch()&&o}return o},j.b,j.a)),o._15(8,1097728,[[3,4]],0,Q.a,[[8,""],F.a,o.p,o.K],null,null),o._32(131072,h.a,[l.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(11,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(12,147456,null,0,z.a,[F.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._16(16,0,null,null,33,"core-split-view",[],null,null,null,$.b,$.a)),o._15(17,245760,[[2,4]],0,E.a,[[2,I.a],o.p,Y.a,v.a,l.a],null,null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(19,0,null,0,29,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,X.b,X.a)),o._15(20,4374528,[[1,4]],0,S.a,[F.a,v.a,W.a,o.p,o.K,J.a,Z.a,o.D,[2,ee.a],[2,I.a]],null,null),(e()(),o._40(-1,1,["\n        "])),(e()(),o._16(22,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var o=!0;if("ionRefresh"===n){o=!1!==e.component.refreshParticipants(t)&&o}return o},null,null)),o._15(23,212992,null,0,ne.a,[v.a,S.a,o.D,V.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(25,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,te.b,te.a)),o._15(26,114688,null,0,oe.a,[ne.a,F.a],{pullingText:[0,"pullingText"]},null),o._32(131072,h.a,[l.a,o.i]),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,1,["\n\n        "])),(e()(),o._11(16777216,null,1,1,null,View_CoreUserParticipantsComponent_1)),o._15(31,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,1,["\n\n        "])),(e()(),o._16(33,0,null,1,14,"core-loading",[],null,null,null,re.b,re.a)),o._15(34,638976,null,0,ie.a,[l.a,o.p,u.a,s.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._11(16777216,null,0,1,null,View_CoreUserParticipantsComponent_2)),o._15(37,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n            "])),(e()(),o._11(16777216,null,0,1,null,View_CoreUserParticipantsComponent_3)),o._15(40,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n            "])),(e()(),o._11(16777216,null,0,1,null,View_CoreUserParticipantsComponent_4)),o._15(43,16384,null,0,m.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(45,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.loadMoreData(t)&&o}return o},le.b,le.a)),o._15(46,573440,null,0,se.a,[[2,S.a],c.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,1,["\n    "])),(e()(),o._40(-1,0,["\n"]))],function(e,n){var t=n.component;e(n,4,0);e(n,12,0,"search"),e(n,17,0);e(n,23,0,t.participantsLoaded&&!t.displaySearchResult);e(n,26,0,o._19(1,"",o._41(n,26,0,o._29(n,27).transform("core.pulltorefresh")),""));e(n,31,0,t.showSearchBox);e(n,34,0,t.participantsLoaded);e(n,37,0,!t.displaySearchResults&&!t.participants.length);e(n,40,0,t.displaySearchResults&&!t.participants.length);e(n,43,0,t.participants&&t.participants.length>0);e(n,46,0,t.canLoadMore&&t.participantsLoaded,t.loadMoreError)},function(e,n){e(n,7,0,!n.component.canSearch,o._41(n,7,1,o._29(n,9).transform("core.search")));e(n,11,0,o._29(n,12)._hidden);e(n,19,0,o._29(n,20).statusbarPadding,o._29(n,20)._hasRefresher);e(n,22,0,"inactive"!==o._29(n,23).state,o._29(n,23)._top);e(n,25,0,o._29(n,26).r.state)})}t.d(n,"b",function(){return de}),n.c=View_CoreUserParticipantsComponent_0,t.d(n,"a",function(){return ce});var o=t(1),r=t(475),i=t(379),l=t(19),s=t(3),a=t(283),u=t(10),d=t(2),c=t(5),p=t(125),f=t(115),h=t(26),m=t(8),_=t(48),g=t(12),v=t(17),C=t(23),y=t(7),P=t(18),A=t(11),b=t(16),I=t(21),S=t(30),E=t(29),M=t(43),w=t(41),k=t(31),T=t(37),O=t(32),D=t(22),x=t(20),F=t(9),L=t(28),U=t(34),R=t(214),H=t(161),N=t(183),B=t(87),V=t(45),W=t(35),K=t(443),q=t(97),G=t(88),j=t(47),Q=t(44),z=t(49),$=t(474),Y=t(73),X=t(182),J=t(36),Z=t(108),ee=t(40),ne=t(160),te=t(213),oe=t(174),re=t(55),ie=t(52),le=t(373),se=t(273),ae=t(527),ue=t(46),de=o._14({encapsulation:2,styles:[],data:{}}),ce=o._12("core-user-participants",ae.a,function View_CoreUserParticipantsComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-user-participants",[],null,null,null,View_CoreUserParticipantsComponent_0,de)),o._15(1,114688,null,0,ae.a,[ue.a,c.a,A.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId"},{},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreBytesToSizePipe(e,n){this.textUtils=n,this.logger=e.getInstance("CoreBytesToSizePipe")}return CoreBytesToSizePipe.prototype.transform=function(e){if("string"==typeof e){var n=parseInt(e,10);if(isNaN(n))return this.logger.error("Invalid value received",e),e;e=n}return this.textUtils.bytesToSize(e)},CoreBytesToSizePipe}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(42),r=function(){function CoreSecondsToHMSPipe(e,n){this.textUtils=n,this.logger=e.getInstance("CoreSecondsToHMSPipe")}return CoreSecondsToHMSPipe.prototype.transform=function(e){var n,t;if(!e||e<0)e=0;else if("string"==typeof e){var r=parseInt(e,10);if(isNaN(r))return this.logger.error("Invalid value received",e),e;e=r}return e=Math.floor(e),n=Math.floor(e/o.a.SECONDS_HOUR),e-=n*o.a.SECONDS_HOUR,t=Math.floor(e/o.a.SECONDS_MINUTE),e-=t*o.a.SECONDS_MINUTE,this.textUtils.twoDigits(n)+":"+this.textUtils.twoDigits(t)+":"+this.textUtils.twoDigits(e)},CoreSecondsToHMSPipe}()},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0),t(6),t(4);var o=t(10),r=(t(202),t(14)),i=(t(39),t(179),t(51),t(103),t(397)),l=(t(496),function(){function CoreCourseSectionPage(e,n,t,l,s,a,u,d,c,p,f,h,m,_,g,v){var C=this;this.courseProvider=n,this.domUtils=t,this.courseFormatDelegate=l,this.courseOptionsDelegate=s,this.translate=a,this.courseHelper=u,this.coursesProvider=c,this.filterHelper=p,this.navCtrl=h,this.injector=m,this.prefetchDelegate=_,this.syncProvider=g,this.utils=v,this.courseMenuHandlers=[],this.downloadEnabled=!1,this.downloadEnabledIcon="square-outline",this.prefetchCourseData={prefetchCourseIcon:"spinner",title:"core.course.downloadcourse"},this.isDestroyed=!1,this.course=e.get("course"),this.sectionId=e.get("sectionId"),this.sectionNumber=e.get("sectionNumber"),this.module=e.get("module"),this.firstTabName=e.get("selectedTab"),this.modParams=e.get("modParams"),this.title=l.getCourseTitle(this.course),this.displayEnableDownload=!f.getCurrentSite().isOfflineDisabled()&&l.displayEnableDownload(this.course),this.downloadCourseEnabled=!this.coursesProvider.isDownloadCourseDisabledInSite(),l.shouldRefreshWhenCompletionChanges(this.course).then(function(e){e&&(C.completionObserver=d.on(o.a.COMPLETION_MODULE_VIEWED,function(e){e&&e.courseId==C.course.id&&C.refreshAfterCompletionChange(!0)}),C.syncObserver=d.on(i.a.AUTO_SYNCED,function(e){e&&e.courseId==C.course.id&&(C.refreshAfterCompletionChange(!1),e.warnings&&e.warnings[0]&&C.domUtils.showErrorModal(e.warnings[0]))}))}),this.downloadCourseEnabled&&(this.courseStatusObserver=d.on(o.a.COURSE_STATUS_CHANGED,function(e){e.courseId!=C.course.id&&e.courseId!=r.a.ALL_COURSES_CLEARED||C.updateCourseStatus(e.status)},f.getCurrentSiteId())),this.selectTabObserver=d.on(o.a.SELECT_COURSE_TAB,function(e){if(e.name){if(C.courseHandlers){var n=C.courseHandlers.findIndex(function(n){return n.name==e.name});n>=0&&C.tabsComponent&&C.tabsComponent.selectTab(n+1)}}else C.sectionId=e.sectionId||C.sectionId,C.sectionNumber=e.sectionNumber||C.sectionNumber,C.tabsComponent&&C.tabsComponent.selectTab(0)})}return CoreCourseSectionPage.prototype.ionViewDidLoad=function(){var e=this;this.module&&(this.moduleId=this.module.id,this.courseHelper.openModule(this.navCtrl,this.module,this.course.id,this.sectionId,this.modParams)),this.loadData(!1,!0).finally(function(){e.dataLoaded=!0,e.downloadCourseEnabled&&e.determineCoursePrefetchIcon().then(function(){if("spinner"==e.prefetchCourseData.prefetchCourseIcon){var n=e.courseHelper.getCourseDownloadPromise(e.course.id);n?n.catch(function(n){e.isDestroyed||e.domUtils.showErrorModalDefault(n,"core.course.errordownloadingcourse",!0)}):e.courseProvider.setCoursePreviousStatus(e.course.id).then(function(n){e.updateCourseStatus(n)})}})})},CoreCourseSectionPage.prototype.loadData=function(e,n){var t=this;return this.courseHelper.getCourse(this.course.id).then(function(e){return e.course}).catch(function(){}).then(function(e){if(e&&(t.course.id===e.id&&t.course.hasOwnProperty("displayname")&&!e.hasOwnProperty("displayname")&&(e.displayname=t.course.displayname),t.course=e),n)return t.syncProvider.syncCourse(t.course.id).then(function(e){e.warnings&&e.warnings.length&&t.domUtils.showErrorModal(e.warnings[0])}).catch(function(){})}).then(function(){var n=[];return n.push(t.courseProvider.getSections(t.course.id,!1,!0).then(function(n){if(e){var o=t.courseProvider.getSectionsModules(n);return t.prefetchDelegate.invalidateModules(o,t.course.id).then(function(){return n})}return n}).then(function(e){var n;if(!1===t.course.enablecompletion)n=Promise.resolve({});else{var o=e.find(function(e){return e.modules.length>0});n=o&&void 0!==o.modules[0].completion?t.courseHelper.loadOfflineCompletion(t.course.id,e).catch(function(){}).then(function(){return{}}):t.courseProvider.getActivitiesCompletionStatus(t.course.id).catch(function(){return{}})}return n.then(function(n){t.courseHelper.addHandlerDataForModules(e,t.course.id,n,t.course.fullname,!0),t.sections=e.map(function(e){return t.filterHelper.getFiltersAndFormatText(e.name.trim(),"course",t.course.id,{clean:!0,singleLine:!0}).then(function(n){e.formattedName=n.text}),e.hasContent=t.courseHelper.sectionHasContent(e),e}),t.courseFormatDelegate.canViewAllSections(t.course)&&t.sections.unshift({name:t.translate.instant("core.course.allsections"),id:r.a.ALL_SECTIONS_ID,hasContent:!0}),t.title=t.courseFormatDelegate.getCourseTitle(t.course,t.sections),t.displayRefresher=t.courseFormatDelegate.displayRefresher(t.course,t.sections)})})),t.course.overviewfiles&&(t.course.imageThumb=t.course.overviewfiles[0]&&t.course.overviewfiles[0].fileurl),n.push(t.courseOptionsDelegate.getHandlersToDisplay(t.injector,t.course,e,!1).then(function(e){var n;e.forEach(function(e,o){e.data.componentData=e.data.componentData||{},e.data.componentData.courseId=t.course.id,t.firstTabName&&e.name==t.firstTabName&&(n=o+1)}),t.courseHandlers=e,t.firstTabName=void 0,n&&setTimeout(function(){t.tabsComponent.selectTab(n)})})),n.push(t.courseOptionsDelegate.getMenuHandlersToDisplay(t.injector,t.course).then(function(e){t.courseMenuHandlers=e})),t.course.enablecompletion&&t.coursesProvider.isGetCoursesByFieldAvailable()&&n.push(t.coursesProvider.getCourseByField("id",t.course.id).catch(function(){}).then(function(e){e&&Object.assign(t.course,e),t.course.courseformatoptions&&(t.course.courseformatoptions=t.utils.objectToKeyValueMap(t.course.courseformatoptions,"name","value"))})),Promise.all(n).catch(function(e){t.domUtils.showErrorModalDefault(e,"core.course.couldnotloadsectioncontent",!0)})})},CoreCourseSectionPage.prototype.doRefresh=function(e){var n=this;return this.invalidateData().finally(function(){return n.loadData(!0,!0).finally(function(){return(n.displayRefresher?n.formatComponent.doRefresh(e):Promise.resolve()).finally(function(){e&&e.complete()})})})},CoreCourseSectionPage.prototype.onCompletionChange=function(e){var n=this,t=!e.hasOwnProperty("valueused")||e.valueused;this.invalidateData().finally(function(){t&&n.refreshAfterCompletionChange(!0)})},CoreCourseSectionPage.prototype.invalidateData=function(){var e=[];return e.push(this.courseProvider.invalidateSections(this.course.id)),e.push(this.coursesProvider.invalidateUserCourses()),e.push(this.courseFormatDelegate.invalidateData(this.course,this.sections)),this.sections&&e.push(this.prefetchDelegate.invalidateCourseUpdates(this.course.id)),Promise.all(e)},CoreCourseSectionPage.prototype.refreshAfterCompletionChange=function(e){var n=this,t=this.content.getScrollElement(),o=t.scrollTop||0,r=t.scrollLeft||0;this.dataLoaded=!1,this.domUtils.scrollToTop(this.content),this.loadData(!0,e).then(function(){return n.formatComponent.doRefresh(void 0,void 0,!0)}).finally(function(){n.dataLoaded=!0,setTimeout(function(){n.content.scrollTo(r,o,0)})})},CoreCourseSectionPage.prototype.determineCoursePrefetchIcon=function(){var e=this;return this.courseHelper.getCourseStatusIconAndTitle(this.course.id).then(function(n){e.prefetchCourseData.prefetchCourseIcon=n.icon,e.prefetchCourseData.title=n.title})},CoreCourseSectionPage.prototype.prefetchCourse=function(){var e=this;this.courseHelper.confirmAndPrefetchCourse(this.prefetchCourseData,this.course,this.sections,this.courseHandlers,this.courseMenuHandlers).catch(function(n){e.isDestroyed||e.domUtils.showErrorModalDefault(n,"core.course.errordownloadingcourse",!0)})},CoreCourseSectionPage.prototype.toggleDownload=function(){this.downloadEnabled=!this.downloadEnabled,this.downloadEnabledIcon=this.downloadEnabled?"checkbox-outline":"square-outline"},CoreCourseSectionPage.prototype.updateCourseStatus=function(e){var n=this.courseHelper.getCourseStatusIconAndTitleFromStatus(e);this.prefetchCourseData.prefetchCourseIcon=n.icon,this.prefetchCourseData.title=n.title},CoreCourseSectionPage.prototype.openCourseSummary=function(){this.navCtrl.push("CoreCoursesCoursePreviewPage",{course:this.course,avoidOpenCourse:!0})},CoreCourseSectionPage.prototype.openMenuItem=function(e){var n=Object.assign({course:this.course},e.data.pageParams);this.navCtrl.push(e.data.page,n)},CoreCourseSectionPage.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.completionObserver&&this.completionObserver.off(),this.selectTabObserver&&this.selectTabObserver.off()},CoreCourseSectionPage.prototype.ionViewDidEnter=function(){this.formatComponent&&this.formatComponent.ionViewDidEnter(),this.tabsComponent&&this.tabsComponent.ionViewDidEnter()},CoreCourseSectionPage.prototype.ionViewDidLeave=function(){this.formatComponent&&this.formatComponent.ionViewDidLeave(),this.tabsComponent&&this.tabsComponent.ionViewDidLeave()},CoreCourseSectionPage}())},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(1),r=t(187),i=(t(276),t(275),function(){function AddonCalendarCalendarComponent(e,n,t,i,l,s,a,u,d,c,p,f){var h=this;this.calendarProvider=l,this.calendarHelper=s,this.calendarOffline=a,this.domUtils=u,this.timeUtils=d,this.utils=c,this.coursesProvider=p,this.appProvider=f,this.onEventClicked=new o.r,this.onDayClicked=new o.r,this.loaded=!1,this.categoriesRetrieved=!1,this.categories={},this.offlineEvents={},this.offlineEditedEventsIds=[],this.deletedEvents=[],this.currentSiteId=n.getCurrentSiteId(),t.isAvailable()&&(this.obsDefaultTimeChange=e.on(r.a.DEFAULT_NOTIFICATION_TIME_CHANGED,function(){h.weeks.forEach(function(e){e.days.forEach(function(e){l.scheduleEventsNotifications(e.events)})})},this.currentSiteId)),this.undeleteEventObserver=e.on(r.a.UNDELETED_EVENT_EVENT,function(e){if(e&&e.eventId){h.undeleteEvent(e.eventId);var n=h.deletedEvents.indexOf(e.eventId);-1!=n&&h.deletedEvents.splice(n,1)}},this.currentSiteId),this.differ=i.find([]).create()}return AddonCalendarCalendarComponent.prototype.ngOnInit=function(){var e=new Date;this.year=this.initialYear?Number(this.initialYear):e.getFullYear(),this.month=this.initialMonth?Number(this.initialMonth):e.getMonth()+1,this.calculateIsCurrentMonth(),this.fetchData()},AddonCalendarCalendarComponent.prototype.ngOnChanges=function(e){this.canNavigate=void 0===this.canNavigate||this.utils.isTrueOrOne(this.canNavigate),this.displayNavButtons=void 0===this.displayNavButtons||this.utils.isTrueOrOne(this.displayNavButtons)},AddonCalendarCalendarComponent.prototype.ngDoCheck=function(){if(this.weeks){this.differ.diff(this.filter)&&this.filterEvents()}},AddonCalendarCalendarComponent.prototype.fetchData=function(e){var n=this;void 0===e&&(e=!1);var t=[];return t.push(this.loadCategories()),t.push(this.calendarOffline.getAllEditedEvents().then(function(e){e.forEach(function(e){e.offline=!0,n.calendarHelper.formatEventData(e)}),n.offlineEvents=n.calendarHelper.classifyIntoMonths(e);var t=e.filter(function(e){return e.id>0});n.offlineEditedEventsIds=t.map(function(e){return e.id})})),t.push(this.calendarOffline.getAllDeletedEventsIds().then(function(e){n.deletedEvents=e})),t.push(this.calendarProvider.getCalendarTimeFormat().then(function(e){n.timeFormat=e})),Promise.all(t).then(function(){return n.fetchEvents()}).catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.calendar.errorloadevents",!0)}).finally(function(){n.loaded=!0})},AddonCalendarCalendarComponent.prototype.fetchEvents=function(){var e=this;return this.calendarProvider.getMonthlyEvents(this.year,this.month).catch(function(n){return e.appProvider.isOnline()?Promise.reject(n):e.calendarHelper.getOfflineMonthWeeks(e.year,e.month)}).then(function(n){if(e.periodName=e.timeUtils.userDate(new Date(e.year,e.month-1).getTime(),"core.strftimemonthyear"),e.weekDays=e.calendarProvider.getWeekDays(n.daynames[0].dayno),e.weeks=n.weeks,e.calculateIsCurrentMonth(),e.isCurrentMonth){var t=(new Date).getDate(),o=!0;e.weeks.forEach(function(n){n.days.some(function(n){return n.istoday=n.mday==t,n.ispast=o&&!n.istoday,o=n.ispast,n.istoday?(n.events.forEach(function(n){n.ispast=e.isEventPast(n)}),!0):n.istoday})})}e.mergeEvents(),e.filterEvents()})},AddonCalendarCalendarComponent.prototype.loadCategories=function(){var e=this;return this.categoriesRetrieved?Promise.resolve():this.coursesProvider.getCategories(0,!0).then(function(n){e.categoriesRetrieved=!0,e.categories={},n.forEach(function(n){e.categories[n.id]=n})}).catch(function(){})},AddonCalendarCalendarComponent.prototype.filterEvents=function(){var e=this;this.weeks.forEach(function(n){n.days.forEach(function(n){n.filteredEvents=e.calendarHelper.getFilteredEvents(n.events,e.filter,e.categories),e.calendarHelper.calculateDayData(n,n.filteredEvents)})})},AddonCalendarCalendarComponent.prototype.refreshData=function(e){var n=this,t=[];return e||t.push(this.calendarProvider.invalidateMonthlyEvents(this.year,this.month)),t.push(this.coursesProvider.invalidateCategories(0,!0)),t.push(this.calendarProvider.invalidateTimeFormat()),this.categoriesRetrieved=!1,Promise.all(t).then(function(){return n.fetchData(!0)})},AddonCalendarCalendarComponent.prototype.loadNext=function(){var e=this;this.increaseMonth(),this.loaded=!1,this.fetchEvents().catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.calendar.errorloadevents",!0),e.decreaseMonth()}).finally(function(){e.loaded=!0})},AddonCalendarCalendarComponent.prototype.loadPrevious=function(){var e=this;this.decreaseMonth(),this.loaded=!1,this.fetchEvents().catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.calendar.errorloadevents",!0),e.increaseMonth()}).finally(function(){e.loaded=!0})},AddonCalendarCalendarComponent.prototype.eventClicked=function(e,n){this.onEventClicked.emit(e.id),n.stopPropagation()},AddonCalendarCalendarComponent.prototype.dayClicked=function(e){this.onDayClicked.emit({day:e,month:this.month,year:this.year})},AddonCalendarCalendarComponent.prototype.calculateIsCurrentMonth=function(){var e=new Date;this.currentTime=this.timeUtils.timestamp(),this.isCurrentMonth=this.year==e.getFullYear()&&this.month==e.getMonth()+1,this.isPastMonth=this.year<e.getFullYear()||this.year==e.getFullYear()&&this.month<e.getMonth()+1},AddonCalendarCalendarComponent.prototype.goToCurrentMonth=function(){var e=this,n=new Date,t=this.month,o=this.year;this.month=n.getMonth()+1,this.year=n.getFullYear(),this.loaded=!1,this.fetchEvents().then(function(){e.isCurrentMonth=!0}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.calendar.errorloadevents",!0),e.year=o,e.month=t}).finally(function(){e.loaded=!0})},AddonCalendarCalendarComponent.prototype.decreaseMonth=function(){1===this.month?(this.month=12,this.year--):this.month--},AddonCalendarCalendarComponent.prototype.increaseMonth=function(){12===this.month?(this.month=1,this.year++):this.month++},AddonCalendarCalendarComponent.prototype.mergeEvents=function(){var e=this,n=this.offlineEvents[this.calendarHelper.getMonthId(this.year,this.month)];this.weeks.forEach(function(t){t.days.forEach(function(t){t.events.forEach(e.calendarHelper.formatEventData.bind(e.calendarHelper)),e.calendarProvider.scheduleEventsNotifications(t.events),(n||e.deletedEvents.length)&&(e.deletedEvents.length&&t.events.forEach(function(n){n.deleted=-1!=e.deletedEvents.indexOf(n.id)}),e.offlineEditedEventsIds.length&&(t.events=t.events.filter(function(n){return-1==e.offlineEditedEventsIds.indexOf(n.id)})),n&&n[t.mday]&&(t.events=e.sortEvents(t.events.concat(n[t.mday]))))})})},AddonCalendarCalendarComponent.prototype.sortEvents=function(e){return e.sort(function(e,n){return e.timestart==n.timestart?e.timeduration-n.timeduration:e.timestart-n.timestart})},AddonCalendarCalendarComponent.prototype.undeleteEvent=function(e){this.weeks&&this.weeks.forEach(function(n){n.days.forEach(function(n){var t=n.events.find(function(n){return n.id==e});t&&(t.deleted=!1)})})},AddonCalendarCalendarComponent.prototype.isEventPast=function(e){return e.timestart+e.timeduration<this.currentTime},AddonCalendarCalendarComponent.prototype.ngOnDestroy=function(){this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.obsDefaultTimeChange&&this.obsDefaultTimeChange.off()},AddonCalendarCalendarComponent}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});t(0);var o=t(1),r=t(187),i=(t(276),t(275),t(42)),l=function(){function AddonCalendarUpcomingEventsComponent(e,n,t,i,l,s,a,u,d){var c=this;this.calendarProvider=l,this.calendarHelper=s,this.calendarOffline=a,this.domUtils=u,this.coursesProvider=d,this.onEventClicked=new o.r,this.filteredEvents=[],this.loaded=!1,this.categoriesRetrieved=!1,this.categories={},this.events=[],this.onlineEvents=[],this.offlineEvents=[],this.deletedEvents=[],this.currentSiteId=n.getCurrentSiteId(),t.isAvailable()&&(this.obsDefaultTimeChange=e.on(r.a.DEFAULT_NOTIFICATION_TIME_CHANGED,function(){l.scheduleEventsNotifications(c.onlineEvents)},this.currentSiteId)),this.undeleteEventObserver=e.on(r.a.UNDELETED_EVENT_EVENT,function(e){if(e&&e.eventId){c.undeleteEvent(e.eventId);var n=c.deletedEvents.indexOf(e.eventId);-1!=n&&c.deletedEvents.splice(n,1)}},this.currentSiteId),this.differ=i.find([]).create()}return AddonCalendarUpcomingEventsComponent.prototype.ngOnInit=function(){this.fetchData()},AddonCalendarUpcomingEventsComponent.prototype.ngDoCheck=function(){this.differ.diff(this.filter)&&this.filterEvents()},AddonCalendarUpcomingEventsComponent.prototype.fetchData=function(e){var n=this;void 0===e&&(e=!1);var t=[];return t.push(this.loadCategories()),t.push(this.calendarOffline.getAllEditedEvents().then(function(e){e.forEach(function(e){e.offline=!0,n.calendarHelper.formatEventData(e)}),n.offlineEvents=n.sortEvents(e)})),t.push(this.calendarOffline.getAllDeletedEventsIds().then(function(e){n.deletedEvents=e})),t.push(this.calendarProvider.getCalendarLookAhead().then(function(e){n.lookAhead=e})),t.push(this.calendarProvider.getCalendarTimeFormat().then(function(e){n.timeFormat=e})),Promise.all(t).then(function(){return n.fetchEvents()}).catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.calendar.errorloadevents",!0)}).finally(function(){n.loaded=!0})},AddonCalendarUpcomingEventsComponent.prototype.fetchEvents=function(){var e=this;return this.calendarProvider.getUpcomingEvents().then(function(n){var t=[];return e.onlineEvents=n.events,e.onlineEvents.forEach(e.calendarHelper.formatEventData.bind(e.calendarHelper)),e.calendarProvider.scheduleEventsNotifications(e.onlineEvents),e.events=e.mergeEvents(),e.filterEvents(),e.events.forEach(function(n){t.push(e.calendarProvider.formatEventTime(n,e.timeFormat).then(function(e){n.formattedtime=e}))}),Promise.all(t)})},AddonCalendarUpcomingEventsComponent.prototype.loadCategories=function(){var e=this;return this.categoriesRetrieved?Promise.resolve():this.coursesProvider.getCategories(0,!0).then(function(n){e.categoriesRetrieved=!0,e.categories={},n.forEach(function(n){e.categories[n.id]=n})}).catch(function(){})},AddonCalendarUpcomingEventsComponent.prototype.filterEvents=function(){this.filteredEvents=this.calendarHelper.getFilteredEvents(this.events,this.filter,this.categories)},AddonCalendarUpcomingEventsComponent.prototype.refreshData=function(e){var n=this,t=[];return e||t.push(this.calendarProvider.invalidateAllUpcomingEvents()),t.push(this.coursesProvider.invalidateCategories(0,!0)),t.push(this.calendarProvider.invalidateLookAhead()),t.push(this.calendarProvider.invalidateTimeFormat()),this.categoriesRetrieved=!1,Promise.all(t).then(function(){return n.fetchData(!0)})},AddonCalendarUpcomingEventsComponent.prototype.eventClicked=function(e){this.onEventClicked.emit(e.id)},AddonCalendarUpcomingEventsComponent.prototype.mergeEvents=function(){var e=this;if(!this.offlineEvents.length&&!this.deletedEvents.length)return this.onlineEvents;var n=Date.now()/1e3,t=n+i.a.SECONDS_DAY*this.lookAhead,o=this.onlineEvents;this.deletedEvents.length&&o.forEach(function(n){n.deleted=-1!=e.deletedEvents.indexOf(n.id)}),this.offlineEvents.length&&(o=o.filter(function(n){return!e.offlineEvents.find(function(e){return e.id==n.id})}));var r=this.offlineEvents.filter(function(e){return(e.timestart>=n||e.timestart+e.timeduration>=n)&&e.timestart<=t});return o=o.concat(r),this.sortEvents(o)},AddonCalendarUpcomingEventsComponent.prototype.sortEvents=function(e){return e.sort(function(e,n){return e.timestart==n.timestart?e.timeduration-n.timeduration:e.timestart-n.timestart})},AddonCalendarUpcomingEventsComponent.prototype.undeleteEvent=function(e){var n=this.onlineEvents.find(function(n){return n.id==e});n&&(n.deleted=!1)},AddonCalendarUpcomingEventsComponent.prototype.ngOnDestroy=function(){this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.obsDefaultTimeChange&&this.obsDefaultTimeChange.off()},AddonCalendarUpcomingEventsComponent}()},function(e,n,t){"use strict";function View_AddonForumDiscussionOptionsMenuComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.setLockState(!0)&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-lock"]],null,null,null,d.b,d.a)),o._15(8,704512,null,0,c.a,[o.p,s.a],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,p.a,[f.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-lock")},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_forum.lockdiscussion")))})}function View_AddonForumDiscussionOptionsMenuComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.setLockState(!1)&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-unlock"]],null,null,null,d.b,d.a)),o._15(8,704512,null,0,c.a,[o.p,s.a],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,p.a,[f.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-unlock")},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_forum.unlockdiscussion")))})}function View_AddonForumDiscussionOptionsMenuComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.setPinState(!0)&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,7,{contentLabel:0}),o._37(603979776,8,{_buttons:1}),o._37(603979776,9,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-map-pin"]],null,null,null,d.b,d.a)),o._15(8,704512,null,0,c.a,[o.p,s.a],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,p.a,[f.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-map-pin")},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_forum.pindiscussion")))})}function View_AddonForumDiscussionOptionsMenuComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.setPinState(!1)&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,10,{contentLabel:0}),o._37(603979776,11,{_buttons:1}),o._37(603979776,12,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-map-pin"]],null,null,null,d.b,d.a)),o._15(8,704512,null,0,c.a,[o.p,s.a],{name:[0,"name"],slash:[1,"slash"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,p.a,[f.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-map-pin",!0)},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_forum.unpindiscussion")))})}function View_AddonForumDiscussionOptionsMenuComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.toggleFavouriteState(!0)&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,13,{contentLabel:0}),o._37(603979776,14,{_buttons:1}),o._37(603979776,15,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-star"]],null,null,null,d.b,d.a)),o._15(8,704512,null,0,c.a,[o.p,s.a],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,p.a,[f.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-star")},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_forum.addtofavourites")))})}function View_AddonForumDiscussionOptionsMenuComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.toggleFavouriteState(!1)&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,16,{contentLabel:0}),o._37(603979776,17,{_buttons:1}),o._37(603979776,18,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,0,1,"core-icon",[["item-start",""],["name","fa-star"]],null,null,null,d.b,d.a)),o._15(8,704512,null,0,c.a,[o.p,s.a],{name:[0,"name"],slash:[1,"slash"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,p.a,[f.a,o.i]),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,8,0,"fa-star",!0)},function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_forum.removefromfavourites")))})}function View_AddonForumDiscussionOptionsMenuComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_AddonForumDiscussionOptionsMenuComponent_1)),o._15(1,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_AddonForumDiscussionOptionsMenuComponent_2)),o._15(4,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_AddonForumDiscussionOptionsMenuComponent_3)),o._15(7,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_AddonForumDiscussionOptionsMenuComponent_4)),o._15(10,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_AddonForumDiscussionOptionsMenuComponent_5)),o._15(13,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_AddonForumDiscussionOptionsMenuComponent_6)),o._15(16,16384,null,0,h.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,t.discussion.canlock&&!t.discussion.locked);e(n,4,0,t.discussion.canlock&&t.discussion.locked);e(n,7,0,t.canPin&&!t.discussion.pinned);e(n,10,0,t.canPin&&t.discussion.pinned);e(n,13,0,t.discussion.canfavourite&&!t.discussion.starred);e(n,16,0,t.discussion.canfavourite&&t.discussion.starred)},null)}t.d(n,"a",function(){return b});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(81),c=t(76),p=t(26),f=t(19),h=t(8),m=t(652),_=t(70),g=t(40),v=t(136),C=t(5),y=t(10),P=t(2),A=o._14({encapsulation:2,styles:[],data:{}}),b=o._12("addon-forum-discussion-options-menu",m.a,function View_AddonForumDiscussionOptionsMenuComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-forum-discussion-options-menu",[],null,null,null,View_AddonForumDiscussionOptionsMenuComponent_0,A)),o._15(1,114688,null,0,m.a,[_.a,g.a,v.a,C.a,y.a,P.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[])},function(e,n,t){"use strict";function View_AddonForumPostOptionsMenuComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.editPost()&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,0,null,0,1,"ion-icon",[["item-start",""],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(8,147456,[[3,4]],0,d.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,c.a,[p.a,o.i]),(e()(),o._40(-1,2,["\n    "]))],function(e,n){e(n,8,0,"create")},function(e,n){e(n,7,0,o._29(n,8)._hidden);e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_forum.edit")))})}function View_AddonForumPostOptionsMenuComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,c.a,[p.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_forum.delete")))})}function View_AddonForumPostOptionsMenuComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,c.a,[p.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.discard")))})}function View_AddonForumPostOptionsMenuComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.deletePost()&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,0,null,0,1,"ion-icon",[["item-start",""],["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(8,147456,[[6,4]],0,d.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_AddonForumPostOptionsMenuComponent_3)),o._15(11,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_AddonForumPostOptionsMenuComponent_4)),o._15(14,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,8,0,"trash");e(n,11,0,t.post.id);e(n,14,0,!t.post.id)},function(e,n){e(n,7,0,o._29(n,8)._hidden)})}function View_AddonForumPostOptionsMenuComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-item",[["class","item item-block"],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.dismiss()&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,7,{contentLabel:0}),o._37(603979776,8,{_buttons:1}),o._37(603979776,9,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._33(9,{$a:0}),o._32(131072,c.a,[p.a,o.i]),(e()(),o._40(-1,2,["\n    "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,10).transform("core.numwords",e(n,9,0,t.wordCount))))})}function View_AddonForumPostOptionsMenuComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"a",[["capture","false"],["class","item item-block"],["core-link",""],["ion-item",""],["text-wrap",""]],[[8,"href",4]],null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,10,{contentLabel:0}),o._37(603979776,11,{_buttons:1}),o._37(603979776,12,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),o._15(6,81920,null,0,h.a,[o.p,m.a,_.a,g.a,v.a,C.a,[2,y.a],[2,P.a],[2,A.a],b.a],{capture:[0,"capture"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(8,0,null,0,1,"ion-icon",[["item-start",""],["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(9,147456,[[12,4]],0,d.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(11,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),o._32(131072,c.a,[p.a,o.i]),(e()(),o._40(-1,2,["\n    "]))],function(e,n){e(n,6,0,"false");e(n,9,0,"open")},function(e,n){e(n,0,0,n.component.url);e(n,8,0,o._29(n,9)._hidden);e(n,12,0,o._41(n,12,0,o._29(n,13).transform("core.openinbrowser")))})}function View_AddonForumPostOptionsMenuComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"core-loading",[["class","core-loading-center"]],null,null,null,I.b,I.a)),o._15(1,638976,null,0,S.a,[p.a,o.p,E.a,_.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonForumPostOptionsMenuComponent_1)),o._15(4,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonForumPostOptionsMenuComponent_2)),o._15(7,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonForumPostOptionsMenuComponent_5)),o._15(10,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonForumPostOptionsMenuComponent_6)),o._15(13,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.loaded);e(n,4,0,t.canEdit);e(n,7,0,t.canDelete);e(n,10,0,t.wordCount);e(n,13,0,t.url)},null)}t.d(n,"a",function(){return D});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(49),c=t(26),p=t(19),f=t(8),h=t(175),m=t(5),_=t(3),g=t(2),v=t(23),C=t(16),y=t(21),P=t(30),A=t(29),b=t(12),I=t(55),S=t(52),E=t(10),M=t(653),w=t(70),k=t(40),T=t(136),O=o._14({encapsulation:2,styles:[],data:{}}),D=o._12("addon-forum-post-options-menu",M.a,function View_AddonForumPostOptionsMenuComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-forum-post-options-menu",[],null,null,null,View_AddonForumPostOptionsMenuComponent_0,O)),o._15(1,114688,null,0,M.a,[w.a,k.a,m.a,T.a,g.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[])},,function(e,n,t){"use strict";function View_CoreSitePluginsModuleIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,[[null,"onContentLoaded"],[null,"onLoadingContent"]],function(e,n,t){var o=!0,r=e.component;if("onContentLoaded"===n){o=!1!==r.contentLoaded(t)&&o}if("onLoadingContent"===n){o=!1!==r.contentLoading(t)&&o}return o},r.b,r.a)),o._15(1,376832,[[1,4]],0,i.a,[l.a,s.a,[2,a.a],o.w],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"],data:[4,"data"],pageTitle:[5,"pageTitle"]},{onContentLoaded:"onContentLoaded",onLoadingContent:"onLoadingContent"})],function(e,n){var t=n.component;e(n,1,0,t.component,t.method,t.args,t.initResult,t.jsData,t.pageTitle)},null)}function View_CoreSitePluginsModuleIndexComponent_0(e){return o._42(0,[o._37(671088640,1,{content:0}),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(2,0,null,null,27,"core-navbar-buttons",[["end",""]],null,null,null,u.b,u.a)),o._15(3,245760,null,1,d.a,[o.p,c.a,l.a],null,null),o._37(603979776,2,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(6,0,null,0,22,"core-context-menu",[],null,null,null,p.b,p.a)),o._15(7,245760,null,0,f.a,[h.a,m.a,o.p,l.a,[2,_.a],g.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(9,0,null,0,2,"core-context-menu-item",[],null,null,null,v.b,v.a)),o._15(10,770048,null,0,C.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"],hidden:[4,"hidden"]},null),o._32(131072,y.a,[h.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(13,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},v.b,v.a)),o._15(14,770048,null,0,C.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),o._32(131072,y.a,[h.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(17,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},v.b,v.a)),o._15(18,770048,null,0,C.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),o._32(131072,y.a,[h.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(21,0,null,0,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch()&&o}return o},v.b,v.a)),o._15(22,770048,null,0,C.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(24,0,null,0,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},v.b,v.a)),o._15(25,770048,null,0,C.a,[f.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),o._33(26,{$a:0}),o._32(131072,y.a,[h.a,o.i]),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreSitePluginsModuleIndexComponent_1)),o._15(32,16384,null,0,P.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0),e(n,7,0);e(n,10,0,o._41(n,10,0,o._29(n,11).transform("core.openinbrowser")),"open",t.externalUrl,900,!t.displayOpenInBrowser||!t.externalUrl||t.content&&t.content.compileComponent&&t.content.compileComponent.componentInstance&&!1===t.content.compileComponent.componentInstance.displayOpenInBrowser);e(n,14,0,o._41(n,14,0,o._29(n,15).transform("core.moduleintro")),"arrow-forward",800,!t.displayDescription||!t.description||t.content&&t.content.compileComponent&&t.content.compileComponent.componentInstance&&!1===t.content.compileComponent.componentInstance.displayDescription);e(n,18,0,o._41(n,18,0,o._29(n,19).transform("core.refresh")),t.refreshIcon,!1,700,!t.displayRefresh||t.content&&t.content.compileComponent&&t.content.compileComponent.componentInstance&&!1===t.content.compileComponent.componentInstance.displayRefresh);e(n,22,0,t.prefetchText,t.prefetchStatusIcon,!1,600,!t.displayPrefetch||!t.prefetchStatusIcon||t.content&&t.content.compileComponent&&t.content.compileComponent.componentInstance&&!1===t.content.compileComponent.componentInstance.displayPrefetch);e(n,25,0,o._41(n,25,0,o._29(n,27).transform("core.removefiles",e(n,26,0,t.size))),"cube","trash",500,!t.displaySize||!t.size||t.content&&t.content.compileComponent&&t.content.compileComponent.componentInstance&&!1===t.content.compileComponent.componentInstance.displaySize);e(n,32,0,t.component&&t.method)},null)}t.d(n,"b",function(){return M}),n.c=View_CoreSitePluginsModuleIndexComponent_0,t.d(n,"a",function(){return w});var o=t(1),r=t(407),i=t(157),l=t(5),s=t(59),a=t(21),u=t(97),d=t(88),c=t(7),p=t(92),f=t(79),h=t(19),m=t(71),_=t(77),g=t(3),v=t(93),C=t(84),y=t(26),P=t(8),A=t(392),b=t(39),I=t(51),S=t(12),E=t(62),M=o._14({encapsulation:2,styles:[],data:{}}),w=o._12("core-site-plugins-module-index",A.a,function View_CoreSitePluginsModuleIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-module-index",[],null,null,null,View_CoreSitePluginsModuleIndexComponent_0,M)),o._15(1,245760,null,0,A.a,[s.a,b.a,I.a,S.a,h.a,g.a,E.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",pageTitle:"pageTitle"},{},[])},function(e,n,t){"use strict";function View_CoreUserTagAreaComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"a",[["class","item item-block"],["core-user-link",""],["ion-item",""],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),o._15(6,81920,null,0,d.a,[o.p,[2,c.a],[2,p.a]],{userId:[0,"userId"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(8,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,f.b,f.a)),o._15(9,16384,null,0,h.a,[],null,null),o._15(10,770048,null,0,m.a,[c.a,_.a,g.a,v.a,C.a,[2,p.a]],{user:[0,"user"]},null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(12,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),o._40(13,null,["",""])),(e()(),o._40(-1,2,["\n"]))],function(e,n){e(n,6,0,n.context.$implicit.id);e(n,10,0,n.context.$implicit)},function(e,n){e(n,13,0,n.context.$implicit.fullname)})}function View_CoreUserTagAreaComponent_0(e){return o._42(0,[(e()(),o._11(16777216,null,null,1,null,View_CoreUserTagAreaComponent_1)),o._15(1,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.items)},null)}t.d(n,"a",function(){return b});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(479),c=t(21),p=t(29),f=t(214),h=t(161),m=t(183),_=t(2),g=t(3),v=t(11),C=t(10),y=t(8),P=t(614),A=o._14({encapsulation:2,styles:[],data:{}}),b=o._12("core-user-tag-area",P.a,function View_CoreUserTagAreaComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-user-tag-area",[],null,null,null,View_CoreUserTagAreaComponent_0,A)),o._15(1,49152,null,0,P.a,[],null,null)],null,null)},{items:"items"},{},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return i});t(0);var o=t(1),r=t(1040),i=function(){function CoreLongPressDirective(e){this.longPress=new o.r,this.el=e.nativeElement,this.el.setAttribute("tappable","")}return CoreLongPressDirective.prototype.ngOnInit=function(){var e=this;this.pressGesture=new r.a(this.el),this.pressGesture.listen(),this.pressGesture.on("press",function(n){e.longPress.emit(n)})},CoreLongPressDirective.prototype.ngOnDestroy=function(){this.pressGesture.destroy()},CoreLongPressDirective}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreDurationPipe(e,n){this.timeUtils=n,this.logger=e.getInstance("CoreBytesToSizePipe")}return CoreDurationPipe.prototype.transform=function(e){if("string"==typeof e){var n=parseInt(e,10);if(isNaN(n))return this.logger.error("Invalid value received",e),e;e=n}return this.timeUtils.formatTime(e)},CoreDurationPipe}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=function(){function CoreChronoComponent(e){this.cdr=e,this.startTime=0,this.time=0,this.onEnd=new o.r}return CoreChronoComponent.prototype.ngOnInit=function(){this.time=this.startTime||0},CoreChronoComponent.prototype.ngOnChanges=function(e){e&&e.running&&(e.running.currentValue?this.start():this.stop()),e&&e.reset&&e.reset.currentValue&&this.resetChrono()},CoreChronoComponent.prototype.resetChrono=function(){this.stop(),this.time=this.startTime||0},CoreChronoComponent.prototype.start=function(){var e=this;if(!this.interval){var n=Date.now();this.interval=setInterval(function(){e.time+=Date.now()-n,n=Date.now(),void 0!==e.endTime&&e.time>e.endTime&&(e.stop(),e.onEnd.emit()),e.cdr.detectChanges()},200)}},CoreChronoComponent.prototype.stop=function(){clearInterval(this.interval),delete this.interval},CoreChronoComponent.prototype.ngOnDestroy=function(){this.stop()},CoreChronoComponent}()},function(e,n,t){"use strict";t.d(n,"a",function(){return r});t(0);var o=t(1),r=(t(4),function(){function CoreSitePickerComponent(e,n,t){this.translate=e,this.sitesProvider=n,this.filterProvider=t,this.siteSelected=new o.r}return CoreSitePickerComponent.prototype.ngOnInit=function(){var e=this;this.selectedSite=this.initialSite||this.sitesProvider.getCurrentSiteId(),this.sitesProvider.getSites().then(function(n){var t=[];return n.forEach(function(n){t.push(e.filterProvider.formatText(n.siteName,{clean:!0,singleLine:!0,filter:!1},[],n.id).catch(function(){return n.siteName}).then(function(t){n.fullNameAndSiteName=e.translate.instant("core.fullnameandsitename",{fullname:n.fullName,sitename:t})}))}),!e.selectedSite&&n.length&&(e.selectedSite=n[0].id,e.siteSelected.emit(e.selectedSite)),Promise.all(t).then(function(){e.sites=n})})},CoreSitePickerComponent}())},function(e,n,t){"use strict";t.d(n,"a",function(){return l});var o=t(0),r=t(1),i=t(6),l=(t(734),function(e){function CoreIonTabComponent(n,t,o,r,i,l,s,a,u,d,c,p,f,h){return e.call(this,n,t,o,r,i,l,s,a,u,d,c,p,f,h)||this}return Object(o.__extends)(CoreIonTabComponent,e),CoreIonTabComponent.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.parent.add(this,!0)},CoreIonTabComponent.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.parent.remove(this)},CoreIonTabComponent.prototype.push=function(n,t,o,r){var i=this;if(this.isTransitioning())return new Promise(function(e,l){setTimeout(function(){return i.push(n,t,o,r).then(e,l)},250)});var l=this.getViews();if(l.length>0){var s=l[l.length-1],a=s.getNavParams().data;if(s.name===n&&JSON.stringify(a)===JSON.stringify(t))return Promise.resolve()}return e.prototype.push.call(this,n,t,o,r)},CoreIonTabComponent=Object(o.__decorate)([Object(o.__param)(11,Object(r.E)())],CoreIonTabComponent)}(i.k))},function(e,n,t){"use strict";function View_AddonBlogEntriesComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),o._15(8,16384,[[2,4]],0,d.a,[s.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._40(9,null,["",""])),o._32(131072,c.a,[p.a,o.i]),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(12,0,null,4,5,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"keyup"]],function(e,n,t){var r=!0,i=e.component;if("keyup"===n){r=!1!==o._29(e,13)._keyup(t)&&r}if("ngModelChange"===n){r=!1!==(i.onlyMyEntries=t)&&r}if("ionChange"===n){r=!1!==i.onlyMyEntriesToggleChanged(i.onlyMyEntries)&&r}return r},f.b,f.a)),o._15(13,1228800,null,0,h.a,[l.a,s.a,m.a,o.p,o.K,_.a,[2,i.a],g.l,v.a,o.D],null,{ionChange:"ionChange"}),o._35(1024,null,C.l,function(e){return[e]},[h.a]),o._15(15,671744,null,0,C.q,[[8,null],[8,null],[8,null],[2,C.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,C.m,null,[C.q]),o._15(17,16384,null,0,C.n,[C.m],null,null),(e()(),o._40(-1,2,["\n        "]))],function(e,n){e(n,15,0,n.component.onlyMyEntries)},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.blog.showonlyyourentries")));e(n,12,0,o._29(n,13)._disabled,o._29(n,13)._value,o._29(n,13)._activated,o._29(n,17).ngClassUntouched,o._29(n,17).ngClassTouched,o._29(n,17).ngClassPristine,o._29(n,17).ngClassDirty,o._29(n,17).ngClassValid,o._29(n,17).ngClassInvalid,o._29(n,17).ngClassPending)})}function View_AddonBlogEntriesComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-empty-box",[["icon","fa-newspaper-o"]],null,null,null,y.b,y.a)),o._15(1,49152,null,0,P.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,c.a,[p.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.blog.noentriesyet")),"fa-newspaper-o")},null)}function View_AddonBlogEntriesComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,11,{contentLabel:0}),o._37(603979776,12,{_buttons:1}),o._37(603979776,13,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(7,0,null,0,2,"div",[["item-start",""]],null,null,null,null,null)),(e()(),o._40(8,null,["",":"])),o._32(131072,c.a,[p.a,o.i]),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(11,0,null,2,1,"core-tag-list",[],null,null,null,A.b,A.a)),o._15(12,49152,null,0,b.a,[I.a,[2,S.a]],{tags:[0,"tags"]},null),(e()(),o._40(-1,2,["\n                    "]))],function(e,n){e(n,12,0,n.parent.parent.context.$implicit.tags)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("core.tag.tags")))})}function View_AddonBlogEntriesComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,14,{contentLabel:0}),o._37(603979776,15,{_buttons:1}),o._37(603979776,16,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(7,0,null,2,1,"core-comments",[["area","format_blog"],["contextLevel","user"]],null,null,null,E.c,E.b)),o._15(8,770048,null,0,M.a,[I.a,w.a,k.a,T.a,[2,S.a]],{contextLevel:[0,"contextLevel"],instanceId:[1,"instanceId"],component:[2,"component"],itemId:[3,"itemId"],area:[4,"area"]},null),(e()(),o._40(-1,2,["\n                    "]))],function(e,n){e(n,8,0,"user",n.parent.parent.context.$implicit.userid,n.component.component,n.parent.parent.context.$implicit.id,"format_blog")},null)}function View_AddonBlogEntriesComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-file",[],null,null,null,O.b,O.a)),o._15(1,245760,null,0,D.a,[k.a,x.a,F.a,L.a,U.a,R.a,H.a,T.a,N.a,B.a,V.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){e(n,1,0,n.context.$implicit,n.component.component,n.parent.parent.context.$implicit.id)},null)}function View_AddonBlogEntriesComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"a",[["class","item item-block"],["core-link",""],["ion-item",""]],[[8,"href",4]],null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,17,{contentLabel:0}),o._37(603979776,18,{_buttons:1}),o._37(603979776,19,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),o._15(6,81920,null,0,W.a,[o.p,F.a,x.a,k.a,V.a,K.a,[2,I.a],[2,q.a],[2,S.a],N.a],null,null),(e()(),o._40(7,2,["",""])),o._32(131072,c.a,[p.a,o.i])],function(e,n){e(n,6,0)},function(e,n){e(n,0,0,n.parent.parent.context.$implicit.uniquehash);e(n,7,0,o._41(n,7,0,o._29(n,8).transform("addon.blog.linktooriginalentry")))})}function View_AddonBlogEntriesComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(1,16384,null,0,G.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(3,0,null,null,6,"ion-note",[],null,null,null,null,null)),o._15(4,16384,null,0,j.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(6,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(7,147456,null,0,Q.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(8,null,[" ","\n                        "])),o._34(9,1),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,7,0,"time")},function(e,n){e(n,6,0,o._29(n,7)._hidden);e(n,8,0,o._41(n,8,0,e(n,9,0,o._29(n.parent.parent.parent,1),n.parent.parent.context.$implicit.lastmodified)))})}function View_AddonBlogEntriesComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,67,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,z.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,29,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(4,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,5,{contentLabel:0}),o._37(603979776,6,{_buttons:1}),o._37(603979776,7,{_icons:1}),o._15(8,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,$.b,$.a)),o._15(11,16384,null,0,Y.a,[],null,null),o._15(12,770048,null,0,X.a,[I.a,k.a,x.a,U.a,T.a,[2,S.a]],{user:[0,"user"],courseId:[1,"courseId"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(14,0,null,2,9,"h2",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(16,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),o._15(17,540672,null,0,J.a,[o.p,k.a,F.a,N.a,p.a,m.a,x.a,V.a,Z.a,L.a,U.a,K.a,[2,I.a],[2,q.a],[2,S.a],ee.a,T.a,ne.a,te.a,oe.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(19,0,null,null,3,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],null,null,null,null,null)),o._15(20,16384,null,0,j.a,[s.a,o.p,o.K],null,null),(e()(),o._40(21,null,["\n                            ","\n                        "])),o._32(131072,c.a,[p.a,o.i]),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(25,0,null,2,6,"p",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(27,0,null,null,3,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],null,null,null,null,null)),o._15(28,16384,null,0,j.a,[s.a,o.p,o.K],null,null),(e()(),o._40(29,null,["\n                            ","\n                        "])),o._34(30,1),(e()(),o._40(31,null,["\n                        ","\n                    "])),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(34,0,null,null,25,"ion-card-content",[],null,null,null,null,null)),o._15(35,16384,null,0,re.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(37,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,r.b,r.a)),o._15(38,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,8,{contentLabel:0}),o._37(603979776,9,{_buttons:1}),o._37(603979776,10,{_icons:1}),o._15(42,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(44,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),o._15(45,540672,null,0,J.a,[o.p,k.a,F.a,N.a,p.a,m.a,x.a,V.a,Z.a,L.a,U.a,K.a,[2,I.a],[2,q.a],[2,S.a],ee.a,T.a,ne.a,te.a,oe.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonBlogEntriesComponent_5)),o._15(49,16384,null,0,ie.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonBlogEntriesComponent_6)),o._15(52,16384,null,0,ie.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonBlogEntriesComponent_7)),o._15(55,802816,null,0,ie.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonBlogEntriesComponent_8)),o._15(58,16384,null,0,ie.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(61,0,null,null,5,"ion-row",[["class","row"],["text-center",""]],null,null,null,null,null)),o._15(62,16384,null,0,le.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonBlogEntriesComponent_9)),o._15(65,16384,null,0,ie.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,12,0,n.parent.context.$implicit.user,n.parent.context.$implicit.courseid);e(n,17,0,n.parent.context.$implicit.subject,t.contextLevel,t.contextInstanceId);e(n,45,0,n.parent.context.$implicit.summary,t.component,n.parent.context.$implicit.id,t.contextLevel,t.contextInstanceId);e(n,49,0,t.tagsEnabled&&n.parent.context.$implicit.tags&&n.parent.context.$implicit.tags.length>0);e(n,52,0,t.commentsEnabled);e(n,55,0,n.parent.context.$implicit.attachmentfiles);e(n,58,0,n.parent.context.$implicit.uniquehash);e(n,65,0,n.parent.context.$implicit.lastmodified>n.parent.context.$implicit.created)},function(e,n){e(n,21,0,o._41(n,21,0,o._29(n,22).transform("addon.blog."+n.parent.context.$implicit.publishTranslated)));e(n,29,0,o._41(n,29,0,e(n,30,0,o._29(n.parent.parent,0),n.parent.context.$implicit.created)));e(n,31,0,n.parent.context.$implicit.user&&n.parent.context.$implicit.user.fullname)})}function View_AddonBlogEntriesComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonBlogEntriesComponent_4)),o._15(3,16384,null,0,ie.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,!t.onlyMyEntries||n.context.$implicit.userid==t.currentUserId)},null)}function View_AddonBlogEntriesComponent_0(e){return o._42(0,[o._32(0,se.a,[Z.a,p.a,ae.a]),o._32(0,ue.a,[Z.a,p.a]),o._37(402653184,1,{content:0}),(e()(),o._16(3,0,null,null,26,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,de.b,de.a)),o._15(4,4374528,[[1,4]],0,q.a,[s.a,m.a,v.a,o.p,o.K,ce.a,pe.a,o.D,[2,fe.a],[2,I.a]],null,null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(6,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var o=!0;if("ionRefresh"===n){o=!1!==e.component.refresh(t)&&o}return o},null,null)),o._15(7,212992,null,0,he.a,[m.a,q.a,o.D,g.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(9,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,me.b,me.a)),o._15(10,114688,null,0,_e.a,[he.a,s.a],{pullingText:[0,"pullingText"]},null),o._32(131072,c.a,[p.a,o.i]),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(14,0,null,1,14,"core-loading",[["class","core-loading-center"]],null,null,null,ge.b,ge.a)),o._15(15,638976,null,0,ve.a,[p.a,o.p,T.a,x.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonBlogEntriesComponent_1)),o._15(18,16384,null,0,ie.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonBlogEntriesComponent_2)),o._15(21,16384,null,0,ie.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonBlogEntriesComponent_3)),o._15(24,802816,null,0,ie.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(26,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.loadMore(t)&&o}return o},Ce.b,Ce.a)),o._15(27,573440,null,0,ye.a,[[2,q.a],F.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,1,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,7,0,t.loaded);e(n,10,0,o._19(1,"",o._41(n,10,0,o._29(n,11).transform("core.pulltorefresh")),""));e(n,15,0,t.loaded);e(n,18,0,t.showMyEntriesToggle);e(n,21,0,t.entries&&0==t.entries.length);e(n,24,0,t.entries);e(n,27,0,t.canLoadMore,t.loadMoreError)},function(e,n){e(n,3,0,o._29(n,4).statusbarPadding,o._29(n,4)._hasRefresher);e(n,6,0,"inactive"!==o._29(n,7).state,o._29(n,7)._top);e(n,9,0,o._29(n,10).r.state)})}t.d(n,"b",function(){return Se}),n.c=View_AddonBlogEntriesComponent_0,t.d(n,"a",function(){return Ee});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(68),c=t(26),p=t(19),f=t(726),h=t(316),m=t(17),_=t(188),g=t(45),v=t(35),C=t(24),y=t(125),P=t(115),A=t(494),b=t(325),I=t(21),S=t(29),E=t(480),M=t(322),w=t(154),k=t(2),T=t(10),O=t(249),D=t(215),x=t(3),F=t(5),L=t(18),U=t(11),R=t(116),H=t(67),N=t(12),B=t(57),V=t(23),W=t(175),K=t(16),q=t(30),G=t(120),j=t(248),Q=t(49),z=t(90),$=t(214),Y=t(161),X=t(183),J=t(48),Z=t(7),ee=t(43),ne=t(41),te=t(31),oe=t(37),re=t(485),ie=t(8),le=t(121),se=t(377),ae=t(25),ue=t(443),de=t(182),ce=t(36),pe=t(108),fe=t(40),he=t(160),me=t(213),_e=t(174),ge=t(55),ve=t(52),Ce=t(373),ye=t(273),Pe=t(523),Ae=t(208),be=t(46),Ie=t(164),Se=o._14({encapsulation:2,styles:[],data:{}}),Ee=o._12("addon-blog-entries",Pe.a,function View_AddonBlogEntriesComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-blog-entries",[],null,null,null,View_AddonBlogEntriesComponent_0,Se)),o._15(1,114688,null,0,Pe.a,[Ae.a,F.a,be.a,k.a,x.a,w.a,Ie.a],null,null)],function(e,n){e(n,1,0)},null)},{userId:"userId",courseId:"courseId",cmId:"cmId",entryId:"entryId",groupId:"groupId",tagId:"tagId"},{},[])},function(e,n,t){"use strict";function View_AddonCompetencyCourseComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(6,2,["\n                    ","\n                "])),o._32(131072,d.a,[c.a,o.i])],null,function(e,n){e(n,6,0,o._41(n,6,0,o._29(n,7).transform("addon.competency.coursecompetencyratingsarepushedtouserplans")))})}function View_AddonCompetencyCourseComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"ion-item",[["class","item item-block"],["color","danger"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],{color:[0,"color"]},null),o._37(335544320,5,{contentLabel:0}),o._37(603979776,6,{_buttons:1}),o._37(603979776,7,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(6,2,["\n                    ","\n                "])),o._32(131072,d.a,[c.a,o.i])],function(e,n){e(n,1,0,"danger")},function(e,n){e(n,6,0,o._41(n,6,0,o._29(n,7).transform("addon.competency.coursecompetencyratingsarenotpushedtouserplans")))})}function View_AddonCompetencyCourseComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_3)),o._15(3,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_4)),o._15(6,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,3,0,t.competencies.settings.pushratingstouserplans);e(n,6,0,!t.competencies.settings.pushratingstouserplans)},null)}function View_AddonCompetencyCourseComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,8,{contentLabel:0}),o._37(603979776,9,{_buttons:1}),o._37(603979776,10,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(6,2,["\n                ","\n                "])),o._33(7,{x:0,y:1}),o._33(8,{$a:0}),o._32(131072,d.a,[c.a,o.i]),(e()(),o._16(10,0,null,2,1,"core-progress-bar",[],null,null,null,f.b,f.a)),o._15(11,573440,null,0,h.a,[m.c],{progress:[0,"progress"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,11,0,n.component.competencies.statistics.proficientcompetencypercentage)},function(e,n){var t=n.component;e(n,6,0,o._41(n,6,0,o._29(n,9).transform("addon.competency.xcompetenciesproficientoutofyincourse",e(n,8,0,e(n,7,0,t.competencies.statistics.proficientcompetencycount,t.competencies.statistics.competencycount)))))})}function View_AddonCompetencyCourseComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(2,0,null,null,1,"a",[],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openCompetencySummary(e.context.$implicit.id)&&o}return o},null,null)),(e()(),o._40(3,null,["\n                        "," - ","\n                    "])),(e()(),o._40(-1,null,["\n                "]))],null,function(e,n){e(n,3,0,n.context.$implicit.shortname,n.context.$implicit.idnumber)})}function View_AddonCompetencyCourseComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,11,{contentLabel:0}),o._37(603979776,12,{_buttons:1}),o._37(603979776,13,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"strong",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,d.a,[c.a,o.i]),(e()(),o._40(-1,2,[":\n                "])),(e()(),o._11(16777216,null,2,1,null,View_AddonCompetencyCourseComponent_7)),o._15(12,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,12,0,n.component.competencies.statistics.leastproficient)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.competency.competenciesmostoftennotproficientincourse")))})}function View_AddonCompetencyCourseComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,_.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_2)),o._15(4,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_5)),o._15(7,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_6)),o._15(10,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,4,0,t.competencies.cangradecompetencies);e(n,7,0,t.competencies.statistics.canbegradedincourse);e(n,10,0,t.competencies.statistics.canmanagecoursecompetencies&&t.competencies.statistics.leastproficientcount>0)},null)}function View_AddonCompetencyCourseComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"h3",[["margin-horizontal",""]],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,d.a,[c.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.competency.coursecompetencies")))})}function View_AddonCompetencyCourseComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,_.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n             "])),(e()(),o._16(3,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(4,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,14,{contentLabel:0}),o._37(603979776,15,{_buttons:1}),o._37(603979776,16,{_icons:1}),o._15(8,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,g.b,g.a)),o._15(11,16384,null,0,v.a,[],null,null),o._15(12,770048,null,0,C.a,[y.a,P.a,A.a,b.a,I.a,[2,S.a]],{user:[0,"user"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(14,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),o._40(15,null,["",""])),(e()(),o._40(-1,2,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,12,0,n.component.user)},function(e,n){e(n,15,0,n.component.user.fullname)})}function View_AddonCompetencyCourseComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-empty-box",[["icon","ribbon"]],null,null,null,E.b,E.a)),o._15(1,49152,null,0,M.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,d.a,[c.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.competency.nocompetenciesincourse")),""),"ribbon")},null)}function View_AddonCompetencyCourseComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),o._15(1,16384,null,0,w.a,[s.a,o.p,o.K],{color:[0,"color"]},null),(e()(),o._40(2,null,["",""]))],function(e,n){e(n,1,0,n.parent.context.$implicit.usercompetencycourse.proficiency?"success":"danger")},function(e,n){e(n,2,0,n.parent.context.$implicit.usercompetencycourse.gradename)})}function View_AddonCompetencyCourseComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(2,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),o._15(3,540672,null,0,k.a,[o.p,P.a,T.a,O.a,c.a,D.a,A.a,x.a,F.a,L.a,b.a,U.a,[2,y.a],[2,R.a],[2,S.a],H.a,I.a,N.a,B.a,V.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,3,0,n.parent.context.$implicit.competency.description,"course",n.component.courseId)},null)}function View_AddonCompetencyCourseComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"a",[["core-link",""]],[[8,"href",4],[8,"title",0]],null,null,null,null)),o._15(1,81920,null,0,W.a,[o.p,T.a,A.a,P.a,x.a,U.a,[2,y.a],[2,R.a],[2,S.a],O.a],null,null),(e()(),o._40(2,null,["",""]))],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,n.parent.context.$implicit.comppath.pluginbaseurl+"/competencies.php?competencyframeworkid="+n.parent.context.$implicit.comppath.framework.id+"&pagecontextid="+n.parent.context.$implicit.comppath.pagecontextid,n.parent.context.$implicit.comppath.framework.name);e(n,2,0,n.parent.context.$implicit.comppath.framework.name)})}function View_AddonCompetencyCourseComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.comppath.framework.name)})}function View_AddonCompetencyCourseComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"a",[],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openCompetencySummary(e.parent.context.$implicit.id)&&o}return o},null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.name)})}function View_AddonCompetencyCourseComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.name)})}function View_AddonCompetencyCourseComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,[" / "]))],null,null)}function View_AddonCompetencyCourseComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"span",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_18)),o._15(3,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_19)),o._15(6,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_20)),o._15(9,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "]))],function(e,n){e(n,3,0,n.parent.context.$implicit.comppath.showlinks);e(n,6,0,!n.parent.context.$implicit.comppath.showlinks);e(n,9,0,!n.context.$implicit.last)},null)}function View_AddonCompetencyCourseComponent_23(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.text)})}function View_AddonCompetencyCourseComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_23)),o._15(3,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "]))],function(e,n){e(n,3,0,n.context.$implicit.selected)},null)}function View_AddonCompetencyCourseComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(2,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(3,null,["",""])),o._32(131072,d.a,[c.a,o.i]),(e()(),o._40(-1,null,["\n                         "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_22)),o._15(7,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,7,0,n.parent.context.$implicit.ruleoutcomeoptions)},function(e,n){e(n,3,0,o._41(n,3,0,o._29(n,4).transform("addon.competency.uponcoursecompletion")))})}function View_AddonCompetencyCourseComponent_24(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["\n                            ","\n                        "])),o._32(131072,d.a,[c.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.competency.noactivities")))})}function View_AddonCompetencyCourseComponent_26(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"img",[["alt",""],["class","core-module-icon"],["core-external-content",""],["item-start",""],["role","presentation"]],null,null,null,null,null)),o._15(1,4734976,null,0,K.a,[o.p,F.a,L.a,D.a,P.a,T.a,x.a,b.a,A.a],{src:[0,"src"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit.iconurl)},null)}function View_AddonCompetencyCourseComponent_25(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"a",[["capture","true"],["class","core-course-module-handler item-media item item-block"],["core-link",""],["ion-item",""],["text-wrap",""]],[[8,"href",4],[8,"title",0]],null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,23,{contentLabel:0}),o._37(603979776,24,{_buttons:1}),o._37(603979776,25,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),o._15(6,81920,null,0,W.a,[o.p,T.a,A.a,P.a,x.a,U.a,[2,y.a],[2,R.a],[2,S.a],O.a],{capture:[0,"capture"]},null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._11(16777216,null,0,1,null,View_AddonCompetencyCourseComponent_26)),o._15(9,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(11,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(12,540672,null,0,k.a,[o.p,P.a,T.a,O.a,c.a,D.a,A.a,x.a,F.a,L.a,b.a,U.a,[2,y.a],[2,R.a],[2,S.a],H.a,I.a,N.a,B.a,V.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,2,["\n                        "]))],function(e,n){var t=n.component;e(n,6,0,"true");e(n,9,0,n.context.$implicit.iconurl);e(n,12,0,n.context.$implicit.name,"module",n.context.$implicit.id,t.courseId)},function(e,n){e(n,0,0,n.context.$implicit.url,n.context.$implicit.name)})}function View_AddonCompetencyCourseComponent_28(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["\n                            ","\n                        "])),o._32(131072,d.a,[c.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.competency.nouserplanswithcompetency")))})}function View_AddonCompetencyCourseComponent_29(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"a",[["capture","true"],["class","item item-block"],["core-link",""],["ion-item",""],["text-wrap",""]],[[8,"href",4],[8,"title",0]],null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,26,{contentLabel:0}),o._37(603979776,27,{_buttons:1}),o._37(603979776,28,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),o._15(6,81920,null,0,W.a,[o.p,T.a,A.a,P.a,x.a,U.a,[2,y.a],[2,R.a],[2,S.a],O.a],{capture:[0,"capture"]},null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(8,16777216,null,2,1,"core-format-text",[["contextLevel","user"]],null,null,null,null,null)),o._15(9,540672,null,0,k.a,[o.p,P.a,T.a,O.a,c.a,D.a,A.a,x.a,F.a,L.a,b.a,U.a,[2,y.a],[2,R.a],[2,S.a],H.a,I.a,N.a,B.a,V.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),o._40(-1,2,["\n                        "]))],function(e,n){e(n,6,0,"true");e(n,9,0,n.context.$implicit.name,"user",n.context.$implicit.userid)},function(e,n){e(n,0,0,n.context.$implicit.url,n.context.$implicit.name)})}function View_AddonCompetencyCourseComponent_27(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(2,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(3,null,["",""])),o._32(131072,d.a,[c.a,o.i]),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_28)),o._15(7,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_29)),o._15(10,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,7,0,0==n.parent.context.$implicit.plans.length);e(n,10,0,n.parent.context.$implicit.plans)},function(e,n){e(n,3,0,o._41(n,3,0,o._29(n,4).transform("addon.competency.userplans")))})}function View_AddonCompetencyCourseComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,65,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,_.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,15,"ion-item",[["class","item item-block"],["detail-push",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openCompetency(e.context.$implicit.competency.id)&&o}return o},r.b,r.a)),o._15(4,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,17,{contentLabel:0}),o._37(603979776,18,{_buttons:1}),o._37(603979776,19,{_icons:1}),o._15(8,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(10,0,null,2,4,"h2",[],null,null,null,null,null)),(e()(),o._16(11,0,null,null,3,"strong",[],null,null,null,null,null)),(e()(),o._40(12,null,[""," "])),(e()(),o._16(13,0,null,null,1,"em",[],null,null,null,null,null)),(e()(),o._40(14,null,["",""])),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,4,1,null,View_AddonCompetencyCourseComponent_13)),o._15(17,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(20,0,null,null,44,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(21,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,20,{contentLabel:0}),o._37(603979776,21,{_buttons:1}),o._37(603979776,22,{_icons:1}),o._15(25,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonCompetencyCourseComponent_14)),o._15(28,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(30,0,null,2,14,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(32,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(33,null,["",""])),o._32(131072,d.a,[c.a,o.i]),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_15)),o._15(37,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_16)),o._15(40,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                         / \n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_17)),o._15(43,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonCompetencyCourseComponent_21)),o._15(47,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(49,0,null,2,11,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(51,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(52,null,["",""])),o._32(131072,d.a,[c.a,o.i]),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_24)),o._15(56,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_25)),o._15(59,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonCompetencyCourseComponent_27)),o._15(63,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,17,0,n.context.$implicit.usercompetencycourse&&n.context.$implicit.usercompetencycourse.gradename);e(n,28,0,n.context.$implicit.competency.description);e(n,37,0,n.context.$implicit.comppath.showlinks);e(n,40,0,!n.context.$implicit.comppath.showlinks);e(n,43,0,n.context.$implicit.comppath.ancestors);e(n,47,0,t.competencies.statistics.canmanagecoursecompetencies);e(n,56,0,0==n.context.$implicit.coursemodules.length);e(n,59,0,n.context.$implicit.coursemodules);e(n,63,0,n.context.$implicit.plans)},function(e,n){e(n,3,0,n.context.$implicit.competency.shortname);e(n,12,0,n.context.$implicit.competency.shortname);e(n,14,0,n.context.$implicit.competency.idnumber);e(n,33,0,o._41(n,33,0,o._29(n,34).transform("addon.competency.path")));e(n,52,0,o._41(n,52,0,o._29(n,53).transform("addon.competency.activities")))})}function View_AddonCompetencyCourseComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCompetencyCourseComponent_12)),o._15(3,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,n.component.competencies.competencies)},null)}function View_AddonCompetencyCourseComponent_0(e){return o._42(0,[o._37(402653184,1,{content:0}),(e()(),o._16(1,0,null,null,29,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,q.b,q.a)),o._15(2,4374528,[[1,4]],0,R.a,[s.a,D.a,G.a,o.p,o.K,j.a,Q.a,o.D,[2,z.a],[2,y.a]],null,null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var o=!0;if("ionRefresh"===n){o=!1!==e.component.refreshCourseCompetencies(t)&&o}return o},null,null)),o._15(5,212992,null,0,$.a,[D.a,R.a,o.D,Y.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,X.b,X.a)),o._15(8,114688,null,0,J.a,[$.a,s.a],{pullingText:[0,"pullingText"]},null),o._32(131072,d.a,[c.a,o.i]),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(12,0,null,1,17,"core-loading",[],null,null,null,Z.b,Z.a)),o._15(13,638976,null,0,ee.a,[c.a,o.p,I.a,A.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonCompetencyCourseComponent_1)),o._15(16,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonCompetencyCourseComponent_8)),o._15(19,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonCompetencyCourseComponent_9)),o._15(22,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonCompetencyCourseComponent_10)),o._15(25,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonCompetencyCourseComponent_11)),o._15(28,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,1,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.competenciesLoaded);e(n,8,0,o._19(1,"",o._41(n,8,0,o._29(n,9).transform("core.pulltorefresh")),""));e(n,13,0,t.competenciesLoaded);e(n,16,0,!t.user&&t.competencies&&t.competencies.statistics.competencycount>0);e(n,19,0,t.competencies&&t.competencies.statistics.competencycount>0);e(n,22,0,t.user);e(n,25,0,t.competencies&&0==t.competencies.statistics.competencycount);e(n,28,0,t.competencies)},function(e,n){e(n,1,0,o._29(n,2).statusbarPadding,o._29(n,2)._hasRefresher);e(n,4,0,"inactive"!==o._29(n,5).state,o._29(n,5)._top);e(n,7,0,o._29(n,8).r.state)})}t.d(n,"b",function(){return re}),n.c=View_AddonCompetencyCourseComponent_0,t.d(n,"a",function(){return ie});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(26),c=t(19),p=t(8),f=t(486),h=t(320),m=t(80),_=t(90),g=t(214),v=t(161),C=t(183),y=t(21),P=t(2),A=t(3),b=t(11),I=t(10),S=t(29),E=t(125),M=t(115),w=t(144),k=t(48),T=t(5),O=t(12),D=t(17),x=t(23),F=t(7),L=t(18),U=t(16),R=t(30),H=t(43),N=t(41),B=t(31),V=t(37),W=t(175),K=t(229),q=t(182),G=t(35),j=t(36),Q=t(108),z=t(40),$=t(160),Y=t(45),X=t(213),J=t(174),Z=t(55),ee=t(52),ne=t(525),te=t(166),oe=t(375),re=o._14({encapsulation:2,styles:[],data:{}}),ie=o._12("addon-competency-course",ne.a,function View_AddonCompetencyCourseComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-competency-course",[],null,null,null,View_AddonCompetencyCourseComponent_0,re)),o._15(1,114688,null,0,ne.a,[y.a,b.a,T.a,te.a,oe.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",userId:"userId"},{},[])},function(e,n,t){"use strict";function View_AddonCourseCompletionReportComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.coursecompletion.criteriarequiredall")))})}function View_AddonCourseCompletionReportComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.coursecompletion.criteriarequiredany")))})}function View_AddonCourseCompletionReportComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,36,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,l.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,a.b,a.a)),o._15(4,1097728,null,3,u.a,[d.a,s.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(8,16384,null,0,p.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(14,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(15,null,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,2,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(19,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,a.b,a.a)),o._15(20,1097728,null,3,u.a,[d.a,s.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(24,16384,null,0,p.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(26,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(27,null,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,2,1,null,View_AddonCourseCompletionReportComponent_2)),o._15(31,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,2,1,null,View_AddonCourseCompletionReportComponent_3)),o._15(34,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,31,0,1===t.completion.aggregation);e(n,34,0,2===t.completion.aggregation)},function(e,n){var t=n.component;e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.coursecompletion.status")));e(n,15,0,o._41(n,15,0,o._29(n,16).transform(t.statusText)));e(n,27,0,o._41(n,27,0,o._29(n,28).transform("addon.coursecompletion.required")))})}function View_AddonCourseCompletionReportComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"ion-item",[["class","hidden-tablet item item-block"],["text-wrap",""]],null,null,null,a.b,a.a)),o._15(1,1097728,null,3,u.a,[d.a,s.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,10,{contentLabel:0}),o._37(603979776,11,{_buttons:1}),o._37(603979776,12,{_icons:1}),o._15(5,16384,null,0,p.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._16(8,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),o._15(9,540672,null,0,h.a,[o.p,m.a,_.a,g.a,i.a,v.a,C.a,y.a,P.a,A.a,b.a,I.a,[2,S.a],[2,E.a],[2,M.a],w.a,k.a,T.a,O.a,D.a,o.W],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._16(12,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),o._15(13,540672,null,0,h.a,[o.p,m.a,_.a,g.a,i.a,v.a,C.a,y.a,P.a,A.a,b.a,I.a,[2,S.a],[2,E.a],[2,M.a],w.a,k.a,T.a,O.a,D.a,o.W],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(15,0,null,4,1,"strong",[["item-end",""]],null,null,null,null,null)),(e()(),o._40(16,null,["",""])),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,9,0,n.context.$implicit.details.criteria,"true",!1);e(n,13,0,n.context.$implicit.details.requirement,"true",!1)},function(e,n){e(n,16,0,n.context.$implicit.status)})}function View_AddonCourseCompletionReportComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(1,16384,null,0,x.a,[],null,null),(e()(),o._40(2,null,["",""])),o._34(3,2)],null,function(e,n){e(n,2,0,o._41(n,2,0,e(n,3,0,o._29(n.parent.parent.parent,0),1e3*n.parent.context.$implicit.timecompleted,"strftimedatetimeshort")))})}function View_AddonCourseCompletionReportComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(1,16384,null,0,x.a,[],null,null)],null,null)}function View_AddonCourseCompletionReportComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,32,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(1,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(3,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(4,16384,null,0,x.a,[],null,null),(e()(),o._16(5,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),o._15(6,540672,null,0,h.a,[o.p,m.a,_.a,g.a,i.a,v.a,C.a,y.a,P.a,A.a,b.a,I.a,[2,S.a],[2,E.a],[2,M.a],w.a,k.a,T.a,O.a,D.a,o.W],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(8,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(9,16384,null,0,x.a,[],null,null),(e()(),o._16(10,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),o._15(11,540672,null,0,h.a,[o.p,m.a,_.a,g.a,i.a,v.a,C.a,y.a,P.a,A.a,b.a,I.a,[2,S.a],[2,E.a],[2,M.a],w.a,k.a,T.a,O.a,D.a,o.W],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(13,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(14,16384,null,0,x.a,[],null,null),(e()(),o._16(15,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),o._15(16,540672,null,0,h.a,[o.p,m.a,_.a,g.a,i.a,v.a,C.a,y.a,P.a,A.a,b.a,I.a,[2,S.a],[2,E.a],[2,M.a],w.a,k.a,T.a,O.a,D.a,o.W],{text:[0,"text"],clean:[1,"clean"],filter:[2,"filter"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(18,0,null,null,3,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(19,16384,null,0,x.a,[],null,null),(e()(),o._16(20,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),o._15(21,540672,null,0,h.a,[o.p,m.a,_.a,g.a,i.a,v.a,C.a,y.a,P.a,A.a,b.a,I.a,[2,S.a],[2,E.a],[2,M.a],w.a,k.a,T.a,O.a,D.a,o.W],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(23,0,null,null,2,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(24,16384,null,0,x.a,[],null,null),(e()(),o._40(25,null,["",""])),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCourseCompletionReportComponent_7)),o._15(28,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCourseCompletionReportComponent_8)),o._15(31,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "]))],function(e,n){e(n,6,0,n.context.$implicit.title,"true",!1);e(n,11,0,n.context.$implicit.details.criteria,"true",!1);e(n,16,0,n.context.$implicit.details.requirement,"true",!1);e(n,21,0,n.context.$implicit.details.status,!1);e(n,28,0,n.context.$implicit.timecompleted);e(n,31,0,!n.context.$implicit.timecompleted)},function(e,n){e(n,25,0,n.context.$implicit.status)})}function View_AddonCourseCompletionReportComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,65,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,l.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,7,"ion-item-divider",[["class","item item-divider"]],null,null,null,a.b,a.a)),o._15(4,1097728,null,3,u.a,[d.a,s.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,7,{contentLabel:0}),o._37(603979776,8,{_buttons:1}),o._37(603979776,9,{_icons:1}),o._15(8,16384,null,0,L.a,[s.a,o.p,o.K],null,null),(e()(),o._40(9,2,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCourseCompletionReportComponent_5)),o._15(13,802816,null,0,f.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(15,0,null,null,49,"ion-item",[["class","hidden-phone item item-block"],["text-wrap",""]],null,null,null,a.b,a.a)),o._15(16,1097728,null,3,u.a,[d.a,s.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,13,{contentLabel:0}),o._37(603979776,14,{_buttons:1}),o._37(603979776,15,{_icons:1}),o._15(20,16384,null,0,p.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(22,0,null,2,38,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(23,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(25,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(26,16384,null,0,x.a,[],null,null),(e()(),o._16(27,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(28,null,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(31,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(32,16384,null,0,x.a,[],null,null),(e()(),o._16(33,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(34,null,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(37,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(38,16384,null,0,x.a,[],null,null),(e()(),o._16(39,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(40,null,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(43,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(44,16384,null,0,x.a,[],null,null),(e()(),o._16(45,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(46,null,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(49,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(50,16384,null,0,x.a,[],null,null),(e()(),o._16(51,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(52,null,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(55,0,null,null,4,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(56,16384,null,0,x.a,[],null,null),(e()(),o._16(57,0,null,null,2,"strong",[],null,null,null,null,null)),(e()(),o._40(58,null,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,2,1,null,View_AddonCourseCompletionReportComponent_6)),o._15(63,802816,null,0,f.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,13,0,t.completion.completions);e(n,63,0,t.completion.completions)},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.coursecompletion.requiredcriteria")));e(n,28,0,o._41(n,28,0,o._29(n,29).transform("addon.coursecompletion.criteriagroup")));e(n,34,0,o._41(n,34,0,o._29(n,35).transform("addon.coursecompletion.criteria")));e(n,40,0,o._41(n,40,0,o._29(n,41).transform("addon.coursecompletion.requirement")));e(n,46,0,o._41(n,46,0,o._29(n,47).transform("addon.coursecompletion.status")));e(n,52,0,o._41(n,52,0,o._29(n,53).transform("addon.coursecompletion.complete")));e(n,58,0,o._41(n,58,0,o._29(n,59).transform("addon.coursecompletion.completiondate")))})}function View_AddonCourseCompletionReportComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,24,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,l.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,7,"ion-item-divider",[["class","item item-divider"]],null,null,null,a.b,a.a)),o._15(4,1097728,null,3,u.a,[d.a,s.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,16,{contentLabel:0}),o._37(603979776,17,{_buttons:1}),o._37(603979776,18,{_icons:1}),o._15(8,16384,null,0,L.a,[s.a,o.p,o.K],null,null),(e()(),o._40(9,2,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(12,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,a.b,a.a)),o._15(13,1097728,null,3,u.a,[d.a,s.a,o.p,o.K,[2,c.a]],null,null),o._37(335544320,19,{contentLabel:0}),o._37(603979776,20,{_buttons:1}),o._37(603979776,21,{_icons:1}),o._15(17,16384,null,0,p.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(19,0,null,2,3,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.completeCourse()&&o}return o},U.b,U.a)),o._15(20,1097728,[[20,4]],0,R.a,[[8,""],s.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(21,0,["",""])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,2,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,20,0,"")},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.coursecompletion.manualselfcompletion")));e(n,21,0,o._41(n,21,0,o._29(n,22).transform("addon.coursecompletion.completecourse")))})}function View_AddonCourseCompletionReportComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,H.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n            ","\n        "])),o._32(131072,r.a,[i.a,o.i])],function(e,n){e(n,3,0,"warning")},function(e,n){e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,5).transform("addon.coursecompletion.nottracked")))})}function View_AddonCourseCompletionReportComponent_0(e){return o._42(0,[o._32(0,N.a,[P.a,B.a]),(e()(),o._16(1,0,null,null,26,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,V.b,V.a)),o._15(2,4374528,null,0,E.a,[s.a,v.a,W.a,o.p,o.K,K.a,q.a,o.D,[2,G.a],[2,S.a]],null,null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var o=!0;if("ionRefresh"===n){o=!1!==e.component.refreshCompletion(t)&&o}return o},null,null)),o._15(5,212992,null,0,j.a,[v.a,E.a,o.D,Q.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,z.b,z.a)),o._15(8,114688,null,0,$.a,[j.a,s.a],{pullingText:[0,"pullingText"]},null),o._32(131072,r.a,[i.a,o.i]),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(12,0,null,1,14,"core-loading",[],null,null,null,Y.b,Y.a)),o._15(13,638976,null,0,X.a,[i.a,o.p,k.a,C.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonCourseCompletionReportComponent_1)),o._15(16,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonCourseCompletionReportComponent_4)),o._15(19,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonCourseCompletionReportComponent_9)),o._15(22,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonCourseCompletionReportComponent_10)),o._15(25,16384,null,0,f.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,1,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.completionLoaded);e(n,8,0,o._19(1,"",o._41(n,8,0,o._29(n,9).transform("core.pulltorefresh")),""));e(n,13,0,t.completionLoaded);e(n,16,0,t.completion&&t.tracked);e(n,19,0,t.completion&&t.tracked);e(n,22,0,t.showSelfComplete&&t.tracked);e(n,25,0,!t.tracked)},function(e,n){e(n,1,0,o._29(n,2).statusbarPadding,o._29(n,2)._hasRefresher);e(n,4,0,"inactive"!==o._29(n,5).state,o._29(n,5)._top);e(n,7,0,o._29(n,8).r.state)})}t.d(n,"b",function(){return ee}),n.c=View_AddonCourseCompletionReportComponent_0,t.d(n,"a",function(){return ne});var o=t(1),r=t(26),i=t(19),l=t(90),s=t(9),a=t(32),u=t(22),d=t(20),c=t(28),p=t(34),f=t(8),h=t(48),m=t(2),_=t(5),g=t(12),v=t(17),C=t(3),y=t(23),P=t(7),A=t(18),b=t(11),I=t(16),S=t(21),E=t(30),M=t(29),w=t(43),k=t(10),T=t(41),O=t(31),D=t(37),x=t(120),F=t(121),L=t(101),U=t(47),R=t(44),H=t(49),N=t(228),B=t(25),V=t(182),W=t(35),K=t(36),q=t(108),G=t(40),j=t(160),Q=t(45),z=t(213),$=t(174),Y=t(55),X=t(52),J=t(526),Z=t(173),ee=o._14({encapsulation:2,styles:[],data:{}}),ne=o._12("addon-course-completion-report",J.a,function View_AddonCourseCompletionReportComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-course-completion-report",[],null,null,null,View_AddonCourseCompletionReportComponent_0,ee)),o._15(1,114688,null,0,J.a,[m.a,_.a,Z.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",userId:"userId"},{},[])},function(e,n,t){"use strict";function View_AddonModBookIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["aria-haspopup","true"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.showToc(t)&&o}return o},r.b,r.a)),o._15(1,1097728,[[1,4]],0,i.a,[[8,""],l.a,o.p,o.K],null,null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","bookmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n    "]))],function(e,n){e(n,5,0,"bookmark")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("addon.mod_book.toc")));e(n,4,0,o._29(n,5)._hidden)})}function View_AddonModBookIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModBookIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModBookIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModBookIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,600)},null)}function View_AddonModBookIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},d.b,d.a)),o._15(1,770048,null,0,c.a,[p.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",500)},null)}function View_AddonModBookIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-navigation-bar",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.changeChapter(t)&&o}return o},f.b,f.a)),o._15(1,49152,null,0,h.a,[m.a],{previous:[0,"previous"],previousTitle:[1,"previousTitle"],next:[2,"next"],nextTitle:[3,"nextTitle"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.previousChapter&&t.previousChapter.id,t.previousNavBarTitle,t.nextChapter&&t.nextChapter.id,t.nextNavBarTitle)},null)}function View_AddonModBookIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"div",[["margin-top",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),o._40(3,null,["",":"])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(6,0,null,null,1,"core-tag-list",[],null,null,null,_.b,_.a)),o._15(7,49152,null,0,g.a,[v.a,[2,C.a]],{tags:[0,"tags"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,7,0,t.contentsMap[t.currentChapter].tags)},function(e,n){e(n,3,0,o._41(n,3,0,o._29(n,4).transform("core.tag.tags")))})}function View_AddonModBookIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-navigation-bar",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.changeChapter(t)&&o}return o},f.b,f.a)),o._15(1,49152,null,0,h.a,[m.a],{previous:[0,"previous"],previousTitle:[1,"previousTitle"],next:[2,"next"],nextTitle:[3,"nextTitle"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.previousChapter&&t.previousChapter.id,t.previousNavBarTitle,t.nextChapter&&t.nextChapter.id,t.nextNavBarTitle)},null)}function View_AddonModBookIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,29,"core-navbar-buttons",[["end",""]],null,null,null,y.b,y.a)),o._15(2,245760,null,1,P.a,[o.p,A.a,b.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModBookIndexComponent_1)),o._15(6,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(8,0,null,0,21,"core-context-menu",[],null,null,null,S.b,S.a)),o._15(9,245760,null,0,p.a,[a.a,E.a,o.p,b.a,[2,M.a],w.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModBookIndexComponent_2)),o._15(12,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModBookIndexComponent_3)),o._15(15,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModBookIndexComponent_4)),o._15(18,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(20,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},d.b,d.a)),o._15(21,770048,null,0,c.a,[p.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModBookIndexComponent_5)),o._15(25,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModBookIndexComponent_6)),o._15(28,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(33,0,null,null,20,"core-loading",[["class","core-loading-center"]],null,null,null,k.b,k.a)),o._15(34,638976,null,0,T.a,[a.a,o.p,O.a,w.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(36,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,D.b,D.a)),o._15(37,49152,null,0,x.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(39,0,null,0,13,"div",[["class","safe-padding-horizontal"],["padding",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModBookIndexComponent_7)),o._15(42,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(44,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(45,540672,null,0,F.a,[o.p,L.a,b.a,m.a,a.a,U.a,w.a,R.a,A.a,H.a,N.a,B.a,[2,v.a],[2,V.a],[2,C.a],W.a,O.a,K.a,q.a,G.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModBookIndexComponent_8)),o._15(48,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModBookIndexComponent_9)),o._15(51,16384,null,0,I.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,0,["\n\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0);e(n,6,0,t.loaded),e(n,9,0);e(n,12,0,t.externalUrl);e(n,15,0,t.description);e(n,18,0,t.blog);e(n,21,0,o._41(n,21,0,o._29(n,22).transform("core.refresh")),t.refreshIcon,!1,700);e(n,25,0,t.prefetchStatusIcon);e(n,28,0,t.size);e(n,34,0,t.loaded);e(n,37,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,42,0,t.displayNavBar);e(n,45,0,t.chapterContent,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,48,0,t.tagsEnabled&&t.contentsMap&&t.contentsMap[t.currentChapter]&&t.contentsMap[t.currentChapter].tags&&t.contentsMap[t.currentChapter].tags.length>0);e(n,51,0,t.displayNavBar)},null)}t.d(n,"b",function(){return J}),n.c=View_AddonModBookIndexComponent_0,t.d(n,"a",function(){return Z});var o=t(1),r=t(47),i=t(44),l=t(9),s=t(26),a=t(19),u=t(49),d=t(93),c=t(84),p=t(79),f=t(775),h=t(395),m=t(12),_=t(494),g=t(325),v=t(21),C=t(29),y=t(97),P=t(88),A=t(7),b=t(5),I=t(8),S=t(92),E=t(71),M=t(77),w=t(3),k=t(55),T=t(52),O=t(10),D=t(123),x=t(113),F=t(48),L=t(2),U=t(17),R=t(23),H=t(18),N=t(11),B=t(16),V=t(30),W=t(43),K=t(41),q=t(31),G=t(37),j=t(497),Q=t(221),z=t(14),$=t(398),Y=t(163),X=t(164),J=o._14({encapsulation:2,styles:[],data:{}}),Z=o._12("addon-mod-book-index",j.a,function View_AddonModBookIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-book-index",[],null,null,null,View_AddonModBookIndexComponent_0,J)),o._15(1,245760,null,0,j.a,[o.u,Q.a,z.a,N.a,$.a,Y.a,X.a,[2,V.a]],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",initialChapterId:"initialChapterId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModChoiceIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModChoiceIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModChoiceIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModChoiceIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModChoiceIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function View_AddonModChoiceIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModChoiceIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",400)},null)}function View_AddonModChoiceIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("addon.mod_choice.previewonly",e(n,2,0,t.openTimeReadable))))})}function View_AddonModChoiceIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("addon.mod_choice.notopenyet",e(n,2,0,t.openTimeReadable))))})}function View_AddonModChoiceIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),o._15(1,16384,null,0,u.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,c.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_9)),o._15(7,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_10)),o._15(10,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,"information-circle");e(n,7,0,t.options&&t.options.length);e(n,10,0,!t.options||!t.options.length)},function(e,n){e(n,3,0,o._29(n,4)._hidden)})}function View_AddonModChoiceIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,[""," "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(3,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(4,540672,null,0,f.a,[o.p,h.a,m.a,_.a,a.a,g.a,v.a,C.a,y.a,P.a,A.a,b.a,[2,I.a],[2,S.a],[2,E.a],M.a,w.a,k.a,T.a,O.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null)],function(e,n){var t=n.component;e(n,4,0,t.options[0].text,"module",t.module.id,t.courseId)},function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_choice.yourselection")))})}function View_AddonModChoiceIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),o._15(1,16384,null,0,u.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,c.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_12)),o._15(7,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(9,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(10,null,["",""])),o._33(11,{$a:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,"information-circle");e(n,7,0,t.options&&t.options.length)},function(e,n){var t=n.component;e(n,3,0,o._29(n,4)._hidden);e(n,10,0,o._41(n,10,0,o._29(n,12).transform("addon.mod_choice.expired",e(n,11,0,t.closeTimeReadable))))})}function View_AddonModChoiceIndexComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),o._15(1,16384,null,0,u.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,c.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(5,null,[" ","\n    "])),o._33(6,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,4,0,"warning")},function(e,n){var t=n.component;e(n,3,0,o._29(n,4)._hidden);e(n,5,0,o._41(n,5,0,o._29(n,7).transform("core.hasdatatosync",e(n,6,0,t.moduleName))))})}function View_AddonModChoiceIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,c.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n        ","\n    "])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,5).transform(t.publishInfo)))})}function View_AddonModChoiceIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_choice.full")))})}function View_AddonModChoiceIndexComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,21,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,D.b,D.a)),o._15(1,1097728,null,3,x.a,[F.a,d.a,o.p,o.K,[2,L.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,U.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,1,6,"ion-label",[],null,null,null,null,null)),o._15(8,16384,[[2,4]],0,R.a,[d.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._16(9,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(10,540672,null,0,f.a,[o.p,h.a,m.a,_.a,a.a,g.a,v.a,C.a,y.a,P.a,A.a,b.a,[2,I.a],[2,S.a],[2,E.a],M.a,w.a,k.a,T.a,O.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,null,[" "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_18)),o._15(13,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(15,0,null,4,5,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var r=!0;if("click"===n){r=!1!==o._29(e,16)._click(t)&&r}if("ngModelChange"===n){r=!1!==(e.context.$implicit.checked=t)&&r}return r},H.b,H.a)),o._15(16,1228800,null,0,N.a,[d.a,F.a,[2,x.a],o.p,o.K],{disabled:[0,"disabled"]},null),o._35(1024,null,B.l,function(e){return[e]},[N.a]),o._15(18,671744,null,0,B.q,[[8,null],[8,null],[8,null],[2,B.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),o._35(2048,null,B.m,null,[B.q]),o._15(20,16384,null,0,B.n,[B.m],null,null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,10,0,n.context.$implicit.text,"module",t.module.id,t.courseId);e(n,13,0,t.choice.limitanswers&&n.context.$implicit.countanswers>=n.context.$implicit.maxanswers);e(n,16,0,n.context.$implicit.disabled||!t.canEdit);e(n,18,0,n.context.$implicit.disabled||!t.canEdit,n.context.$implicit.checked)},function(e,n){e(n,15,0,o._29(n,16)._disabled,o._29(n,20).ngClassUntouched,o._29(n,20).ngClassTouched,o._29(n,20).ngClassPristine,o._29(n,20).ngClassDirty,o._29(n,20).ngClassValid,o._29(n,20).ngClassInvalid,o._29(n,20).ngClassPending)})}function View_AddonModChoiceIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_17)),o._15(3,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,n.component.options)},null)}function View_AddonModChoiceIndexComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_choice.full")))})}function View_AddonModChoiceIndexComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,23,"ion-item",[["class","item item-block"],["radio-group",""],["role","radiogroup"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.selectedOption.id=t)&&o}return o},D.b,D.a)),o._15(1,1064960,null,1,V.a,[o.K,o.p,o.i],null,null),o._37(335544320,8,{_header:0}),o._35(1024,null,B.l,function(e){return[e]},[V.a]),o._15(4,671744,null,0,B.q,[[8,null],[8,null],[8,null],[2,B.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,B.m,null,[B.q]),o._15(6,16384,null,0,B.n,[B.m],null,null),o._15(7,1097728,null,3,x.a,[F.a,d.a,o.p,o.K,[2,L.a]],null,null),o._37(335544320,5,{contentLabel:0}),o._37(603979776,6,{_buttons:1}),o._37(603979776,7,{_icons:1}),o._15(11,16384,null,0,U.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(13,0,null,1,6,"ion-label",[],null,null,null,null,null)),o._15(14,16384,[[5,4]],0,R.a,[d.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._16(15,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(16,540672,null,0,f.a,[o.p,h.a,m.a,_.a,a.a,g.a,v.a,C.a,y.a,P.a,A.a,b.a,[2,I.a],[2,S.a],[2,E.a],M.a,w.a,k.a,T.a,O.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,null,[" "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_21)),o._15(19,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(21,0,null,4,1,"ion-radio",[["color","primary"]],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var r=!0;if("click"===n){r=!1!==o._29(e,22)._click(t)&&r}return r},W.b,W.a)),o._15(22,245760,null,0,K.a,[F.a,d.a,o.p,o.K,[2,x.a],[2,V.a]],{color:[0,"color"],value:[1,"value"],disabled:[2,"disabled"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,4,0,t.selectedOption.id);e(n,16,0,n.context.$implicit.text,"module",t.module.id,t.courseId);e(n,19,0,t.choice.limitanswers&&n.context.$implicit.countanswers>=n.context.$implicit.maxanswers);e(n,22,0,"primary",n.context.$implicit.id,n.context.$implicit.disabled||!t.canEdit)},function(e,n){e(n,0,0,o._29(n,6).ngClassUntouched,o._29(n,6).ngClassTouched,o._29(n,6).ngClassPristine,o._29(n,6).ngClassDirty,o._29(n,6).ngClassValid,o._29(n,6).ngClassInvalid,o._29(n,6).ngClassPending);e(n,21,0,o._29(n,22)._disabled)})}function View_AddonModChoiceIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_20)),o._15(3,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,n.component.options)},null)}function View_AddonModChoiceIndexComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,D.b,D.a)),o._15(1,1097728,null,3,x.a,[F.a,d.a,o.p,o.K,[2,L.a]],null,null),o._37(335544320,9,{contentLabel:0}),o._37(603979776,10,{_buttons:1}),o._37(603979776,11,{_icons:1}),o._15(5,16384,null,0,U.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(7,0,null,2,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.save()&&o}return o},q.b,q.a)),o._15(8,1097728,[[10,4]],0,G.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(9,0,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n        "]))],function(e,n){e(n,8,0,"")},function(e,n){e(n,7,0,!n.component.canSave());e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.mod_choice.savemychoice")))})}function View_AddonModChoiceIndexComponent_23(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,D.b,D.a)),o._15(1,1097728,null,3,x.a,[F.a,d.a,o.p,o.K,[2,L.a]],null,null),o._37(335544320,12,{contentLabel:0}),o._37(603979776,13,{_buttons:1}),o._37(603979776,14,{_icons:1}),o._15(5,16384,null,0,U.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(7,0,null,2,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.delete()&&o}return o},q.b,q.a)),o._15(8,1097728,[[13,4]],0,G.a,[[8,""],d.a,o.p,o.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),o._40(9,0,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n        "]))],function(e,n){e(n,8,0,"light","")},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.mod_choice.removemychoice")))})}function View_AddonModChoiceIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,u.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_16)),o._15(4,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_19)),o._15(7,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_22)),o._15(10,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_23)),o._15(13,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.choice.allowmultiple);e(n,7,0,!t.choice.allowmultiple);e(n,10,0,t.canEdit);e(n,13,0,t.canDelete)},null)}function View_AddonModChoiceIndexComponent_25(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item",[["class","core-warning-item item item-block"],["text-wrap",""]],null,null,null,D.b,D.a)),o._15(1,1097728,null,3,x.a,[F.a,d.a,o.p,o.K,[2,L.a]],null,null),o._37(335544320,18,{contentLabel:0}),o._37(603979776,19,{_buttons:1}),o._37(603979776,20,{_icons:1}),o._15(5,16384,null,0,U.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(7,0,null,0,1,"ion-icon",[["color","warning"],["item-start",""],["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(8,147456,[[20,4]],0,c.a,[d.a,o.p,o.K],{color:[0,"color"],name:[1,"name"]},null),(e()(),o._40(9,2,[" ","\n                    "])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,8,0,"warning","warning")},function(e,n){e(n,7,0,o._29(n,8)._hidden);e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.mod_choice.resultsnotsynced")))})}function View_AddonModChoiceIndexComponent_28(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"a",[["class","item item-block"],["core-user-link",""],["ion-item",""],["text-wrap",""]],[[8,"title",0]],null,null,D.b,D.a)),o._15(1,1097728,null,3,x.a,[F.a,d.a,o.p,o.K,[2,L.a]],null,null),o._37(335544320,27,{contentLabel:0}),o._37(603979776,28,{_buttons:1}),o._37(603979776,29,{_icons:1}),o._15(5,16384,null,0,U.a,[],null,null),o._15(6,81920,null,0,j.a,[o.p,[2,I.a],[2,E.a]],{userId:[0,"userId"],courseId:[1,"courseId"]},null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(8,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,Q.b,Q.a)),o._15(9,16384,null,0,z.a,[],null,null),o._15(10,770048,null,0,$.a,[I.a,h.a,v.a,A.a,w.a,[2,E.a]],{user:[0,"user"],courseId:[1,"courseId"]},null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(12,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(13,null,["",""])),(e()(),o._40(-1,2,["\n                        "]))],function(e,n){var t=n.component;e(n,6,0,n.context.$implicit.userid,t.courseid);e(n,10,0,n.context.$implicit,t.courseid)},function(e,n){e(n,0,0,n.context.$implicit.fullname);e(n,13,0,n.context.$implicit.fullname)})}function View_AddonModChoiceIndexComponent_27(e){return o._42(0,[(e()(),o._16(0,0,null,null,23,"ion-item-group",[],null,null,null,null,null)),o._15(1,16384,null,0,Y.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(3,0,null,null,16,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,D.b,D.a)),o._15(4,1097728,null,3,x.a,[F.a,d.a,o.p,o.K,[2,L.a]],null,null),o._37(335544320,24,{contentLabel:0}),o._37(603979776,25,{_buttons:1}),o._37(603979776,26,{_icons:1}),o._15(8,16384,null,0,X.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._16(11,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(12,540672,null,0,f.a,[o.p,h.a,m.a,_.a,a.a,g.a,v.a,C.a,y.a,P.a,A.a,b.a,[2,I.a],[2,S.a],[2,E.a],M.a,w.a,k.a,T.a,O.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(14,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),o._40(15,null,["",": "," (",")"])),o._32(131072,s.a,[a.a,o.i]),o._33(17,{$a:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_28)),o._15(22,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){var t=n.component;e(n,12,0,n.context.$implicit.text,"module",t.module.id,t.courseId);e(n,22,0,n.context.$implicit.userresponses)},function(e,n){e(n,15,0,o._41(n,15,0,o._29(n,16).transform("addon.mod_choice.numberofuser")),n.context.$implicit.numberofuser,o._41(n,15,2,o._29(n,18).transform("core.percentagenumber",e(n,17,0,n.context.$implicit.percentageamountfixed))))})}function View_AddonModChoiceIndexComponent_26(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-col",[["class","col"],["col-12",""],["col-lg-7",""]],null,null,null,null,null)),o._15(1,16384,null,0,J.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_27)),o._15(4,802816,null,0,p.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                "]))],function(e,n){e(n,4,0,n.component.results)},null)}function View_AddonModChoiceIndexComponent_24(e){return o._42(0,[(e()(),o._16(0,0,null,null,39,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,7,"ion-item-divider",[["class","item item-divider"],["text-center",""]],null,null,null,D.b,D.a)),o._15(3,1097728,null,3,x.a,[F.a,d.a,o.p,o.K,[2,L.a]],null,null),o._37(335544320,15,{contentLabel:0}),o._37(603979776,16,{_buttons:1}),o._37(603979776,17,{_icons:1}),o._15(7,16384,null,0,X.a,[d.a,o.p,o.K],null,null),(e()(),o._40(8,2,["\n            ","\n        "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(11,0,null,null,27,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),o._15(12,16384,null,0,Z.a,[],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(14,0,null,null,23,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(15,16384,null,0,ee.a,[],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(17,0,null,null,16,"ion-col",[["class","col"],["col-12",""],["col-lg-5",""]],null,null,null,null,null)),o._15(18,16384,null,0,J.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_25)),o._15(21,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(23,0,null,null,9,"ion-item",[["class","item item-block"]],null,null,null,D.b,D.a)),o._15(24,1097728,null,3,x.a,[F.a,d.a,o.p,o.K,[2,L.a]],null,null),o._37(335544320,21,{contentLabel:0}),o._37(603979776,22,{_buttons:1}),o._37(603979776,23,{_icons:1}),o._15(28,16384,null,0,U.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(30,0,null,2,1,"core-chart",[["contextLevel","module"],["height","300"],["type","pie"]],null,null,null,ne.b,ne.a)),o._15(31,770048,null,0,te.a,[k.a,v.a,T.a],{data:[0,"data"],labels:[1,"labels"],type:[2,"type"],height:[3,"height"],contextLevel:[4,"contextLevel"],contextInstanceId:[5,"contextInstanceId"],courseId:[6,"courseId"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModChoiceIndexComponent_26)),o._15(36,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,21,0,t.hasOffline);e(n,31,0,t.data,t.labels,"pie","300","module",t.module.id,t.courseId);e(n,36,0,t.choice.publish&&t.results)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_choice.responses")))})}function View_AddonModChoiceIndexComponent_29(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"ion-card",[["class","core-info-card"]],null,null,null,null,null)),o._15(1,16384,null,0,u.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(4,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n    "]))],null,function(e,n){e(n,4,0,o._41(n,4,0,o._29(n,5).transform("addon.mod_choice.noresultsviewable")))})}function View_AddonModChoiceIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,oe.b,oe.a)),o._15(2,245760,null,1,re.a,[o.p,y.a,m.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,23,"core-context-menu",[],null,null,null,ie.b,ie.a)),o._15(6,245760,null,0,l.a,[a.a,le.a,o.p,m.a,[2,se.a],v.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_1)),o._15(9,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_2)),o._15(12,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_3)),o._15(15,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_4)),o._15(18,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_5)),o._15(21,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_6)),o._15(24,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_7)),o._15(27,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(32,0,null,null,31,"core-loading",[["class","core-loading-center"]],null,null,null,ae.b,ae.a)),o._15(33,638976,null,0,ue.a,[a.a,o.p,w.a,v.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(35,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,de.b,de.a)),o._15(36,49152,null,0,ce.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_8)),o._15(40,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_11)),o._15(43,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_13)),o._15(47,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_14)),o._15(51,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_15)),o._15(55,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_24)),o._15(59,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModChoiceIndexComponent_29)),o._15(62,16384,null,0,p.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.blog);e(n,18,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,21,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,24,0,t.prefetchStatusIcon);e(n,27,0,t.size);e(n,33,0,t.loaded);e(n,36,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,40,0,t.choiceNotOpenYet);e(n,43,0,t.choiceClosed);e(n,47,0,t.hasOffline);e(n,51,0,t.canEdit&&t.publishInfo&&t.options&&t.options.length);e(n,55,0,t.options&&t.options.length);e(n,59,0,t.canSeeResults);e(n,62,0,!t.canSeeResults&&!t.choiceNotOpenYet)},null)}t.d(n,"b",function(){return ge}),n.c=View_AddonModChoiceIndexComponent_0,t.d(n,"a",function(){return ve});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(90),d=t(9),c=t(49),p=t(8),f=t(48),h=t(2),m=t(5),_=t(12),g=t(17),v=t(3),C=t(23),y=t(7),P=t(18),A=t(11),b=t(16),I=t(21),S=t(30),E=t(29),M=t(43),w=t(10),k=t(41),T=t(31),O=t(37),D=t(32),x=t(22),F=t(20),L=t(28),U=t(34),R=t(68),H=t(251),N=t(201),B=t(24),V=t(138),W=t(177),K=t(146),q=t(47),G=t(44),j=t(479),Q=t(214),z=t(161),$=t(183),Y=t(387),X=t(101),J=t(120),Z=t(165),ee=t(121),ne=t(1060),te=t(444),oe=t(97),re=t(88),ie=t(92),le=t(71),se=t(77),ae=t(55),ue=t(52),de=t(123),ce=t(113),pe=t(499),fe=t(294),he=t(295),me=t(296),_e=t(25),ge=o._14({encapsulation:2,styles:[],data:{}}),ve=o._12("addon-mod-choice-index",pe.a,function View_AddonModChoiceIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-choice-index",[],null,null,null,View_AddonModChoiceIndexComponent_0,ge)),o._15(1,245760,null,0,pe.a,[o.u,fe.a,[2,S.a],he.a,me.a,_e.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return a});var o=t(0),r=t(1),i=t(24),l=(t(6),t(4),t(136)),s=(t(280),t(233),t(653)),a=function(){function AddonModForumPostComponent(e,n,t,o,l,s,a,u,d,c,p,f,h,m,_){this.uploaderProvider=e,this.syncProvider=n,this.domUtils=t,this.textUtils=o,this.translate=l,this.forumProvider=s,this.forumHelper=a,this.forumOffline=u,this.forumSync=d,this.tagProvider=c,this.content=p,this.popoverCtrl=f,this.modalCtrl=h,this.eventsProvider=m,this.sitesProvider=_,this.messageControl=new i.e,this.advanced=!1,this.displaySubject=!0,this.optionsMenuEnabled=!1,this.onPostChange=new r.r,this.tagsEnabled=this.tagProvider.areTagsAvailableInSite()}return AddonModForumPostComponent.prototype.ngOnInit=function(){this.uniqueId=this.post.id?"reply"+this.post.id:"edit"+this.post.parent;var e=this.translate.instant("addon.mod_forum.re");this.displaySubject=!this.parentSubject||this.post.subject!=this.parentSubject&&this.post.subject!="Re: "+this.parentSubject&&this.post.subject!=e+" "+this.parentSubject,this.defaultReplySubject=this.post.subject.startsWith("Re: ")||this.post.subject.startsWith(e)?this.post.subject:e+" "+this.post.subject,this.optionsMenuEnabled=!this.post.id||this.forumProvider.isGetDiscussionPostAvailable()&&(this.forumProvider.isDeletePostAvailable()||this.forumProvider.isUpdatePostAvailable())},AddonModForumPostComponent.prototype.ngOnChanges=function(e){e.leavingPage&&this.leavingPage&&this.domUtils.triggerFormCancelledEvent(this.formElement,this.sitesProvider.getCurrentSiteId())},AddonModForumPostComponent.prototype.deletePost=function(){var e=this;this.domUtils.showDeleteConfirm("addon.mod_forum.deletesure").then(function(){var n=e.domUtils.showModalLoading("core.deleting",!0);e.forumProvider.deletePost(e.post.id).then(function(n){e.eventsProvider.trigger(l.a.CHANGE_DISCUSSION_EVENT,{forumId:e.forum.id,discussionId:e.discussionId,cmId:e.forum.cmid,deleted:n.status,post:e.post},e.sitesProvider.getCurrentSiteId()),e.domUtils.showToast("addon.mod_forum.deletedpost",!0)}).catch(function(n){e.domUtils.showErrorModal(n)}).finally(function(){n.dismiss()})}).catch(function(e){})},AddonModForumPostComponent.prototype.setReplyFormData=function(e,n,t,o,r,i){this.uploaderProvider.clearTmpFiles(this.replyData.files),this.replyData.replyingTo=e||0,this.replyData.isEditing=!!n,this.replyData.subject=t||this.defaultReplySubject||"",this.replyData.message=o||null,this.replyData.files=r||[],this.replyData.isprivatereply=!!i,this.messageControl.setValue(this.replyData.message),this.originalData.subject=this.replyData.subject,this.originalData.message=this.replyData.message,this.originalData.files=this.replyData.files.slice(),this.originalData.isprivatereply=this.replyData.isprivatereply,this.advanced=this.replyData.files.length>0},AddonModForumPostComponent.prototype.showOptionsMenu=function(e){var n=this;e.preventDefault(),e.stopPropagation();var t=this.popoverCtrl.create(s.a,{post:this.post,forumId:this.forum.id});t.onDidDismiss(function(e){if(e&&e.action)switch(e.action){case"edit":n.editPost();break;case"editoffline":n.editOfflineReply();break;case"delete":n.deletePost();break;case"deleteoffline":n.discardOfflineReply()}}),t.present({ev:e})},AddonModForumPostComponent.prototype.editPost=function(){var e=this,n=this.modalCtrl.create("AddonModForumEditPostPage",{post:this.post,component:this.component,componentId:this.componentId,forum:this.forum});n.present(),n.onDidDismiss(function(n){if(void 0!==n){var t=e.textUtils.formatHtmlLines(n.message),o=n.files||[],r=e.domUtils.showModalLoading("core.sending",!0);(o.length?e.forumHelper.uploadOrStoreReplyFiles(e.forum.id,e.post.id,o,!1):Promise.resolve()).then(function(o){var r={};return o&&(r.attachmentsid=o),e.forumProvider.updatePost(e.post.id,n.subject,t,r)}).then(function(o){o&&e.forum.id&&(e.forumHelper.deleteReplyStoredFiles(e.forum.id,e.post.id),e.onPostChange.emit(),e.post.subject=n.subject,e.post.message=t,e.post.attachments=n.files)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.mod_forum.couldnotupdate",!0)}).finally(function(){r.dismiss()})}})},AddonModForumPostComponent.prototype.showReplyForm=function(){var e=this;this.replyData.isEditing?this.confirmDiscard().then(function(){e.setReplyFormData(e.post.id),e.content&&setTimeout(function(){e.content.resize(),e.domUtils.scrollToElementBySelector(e.content,"#addon-forum-reply-edit-form-"+e.uniqueId)})}).catch(function(){}):(this.replyData.replyingTo?(this.replyData.replyingTo=this.post.id,this.replyData.subject==this.originalData.subject&&(this.replyData.subject=this.defaultReplySubject,this.originalData.subject=this.defaultReplySubject),this.messageControl.setValue(this.replyData.message)):this.setReplyFormData(this.post.id),this.content&&setTimeout(function(){e.content.resize(),e.domUtils.scrollToElementBySelector(e.content,"#addon-forum-reply-edit-form-"+e.uniqueId)}))},AddonModForumPostComponent.prototype.editOfflineReply=function(){var e=this;this.confirmDiscard().then(function(){e.syncId=e.forumSync.getDiscussionSyncId(e.discussionId),e.syncProvider.blockOperation(l.a.COMPONENT,e.syncId),e.setReplyFormData(e.post.parent,!0,e.post.subject,e.post.message,e.post.attachments,e.post.isprivatereply)}).catch(function(){})},AddonModForumPostComponent.prototype.onMessageChange=function(e){this.replyData.message=e},AddonModForumPostComponent.prototype.reply=function(){var e=this;if(this.replyData.subject)if(this.replyData.message){var n=!1,t=this.replyData.message,o=this.replyData.subject,r=this.replyData.replyingTo,i=this.replyData.files||[],s={},a=this.domUtils.showModalLoading("core.sending",!0);t=this.textUtils.formatHtmlLines(t),this.replyData.isprivatereply&&(s.private=!0),(i.length?this.forumHelper.uploadOrStoreReplyFiles(this.forum.id,r,i,!1).catch(function(t){return e.forum.id?(n=!0,e.forumHelper.uploadOrStoreReplyFiles(e.forum.id,r,i,!0)):Promise.reject(t)}):Promise.resolve()).then(function(l){return l&&(s.attachmentsid=l),n?e.forumOffline.replyPost(r,e.discussionId,e.forum.id,e.forum.name,e.courseId,o,t,s).then(function(){return!1}):e.forumProvider.replyPost(r,e.discussionId,e.forum.id,e.forum.name,e.courseId,o,t,s,void 0,!i.length)}).then(function(n){n&&e.forum.id&&e.forumHelper.deleteReplyStoredFiles(e.forum.id,r),e.setReplyFormData(),e.onPostChange.emit(),e.domUtils.triggerFormSubmittedEvent(e.formElement,n,e.sitesProvider.getCurrentSiteId()),e.syncId&&e.syncProvider.unblockOperation(l.a.COMPONENT,e.syncId)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.mod_forum.couldnotadd",!0)}).finally(function(){a.dismiss()})}else this.domUtils.showErrorModal("addon.mod_forum.erroremptymessage",!0);else this.domUtils.showErrorModal("addon.mod_forum.erroremptysubject",!0)},AddonModForumPostComponent.prototype.cancel=function(){var e=this;this.confirmDiscard().then(function(){e.setReplyFormData(),e.domUtils.triggerFormCancelledEvent(e.formElement,e.sitesProvider.getCurrentSiteId()),e.syncId&&e.syncProvider.unblockOperation(l.a.COMPONENT,e.syncId)}).catch(function(){})},AddonModForumPostComponent.prototype.discardOfflineReply=function(){var e=this;this.domUtils.showDeleteConfirm().then(function(){var n=[];return n.push(e.forumOffline.deleteReply(e.post.parent)),e.forum.id&&n.push(e.forumHelper.deleteReplyStoredFiles(e.forum.id,e.post.parent).catch(function(){})),Promise.all(n).finally(function(){e.setReplyFormData(),e.onPostChange.emit(),e.syncId&&e.syncProvider.unblockOperation(l.a.COMPONENT,e.syncId)})}).catch(function(){})},AddonModForumPostComponent.prototype.ratingUpdated=function(){this.forumProvider.invalidateDiscussionPosts(this.discussionId,this.forum.id)},AddonModForumPostComponent.prototype.toggleAdvanced=function(){this.advanced=!this.advanced},AddonModForumPostComponent.prototype.ngOnDestroy=function(){this.syncId&&this.syncProvider.unblockOperation(l.a.COMPONENT,this.syncId)},AddonModForumPostComponent.prototype.confirmDiscard=function(){return this.forumHelper.hasPostDataChanged(this.replyData,this.originalData)?this.domUtils.showConfirm(this.translate.instant("core.confirmloss")):Promise.resolve()},AddonModForumPostComponent=Object(o.__decorate)([Object(o.__param)(10,Object(r.E)())],AddonModForumPostComponent)}()},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0),t(6),t(204),t(190);var o=function(){function AddonModWorkshopAssessmentComponent(e,n,t,o,r,i){this.workshopOffline=e,this.workshopHelper=n,this.navCtrl=t,this.userProvider=o,this.domUtils=r,this.canViewAssessment=!1,this.canSelfAssess=!1,this.offline=!1,this.loaded=!1,this.currentUserId=i.getCurrentSiteUserId(),this.showGrade=this.workshopHelper.showGrade}return AddonModWorkshopAssessmentComponent.prototype.ngOnInit=function(){var e=this,n=this.access&&this.access.assessingallowed,t=this.assessment.userid||this.assessment.reviewerid,o=[];this.assessmentId=this.assessment.assessmentid||this.assessment.id,this.canViewAssessment=this.assessment.grade,this.canSelfAssess=n&&t==this.currentUserId,t&&o.push(this.userProvider.getProfile(t,this.courseId,!0).then(function(n){e.profile=n}));var r;r=t==this.currentUserId?this.workshopOffline.getAssessment(this.workshop.id,this.assessmentId).then(function(n){e.offline=!0,e.assessment.weight=n.inputdata.weight}):this.workshopOffline.getEvaluateAssessment(this.workshop.id,this.assessmentId).then(function(n){e.offline=!0,e.assessment.gradinggradeover=n.gradinggradeover,e.assessment.weight=n.weight}),o.push(r.catch(function(){e.offline=!1})),Promise.all(o).finally(function(){e.loaded=!0})},AddonModWorkshopAssessmentComponent.prototype.gotoAssessment=function(){var e=this;if(!this.canSelfAssess&&this.canViewAssessment){var n={assessment:this.assessment,submission:this.submission,profile:this.profile,courseId:this.courseId,assessmentId:this.assessmentId};if(this.submission)this.navCtrl.push("AddonModWorkshopAssessmentPage",n);else{var t=this.domUtils.showModalLoading("core.sending",!0);this.workshopHelper.getSubmissionById(this.workshop.id,this.assessment.submissionid).then(function(t){n.submission=t,e.navCtrl.push("AddonModWorkshopAssessmentPage",n)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"Cannot load submission")}).finally(function(){t.dismiss()})}}},AddonModWorkshopAssessmentComponent.prototype.gotoOwnAssessment=function(){if(this.canSelfAssess){this.navCtrl.push("AddonModWorkshopSubmissionPage",{module:this.module,workshop:this.workshop,access:this.access,courseId:this.courseId,profile:this.profile,submission:this.submission,assessment:this.assessment})}},AddonModWorkshopAssessmentComponent}()},function(e,n,t){"use strict";function View_CoreStyleComponent_0(e){return o._42(0,[],null,null)}t.d(n,"a",function(){return r}),n.b=View_CoreStyleComponent_0;var o=t(1),r=o._14({encapsulation:2,styles:[],data:{}})},function(e,n,t){"use strict";function View_AddonModFolderIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModFolderIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModFolderIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModFolderIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModFolderIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,600)},null)}function View_AddonModFolderIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",500)},null)}function View_AddonModFolderIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"a",[["class","item-media item item-block"],["ion-item",""],["navPush","AddonModFolderIndexPage"]],[[1,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;if("click"===n){r=!1!==o._29(e,6).onClick()&&r}return r},u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),o._15(6,16384,null,0,m.a,[[2,_.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),o._33(7,{path:0,courseId:1,module:2}),o._15(8,1064960,null,0,g.a,[m.a,[2,v.a]],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(10,0,null,0,1,"ion-icon",[["item-start",""],["name","folder"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(11,147456,[[4,4]],0,C.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(13,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),o._40(14,null,["",""])),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,6,0,"AddonModFolderIndexPage",e(n,7,0,n.parent.context.$implicit.filepath,n.component.courseId,n.parent.context.$implicit));e(n,11,0,"folder")},function(e,n){e(n,0,0,o._29(n,8)._href);e(n,10,0,o._29(n,11)._hidden);e(n,14,0,n.parent.context.$implicit.name)})}function View_AddonModFolderIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-file",[],null,null,null,y.b,y.a)),o._15(1,245760,null,0,P.a,[A.a,b.a,I.a,S.a,E.a,M.a,w.a,k.a,T.a,O.a,D.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){e(n,1,0,n.parent.context.$implicit,n.component.component,n.parent.context.$implicit.contextid)},null)}function View_AddonModFolderIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFolderIndexComponent_9)),o._15(3,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFolderIndexComponent_10)),o._15(6,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,"folder"===n.context.$implicit.type);e(n,6,0,"folder"!==n.context.$implicit.type)},null)}function View_AddonModFolderIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),o._15(1,16384,null,0,F.a,[p.a,o.p,o.K,L.a,U.l,R.a],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModFolderIndexComponent_8)),o._15(4,802816,null,0,x.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,4,0,n.component.contents)},null)}function View_AddonModFolderIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-empty-box",[["icon","folder"]],null,null,null,H.b,H.a)),o._15(1,49152,null,0,N.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_folder.emptyfilelist")),"folder")},null)}function View_AddonModFolderIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,B.b,B.a)),o._15(2,245760,null,1,V.a,[o.p,W.a,I.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,20,"core-context-menu",[],null,null,null,K.b,K.a)),o._15(6,245760,null,0,l.a,[a.a,q.a,o.p,I.a,[2,G.a],b.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFolderIndexComponent_1)),o._15(9,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFolderIndexComponent_2)),o._15(12,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFolderIndexComponent_3)),o._15(15,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFolderIndexComponent_4)),o._15(18,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFolderIndexComponent_5)),o._15(21,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFolderIndexComponent_6)),o._15(24,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(29,0,null,null,11,"core-loading",[["class","core-loading-center"]],null,null,null,j.b,j.a)),o._15(30,638976,null,0,Q.a,[a.a,o.p,k.a,b.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(32,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,z.b,z.a)),o._15(33,49152,null,0,$.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFolderIndexComponent_7)),o._15(36,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModFolderIndexComponent_11)),o._15(39,16384,null,0,x.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.blog);e(n,18,0,!t.path);e(n,21,0,t.prefetchStatusIcon);e(n,24,0,t.size);e(n,30,0,t.loaded);e(n,33,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,36,0,t.contents&&t.contents.length>0);e(n,39,0,!t.contents||0==t.contents.length)},null)}t.d(n,"b",function(){return ee}),n.c=View_AddonModFolderIndexComponent_0,t.d(n,"a",function(){return ne});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(32),d=t(22),c=t(20),p=t(9),f=t(28),h=t(34),m=t(230),_=t(21),g=t(278),v=t(60),C=t(49),y=t(249),P=t(215),A=t(2),b=t(3),I=t(5),S=t(18),E=t(11),M=t(116),w=t(67),k=t(10),T=t(12),O=t(57),D=t(23),x=t(8),F=t(87),L=t(17),U=t(45),R=t(35),H=t(125),N=t(115),B=t(97),V=t(88),W=t(7),K=t(92),q=t(71),G=t(77),j=t(55),Q=t(52),z=t(123),$=t(113),Y=t(505),X=t(330),J=t(14),Z=t(401),ee=o._14({encapsulation:2,styles:[],data:{}}),ne=o._12("addon-mod-folder-index",Y.a,function View_AddonModFolderIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-folder-index",[],null,null,null,View_AddonModFolderIndexComponent_0,ee)),o._15(1,245760,null,0,Y.a,[o.u,X.a,J.a,E.a,Z.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",path:"path"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModGlossaryIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openModePicker(t)&&o}return o},r.b,r.a)),o._15(1,1097728,[[3,4]],0,i.a,[[8,""],l.a,o.p,o.K],null,null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(4,0,null,0,1,"core-icon",[["name","fa-sort"]],null,null,null,u.b,u.a)),o._15(5,704512,null,0,d.a,[o.p,l.a],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n    "]))],function(e,n){e(n,5,0,"fa-sort")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("addon.mod_glossary.browsemode")))})}function View_AddonModGlossaryIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.toggleSearch()&&o}return o},r.b,r.a)),o._15(1,1097728,[[3,4]],0,i.a,[[8,""],l.a,o.p,o.K],null,null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,c.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n    "]))],function(e,n){e(n,5,0,"search")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("addon.mod_glossary.bysearch")));e(n,4,0,o._29(n,5)._hidden)})}function View_AddonModGlossaryIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,p.b,p.a)),o._15(1,770048,null,0,f.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModGlossaryIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},p.b,p.a)),o._15(1,770048,null,0,f.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModGlossaryIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},p.b,p.a)),o._15(1,770048,null,0,f.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModGlossaryIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},p.b,p.a)),o._15(1,770048,null,0,f.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModGlossaryIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},p.b,p.a)),o._15(1,770048,null,0,f.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,650)},null)}function View_AddonModGlossaryIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[["iconAction","add"]],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.openNewEntry()&&o}return o},p.b,p.a)),o._15(1,770048,null,0,f.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_glossary.addentry")),"add",600)},null)}function View_AddonModGlossaryIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},p.b,p.a)),o._15(1,770048,null,0,f.a,[h.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModGlossaryIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},p.b,p.a)),o._15(1,770048,null,0,f.a,[h.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",400)},null)}function View_AddonModGlossaryIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),o._15(1,16384,null,0,m.a,[l.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,c.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(5,null,[" ","\n        "])),o._33(6,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,4,0,"warning")},function(e,n){var t=n.component;e(n,3,0,o._29(n,4)._hidden);e(n,5,0,o._41(n,5,0,o._29(n,7).transform("core.hasdatatosync",e(n,6,0,t.moduleName))))})}function View_AddonModGlossaryIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-search-box",[],null,[[null,"onSubmit"],[null,"onClear"]],function(e,n,t){var o=!0,r=e.component;if("onSubmit"===n){o=!1!==r.search(t)&&o}if("onClear"===n){o=!1!==r.toggleSearch(t)&&o}return o},_.c,_.b)),o._15(1,114688,null,0,g.a,[a.a,v.a,C.a,y.a,P.a,A.a],{placeholder:[0,"placeholder"],autoFocus:[1,"autoFocus"],lengthCheck:[2,"lengthCheck"],searchArea:[3,"searchArea"]},{onSubmit:"onSubmit",onClear:"onClear"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_glossary.searchquery")),!0,2,o._19(1,"AddonModGlossary-",t.module.id,""))},null)}function View_AddonModGlossaryIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"a",[["class","item item-block"],["detail-none",""],["ion-item",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openNewEntry(e.context.$implicit)&&o}return o},b.b,b.a)),o._15(1,1097728,null,3,I.a,[S.a,l.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,7,{contentLabel:0}),o._37(603979776,8,{_buttons:1}),o._37(603979776,9,{_icons:1}),o._15(5,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._16(8,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(9,540672,null,0,w.a,[o.p,P.a,A.a,k.a,a.a,T.a,v.a,O.a,D.a,x.a,F.a,L.a,[2,U.a],[2,R.a],[2,H.a],N.a,y.a,B.a,V.a,W.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,9,0,n.context.$implicit.concept,"module",t.glossary.coursemodule,t.courseId)},null)}function View_AddonModGlossaryIndexComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-list",[],null,null,null,null,null)),o._15(1,16384,null,0,K.a,[l.a,o.p,o.K,T.a,q.l,G.a],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,7,"ion-item-divider",[["class","item item-divider"]],null,null,null,b.b,b.a)),o._15(4,1097728,null,3,I.a,[S.a,l.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(8,16384,null,0,j.a,[l.a,o.p,o.K],null,null),(e()(),o._40(9,2,["\n                    ","\n                "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModGlossaryIndexComponent_14)),o._15(13,802816,null,0,Q.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){e(n,13,0,n.component.offlineEntries)},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.mod_glossary.entriestobesynced")))})}function View_AddonModGlossaryIndexComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"ion-item-divider",[["class","item item-divider"]],null,null,null,b.b,b.a)),o._15(1,1097728,null,3,I.a,[S.a,l.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,10,{contentLabel:0}),o._37(603979776,11,{_buttons:1}),o._37(603979776,12,{_icons:1}),o._15(5,16384,null,0,j.a,[l.a,o.p,o.K],null,null),(e()(),o._40(6,2,["\n                        ","\n                    "]))],null,function(e,n){e(n,6,0,n.component.getDivider(n.parent.context.$implicit))})}function View_AddonModGlossaryIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModGlossaryIndexComponent_17)),o._15(3,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                    "])),(e()(),o._16(5,0,null,null,10,"a",[["class","item item-block"],["detail-none",""],["ion-item",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openEntry(e.context.$implicit.id)&&o}return o},b.b,b.a)),o._15(6,1097728,null,3,I.a,[S.a,l.a,o.p,o.K,[2,E.a]],null,null),o._37(335544320,13,{contentLabel:0}),o._37(603979776,14,{_buttons:1}),o._37(603979776,15,{_icons:1}),o._15(10,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._16(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(14,540672,null,0,w.a,[o.p,P.a,A.a,k.a,a.a,T.a,v.a,O.a,D.a,x.a,F.a,L.a,[2,U.a],[2,R.a],[2,H.a],N.a,y.a,B.a,V.a,W.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,3,0,t.showDivider(n.context.$implicit,t.entries[n.context.index-1]));e(n,14,0,n.context.$implicit.concept,"module",t.glossary.coursemodule,t.courseId)},function(e,n){e(n,5,0,n.context.$implicit.id==n.component.selectedEntry)})}function View_AddonModGlossaryIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),o._15(1,16384,null,0,K.a,[l.a,o.p,o.K,T.a,q.l,G.a],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModGlossaryIndexComponent_16)),o._15(4,802816,null,0,Q.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){e(n,4,0,n.component.entries)},null)}function View_AddonModGlossaryIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-empty-box",[["icon","list"]],null,null,null,z.b,z.a)),o._15(1,49152,null,0,$.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_glossary.noentriesfound")),"list")},null)}function View_AddonModGlossaryIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,Y.b,Y.a)),o._15(1,1228800,null,2,X.a,[T.a],null,null),o._37(335544320,16,{_mainButton:0}),o._37(603979776,17,{_fabLists:1}),o._15(4,212992,null,0,J.a,[o.p,R.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openNewEntry()&&o}return o},Z.b,Z.a)),o._15(7,49152,[[16,4]],0,ee.a,[l.a,o.p,o.K],null,null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(11,147456,null,0,c.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._40(-1,0,["\n        "]))],function(e,n){e(n,4,0);e(n,11,0,"add")},function(e,n){e(n,6,0,o._41(n,6,0,o._29(n,8).transform("addon.mod_glossary.addentry")));e(n,10,0,o._29(n,11)._hidden)})}function View_AddonModGlossaryIndexComponent_0(e){return o._42(0,[o._37(402653184,1,{splitviewCtrl:0}),o._37(402653184,2,{content:0}),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(3,0,null,null,37,"core-navbar-buttons",[["end",""]],null,null,null,ne.b,ne.a)),o._15(4,245760,null,1,te.a,[o.p,D.a,A.a],null,null),o._37(603979776,3,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_1)),o._15(8,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_2)),o._15(11,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(13,0,null,0,26,"core-context-menu",[],null,null,null,oe.b,oe.a)),o._15(14,245760,null,0,h.a,[a.a,re.a,o.p,A.a,[2,ie.a],v.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_3)),o._15(17,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_4)),o._15(20,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_5)),o._15(23,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_6)),o._15(26,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_7)),o._15(29,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_8)),o._15(32,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_9)),o._15(35,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_10)),o._15(38,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(43,0,null,null,43,"core-split-view",[],null,null,null,le.b,le.a)),o._15(44,245760,[[1,4]],0,H.a,[[2,U.a],o.p,se.a,T.a,a.a],null,null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(46,0,null,0,39,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ae.b,ae.a)),o._15(47,4374528,[[2,4]],0,R.a,[l.a,T.a,G.a,o.p,o.K,ue.a,de.a,o.D,[2,ce.a],[2,U.a]],null,null),(e()(),o._40(-1,1,["\n        "])),(e()(),o._16(49,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var o=!0;if("ionRefresh"===n){o=!1!==e.component.doRefresh(t)&&o}return o},null,null)),o._15(50,212992,null,0,pe.a,[T.a,R.a,o.D,q.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(52,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,fe.b,fe.a)),o._15(53,114688,null,0,he.a,[pe.a,l.a],{pullingText:[0,"pullingText"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,1,["\n\n        "])),(e()(),o._16(57,0,null,1,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,me.b,me.a)),o._15(58,49152,null,0,_e.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,1,["\n\n        "])),(e()(),o._40(-1,1,["\n        "])),(e()(),o._11(16777216,null,1,1,null,View_AddonModGlossaryIndexComponent_11)),o._15(62,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,1,["\n\n        "])),(e()(),o._11(16777216,null,1,1,null,View_AddonModGlossaryIndexComponent_12)),o._15(65,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,1,["\n\n        "])),(e()(),o._16(67,0,null,1,14,"core-loading",[["class","core-loading-center"]],null,null,null,ge.b,ge.a)),o._15(68,638976,null,0,ve.a,[a.a,o.p,y.a,v.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n            "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_13)),o._15(71,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n            "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_15)),o._15(74,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n            "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_18)),o._15(77,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n            "])),(e()(),o._16(79,0,null,0,1,"core-infinite-loading",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.loadMoreEntries(t)&&o}return o},Ce.b,Ce.a)),o._15(80,573440,null,0,ye.a,[[2,R.a],A.a],{enabled:[0,"enabled"],error:[1,"error"]},{action:"action"}),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,1,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModGlossaryIndexComponent_19)),o._15(84,16384,null,0,Q.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0);e(n,8,0,t.glossary&&t.glossary.browsemodes&&t.glossary.browsemodes.length>1);e(n,11,0,t.glossary),e(n,14,0);e(n,17,0,t.externalUrl);e(n,20,0,t.description);e(n,23,0,t.blog);e(n,26,0,t.loaded&&!(t.hasOffline||t.hasOfflineRatings)&&t.isOnline);e(n,29,0,t.loaded&&(t.hasOffline||t.hasOfflineRatings)&&t.isOnline);e(n,32,0,t.canAdd);e(n,35,0,t.prefetchStatusIcon);e(n,38,0,t.size),e(n,44,0);e(n,50,0,t.loaded);e(n,53,0,o._19(1,"",o._41(n,53,0,o._29(n,54).transform("core.pulltorefresh")),""));e(n,58,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,62,0,t.hasOffline||t.hasOfflineRatings);e(n,65,0,t.isSearch);e(n,68,0,t.loaded);e(n,71,0,!t.isSearch&&t.offlineEntries.length>0);e(n,74,0,t.entries.length>0);e(n,77,0,!t.entries.length&&!t.offlineEntries.length);e(n,80,0,t.canLoadMore,t.loadMoreError);e(n,84,0,t.canAdd)},function(e,n){e(n,46,0,o._29(n,47).statusbarPadding,o._29(n,47)._hasRefresher);e(n,49,0,"inactive"!==o._29(n,50).state,o._29(n,50)._top);e(n,52,0,o._29(n,53).r.state)})}t.d(n,"b",function(){return Ee}),n.c=View_AddonModGlossaryIndexComponent_0,t.d(n,"a",function(){return Me});var o=t(1),r=t(47),i=t(44),l=t(9),s=t(26),a=t(19),u=t(81),d=t(76),c=t(49),p=t(93),f=t(84),h=t(79),m=t(90),_=t(475),g=t(379),v=t(3),C=t(283),y=t(10),P=t(2),A=t(5),b=t(32),I=t(22),S=t(20),E=t(28),M=t(34),w=t(48),k=t(12),T=t(17),O=t(23),D=t(7),x=t(18),F=t(11),L=t(16),U=t(21),R=t(30),H=t(29),N=t(43),B=t(41),V=t(31),W=t(37),K=t(87),q=t(45),G=t(35),j=t(101),Q=t(8),z=t(125),$=t(115),Y=t(281),X=t(218),J=t(255),Z=t(282),ee=t(191),ne=t(97),te=t(88),oe=t(92),re=t(71),ie=t(77),le=t(474),se=t(73),ae=t(182),ue=t(36),de=t(108),ce=t(40),pe=t(160),fe=t(213),he=t(174),me=t(123),_e=t(113),ge=t(55),ve=t(52),Ce=t(373),ye=t(273),Pe=t(508),Ae=t(205),be=t(258),Ie=t(403),Se=t(203),Ee=o._14({encapsulation:2,styles:[],data:{}}),Me=o._12("addon-mod-glossary-index",Pe.a,function View_AddonModGlossaryIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-glossary-index",[],null,null,null,View_AddonModGlossaryIndexComponent_0,Ee)),o._15(1,245760,null,0,Pe.a,[o.u,re.a,Ae.a,be.a,Ie.a,Se.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModImscpIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["name","bookmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"bookmark")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_AddonModImscpIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,l.b,l.a)),o._15(1,770048,null,0,s.a,[a.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,u.a,[d.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModImscpIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},l.b,l.a)),o._15(1,770048,null,0,s.a,[a.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,u.a,[d.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModImscpIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},l.b,l.a)),o._15(1,770048,null,0,s.a,[a.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,u.a,[d.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModImscpIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},l.b,l.a)),o._15(1,770048,null,0,s.a,[a.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,600)},null)}function View_AddonModImscpIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},l.b,l.a)),o._15(1,770048,null,0,s.a,[a.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,u.a,[d.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",500)},null)}function View_AddonModImscpIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,33,"core-navbar-buttons",[["end",""]],null,null,null,c.b,c.a)),o._15(2,245760,null,1,p.a,[o.p,f.a,h.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.showToc(t)&&o}return o},m.b,m.a)),o._15(6,1097728,[[1,4]],0,_.a,[[8,""],i.a,o.p,o.K],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModImscpIndexComponent_1)),o._15(9,16384,null,0,g.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(12,0,null,0,21,"core-context-menu",[],null,null,null,v.b,v.a)),o._15(13,245760,null,0,a.a,[d.a,C.a,o.p,h.a,[2,y.a],P.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModImscpIndexComponent_2)),o._15(16,16384,null,0,g.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModImscpIndexComponent_3)),o._15(19,16384,null,0,g.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModImscpIndexComponent_4)),o._15(22,16384,null,0,g.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(24,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},l.b,l.a)),o._15(25,770048,null,0,s.a,[a.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,u.a,[d.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModImscpIndexComponent_5)),o._15(29,16384,null,0,g.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModImscpIndexComponent_6)),o._15(32,16384,null,0,g.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(37,0,null,null,12,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,A.b,A.a)),o._15(38,638976,null,0,b.a,[d.a,o.p,I.a,P.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(40,0,null,0,8,"div",[["class","addon-mod-imscp-container"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(42,0,null,null,2,"core-navigation-bar",[["contextLevel","module"]],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.loadItem(t)&&o}return o},S.b,S.a)),o._15(43,49152,null,0,E.a,[M.a],{previous:[0,"previous"],next:[1,"next"],info:[2,"info"],title:[3,"title"],component:[4,"component"],componentId:[5,"componentId"],contextLevel:[6,"contextLevel"],contextInstanceId:[7,"contextInstanceId"],courseId:[8,"courseId"]},{action:"action"}),o._32(131072,u.a,[d.a,o.i]),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(46,0,null,null,1,"core-iframe",[],null,null,null,w.b,w.a)),o._15(47,638976,null,0,k.a,[f.a,T.a,h.a,O.c,D.a,x.a,P.a,[2,F.a]],{src:[0,"src"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0);e(n,9,0,t.items.length),e(n,13,0);e(n,16,0,t.externalUrl);e(n,19,0,t.description);e(n,22,0,t.blog);e(n,25,0,o._41(n,25,0,o._29(n,26).transform("core.refresh")),t.refreshIcon,!1,700);e(n,29,0,t.prefetchStatusIcon);e(n,32,0,t.size);e(n,38,0,t.loaded);e(n,43,0,t.previousItem,t.nextItem,t.description,o._41(n,43,3,o._29(n,44).transform("core.description")),t.component,t.componentId,"module",t.module.id,t.courseId);e(n,47,0,t.src)},null)}t.d(n,"b",function(){return V}),n.c=View_AddonModImscpIndexComponent_0,t.d(n,"a",function(){return W});var o=t(1),r=t(49),i=t(9),l=t(93),s=t(84),a=t(79),u=t(26),d=t(19),c=t(97),p=t(88),f=t(7),h=t(5),m=t(47),_=t(44),g=t(8),v=t(92),C=t(71),y=t(77),P=t(3),A=t(55),b=t(52),I=t(10),S=t(775),E=t(395),M=t(12),w=t(323),k=t(257),T=t(43),O=t(80),D=t(21),x=t(23),F=t(29),L=t(509),U=t(237),R=t(14),H=t(11),N=t(163),B=t(404),V=o._14({encapsulation:2,styles:[],data:{}}),W=o._12("addon-mod-imscp-index",L.a,function View_AddonModImscpIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-imscp-index",[],null,null,null,View_AddonModImscpIndexComponent_0,V)),o._15(1,245760,null,0,L.a,[o.u,U.a,R.a,H.a,N.a,B.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModLessonIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModLessonIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModLessonIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModLessonIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModLessonIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function View_AddonModLessonIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModLessonIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",400)},null)}function View_AddonModLessonIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(5,0,null,null,0,"span",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),o._40(-1,null,["\n                "]))],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,5,0,t.preventMessages[0].message)})}function View_AddonModLessonIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n                    ","\n                "])),o._33(5,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function View_AddonModLessonIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,47,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,c.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(3,0,[[2,0],["passwordForm",1]],null,43,"form",[["ion-list",""],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(e,n,t){var r=!0,i=e.component;if("submit"===n){r=!1!==o._29(e,5).onSubmit(t)&&r}if("reset"===n){r=!1!==o._29(e,5).onReset()&&r}if("ngSubmit"===n){r=!1!==i.submitPassword(t,o._29(e,25))&&r}return r},null,null)),o._15(4,16384,null,0,p.w,[],null,null),o._15(5,4210688,null,0,p.p,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),o._35(2048,null,p.b,null,[p.p]),o._15(7,16384,null,0,p.o,[p.b],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(9,0,null,null,20,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(10,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,6,{contentLabel:0}),o._37(603979776,7,{_buttons:1}),o._37(603979776,8,{_icons:1}),o._15(14,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(16,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),o._15(17,16384,[[6,4]],0,v.a,[d.a,o.p,o.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),o._40(18,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(21,0,null,3,7,"core-show-password",[["item-content",""]],null,null,null,C.b,C.a)),o._15(22,4308992,null,0,y.a,[o.p,P.a,A.a,b.a],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n                                "])),(e()(),o._16(24,0,null,0,3,"ion-input",[["name","password"],["type","password"]],null,null,null,I.b,I.a)),o._15(25,5423104,[["passwordinput",4]],0,S.a,[d.a,b.a,m.a,E.a,o.p,o.K,[2,M.a],[2,h.a],[2,p.m],w.a],{type:[0,"type"],clearOnEdit:[1,"clearOnEdit"],placeholder:[2,"placeholder"]},null),o._32(131072,s.a,[a.a,o.i]),o._15(27,81920,null,0,k.a,[o.p,A.a,P.a,[2,T.a]],null,null),(e()(),o._40(-1,0,["\n                            "])),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(31,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,f.b,f.a)),o._15(32,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,9,{contentLabel:0}),o._37(603979776,10,{_buttons:1}),o._37(603979776,11,{_icons:1}),o._15(36,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(38,0,null,2,6,"button",[["block",""],["icon-end",""],["ion-button",""],["type","submit"]],null,null,null,O.b,O.a)),o._15(39,1097728,[[10,4]],0,D.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(40,0,["\n                                ","\n                                "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(42,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(43,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(-1,0,["\n                            "])),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,null,["\n                "]))],function(e,n){e(n,22,0,"password");e(n,25,0,"password",!1,o._19(1,"",o._41(n,25,2,o._29(n,26).transform("core.login.password")),"")),e(n,27,0);e(n,39,0,"");e(n,43,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,3,0,o._29(n,7).ngClassUntouched,o._29(n,7).ngClassTouched,o._29(n,7).ngClassPristine,o._29(n,7).ngClassDirty,o._29(n,7).ngClassValid,o._29(n,7).ngClassInvalid,o._29(n,7).ngClassPending);e(n,18,0,o._41(n,18,0,o._29(n,19).transform("addon.mod_lesson.enterpassword")));e(n,40,0,o._41(n,40,0,o._29(n,41).transform("addon.mod_lesson.continue")));e(n,42,0,o._29(n,43)._hidden)})}function View_AddonModLessonIndexComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(1,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,12,{contentLabel:0}),o._37(603979776,13,{_buttons:1}),o._37(603979776,14,{_icons:1}),o._15(5,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(8,0,null,2,2,"p",[["padding-bottom",""]],null,null,null,null,null)),(e()(),o._40(9,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(12,0,null,2,3,"a",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.review()&&o}return o},O.b,O.a)),o._15(13,1097728,[[13,4]],0,D.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(14,0,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                        "]))],function(e,n){e(n,13,0,"")},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.mod_lesson.retakefinishedinsync")));e(n,14,0,o._41(n,14,0,o._29(n,15).transform("addon.mod_lesson.review")))})}function View_AddonModLessonIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,36,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(1,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,15,{contentLabel:0}),o._37(603979776,16,{_buttons:1}),o._37(603979776,17,{_icons:1}),o._15(5,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(8,0,null,2,1,"p",[],[[8,"innerHTML",1]],null,null,null,null)),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(11,0,null,2,24,"ion-grid",[["class","grid"]],null,null,null,null,null)),o._15(12,16384,null,0,x.a,[],null,null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._16(14,0,null,null,20,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(15,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(17,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(18,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                            "])),(e()(),o._16(20,0,null,null,3,"a",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.start(!1)&&o}return o},O.b,O.a)),o._15(21,1097728,null,0,D.a,[[8,""],d.a,o.p,o.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),o._40(22,0,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(26,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),o._15(27,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                            "])),(e()(),o._16(29,0,null,null,3,"a",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.start(!0)&&o}return o},O.b,O.a)),o._15(30,1097728,null,0,D.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(31,0,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._40(-1,2,["\n                            "]))],function(e,n){e(n,21,0,"light","");e(n,30,0,"")},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_lesson.youhaveseen")));e(n,22,0,o._41(n,22,0,o._29(n,23).transform("core.no")));e(n,31,0,o._41(n,31,0,o._29(n,32).transform("core.yes")))})}function View_AddonModLessonIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(1,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,18,{contentLabel:0}),o._37(603979776,19,{_buttons:1}),o._37(603979776,20,{_icons:1}),o._15(5,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(8,0,null,2,1,"p",[],[[8,"innerHTML",1]],null,null,null,null)),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(11,0,null,2,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.start(!1)&&o}return o},O.b,O.a)),o._15(12,1097728,[[19,4]],0,D.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(13,0,["\n                                    ","\n                                    "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(15,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(16,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(-1,0,["\n                                "])),(e()(),o._40(-1,2,["\n                            "]))],function(e,n){e(n,12,0,"");e(n,16,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_lesson.leftduringtimed")));e(n,13,0,o._41(n,13,0,o._29(n,14).transform("addon.mod_lesson.continue")));e(n,15,0,o._29(n,16)._hidden)})}function View_AddonModLessonIndexComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(1,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,21,{contentLabel:0}),o._37(603979776,22,{_buttons:1}),o._37(603979776,23,{_icons:1}),o._15(5,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(8,0,null,2,1,"p",[],[[8,"innerHTML",1]],null,null,null,null)),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                            "]))],null,function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_lesson.leftduringtimednoretake")))})}function View_AddonModLessonIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.start(!1)&&o}return o},O.b,O.a)),o._15(1,1097728,[[25,4]],0,D.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(2,0,["\n                                    ","\n                                    "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(4,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(-1,0,["\n                                "]))],function(e,n){e(n,1,0,"");e(n,5,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.start")));e(n,4,0,o._29(n,5)._hidden)})}function View_AddonModLessonIndexComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.start(!1)&&o}return o},O.b,O.a)),o._15(1,1097728,[[25,4]],0,D.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(2,0,["\n                                    ","\n                                    "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n                                "]))],function(e,n){e(n,1,0,"");e(n,5,0,"search")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("addon.mod_lesson.preview")));e(n,4,0,o._29(n,5)._hidden)})}function View_AddonModLessonIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(1,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,24,{contentLabel:0}),o._37(603979776,25,{_buttons:1}),o._37(603979776,26,{_icons:1}),o._15(5,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._11(16777216,[[4,2]],2,1,null,View_AddonModLessonIndexComponent_19)),o._15(9,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._11(16777216,[[4,2]],2,1,null,View_AddonModLessonIndexComponent_20)),o._15(12,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                            "]))],function(e,n){var t=n.component;e(n,9,0,!t.canManage);e(n,12,0,t.canManage)},null)}function View_AddonModLessonIndexComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(1,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,27,{contentLabel:0}),o._37(603979776,28,{_buttons:1}),o._37(603979776,29,{_icons:1}),o._15(5,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(8,0,null,2,6,"a",[["block",""],["icon-end",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.start(!0)&&o}return o},O.b,O.a)),o._15(9,1097728,[[28,4]],0,D.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(10,0,["\n                                    ","\n                                    "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(12,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(13,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"],md:[1,"md"]},null),(e()(),o._40(-1,0,["\n                                "])),(e()(),o._40(-1,2,["\n                            "]))],function(e,n){e(n,9,0,"");e(n,13,0,"arrow-forward","ios-arrow-forward")},function(e,n){e(n,10,0,o._41(n,10,0,o._29(n,11).transform("addon.mod_lesson.continue")));e(n,12,0,o._29(n,13)._hidden)})}function View_AddonModLessonIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,[[4,2]],null,1,null,View_AddonModLessonIndexComponent_15)),o._15(3,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                            "])),(e()(),o._11(16777216,[[4,2]],null,1,null,View_AddonModLessonIndexComponent_16)),o._15(6,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                            "])),(e()(),o._11(16777216,[[4,2]],null,1,null,View_AddonModLessonIndexComponent_17)),o._15(9,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                            "])),(e()(),o._11(16777216,[[4,2]],null,1,null,View_AddonModLessonIndexComponent_18)),o._15(12,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                            "])),(e()(),o._11(16777216,[[4,2]],null,1,null,View_AddonModLessonIndexComponent_21)),o._15(15,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "]))],function(e,n){var t=n.component;e(n,3,0,t.leftDuringTimed&&!t.lesson.timelimit&&!t.finishedOffline);e(n,6,0,t.leftDuringTimed&&t.lesson.timelimit&&t.lesson.retake&&!t.finishedOffline);e(n,9,0,t.leftDuringTimed&&t.lesson.timelimit&&!t.lesson.retake);e(n,12,0,!t.leftDuringTimed&&!t.finishedOffline);e(n,15,0,t.finishedOffline)},null)}function View_AddonModLessonIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"ion-list",[],null,null,null,null,null)),o._15(1,16384,null,0,R.a,[d.a,o.p,o.K,b.a,H.l,w.a],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,[[4,2]],null,1,null,View_AddonModLessonIndexComponent_13)),o._15(4,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                        "])),(e()(),o._11(16777216,[[4,2]],null,1,null,View_AddonModLessonIndexComponent_14)),o._15(7,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){var t=n.component;e(n,4,0,t.retakeToReview);e(n,7,0,t.lesson&&(!t.preventMessages||!t.preventMessages.length))},null)}function View_AddonModLessonIndexComponent_8(e){return o._42(0,[(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(1,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,N.b,N.a)),o._15(2,49152,null,0,B.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,[[4,2]],null,1,null,View_AddonModLessonIndexComponent_9)),o._15(6,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,[[4,2]],null,1,null,View_AddonModLessonIndexComponent_10)),o._15(10,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,[[4,2]],null,1,null,View_AddonModLessonIndexComponent_11)),o._15(14,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._16(16,0,null,null,5,"core-loading",[],null,null,null,V.b,V.a)),o._15(17,638976,null,0,W.a,[a.a,o.p,K.a,P.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n                    "])),(e()(),o._11(16777216,[[4,2]],0,1,null,View_AddonModLessonIndexComponent_12)),o._15(20,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,2,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,6,0,t.lesson&&t.preventMessages&&t.preventMessages.length);e(n,10,0,t.hasOffline);e(n,14,0,t.askPassword);e(n,17,0,!t.showSpinner);e(n,20,0,t.lesson&&(!t.preventMessages||!t.preventMessages.length)||t.retakeToReview)},null)}function View_AddonModLessonIndexComponent_25(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-label",[["id","addon-mod_lesson-groupslabel"]],null,null,null,null,null)),o._15(1,16384,[[32,4]],0,v.a,[d.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"addon-mod_lesson-groupslabel")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.groupsseparate")))})}function View_AddonModLessonIndexComponent_26(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-label",[["id","addon-mod_lesson-groupslabel"]],null,null,null,null,null)),o._15(1,16384,[[32,4]],0,v.a,[d.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,"addon-mod_lesson-groupslabel")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("core.groupsvisible")))})}function View_AddonModLessonIndexComponent_27(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),o._15(1,16384,[[35,4]],0,q.a,[o.p],{value:[0,"value"]},null),(e()(),o._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.id)},function(e,n){e(n,2,0,n.context.$implicit.name)})}function View_AddonModLessonIndexComponent_24(e){return o._42(0,[(e()(),o._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(1,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(603979776,32,{contentLabel:0}),o._37(603979776,33,{_buttons:1}),o._37(603979776,34,{_icons:1}),o._15(5,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._11(16777216,[[30,2]],1,1,null,View_AddonModLessonIndexComponent_25)),o._15(8,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._11(16777216,[[30,2]],1,1,null,View_AddonModLessonIndexComponent_26)),o._15(11,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-mod_lesson-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,14)._click(t)&&r}if("keyup.space"===n){r=!1!==o._29(e,14)._keyup()&&r}if("ngModelChange"===n){r=!1!==(i.group=t)&&r}if("ionChange"===n){r=!1!==i.setGroup(i.group)&&r}return r},G.b,G.a)),o._15(14,1228800,null,1,j.a,[E.a,m.a,d.a,o.p,o.K,[2,h.a],Q.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),o._37(603979776,35,{options:1}),o._35(1024,null,p.l,function(e){return[e]},[j.a]),o._15(17,671744,null,0,p.q,[[8,null],[8,null],[8,null],[2,p.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,p.m,null,[p.q]),o._15(19,16384,null,0,p.n,[p.m],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_27)),o._15(22,802816,null,0,U.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,2,["\n                    "]))],function(e,n){var t=n.component;e(n,8,0,t.groupInfo.separateGroups);e(n,11,0,t.groupInfo.visibleGroups);e(n,14,0,"action-sheet");e(n,17,0,t.group);e(n,22,0,t.groupInfo.groups)},function(e,n){e(n,13,0,o._29(n,14)._disabled,o._29(n,19).ngClassUntouched,o._29(n,19).ngClassTouched,o._29(n,19).ngClassPristine,o._29(n,19).ngClassDirty,o._29(n,19).ngClassValid,o._29(n,19).ngClassInvalid,o._29(n,19).ngClassPending)})}function View_AddonModLessonIndexComponent_28(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"core-empty-box",[["icon","stats"]],null,null,null,z.b,z.a)),o._15(1,49152,null,0,$.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                    "]))],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("addon.mod_lesson.nolessonattemptsgroup",e(n,2,0,t.selectedGroupName))),"stats")},null)}function View_AddonModLessonIndexComponent_29(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-empty-box",[["icon","stats"]],null,null,null,z.b,z.a)),o._15(1,49152,null,0,$.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                    "]))],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.nolessonattempts")),"stats")},null)}function View_AddonModLessonIndexComponent_32(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.avescore))))})}function View_AddonModLessonIndexComponent_33(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_34(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.highscore))))})}function View_AddonModLessonIndexComponent_35(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_36(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.lowscore))))})}function View_AddonModLessonIndexComponent_37(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_31(e){return o._42(0,[(e()(),o._16(0,0,null,null,52,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(1,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,36,{contentLabel:0}),o._37(603979776,37,{_buttons:1}),o._37(603979776,38,{_icons:1}),o._15(5,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(7,0,null,2,44,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(8,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._16(10,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(11,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(13,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(14,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_32)),o._15(18,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_33)),o._15(21,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._40(-1,null,["\n\n                                    "])),(e()(),o._16(24,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(25,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(27,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(28,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_34)),o._15(32,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_35)),o._15(35,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._40(-1,null,["\n\n                                    "])),(e()(),o._16(38,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(39,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(41,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(42,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_36)),o._15(46,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_37)),o._15(49,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._40(-1,2,["\n                            "]))],function(e,n){var t=n.component;e(n,18,0,t.overview.numofattempts>0);e(n,21,0,t.overview.numofattempts<=0);e(n,32,0,null!=t.overview.highscore);e(n,35,0,null==t.overview.highscore);e(n,46,0,null!=t.overview.lowscore);e(n,49,0,null==t.overview.lowscore)},function(e,n){e(n,14,0,o._41(n,14,0,o._29(n,15).transform("addon.mod_lesson.averagescore")));e(n,28,0,o._41(n,28,0,o._29(n,29).transform("addon.mod_lesson.highscore")));e(n,42,0,o._41(n,42,0,o._29(n,43).transform("addon.mod_lesson.lowscore")))})}function View_AddonModLessonIndexComponent_38(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.avetimeReadable)})}function View_AddonModLessonIndexComponent_39(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_40(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.hightimeReadable)})}function View_AddonModLessonIndexComponent_41(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_42(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.lowtimeReadable)})}function View_AddonModLessonIndexComponent_43(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_45(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.avescore))))})}function View_AddonModLessonIndexComponent_46(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_44(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(3,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(4,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_45)),o._15(8,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_46)),o._15(11,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "]))],function(e,n){var t=n.component;e(n,8,0,t.overview.numofattempts>0);e(n,11,0,t.overview.numofattempts<=0)},function(e,n){e(n,4,0,o._41(n,4,0,o._29(n,5).transform("addon.mod_lesson.averagescore")))})}function View_AddonModLessonIndexComponent_47(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.avetimeReadable)})}function View_AddonModLessonIndexComponent_48(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_50(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.highscore))))})}function View_AddonModLessonIndexComponent_51(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_49(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(3,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(4,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_50)),o._15(8,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_51)),o._15(11,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "]))],function(e,n){var t=n.component;e(n,8,0,null!=t.overview.highscore);e(n,11,0,null==t.overview.highscore)},function(e,n){e(n,4,0,o._41(n,4,0,o._29(n,5).transform("addon.mod_lesson.highscore")))})}function View_AddonModLessonIndexComponent_52(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.hightimeReadable)})}function View_AddonModLessonIndexComponent_53(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_55(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.percentagenumber",e(n,2,0,t.overview.lowscore))))})}function View_AddonModLessonIndexComponent_56(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_54(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(3,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(4,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_55)),o._15(8,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_56)),o._15(11,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "]))],function(e,n){var t=n.component;e(n,8,0,null!=t.overview.lowscore);e(n,11,0,null==t.overview.lowscore)},function(e,n){e(n,4,0,o._41(n,4,0,o._29(n,5).transform("addon.mod_lesson.lowscore")))})}function View_AddonModLessonIndexComponent_57(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.overview.lowtimeReadable)})}function View_AddonModLessonIndexComponent_58(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_lesson.notcompleted")))})}function View_AddonModLessonIndexComponent_30(e){return o._42(0,[(e()(),o._16(0,0,null,null,161,"ion-card",[["class","addon-mod_lesson-lessonstats"]],null,null,null,null,null)),o._15(1,16384,null,0,c.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(3,0,null,null,3,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),o._15(4,16384,null,0,Y.a,[d.a,o.p,o.K],null,null),(e()(),o._40(5,null,["\n                            ","\n                        "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n\n                        "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(9,0,null,null,59,"ion-list",[["class","hidden-phone"]],null,null,null,null,null)),o._15(10,16384,null,0,R.a,[d.a,o.p,o.K,b.a,H.l,w.a],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_31)),o._15(13,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                            "])),(e()(),o._16(15,0,null,null,52,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(16,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,39,{contentLabel:0}),o._37(603979776,40,{_buttons:1}),o._37(603979776,41,{_icons:1}),o._15(20,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(22,0,null,2,44,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(23,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._16(25,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(26,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(28,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(29,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_38)),o._15(33,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_39)),o._15(36,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._40(-1,null,["\n\n                                    "])),(e()(),o._16(39,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(40,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(42,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(43,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_40)),o._15(47,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_41)),o._15(50,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._40(-1,null,["\n\n                                    "])),(e()(),o._16(53,0,null,null,12,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(54,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(56,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(57,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_42)),o._15(61,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_43)),o._15(64,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,null,["\n\n                        "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(71,0,null,null,89,"ion-list",[["class","hidden-tablet"]],null,null,null,null,null)),o._15(72,16384,null,0,R.a,[d.a,o.p,o.K,b.a,H.l,w.a],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(74,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(75,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,42,{contentLabel:0}),o._37(603979776,43,{_buttons:1}),o._37(603979776,44,{_icons:1}),o._15(79,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(81,0,null,2,19,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(82,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_44)),o._15(85,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                                    "])),(e()(),o._16(87,0,null,null,12,"ion-col",[["class","col"]],[[1,"text-center",0]],null,null,null,null)),o._15(88,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(90,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(91,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_47)),o._15(95,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_48)),o._15(98,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._40(-1,null,["\n\n                            "])),(e()(),o._16(103,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(104,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,45,{contentLabel:0}),o._37(603979776,46,{_buttons:1}),o._37(603979776,47,{_icons:1}),o._15(108,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(110,0,null,2,19,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(111,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_49)),o._15(114,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                                    "])),(e()(),o._16(116,0,null,null,12,"ion-col",[["class","col"]],[[1,"text-center",0]],null,null,null,null)),o._15(117,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(119,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(120,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_52)),o._15(124,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_53)),o._15(127,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._40(-1,null,["\n\n                            "])),(e()(),o._16(132,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,f.b,f.a)),o._15(133,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,48,{contentLabel:0}),o._37(603979776,49,{_buttons:1}),o._37(603979776,50,{_icons:1}),o._15(137,16384,null,0,g.a,[],null,null),(e()(),o._40(-1,2,["\n                                "])),(e()(),o._16(139,0,null,2,19,"ion-row",[["class","row"]],null,null,null,null,null)),o._15(140,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_54)),o._15(143,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                                    "])),(e()(),o._16(145,0,null,null,12,"ion-col",[["class","col"]],[[1,"text-center",0]],null,null,null,null)),o._15(146,16384,null,0,L.a,[],null,null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._16(148,0,null,null,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(149,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_57)),o._15(153,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_58)),o._15(156,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                                    "])),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){var t=n.component;e(n,13,0,t.overview.lessonscored);e(n,33,0,null!=t.overview.avetime&&t.overview.numofattempts);e(n,36,0,null==t.overview.avetime||!t.overview.numofattempts);e(n,47,0,null!=t.overview.hightime);e(n,50,0,null==t.overview.hightime);e(n,61,0,null!=t.overview.lowtime);e(n,64,0,null==t.overview.lowtime);e(n,85,0,t.overview.lessonscored);e(n,95,0,null!=t.overview.avetime&&t.overview.numofattempts);e(n,98,0,null==t.overview.avetime||!t.overview.numofattempts);e(n,114,0,t.overview.lessonscored);e(n,124,0,null!=t.overview.hightime);e(n,127,0,null==t.overview.hightime);e(n,143,0,t.overview.lessonscored);e(n,153,0,null!=t.overview.lowtime);e(n,156,0,null==t.overview.lowtime)},function(e,n){var t=n.component;e(n,5,0,o._41(n,5,0,o._29(n,6).transform("addon.mod_lesson.lessonstats")));e(n,29,0,o._41(n,29,0,o._29(n,30).transform("addon.mod_lesson.averagetime")));e(n,43,0,o._41(n,43,0,o._29(n,44).transform("addon.mod_lesson.hightime")));e(n,57,0,o._41(n,57,0,o._29(n,58).transform("addon.mod_lesson.lowtime")));e(n,87,0,!!t.overview.lessonscored||null);e(n,91,0,o._41(n,91,0,o._29(n,92).transform("addon.mod_lesson.averagetime")));e(n,116,0,!!t.overview.lessonscored||null);e(n,120,0,o._41(n,120,0,o._29(n,121).transform("addon.mod_lesson.hightime")));e(n,145,0,!!t.overview.lessonscored||null);e(n,149,0,o._41(n,149,0,o._29(n,150).transform("addon.mod_lesson.lowtime")))})}function View_AddonModLessonIndexComponent_60(e){return o._42(0,[(e()(),o._16(0,0,null,null,19,"a",[["class","item item-block"],["ion-item",""],["navPush","AddonModLessonUserRetakePage"],["text-wrap",""]],[[1,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;if("click"===n){r=!1!==o._29(e,6).onClick()&&r}return r},f.b,f.a)),o._15(1,1097728,null,3,h.a,[m.a,d.a,o.p,o.K,[2,_.a]],null,null),o._37(335544320,51,{contentLabel:0}),o._37(603979776,52,{_buttons:1}),o._37(603979776,53,{_icons:1}),o._15(5,16384,null,0,g.a,[],null,null),o._15(6,16384,null,0,X.a,[[2,T.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),o._33(7,{courseId:0,lessonId:1,userId:2}),o._15(8,1064960,null,0,J.a,[X.a,[2,Q.a]],null,null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(10,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,Z.b,Z.a)),o._15(11,16384,null,0,ee.a,[],null,null),o._15(12,770048,null,0,ne.a,[T.a,te.a,P.a,oe.a,K.a,[2,re.a]],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(14,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),o._40(15,null,["",""])),(e()(),o._40(-1,2,["\n                            "])),(e()(),o._16(17,0,null,2,1,"core-progress-bar",[],null,null,null,ie.b,ie.a)),o._15(18,573440,null,0,le.a,[se.c],{progress:[0,"progress"]},null),(e()(),o._40(-1,2,["\n                        "]))],function(e,n){var t=n.component;e(n,6,0,"AddonModLessonUserRetakePage",e(n,7,0,t.courseId,t.lesson.id,n.context.$implicit.id));e(n,12,0,n.context.$implicit,n.context.$implicit.id,t.courseId);e(n,18,0,n.context.$implicit.bestgrade)},function(e,n){e(n,0,0,o._29(n,8)._href);e(n,15,0,n.context.$implicit.fullname)})}function View_AddonModLessonIndexComponent_59(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,c.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(3,0,null,null,3,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),o._15(4,16384,null,0,Y.a,[d.a,o.p,o.K],null,null),(e()(),o._40(5,null,["\n                            ","\n                        "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n\n                        "])),(e()(),o._11(16777216,[[30,2]],null,1,null,View_AddonModLessonIndexComponent_60)),o._15(9,802816,null,0,U.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,9,0,n.component.overview.students)},function(e,n){e(n,5,0,o._41(n,5,0,o._29(n,6).transform("addon.mod_lesson.overview")))})}function View_AddonModLessonIndexComponent_23(e){return o._42(0,[(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(1,0,null,null,21,"core-loading",[],null,null,null,V.b,V.a)),o._15(2,638976,null,0,W.a,[a.a,o.p,K.a,P.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._11(16777216,[[30,2]],0,1,null,View_AddonModLessonIndexComponent_24)),o._15(6,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n                    "])),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._11(16777216,[[30,2]],0,1,null,View_AddonModLessonIndexComponent_28)),o._15(10,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._11(16777216,[[30,2]],0,1,null,View_AddonModLessonIndexComponent_29)),o._15(13,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n                    "])),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._11(16777216,[[30,2]],0,1,null,View_AddonModLessonIndexComponent_30)),o._15(17,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n                    "])),(e()(),o._40(-1,0,["\n                    "])),(e()(),o._11(16777216,[[30,2]],0,1,null,View_AddonModLessonIndexComponent_59)),o._15(21,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,2,0,t.reportLoaded);e(n,6,0,t.groupInfo&&(t.groupInfo.separateGroups||t.groupInfo.visibleGroups));e(n,10,0,!t.overview&&t.selectedGroupName);e(n,13,0,!t.overview&&!t.selectedGroupName);e(n,17,0,t.overview);e(n,21,0,t.overview)},null)}function View_AddonModLessonIndexComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,n,t){var o=!0;if("ionSelect"===n){o=!1!==e.component.reportsSelected()&&o}return o},ae.b,ae.a)),o._15(1,245760,null,2,ue.a,[de.a,o.p,A.a,P.a],{title:[0,"title"]},{ionSelect:"ionSelect"}),o._37(603979776,30,{template:0}),o._37(335544320,31,{content:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(0,[[30,2]],null,0,null,View_AddonModLessonIndexComponent_23)),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,4).transform("addon.mod_lesson.reports")))},null)}function View_AddonModLessonIndexComponent_0(e){return o._42(0,[o._37(402653184,1,{tabsComponent:0}),o._37(671088640,2,{formElement:0}),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(3,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,ce.b,ce.a)),o._15(4,245760,null,1,pe.a,[o.p,fe.a,A.a],null,null),o._37(603979776,3,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(7,0,null,0,23,"core-context-menu",[],null,null,null,he.b,he.a)),o._15(8,245760,null,0,l.a,[a.a,me.a,o.p,A.a,[2,ue.a],P.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLessonIndexComponent_1)),o._15(11,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLessonIndexComponent_2)),o._15(14,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLessonIndexComponent_3)),o._15(17,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLessonIndexComponent_4)),o._15(20,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLessonIndexComponent_5)),o._15(23,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLessonIndexComponent_6)),o._15(26,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLessonIndexComponent_7)),o._15(29,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(34,0,null,null,20,"core-loading",[["class","core-loading-center"]],null,null,null,V.b,V.a)),o._15(35,638976,null,0,W.a,[a.a,o.p,K.a,P.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(37,0,null,0,16,"core-tabs",[],null,null,null,_e.b,_e.a)),o._15(38,4964352,[[1,4]],0,de.a,[o.p,M.a,A.a,oe.a,ge.a,b.a,a.a],{selectedIndex:[0,"selectedIndex"],hideUntil:[1,"hideUntil"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(41,0,null,0,7,"core-tab",[],null,[[null,"ionSelect"]],function(e,n,t){var o=!0;if("ionSelect"===n){o=!1!==e.component.indexSelected()&&o}return o},ae.b,ae.a)),o._15(42,245760,null,2,ue.a,[de.a,o.p,A.a,P.a],{title:[0,"title"]},{ionSelect:"ionSelect"}),o._37(603979776,4,{template:0}),o._37(335544320,5,{content:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(0,[[4,2]],null,0,null,View_AddonModLessonIndexComponent_8)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLessonIndexComponent_22)),o._15(52,16384,null,0,U.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0),e(n,8,0);e(n,11,0,t.externalUrl);e(n,14,0,t.description);e(n,17,0,t.blog);e(n,20,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,23,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,26,0,t.prefetchStatusIcon);e(n,29,0,t.size);e(n,35,0,t.loaded);e(n,38,0,t.selectedTab,t.loaded);e(n,42,0,o._41(n,42,0,o._29(n,45).transform("addon.mod_lesson.preview")));e(n,52,0,t.canViewReports)},null)}t.d(n,"b",function(){return Ee}),n.c=View_AddonModLessonIndexComponent_0,t.d(n,"a",function(){return Me});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(49),d=t(9),c=t(90),p=t(24),f=t(32),h=t(22),m=t(20),_=t(28),g=t(34),v=t(68),C=t(738),y=t(378),P=t(3),A=t(5),b=t(17),I=t(111),S=t(91),E=t(36),M=t(30),w=t(35),k=t(376),T=t(21),O=t(47),D=t(44),x=t(165),F=t(121),L=t(120),U=t(8),R=t(87),H=t(45),N=t(123),B=t(113),V=t(55),W=t(52),K=t(10),q=t(109),G=t(124),j=t(110),Q=t(60),z=t(125),$=t(115),Y=t(317),X=t(230),J=t(278),Z=t(214),ee=t(161),ne=t(183),te=t(2),oe=t(11),re=t(29),ie=t(486),le=t(320),se=t(80),ae=t(732),ue=t(77),de=t(202),ce=t(97),pe=t(88),fe=t(7),he=t(92),me=t(71),_e=t(731),ge=t(127),ve=t(510),Ce=t(170),ye=t(72),Pe=t(286),Ae=t(287),be=t(331),Ie=t(25),Se=t(46),Ee=o._14({encapsulation:2,styles:[],data:{}}),Me=o._12("addon-mod-lesson-index",ve.a,function View_AddonModLessonIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-lesson-index",[],null,null,null,View_AddonModLessonIndexComponent_0,Ee)),o._15(1,245760,null,0,ve.a,[o.u,Ce.a,[2,M.a],ye.a,Pe.a,Ae.a,P.a,be.a,T.a,Ie.a,Se.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group",action:"action"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModLtiIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModLtiIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModLtiIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModLtiIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModLtiIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,u.b,u.a)),o._15(1,49152,null,0,d.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId)},null)}function View_AddonModLtiIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,19,"core-navbar-buttons",[["end",""]],null,null,null,c.b,c.a)),o._15(2,245760,null,1,p.a,[o.p,f.a,h.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,14,"core-context-menu",[],null,null,null,m.b,m.a)),o._15(6,245760,null,0,l.a,[a.a,_.a,o.p,h.a,[2,g.a],v.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLtiIndexComponent_1)),o._15(9,16384,null,0,C.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLtiIndexComponent_2)),o._15(12,16384,null,0,C.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLtiIndexComponent_3)),o._15(15,16384,null,0,C.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLtiIndexComponent_4)),o._15(18,16384,null,0,C.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(23,0,null,null,16,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,y.b,y.a)),o._15(24,638976,null,0,P.a,[a.a,o.p,A.a,v.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModLtiIndexComponent_5)),o._15(27,16384,null,0,C.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(29,0,null,0,9,"div",[["padding",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(31,0,null,null,6,"button",[["block",""],["icon-left",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.launch()&&o}return o},b.b,b.a)),o._15(32,1097728,null,0,I.a,[[8,""],S.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(34,0,null,0,1,"ion-icon",[["name","link"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(35,147456,null,0,E.a,[S.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(36,0,["\n            ","\n        "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.blog);e(n,18,0,t.loaded&&t.isOnline);e(n,24,0,t.loaded);e(n,27,0,t.lti&&t.lti.showdescriptionlaunch);e(n,32,0,"");e(n,35,0,"link")},function(e,n){e(n,34,0,o._29(n,35)._hidden);e(n,36,0,o._41(n,36,0,o._29(n,37).transform("addon.mod_lti.launchactivity")))})}t.d(n,"b",function(){return T}),n.c=View_AddonModLtiIndexComponent_0,t.d(n,"a",function(){return O});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(123),d=t(113),c=t(97),p=t(88),f=t(7),h=t(5),m=t(92),_=t(71),g=t(77),v=t(3),C=t(8),y=t(55),P=t(52),A=t(10),b=t(47),I=t(44),S=t(9),E=t(49),M=t(511),w=t(30),k=t(298),T=o._14({encapsulation:2,styles:[],data:{}}),O=o._12("addon-mod-lti-index",M.a,function View_AddonModLtiIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-lti-index",[],null,null,null,View_AddonModLtiIndexComponent_0,T)),o._15(1,245760,null,0,M.a,[o.u,[2,w.a],k.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModPageIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModPageIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModPageIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModPageIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,600)},null)}function View_AddonModPageIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",500)},null)}function View_AddonModPageIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,u.b,u.a)),o._15(1,49152,null,0,d.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId)},null)}function View_AddonModPageIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[["class","addon-mod_page-timemodified"],["padding-bottom",""]],null,null,null,null,null)),(e()(),o._40(1,null,["\n            ",": ","\n        "])),o._32(131072,s.a,[a.a,o.i]),o._34(3,1)],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.lastmodified")),o._41(n,1,1,e(n,3,0,o._29(n.parent,0),1e3*t.page.timemodified)))})}function View_AddonModPageIndexComponent_0(e){return o._42(0,[o._32(0,c.a,[p.a,f.a]),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(2,0,null,null,26,"core-navbar-buttons",[["end",""]],null,null,null,h.b,h.a)),o._15(3,245760,null,1,m.a,[o.p,p.a,_.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(6,0,null,0,21,"core-context-menu",[],null,null,null,g.b,g.a)),o._15(7,245760,null,0,l.a,[a.a,v.a,o.p,_.a,[2,C.a],y.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModPageIndexComponent_1)),o._15(10,16384,null,0,P.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModPageIndexComponent_2)),o._15(13,16384,null,0,P.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModPageIndexComponent_3)),o._15(16,16384,null,0,P.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(18,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(19,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModPageIndexComponent_4)),o._15(23,16384,null,0,P.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModPageIndexComponent_5)),o._15(26,16384,null,0,P.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(31,0,null,null,14,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,A.b,A.a)),o._15(32,638976,null,0,b.a,[a.a,o.p,I.a,y.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModPageIndexComponent_6)),o._15(35,16384,null,0,P.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(37,0,null,0,7,"div",[["padding",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(39,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(40,540672,null,0,S.a,[o.p,E.a,_.a,M.a,a.a,w.a,y.a,k.a,p.a,T.a,O.a,D.a,[2,x.a],[2,F.a],[2,L.a],U.a,I.a,R.a,H.a,N.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModPageIndexComponent_7)),o._15(43,16384,null,0,P.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,0,["\n\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0),e(n,7,0);e(n,10,0,t.externalUrl);e(n,13,0,t.description);e(n,16,0,t.blog);e(n,19,0,o._41(n,19,0,o._29(n,20).transform("core.refresh")),t.refreshIcon,!1,700);e(n,23,0,t.prefetchStatusIcon);e(n,26,0,t.size);e(n,32,0,t.loaded);e(n,35,0,t.displayDescription);e(n,40,0,t.contents,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,43,0,t.displayTimemodified&&t.page&&t.page.timemodified)},null)}t.d(n,"b",function(){return G}),n.c=View_AddonModPageIndexComponent_0,t.d(n,"a",function(){return j});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(123),d=t(113),c=t(228),p=t(7),f=t(25),h=t(97),m=t(88),_=t(5),g=t(92),v=t(71),C=t(77),y=t(3),P=t(8),A=t(55),b=t(52),I=t(10),S=t(48),E=t(2),M=t(12),w=t(17),k=t(23),T=t(18),O=t(11),D=t(16),x=t(21),F=t(30),L=t(29),U=t(43),R=t(41),H=t(31),N=t(37),B=t(512),V=t(222),W=t(14),K=t(332),q=t(405),G=o._14({encapsulation:2,styles:[],data:{}}),j=o._12("addon-mod-page-index",B.a,function View_AddonModPageIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-page-index",[],null,null,null,View_AddonModPageIndexComponent_0,G)),o._15(1,245760,null,0,B.a,[o.u,V.a,W.a,O.a,K.a,q.a,y.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModQuizIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModQuizIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModQuizIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModQuizIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModQuizIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function View_AddonModQuizIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModQuizIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",400)},null)}function View_AddonModQuizIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,n.context.$implicit)})}function View_AddonModQuizIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,5,{contentLabel:0}),o._37(603979776,6,{_buttons:1}),o._37(603979776,7,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_quiz.grademethod")));e(n,12,0,t.quiz.gradeMethodReadable)})}function View_AddonModQuizIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,8,{contentLabel:0}),o._37(603979776,9,{_buttons:1}),o._37(603979776,10,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform("core.lastsync")));e(n,12,0,t.syncTime)})}function View_AddonModQuizIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,m.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,11,"ion-list",[],null,null,null,null,null)),o._15(4,16384,null,0,_.a,[p.a,o.p,o.K,g.a,v.l,C.a],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_9)),o._15(7,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_10)),o._15(10,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_11)),o._15(13,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,7,0,t.accessRules);e(n,10,0,t.quiz&&t.quiz.gradeMethodReadable);e(n,13,0,t.syncTime)},null)}function View_AddonModQuizIndexComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,P.a,[],null,null),(e()(),o._16(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),o._40(3,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,3,0,o._41(n,3,0,o._29(n,4).transform("addon.mod_quiz.attemptnumber")))})}function View_AddonModQuizIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-col",[["class","hidden-tablet col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,P.a,[],null,null),(e()(),o._16(2,0,null,null,1,"b",[],null,null,null,null,null)),(e()(),o._40(-1,null,["#"]))],null,null)}function View_AddonModQuizIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,P.a,[],null,null),(e()(),o._16(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),o._40(3,null,[""," / ",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,3,0,o._41(n,3,0,o._29(n,4).transform("addon.mod_quiz.marks")),t.quiz.sumGradesFormatted)})}function View_AddonModQuizIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,P.a,[],null,null),(e()(),o._16(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),o._40(3,null,[""," / ",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,3,0,o._41(n,3,0,o._29(n,4).transform("addon.mod_quiz.grade")),t.quiz.gradeFormatted)})}function View_AddonModQuizIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,P.a,[],null,null),(e()(),o._40(2,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("addon.mod_quiz.preview")))})}function View_AddonModQuizIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,P.a,[],null,null),(e()(),o._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.attempt)})}function View_AddonModQuizIndexComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function View_AddonModQuizIndexComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,P.a,[],null,null),(e()(),o._16(2,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(3,null,["",""]))],null,function(e,n){e(n,3,0,n.parent.context.$implicit.readableMark)})}function View_AddonModQuizIndexComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,P.a,[],null,null),(e()(),o._16(2,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(3,null,["",""]))],null,function(e,n){e(n,3,0,n.parent.context.$implicit.readableGrade)})}function View_AddonModQuizIndexComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,35,"a",[["class","item item-block"],["ion-item",""],["navPush","AddonModQuizAttemptPage"],["text-wrap",""]],[[1,"aria-label",0],[1,"href",4]],[[null,"click"]],function(e,n,t){var r=!0;if("click"===n){r=!1!==o._29(e,8).onClick()&&r}return r},u.b,u.a)),o._15(1,278528,null,0,y.i,[o.v,o.w,o.p,o.L],{ngClass:[0,"ngClass"]},null),o._33(2,{"addon-mod_quiz-highlighted core-white-push-arrow":0}),o._15(3,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,14,{contentLabel:0}),o._37(603979776,15,{_buttons:1}),o._37(603979776,16,{_icons:1}),o._15(7,16384,null,0,h.a,[],null,null),o._15(8,16384,null,0,A.a,[[2,b.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),o._33(9,{courseId:0,quizId:1,attemptId:2}),o._15(10,1064960,null,0,I.a,[A.a,[2,S.a]],null,null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(13,0,null,2,21,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),o._15(14,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_18)),o._15(17,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_19)),o._15(20,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(22,0,null,null,5,"ion-col",[["class","col"],["col-7",""]],null,null,null,null,null)),o._15(23,16384,null,0,P.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_20)),o._15(26,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_21)),o._15(30,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_22)),o._15(33,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,1,0,e(n,2,0,n.context.$implicit.highlightGrade));e(n,8,0,"AddonModQuizAttemptPage",e(n,9,0,t.courseId,t.quiz.id,n.context.$implicit.id));e(n,17,0,t.quiz.showAttemptColumn&&n.context.$implicit.preview);e(n,20,0,t.quiz.showAttemptColumn&&!n.context.$implicit.preview);e(n,26,0,n.context.$implicit.readableState);e(n,30,0,t.quiz.showMarkColumn);e(n,33,0,t.quiz.showGradeColumn)},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,11).transform("core.seemoredetail")),o._29(n,10)._href)})}function View_AddonModQuizIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,52,"ion-card",[["class","addon-mod_quiz-table"]],null,null,null,null,null)),o._15(1,16384,null,0,m.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,9,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),o._15(4,16384,null,0,M.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(6,0,null,null,5,"div",[["class","safe-padding-horizontal"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(8,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),o._40(9,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(14,0,null,null,37,"ion-list",[],null,null,null,null,null)),o._15(15,16384,null,0,_.a,[p.a,o.p,o.K,g.a,v.l,C.a],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(18,0,null,null,28,"ion-item",[["class","addon-mod_quiz-table-header item item-block"],["detail-push",""],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(19,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,11,{contentLabel:0}),o._37(603979776,12,{_buttons:1}),o._37(603979776,13,{_icons:1}),o._15(23,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(25,0,null,2,20,"ion-row",[["align-items-center",""],["class","row"]],null,null,null,null,null)),o._15(26,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_13)),o._15(29,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_14)),o._15(32,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(34,0,null,null,4,"ion-col",[["class","col"],["col-7",""]],null,null,null,null,null)),o._15(35,16384,null,0,P.a,[],null,null),(e()(),o._16(36,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),o._40(37,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_15)),o._15(41,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_16)),o._15(44,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,2,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_17)),o._15(50,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,29,0,t.quiz.showAttemptColumn);e(n,32,0,t.quiz.showAttemptColumn);e(n,41,0,t.quiz.showMarkColumn);e(n,44,0,t.quiz.showGradeColumn);e(n,50,0,t.attempts)},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.mod_quiz.summaryofattempts")));e(n,37,0,o._41(n,37,0,o._29(n,38).transform("addon.mod_quiz.attemptstate")))})}function View_AddonModQuizIndexComponent_24(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,17,{contentLabel:0}),o._37(603979776,18,{_buttons:1}),o._37(603979776,19,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(6,2,["",""]))],null,function(e,n){e(n,6,0,n.component.gradeResult)})}function View_AddonModQuizIndexComponent_25(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,20,{contentLabel:0}),o._37(603979776,21,{_buttons:1}),o._37(603979776,22,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(6,2,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,6,0,o._41(n,6,0,o._29(n,7).transform("core.course.overriddennotice")))})}function View_AddonModQuizIndexComponent_26(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,23,{contentLabel:0}),o._37(603979776,24,{_buttons:1}),o._37(603979776,25,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._16(12,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(13,540672,null,0,w.a,[o.p,k.a,T.a,O.a,a.a,g.a,D.a,x.a,F.a,L.a,U.a,R.a,[2,b.a],[2,H.a],[2,N.a],B.a,V.a,W.a,K.a,q.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,13,0,t.gradebookFeedback,t.component,t.componentId,"module",t.module.id,t.courseId)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_quiz.comment")))})}function View_AddonModQuizIndexComponent_27(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,26,{contentLabel:0}),o._37(603979776,27,{_buttons:1}),o._37(603979776,28,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._16(12,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(13,540672,null,0,w.a,[o.p,k.a,T.a,O.a,a.a,g.a,D.a,x.a,F.a,L.a,U.a,R.a,[2,b.a],[2,H.a],[2,N.a],B.a,V.a,W.a,K.a,q.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,13,0,t.overallFeedback,t.component,t.componentId,"module",t.module.id,t.courseId)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_quiz.overallfeedback")))})}function View_AddonModQuizIndexComponent_23(e){return o._42(0,[(e()(),o._16(0,0,null,null,18,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,m.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,14,"ion-list",[],null,null,null,null,null)),o._15(4,16384,null,0,_.a,[p.a,o.p,o.K,g.a,v.l,C.a],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_24)),o._15(7,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_25)),o._15(10,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_26)),o._15(13,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_27)),o._15(16,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,7,0,t.gradeResult);e(n,10,0,t.gradeOverridden);e(n,13,0,t.gradebookFeedback);e(n,16,0,t.quiz.showFeedbackColumn&&t.overallFeedback)},null)}function View_AddonModQuizIndexComponent_29(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,29,{contentLabel:0}),o._37(603979776,30,{_buttons:1}),o._37(603979776,31,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,n.context.$implicit)})}function View_AddonModQuizIndexComponent_30(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,32,{contentLabel:0}),o._37(603979776,33,{_buttons:1}),o._37(603979776,34,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_quiz.noquestions")))})}function View_AddonModQuizIndexComponent_32(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function View_AddonModQuizIndexComponent_31(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,35,{contentLabel:0}),o._37(603979776,36,{_buttons:1}),o._37(603979776,37,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModQuizIndexComponent_32)),o._15(12,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,12,0,n.component.unsupportedQuestions)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_quiz.errorquestionsnotsupported")))})}function View_AddonModQuizIndexComponent_34(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function View_AddonModQuizIndexComponent_33(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,38,{contentLabel:0}),o._37(603979776,39,{_buttons:1}),o._37(603979776,40,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModQuizIndexComponent_34)),o._15(12,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,12,0,n.component.unsupportedRules)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_quiz.errorrulesnotsupported")))})}function View_AddonModQuizIndexComponent_35(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,41,{contentLabel:0}),o._37(603979776,42,{_buttons:1}),o._37(603979776,43,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),(e()(),o._40(-1,2,["\n            "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_quiz.errorbehaviournotsupported")));e(n,12,0,t.quiz.preferredbehaviour)})}function View_AddonModQuizIndexComponent_36(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,G.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n                ","\n            "])),o._33(5,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function View_AddonModQuizIndexComponent_38(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.context.$implicit)})}function View_AddonModQuizIndexComponent_37(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"ion-item",[["class","core-warning-item item item-block"],["text-wrap",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,44,{contentLabel:0}),o._37(603979776,45,{_buttons:1}),o._37(603979776,46,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModQuizIndexComponent_38)),o._15(16,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,16,0,n.component.unsupportedQuestions)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_quiz.canattemptbutnotsubmit")));e(n,12,0,o._41(n,12,0,o._29(n,13).transform("addon.mod_quiz.warningquestionsnotsupported")))})}function View_AddonModQuizIndexComponent_39(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,47,{contentLabel:0}),o._37(603979776,48,{_buttons:1}),o._37(603979776,49,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,3,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.attemptQuiz()&&o}return o},j.b,j.a)),o._15(8,1097728,[[48,4]],0,Q.a,[[8,""],p.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(9,0,["\n                    ","\n                "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,8,0,"")},function(e,n){var t=n.component;e(n,9,0,o._41(n,9,0,o._29(n,10).transform(t.buttonText)))})}function View_AddonModQuizIndexComponent_40(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,50,{contentLabel:0}),o._37(603979776,51,{_buttons:1}),o._37(603979776,52,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,7,"a",[["block",""],["core-link",""],["icon-end",""],["ion-button",""]],[[8,"href",4]],null,null,j.b,j.a)),o._15(8,1097728,[[51,4]],0,Q.a,[[8,""],p.a,o.p,o.K],{block:[0,"block"]},null),o._15(9,81920,null,0,z.a,[o.p,T.a,D.a,k.a,x.a,R.a,[2,b.a],[2,H.a],[2,N.a],O.a],null,null),(e()(),o._40(10,0,["\n                    ","\n                    "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(12,0,null,0,1,"ion-icon",[["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(13,147456,null,0,G.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,8,0,""),e(n,9,0);e(n,13,0,"open")},function(e,n){e(n,7,0,n.component.externalUrl);e(n,10,0,o._41(n,10,0,o._29(n,11).transform("core.openinbrowser")));e(n,12,0,o._29(n,13)._hidden)})}function View_AddonModQuizIndexComponent_41(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,u.b,u.a)),o._15(1,1097728,null,3,d.a,[c.a,p.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,53,{contentLabel:0}),o._37(603979776,54,{_buttons:1}),o._37(603979776,55,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(7,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,$.b,$.a)),o._15(8,114688,null,0,Y.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n            "]))],function(e,n){e(n,8,0)},function(e,n){e(n,7,0,o._29(n,8)._paused)})}function View_AddonModQuizIndexComponent_28(e){return o._42(0,[(e()(),o._16(0,0,null,null,42,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,m.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,38,"ion-list",[],null,null,null,null,null)),o._15(4,16384,null,0,_.a,[p.a,o.p,o.K,g.a,v.l,C.a],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_29)),o._15(8,802816,null,0,y.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_30)),o._15(11,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_31)),o._15(14,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_33)),o._15(17,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_35)),o._15(20,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_36)),o._15(24,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_37)),o._15(28,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_39)),o._15(32,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_40)),o._15(36,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModQuizIndexComponent_41)),o._15(40,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,8,0,t.preventMessages);e(n,11,0,0===t.quiz.hasquestions);e(n,14,0,!t.hasSupportedQuestions&&t.unsupportedQuestions&&t.unsupportedQuestions.length);e(n,17,0,t.unsupportedRules&&t.unsupportedRules.length);e(n,20,0,!1===t.behaviourSupported);e(n,24,0,t.buttonText&&t.hasOffline&&!t.showStatusSpinner);e(n,28,0,t.hasSupportedQuestions&&t.unsupportedQuestions&&t.unsupportedQuestions.length);e(n,32,0,t.buttonText&&!t.showStatusSpinner);e(n,36,0,!t.buttonText&&(!t.hasSupportedQuestions&&t.unsupportedQuestions&&t.unsupportedQuestions.length||t.unsupportedRules&&t.unsupportedRules.length||!1===t.behaviourSupported));e(n,40,0,t.showStatusSpinner)},null)}function View_AddonModQuizIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,X.b,X.a)),o._15(2,245760,null,1,J.a,[o.p,F.a,T.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,23,"core-context-menu",[],null,null,null,Z.b,Z.a)),o._15(6,245760,null,0,l.a,[a.a,ee.a,o.p,T.a,[2,ne.a],D.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_1)),o._15(9,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_2)),o._15(12,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_3)),o._15(15,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_4)),o._15(18,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_5)),o._15(21,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_6)),o._15(24,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_7)),o._15(27,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(32,0,null,null,21,"core-loading",[["class","core-loading-center"]],null,null,null,te.b,te.a)),o._15(33,638976,null,0,oe.a,[a.a,o.p,V.a,D.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(35,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,re.b,re.a)),o._15(36,49152,null,0,ie.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_8)),o._15(40,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_12)),o._15(44,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_23)),o._15(48,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModQuizIndexComponent_28)),o._15(52,16384,null,0,y.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.blog);e(n,18,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,21,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,24,0,t.prefetchStatusIcon);e(n,27,0,t.size);e(n,33,0,t.loaded);e(n,36,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,40,0,t.quiz&&t.quiz.gradeMethodReadable||t.accessRules&&t.accessRules.length||t.syncTime);e(n,44,0,t.quiz&&t.attempts&&t.attempts.length);e(n,48,0,t.quiz&&t.showResults&&(t.gradeResult||t.gradeOverridden||t.gradebookFeedback||t.quiz.showFeedbackColumn&&t.overallFeedback));e(n,52,0,t.quiz)},null)}t.d(n,"b",function(){return fe}),n.c=View_AddonModQuizIndexComponent_0,t.d(n,"a",function(){return he});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(32),d=t(22),c=t(20),p=t(9),f=t(28),h=t(34),m=t(90),_=t(87),g=t(17),v=t(45),C=t(35),y=t(8),P=t(120),A=t(230),b=t(21),I=t(278),S=t(60),E=t(121),M=t(317),w=t(48),k=t(2),T=t(5),O=t(12),D=t(3),x=t(23),F=t(7),L=t(18),U=t(11),R=t(16),H=t(30),N=t(29),B=t(43),V=t(10),W=t(41),K=t(31),q=t(37),G=t(49),j=t(47),Q=t(44),z=t(175),$=t(122),Y=t(102),X=t(97),J=t(88),Z=t(92),ee=t(71),ne=t(77),te=t(55),oe=t(52),re=t(123),ie=t(113),le=t(513),se=t(168),ae=t(253),ue=t(263),de=t(259),ce=t(118),pe=t(333),fe=o._14({encapsulation:2,styles:[],data:{}}),he=o._12("addon-mod-quiz-index",le.a,function View_AddonModQuizIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-quiz-index",[],null,null,null,View_AddonModQuizIndexComponent_0,fe)),o._15(1,245760,null,0,le.a,[o.u,se.a,[2,H.a],ae.a,ue.a,de.a,ce.a,pe.a,b.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModResourceIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModResourceIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModResourceIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModResourceIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,600)},null)}function View_AddonModResourceIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",500)},null)}function View_AddonModResourceIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,u.b,u.a)),o._15(1,49152,null,0,d.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId)},null)}function View_AddonModResourceIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"core-iframe",[],null,null,null,c.b,c.a)),o._15(3,638976,null,0,p.a,[f.a,h.a,m.a,_.c,g.a,v.a,C.a,[2,y.a]],{src:[0,"src"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.src)},null)}function View_AddonModResourceIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),o._15(3,540672,null,0,P.a,[o.p,A.a,m.a,b.a,a.a,I.a,C.a,v.a,f.a,S.a,E.a,M.a,[2,g.a],[2,w.a],[2,y.a],h.a,k.a,T.a,O.a,D.a,o.W],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.contentText,!1)},null)}function View_AddonModResourceIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"div",[["padding",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,6,"a",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.open()&&o}return o},x.b,x.a)),o._15(3,1097728,null,0,F.a,[[8,""],L.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(5,0,null,0,1,"ion-icon",[["name","document"],["role","img"],["start",""]],[[2,"hide",null]],null,null,null,null)),o._15(6,147456,null,0,U.a,[L.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(7,0,["\n            ","\n        "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,"");e(n,6,0,"document")},function(e,n){e(n,5,0,o._29(n,6)._hidden);e(n,7,0,o._41(n,7,0,o._29(n,8).transform("addon.mod_resource.openthefile")))})}function View_AddonModResourceIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,26,"core-navbar-buttons",[["end",""]],null,null,null,R.b,R.a)),o._15(2,245760,null,1,H.a,[o.p,f.a,m.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,21,"core-context-menu",[],null,null,null,N.b,N.a)),o._15(6,245760,null,0,l.a,[a.a,B.a,o.p,m.a,[2,V.a],C.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModResourceIndexComponent_1)),o._15(9,16384,null,0,W.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModResourceIndexComponent_2)),o._15(12,16384,null,0,W.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModResourceIndexComponent_3)),o._15(15,16384,null,0,W.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(17,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(18,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModResourceIndexComponent_4)),o._15(22,16384,null,0,W.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModResourceIndexComponent_5)),o._15(25,16384,null,0,W.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(30,0,null,null,14,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,K.b,K.a)),o._15(31,638976,null,0,q.a,[a.a,o.p,k.a,C.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModResourceIndexComponent_6)),o._15(34,16384,null,0,W.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModResourceIndexComponent_7)),o._15(37,16384,null,0,W.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModResourceIndexComponent_8)),o._15(40,16384,null,0,W.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModResourceIndexComponent_9)),o._15(43,16384,null,0,W.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.blog);e(n,18,0,o._41(n,18,0,o._29(n,19).transform("core.refresh")),t.refreshIcon,!1,700);e(n,22,0,t.prefetchStatusIcon);e(n,25,0,t.size);e(n,31,0,t.loaded);e(n,34,0,"iframe"!=t.mode&&("embedded"!=t.mode||t.displayDescription));e(n,37,0,"iframe"==t.mode);e(n,40,0,"embedded"==t.mode);e(n,43,0,"external"==t.mode)},null)}t.d(n,"b",function(){return Y}),n.c=View_AddonModResourceIndexComponent_0,t.d(n,"a",function(){return X});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(123),d=t(113),c=t(323),p=t(257),f=t(7),h=t(43),m=t(5),_=t(80),g=t(21),v=t(23),C=t(3),y=t(29),P=t(48),A=t(2),b=t(12),I=t(17),S=t(18),E=t(11),M=t(16),w=t(30),k=t(10),T=t(41),O=t(31),D=t(37),x=t(47),F=t(44),L=t(9),U=t(49),R=t(97),H=t(88),N=t(92),B=t(71),V=t(77),W=t(8),K=t(55),q=t(52),G=t(514),j=t(223),Q=t(14),z=t(406),$=t(299),Y=o._14({encapsulation:2,styles:[],data:{}}),X=o._12("addon-mod-resource-index",G.a,function View_AddonModResourceIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-resource-index",[],null,null,null,View_AddonModResourceIndexComponent_0,Y)),o._15(1,245760,null,0,G.a,[o.u,j.a,Q.a,E.a,z.a,$.a,A.a,C.a,S.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModScormIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModScormIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModScormIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModScormIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModScormIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function View_AddonModScormIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModScormIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",400)},null)}function View_AddonModScormIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"div",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n        ","\n    "]))],function(e,n){e(n,3,0,"information-circle")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,t.scorm.warningMessage)})}function View_AddonModScormIndexComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[["item-content",""]],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.unlimited")))})}function View_AddonModScormIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.scorm.maxattempt)})}function View_AddonModScormIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._11(16777216,null,3,1,null,View_AddonModScormIndexComponent_13)),o._15(12,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._11(16777216,null,3,1,null,View_AddonModScormIndexComponent_14)),o._15(15,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "]))],function(e,n){var t=n.component;e(n,12,0,0==t.scorm.maxattempt);e(n,15,0,t.scorm.maxattempt>0)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_scorm.noattemptsallowed")))})}function View_AddonModScormIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,5,{contentLabel:0}),o._37(603979776,6,{_buttons:1}),o._37(603979776,7,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(11,0,null,3,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),(e()(),o._40(-1,2,["\n                    "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_scorm.noattemptsmade")));e(n,12,0,t.scorm.numAttempts)})}function View_AddonModScormIndexComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.grade)})}function View_AddonModScormIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[["item-content",""]],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_scorm.cannotcalculategrade")))})}function View_AddonModScormIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,8,{contentLabel:0}),o._37(603979776,9,{_buttons:1}),o._37(603979776,10,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),o._40(8,null,[""," ",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._11(16777216,null,3,1,null,View_AddonModScormIndexComponent_17)),o._15(12,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._11(16777216,null,3,1,null,View_AddonModScormIndexComponent_18)),o._15(15,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "]))],function(e,n){e(n,12,0,-1!=n.context.$implicit.grade);e(n,15,0,-1==n.context.$implicit.grade)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_scorm.gradeforattempt")),n.context.$implicit.number)})}function View_AddonModScormIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_12)),o._15(3,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_15)),o._15(6,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_16)),o._15(9,802816,null,0,_.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,3,0,t.scorm.maxattempt>=0);e(n,6,0,t.scorm.numAttempts>=0);e(n,9,0,t.scorm.onlineAttempts)},null)}function View_AddonModScormIndexComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.grade)})}function View_AddonModScormIndexComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[["item-content",""]],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_scorm.cannotcalculategrade")))})}function View_AddonModScormIndexComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_scorm.offlineattemptnote")))})}function View_AddonModScormIndexComponent_23(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_scorm.offlineattemptovermax")))})}function View_AddonModScormIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,22,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,11,{contentLabel:0}),o._37(603979776,12,{_buttons:1}),o._37(603979776,13,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),o._40(8,null,[""," ",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,3,1,null,View_AddonModScormIndexComponent_20)),o._15(12,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,3,1,null,View_AddonModScormIndexComponent_21)),o._15(15,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModScormIndexComponent_22)),o._15(18,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModScormIndexComponent_23)),o._15(21,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,12,0,-1!=n.context.$implicit.grade);e(n,15,0,-1==n.context.$implicit.grade);e(n,18,0,0==t.scorm.maxattempt||n.context.$implicit.number<=t.scorm.maxattempt);e(n,21,0,0!=t.scorm.maxattempt&&n.context.$implicit.number>t.scorm.maxattempt)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_scorm.gradeforattempt")),n.context.$implicit.number)})}function View_AddonModScormIndexComponent_24(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,14,{contentLabel:0}),o._37(603979776,15,{_buttons:1}),o._37(603979776,16,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(11,0,null,3,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),(e()(),o._40(-1,2,["\n                "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_scorm.grademethod")));e(n,12,0,t.scorm.gradeMethodReadable)})}function View_AddonModScormIndexComponent_26(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[["item-content",""]],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.scorm.grade)})}function View_AddonModScormIndexComponent_27(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[["item-content",""]],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_scorm.cannotcalculategrade")))})}function View_AddonModScormIndexComponent_25(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,17,{contentLabel:0}),o._37(603979776,18,{_buttons:1}),o._37(603979776,19,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,3,1,null,View_AddonModScormIndexComponent_26)),o._15(12,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,3,1,null,View_AddonModScormIndexComponent_27)),o._15(15,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,12,0,-1!=t.scorm.grade);e(n,15,0,-1==t.scorm.grade)},function(e,n){e(n,8,0,o._41(n,8,0,o._29(n,9).transform("addon.mod_scorm.gradereported")))})}function View_AddonModScormIndexComponent_28(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,20,{contentLabel:0}),o._37(603979776,21,{_buttons:1}),o._37(603979776,22,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,2,"h3",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),(e()(),o._40(-1,2,["\n                "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform("core.lastsync")));e(n,12,0,t.syncTime)})}function View_AddonModScormIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,32,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,9,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),o._15(4,16384,null,0,v.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(6,0,null,null,5,"div",[["class","safe-padding-horizontal"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(8,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),o._40(9,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(14,0,null,null,17,"ion-list",[],null,null,null,null,null)),o._15(15,16384,null,0,C.a,[d.a,o.p,o.K,y.a,P.l,A.a],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_11)),o._15(18,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_19)),o._15(21,802816,null,0,_.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_24)),o._15(24,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_25)),o._15(27,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_28)),o._15(30,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,18,0,t.scorm.displayattemptstatus);e(n,21,0,t.scorm.offlineAttempts);e(n,24,0,t.scorm.displayattemptstatus&&t.scorm.gradeMethodReadable);e(n,27,0,t.scorm.displayattemptstatus&&t.scorm.grade);e(n,30,0,t.syncTime)},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.mod_scorm.attempts")))})}function View_AddonModScormIndexComponent_29(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n            ","\n        "])),o._33(5,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function View_AddonModScormIndexComponent_32(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),o._15(1,16384,[[26,4]],0,b.a,[o.p],{value:[0,"value"]},null),(e()(),o._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.identifier)},function(e,n){e(n,2,0,n.context.$implicit.title)})}function View_AddonModScormIndexComponent_31(e){return o._42(0,[(e()(),o._16(0,0,null,null,23,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,23,{contentLabel:0}),o._37(603979776,24,{_buttons:1}),o._37(603979776,25,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),o._15(8,16384,[[23,4]],0,I.a,[d.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._40(9,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(12,0,null,3,10,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,13)._click(t)&&r}if("keyup.space"===n){r=!1!==o._29(e,13)._keyup()&&r}if("ngModelChange"===n){r=!1!==(i.currentOrganization.identifier=t)&&r}if("ionChange"===n){r=!1!==i.loadOrganization()&&r}return r},S.b,S.a)),o._15(13,1228800,null,1,E.a,[M.a,f.a,d.a,o.p,o.K,[2,p.a],w.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),o._37(603979776,26,{options:1}),o._35(1024,null,k.l,function(e){return[e]},[E.a]),o._15(16,671744,null,0,k.q,[[8,null],[8,null],[8,null],[2,k.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,k.m,null,[k.q]),o._15(18,16384,null,0,k.n,[k.m],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_32)),o._15(21,802816,null,0,_.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,13,0,"action-sheet");e(n,16,0,t.currentOrganization.identifier);e(n,21,0,t.organizations)},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.mod_scorm.organizations")));e(n,12,0,o._29(n,13)._disabled,o._29(n,18).ngClassUntouched,o._29(n,18).ngClassTouched,o._29(n,18).ngClassPristine,o._29(n,18).ngClassDirty,o._29(n,18).ngClassValid,o._29(n,18).ngClassInvalid,o._29(n,18).ngClassPending)})}function View_AddonModScormIndexComponent_33(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,27,{contentLabel:0}),o._37(603979776,28,{_buttons:1}),o._37(603979776,29,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,T.b,T.a)),o._15(8,114688,null,0,O.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n                "]))],function(e,n){e(n,8,0)},function(e,n){e(n,7,0,o._29(n,8)._paused)})}function View_AddonModScormIndexComponent_35(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{number:0}),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("addon.mod_scorm.dataattemptshown",e(n,2,0,t.attemptToContinue))))})}function View_AddonModScormIndexComponent_38(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"a",[["class","core-clickable"]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.open(t,e.parent.parent.context.$implicit.id)&&o}return o},null,null)),(e()(),o._16(1,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(2,540672,null,0,D.a,[o.p,x.a,F.a,L.a,a.a,y.a,U.a,R.a,H.a,N.a,B.a,V.a,[2,W.a],[2,K.a],[2,q.a],G.a,j.a,Q.a,z.a,$.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null)],function(e,n){var t=n.component;e(n,2,0,n.parent.parent.context.$implicit.title,"module",t.module.id,t.courseId)},null)}function View_AddonModScormIndexComponent_39(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),o._16(1,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(2,540672,null,0,D.a,[o.p,x.a,F.a,L.a,a.a,y.a,U.a,R.a,H.a,N.a,B.a,V.a,[2,W.a],[2,K.a],[2,q.a],G.a,j.a,Q.a,z.a,$.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null)],function(e,n){var t=n.component;e(n,2,0,n.parent.parent.context.$implicit.title,"module",t.module.id,t.courseId)},null)}function View_AddonModScormIndexComponent_40(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),o._40(1,null,["(",": ",")"])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_scorm.score")),n.parent.parent.context.$implicit.score_raw)})}function View_AddonModScormIndexComponent_37(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"p",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(2,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,Y.b,Y.a)),o._15(3,704512,null,0,X.a,[o.p,d.a],{name:[0,"name"],ariaLabel:[1,"ariaLabel"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_38)),o._15(6,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_39)),o._15(9,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_40)),o._15(12,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                        "]))],function(e,n){var t=n.component;e(n,3,0,n.parent.context.$implicit.image.icon,n.parent.context.$implicit.image.description);e(n,6,0,n.parent.context.$implicit.prereq&&n.parent.context.$implicit.launch);e(n,9,0,!n.parent.context.$implicit.prereq||!n.parent.context.$implicit.launch);e(n,12,0,t.accessInfo&&t.accessInfo.canviewscores&&n.parent.context.$implicit.score_raw)},null)}function View_AddonModScormIndexComponent_36(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_37)),o._15(3,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,3,0,n.context.$implicit.isvisible)},function(e,n){e(n,0,0,o._19(2,"core-padding-",n.context.$implicit.level," addon-mod_scorm-type-",n.context.$implicit.scormtype,""))})}function View_AddonModScormIndexComponent_34(e){return o._42(0,[(e()(),o._16(0,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,30,{contentLabel:0}),o._37(603979776,31,{_buttons:1}),o._37(603979776,32,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModScormIndexComponent_35)),o._15(9,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(11,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModScormIndexComponent_36)),o._15(15,802816,null,0,_.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,9,0,t.attemptToContinue);e(n,15,0,t.toc)},function(e,n){e(n,12,0,n.component.currentOrganization.title)})}function View_AddonModScormIndexComponent_30(e){return o._42(0,[(e()(),o._16(0,0,null,null,23,"ion-card",[["class","addon-mod_scorm-toc"]],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,6,"ion-card-header",[["text-wrap",""]],null,null,null,null,null)),o._15(4,16384,null,0,v.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(6,0,null,null,2,"h2",[],null,null,null,null,null)),(e()(),o._40(7,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(11,0,null,null,11,"ion-list",[],null,null,null,null,null)),o._15(12,16384,null,0,C.a,[d.a,o.p,o.K,y.a,P.l,A.a],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_31)),o._15(15,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_33)),o._15(18,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_34)),o._15(21,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,15,0,t.organizations.length>1);e(n,18,0,t.scorm.displaycoursestructure&&t.loadingToc);e(n,21,0,t.scorm.displaycoursestructure&&!t.loadingToc)},function(e,n){e(n,7,0,o._41(n,7,0,o._29(n,8).transform("addon.mod_scorm.contents")))})}function View_AddonModScormIndexComponent_41(e){return o._42(0,[(e()(),o._16(0,0,null,null,31,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(4,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,33,{contentLabel:0}),o._37(603979776,34,{_buttons:1}),o._37(603979776,35,{_icons:1}),o._15(8,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(10,0,null,2,2,"p",[["class","text-danger"]],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(15,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(16,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,36,{contentLabel:0}),o._37(603979776,37,{_buttons:1}),o._37(603979776,38,{_icons:1}),o._15(20,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(22,0,null,2,7,"a",[["block",""],["core-link",""],["icon-end",""],["ion-button",""]],[[8,"href",4]],null,null,J.b,J.a)),o._15(23,1097728,[[37,4]],0,Z.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),o._15(24,81920,null,0,ee.a,[o.p,F.a,U.a,x.a,R.a,V.a,[2,W.a],[2,K.a],[2,q.a],L.a],null,null),(e()(),o._40(25,0,["\n                    ","\n                    "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._16(27,0,null,0,1,"ion-icon",[["name","open"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(28,147456,null,0,u.a,[d.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._40(-1,2,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,23,0,""),e(n,24,0);e(n,28,0,"open")},function(e,n){var t=n.component;e(n,11,0,o._41(n,11,0,o._29(n,12).transform(t.errorMessage)));e(n,22,0,t.externalUrl);e(n,25,0,o._41(n,25,0,o._29(n,26).transform("core.openinbrowser")));e(n,27,0,o._29(n,28)._hidden)})}function View_AddonModScormIndexComponent_42(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(4,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,39,{contentLabel:0}),o._37(603979776,40,{_buttons:1}),o._37(603979776,41,{_icons:1}),o._15(8,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._16(10,0,null,2,2,"p",[["class","text-danger"]],null,null,null,null,null)),(e()(),o._40(11,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],null,function(e,n){e(n,11,0,o._41(n,11,0,o._29(n,12).transform("addon.mod_scorm.exceededmaxattempts")))})}function View_AddonModScormIndexComponent_44(e){return o._42(0,[(e()(),o._16(0,0,null,null,51,"div",[["name","mode"],["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.scormOptions.mode=t)&&o}return o},null,null)),o._15(1,1064960,null,1,ne.a,[o.K,o.p,o.i],null,null),o._37(335544320,42,{_header:0}),o._35(1024,null,k.l,function(e){return[e]},[ne.a]),o._15(4,671744,null,0,k.q,[[8,null],[8,null],[8,null],[2,k.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),o._35(2048,null,k.m,null,[k.q]),o._15(6,16384,null,0,k.n,[k.m],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(8,0,null,null,10,"ion-item",[["class","item item-block"]],null,null,null,c.b,c.a)),o._15(9,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,43,{contentLabel:0}),o._37(603979776,44,{_buttons:1}),o._37(603979776,45,{_icons:1}),o._15(13,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(15,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(16,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(20,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,c.b,c.a)),o._15(21,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,46,{contentLabel:0}),o._37(603979776,47,{_buttons:1}),o._37(603979776,48,{_icons:1}),o._15(25,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(27,0,null,1,3,"ion-label",[],null,null,null,null,null)),o._15(28,16384,[[46,4]],0,I.a,[d.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._40(29,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(32,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var r=!0;if("click"===n){r=!1!==o._29(e,33)._click(t)&&r}return r},te.b,te.a)),o._15(33,245760,null,0,oe.a,[f.a,d.a,o.p,o.K,[2,p.a],[2,ne.a]],{value:[0,"value"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(36,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,c.b,c.a)),o._15(37,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,49,{contentLabel:0}),o._37(603979776,50,{_buttons:1}),o._37(603979776,51,{_icons:1}),o._15(41,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(43,0,null,1,3,"ion-label",[],null,null,null,null,null)),o._15(44,16384,[[49,4]],0,I.a,[d.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._40(45,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(48,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var r=!0;if("click"===n){r=!1!==o._29(e,49)._click(t)&&r}return r},te.b,te.a)),o._15(49,245760,null,0,oe.a,[f.a,d.a,o.p,o.K,[2,p.a],[2,ne.a]],{value:[0,"value"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,4,0,"mode",t.scormOptions.mode);e(n,33,0,t.modeBrowser);e(n,49,0,t.modeNormal)},function(e,n){e(n,0,0,o._29(n,6).ngClassUntouched,o._29(n,6).ngClassTouched,o._29(n,6).ngClassPristine,o._29(n,6).ngClassDirty,o._29(n,6).ngClassValid,o._29(n,6).ngClassInvalid,o._29(n,6).ngClassPending);e(n,16,0,o._41(n,16,0,o._29(n,17).transform("addon.mod_scorm.mode")));e(n,29,0,o._41(n,29,0,o._29(n,30).transform("addon.mod_scorm.browse")));e(n,32,0,o._29(n,33)._disabled);e(n,45,0,o._41(n,45,0,o._29(n,46).transform("addon.mod_scorm.normal")));e(n,48,0,o._29(n,49)._disabled)})}function View_AddonModScormIndexComponent_45(e){return o._42(0,[(e()(),o._16(0,0,null,null,19,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,52,{contentLabel:0}),o._37(603979776,53,{_buttons:1}),o._37(603979776,54,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),o._15(8,16384,[[52,4]],0,I.a,[d.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._40(9,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(12,0,null,4,6,"ion-checkbox",[["item-end",""],["name","newAttempt"]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,13)._click(t)&&r}if("ngModelChange"===n){r=!1!==(i.scormOptions.newAttempt=t)&&r}return r},re.b,re.a)),o._15(13,1228800,null,0,ie.a,[d.a,f.a,[2,p.a],o.p,o.K],null,null),o._35(1024,null,k.l,function(e){return[e]},[ie.a]),o._15(15,671744,null,0,k.q,[[8,null],[8,null],[8,null],[2,k.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),o._35(2048,null,k.m,null,[k.q]),o._15(17,16384,null,0,k.n,[k.m],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,2,["\n                "]))],function(e,n){e(n,15,0,"newAttempt",n.component.scormOptions.newAttempt)},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("addon.mod_scorm.newattempt")));e(n,12,0,o._29(n,13)._disabled,o._29(n,17).ngClassUntouched,o._29(n,17).ngClassTouched,o._29(n,17).ngClassPristine,o._29(n,17).ngClassDirty,o._29(n,17).ngClassValid,o._29(n,17).ngClassInvalid,o._29(n,17).ngClassPending)})}function View_AddonModScormIndexComponent_47(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,55,{contentLabel:0}),o._37(603979776,56,{_buttons:1}),o._37(603979776,57,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(7,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform(t.statusMessage)))})}function View_AddonModScormIndexComponent_46(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_47)),o._15(3,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(5,0,null,null,11,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,c.b,c.a)),o._15(6,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,58,{contentLabel:0}),o._37(603979776,59,{_buttons:1}),o._37(603979776,60,{_icons:1}),o._15(10,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                        "])),(e()(),o._16(12,0,null,2,3,"a",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.open(t)&&o}return o},J.b,J.a)),o._15(13,1097728,[[59,4]],0,Z.a,[[8,""],d.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(14,0,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._40(-1,null,["\n                "]))],function(e,n){e(n,3,0,n.component.statusMessage);e(n,13,0,"")},function(e,n){e(n,14,0,o._41(n,14,0,o._29(n,15).transform("addon.mod_scorm.enter")))})}function View_AddonModScormIndexComponent_49(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform(t.progressMessage)))})}function View_AddonModScormIndexComponent_50(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.percentagenumber",e(n,2,0,t.percentage))))})}function View_AddonModScormIndexComponent_48(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-center",""]],null,null,null,c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,d.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,61,{contentLabel:0}),o._37(603979776,62,{_buttons:1}),o._37(603979776,63,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,2,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,T.b,T.a)),o._15(8,114688,null,0,O.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModScormIndexComponent_49)),o._15(11,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModScormIndexComponent_50)),o._15(14,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,8,0);e(n,11,0,t.progressMessage);e(n,14,0,t.percentage<=100)},function(e,n){e(n,7,0,o._29(n,8)._paused)})}function View_AddonModScormIndexComponent_43(e){return o._42(0,[(e()(),o._16(0,0,null,null,22,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,g.a,[d.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(3,0,null,null,18,"ion-list",[],null,null,null,null,null)),o._15(4,16384,null,0,C.a,[d.a,o.p,o.K,y.a,P.l,A.a],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_44)),o._15(8,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_45)),o._15(12,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_46)),o._15(16,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_48)),o._15(20,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,!t.scorm.hidebrowse&&!t.skip);e(n,12,0,!t.scorm.forcenewattempt&&t.scorm.numAttempts>0&&!t.scorm.incomplete&&t.scorm.attemptsLeft>0&&!t.skip);e(n,16,0,!t.downloading&&!t.skip);e(n,20,0,t.downloading)},null)}function View_AddonModScormIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,25,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_10)),o._15(4,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_29)),o._15(8,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_30)),o._15(12,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_41)),o._15(16,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_42)),o._15(20,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModScormIndexComponent_43)),o._15(24,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,(t.scorm.displayattemptstatus||t.scorm.offlineAttempts&&t.scorm.offlineAttempts.length)&&!t.skip);e(n,8,0,!t.errorMessage&&t.hasOffline);e(n,12,0,t.scorm&&t.organizations&&(t.scorm.displaycoursestructure&&t.organizations.length||t.organizations.length>1)&&!t.skip);e(n,16,0,t.errorMessage);e(n,20,0,!t.errorMessage&&t.scorm&&t.scorm.attemptsLeft<=0);e(n,24,0,!t.errorMessage&&t.scorm&&(!t.scorm.lastattemptlock||t.scorm.attemptsLeft>0))},null)}function View_AddonModScormIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,le.b,le.a)),o._15(2,245760,null,1,se.a,[o.p,H.a,F.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,23,"core-context-menu",[],null,null,null,ae.b,ae.a)),o._15(6,245760,null,0,l.a,[a.a,ue.a,o.p,F.a,[2,de.a],U.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModScormIndexComponent_1)),o._15(9,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModScormIndexComponent_2)),o._15(12,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModScormIndexComponent_3)),o._15(15,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModScormIndexComponent_4)),o._15(18,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModScormIndexComponent_5)),o._15(21,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModScormIndexComponent_6)),o._15(24,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModScormIndexComponent_7)),o._15(27,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(32,0,null,null,12,"core-loading",[["class","core-loading-center"]],null,null,null,ce.b,ce.a)),o._15(33,638976,null,0,pe.a,[a.a,o.p,j.a,U.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(35,0,null,0,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,fe.b,fe.a)),o._15(36,49152,null,0,he.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModScormIndexComponent_8)),o._15(40,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModScormIndexComponent_9)),o._15(43,16384,null,0,_.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.blog);e(n,18,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,21,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,24,0,t.prefetchStatusIcon);e(n,27,0,t.size);e(n,33,0,t.loaded);e(n,36,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,40,0,t.scorm&&t.scorm.warningMessage);e(n,43,0,t.scorm&&t.loaded&&!t.scorm.warningMessage)},null)}t.d(n,"b",function(){return Ae}),n.c=View_AddonModScormIndexComponent_0,t.d(n,"a",function(){return be});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(49),d=t(9),c=t(32),p=t(22),f=t(20),h=t(28),m=t(34),_=t(8),g=t(90),v=t(317),C=t(87),y=t(17),P=t(45),A=t(35),b=t(109),I=t(68),S=t(124),E=t(110),M=t(36),w=t(60),k=t(24),T=t(122),O=t(102),D=t(48),x=t(2),F=t(5),L=t(12),U=t(3),R=t(23),H=t(7),N=t(18),B=t(11),V=t(16),W=t(21),K=t(30),q=t(29),G=t(43),j=t(10),Q=t(41),z=t(31),$=t(37),Y=t(81),X=t(76),J=t(47),Z=t(44),ee=t(175),ne=t(138),te=t(177),oe=t(146),re=t(251),ie=t(201),le=t(97),se=t(88),ae=t(92),ue=t(71),de=t(77),ce=t(55),pe=t(52),fe=t(123),he=t(113),me=t(515),_e=t(234),ge=t(386),ve=t(264),Ce=t(288),ye=t(334),Pe=t(51),Ae=o._14({encapsulation:2,styles:[],data:{}}),be=o._12("addon-mod-scorm-index",me.a,function View_AddonModScormIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-scorm-index",[],null,null,null,View_AddonModScormIndexComponent_0,Ae)),o._15(1,245760,null,0,me.a,[o.u,_e.a,[2,K.a],ge.a,ve.a,Ce.a,ye.a,W.a,Pe.a,U.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModSurveyIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModSurveyIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModSurveyIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModSurveyIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModSurveyIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function View_AddonModSurveyIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModSurveyIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",400)},null)}function View_AddonModSurveyIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,u.b,u.a)),o._15(1,49152,null,0,d.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId)},null)}function View_AddonModSurveyIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"ion-card",[["padding",""]],null,null,null,null,null)),o._15(1,16384,null,0,c.a,[p.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(3,0,null,null,2,"p",[["padding",""]],null,null,null,null,null)),(e()(),o._40(4,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(7,0,null,null,7,"a",[["block",""],["core-link",""],["icon-start",""],["ion-button",""]],[[8,"href",4]],null,null,f.b,f.a)),o._15(8,1097728,null,0,h.a,[[8,""],p.a,o.p,o.K],{block:[0,"block"]},null),o._15(9,81920,null,0,m.a,[o.p,_.a,g.a,v.a,C.a,y.a,[2,P.a],[2,A.a],[2,b.a],I.a],null,null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(11,0,null,0,1,"ion-icon",[["name","open"],["role","img"],["start",""]],[[2,"hide",null]],null,null,null,null)),o._15(12,147456,null,0,S.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(13,0,["\n            ","\n        "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,8,0,""),e(n,9,0);e(n,12,0,"open")},function(e,n){var t=n.component;e(n,4,0,o._41(n,4,0,o._29(n,5).transform("addon.mod_survey.surveycompletednograph")));e(n,7,0,t.externalUrl);e(n,11,0,o._29(n,12)._hidden);e(n,13,0,o._41(n,13,0,o._29(n,14).transform("addon.mod_survey.results")))})}function View_AddonModSurveyIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,S.a,[p.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n        ","\n    "])),o._33(5,{$a:0}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,6).transform("core.hasdatatosync",e(n,5,0,t.moduleName))))})}function View_AddonModSurveyIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-col",[["class","col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(3,0,null,null,1,"div",[["padding",""]],null,null,null,null,null)),(e()(),o._40(4,null,["",""])),(e()(),o._40(-1,null,["\n                        "]))],null,function(e,n){e(n,4,0,n.context.$implicit)})}function View_AddonModSurveyIndexComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,34,"div",[],[[1,"padding-top",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(2,0,null,null,1,"h3",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),o._40(3,null,["",""])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(5,0,null,null,17,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),o._15(6,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(8,0,null,null,13,"ion-row",[["align-items-center",""],["class","hidden-phone row"],["no-padding",""],["nowrap",""]],null,null,null,null,null)),o._15(9,16384,null,0,w.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(11,0,null,null,6,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),o._15(12,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(14,0,null,null,2,"div",[["padding",""]],null,null,null,null,null)),(e()(),o._40(15,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModSurveyIndexComponent_14)),o._15(20,802816,null,0,k.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(24,0,null,null,9,"ion-item",[["class","addon-mod_survey-question item item-block"],["text-wrap",""]],[[2,"even",null]],null,null,T.b,T.a)),o._15(25,1097728,null,3,O.a,[D.a,p.a,o.p,o.K,[2,x.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(29,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(31,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(32,null,["",""])),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n            "]))],function(e,n){e(n,20,0,n.parent.context.$implicit.optionsArray)},function(e,n){e(n,0,0,1==n.parent.context.index);e(n,3,0,n.parent.context.$implicit.text);e(n,15,0,o._41(n,15,0,o._29(n,16).transform("addon.mod_survey.responses")));e(n,24,0,n.parent.context.even);e(n,32,0,n.parent.context.$implicit.intro)})}function View_AddonModSurveyIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-col",[["class","hidden-phone col"],["text-center",""]],null,null,null,null,null)),o._15(1,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(3,0,null,null,1,"ion-radio",[],[[1,"aria-labelledby",0],[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var r=!0;if("click"===n){r=!1!==o._29(e,4)._click(t)&&r}return r},L.b,L.a)),o._15(4,245760,null,0,U.a,[D.a,p.a,o.p,o.K,[2,O.a],[2,R.a]],{value:[0,"value"]},null),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,4,0,n.context.index+1)},function(e,n){e(n,3,0,"addon-mod_survey-"+n.parent.parent.context.$implicit.name,o._29(n,4)._disabled)})}function View_AddonModSurveyIndexComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),o._15(1,16384,[[6,4]],0,H.a,[o.p],{value:[0,"value"]},null),(e()(),o._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.index+1)},function(e,n){e(n,2,0,n.context.$implicit)})}function View_AddonModSurveyIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,52,"ion-grid",[["class","grid"],["no-padding",""],["text-wrap",""]],[[2,"even",null]],null,null,null,null)),o._15(1,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,48,"ion-row",[["align-items-center",""],["class","row"],["no-padding",""],["nowrap",""],["radio-group",""],["role","radiogroup"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.answers[e.parent.context.$implicit.name]=t)&&o}return o},null,null)),o._15(4,16384,null,0,N.t,[],{required:[0,"required"]},null),o._35(1024,null,N.k,function(e){return[e]},[N.t]),o._15(6,1064960,null,1,R.a,[o.K,o.p,o.i],null,null),o._37(335544320,5,{_header:0}),o._35(1024,null,N.l,function(e){return[e]},[R.a]),o._15(9,671744,null,0,N.q,[[8,null],[2,N.k],[8,null],[2,N.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,N.m,null,[N.q]),o._15(11,16384,null,0,N.n,[N.m],null,null),o._15(12,16384,null,0,w.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(14,0,null,null,9,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),o._15(15,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(17,0,null,null,5,"ion-label",[["padding-horizontal",""]],null,null,null,B.b,B.a)),o._15(18,16384,null,0,V.a,[p.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),o._15(19,4308992,null,0,W.a,[o.p,a.a,I.a,g.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),o._16(20,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),o._40(21,null,["","."])),(e()(),o._40(22,0,[" ",""])),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,null,["\n\n                    "])),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModSurveyIndexComponent_16)),o._15(27,802816,null,0,k.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(29,0,null,null,21,"ion-col",[["class","hidden-tablet col"]],null,null,null,null,null)),o._15(30,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(32,0,null,null,17,"ion-select",[["interface","action-sheet"],["padding",""]],[[1,"aria-labelledby",0],[1,"required",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,35)._click(t)&&r}if("keyup.space"===n){r=!1!==o._29(e,35)._keyup()&&r}if("ngModelChange"===n){r=!1!==(i.answers[e.parent.context.$implicit.name]=t)&&r}return r},K.b,K.a)),o._15(33,16384,null,0,N.t,[],{required:[0,"required"]},null),o._35(1024,null,N.k,function(e){return[e]},[N.t]),o._15(35,1228800,null,1,q.a,[G.a,D.a,p.a,o.p,o.K,[2,O.a],j.a],{interface:[0,"interface"]},null),o._37(603979776,6,{options:1}),o._35(1024,null,N.l,function(e){return[e]},[q.a]),o._15(38,671744,null,0,N.q,[[8,null],[2,N.k],[8,null],[2,N.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,N.m,null,[N.q]),o._15(40,16384,null,0,N.n,[N.m],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(42,0,null,null,3,"ion-option",[["disabled",""],["selected",""],["value","-1"]],null,null,null,null,null)),o._15(43,16384,[[6,4]],0,H.a,[o.p],{disabled:[0,"disabled"],selected:[1,"selected"],value:[2,"value"]},null),(e()(),o._40(44,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModSurveyIndexComponent_17)),o._15(48,802816,null,0,k.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,4,0,n.parent.context.$implicit.required);e(n,9,0,t.answers[n.parent.context.$implicit.name]);e(n,18,0,o._19(1,"addon-mod_survey-",n.parent.context.$implicit.name,""));e(n,19,0,n.parent.context.$implicit.required);e(n,27,0,n.parent.context.$implicit.optionsArray);e(n,33,0,n.parent.context.$implicit.required);e(n,35,0,"action-sheet");e(n,38,0,t.answers[n.parent.context.$implicit.name]);e(n,43,0,"","","-1");e(n,48,0,n.parent.context.$implicit.optionsArray)},function(e,n){e(n,0,0,n.parent.context.even);e(n,3,0,o._29(n,4).required?"":null,o._29(n,11).ngClassUntouched,o._29(n,11).ngClassTouched,o._29(n,11).ngClassPristine,o._29(n,11).ngClassDirty,o._29(n,11).ngClassValid,o._29(n,11).ngClassInvalid,o._29(n,11).ngClassPending);e(n,21,0,n.parent.context.$implicit.num);e(n,22,0,n.parent.context.$implicit.text);e(n,32,0,"addon-mod_survey-"+n.parent.context.$implicit.name,o._29(n,33).required?"":null,o._29(n,35)._disabled,o._29(n,40).ngClassUntouched,o._29(n,40).ngClassTouched,o._29(n,40).ngClassPristine,o._29(n,40).ngClassDirty,o._29(n,40).ngClassValid,o._29(n,40).ngClassInvalid,o._29(n,40).ngClassPending);e(n,44,0,o._41(n,44,0,o._29(n,45).transform("core.choose")))})}function View_AddonModSurveyIndexComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),o._15(1,16384,[[7,4]],0,H.a,[o.p],{value:[0,"value"]},null),(e()(),o._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.index)},function(e,n){e(n,2,0,n.context.$implicit)})}function View_AddonModSurveyIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,35,"ion-grid",[["class","grid"],["no-padding",""],["text-wrap",""]],[[2,"even",null]],null,null,null,null)),o._15(1,16384,null,0,M.a,[],null,null),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._16(3,0,null,null,31,"ion-row",[["align-items-center",""],["class","row"],["no-padding",""]],null,null,null,null,null)),o._15(4,16384,null,0,w.a,[],null,null),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(6,0,null,null,9,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),o._15(7,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(9,0,null,null,5,"ion-label",[["padding-horizontal",""]],null,null,null,B.b,B.a)),o._15(10,16384,null,0,V.a,[p.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),o._15(11,4308992,null,0,W.a,[o.p,a.a,I.a,g.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),o._16(12,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),o._40(13,null,["","."])),(e()(),o._40(14,0,[" ",""])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(17,0,null,null,16,"ion-col",[["class","col"],["col-6",""]],null,null,null,null,null)),o._15(18,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._16(20,0,null,null,12,"ion-select",[["interface","action-sheet"],["padding",""]],[[1,"aria-labelledby",0],[1,"required",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,23)._click(t)&&r}if("keyup.space"===n){r=!1!==o._29(e,23)._keyup()&&r}if("ngModelChange"===n){r=!1!==(i.answers[e.parent.parent.context.$implicit.name]=t)&&r}return r},K.b,K.a)),o._15(21,16384,null,0,N.t,[],{required:[0,"required"]},null),o._35(1024,null,N.k,function(e){return[e]},[N.t]),o._15(23,1228800,null,1,q.a,[G.a,D.a,p.a,o.p,o.K,[2,O.a],j.a],{interface:[0,"interface"]},null),o._37(603979776,7,{options:1}),o._35(1024,null,N.l,function(e){return[e]},[q.a]),o._15(26,671744,null,0,N.q,[[8,null],[2,N.k],[8,null],[2,N.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,N.m,null,[N.q]),o._15(28,16384,null,0,N.n,[N.m],null,null),(e()(),o._40(-1,null,["\n                                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModSurveyIndexComponent_20)),o._15(31,802816,null,0,k.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n                            "])),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._40(-1,null,["\n                    "])),(e()(),o._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,10,0,o._19(1,"addon-mod_survey-",n.parent.parent.context.$implicit.name,""));e(n,11,0,n.parent.parent.context.$implicit.required);e(n,21,0,n.parent.parent.context.$implicit.required);e(n,23,0,"action-sheet");e(n,26,0,t.answers[n.parent.parent.context.$implicit.name]);e(n,31,0,n.parent.parent.context.$implicit.optionsArray)},function(e,n){e(n,0,0,n.parent.parent.context.even);e(n,13,0,n.parent.parent.context.$implicit.num);e(n,14,0,n.parent.parent.context.$implicit.text);e(n,20,0,"addon-mod_survey-"+n.parent.parent.context.$implicit.name,o._29(n,21).required?"":null,o._29(n,23)._disabled,o._29(n,28).ngClassUntouched,o._29(n,28).ngClassTouched,o._29(n,28).ngClassPristine,o._29(n,28).ngClassDirty,o._29(n,28).ngClassValid,o._29(n,28).ngClassInvalid,o._29(n,28).ngClassPending)})}function View_AddonModSurveyIndexComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,22,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"even",null]],null,null,T.b,T.a)),o._15(1,1097728,null,3,O.a,[D.a,p.a,o.p,o.K,[2,x.a]],null,null),o._37(335544320,8,{contentLabel:0}),o._37(603979776,9,{_buttons:1}),o._37(603979776,10,{_icons:1}),o._15(5,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(7,0,null,1,6,"ion-label",[["stacked",""]],null,null,null,B.b,B.a)),o._15(8,16384,[[8,4]],0,V.a,[p.a,o.p,o.K,[8,null],[8,""],[8,null],[8,null]],{id:[0,"id"]},null),o._15(9,4308992,null,0,W.a,[o.p,a.a,I.a,g.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),o._40(-1,0,["\n                        "])),(e()(),o._16(11,0,null,0,1,"strong",[],null,null,null,null,null)),(e()(),o._40(12,null,["","."])),(e()(),o._40(13,0,[" ","\n                    "])),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._16(15,0,null,3,6,"ion-textarea",[["class","addon-mod_survey-textarea"]],[[1,"aria-label",0],[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.answers[e.parent.parent.context.$implicit.name]=t)&&o}return o},Q.b,Q.a)),o._15(16,16384,null,0,N.t,[],{required:[0,"required"]},null),o._35(1024,null,N.k,function(e){return[e]},[N.t]),o._15(18,671744,null,0,N.q,[[8,null],[2,N.k],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,N.m,null,[N.q]),o._15(20,16384,null,0,N.n,[N.m],null,null),o._15(21,5423104,null,0,z.a,[p.a,$.a,D.a,G.a,o.p,o.K,[2,A.a],[2,O.a],[2,N.m],Y.a],null,null),(e()(),o._40(-1,2,["\n                "]))],function(e,n){var t=n.component;e(n,8,0,o._19(1,"addon-mod_survey-",n.parent.parent.context.$implicit.name,""));e(n,9,0,n.parent.parent.context.$implicit.required);e(n,16,0,n.parent.parent.context.$implicit.required);e(n,18,0,t.answers[n.parent.parent.context.$implicit.name])},function(e,n){e(n,0,0,n.parent.parent.context.even);e(n,12,0,n.parent.parent.context.$implicit.num);e(n,13,0,n.parent.parent.context.$implicit.text);e(n,15,0,n.parent.parent.context.$implicit.text,o._29(n,16).required?"":null,o._29(n,20).ngClassUntouched,o._29(n,20).ngClassTouched,o._29(n,20).ngClassPristine,o._29(n,20).ngClassDirty,o._29(n,20).ngClassValid,o._29(n,20).ngClassInvalid,o._29(n,20).ngClassPending)})}function View_AddonModSurveyIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModSurveyIndexComponent_19)),o._15(3,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModSurveyIndexComponent_21)),o._15(6,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){e(n,3,0,n.parent.context.$implicit.type>0);e(n,6,0,0===n.parent.context.$implicit.type)},null)}function View_AddonModSurveyIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModSurveyIndexComponent_13)),o._15(4,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModSurveyIndexComponent_15)),o._15(8,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModSurveyIndexComponent_18)),o._15(12,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "]))],function(e,n){e(n,4,0,n.context.$implicit.multiArray&&n.context.$implicit.multiArray.length);e(n,8,0,0!==n.context.$implicit.parent);e(n,12,0,(!n.context.$implicit.multiArray||0==n.context.$implicit.multiArray.length)&&0===n.context.$implicit.parent)},null)}function View_AddonModSurveyIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,17,"section",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModSurveyIndexComponent_12)),o._15(3,802816,null,0,k.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._16(5,0,null,null,11,"ion-item",[["class","item item-block"]],null,null,null,T.b,T.a)),o._15(6,1097728,null,3,O.a,[D.a,p.a,o.p,o.K,[2,x.a]],null,null),o._37(335544320,11,{contentLabel:0}),o._37(603979776,12,{_buttons:1}),o._37(603979776,13,{_icons:1}),o._15(10,16384,null,0,F.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(12,0,null,2,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.submit()&&o}return o},f.b,f.a)),o._15(13,1097728,[[12,4]],0,h.a,[[8,""],p.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(14,0,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.questions);e(n,13,0,"")},function(e,n){e(n,12,0,!n.component.isValidResponse());e(n,14,0,o._41(n,14,0,o._29(n,15).transform("core.submit")))})}function View_AddonModSurveyIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,28,"core-navbar-buttons",[["end",""]],null,null,null,X.b,X.a)),o._15(2,245760,null,1,J.a,[o.p,Z.a,_.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,23,"core-context-menu",[],null,null,null,ee.b,ee.a)),o._15(6,245760,null,0,l.a,[a.a,ne.a,o.p,_.a,[2,te.a],g.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_1)),o._15(9,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_2)),o._15(12,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_3)),o._15(15,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_4)),o._15(18,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_5)),o._15(21,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_6)),o._15(24,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_7)),o._15(27,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(32,0,null,null,17,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,oe.b,oe.a)),o._15(33,638976,null,0,re.a,[a.a,o.p,ie.a,g.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_8)),o._15(36,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_9)),o._15(40,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_10)),o._15(44,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModSurveyIndexComponent_11)),o._15(48,16384,null,0,k.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.blog);e(n,18,0,t.loaded&&!t.hasOffline&&t.isOnline);e(n,21,0,t.loaded&&t.hasOffline&&t.isOnline);e(n,24,0,t.prefetchStatusIcon);e(n,27,0,t.size);e(n,33,0,t.loaded);e(n,36,0,t.survey&&!t.survey.surveydone&&!t.hasOffline);e(n,40,0,t.survey&&t.survey.surveydone);e(n,44,0,t.hasOffline);e(n,48,0,t.survey&&!t.survey.surveydone&&!t.hasOffline&&t.questions&&t.questions.length)},null)}t.d(n,"b",function(){return ce}),n.c=View_AddonModSurveyIndexComponent_0,t.d(n,"a",function(){return pe});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(123),d=t(113),c=t(90),p=t(9),f=t(47),h=t(44),m=t(175),_=t(5),g=t(3),v=t(2),C=t(23),y=t(16),P=t(21),A=t(30),b=t(29),I=t(12),S=t(49),E=t(120),M=t(165),w=t(121),k=t(8),T=t(32),O=t(22),D=t(20),x=t(28),F=t(34),L=t(177),U=t(146),R=t(138),H=t(109),N=t(24),B=t(94),V=t(68),W=t(85),K=t(124),q=t(110),G=t(36),j=t(60),Q=t(111),z=t(91),$=t(17),Y=t(35),X=t(97),J=t(88),Z=t(7),ee=t(92),ne=t(71),te=t(77),oe=t(55),re=t(52),ie=t(10),le=t(516),se=t(300),ae=t(335),ue=t(301),de=t(302),ce=o._14({encapsulation:2,styles:[],data:{}}),pe=o._12("addon-mod-survey-index",le.a,function View_AddonModSurveyIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-survey-index",[],null,null,null,View_AddonModSurveyIndexComponent_0,ce)),o._15(1,245760,null,0,le.a,[o.u,se.a,[2,A.a],ae.a,ue.a,de.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModUrlIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,s.a,[a.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModUrlIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModUrlIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},r.b,r.a)),o._15(1,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModUrlIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,u.b,u.a)),o._15(1,49152,null,0,d.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,n){var t=n.component;e(n,1,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId)},null)}function View_AddonModUrlIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"div",[["class","addon-mod_url-embedded-url"]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"core-iframe",[],null,null,null,c.b,c.a)),o._15(3,638976,null,0,p.a,[f.a,h.a,m.a,_.c,g.a,v.a,C.a,[2,y.a]],{src:[0,"src"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.url)},null)}function View_AddonModUrlIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,0,"img",[],[[8,"title",0],[8,"src",4]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,o._19(1,"",t.name,""),t.url)})}function View_AddonModUrlIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"video",[["controls",""]],[[8,"title",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(2,0,null,null,0,"source",[],[[8,"src",4],[8,"type",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n            "]))],null,function(e,n){var t=n.component;e(n,0,0,o._19(1,"",t.name,""));e(n,2,0,t.url,t.mimetype)})}function View_AddonModUrlIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"audio",[["controls",""]],[[8,"title",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(2,0,null,null,0,"source",[],[[8,"src",4],[8,"type",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n            "]))],null,function(e,n){var t=n.component;e(n,0,0,o._19(1,"",t.name,""));e(n,2,0,t.url,t.mimetype)})}function View_AddonModUrlIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,P.b,P.a)),o._15(1,1097728,null,3,A.a,[b.a,I.a,o.p,o.K,[2,S.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModUrlIndexComponent_8)),o._15(8,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModUrlIndexComponent_9)),o._15(11,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModUrlIndexComponent_10)),o._15(14,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,t.isImage);e(n,11,0,t.isVideo);e(n,14,0,t.isAudio)},null)}function View_AddonModUrlIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,36,"ion-list",[],null,null,null,null,null)),o._15(1,16384,null,0,w.a,[I.a,o.p,o.K,k.a,T.l,O.a],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModUrlIndexComponent_7)),o._15(4,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(6,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,P.b,P.a)),o._15(7,1097728,null,3,A.a,[b.a,I.a,o.p,o.K,[2,S.a]],null,null),o._37(335544320,5,{contentLabel:0}),o._37(603979776,6,{_buttons:1}),o._37(603979776,7,{_icons:1}),o._15(11,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(14,null,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(17,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(18,null,["",""])),(e()(),o._40(-1,2,["\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(21,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,P.b,P.a)),o._15(22,1097728,null,3,A.a,[b.a,I.a,o.p,o.K,[2,S.a]],null,null),o._37(335544320,8,{contentLabel:0}),o._37(603979776,9,{_buttons:1}),o._37(603979776,10,{_icons:1}),o._15(26,16384,null,0,E.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(28,0,null,2,6,"a",[["block",""],["icon-start",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.go()&&o}return o},D.b,D.a)),o._15(29,1097728,[[9,4]],0,x.a,[[8,""],I.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(31,0,null,0,1,"ion-icon",[["name","link"],["role","img"],["start",""]],[[2,"hide",null]],null,null,null,null)),o._15(32,147456,null,0,F.a,[I.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(33,0,["\n                ","\n            "])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,2,["\n        "])),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,4,0,n.component.shouldEmbed);e(n,29,0,"");e(n,32,0,"link")},function(e,n){var t=n.component;e(n,14,0,o._41(n,14,0,o._29(n,15).transform("addon.mod_url.pointingtourl")));e(n,18,0,t.url);e(n,31,0,o._29(n,32)._hidden);e(n,33,0,o._41(n,33,0,o._29(n,34).transform("addon.mod_url.accessurl")))})}function View_AddonModUrlIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,20,"core-navbar-buttons",[["end",""]],null,null,null,L.b,L.a)),o._15(2,245760,null,1,U.a,[o.p,f.a,m.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(5,0,null,0,15,"core-context-menu",[],null,null,null,R.b,R.a)),o._15(6,245760,null,0,l.a,[a.a,H.a,o.p,m.a,[2,N.a],C.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModUrlIndexComponent_1)),o._15(9,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModUrlIndexComponent_2)),o._15(12,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModUrlIndexComponent_3)),o._15(15,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(17,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},r.b,r.a)),o._15(18,770048,null,0,i.a,[l.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(24,0,null,null,11,"core-loading",[["class","core-loading-center"]],null,null,null,B.b,B.a)),o._15(25,638976,null,0,V.a,[a.a,o.p,W.a,C.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModUrlIndexComponent_4)),o._15(28,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModUrlIndexComponent_5)),o._15(31,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModUrlIndexComponent_6)),o._15(34,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0),e(n,6,0);e(n,9,0,t.externalUrl);e(n,12,0,t.description);e(n,15,0,t.blog);e(n,18,0,o._41(n,18,0,o._29(n,19).transform("core.refresh")),t.refreshIcon,!1,700);e(n,25,0,t.loaded);e(n,28,0,t.displayDescription);e(n,31,0,t.shouldIframe||t.shouldEmbed&&t.isOther);e(n,34,0,!(t.shouldIframe||t.shouldEmbed&&t.isOther))},null)}t.d(n,"b",function(){return $}),n.c=View_AddonModUrlIndexComponent_0,t.d(n,"a",function(){return Y});var o=t(1),r=t(93),i=t(84),l=t(79),s=t(26),a=t(19),u=t(123),d=t(113),c=t(323),p=t(257),f=t(7),h=t(43),m=t(5),_=t(80),g=t(21),v=t(23),C=t(3),y=t(29),P=t(32),A=t(22),b=t(20),I=t(9),S=t(28),E=t(34),M=t(8),w=t(87),k=t(17),T=t(45),O=t(35),D=t(47),x=t(44),F=t(49),L=t(97),U=t(88),R=t(92),H=t(71),N=t(77),B=t(55),V=t(52),W=t(10),K=t(517),q=t(303),G=t(14),j=t(336),Q=t(67),z=t(2),$=o._14({encapsulation:2,styles:[],data:{}}),Y=o._12("addon-mod-url-index",K.a,function View_AddonModUrlIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-url-index",[],null,null,null,View_AddonModUrlIndexComponent_0,$)),o._15(1,245760,null,0,K.a,[o.u,q.a,G.a,j.a,Q.a,z.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonModWikiIndexComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["name","person"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"person")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_AddonModWikiIndexComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["name","people"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"people")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_AddonModWikiIndexComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.showSubwikiPicker(t)&&o}return o},l.b,l.a)),o._15(1,1097728,[[1,4]],0,s.a,[[8,""],i.a,o.p,o.K],null,null),o._32(131072,a.a,[u.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_2)),o._15(5,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_3)),o._15(8,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "]))],function(e,n){var t=n.component;e(n,5,0,!t.groupWiki);e(n,8,0,t.groupWiki)},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("addon.mod_wiki.subwiki")))})}function View_AddonModWikiIndexComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["aria-haspopup","true"],["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openMap(t)&&o}return o},l.b,l.a)),o._15(1,1097728,[[1,4]],0,s.a,[[8,""],i.a,o.p,o.K],null,null),o._32(131072,a.a,[u.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","map"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n    "]))],function(e,n){e(n,5,0,"map")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("addon.mod_wiki.map")));e(n,4,0,o._29(n,5)._hidden)})}function View_AddonModWikiIndexComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,null,null,c.b,c.a)),o._15(1,770048,null,0,p.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],href:[2,"href"],priority:[3,"priority"]},null),o._32(131072,a.a,[u.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.openinbrowser")),"open",t.externalUrl,900)},null)}function View_AddonModWikiIndexComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.expandDescription()&&o}return o},c.b,c.a)),o._15(1,770048,null,0,p.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,a.a,[u.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.moduleintro")),"arrow-forward",800)},null)}function View_AddonModWikiIndexComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.gotoBlog(t)&&o}return o},c.b,c.a)),o._15(1,770048,null,0,p.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,a.a,[u.a,o.i])],function(e,n){e(n,1,0,o._19(1,"",o._41(n,1,0,o._29(n,2).transform("addon.blog.blog")),""),"fa-newspaper-o",750)},null)}function View_AddonModWikiIndexComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t)&&o}return o},c.b,c.a)),o._15(1,770048,null,0,p.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,a.a,[u.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.refresh")),t.refreshIcon,!1,700)},null)}function View_AddonModWikiIndexComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.doRefresh(null,t,!0)&&o}return o},c.b,c.a)),o._15(1,770048,null,0,p.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),o._32(131072,a.a,[u.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.settings.synchronizenow")),t.syncIcon,!1,600)},null)}function View_AddonModWikiIndexComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[["iconAction","create"]],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.goToEditPage()&&o}return o},c.b,c.a)),o._15(1,770048,null,0,p.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,a.a,[u.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("core.edit")),"create",590)},null)}function View_AddonModWikiIndexComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-context-menu-item",[["iconAction","add"]],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.goToNewPage()&&o}return o},c.b,c.a)),o._15(1,770048,null,0,p.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),o._32(131072,a.a,[u.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_wiki.createpage")),"add",580)},null)}function View_AddonModWikiIndexComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.prefetch(t)&&o}return o},c.b,c.a)),o._15(1,770048,null,0,p.a,[f.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"})],function(e,n){var t=n.component;e(n,1,0,t.prefetchText,t.prefetchStatusIcon,!1,500)},null)}function View_AddonModWikiIndexComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.removeFiles()&&o}return o},c.b,c.a)),o._15(1,770048,null,0,p.a,[f.a],{content:[0,"content"],iconDescription:[1,"iconDescription"],iconAction:[2,"iconAction"],priority:[3,"priority"]},{action:"action"}),o._33(2,{$a:0}),o._32(131072,a.a,[u.a,o.i])],function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.removefiles",e(n,2,0,t.size))),"cube","trash",400)},null)}function View_AddonModWikiIndexComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,a.a,[u.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.hasdatatosync",e(n,2,0,t.pageStr))))})}function View_AddonModWikiIndexComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"span",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,a.a,[u.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("core.hasdatatosync",e(n,2,0,t.moduleName))))})}function View_AddonModWikiIndexComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiIndexComponent_16)),o._15(6,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiIndexComponent_17)),o._15(9,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,"warning");e(n,6,0,t.pageIsOffline);e(n,9,0,!t.pageIsOffline)},function(e,n){e(n,2,0,o._29(n,3)._hidden)})}function View_AddonModWikiIndexComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n            ","\n        "]))],function(e,n){e(n,3,0,"warning")},function(e,n){var t=n.component;e(n,2,0,o._29(n,3)._hidden);e(n,4,0,t.pageWarning)})}function View_AddonModWikiIndexComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,12,"div",[["padding",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,1,"core-course-module-description",[["contextLevel","module"]],null,null,null,h.b,h.a)),o._15(3,49152,null,0,m.a,[],{description:[0,"description"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiIndexComponent_15)),o._15(7,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiIndexComponent_18)),o._15(11,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.description,t.component,t.componentId,"module",t.module.id,t.courseId);e(n,7,0,t.pageIsOffline||t.hasOffline);e(n,11,0,t.pageWarning)},null)}function View_AddonModWikiIndexComponent_19(e){return o._42(0,[(e()(),o._16(0,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(1,540672,null,0,_.a,[o.p,g.a,v.a,C.a,u.a,y.a,P.a,A.a,b.a,I.a,S.a,E.a,[2,M.a],[2,w.a],[2,k.a],T.a,O.a,D.a,x.a,F.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._11(0,null,null,0))],function(e,n){var t=n.component;e(n,1,0,t.pageContent,t.component,t.componentId,"module",t.module.id,t.courseId)},null)}function View_AddonModWikiIndexComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-empty-box",[["icon","document"]],null,null,null,L.b,L.a)),o._15(1,49152,null,0,U.a,[],{message:[0,"message"],icon:[1,"icon"],inline:[2,"inline"]},null),o._32(131072,a.a,[u.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_wiki.nocontent")),"document",!0)},null)}function View_AddonModWikiIndexComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"div",[["margin-top",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,2,"b",[],null,null,null,null,null)),(e()(),o._40(3,null,["",":"])),o._32(131072,a.a,[u.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(6,0,null,null,1,"core-tag-list",[],null,null,null,R.b,R.a)),o._15(7,49152,null,0,H.a,[M.a,[2,k.a]],{tags:[0,"tags"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,7,0,n.component.currentPageObj.tags)},function(e,n){e(n,3,0,o._41(n,3,0,o._29(n,4).transform("core.tag.tags")))})}function View_AddonModWikiIndexComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,N.b,N.a)),o._15(1,1228800,null,2,B.a,[y.a],null,null),o._37(335544320,2,{_mainButton:0}),o._37(603979776,3,{_fabLists:1}),o._15(4,212992,null,0,V.a,[o.p,w.a],null,null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.goToNewPage()&&o}return o},W.b,W.a)),o._15(7,49152,[[2,4]],0,K.a,[i.a,o.p,o.K],null,null),o._32(131072,a.a,[u.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(11,147456,null,0,r.a,[i.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"]))],function(e,n){e(n,4,0);e(n,11,0,"add")},function(e,n){e(n,6,0,o._41(n,6,0,o._29(n,8).transform("addon.mod_wiki.createpage")));e(n,10,0,o._29(n,11)._hidden)})}function View_AddonModWikiIndexComponent_0(e){return o._42(0,[(e()(),o._40(-1,null,["\n"])),(e()(),o._16(1,0,null,null,41,"core-navbar-buttons",[["end",""]],null,null,null,q.b,q.a)),o._15(2,245760,null,1,G.a,[o.p,b.a,v.a],null,null),o._37(603979776,1,{buttons:1}),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_1)),o._15(7,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_4)),o._15(10,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._16(12,0,null,0,29,"core-context-menu",[],null,null,null,j.b,j.a)),o._15(13,245760,null,0,f.a,[u.a,Q.a,o.p,v.a,[2,z.a],P.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_5)),o._15(16,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_6)),o._15(19,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_7)),o._15(22,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_8)),o._15(25,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_9)),o._15(28,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_10)),o._15(31,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_11)),o._15(34,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_12)),o._15(37,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_13)),o._15(40,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(45,0,null,null,22,"core-loading",[["class","core-loading-center"]],null,null,null,$.b,$.a)),o._15(46,638976,null,0,Y.a,[u.a,o.p,O.a,P.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWikiIndexComponent_14)),o._15(49,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(51,0,null,0,15,"div",[["class","addon-mod_wiki-page-content"],["padding",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(53,0,null,null,9,"article",[],null,null,null,null,null)),o._15(54,278528,null,0,d.i,[o.v,o.w,o.p,o.L],{ngClass:[0,"ngClass"]},null),o._33(55,{"addon-mod_wiki-noedit":0}),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiIndexComponent_19)),o._15(58,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiIndexComponent_20)),o._15(61,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,null,["\n\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiIndexComponent_21)),o._15(65,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiIndexComponent_22)),o._15(70,16384,null,0,d.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0);e(n,7,0,t.subwikiData.count>1);e(n,10,0,t.loaded&&t.currentPageObj),e(n,13,0);e(n,16,0,t.externalUrl);e(n,19,0,t.description);e(n,22,0,t.blog);e(n,25,0,t.loaded&&!t.hasOffline&&t.isOnline&&!t.pageIsOffline);e(n,28,0,t.loaded&&t.isOnline&&(t.hasOffline||t.pageIsOffline));e(n,31,0,t.canEdit&&(t.isOnline||t.pageIsOffline));e(n,34,0,t.canEdit);e(n,37,0,t.prefetchStatusIcon);e(n,40,0,t.size);e(n,46,0,t.loaded);e(n,49,0,t.description||t.pageIsOffline||t.hasOffline||t.pageWarning);e(n,54,0,e(n,55,0,!t.canEdit));e(n,58,0,t.pageContent);e(n,61,0,!t.pageContent);e(n,65,0,t.tagsEnabled&&t.currentPageObj&&t.currentPageObj.tags&&t.currentPageObj.tags.length>0);e(n,70,0,t.canEdit)},null)}t.d(n,"b",function(){return ie}),n.c=View_AddonModWikiIndexComponent_0,t.d(n,"a",function(){return le});var o=t(1),r=t(49),i=t(9),l=t(47),s=t(44),a=t(26),u=t(19),d=t(8),c=t(93),p=t(84),f=t(79),h=t(123),m=t(113),_=t(48),g=t(2),v=t(5),C=t(12),y=t(17),P=t(3),A=t(23),b=t(7),I=t(18),S=t(11),E=t(16),M=t(21),w=t(30),k=t(29),T=t(43),O=t(10),D=t(41),x=t(31),F=t(37),L=t(125),U=t(115),R=t(494),H=t(325),N=t(281),B=t(218),V=t(255),W=t(282),K=t(191),q=t(97),G=t(88),j=t(92),Q=t(71),z=t(77),$=t(55),Y=t(52),X=t(518),J=t(235),Z=t(289),ee=t(290),ne=t(72),te=t(46),oe=t(164),re=t(163),ie=o._14({encapsulation:2,styles:[],data:{}}),le=o._12("addon-mod-wiki-index",X.a,function View_AddonModWikiIndexComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-wiki-index",[],null,null,null,View_AddonModWikiIndexComponent_0,ie)),o._15(1,245760,null,0,X.a,[o.u,J.a,[2,w.a],Z.a,ee.a,M.a,P.a,ne.a,te.a,Q.a,oe.a,re.a],null,null)],function(e,n){e(n,1,0)},null)},{module:"module",courseId:"courseId",group:"group",action:"action",pageId:"pageId",pageTitle:"pageTitle",wikiId:"wikiId",subwikiId:"subwikiId",userId:"userId",groupId:"groupId"},{dataRetrieved:"dataRetrieved"},[])},function(e,n,t){"use strict";function View_AddonNotesListComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,3,{contentLabel:0}),o._37(603979776,4,{_buttons:1}),o._37(603979776,5,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,d.b,d.a)),o._15(8,16384,null,0,c.a,[],null,null),o._15(9,770048,null,0,p.a,[f.a,h.a,m.a,_.a,g.a,[2,v.a]],{user:[0,"user"],linkProfile:[1,"linkProfile"],courseId:[2,"courseId"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(11,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),o._40(12,null,["",""])),(e()(),o._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,9,0,t.user,!1,t.courseId)},function(e,n){e(n,12,0,n.component.user.fullname)})}function View_AddonNotesListComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"div",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,null,0,C.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(4,null,["\n            ","\n        "])),o._32(131072,y.a,[P.a,o.i]),o._34(6,1),o._33(7,{$a:0}),o._32(131072,y.a,[P.a,o.i])],function(e,n){e(n,3,0,"warning")},function(e,n){e(n,2,0,o._29(n,3)._hidden);e(n,4,0,o._41(n,4,0,o._29(n,8).transform("core.thereisdatatosync",e(n,7,0,o._41(n,4,0,e(n,6,0,o._29(n.parent,0),o._41(n,4,0,o._29(n,5).transform("addon.notes.notes"))))))))})}function View_AddonNotesListComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"core-empty-box",[["icon","list"]],null,null,null,A.b,A.a)),o._15(1,49152,null,0,b.a,[],{message:[0,"message"],icon:[1,"icon"]},null),o._32(131072,y.a,[P.a,o.i])],function(e,n){e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.notes.nonotes")),"list")},null)}function View_AddonNotesListComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,d.b,d.a)),o._15(1,16384,null,0,c.a,[],null,null),o._15(2,770048,null,0,p.a,[f.a,h.a,m.a,_.a,g.a,[2,v.a]],{user:[0,"user"],courseId:[1,"courseId"]},null)],function(e,n){e(n,2,0,n.parent.context.$implicit,n.component.courseId)},null)}function View_AddonNotesListComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"h2",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.userfullname)})}function View_AddonNotesListComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"p",[["item-end",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(2,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(e()(),o._40(3,null,["",""])),o._34(4,1),(e()(),o._40(-1,null,["\n                    "]))],null,function(e,n){e(n,3,0,o._41(n,3,0,e(n,4,0,o._29(n.parent.parent.parent,1),n.parent.context.$implicit.lastmodified)))})}function View_AddonNotesListComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"p",[["item-end",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,[[9,4]],0,C.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,null,[" "])),(e()(),o._16(5,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(e()(),o._40(6,null,["",""])),o._32(131072,y.a,[P.a,o.i])],function(e,n){e(n,3,0,"time")},function(e,n){e(n,2,0,o._29(n,3)._hidden);e(n,6,0,o._41(n,6,0,o._29(n,7).transform("core.notsent")))})}function View_AddonNotesListComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,8,"p",[["item-end",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n                        "])),(e()(),o._16(2,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(3,147456,[[9,4]],0,C.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,null,[" "])),(e()(),o._16(5,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(e()(),o._40(6,null,["",""])),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,null,["\n                    "]))],function(e,n){e(n,3,0,"trash")},function(e,n){e(n,2,0,o._29(n,3)._hidden);e(n,6,0,o._41(n,6,0,o._29(n,7).transform("core.deletedoffline")))})}function View_AddonNotesListComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.undoDeleteNote(t,e.parent.context.$implicit)&&o}return o},I.b,I.a)),o._15(1,1097728,[[8,4]],0,S.a,[[8,""],s.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,0,["\n                        "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","undo"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,C.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n                    "]))],function(e,n){e(n,1,0,"danger","");e(n,5,0,"undo")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.restore")));e(n,4,0,o._29(n,5)._hidden)})}function View_AddonNotesListComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[24,"@coreSlideInOut",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.deleteNote(t,e.parent.context.$implicit)&&o}return o},I.b,I.a)),o._15(1,1097728,[[8,4]],0,S.a,[[8,""],s.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,0,["\n                        "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,C.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n                    "]))],function(e,n){e(n,1,0,"danger","");e(n,5,0,"trash")},function(e,n){e(n,0,0,"fromRight",o._41(n,0,1,o._29(n,2).transform("core.delete")));e(n,4,0,o._29(n,5)._hidden)})}function View_AddonNotesListComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,40,"ion-card",[],null,null,null,null,null)),o._15(1,16384,null,0,E.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(4,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,7,{contentLabel:0}),o._37(603979776,8,{_buttons:1}),o._37(603979776,9,{_icons:1}),o._15(8,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonNotesListComponent_6)),o._15(11,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,2,1,null,View_AddonNotesListComponent_7)),o._15(14,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,4,1,null,View_AddonNotesListComponent_8)),o._15(17,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,4,1,null,View_AddonNotesListComponent_9)),o._15(20,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,4,1,null,View_AddonNotesListComponent_10)),o._15(23,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,4,1,null,View_AddonNotesListComponent_11)),o._15(26,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                    "])),(e()(),o._11(16777216,null,4,1,null,View_AddonNotesListComponent_12)),o._15(29,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n                "])),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(32,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(33,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,10,{contentLabel:0}),o._37(603979776,11,{_buttons:1}),o._37(603979776,12,{_icons:1}),o._15(37,16384,null,0,u.a,[],null,null),(e()(),o._16(38,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),o._15(39,540672,null,0,w.a,[o.p,h.a,k.a,T.a,P.a,O.a,m.a,D.a,x.a,F.a,_.a,L.a,[2,f.a],[2,U.a],[2,v.a],R.a,g.a,H.a,N.a,B.a,o.W],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,11,0,!t.userId);e(n,14,0,!t.userId);e(n,17,0,!n.context.$implicit.deleted&&!n.context.$implicit.offline);e(n,20,0,n.context.$implicit.offline);e(n,23,0,n.context.$implicit.deleted);e(n,26,0,n.context.$implicit.deleted);e(n,29,0,t.showDelete&&!n.context.$implicit.deleted&&("personal"!=t.type||n.context.$implicit.usermodified==t.currentUserId));e(n,39,0,n.context.$implicit.content,!1)},null)}function View_AddonNotesListComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),o._15(1,16384,null,0,V.a,[s.a,o.p,o.K,O.a,W.l,K.a],null,null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonNotesListComponent_5)),o._15(4,802816,null,0,M.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){e(n,4,0,n.component.notes)},null)}function View_AddonNotesListComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,q.b,q.a)),o._15(1,1228800,null,2,G.a,[O.a],null,null),o._37(335544320,13,{_mainButton:0}),o._37(603979776,14,{_fabLists:1}),o._15(4,212992,null,0,j.a,[o.p,U.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.addNote(t)&&o}return o},Q.b,Q.a)),o._15(7,49152,[[13,4]],0,z.a,[s.a,o.p,o.K],null,null),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(11,147456,null,0,C.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n    "]))],function(e,n){e(n,4,0);e(n,11,0,"add")},function(e,n){e(n,6,0,o._41(n,6,0,o._29(n,8).transform("addon.notes.addnewnote")));e(n,10,0,o._29(n,11)._hidden)})}function View_AddonNotesListComponent_0(e){return o._42(0,[o._32(0,M.h,[]),o._32(0,$.a,[x.a,P.a,Y.a]),o._37(402653184,1,{content:0}),(e()(),o._16(3,0,null,null,23,"core-navbar-buttons",[["end",""]],null,null,null,X.b,X.a)),o._15(4,245760,null,1,J.a,[o.p,x.a,k.a],null,null),o._37(603979776,2,{buttons:1}),(e()(),o._40(-1,0,["\n     "])),(e()(),o._16(7,0,null,0,6,"button",[["clear",""],["icon-only",""],["ion-button",""],["item-end",""]],[[8,"hidden",0],[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.toggleDelete(t)&&o}return o},I.b,I.a)),o._15(8,1097728,[[2,4]],0,S.a,[[8,""],s.a,o.p,o.K],{clear:[0,"clear"]},null),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(11,0,null,0,1,"ion-icon",[["ios","md-create"],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(12,147456,null,0,C.a,[s.a,o.p,o.K],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._16(15,0,null,0,10,"core-context-menu",[],null,null,null,Z.b,Z.a)),o._15(16,245760,null,0,ee.a,[P.a,ne.a,o.p,k.a,[2,te.a],m.a],null,null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(18,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.refreshNotes(!1)&&o}return o},oe.b,oe.a)),o._15(19,770048,null,0,re.a,[ee.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(22,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.refreshNotes(!0)&&o}return o},oe.b,oe.a)),o._15(23,770048,null,0,re.a,[ee.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n\n"])),(e()(),o._16(28,0,null,null,56,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ie.b,ie.a)),o._15(29,4374528,[[1,4]],0,U.a,[s.a,O.a,K.a,o.p,o.K,le.a,se.a,o.D,[2,ae.a],[2,f.a]],null,null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(31,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var o=!0;if("ionRefresh"===n){o=!1!==e.component.refreshNotes(!1,t)&&o}return o},null,null)),o._15(32,212992,null,0,ue.a,[O.a,U.a,o.D,W.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(34,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,de.b,de.a)),o._15(35,114688,null,0,ce.a,[ue.a,s.a],{pullingText:[0,"pullingText"]},null),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(39,0,null,1,41,"core-loading",[["class","core-loading-center"]],null,null,null,pe.b,pe.a)),o._15(40,638976,null,0,fe.a,[P.a,o.p,g.a,m.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonNotesListComponent_1)),o._15(43,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._16(45,0,null,0,25,"div",[["padding",""]],null,null,null,null,null)),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(47,0,null,null,22,"ion-select",[["class","core-button-select"],["interface","popover"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,48)._click(t)&&r}if("keyup.space"===n){r=!1!==o._29(e,48)._keyup()&&r}if("ngModelChange"===n){r=!1!==(i.type=t)&&r}if("ngModelChange"===n){r=!1!==i.typeChanged()&&r}return r},he.b,he.a)),o._15(48,1228800,null,1,me.a,[le.a,l.a,s.a,o.p,o.K,[2,i.a],_e.a],{interface:[0,"interface"]},null),o._37(603979776,6,{options:1}),o._35(1024,null,ge.l,function(e){return[e]},[me.a]),o._15(51,671744,null,0,ge.q,[[8,null],[8,null],[8,null],[2,ge.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,ge.m,null,[ge.q]),o._15(53,16384,null,0,ge.n,[ge.m],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(55,0,null,null,3,"ion-option",[["value","site"]],null,null,null,null,null)),o._15(56,16384,[[6,4]],0,ve.a,[o.p],{value:[0,"value"]},null),(e()(),o._40(57,null,["",""])),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(60,0,null,null,3,"ion-option",[["value","course"]],null,null,null,null,null)),o._15(61,16384,[[6,4]],0,ve.a,[o.p],{value:[0,"value"]},null),(e()(),o._40(62,null,["",""])),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(65,0,null,null,3,"ion-option",[["value","personal"]],null,null,null,null,null)),o._15(66,16384,[[6,4]],0,ve.a,[o.p],{value:[0,"value"]},null),(e()(),o._40(67,null,["",""])),o._32(131072,y.a,[P.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonNotesListComponent_2)),o._15(73,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonNotesListComponent_3)),o._15(76,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n        "])),(e()(),o._11(16777216,null,0,1,null,View_AddonNotesListComponent_4)),o._15(79,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._40(-1,1,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonNotesListComponent_13)),o._15(83,16384,null,0,M.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,1,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0);e(n,8,0,"");e(n,12,0,"create","md-create"),e(n,16,0);e(n,19,0,o._41(n,19,0,o._29(n,20).transform("core.refresh")),t.refreshIcon,!0,100,!(t.notesLoaded&&!t.hasOffline));e(n,23,0,o._41(n,23,0,o._29(n,24).transform("core.settings.synchronizenow")),t.syncIcon,!1,100,!(t.notesLoaded&&t.hasOffline));e(n,32,0,t.notesLoaded);e(n,35,0,o._19(1,"",o._41(n,35,0,o._29(n,36).transform("core.pulltorefresh")),""));e(n,40,0,t.notesLoaded);e(n,43,0,t.user);e(n,48,0,"popover");e(n,51,0,t.type);e(n,56,0,"site");e(n,61,0,"course");e(n,66,0,"personal");e(n,73,0,t.hasOffline);e(n,76,0,t.notes&&0==t.notes.length);e(n,79,0,t.notes&&t.notes.length>0);e(n,83,0,t.userId&&t.notesLoaded)},function(e,n){e(n,7,0,!n.component.canDeleteNotes,o._41(n,7,1,o._29(n,9).transform("core.delete")));e(n,11,0,o._29(n,12)._hidden);e(n,28,0,o._29(n,29).statusbarPadding,o._29(n,29)._hasRefresher);e(n,31,0,"inactive"!==o._29(n,32).state,o._29(n,32)._top);e(n,34,0,o._29(n,35).r.state);e(n,47,0,o._29(n,48)._disabled,o._29(n,53).ngClassUntouched,o._29(n,53).ngClassTouched,o._29(n,53).ngClassPristine,o._29(n,53).ngClassDirty,o._29(n,53).ngClassValid,o._29(n,53).ngClassInvalid,o._29(n,53).ngClassPending);e(n,57,0,o._41(n,57,0,o._29(n,58).transform("addon.notes.sitenotes")));e(n,62,0,o._41(n,62,0,o._29(n,63).transform("addon.notes.coursenotes")));e(n,67,0,o._41(n,67,0,o._29(n,68).transform("addon.notes.personalnotes")))})}t.d(n,"b",function(){return Se}),n.c=View_AddonNotesListComponent_0,t.d(n,"a",function(){return Ee});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(214),c=t(161),p=t(183),f=t(21),h=t(2),m=t(3),_=t(11),g=t(10),v=t(29),C=t(49),y=t(26),P=t(19),A=t(125),b=t(115),I=t(47),S=t(44),E=t(90),M=t(8),w=t(48),k=t(5),T=t(12),O=t(17),D=t(23),x=t(7),F=t(18),L=t(16),U=t(30),R=t(43),H=t(41),N=t(31),B=t(37),V=t(87),W=t(45),K=t(35),q=t(281),G=t(218),j=t(255),Q=t(282),z=t(191),$=t(377),Y=t(25),X=t(97),J=t(88),Z=t(92),ee=t(79),ne=t(71),te=t(77),oe=t(93),re=t(84),ie=t(182),le=t(36),se=t(108),ae=t(40),ue=t(160),de=t(213),ce=t(174),pe=t(55),fe=t(52),he=t(124),me=t(110),_e=t(60),ge=t(24),ve=t(109),Ce=t(529),ye=t(163),Pe=t(260),Ae=t(337),be=t(46),Ie=t(304),Se=o._14({encapsulation:2,styles:[],data:{animation:[{type:7,name:"coreSlideInOut",definitions:[{type:1,expr:"void => fromLeft",animation:[{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(-100%)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(5%)",offset:.7},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"fromLeft => void",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateX(0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(5%)",offset:.3},offset:null},{type:6,styles:{opacity:0,transform:"translateX(-100%)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"void => fromRight",animation:[{type:6,styles:{transform:"translateX(0)",opacity:1},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:0,transform:"translateX(100%)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(-5%)",offset:.7},offset:null},{type:6,styles:{opacity:1,transform:"translateX(0)",offset:1},offset:null}]},timings:300}],options:null},{type:1,expr:"fromRight => void",animation:[{type:6,styles:{transform:"translateX(-100%)",opacity:0},offset:null},{type:4,styles:{type:5,steps:[{type:6,styles:{opacity:1,transform:"translateX(0)",offset:0},offset:null},{type:6,styles:{opacity:1,transform:"translateX(-5%)",offset:.3},offset:null},{type:6,styles:{opacity:0,transform:"translateX(100%)",offset:1},offset:null}]},timings:300}],options:null}],options:{}}]}}),Ee=o._12("addon-notes-list",Ce.a,function View_AddonNotesListComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-notes-list",[],null,null,null,View_AddonNotesListComponent_0,Se)),o._15(1,245760,null,0,Ce.a,[k.a,T.a,h.a,g.a,ye.a,Pe.a,Ae.a,be.a,Ie.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",userId:"userId"},{},[])},function(e,n,t){"use strict";function View_CoreSitePluginsBlockComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,null,null,r.b,r.a)),o._15(1,376832,[[1,4]],0,i.a,[l.a,s.a,[2,a.a],o.w],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"]},null)],function(e,n){var t=n.component;e(n,1,0,t.component,t.method,t.args,t.initResult)},null)}function View_CoreSitePluginsBlockComponent_0(e){return o._42(0,[o._37(671088640,1,{content:0}),(e()(),o._11(16777216,null,null,1,null,View_CoreSitePluginsBlockComponent_1)),o._15(2,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.component&&t.method)},null)}t.d(n,"a",function(){return f});var o=t(1),r=t(407),i=t(157),l=t(5),s=t(59),a=t(21),u=t(8),d=t(455),c=t(61),p=o._14({encapsulation:2,styles:[],data:{}}),f=o._12("core-site-plugins-block",d.a,function View_CoreSitePluginsBlockComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-block",[],null,null,null,View_CoreSitePluginsBlockComponent_0,p)),o._15(1,638976,null,0,d.a,[o.u,s.a,c.a],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[])},function(e,n,t){"use strict";function View_CoreSitePluginsOnlyTitleBlockComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"],["detail-push",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoBlock(t)&&o}return o},r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,u.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,2,["\n    "])),(e()(),o._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._40(8,null,["",""])),o._32(131072,d.a,[c.a,o.i]),(e()(),o._40(-1,2,["\n"]))],null,function(e,n){var t=n.component;e(n,8,0,o._41(n,8,0,o._29(n,9).transform(t.title)))})}t.d(n,"a",function(){return v});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(101),d=t(26),c=t(19),p=t(680),f=t(59),h=t(61),m=t(21),_=t(29),g=o._14({encapsulation:2,styles:[],data:{}}),v=o._12("core-siteplugins-only-title-block",p.a,function View_CoreSitePluginsOnlyTitleBlockComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-siteplugins-only-title-block",[],null,null,null,View_CoreSitePluginsOnlyTitleBlockComponent_0,g)),o._15(1,114688,null,0,p.a,[o.u,f.a,h.a,m.a,[2,_.a]],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[])},function(e,n,t){"use strict";function View_CoreSitePluginsCourseOptionComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,null,null,r.b,r.a)),o._15(1,376832,[[1,4]],0,i.a,[l.a,s.a,[2,a.a],o.w],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"]},null)],function(e,n){var t=n.component;e(n,1,0,t.component,t.method,t.args,t.initResult)},null)}function View_CoreSitePluginsCourseOptionComponent_0(e){return o._42(0,[o._37(671088640,1,{content:0}),(e()(),o._16(1,0,null,null,13,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,u.b,u.a)),o._15(2,4374528,null,0,d.a,[c.a,p.a,f.a,o.p,o.K,h.a,m.a,o.D,[2,_.a],[2,a.a]],null,null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(e,n,t){var o=!0;if("ionRefresh"===n){o=!1!==e.component.refreshData(t)&&o}return o},null,null)),o._15(5,212992,null,0,g.a,[p.a,d.a,o.D,v.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,C.b,C.a)),o._15(8,114688,null,0,y.a,[g.a,c.a],{pullingText:[0,"pullingText"]},null),o._32(131072,P.a,[A.a,o.i]),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,1,["\n    "])),(e()(),o._11(16777216,null,1,1,null,View_CoreSitePluginsCourseOptionComponent_1)),o._15(13,16384,null,0,b.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,1,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.content&&t.content.dataLoaded);e(n,8,0,o._19(1,"",o._41(n,8,0,o._29(n,9).transform("core.pulltorefresh")),""));e(n,13,0,t.component&&t.method)},function(e,n){e(n,1,0,o._29(n,2).statusbarPadding,o._29(n,2)._hasRefresher);e(n,4,0,"inactive"!==o._29(n,5).state,o._29(n,5)._top);e(n,7,0,o._29(n,8).r.state)})}t.d(n,"a",function(){return E});var o=t(1),r=t(407),i=t(157),l=t(5),s=t(59),a=t(21),u=t(182),d=t(30),c=t(9),p=t(17),f=t(35),h=t(36),m=t(108),_=t(40),g=t(160),v=t(45),C=t(213),y=t(174),P=t(26),A=t(19),b=t(8),I=t(456),S=o._14({encapsulation:2,styles:[],data:{}}),E=o._12("core-site-plugins-course-option",I.a,function View_CoreSitePluginsCourseOptionComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-course-option",[],null,null,null,View_CoreSitePluginsCourseOptionComponent_0,S)),o._15(1,114688,null,0,I.a,[s.a],null,null)],function(e,n){e(n,1,0)},null)},{courseId:"courseId",handlerUniqueName:"handlerUniqueName"},{},[])},function(e,n,t){"use strict";function View_CoreSitePluginsCourseFormatComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-plugin-content",[],null,null,null,r.b,r.a)),o._15(1,376832,[[1,4]],0,i.a,[l.a,s.a,[2,a.a],o.w],{component:[0,"component"],method:[1,"method"],args:[2,"args"],initResult:[3,"initResult"],data:[4,"data"]},null)],function(e,n){var t=n.component;e(n,1,0,t.component,t.method,t.args,t.initResult,t.data)},null)}function View_CoreSitePluginsCourseFormatComponent_0(e){return o._42(0,[o._37(671088640,1,{content:0}),(e()(),o._11(16777216,null,null,1,null,View_CoreSitePluginsCourseFormatComponent_1)),o._15(2,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.component&&t.method)},null)}t.d(n,"a",function(){return f});var o=t(1),r=t(407),i=t(157),l=t(5),s=t(59),a=t(21),u=t(8),d=t(457),c=t(179),p=o._14({encapsulation:2,styles:[],data:{}}),f=o._12("core-site-plugins-course-format",d.a,function View_CoreSitePluginsCourseFormatComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-course-format",[],null,null,null,View_CoreSitePluginsCourseFormatComponent_0,p)),o._15(1,573440,null,0,d.a,[s.a,c.a],null,null)],null,null)},{course:"course",sections:"sections",downloadEnabled:"downloadEnabled",initialSectionId:"initialSectionId",initialSectionNumber:"initialSectionNumber",moduleId:"moduleId",coreCourseFormatComponent:"coreCourseFormatComponent"},{completionChanged:"completionChanged"},[])},function(e,n,t){"use strict";function View_CoreSitePluginsUserProfileFieldComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var o=!0;if("created"===n){o=!1!==e.component.componentCreated(t)&&o}return o},r.b,r.a)),o._15(1,966656,null,0,i.a,[l.a,o.i,o.p,[2,s.a],o.w,a.a,u.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(219),i=t(194),l=t(156),s=t(21),a=t(5),u=t(3),d=t(460),c=t(59),p=t(192),f=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-user-profile-field",d.a,function View_CoreSitePluginsUserProfileFieldComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-user-profile-field",[],null,null,null,View_CoreSitePluginsUserProfileFieldComponent_0,f)),o._15(1,114688,null,0,d.a,[c.a,u.a,p.a],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",signup:"signup",registerAuth:"registerAuth"},{},[])},function(e,n,t){"use strict";function View_CoreSitePluginsQuestionComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var o=!0;if("created"===n){o=!1!==e.component.componentCreated(t)&&o}return o},r.b,r.a)),o._15(1,966656,null,0,i.a,[l.a,o.i,o.p,[2,s.a],o.w,a.a,u.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(219),i=t(194),l=t(156),s=t(21),a=t(5),u=t(3),d=t(458),c=t(59),p=t(74),f=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-question",d.a,function View_CoreSitePluginsQuestionComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-question",[],null,null,null,View_CoreSitePluginsQuestionComponent_0,f)),o._15(1,114688,null,0,d.a,[c.a,u.a,p.a],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[])},function(e,n,t){"use strict";function View_CoreSitePluginsQuestionBehaviourComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var o=!0;if("created"===n){o=!1!==e.component.componentCreated(t)&&o}return o},r.b,r.a)),o._15(1,966656,null,0,i.a,[l.a,o.i,o.p,[2,s.a],o.w,a.a,u.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(219),i=t(194),l=t(156),s=t(21),a=t(5),u=t(3),d=t(459),c=t(59),p=t(118),f=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-question-behaviour",d.a,function View_CoreSitePluginsQuestionBehaviourComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-question-behaviour",[],null,null,null,View_CoreSitePluginsQuestionBehaviourComponent_0,f)),o._15(1,114688,null,0,d.a,[c.a,u.a,p.a],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[])},function(e,n,t){"use strict";function View_CoreSitePluginsQuizAccessRuleComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var o=!0;if("created"===n){o=!1!==e.component.componentCreated(t)&&o}return o},r.b,r.a)),o._15(1,966656,null,0,i.a,[l.a,o.i,o.p,[2,s.a],o.w,a.a,u.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(219),i=t(194),l=t(156),s=t(21),a=t(5),u=t(3),d=t(461),c=t(59),p=t(130),f=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-quiz-access-rule",d.a,function View_CoreSitePluginsQuizAccessRuleComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-quiz-access-rule",[],null,null,null,View_CoreSitePluginsQuizAccessRuleComponent_0,f)),o._15(1,114688,null,0,d.a,[c.a,u.a,p.a],null,null)],function(e,n){e(n,1,0)},null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[])},function(e,n,t){"use strict";function View_CoreSitePluginsAssignFeedbackComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var o=!0;if("created"===n){o=!1!==e.component.componentCreated(t)&&o}return o},r.b,r.a)),o._15(1,966656,null,0,i.a,[l.a,o.i,o.p,[2,s.a],o.w,a.a,u.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(219),i=t(194),l=t(156),s=t(21),a=t(5),u=t(3),d=t(462),c=t(59),p=t(153),f=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-assign-feedback",d.a,function View_CoreSitePluginsAssignFeedbackComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-assign-feedback",[],null,null,null,View_CoreSitePluginsAssignFeedbackComponent_0,f)),o._15(1,114688,null,0,d.a,[c.a,u.a,p.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[])},function(e,n,t){"use strict";function View_CoreSitePluginsAssignSubmissionComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var o=!0;if("created"===n){o=!1!==e.component.componentCreated(t)&&o}return o},r.b,r.a)),o._15(1,966656,null,0,i.a,[l.a,o.i,o.p,[2,s.a],o.w,a.a,u.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(219),i=t(194),l=t(156),s=t(21),a=t(5),u=t(3),d=t(463),c=t(59),p=t(167),f=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-site-plugins-assign-submission",d.a,function View_CoreSitePluginsAssignSubmissionComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-site-plugins-assign-submission",[],null,null,null,View_CoreSitePluginsAssignSubmissionComponent_0,f)),o._15(1,114688,null,0,d.a,[c.a,u.a,p.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[])},function(e,n,t){"use strict";function View_CoreSitePluginsWorkshopAssessmentStrategyComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-compile-html",[],null,[[null,"created"]],function(e,n,t){var o=!0;if("created"===n){o=!1!==e.component.componentCreated(t)&&o}return o},r.b,r.a)),o._15(1,966656,null,0,i.a,[l.a,o.i,o.p,[2,s.a],o.w,a.a,u.a],{text:[0,"text"],jsData:[1,"jsData"]},{created:"created"}),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.content,t.jsData)},null)}t.d(n,"a",function(){return h});var o=t(1),r=t(219),i=t(194),l=t(156),s=t(21),a=t(5),u=t(3),d=t(679),c=t(59),p=t(193),f=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("core-siteplugins-workshop-assessment-strategy",d.a,function View_CoreSitePluginsWorkshopAssessmentStrategyComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"core-siteplugins-workshop-assessment-strategy",[],null,null,null,View_CoreSitePluginsWorkshopAssessmentStrategyComponent_0,f)),o._15(1,114688,null,0,d.a,[c.a,u.a,p.a],null,null)],function(e,n){e(n,1,0)},null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy"},{},[])},function(e,n,t){"use strict";t.d(n,"a",function(){return o});t(0);var o=function(){function CoreCreateLinksPipe(){this.replacePattern=/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])(?![^<]*>|[^<>]*<\/)/gim}return CoreCreateLinksPipe.prototype.transform=function(e){return e.replace(this.replacePattern,'<a href="$1">$1</a>')},CoreCreateLinksPipe}()},function(e,n,t){"use strict";function View_CoreBlockComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"div",[],[[8,"className",0]],null,null,null,null)),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(2,0,null,null,1,"core-dynamic-component",[],null,null,null,r.b,r.a)),o._15(3,901120,[[1,4]],0,i.a,[l.a,o.n,o.w,[2,s.a],o.i,o.p,a.a],{component:[0,"component"],data:[1,"data"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.componentClass,t.data)},function(e,n){e(n,0,0,o._19(1,"",n.component.class,""))})}function View_CoreBlockComponent_0(e){return o._42(0,[o._37(671088640,1,{dynamicComponent:0}),(e()(),o._40(-1,null,["\n"])),(e()(),o._11(16777216,null,null,1,null,View_CoreBlockComponent_1)),o._15(3,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.loaded&&t.componentClass&&t.block.visible)},null)}t.d(n,"a",function(){return d}),n.b=View_CoreBlockComponent_0;var o=t(1),r=t(725),i=t(200),l=t(7),s=t(21),a=t(5),u=t(8),d=(t(61),o._14({encapsulation:2,styles:[],data:{}}))},function(e,n,t){"use strict";t.d(n,"a",function(){return o});var o=function(){function CoreUrl(){}return CoreUrl.parse=function(e){var n=e.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!n)return null;var t=n[4]||"",o=-1===t.indexOf(":")?[t]:t.split(":");return{protocol:n[2]||void 0,domain:o[0]||void 0,port:o[1]||void 0,path:n[5]||void 0,query:n[7]||void 0,fragment:n[9]||void 0}},CoreUrl.guessMoodleDomain=function(e){e.match(/^https?:\/\//)||(e="https://"+e);var n=e.match(new RegExp("^https?://(.*?)("+["/my/?","/\\?redirect=0","/index\\.php","/course/view\\.php","/login/index\\.php","/mod/page/view\\.php"].join("|")+")"));if(n)return n[1];var t=CoreUrl.parse(e);return t&&t.domain?t.domain:null},CoreUrl}()},function(e,n,t){"use strict";function View_AddonModGlossaryModePickerPopoverComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),o._15(8,16384,[[2,4]],0,d.a,[s.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._40(9,null,["",""])),o._32(131072,c.a,[p.a,o.i]),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(12,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"ionSelect"],[null,"click"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,13)._click(t)&&r}if("ionSelect"===n){r=!1!==i.modePicked(t,e.context.$implicit.key)&&r}return r},f.b,f.a)),o._15(13,245760,null,0,h.a,[l.a,s.a,o.p,o.K,[2,i.a],[2,m.a]],{value:[0,"value"]},{ionSelect:"ionSelect"}),(e()(),o._40(-1,2,["\n    "]))],function(e,n){e(n,13,0,n.context.$implicit.key)},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform(n.context.$implicit.langkey)));e(n,12,0,o._29(n,13)._disabled)})}function View_AddonModGlossaryModePickerPopoverComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.selectedMode=t)&&o}return o},null,null)),o._15(1,1064960,null,1,m.a,[o.K,o.p,o.i],null,null),o._37(335544320,1,{_header:0}),o._35(1024,null,_.l,function(e){return[e]},[m.a]),o._15(4,671744,null,0,_.q,[[8,null],[8,null],[8,null],[2,_.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,_.m,null,[_.q]),o._15(6,16384,null,0,_.n,[_.m],null,null),o._15(7,16384,null,0,g.a,[s.a,o.p,o.K,v.a,C.l,y.a],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModGlossaryModePickerPopoverComponent_1)),o._15(10,802816,null,0,P.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.selectedMode);e(n,10,0,t.modes)},function(e,n){e(n,0,0,o._29(n,6).ngClassUntouched,o._29(n,6).ngClassTouched,o._29(n,6).ngClassPristine,o._29(n,6).ngClassDirty,o._29(n,6).ngClassValid,o._29(n,6).ngClassInvalid,o._29(n,6).ngClassPending)})}t.d(n,"a",function(){return E});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(68),c=t(26),p=t(19),f=t(177),h=t(146),m=t(138),_=t(24),g=t(87),v=t(17),C=t(45),y=t(35),P=t(8),A=t(655),b=t(70),I=t(40),S=o._14({encapsulation:2,styles:[],data:{}}),E=o._12("addon-mod-glossary-mode-picker-popover",A.a,function View_AddonModGlossaryModePickerPopoverComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-glossary-mode-picker-popover",[],null,null,null,View_AddonModGlossaryModePickerPopoverComponent_0,S)),o._15(1,49152,null,0,A.a,[b.a,I.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function View_AddonModQuizConnectionErrorComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,u.a,[],null,null),(e()(),o._40(6,2,["",""])),o._32(131072,d.a,[c.a,o.i])],null,function(e,n){e(n,6,0,o._41(n,6,0,o._29(n,7).transform("addon.mod_quiz.connectionerror")))})}t.d(n,"a",function(){return h});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(34),d=t(26),c=t(19),p=t(777),f=o._14({encapsulation:2,styles:[],data:{}}),h=o._12("addon-mod-quiz-connection-error",p.a,function View_AddonModQuizConnectionErrorComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-quiz-connection-error",[],null,null,null,View_AddonModQuizConnectionErrorComponent_0,f)),o._15(1,49152,null,0,p.a,[],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function View_AddonModWikiSubwikiPickerComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"ion-item-divider",[["class","item item-divider"]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(5,16384,null,0,u.a,[s.a,o.p,o.K],null,null),(e()(),o._40(6,2,["\n            ","\n        "]))],null,function(e,n){e(n,6,0,n.parent.context.$implicit.label)})}function View_AddonModWikiSubwikiPickerComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"ion-icon",[["item-end",""],["name","checkmark"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(1,147456,[[6,4]],0,d.a,[s.a,o.p,o.K],{name:[0,"name"]},null)],function(e,n){e(n,1,0,"checkmark")},function(e,n){e(n,0,0,o._29(n,1)._hidden)})}function View_AddonModWikiSubwikiPickerComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[1,"disabled",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.openSubwiki(e.context.$implicit)&&o}return o},r.b,r.a)),o._15(1,278528,null,0,c.i,[o.v,o.w,o.p,o.L],{ngClass:[0,"ngClass"]},null),o._33(2,{"addon-mod_wiki-subwiki-selected":0}),o._15(3,1097728,null,3,i.a,[l.a,s.a,o.p,o.K,[2,a.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(7,16384,null,0,p.a,[],null,null),(e()(),o._40(8,2,["\n            ","\n            "])),(e()(),o._11(16777216,null,4,1,null,View_AddonModWikiSubwikiPickerComponent_4)),o._15(10,16384,null,0,c.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,e(n,2,0,t.isSubwikiSelected(n.context.$implicit)));e(n,10,0,t.isSubwikiSelected(n.context.$implicit))},function(e,n){e(n,0,0,!n.context.$implicit.canedit&&n.context.$implicit.id<=0||null);e(n,8,0,n.context.$implicit.name)})}function View_AddonModWikiSubwikiPickerComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiSubwikiPickerComponent_2)),o._15(3,16384,null,0,c.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiSubwikiPickerComponent_3)),o._15(6,802816,null,0,c.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.context.$implicit.label);e(n,6,0,n.context.$implicit.subwikis)},null)}function View_AddonModWikiSubwikiPickerComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-list",[],null,null,null,null,null)),o._15(1,16384,null,0,f.a,[s.a,o.p,o.K,h.a,m.l,_.a],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWikiSubwikiPickerComponent_1)),o._15(4,802816,null,0,c.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){e(n,4,0,n.component.subwikis)},null)}t.d(n,"a",function(){return P});var o=t(1),r=t(32),i=t(22),l=t(20),s=t(9),a=t(28),u=t(101),d=t(49),c=t(8),p=t(34),f=t(87),h=t(17),m=t(45),_=t(35),g=t(670),v=t(70),C=t(40),y=o._14({encapsulation:2,styles:[],data:{}}),P=o._12("addon-mod-wiki-subwiki-picker",g.a,function View_AddonModWikiSubwikiPickerComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-mod-wiki-subwiki-picker",[],null,null,null,View_AddonModWikiSubwikiPickerComponent_0,y)),o._15(1,49152,null,0,g.a,[v.a,C.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function View_AddonModWorkshopSubmissionComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.profile.fullname)})}function View_AddonModWorkshopSubmissionComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],[[2,"addon-has-overriden-grade",null]],null,null,null,null)),(e()(),o._40(1,null,["\n                ",": ","\n            "])),o._33(2,{$a:0}),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,0,0,t.showGrade(t.submission.submissiongradeover));e(n,1,0,o._41(n,1,0,o._29(n,3).transform("addon.mod_workshop.submissiongradeof",e(n,2,0,t.workshop.grade))),t.submission.submissiongrade)})}function View_AddonModWorkshopSubmissionComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[["class","addon-overriden-grade"]],null,null,null,null,null)),(e()(),o._40(1,null,["\n                ",": ","\n            "])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_workshop.gradeover")),t.submission.submissiongradeover)})}function View_AddonModWorkshopSubmissionComponent_5(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["\n                ",": ","\n            "])),o._33(2,{$a:0}),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("addon.mod_workshop.gradinggradeof",e(n,2,0,t.workshop.gradinggrade))),t.submission.gradinggrade)})}function View_AddonModWorkshopSubmissionComponent_6(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"ion-note",[["item-end",""]],null,null,null,null,null)),o._15(1,16384,null,0,l.a,[s.a,o.p,o.K],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(4,147456,null,0,a.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(5,null,[" ","\n            "])),o._32(131072,r.a,[i.a,o.i])],function(e,n){e(n,4,0,"time")},function(e,n){e(n,3,0,o._29(n,4)._hidden);e(n,5,0,o._41(n,5,0,o._29(n,6).transform("core.notsent")))})}function View_AddonModWorkshopSubmissionComponent_8(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._16(1,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(2,147456,null,0,a.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(3,null,[" ",""])),o._32(131072,r.a,[i.a,o.i])],function(e,n){e(n,2,0,"time")},function(e,n){e(n,1,0,o._29(n,2)._hidden);e(n,3,0,o._41(n,3,0,o._29(n,4).transform("core.notsent")))})}function View_AddonModWorkshopSubmissionComponent_9(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),o._16(1,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(2,147456,null,0,a.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(3,null,[" ",""])),o._32(131072,r.a,[i.a,o.i])],function(e,n){e(n,2,0,"trash")},function(e,n){e(n,1,0,o._29(n,2)._hidden);e(n,3,0,o._41(n,3,0,o._29(n,4).transform("core.deletedoffline")))})}function View_AddonModWorkshopSubmissionComponent_7(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),o._15(1,16384,null,0,l.a,[s.a,o.p,o.K],null,null),(e()(),o._40(2,null,["\n                ","\n                "])),o._34(3,1),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopSubmissionComponent_8)),o._15(5,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopSubmissionComponent_9)),o._15(8,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "]))],function(e,n){var t=n.component;e(n,5,0,t.submission.offline);e(n,8,0,t.submission.deleted)},function(e,n){var t=n.component;e(n,2,0,o._41(n,2,0,e(n,3,0,o._29(n.parent.parent,0),t.submission.timemodified)))})}function View_AddonModWorkshopSubmissionComponent_10(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,d.b,d.a)),o._15(1,1097728,null,3,c.a,[p.a,s.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,4,{contentLabel:0}),o._37(603979776,5,{_buttons:1}),o._37(603979776,6,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(7,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(8,540672,null,0,m.a,[o.p,_.a,g.a,v.a,i.a,C.a,y.a,P.a,A.a,b.a,I.a,S.a,[2,E.a],[2,M.a],[2,w.a],k.a,T.a,O.a,D.a,x.a,o.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),o._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,t.submission.content,t.component,t.componentId,"module",t.module.id,t.courseId)},null)}function View_AddonModWorkshopSubmissionComponent_12(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,F.b,F.a)),o._15(1,16384,null,0,L.a,[],null,null),o._15(2,770048,null,0,U.a,[E.a,_.a,y.a,I.a,T.a,[2,w.a]],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null)],function(e,n){var t=n.component;e(n,2,0,t.evaluateByProfile,t.evaluateByProfile.id,t.courseId)},null)}function View_AddonModWorkshopSubmissionComponent_13(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"h2",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""])),o._33(2,{$a:0}),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("addon.mod_workshop.feedbackby",e(n,2,0,t.evaluateByProfile.fullname))))})}function View_AddonModWorkshopSubmissionComponent_11(e){return o._42(0,[(e()(),o._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,d.b,d.a)),o._15(1,1097728,null,3,c.a,[p.a,s.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,7,{contentLabel:0}),o._37(603979776,8,{_buttons:1}),o._37(603979776,9,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopSubmissionComponent_12)),o._15(8,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n\n            "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_13)),o._15(11,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(13,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(14,540672,null,0,m.a,[o.p,_.a,g.a,v.a,i.a,C.a,y.a,P.a,A.a,b.a,I.a,S.a,[2,E.a],[2,M.a],[2,w.a],k.a,T.a,O.a,D.a,x.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,t.evaluateByProfile);e(n,11,0,t.evaluateByProfile&&t.evaluateByProfile.fullname);e(n,14,0,t.submission.feedbackauthor,"module",t.module.id,t.courseId)},null)}function View_AddonModWorkshopSubmissionComponent_14(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,d.b,d.a)),o._15(1,1097728,null,3,c.a,[p.a,s.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,10,{contentLabel:0}),o._37(603979776,11,{_buttons:1}),o._37(603979776,12,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(7,0,null,2,6,"button",[["block",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoSubmission()&&o}return o},R.b,R.a)),o._15(8,1097728,[[11,4]],0,H.a,[[8,""],s.a,o.p,o.K],{block:[0,"block"]},null),(e()(),o._40(9,0,["\n                ","\n                "])),o._32(131072,r.a,[i.a,o.i]),(e()(),o._16(11,0,null,0,1,"ion-icon",[["item-end",""],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(12,147456,null,0,a.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._40(-1,2,["\n        "]))],function(e,n){e(n,8,0,"");e(n,12,0,"arrow-forward")},function(e,n){e(n,9,0,o._41(n,9,0,o._29(n,10).transform("core.showmore")));e(n,11,0,o._29(n,12)._hidden)})}function View_AddonModWorkshopSubmissionComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,47,"div",[],null,null,null,null,null)),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(2,0,null,null,32,"ion-list-header",[["class","item"],["text-wrap",""]],null,null,null,d.b,d.a)),o._15(3,1097728,null,3,c.a,[p.a,s.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,1,{contentLabel:0}),o._37(603979776,2,{_buttons:1}),o._37(603979776,3,{_icons:1}),o._15(7,16384,null,0,N.a,[s.a,o.K,o.p,[8,null]],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(9,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,F.b,F.a)),o._15(10,16384,null,0,L.a,[],null,null),o._15(11,770048,null,0,U.a,[E.a,_.a,y.a,I.a,T.a,[2,w.a]],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(13,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._16(14,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(15,540672,null,0,m.a,[o.p,_.a,g.a,v.a,i.a,C.a,y.a,P.a,A.a,b.a,I.a,S.a,[2,E.a],[2,M.a],[2,w.a],k.a,T.a,O.a,D.a,x.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_2)),o._15(18,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_3)),o._15(21,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_4)),o._15(24,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_5)),o._15(27,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,4,1,null,View_AddonModWorkshopSubmissionComponent_6)),o._15(30,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,4,1,null,View_AddonModWorkshopSubmissionComponent_7)),o._15(33,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopSubmissionComponent_10)),o._15(37,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._16(39,0,null,null,1,"core-files",[],null,null,null,B.b,B.a)),o._15(40,376832,null,0,V.a,[W.a,y.a,o.w],{files:[0,"files"],component:[1,"component"],componentId:[2,"componentId"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopSubmissionComponent_11)),o._15(43,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopSubmissionComponent_14)),o._15(46,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,11,0,t.profile,t.profile&&t.profile.id,t.courseId);e(n,15,0,t.submission.title,"module",t.module.id,t.courseId);e(n,18,0,t.profile&&t.profile.fullname);e(n,21,0,t.showGrade(t.submission.submissiongrade));e(n,24,0,t.showGrade(t.submission.submissiongradeover));e(n,27,0,t.access.canviewallsubmissions&&t.showGrade(t.submission.gradinggrade));e(n,30,0,!t.submission.timemodified);e(n,33,0,t.submission.timemodified);e(n,37,0,t.submission.content);e(n,40,0,t.submission.attachmentfiles,t.component,t.componentId);e(n,43,0,t.viewDetails&&t.submission.feedbackauthor);e(n,46,0,t.viewDetails)},null)}function View_AddonModWorkshopSubmissionComponent_16(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.profile.fullname)})}function View_AddonModWorkshopSubmissionComponent_17(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["\n            ",": "," / ","\n        "])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_workshop.receivedgrades")),t.submission.reviewedbycount,t.submission.reviewedby.length)})}function View_AddonModWorkshopSubmissionComponent_18(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["\n            ",": "," / ","\n        "])),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,2).transform("addon.mod_workshop.givengrades")),t.submission.reviewerofcount,t.submission.reviewerof.length)})}function View_AddonModWorkshopSubmissionComponent_19(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["\n            ",": ","\n        "])),o._33(2,{$a:0}),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("addon.mod_workshop.submissiongradeof",e(n,2,0,t.workshop.grade))),t.submission.submissiongrade)})}function View_AddonModWorkshopSubmissionComponent_20(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[["class","addon-overriden-grade"]],null,null,null,null,null)),(e()(),o._40(1,null,["\n            ",": ","\n        "])),o._33(2,{$a:0}),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("addon.mod_workshop.submissiongradeof",e(n,2,0,t.workshop.grade))),t.submission.submissiongradeover)})}function View_AddonModWorkshopSubmissionComponent_21(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),o._40(1,null,["\n            ",": ","\n        "])),o._33(2,{$a:0}),o._32(131072,r.a,[i.a,o.i])],null,function(e,n){var t=n.component;e(n,1,0,o._41(n,1,0,o._29(n,3).transform("addon.mod_workshop.gradinggradeof",e(n,2,0,t.workshop.gradinggrade))),t.submission.gradinggrade)})}function View_AddonModWorkshopSubmissionComponent_22(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-badge",[["color","success"]],null,null,null,null,null)),o._15(1,16384,null,0,K.a,[s.a,o.p,o.K],{color:[0,"color"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,r.a,[i.a,o.i])],function(e,n){e(n,1,0,"success")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("addon.mod_workshop.assessedsubmission")))})}function View_AddonModWorkshopSubmissionComponent_23(e){return o._42(0,[(e()(),o._16(0,0,null,null,3,"ion-badge",[["color","danger"]],null,null,null,null,null)),o._15(1,16384,null,0,K.a,[s.a,o.p,o.K],{color:[0,"color"]},null),(e()(),o._40(2,null,["",""])),o._32(131072,r.a,[i.a,o.i])],function(e,n){e(n,1,0,"danger")},function(e,n){e(n,2,0,o._41(n,2,0,o._29(n,3).transform("addon.mod_workshop.notassessed")))})}function View_AddonModWorkshopSubmissionComponent_25(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),o._16(1,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(2,147456,null,0,a.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(3,null,[" ",""])),o._32(131072,r.a,[i.a,o.i])],function(e,n){e(n,2,0,"time")},function(e,n){e(n,1,0,o._29(n,2)._hidden);e(n,3,0,o._41(n,3,0,o._29(n,4).transform("core.notsent")))})}function View_AddonModWorkshopSubmissionComponent_26(e){return o._42(0,[(e()(),o._16(0,0,null,null,4,"div",[],null,null,null,null,null)),(e()(),o._16(1,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(2,147456,null,0,a.a,[s.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(3,null,[" ",""])),o._32(131072,r.a,[i.a,o.i])],function(e,n){e(n,2,0,"trash")},function(e,n){e(n,1,0,o._29(n,2)._hidden);e(n,3,0,o._41(n,3,0,o._29(n,4).transform("core.deletedoffline")))})}function View_AddonModWorkshopSubmissionComponent_24(e){return o._42(0,[(e()(),o._16(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),o._15(1,16384,null,0,l.a,[s.a,o.p,o.K],null,null),(e()(),o._40(2,null,["\n            ","\n            "])),o._34(3,1),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopSubmissionComponent_25)),o._15(5,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_AddonModWorkshopSubmissionComponent_26)),o._15(8,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,5,0,t.offline);e(n,8,0,t.submission.deleted)},function(e,n){var t=n.component;e(n,2,0,o._41(n,2,0,e(n,3,0,o._29(n.parent.parent,0),t.submission.timemodified)))})}function View_AddonModWorkshopSubmissionComponent_15(e){return o._42(0,[(e()(),o._16(0,0,null,null,41,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[1,"detail-none",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.gotoSubmission()&&o}return o},d.b,d.a)),o._15(1,1097728,null,3,c.a,[p.a,s.a,o.p,o.K,[2,f.a]],null,null),o._37(335544320,13,{contentLabel:0}),o._37(603979776,14,{_buttons:1}),o._37(603979776,15,{_icons:1}),o._15(5,16384,null,0,h.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,F.b,F.a)),o._15(8,16384,null,0,L.a,[],null,null),o._15(9,770048,null,0,U.a,[E.a,_.a,y.a,I.a,T.a,[2,w.a]],{user:[0,"user"],userId:[1,"userId"],courseId:[2,"courseId"]},null),(e()(),o._40(-1,2,["\n\n        "])),(e()(),o._16(11,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),o._16(12,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),o._15(13,540672,null,0,m.a,[o.p,_.a,g.a,v.a,i.a,C.a,y.a,P.a,A.a,b.a,I.a,S.a,[2,E.a],[2,M.a],[2,w.a],k.a,T.a,O.a,D.a,x.a,o.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_16)),o._15(16,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_17)),o._15(19,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_18)),o._15(22,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_19)),o._15(25,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_20)),o._15(28,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_21)),o._15(31,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n\n        "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_22)),o._15(34,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._11(16777216,null,2,1,null,View_AddonModWorkshopSubmissionComponent_23)),o._15(37,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n\n        "])),(e()(),o._11(16777216,null,4,1,null,View_AddonModWorkshopSubmissionComponent_24)),o._15(40,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,9,0,t.profile,t.profile&&t.profile.id,t.courseId);e(n,13,0,t.submission.title,"module",t.module.id,t.courseId);e(n,16,0,t.profile&&t.profile.fullname);e(n,19,0,t.submission.reviewedbycount);e(n,22,0,t.submission.reviewerofcount);e(n,25,0,!t.showGrade(t.submission.submissiongradeover)&&t.showGrade(t.submission.submissiongrade));e(n,28,0,t.showGrade(t.submission.submissiongradeover));e(n,31,0,t.access.canviewallsubmissions&&t.showGrade(t.submission.gradinggrade));e(n,34,0,t.assessment&&(t.showGrade(t.assessment.grade)||t.assessment.offline));e(n,37,0,t.assessment&&!t.showGrade(t.assessment.grade)&&!t.assessment.offline);e(n,40,0,t.submission.timemodified)},function(e,n){e(n,0,0,!n.component.submission.timemodified||null)})}function View_AddonModWorkshopSubmissionComponent_0(e){return o._42(0,[o._32(0,q.a,[A.a,i.a,G.a]),(e()(),o._16(1,0,null,null,8,"core-loading",[],null,null,null,j.b,j.a)),o._15(2,638976,null,0,Q.a,[i.a,o.p,T.a,y.a],{hideUntil:[0,"hideUntil"]},null),(e()(),o._40(-1,0,["\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopSubmissionComponent_1)),o._15(5,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n\n    "])),(e()(),o._11(16777216,null,0,1,null,View_AddonModWorkshopSubmissionComponent_15)),o._15(8,16384,null,0,u.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,0,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.loaded);e(n,5,0,!t.summary);e(n,8,0,t.summary)},null)}t.d(n,"a",function(){return z}),n.b=View_AddonModWorkshopSubmissionComponent_0;var o=t(1),r=t(26),i=t(19),l=t(248),s=t(9),a=t(49),u=t(8),d=t(32),c=t(22),p=t(20),f=t(28),h=t(34),m=t(48),_=t(2),g=t(5),v=t(12),C=t(17),y=t(3),P=t(23),A=t(7),b=t(18),I=t(11),S=t(16),E=t(21),M=t(30),w=t(29),k=t(43),T=t(10),O=t(41),D=t(31),x=t(37),F=t(214),L=t(161),U=t(183),R=t(47),H=t(44),N=t(321),B=t(530),V=t(327),W=t(67),K=t(144),q=t(377),G=t(25),j=t(55),Q=t(52),z=(t(190),t(204),o._14({encapsulation:2,styles:[],data:{}}))},function(e,n,t){"use strict";function View_CoreLoginSitesPage_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.toggleDelete()&&o}return o},r.b,r.a)),o._15(1,1097728,[[1,4]],0,i.a,[[8,""],l.a,o.p,o.K],null,null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["ios","md-create"],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"],ios:[1,"ios"]},null),(e()(),o._40(-1,0,["\n            "]))],function(e,n){e(n,5,0,"create","md-create")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.delete")));e(n,4,0,o._29(n,5)._hidden)})}function View_CoreLoginSitesPage_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),o._15(1,16384,null,0,d.a,[l.a,o.p,o.K],null,null),(e()(),o._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.context.$implicit.badge)})}function View_CoreLoginSitesPage_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.deleteSite(t,e.parent.context.index)&&o}return o},r.b,r.a)),o._15(1,1097728,[[3,4]],0,i.a,[[8,""],l.a,o.p,o.K],{color:[0,"color"],clear:[1,"clear"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(5,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"danger","");e(n,5,0,"trash")},function(e,n){e(n,0,0,o._41(n,0,0,o._29(n,2).transform("core.delete")));e(n,4,0,o._29(n,5)._hidden)})}function View_CoreLoginSitesPage_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,31,"a",[["class","item item-block"],["detail-none",""],["ion-item",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.login(e.context.$implicit.id)&&o}return o},c.b,c.a)),o._15(1,1097728,null,3,p.a,[f.a,l.a,o.p,o.K,[2,h.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(5,16384,null,0,m.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(7,0,null,0,7,"ion-avatar",[["item-start",""]],null,null,null,null,null)),o._15(8,16384,null,0,_.a,[],null,null),(e()(),o._40(-1,null,["\n                "])),(e()(),o._16(10,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"alt",0]],null,null,null,null)),o._15(11,4734976,null,0,g.a,[o.p,v.a,C.a,y.a,P.a,A.a,b.a,I.a,S.a],{siteId:[0,"siteId"],src:[1,"src"]},null),o._33(12,{$a:0}),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,null,["\n            "])),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(16,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),o._40(17,null,["",""])),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(19,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),o._16(20,16777216,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),o._15(21,540672,null,0,E.a,[o.p,P.a,A.a,M.a,a.a,y.a,S.a,b.a,v.a,C.a,I.a,w.a,[2,k.a],[2,T.a],[2,O.a],D.a,x.a,F.a,L.a,U.a,o.W],{text:[0,"text"],siteId:[1,"siteId"],clean:[2,"clean"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(23,0,null,2,1,"p",[],null,null,null,null,null)),(e()(),o._40(24,null,["",""])),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,4,1,null,View_CoreLoginSitesPage_3)),o._15(27,16384,null,0,R.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._11(16777216,null,4,1,null,View_CoreLoginSitesPage_4)),o._15(30,16384,null,0,R.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,11,0,n.context.$implicit.id,n.context.$implicit.avatar);e(n,21,0,n.context.$implicit.siteName,n.context.$implicit.id,"true");e(n,27,0,!t.showDelete&&n.context.$implicit.badge);e(n,30,0,t.showDelete)},function(e,n){e(n,10,0,o._19(1,"",o._41(n,10,0,o._29(n,13).transform("core.pictureof",e(n,12,0,n.context.$implicit.fullname))),""));e(n,17,0,n.context.$implicit.fullName);e(n,24,0,n.context.$implicit.siteUrl)})}function View_CoreLoginSitesPage_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,29,"ion-header",[],null,null,null,null,null)),o._15(1,16384,null,0,H.a,[l.a,o.p,o.K,[2,N.a]],null,null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._16(3,0,null,null,25,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,B.b,B.a)),o._15(4,49152,null,0,V.a,[W.a,[2,N.a],[2,k.a],l.a,o.p,o.K],null,null),o._15(5,212992,null,0,K.a,[V.a,y.a,a.a,x.a],null,null),(e()(),o._40(-1,3,["\n        "])),(e()(),o._16(7,0,null,3,3,"ion-title",[],null,null,null,q.b,q.a)),o._15(8,49152,null,0,G.a,[l.a,o.p,o.K,[2,j.a],[2,V.a]],null,null),(e()(),o._40(9,0,["",""])),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,3,["\n\n        "])),(e()(),o._16(12,0,null,2,15,"ion-buttons",[["end",""]],null,null,null,null,null)),o._15(13,16384,null,1,Q.a,[l.a,o.p,o.K,[2,j.a],[2,V.a]],null,null),o._37(603979776,1,{_buttons:1}),(e()(),o._40(-1,null,["\n            "])),(e()(),o._16(16,0,null,null,7,"button",[["icon-only",""],["ion-button",""],["navPush","CoreAppSettingsPage"]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var r=!0;if("click"===n){r=!1!==o._29(e,18).onClick()&&r}return r},r.b,r.a)),o._15(17,1097728,[[1,4]],0,i.a,[[8,""],l.a,o.p,o.K],null,null),o._15(18,16384,null,0,z.a,[[2,k.a]],{navPush:[0,"navPush"]},null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n                "])),(e()(),o._16(21,0,null,0,1,"core-icon",[["name","fa-cogs"]],null,null,null,$.b,$.a)),o._15(22,704512,null,0,Y.a,[o.p,l.a],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n            "])),(e()(),o._40(-1,null,["\n            "])),(e()(),o._11(16777216,null,null,1,null,View_CoreLoginSitesPage_1)),o._15(26,16384,null,0,R.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._40(-1,3,["\n    "])),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"])),(e()(),o._16(31,0,null,null,24,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,X.b,X.a)),o._15(32,4374528,null,0,T.a,[l.a,y.a,J.a,o.p,o.K,W.a,Z.a,o.D,[2,N.a],[2,k.a]],null,null),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(34,0,null,1,5,"ion-list",[],null,null,null,null,null)),o._15(35,16384,null,0,ee.a,[l.a,o.p,o.K,y.a,ne.l,J.a],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_CoreLoginSitesPage_2)),o._15(38,802816,null,0,R.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._40(-1,1,["\n    "])),(e()(),o._16(41,0,null,0,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,te.b,te.a)),o._15(42,212992,null,0,oe.a,[o.p,T.a],null,null),o._15(43,1228800,null,2,re.a,[y.a],null,null),o._37(335544320,5,{_mainButton:0}),o._37(603979776,6,{_fabLists:1}),(e()(),o._40(-1,0,["\n        "])),(e()(),o._16(47,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.add()&&o}return o},ie.b,ie.a)),o._15(48,49152,[[5,4]],0,le.a,[l.a,o.p,o.K],null,null),o._32(131072,s.a,[a.a,o.i]),(e()(),o._40(-1,0,["\n            "])),(e()(),o._16(51,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),o._15(52,147456,null,0,u.a,[l.a,o.p,o.K],{name:[0,"name"]},null),(e()(),o._40(-1,0,["\n        "])),(e()(),o._40(-1,0,["\n    "])),(e()(),o._40(-1,1,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0);e(n,18,0,"CoreAppSettingsPage");e(n,22,0,"fa-cogs");e(n,26,0,t.sites&&t.sites.length>0);e(n,38,0,t.sites),e(n,42,0);e(n,52,0,"add")},function(e,n){e(n,3,0,o._29(n,4)._hidden,o._29(n,4)._sbPadding);e(n,9,0,o._41(n,9,0,o._29(n,10).transform("core.settings.sites")));e(n,16,0,o._41(n,16,0,o._29(n,19).transform("core.settings.appsettings")));e(n,31,0,o._29(n,32).statusbarPadding,o._29(n,32)._hasRefresher);e(n,47,0,o._41(n,47,0,o._29(n,49).transform("core.add")));e(n,51,0,o._29(n,52)._hidden)})}t.d(n,"a",function(){return ce});var o=t(1),r=t(47),i=t(44),l=t(9),s=t(26),a=t(19),u=t(49),d=t(144),c=t(32),p=t(22),f=t(20),h=t(28),m=t(34),_=t(161),g=t(229),v=t(7),C=t(18),y=t(17),P=t(2),A=t(5),b=t(23),I=t(11),S=t(3),E=t(48),M=t(12),w=t(16),k=t(21),T=t(30),O=t(29),D=t(43),x=t(10),F=t(41),L=t(31),U=t(37),R=t(8),H=t(371),N=t(40),B=t(723),V=t(212),W=t(36),K=t(473),q=t(724),G=t(314),j=t(247),Q=t(372),z=t(230),$=t(81),Y=t(76),X=t(182),J=t(35),Z=t(108),ee=t(87),ne=t(45),te=t(281),oe=t(255),re=t(218),ie=t(282),le=t(191),se=t(400),ae=t(126),ue=t(137),de=o._14({encapsulation:2,styles:[],data:{}}),ce=o._12("page-core-login-sites",se.a,function View_CoreLoginSitesPage_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"page-core-login-sites",[],null,null,null,View_CoreLoginSitesPage_0,de)),o._15(1,49152,null,0,se.a,[A.a,F.a,P.a,ae.a,v.a,ue.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function View_AddonCalendarFilterPopoverComponent_1(e){return o._42(0,[(e()(),o._16(0,0,null,null,23,"ion-item",[["class","addon-calendar-event item item-block"]],null,null,null,r.b,r.a)),o._15(1,278528,null,0,i.i,[o.v,o.w,o.p,o.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),o._31(2,1),o._15(3,1097728,null,3,l.a,[s.a,a.a,o.p,o.K,[2,u.a]],null,null),o._37(335544320,2,{contentLabel:0}),o._37(603979776,3,{_buttons:1}),o._37(603979776,4,{_icons:1}),o._15(7,16384,null,0,d.a,[],null,null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(9,0,null,0,1,"core-icon",[["item-start",""]],null,null,null,c.b,c.a)),o._15(10,704512,null,0,p.a,[o.p,a.a],{name:[0,"name"]},null),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(12,0,null,1,3,"ion-label",[],null,null,null,null,null)),o._15(13,16384,[[2,4]],0,f.a,[a.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._40(14,null,["",""])),o._32(131072,h.a,[m.a,o.i]),(e()(),o._40(-1,2,["\n        "])),(e()(),o._16(17,0,null,4,5,"ion-toggle",[],[[2,"toggle-disabled",null],[2,"toggle-checked",null],[2,"toggle-activated",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"keyup"]],function(e,n,t){var r=!0,i=e.component;if("keyup"===n){r=!1!==o._29(e,18)._keyup(t)&&r}if("ngModelChange"===n){r=!1!==(i.types[e.context.$implicit]=t)&&r}if("ionChange"===n){r=!1!==i.onChange(t)&&r}return r},_.b,_.a)),o._15(18,1228800,null,0,g.a,[s.a,a.a,v.a,o.p,o.K,C.a,[2,l.a],y.l,P.a,o.D],null,{ionChange:"ionChange"}),o._35(1024,null,A.l,function(e){return[e]},[g.a]),o._15(20,671744,null,0,A.q,[[8,null],[8,null],[8,null],[2,A.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,A.m,null,[A.q]),o._15(22,16384,null,0,A.n,[A.m],null,null),(e()(),o._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,1,0,"addon-calendar-event",e(n,2,0,"addon-calendar-eventtype-"+n.context.$implicit));e(n,10,0,t.typeIcons[n.context.$implicit]);e(n,20,0,t.types[n.context.$implicit])},function(e,n){e(n,14,0,o._41(n,14,0,o._29(n,15).transform("addon.calendar."+n.context.$implicit+"events")));e(n,17,0,o._29(n,18)._disabled,o._29(n,18)._value,o._29(n,18)._activated,o._29(n,22).ngClassUntouched,o._29(n,22).ngClassTouched,o._29(n,22).ngClassPristine,o._29(n,22).ngClassDirty,o._29(n,22).ngClassValid,o._29(n,22).ngClassInvalid,o._29(n,22).ngClassPending)})}function View_AddonCalendarFilterPopoverComponent_2(e){return o._42(0,[(e()(),o._16(0,0,null,null,5,"ion-item-divider",[["class","item item-divider"]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,l.a,[s.a,a.a,o.p,o.K,[2,u.a]],null,null),o._37(335544320,5,{contentLabel:0}),o._37(603979776,6,{_buttons:1}),o._37(603979776,7,{_icons:1}),o._15(5,16384,null,0,b.a,[a.a,o.p,o.K],null,null)],null,null)}function View_AddonCalendarFilterPopoverComponent_4(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),o._15(1,1097728,null,3,l.a,[s.a,a.a,o.p,o.K,[2,u.a]],null,null),o._37(335544320,9,{contentLabel:0}),o._37(603979776,10,{_buttons:1}),o._37(603979776,11,{_icons:1}),o._15(5,16384,null,0,d.a,[],null,null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),o._15(8,16384,[[9,4]],0,f.a,[a.a,o.p,o.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),o._16(9,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),o._15(10,540672,null,0,I.a,[o.p,S.a,E.a,M.a,m.a,v.a,w.a,k.a,T.a,O.a,D.a,x.a,[2,F.a],[2,L.a],[2,U.a],R.a,H.a,N.a,B.a,V.a,o.W],{text:[0,"text"]},null),(e()(),o._40(-1,2,["\n            "])),(e()(),o._16(12,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"ionSelect"],[null,"click"]],function(e,n,t){var r=!0,i=e.component;if("click"===n){r=!1!==o._29(e,13)._click(t)&&r}if("ionSelect"===n){r=!1!==i.onChange(t)&&r}return r},W.b,W.a)),o._15(13,245760,null,0,K.a,[s.a,a.a,o.p,o.K,[2,l.a],[2,q.a]],{value:[0,"value"]},{ionSelect:"ionSelect"}),(e()(),o._40(-1,2,["\n        "]))],function(e,n){e(n,10,0,n.context.$implicit.fullname);e(n,13,0,o._19(1,"",n.context.$implicit.id,""))},function(e,n){e(n,12,0,o._29(n,13)._disabled)})}function View_AddonCalendarFilterPopoverComponent_3(e){return o._42(0,[(e()(),o._16(0,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.courseId=t)&&o}return o},null,null)),o._15(1,1064960,null,1,q.a,[o.K,o.p,o.i],null,null),o._37(335544320,8,{_header:0}),o._35(1024,null,A.l,function(e){return[e]},[q.a]),o._15(4,671744,null,0,A.q,[[8,null],[8,null],[8,null],[2,A.l]],{model:[0,"model"]},{update:"ngModelChange"}),o._35(2048,null,A.m,null,[A.q]),o._15(6,16384,null,0,A.n,[A.m],null,null),o._15(7,16384,null,0,G.a,[a.a,o.p,o.K,v.a,y.l,P.a],null,null),(e()(),o._40(-1,null,["\n        "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCalendarFilterPopoverComponent_4)),o._15(10,802816,null,0,i.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.courseId);e(n,10,0,t.courses)},function(e,n){e(n,0,0,o._29(n,6).ngClassUntouched,o._29(n,6).ngClassTouched,o._29(n,6).ngClassPristine,o._29(n,6).ngClassDirty,o._29(n,6).ngClassValid,o._29(n,6).ngClassInvalid,o._29(n,6).ngClassPending)})}function View_AddonCalendarFilterPopoverComponent_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,14,"ion-list",[["radio-group",""],["role","radiogroup"]],null,null,null,null,null)),o._35(5120,null,A.l,function(e){return[e]},[q.a]),o._15(2,16384,null,0,G.a,[a.a,o.p,o.K,v.a,y.l,P.a],null,null),o._15(3,1064960,null,1,q.a,[o.K,o.p,o.i],null,null),o._37(335544320,1,{_header:0}),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCalendarFilterPopoverComponent_1)),o._15(7,802816,null,0,i.j,[o.W,o.T,o.v],{ngForOf:[0,"ngForOf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCalendarFilterPopoverComponent_2)),o._15(10,16384,null,0,i.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n    "])),(e()(),o._11(16777216,null,null,1,null,View_AddonCalendarFilterPopoverComponent_3)),o._15(13,16384,null,0,i.k,[o.W,o.T],{ngIf:[0,"ngIf"]},null),(e()(),o._40(-1,null,["\n"])),(e()(),o._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,7,0,t.typeKeys);e(n,10,0,t.types.course||t.types.category||t.types.group);e(n,13,0,t.types.course||t.types.category||t.types.group)},null)}t.d(n,"a",function(){return $});var o=t(1),r=t(32),i=t(8),l=t(22),s=t(20),a=t(9),u=t(28),d=t(34),c=t(81),p=t(76),f=t(68),h=t(26),m=t(19),_=t(726),g=t(316),v=t(17),C=t(188),y=t(45),P=t(35),A=t(24),b=t(101),I=t(48),S=t(2),E=t(5),M=t(12),w=t(3),k=t(23),T=t(7),O=t(18),D=t(11),x=t(16),F=t(21),L=t(30),U=t(29),R=t(43),H=t(10),N=t(41),B=t(31),V=t(37),W=t(177),K=t(146),q=t(138),G=t(87),j=t(746),Q=t(70),z=o._14({encapsulation:2,styles:[],data:{}}),$=o._12("addon-calendar-filter-popover",j.a,function View_AddonCalendarFilterPopoverComponent_Host_0(e){return o._42(0,[(e()(),o._16(0,0,null,null,1,"addon-calendar-filter-popover",[],null,null,null,View_AddonCalendarFilterPopoverComponent_0,z)),o._15(1,49152,null,0,j.a,[Q.a,H.a],null,null)],null,null)},{},{},[])},function(e,n,t){"use strict";function View_CoreCourseFormatSingleActivityComponent_0(e){return r._42(0,[r._37(402653184,1,{dynamicComponent:0}),(e()(),r._16(1,0,null,null,1,"core-dynamic-component",[],null,null,null,P.b,P.a)),r._15(2,901120,[[1,4]],0,A.a,[b.a,r.n,r.w,[2,I.a],r.i,r.p,S.a],{component:[0,"component"],data:[1,"data"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.componentClass,t.data)},null)}function View_CoreH5PPlayerComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"button",[["class","core-h5p-placeholder-play-button"],["clear",""],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.play(t)&&o}return o},$.b,$.a)),r._15(1,1097728,null,0,Y.a,[[8,""],X.a,r.p,r.K],{clear:[0,"clear"]},null),(e()(),r._40(-1,0,["\n        "])),(e()(),r._16(3,0,null,0,1,"core-icon",[["name","fa-play-circle"]],null,null,null,J.b,J.a)),r._15(4,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"]},null),(e()(),r._40(-1,0,["\n    "]))],function(e,n){e(n,1,0,"");e(n,4,0,"fa-play-circle")},null)}function View_CoreH5PPlayerComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"ion-spinner",[["class","core-h5p-placeholder-spinner"]],[[2,"spinner-paused",null]],null,null,ee.b,ee.a)),r._15(1,114688,null,0,ne.a,[X.a,r.p,r.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,r._29(n,1)._paused)})}function View_CoreH5PPlayerComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,13,"div",[["class","core-h5p-placeholder"]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_CoreH5PPlayerComponent_2)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._11(16777216,null,null,1,null,View_CoreH5PPlayerComponent_3)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._16(8,0,null,null,4,"div",[["class","core-h5p-placeholder-download-container"]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(10,0,null,null,1,"core-download-refresh",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.download()&&o}return o},oe.b,oe.a)),r._15(11,49152,null,0,re.a,[],{status:[0,"status"],enabled:[1,"enabled"],loading:[2,"loading"],canTrustDownload:[3,"canTrustDownload"]},{action:"action"}),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,!t.loading);e(n,6,0,t.loading);e(n,11,0,t.state,t.canDownload,t.calculating,!0)},null)}function View_CoreH5PPlayerComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-iframe",[["iframeHeight","auto"]],null,[[null,"loaded"]],function(e,n,t){var o=!0;if("loaded"===n){o=!1!==e.component.iframeLoaded()&&o}return o},ie.b,ie.a)),r._15(1,638976,null,0,le.a,[b.a,se.a,S.a,o.c,I.a,ae.a,ue.a,[2,de.a]],{src:[0,"src"],iframeHeight:[1,"iframeHeight"],allowFullscreen:[2,"allowFullscreen"]},{loaded:"loaded"})],function(e,n){e(n,1,0,n.component.playerSrc,"auto",!0)},null)}function View_CoreH5PPlayerComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_CoreH5PPlayerComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_CoreH5PPlayerComponent_4)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,!t.showPackage);e(n,4,0,t.showPackage)},null)}function View_AddonUserProfileFieldCheckboxComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),r._40(1,null,["\n        ","\n    "])),r._32(131072,Te.a,[Oe.a,r.i])],null,function(e,n){e(n,1,0,r._41(n,1,0,r._29(n,2).transform("core.yes")))})}function View_AddonUserProfileFieldCheckboxComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),r._40(1,null,["\n        ","\n    "])),r._32(131072,Te.a,[Oe.a,r.i])],null,function(e,n){e(n,1,0,r._41(n,1,0,r._29(n,2).transform("core.no")))})}function View_AddonUserProfileFieldCheckboxComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._11(16777216,null,2,1,null,View_AddonUserProfileFieldCheckboxComponent_2)),r._15(11,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._11(16777216,null,2,1,null,View_AddonUserProfileFieldCheckboxComponent_3)),r._15(14,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,11,0,"0"!=t.field.value);e(n,14,0,"0"==t.field.value)},function(e,n){e(n,8,0,n.component.field.name)})}function View_AddonUserProfileFieldCheckboxComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,28,"ion-item",[["class","item item-block"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},De.b,De.a)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,1,9,"ion-label",[],null,null,null,null,null)),r._15(11,16384,[[4,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(13,0,null,null,2,"span",[],null,null,null,Ne.b,Ne.a)),r._15(14,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(15,0,["",""])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(17,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(18,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(21,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,22)._click(t)&&o}return o},Ke.b,Ke.a)),r._15(22,1228800,null,0,qe.a,[X.a,Fe.a,[2,xe.a],r.p,r.K],null,null),r._35(1024,null,Re.l,function(e){return[e]},[qe.a]),r._15(24,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(26,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,14,0,t.field.required);e(n,18,0,t.form.controls[t.field.modelName]);e(n,24,0,t.field.modelName)},function(e,n){var t=n.component;e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,15,0,t.field.name);e(n,21,0,r._29(n,22)._disabled,r._29(n,26).ngClassUntouched,r._29(n,26).ngClassTouched,r._29(n,26).ngClassPristine,r._29(n,26).ngClassDirty,r._29(n,26).ngClassValid,r._29(n,26).ngClassInvalid,r._29(n,26).ngClassPending)})}function View_AddonUserProfileFieldCheckboxComponent_0(e){return r._42(0,[(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldCheckboxComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldCheckboxComponent_4)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.edit&&t.field&&t.field.name);e(n,6,0,t.edit&&t.field&&t.field.shortname)},null)}function View_AddonUserProfileFieldDatetimeComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._40(11,null,["",""])),r._34(12,1),(e()(),r._40(-1,2,["\n"]))],null,function(e,n){var t=n.component;e(n,8,0,t.field.name);e(n,11,0,r._41(n,11,0,e(n,12,0,r._29(n.parent,0),1e3*t.field.value)))})}function View_AddonUserProfileFieldDatetimeComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,25,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},De.b,De.a)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,Ne.b,Ne.a)),r._15(11,16384,[[4,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),r._15(12,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(13,0,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(15,0,null,3,6,"ion-datetime",[],[[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,16)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,16)._keyup()&&o}return o},ze.b,ze.a)),r._15(16,1228800,null,0,$e.a,[Fe.a,X.a,r.p,r.K,[2,xe.a],[2,Ye.a]],{min:[0,"min"],max:[1,"max"],displayFormat:[2,"displayFormat"],placeholder:[3,"placeholder"]},null),r._32(131072,Te.a,[Oe.a,r.i]),r._35(1024,null,Re.l,function(e){return[e]},[$e.a]),r._15(19,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(21,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(23,0,null,3,1,"core-input-errors",[["item-content",""]],null,null,null,Ve.b,Ve.a)),r._15(24,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"]},null),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,12,0,t.field.required);e(n,16,0,t.field.min,t.field.max,t.field.format,r._41(n,16,3,r._29(n,17).transform("core.choosedots")));e(n,19,0,t.field.modelName);e(n,24,0,t.form.controls[t.field.modelName])},function(e,n){var t=n.component;e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,13,0,t.field.name);e(n,15,0,r._29(n,16)._disabled,r._29(n,21).ngClassUntouched,r._29(n,21).ngClassTouched,r._29(n,21).ngClassPristine,r._29(n,21).ngClassDirty,r._29(n,21).ngClassValid,r._29(n,21).ngClassInvalid,r._29(n,21).ngClassPending)})}function View_AddonUserProfileFieldDatetimeComponent_0(e){return r._42(0,[r._32(0,Xe.a,[b.a,Je.a]),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldDatetimeComponent_1)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldDatetimeComponent_2)),r._15(7,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,3,0,!t.edit&&t.field&&t.field.name);e(n,7,0,t.edit&&t.field&&t.field.shortname)},null)}function View_AddonUserProfileFieldMenuComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(11,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(12,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,12,0,t.field.value,t.contextLevel,t.contextInstanceId,t.courseId)},function(e,n){e(n,8,0,n.component.field.name)})}function View_AddonUserProfileFieldMenuComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),r._15(1,16384,[[7,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit)},function(e,n){e(n,2,0,n.context.$implicit)})}function View_AddonUserProfileFieldMenuComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,35,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},De.b,De.a)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,Ne.b,Ne.a)),r._15(11,16384,[[4,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),r._15(12,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(13,0,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(15,0,null,3,16,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,16)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,16)._keyup()&&o}return o},cn.b,cn.a)),r._15(16,1228800,null,1,pn.a,[fn.a,Fe.a,X.a,r.p,r.K,[2,xe.a],hn.a],{placeholder:[0,"placeholder"],interface:[1,"interface"]},null),r._37(603979776,7,{options:1}),r._32(131072,Te.a,[Oe.a,r.i]),r._35(1024,null,Re.l,function(e){return[e]},[pn.a]),r._15(20,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(22,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(24,0,null,null,3,"ion-option",[["value",""]],null,null,null,null,null)),r._15(25,16384,[[7,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(26,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldMenuComponent_3)),r._15(30,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(33,0,null,3,1,"core-input-errors",[["item-content",""]],null,null,null,Ve.b,Ve.a)),r._15(34,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"]},null),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,12,0,t.field.required);e(n,16,0,r._41(n,16,0,r._29(n,18).transform("core.choosedots")),"action-sheet");e(n,20,0,t.field.modelName);e(n,25,0,"");e(n,30,0,t.field.options);e(n,34,0,t.form.controls[t.field.modelName])},function(e,n){var t=n.component;e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,13,0,t.field.name);e(n,15,0,r._29(n,16)._disabled,r._29(n,22).ngClassUntouched,r._29(n,22).ngClassTouched,r._29(n,22).ngClassPristine,r._29(n,22).ngClassDirty,r._29(n,22).ngClassValid,r._29(n,22).ngClassInvalid,r._29(n,22).ngClassPending);e(n,26,0,r._41(n,26,0,r._29(n,27).transform("core.choosedots")))})}function View_AddonUserProfileFieldMenuComponent_0(e){return r._42(0,[(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldMenuComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldMenuComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.edit&&t.field&&t.field.name);e(n,6,0,t.edit&&t.field&&t.field.shortname)},null)}function View_AddonUserProfileFieldTextComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(11,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(12,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,12,0,t.field.value,t.contextLevel,t.contextInstanceId,t.courseId)},function(e,n){e(n,8,0,n.component.field.name)})}function View_AddonUserProfileFieldTextComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,25,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},De.b,De.a)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,Ne.b,Ne.a)),r._15(11,16384,[[4,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),r._15(12,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(13,0,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(15,0,null,3,6,"ion-input",[],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(16,540672,null,0,Re.j,[],{maxlength:[0,"maxlength"]},null),r._35(1024,null,Re.k,function(e){return[e]},[Re.j]),r._15(18,671744,null,0,Re.f,[[3,Re.b],[2,Re.k],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(20,16384,null,0,Re.n,[Re.m],null,null),r._15(21,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(23,0,null,3,1,"core-input-errors",[["item-content",""]],null,null,null,Ve.b,Ve.a)),r._15(24,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"]},null),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,12,0,t.field.required);e(n,16,0,r._19(1,"",t.field.maxlength,""));e(n,18,0,t.field.modelName);e(n,21,0,t.field.inputType,t.field.name);e(n,24,0,t.form.controls[t.field.modelName])},function(e,n){var t=n.component;e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,13,0,t.field.name);e(n,15,0,r._29(n,16).maxlength?r._29(n,16).maxlength:null,r._29(n,20).ngClassUntouched,r._29(n,20).ngClassTouched,r._29(n,20).ngClassPristine,r._29(n,20).ngClassDirty,r._29(n,20).ngClassValid,r._29(n,20).ngClassInvalid,r._29(n,20).ngClassPending)})}function View_AddonUserProfileFieldTextComponent_0(e){return r._42(0,[(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldTextComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldTextComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.edit&&t.field&&t.field.name);e(n,6,0,t.edit&&t.field&&t.field.shortname)},null)}function View_AddonUserProfileFieldTextareaComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,13,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(11,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(12,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,12,0,t.field.value,t.contextLevel,t.contextInstanceId,t.courseId)},function(e,n){e(n,8,0,n.component.field.name)})}function View_AddonUserProfileFieldTextareaComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,23,"ion-item",[["class","item item-block"],["text-wrap",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},De.b,De.a)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,1,9,"ion-label",[["stacked",""]],null,null,null,null,null)),r._15(11,16384,[[4,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(13,0,null,null,2,"span",[],null,null,null,Ne.b,Ne.a)),r._15(14,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(15,0,["",""])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(17,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(18,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(21,0,null,3,1,"core-rich-text-editor",[["item-content",""]],null,null,null,be.c,be.b)),r._15(22,1228800,null,0,In.a,[S.a,ae.a,pe.a,me.a,[2,ln.a],r.p,_e.a,ue.a,on.a,Sn.a],{placeholder:[0,"placeholder"],control:[1,"control"],autoSave:[2,"autoSave"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],elementId:[5,"elementId"]},null),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,14,0,t.field.required);e(n,18,0,t.control);e(n,22,0,t.field.name,t.control,!0,t.contextLevel,t.contextInstanceId,"profile_field_"+t.field.shortname)},function(e,n){var t=n.component;e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,15,0,t.field.name)})}function View_AddonUserProfileFieldTextareaComponent_0(e){return r._42(0,[(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldTextareaComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonUserProfileFieldTextareaComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,!t.edit&&t.field&&t.field.name);e(n,6,0,t.edit&&t.field&&t.field.shortname)},null)}function View_AddonBlockActivityModulesComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,11,"a",[["class","item-media item item-block"],["detail-none",""],["ion-item",""],["navPush","CoreCourseListModTypePage"],["text-wrap",""]],[[1,"href",4]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,6).onClick()&&o}return o},De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),r._15(6,16384,null,0,On.a,[[2,I.a]],{navPush:[0,"navPush"],navParams:[1,"navParams"]},null),r._33(7,{title:0,courseId:1,modName:2}),r._15(8,1064960,null,0,Dn.a,[On.a,[2,hn.a]],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(10,0,null,0,0,"img",[["alt",""],["class","core-module-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null)),(e()(),r._40(11,2,["\n        ","\n    "]))],function(e,n){e(n,6,0,"CoreCourseListModTypePage",e(n,7,0,n.context.$implicit.name,n.component.instanceId,n.context.$implicit.modName))},function(e,n){e(n,0,0,r._29(n,8)._href);e(n,10,0,n.context.$implicit.icon);e(n,11,0,n.context.$implicit.name)})}function View_AddonBlockActivityModulesComponent_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,xn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._16(12,0,null,null,5,"core-loading",[["class","core-loading-center"]],null,null,null,Fn.b,Fn.a)),r._15(13,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockActivityModulesComponent_1)),r._15(16,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,0,["\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,13,0,t.loaded);e(n,16,0,t.entries)},function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,9).transform("addon.block_activitymodules.pluginname")))})}function View_AddonBlockMyOverviewComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.prefetchCourses()&&o}return o},$.b,$.a)),r._15(1,1097728,[[3,4]],0,Y.a,[[8,""],X.a,r.p,r.K],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),r._40(-1,0,["\n            "])),(e()(),r._16(3,0,null,0,1,"core-icon",[],null,null,null,J.b,J.a)),r._15(4,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"]},null),(e()(),r._40(-1,0,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,"dark","");e(n,4,0,t.prefetchCoursesData[t.selectedFilter].icon)},null)}function View_AddonBlockMyOverviewComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-badge",[["class","core-course-download-courses-progress"]],null,null,null,null,null)),r._15(1,16384,null,0,Vn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(2,null,["",""]))],null,function(e,n){var t=n.component;e(n,2,0,t.prefetchCoursesData[t.selectedFilter].badge)})}function View_AddonBlockMyOverviewComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,ee.b,ee.a)),r._15(1,114688,null,0,ne.a,[X.a,r.p,r.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,r._29(n,1)._paused)})}function View_AddonBlockMyOverviewComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,10,"div",[["class","core-button-spinner"],["item-end",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_2)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_3)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_4)),r._15(9,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.prefetchCoursesData[t.selectedFilter]&&t.prefetchCoursesData[t.selectedFilter].icon&&"spinner"!=t.prefetchCoursesData[t.selectedFilter].icon);e(n,6,0,t.prefetchCoursesData[t.selectedFilter].badge);e(n,9,0,!t.prefetchCoursesData[t.selectedFilter].icon||"spinner"==t.prefetchCoursesData[t.selectedFilter].icon)},null)}function View_AddonBlockMyOverviewComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-context-menu-item",[["iconAction","funnel"]],null,[[null,"action"],[null,"onClosed"]],function(e,n,t){var o=!0,r=e.component;if("action"===n){o=!1!==r.switchFilter()&&o}if("onClosed"===n){o=!1!==r.switchFilterClosed()&&o}return o},Wn.b,Wn.a)),r._15(1,770048,null,0,Kn.a,[qn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action",onClosed:"onClosed"}),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,r._41(n,1,0,r._29(n,2).transform("core.courses.filtermycourses")),"funnel",1e3)},null)}function View_AddonBlockMyOverviewComponent_6(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.switchSort("fullname")&&o}return o},Wn.b,Wn.a)),r._15(1,770048,null,0,Kn.a,[qn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),r._32(131072,Te.a,[Oe.a,r.i]),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){var t=n.component;e(n,1,0,r._19(1,"",r._41(n,1,0,r._29(n,2).transform("core.sortby"))+" "+r._41(n,1,0,r._29(n,3).transform("addon.block_myoverview.title")),""),"fullname"==t.sort?"radio-button-on":"radio-button-off",900)},null)}function View_AddonBlockMyOverviewComponent_7(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.switchSort("lastaccess")&&o}return o},Wn.b,Wn.a)),r._15(1,770048,null,0,Kn.a,[qn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),r._32(131072,Te.a,[Oe.a,r.i]),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){var t=n.component;e(n,1,0,r._19(1,"",r._41(n,1,0,r._29(n,2).transform("core.sortby"))+" "+r._41(n,1,0,r._29(n,3).transform("addon.block_myoverview.lastaccessed")),""),"lastaccess"==t.sort?"radio-button-on":"radio-button-off",800)},null)}function View_AddonBlockMyOverviewComponent_8(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"ion-option",[["value","allincludinghidden"]],null,null,null,null,null)),r._15(1,16384,[[5,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(2,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,"allincludinghidden")},function(e,n){e(n,2,0,r._41(n,2,0,r._29(n,3).transform("addon.block_myoverview.allincludinghidden")))})}function View_AddonBlockMyOverviewComponent_9(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"ion-option",[["value","all"]],null,null,null,null,null)),r._15(1,16384,[[5,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(2,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,"all")},function(e,n){e(n,2,0,r._41(n,2,0,r._29(n,3).transform("addon.block_myoverview.all")))})}function View_AddonBlockMyOverviewComponent_10(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"ion-option",[["value","inprogress"]],null,null,null,null,null)),r._15(1,16384,[[5,4]],0,dn.a,[r.p],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),r._40(2,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,"disabled"==n.component.showFilters.inprogress,"inprogress")},function(e,n){e(n,2,0,r._41(n,2,0,r._29(n,3).transform("addon.block_myoverview.inprogress")))})}function View_AddonBlockMyOverviewComponent_11(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"ion-option",[["value","future"]],null,null,null,null,null)),r._15(1,16384,[[5,4]],0,dn.a,[r.p],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),r._40(2,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,"disabled"==n.component.showFilters.future,"future")},function(e,n){e(n,2,0,r._41(n,2,0,r._29(n,3).transform("addon.block_myoverview.future")))})}function View_AddonBlockMyOverviewComponent_12(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"ion-option",[["value","past"]],null,null,null,null,null)),r._15(1,16384,[[5,4]],0,dn.a,[r.p],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),r._40(2,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,"disabled"==n.component.showFilters.past,"past")},function(e,n){e(n,2,0,r._41(n,2,0,r._29(n,3).transform("addon.block_myoverview.past")))})}function View_AddonBlockMyOverviewComponent_14(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._16(2,0,null,null,2,"ion-option",[],null,null,null,null,null)),r._15(3,16384,[[5,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(4,null,["",""])),(e()(),r._40(-1,null,["\n                "]))],function(e,n){e(n,3,0,r._19(1,"custom-",n.context.index,""))},function(e,n){e(n,4,0,n.context.$implicit.name)})}function View_AddonBlockMyOverviewComponent_13(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n                "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_14)),r._15(3,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n            "]))],function(e,n){e(n,3,0,n.component.customFilter)},null)}function View_AddonBlockMyOverviewComponent_15(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"ion-option",[["value","favourite"]],null,null,null,null,null)),r._15(1,16384,[[5,4]],0,dn.a,[r.p],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),r._40(2,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,"disabled"==n.component.showFilters.favourite,"favourite")},function(e,n){e(n,2,0,r._41(n,2,0,r._29(n,3).transform("addon.block_myoverview.favourites")))})}function View_AddonBlockMyOverviewComponent_16(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"ion-option",[["value","hidden"]],null,null,null,null,null)),r._15(1,16384,[[5,4]],0,dn.a,[r.p],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),r._40(2,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,"disabled"==n.component.showFilters.hidden,"hidden")},function(e,n){e(n,2,0,r._41(n,2,0,r._29(n,3).transform("addon.block_myoverview.hiddencourses")))})}function View_AddonBlockMyOverviewComponent_17(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,Gn.b,Gn.a)),r._15(1,49152,null,0,jn.a,[],{message:[0,"message"],image:[1,"image"]},null),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,r._41(n,1,0,r._29(n,2).transform("addon.block_myoverview.nocourses")),"assets/img/icons/courses.svg")},null)}function View_AddonBlockMyOverviewComponent_18(e){return r._42(0,[(e()(),r._16(0,0,null,null,6,"ion-searchbar",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ngModelChange"],[null,"ionInput"],[null,"ionCancel"]],function(e,n,t){var o=!0,r=e.component;if("ngModelChange"===n){o=!1!==(r.courses.filter=t)&&o}if("ionInput"===n){o=!1!==r.filterChanged(t)&&o}if("ionCancel"===n){o=!1!==r.filterChanged()&&o}return o},Qn.b,Qn.a)),r._15(1,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(3,16384,null,0,Re.n,[Re.m],null,null),r._15(4,1294336,[[1,4],["searchbar",4]],0,zn.a,[X.a,on.a,r.p,r.K,[2,Re.m]],{placeholder:[0,"placeholder"]},{ionInput:"ionInput",ionCancel:"ionCancel"}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n    "]))],function(e,n){e(n,1,0,n.component.courses.filter);e(n,4,0,r._41(n,4,0,r._29(n,5).transform("core.courses.filtermycourses")))},function(e,n){e(n,0,1,[r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending,r._29(n,4)._animated,r._29(n,4)._value,r._29(n,4)._isActive,r._29(n,4)._showCancelButton,r._29(n,4)._shouldAlignLeft,r._29(n,4)._isFocus])})}function View_AddonBlockMyOverviewComponent_19(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"ion-col",[["align-self-stretch",""],["class","col"],["col-12",""],["col-lg-4",""],["col-md-6",""],["col-sm-6",""],["col-xl-4",""],["no-padding",""]],null,null,null,null,null)),r._15(1,16384,null,0,$n.a,[],null,null),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._16(3,0,null,null,1,"core-courses-course-progress",[["class","core-courseoverview"],["showAll","true"]],null,null,null,Yn.b,Yn.a)),r._15(4,245760,null,0,Xn.a,[[2,I.a],Jn.a,S.a,Rn.a,_e.a,pe.a,Zn.a,et.a,nt.a],{course:[0,"course"],showAll:[1,"showAll"],showDownload:[2,"showDownload"]},null),(e()(),r._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,4,0,n.context.$implicit,"true",t.downloadCourseEnabled&&t.downloadEnabled)},null)}function View_AddonBlockMyOverviewComponent_0(e){return r._42(0,[r._37(671088640,1,{searchbar:0}),(e()(),r._16(1,0,null,null,27,"ion-item-divider",[["class","item item-divider"]],null,null,null,De.b,De.a)),r._15(2,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,2,{contentLabel:0}),r._37(603979776,3,{_buttons:1}),r._37(603979776,4,{_icons:1}),r._15(6,16384,null,0,xn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(8,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._40(9,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._11(16777216,null,4,1,null,View_AddonBlockMyOverviewComponent_1)),r._15(14,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(16,0,null,4,11,"core-context-menu",[["item-end",""]],null,null,null,tt.b,tt.a)),r._15(17,245760,null,0,qn.a,[Oe.a,et.a,r.p,S.a,[2,ot.a],ue.a],null,null),(e()(),r._40(-1,0,["\n        "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockMyOverviewComponent_5)),r._15(20,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n        "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockMyOverviewComponent_6)),r._15(23,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n        "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockMyOverviewComponent_7)),r._15(26,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._16(30,0,null,null,62,"core-loading",[["class","core-loading-center"]],null,null,null,Fn.b,Fn.a)),r._15(31,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._16(33,0,null,0,36,"div",[["class","safe-padding-horizontal"],["padding",""]],[[8,"hidden",0]],null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(36,0,null,null,32,"ion-select",[["class","core-button-select"],["interface","popover"],["text-start",""]],[[8,"title",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0,i=e.component;if("click"===n){o=!1!==r._29(e,37)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,37)._keyup()&&o}if("ngModelChange"===n){o=!1!==(i.selectedFilter=t)&&o}if("ngModelChange"===n){o=!1!==i.selectedChanged()&&o}return o},cn.b,cn.a)),r._15(37,1228800,null,1,pn.a,[fn.a,Fe.a,X.a,r.p,r.K,[2,xe.a],hn.a],{interface:[0,"interface"]},null),r._37(603979776,5,{options:1}),r._35(1024,null,Re.l,function(e){return[e]},[pn.a]),r._15(40,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{model:[0,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(42,16384,null,0,Re.n,[Re.m],null,null),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_8)),r._15(46,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_9)),r._15(49,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_10)),r._15(52,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_11)),r._15(55,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_12)),r._15(58,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_13)),r._15(61,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_15)),r._15(64,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_16)),r._15(67,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,0,["\n    "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockMyOverviewComponent_17)),r._15(72,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n\n    "])),(e()(),r._40(-1,0,["\n    "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockMyOverviewComponent_18)),r._15(76,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._40(-1,0,["\n    "])),(e()(),r._16(79,0,null,0,12,"div",[["class","safe-area-page"]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(81,0,null,null,9,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),r._15(82,16384,null,0,rt.a,[],null,null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(84,0,null,null,5,"ion-row",[["class","row"],["no-padding",""]],null,null,null,null,null)),r._15(85,16384,null,0,it.a,[],null,null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockMyOverviewComponent_19)),r._15(88,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,0,["\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,14,0,t.downloadCoursesEnabled&&t.downloadEnabled&&t.filteredCourses.length>1&&!t.showFilter),e(n,17,0);e(n,20,0,t.loaded&&t.showFilterSwitchButton());e(n,23,0,t.loaded&&t.showSortFilter);e(n,26,0,t.loaded&&t.showSortFilter);e(n,31,0,t.loaded);e(n,37,0,"popover");e(n,40,0,t.selectedFilter);e(n,46,0,"hidden"!=t.showFilters.allincludinghidden);e(n,49,0,"hidden"!=t.showFilters.all);e(n,52,0,"hidden"!=t.showFilters.inprogress);e(n,55,0,"hidden"!=t.showFilters.future);e(n,58,0,"hidden"!=t.showFilters.past);e(n,61,0,"hidden"!=t.showFilters.custom);e(n,64,0,"hidden"!=t.showFilters.favourite);e(n,67,0,"hidden"!=t.showFilters.hidden);e(n,72,0,0==t.filteredCourses.length);e(n,76,0,t.showFilter);e(n,88,0,t.filteredCourses)},function(e,n){var t=n.component;e(n,9,0,r._41(n,9,0,r._29(n,10).transform("addon.block_myoverview.pluginname")));e(n,33,0,t.showFilter||!t.showSelectorFilter);e(n,36,0,r._41(n,36,0,r._29(n,43).transform("core.show")),r._29(n,37)._disabled,r._29(n,42).ngClassUntouched,r._29(n,42).ngClassTouched,r._29(n,42).ngClassPristine,r._29(n,42).ngClassDirty,r._29(n,42).ngClassValid,r._29(n,42).ngClassInvalid,r._29(n,42).ngClassPending)})}function View_AddonBlockSiteMainMenuComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,16777216,null,2,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),r._15(8,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"]},null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,t.mainMenuBlock.summary,t.component,t.siteHomeId,"course",t.siteHomeId)},null)}function View_AddonBlockSiteMainMenuComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-course-module",[],null,null,null,pt.b,pt.a)),r._15(1,245760,null,0,ft.a,[[2,I.a],ht.a,S.a,Jn.a,_e.a,pe.a,Rn.a],{module:[0,"module"],courseId:[1,"courseId"],section:[2,"section"],enabled:[3,"enabled"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.siteHomeId,t.mainMenuBlock,t.downloadEnabled)},null)}function View_AddonBlockSiteMainMenuComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockSiteMainMenuComponent_2)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockSiteMainMenuComponent_3)),r._15(6,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.mainMenuBlock.summary);e(n,6,0,t.mainMenuBlock.modules)},null)}function View_AddonBlockSiteMainMenuComponent_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,xn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._16(12,0,null,null,5,"core-loading",[["class","core-loading-center"]],null,null,null,Fn.b,Fn.a)),r._15(13,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockSiteMainMenuComponent_1)),r._15(16,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,13,0,t.loaded);e(n,16,0,t.mainMenuBlock)},function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,9).transform("addon.block_sitemainmenu.pluginname")))})}function View_AddonBlockTimelineEventsComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,0,"img",[["alt",""],["class","core-module-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,n.parent.context.$implicit.iconUrl)})}function View_AddonBlockTimelineEventsComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,"p",[],null,null,null,null,null)),(e()(),r._40(-1,null,["\n                "])),(e()(),r._16(2,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),r._15(3,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),r._40(-1,null,["\n            "]))],function(e,n){e(n,3,0,n.parent.context.$implicit.course.fullnamedisplay,"course",n.parent.context.$implicit.course.id)},null)}function View_AddonBlockTimelineEventsComponent_6(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-badge",[["item-end",""],["margin-start",""]],null,null,null,null,null)),r._15(1,16384,null,0,Vn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.parent.context.$implicit.action.itemcount)})}function View_AddonBlockTimelineEventsComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"button",[["class","hidden-tablet"],["clear",""],["ion-button",""]],[[8,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.action(t,e.parent.context.$implicit.action.url)&&o}return o},$.b,$.a)),r._15(1,1097728,[[5,4]],0,Y.a,[[8,""],X.a,r.p,r.K],{clear:[0,"clear"]},null),(e()(),r._40(2,0,["\n                ","\n                "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockTimelineEventsComponent_6)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,4,0,n.parent.context.$implicit.action.showitemcount)},function(e,n){e(n,0,0,n.parent.context.$implicit.action.name,!n.parent.context.$implicit.action.actionable);e(n,2,0,n.parent.context.$implicit.action.name)})}function View_AddonBlockTimelineEventsComponent_8(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-badge",[["item-end",""],["margin-start",""]],null,null,null,null,null)),r._15(1,16384,null,0,Vn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.parent.parent.context.$implicit.action.itemcount)})}function View_AddonBlockTimelineEventsComponent_7(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"button",[["class","hidden-phone"],["clear",""],["ion-button",""],["item-end",""]],[[8,"title",0],[8,"disabled",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.action(t,e.parent.context.$implicit.action.url)&&o}return o},$.b,$.a)),r._15(1,1097728,[[5,4]],0,Y.a,[[8,""],X.a,r.p,r.K],{clear:[0,"clear"]},null),(e()(),r._40(2,0,["\n                ","\n                "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockTimelineEventsComponent_8)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"");e(n,4,0,n.parent.context.$implicit.action.showitemcount)},function(e,n){e(n,0,0,n.parent.context.$implicit.action.name,!n.parent.context.$implicit.action.actionable);e(n,2,0,n.parent.context.$implicit.action.name)})}function View_AddonBlockTimelineEventsComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,30,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(2,0,null,null,27,"a",[["class","core-course-module-handler item-media item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.action(t,e.context.$implicit.url)&&o}return o},De.b,De.a)),r._15(3,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(7,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockTimelineEventsComponent_3)),r._15(10,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(12,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._16(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(14,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,2,1,null,View_AddonBlockTimelineEventsComponent_4)),r._15(17,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n\n            "])),(e()(),r._11(16777216,null,2,1,null,View_AddonBlockTimelineEventsComponent_5)),r._15(20,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n\n            "])),(e()(),r._16(22,0,null,4,3,"ion-badge",[["color","light"],["item-end",""]],null,null,null,null,null)),r._15(23,16384,null,0,Vn.a,[X.a,r.p,r.K],{color:[0,"color"]},null),(e()(),r._40(24,null,["",""])),r._34(25,2),(e()(),r._40(-1,2,["\n\n            "])),(e()(),r._11(16777216,null,4,1,null,View_AddonBlockTimelineEventsComponent_7)),r._15(28,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,10,0,n.context.$implicit.iconUrl);e(n,14,0,n.context.$implicit.name,"module",n.context.$implicit.id,n.context.$implicit.course.id);e(n,17,0,t.showCourse);e(n,20,0,n.context.$implicit.action);e(n,23,0,"light");e(n,28,0,n.context.$implicit.action)},function(e,n){e(n,2,0,n.context.$implicit.name);e(n,24,0,r._41(n,24,0,e(n,25,0,r._29(n.parent.parent,0),1e3*n.context.$implicit.timesort,"strftimetime24")))})}function View_AddonBlockTimelineEventsComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,17,"ion-item-group",[],null,null,null,null,null)),r._15(1,16384,null,0,Ct.a,[],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(3,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,De.b,De.a)),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],{color:[0,"color"]},null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(8,16384,null,0,xn.a,[X.a,r.p,r.K],{color:[0,"color"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._40(11,null,["",""])),r._34(12,2),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockTimelineEventsComponent_2)),r._15(16,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,4,0,n.context.$implicit.color);e(n,8,0,n.context.$implicit.color);e(n,16,0,n.context.$implicit.events)},function(e,n){e(n,11,0,r._41(n,11,0,e(n,12,0,r._29(n.parent,0),1e3*n.context.$implicit.dayTimestamp,"strftimedayshort")))})}function View_AddonBlockTimelineEventsComponent_10(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.loadMoreEvents()&&o}return o},$.b,$.a)),r._15(1,1097728,null,0,Y.a,[[8,""],X.a,r.p,r.K],{color:[0,"color"],block:[1,"block"]},null),(e()(),r._40(2,0,["\n        ","\n    "])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,"light","")},function(e,n){e(n,2,0,r._41(n,2,0,r._29(n,3).transform("core.loadmore")))})}function View_AddonBlockTimelineEventsComponent_11(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,ee.b,ee.a)),r._15(1,114688,null,0,ne.a,[X.a,r.p,r.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,r._29(n,1)._paused)})}function View_AddonBlockTimelineEventsComponent_9(e){return r._42(0,[(e()(),r._16(0,0,null,null,8,"div",[["padding",""],["text-center",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockTimelineEventsComponent_10)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockTimelineEventsComponent_11)),r._15(7,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,!t.loadingMore);e(n,7,0,t.loadingMore)},null)}function View_AddonBlockTimelineEventsComponent_12(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/activities.svg"]],null,null,null,Gn.b,Gn.a)),r._15(1,49152,null,0,jn.a,[],{message:[0,"message"],image:[1,"image"],inline:[2,"inline"]},null),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){var t=n.component;e(n,1,0,r._41(n,1,0,r._29(n,2).transform("addon.block_timeline.noevents")),"assets/img/icons/activities.svg",!t.showCourse)},null)}function View_AddonBlockTimelineEventsComponent_0(e){return r._42(0,[r._32(0,Xe.a,[b.a,Je.a]),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockTimelineEventsComponent_1)),r._15(2,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockTimelineEventsComponent_9)),r._15(5,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockTimelineEventsComponent_12)),r._15(8,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,2,0,t.filteredEvents);e(n,5,0,t.canLoadMore&&!t.empty);e(n,8,0,t.empty)},null)}function View_AddonBlockTimelineComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.switchSort("sortbydates")&&o}return o},Wn.b,Wn.a)),r._15(1,770048,null,0,Kn.a,[qn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){var t=n.component;e(n,1,0,r._41(n,1,0,r._29(n,2).transform("addon.block_timeline.sortbydates")),"sortbydates"==t.sort?"radio-button-on":"radio-button-off",900)},null)}function View_AddonBlockTimelineComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(e,n,t){var o=!0;if("action"===n){o=!1!==e.component.switchSort("sortbycourses")&&o}return o},Wn.b,Wn.a)),r._15(1,770048,null,0,Kn.a,[qn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){var t=n.component;e(n,1,0,r._41(n,1,0,r._29(n,2).transform("addon.block_timeline.sortbycourses")),"sortbycourses"==t.sort?"radio-button-on":"radio-button-off",800)},null)}function View_AddonBlockTimelineComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,9,"ion-col",[["class","col"],["col-12",""],["col-md-6",""],["no-padding",""]],null,null,null,null,null)),r._15(1,16384,null,0,$n.a,[],null,null),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._16(3,0,null,null,5,"core-courses-course-progress",[],null,null,null,Yn.b,Yn.a)),r._15(4,245760,null,0,Xn.a,[[2,I.a],Jn.a,S.a,Rn.a,_e.a,pe.a,Zn.a,et.a,nt.a],{course:[0,"course"]},null),(e()(),r._40(-1,0,["\n                        "])),(e()(),r._16(6,0,null,0,1,"addon-block-timeline-events",[],null,[[null,"loadMore"]],function(e,n,t){var o=!0;if("loadMore"===n){o=!1!==e.component.loadMoreCourse(e.context.$implicit)&&o}return o},View_AddonBlockTimelineEventsComponent_0,Pt)),r._15(7,573440,null,0,yt.a,[[2,I.a],ue.a,fe.a,S.a,pe.a,Rn.a,rn.a,Je.a],{events:[0,"events"],from:[1,"from"],to:[2,"to"],canLoadMore:[3,"canLoadMore"]},{loadMore:"loadMore"}),(e()(),r._40(-1,0,["\n                    "])),(e()(),r._40(-1,null,["\n                "]))],function(e,n){var t=n.component;e(n,4,0,n.context.$implicit);e(n,7,0,n.context.$implicit.events,t.dataFrom,t.dataTo,n.context.$implicit.canLoadMore)},null)}function View_AddonBlockTimelineComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,Gn.b,Gn.a)),r._15(1,49152,null,0,jn.a,[],{message:[0,"message"],image:[1,"image"]},null),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,r._41(n,1,0,r._29(n,2).transform("addon.block_timeline.nocoursesinprogress")),"assets/img/icons/courses.svg")},null)}function View_AddonBlockTimelineComponent_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,20,"ion-item-divider",[["class","item item-divider"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,xn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(11,0,null,4,8,"core-context-menu",[["item-end",""]],null,null,null,tt.b,tt.a)),r._15(12,245760,null,0,qn.a,[Oe.a,et.a,r.p,S.a,[2,ot.a],ue.a],null,null),(e()(),r._40(-1,0,["\n        "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockTimelineComponent_1)),r._15(15,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n        "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockTimelineComponent_2)),r._15(18,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._16(22,0,null,null,74,"core-loading",[["class","core-loading-center"]],null,null,null,Fn.b,Fn.a)),r._15(23,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._16(25,0,null,0,45,"div",[["class","safe-padding-horizontal"],["padding",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(27,0,null,null,42,"ion-select",[["class","core-button-select"],["interface","popover"],["text-start",""]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0,i=e.component;if("click"===n){o=!1!==r._29(e,28)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,28)._keyup()&&o}if("ngModelChange"===n){o=!1!==(i.filter=t)&&o}if("ngModelChange"===n){o=!1!==i.switchFilter()&&o}return o},cn.b,cn.a)),r._15(28,1228800,null,1,pn.a,[fn.a,Fe.a,X.a,r.p,r.K,[2,xe.a],hn.a],{interface:[0,"interface"]},null),r._37(603979776,4,{options:1}),r._35(1024,null,Re.l,function(e){return[e]},[pn.a]),r._15(31,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{model:[0,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(33,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(35,0,null,null,3,"ion-option",[["value","all"]],null,null,null,null,null)),r._15(36,16384,[[4,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(37,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(40,0,null,null,3,"ion-option",[["value","overdue"]],null,null,null,null,null)),r._15(41,16384,[[4,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(42,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(45,0,null,null,3,"ion-option",[["disabled",""],["value","disabled"]],null,null,null,null,null)),r._15(46,16384,[[4,4]],0,dn.a,[r.p],{disabled:[0,"disabled"],value:[1,"value"]},null),(e()(),r._40(47,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(50,0,null,null,3,"ion-option",[["value","next7days"]],null,null,null,null,null)),r._15(51,16384,[[4,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(52,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(55,0,null,null,3,"ion-option",[["value","next30days"]],null,null,null,null,null)),r._15(56,16384,[[4,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(57,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(60,0,null,null,3,"ion-option",[["value","next3months"]],null,null,null,null,null)),r._15(61,16384,[[4,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(62,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(65,0,null,null,3,"ion-option",[["value","next6months"]],null,null,null,null,null)),r._15(66,16384,[[4,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(67,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,0,["\n    "])),(e()(),r._16(72,0,null,0,5,"core-loading",[["class","core-loading-center"]],[[8,"hidden",0]],null,null,Fn.b,Fn.a)),r._15(73,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,0,["\n        "])),(e()(),r._16(75,0,null,0,1,"addon-block-timeline-events",[["showCourse","true"]],null,[[null,"loadMore"]],function(e,n,t){var o=!0;if("loadMore"===n){o=!1!==e.component.loadMoreTimeline()&&o}return o},View_AddonBlockTimelineEventsComponent_0,Pt)),r._15(76,573440,null,0,yt.a,[[2,I.a],ue.a,fe.a,S.a,pe.a,Rn.a,rn.a,Je.a],{events:[0,"events"],showCourse:[1,"showCourse"],from:[2,"from"],to:[3,"to"],canLoadMore:[4,"canLoadMore"]},{loadMore:"loadMore"}),(e()(),r._40(-1,0,["\n    "])),(e()(),r._40(-1,0,["\n    "])),(e()(),r._16(79,0,null,0,16,"core-loading",[["class","core-loading-center safe-area-page"]],[[8,"hidden",0]],null,null,Fn.b,Fn.a)),r._15(80,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,0,["\n        "])),(e()(),r._16(82,0,null,0,9,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),r._15(83,16384,null,0,rt.a,[],null,null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(85,0,null,null,5,"ion-row",[["class","row"],["no-padding",""]],null,null,null,null,null)),r._15(86,16384,null,0,it.a,[],null,null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockTimelineComponent_3)),r._15(89,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,0,["\n        "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockTimelineComponent_4)),r._15(94,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._40(-1,0,["\n"]))],function(e,n){var t=n.component;e(n,12,0);e(n,15,0,t.loaded);e(n,18,0,t.loaded);e(n,23,0,t.loaded);e(n,28,0,"popover");e(n,31,0,t.filter);e(n,36,0,"all");e(n,41,0,"overdue");e(n,46,0,"","disabled");e(n,51,0,"next7days");e(n,56,0,"next30days");e(n,61,0,"next3months");e(n,66,0,"next6months");e(n,73,0,t.timeline.loaded);e(n,76,0,t.timeline.events,"true",t.dataFrom,t.dataTo,t.timeline.canLoadMore);e(n,80,0,t.timelineCourses.loaded);e(n,89,0,t.timelineCourses.courses);e(n,94,0,0==t.timelineCourses.courses.length)},function(e,n){var t=n.component;e(n,8,0,r._41(n,8,0,r._29(n,9).transform("addon.block_timeline.pluginname")));e(n,27,0,r._29(n,28)._disabled,r._29(n,33).ngClassUntouched,r._29(n,33).ngClassTouched,r._29(n,33).ngClassPristine,r._29(n,33).ngClassDirty,r._29(n,33).ngClassValid,r._29(n,33).ngClassInvalid,r._29(n,33).ngClassPending);e(n,37,0,r._41(n,37,0,r._29(n,38).transform("core.all")));e(n,42,0,r._41(n,42,0,r._29(n,43).transform("addon.block_timeline.overdue")));e(n,47,0,r._41(n,47,0,r._29(n,48).transform("addon.block_timeline.duedate")));e(n,52,0,r._41(n,52,0,r._29(n,53).transform("addon.block_timeline.next7days")));e(n,57,0,r._41(n,57,0,r._29(n,58).transform("addon.block_timeline.next30days")));e(n,62,0,r._41(n,62,0,r._29(n,63).transform("addon.block_timeline.next3months")));e(n,67,0,r._41(n,67,0,r._29(n,68).transform("addon.block_timeline.next6months")));e(n,72,0,"sortbydates"!=t.sort);e(n,79,0,"sortbycourses"!=t.sort)})}function View_AddonBlockRecentlyAccessedCoursesComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.prefetchCourses()&&o}return o},$.b,$.a)),r._15(1,1097728,[[2,4]],0,Y.a,[[8,""],X.a,r.p,r.K],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),r._40(-1,0,["\n            "])),(e()(),r._16(3,0,null,0,1,"core-icon",[],null,null,null,J.b,J.a)),r._15(4,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"]},null),(e()(),r._40(-1,0,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,"dark","");e(n,4,0,t.prefetchCoursesData.icon)},null)}function View_AddonBlockRecentlyAccessedCoursesComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-badge",[["class","core-course-download-courses-progress"]],null,null,null,null,null)),r._15(1,16384,null,0,Vn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.component.prefetchCoursesData.badge)})}function View_AddonBlockRecentlyAccessedCoursesComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,ee.b,ee.a)),r._15(1,114688,null,0,ne.a,[X.a,r.p,r.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,r._29(n,1)._paused)})}function View_AddonBlockRecentlyAccessedCoursesComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,10,"div",[["class","core-button-spinner"],["item-end",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockRecentlyAccessedCoursesComponent_2)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockRecentlyAccessedCoursesComponent_3)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockRecentlyAccessedCoursesComponent_4)),r._15(9,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.prefetchCoursesData.icon&&"spinner"!=t.prefetchCoursesData.icon);e(n,6,0,t.prefetchCoursesData.badge);e(n,9,0,!t.prefetchCoursesData.icon||"spinner"==t.prefetchCoursesData.icon)},null)}function View_AddonBlockRecentlyAccessedCoursesComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,Gn.b,Gn.a)),r._15(1,49152,null,0,jn.a,[],{message:[0,"message"],image:[1,"image"]},null),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,r._41(n,1,0,r._29(n,2).transform("addon.block_recentlyaccessedcourses.nocourses")),"assets/img/icons/courses.svg")},null)}function View_AddonBlockRecentlyAccessedCoursesComponent_6(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(2,0,null,null,1,"core-courses-course-progress",[["class","core-recentlyaccessedcourses"]],null,null,null,Yn.b,Yn.a)),r._15(3,245760,null,0,Xn.a,[[2,I.a],Jn.a,S.a,Rn.a,_e.a,pe.a,Zn.a,et.a,nt.a],{course:[0,"course"],showDownload:[1,"showDownload"]},null),(e()(),r._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,n.context.$implicit,t.downloadCourseEnabled&&t.downloadEnabled)},null)}function View_AddonBlockRecentlyAccessedCoursesComponent_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,13,"ion-item-divider",[["class","item item-divider"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,xn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n    "])),(e()(),r._11(16777216,null,4,1,null,View_AddonBlockRecentlyAccessedCoursesComponent_1)),r._15(12,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._16(15,0,null,null,12,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,Fn.b,Fn.a)),r._15(16,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockRecentlyAccessedCoursesComponent_5)),r._15(19,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._40(-1,0,["\n     "])),(e()(),r._16(22,0,null,0,4,"div",[["class","core-horizontal-scroll"]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockRecentlyAccessedCoursesComponent_6)),r._15(25,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,0,["\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,12,0,t.downloadCoursesEnabled&&t.downloadEnabled&&t.courses&&t.courses.length>1);e(n,16,0,t.loaded);e(n,19,0,0==t.courses.length);e(n,25,0,t.courses)},function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,9).transform("addon.block_recentlyaccessedcourses.pluginname")))})}function View_AddonBlockRecentlyAccessedItemsComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,0,"img",[["alt",""],["class","core-module-icon"],["item-start",""],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(e,n){e(n,0,0,n.parent.context.$implicit.iconUrl)})}function View_AddonBlockRecentlyAccessedItemsComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,24,"div",[],null,null,null,null,null)),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(2,0,null,null,21,"ion-card",[],null,null,null,null,null)),r._15(3,16384,null,0,Tt.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._16(5,0,null,null,17,"a",[["class","core-course-module-handler item-media item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],[[8,"title",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.action(t,e.context.$implicit)&&o}return o},De.b,De.a)),r._15(6,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(10,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n                    "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockRecentlyAccessedItemsComponent_3)),r._15(13,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n                    "])),(e()(),r._16(15,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._16(16,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(17,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n                    "])),(e()(),r._16(19,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(20,16777216,null,null,1,"core-format-text",[["contextLevel","course"]],null,null,null,null,null)),r._15(21,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(e()(),r._40(-1,2,["\n                "])),(e()(),r._40(-1,null,["\n            "])),(e()(),r._40(-1,null,["\n        "]))],function(e,n){e(n,13,0,n.context.$implicit.iconUrl);e(n,17,0,n.context.$implicit.name,"module",n.context.$implicit.cmid,n.context.$implicit.courseid);e(n,21,0,n.context.$implicit.coursename,"course",n.context.$implicit.courseid)},function(e,n){e(n,5,0,n.context.$implicit.name)})}function View_AddonBlockRecentlyAccessedItemsComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,"div",[["class","core-horizontal-scroll"]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockRecentlyAccessedItemsComponent_2)),r._15(3,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.items)},null)}function View_AddonBlockRecentlyAccessedItemsComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/activities.svg"]],null,null,null,Gn.b,Gn.a)),r._15(1,49152,null,0,jn.a,[],{message:[0,"message"],image:[1,"image"]},null),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,r._41(n,1,0,r._29(n,2).transform("addon.block_recentlyaccesseditems.noitems")),"assets/img/icons/activities.svg")},null)}function View_AddonBlockRecentlyAccessedItemsComponent_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,10,"ion-item-divider",[["class","item item-divider"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,xn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._16(12,0,null,null,8,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,Fn.b,Fn.a)),r._15(13,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockRecentlyAccessedItemsComponent_1)),r._15(16,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n\n    "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockRecentlyAccessedItemsComponent_4)),r._15(19,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,13,0,t.loaded);e(n,16,0,t.items&&t.items.length>0);e(n,19,0,t.items.length<=0)},function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,9).transform("addon.block_recentlyaccesseditems.pluginname")))})}function View_AddonBlockStarredCoursesComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.prefetchCourses()&&o}return o},$.b,$.a)),r._15(1,1097728,[[2,4]],0,Y.a,[[8,""],X.a,r.p,r.K],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),r._40(-1,0,["\n            "])),(e()(),r._16(3,0,null,0,1,"core-icon",[],null,null,null,J.b,J.a)),r._15(4,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"]},null),(e()(),r._40(-1,0,["\n        "]))],function(e,n){var t=n.component;e(n,1,0,"dark","");e(n,4,0,t.prefetchCoursesData.icon)},null)}function View_AddonBlockStarredCoursesComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-badge",[["class","core-course-download-courses-progress"]],null,null,null,null,null)),r._15(1,16384,null,0,Vn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(2,null,["",""]))],null,function(e,n){e(n,2,0,n.component.prefetchCoursesData.badge)})}function View_AddonBlockStarredCoursesComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"ion-spinner",[],[[2,"spinner-paused",null]],null,null,ee.b,ee.a)),r._15(1,114688,null,0,ne.a,[X.a,r.p,r.K],null,null)],function(e,n){e(n,1,0)},function(e,n){e(n,0,0,r._29(n,1)._paused)})}function View_AddonBlockStarredCoursesComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,10,"div",[["class","core-button-spinner"],["item-end",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockStarredCoursesComponent_2)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockStarredCoursesComponent_3)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockStarredCoursesComponent_4)),r._15(9,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,t.prefetchCoursesData.icon&&"spinner"!=t.prefetchCoursesData.icon);e(n,6,0,t.prefetchCoursesData.badge);e(n,9,0,!t.prefetchCoursesData.icon||"spinner"==t.prefetchCoursesData.icon)},null)}function View_AddonBlockStarredCoursesComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-empty-box",[["image","assets/img/icons/courses.svg"]],null,null,null,Gn.b,Gn.a)),r._15(1,49152,null,0,jn.a,[],{message:[0,"message"],image:[1,"image"]},null),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,r._41(n,1,0,r._29(n,2).transform("addon.block_starredcourses.nocourses")),"assets/img/icons/courses.svg")},null)}function View_AddonBlockStarredCoursesComponent_6(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(2,0,null,null,1,"core-courses-course-progress",[["class","core-block_starredcourses"]],null,null,null,Yn.b,Yn.a)),r._15(3,245760,null,0,Xn.a,[[2,I.a],Jn.a,S.a,Rn.a,_e.a,pe.a,Zn.a,et.a,nt.a],{course:[0,"course"],showDownload:[1,"showDownload"]},null),(e()(),r._40(-1,null,["\n        "]))],function(e,n){var t=n.component;e(n,3,0,n.context.$implicit,t.downloadCourseEnabled&&t.downloadEnabled)},null)}function View_AddonBlockStarredCoursesComponent_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,13,"ion-item-divider",[["class","item item-divider"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,xn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n    "])),(e()(),r._11(16777216,null,4,1,null,View_AddonBlockStarredCoursesComponent_1)),r._15(12,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._16(15,0,null,null,12,"core-loading",[["class","core-loading-center safe-area-page"]],null,null,null,Fn.b,Fn.a)),r._15(16,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._11(16777216,null,0,1,null,View_AddonBlockStarredCoursesComponent_5)),r._15(19,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,0,["\n    "])),(e()(),r._40(-1,0,["\n    "])),(e()(),r._16(22,0,null,0,4,"div",[["class","core-horizontal-scroll"]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonBlockStarredCoursesComponent_6)),r._15(25,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,0,["\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,12,0,t.downloadCoursesEnabled&&t.downloadEnabled&&t.courses&&t.courses.length>1);e(n,16,0,t.loaded);e(n,19,0,0==t.courses.length);e(n,25,0,t.courses)},function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,9).transform("addon.block_starredcourses.pluginname")))})}function View_AddonModAssignSubmissionCommentsComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,12,"a",[["class","item item-block"],["detail-none",""],["ion-item",""],["text-wrap",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.showComments(t)&&o}return o},De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,2,{contentLabel:0}),r._37(603979776,3,{_buttons:1}),r._37(603979776,4,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,2,1,"core-comments",[["area","submission_comments"],["component","assignsubmission_comments"],["contextLevel","module"]],null,null,null,Ie.c,Ie.b)),r._15(11,770048,[[1,4]],0,Ht.a,[I.a,Nt.a,pe.a,_e.a,[2,de.a]],{contextLevel:[0,"contextLevel"],instanceId:[1,"instanceId"],component:[2,"component"],itemId:[3,"itemId"],area:[4,"area"],title:[5,"title"],courseId:[6,"courseId"]},null),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,11,0,"module",t.assign.cmid,"assignsubmission_comments",t.submission.id,"submission_comments",t.plugin.name,t.assign.course)},function(e,n){e(n,8,0,n.component.plugin.name)})}function View_AddonModAssignSubmissionCommentsComponent_0(e){return r._42(0,[r._37(671088640,1,{commentsComponent:0}),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignSubmissionCommentsComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,2,0,n.component.commentsEnabled)},null)}function View_AddonModAssignSubmissionFileComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(12,0,null,null,1,"core-files",[],null,null,null,Kt.b,Kt.a)),r._15(13,376832,null,0,qt.a,[Gt.a,ue.a,r.w],{files:[0,"files"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,13,0,t.files,t.component,t.assign.cmid,!0)},function(e,n){e(n,8,0,n.component.plugin.name)})}function View_AddonModAssignSubmissionFileComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,12,"div",[],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,6,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(3,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(7,16384,null,0,xn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(8,2,["",""])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(10,0,null,null,1,"core-attachments",[],null,null,null,jt.b,jt.a)),r._15(11,114688,null,0,Qt.a,[ge.a,S.a,fe.a,zt.a,Oe.a,$t.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"],acceptedTypes:[6,"acceptedTypes"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.files,t.configs.maxsubmissionsizebytes,t.configs.maxfilesubmissions,t.component,t.assign.cmid,t.allowOffline,t.configs.filetypeslist)},function(e,n){e(n,8,0,n.component.plugin.name)})}function View_AddonModAssignSubmissionFileComponent_0(e){return r._42(0,[(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignSubmissionFileComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignSubmissionFileComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.files&&t.files.length&&!t.edit);e(n,6,0,t.edit)},null)}function View_AddonModAssignSubmissionOnlineTextComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(e()(),r._40(1,null,["",""])),r._33(2,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i])],null,function(e,n){var t=n.component;e(n,1,0,r._41(n,1,0,r._29(n,3).transform("addon.mod_assign.numwords",e(n,2,0,t.words))))})}function View_AddonModAssignSubmissionOnlineTextComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._11(16777216,null,2,1,null,View_AddonModAssignSubmissionOnlineTextComponent_2)),r._15(11,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(13,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(15,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(16,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"],fullOnClick:[4,"fullOnClick"],fullTitle:[5,"fullTitle"],contextLevel:[6,"contextLevel"],contextInstanceId:[7,"contextInstanceId"],courseId:[8,"courseId"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.words);e(n,16,0,t.text,t.component,t.assign.cmid,80,!0,t.plugin.name,"module",t.assign.cmid,t.assign.course)},function(e,n){e(n,8,0,n.component.plugin.name)})}function View_AddonModAssignSubmissionOnlineTextComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,7,{contentLabel:0}),r._37(603979776,8,{_buttons:1}),r._37(603979776,9,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,2,2,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(11,0,null,2,3,"p",[],null,null,null,null,null)),(e()(),r._40(12,null,["",""])),r._33(13,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n    "]))],null,function(e,n){var t=n.component;e(n,8,0,r._41(n,8,0,r._29(n,9).transform("addon.mod_assign.wordlimit")));e(n,12,0,r._41(n,12,0,r._29(n,14).transform("core.numwords",e(n,13,0,t.words+" / "+t.configs.wordlimit))))})}function View_AddonModAssignSubmissionOnlineTextComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,24,"div",[],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,6,"ion-item-divider",[["class","item item-divider"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(3,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(7,16384,null,0,xn.a,[X.a,r.p,r.K],null,null),(e()(),r._40(8,2,["",""])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignSubmissionOnlineTextComponent_4)),r._15(11,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(13,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(14,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,10,{contentLabel:0}),r._37(603979776,11,{_buttons:1}),r._37(603979776,12,{_icons:1}),r._15(18,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(20,0,null,3,2,"core-rich-text-editor",[["contextLevel","module"],["elementId","onlinetext_editor"],["item-content",""],["name","onlinetext_editor_text"]],null,[[null,"contentChanged"]],function(e,n,t){var o=!0;if("contentChanged"===n){o=!1!==e.component.onChange(t)&&o}return o},be.c,be.b)),r._15(21,1228800,null,0,In.a,[S.a,ae.a,pe.a,me.a,[2,ln.a],r.p,_e.a,ue.a,on.a,Sn.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"],autoSave:[5,"autoSave"],contextLevel:[6,"contextLevel"],contextInstanceId:[7,"contextInstanceId"],elementId:[8,"elementId"],draftExtraParams:[9,"draftExtraParams"]},{contentChanged:"contentChanged"}),r._33(22,{userid:0,action:1}),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.wordLimitEnabled&&t.words>=0);e(n,21,0,t.plugin.name,t.control,"onlinetext_editor_text",t.component,t.assign.cmid,!0,"module",t.assign.cmid,"onlinetext_editor",e(n,22,0,t.currentUserId,"editsubmission"))},function(e,n){e(n,8,0,n.component.plugin.name)})}function View_AddonModAssignSubmissionOnlineTextComponent_0(e){return r._42(0,[(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignSubmissionOnlineTextComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignSubmissionOnlineTextComponent_3)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.edit&&t.text);e(n,6,0,t.edit&&t.loaded)},null)}function View_AddonModAssignFeedbackCommentsComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.editComment()&&o}return o},$.b,$.a)),r._15(1,1097728,[[2,4]],0,Y.a,[[8,""],X.a,r.p,r.K],{color:[0,"color"],clear:[1,"clear"]},null),(e()(),r._40(-1,0,["\n                "])),(e()(),r._16(3,0,null,0,1,"ion-icon",[["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._15(4,147456,null,0,lo.a,[X.a,r.p,r.K],{name:[0,"name"]},null),(e()(),r._40(-1,0,["\n            "]))],function(e,n){e(n,1,0,"dark","");e(n,4,0,"create")},function(e,n){e(n,3,0,r._29(n,4)._hidden)})}function View_AddonModAssignFeedbackCommentsComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,6,"ion-note",[["color","dark"]],null,null,null,null,null)),r._15(1,16384,null,0,so.a,[X.a,r.p,r.K],{color:[0,"color"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._15(4,147456,null,0,lo.a,[X.a,r.p,r.K],{name:[0,"name"]},null),(e()(),r._40(5,null,["\n            ","\n        "])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,1,0,"dark");e(n,4,0,"time")},function(e,n){e(n,3,0,r._29(n,4)._hidden);e(n,5,0,r._41(n,5,0,r._29(n,6).transform("core.notsent")))})}function View_AddonModAssignFeedbackCommentsComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,27,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(12,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(13,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],maxHeight:[3,"maxHeight"],fullOnClick:[4,"fullOnClick"],fullTitle:[5,"fullTitle"],contextLevel:[6,"contextLevel"],contextInstanceId:[7,"contextInstanceId"],courseId:[8,"courseId"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(16,0,null,4,10,"div",[["item-end",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(18,0,null,null,4,"div",[["text-end",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignFeedbackCommentsComponent_2)),r._15(21,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignFeedbackCommentsComponent_3)),r._15(25,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,13,0,t.text,t.component,t.assign.cmid,80,!0,t.plugin.name,"module",t.assign.cmid,t.assign.course);e(n,21,0,t.canEdit);e(n,25,0,!t.isSent)},function(e,n){e(n,8,0,n.component.plugin.name)})}function View_AddonModAssignFeedbackCommentsComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,11,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,3,3,"core-rich-text-editor",[["contextLevel","module"],["elementId","assignfeedbackcomments_editor"],["item-content",""],["name","assignfeedbackcomments_editor"]],null,null,null,be.c,be.b)),r._15(8,1228800,null,0,In.a,[S.a,ae.a,pe.a,me.a,[2,ln.a],r.p,_e.a,ue.a,on.a,Sn.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"],autoSave:[5,"autoSave"],contextLevel:[6,"contextLevel"],contextInstanceId:[7,"contextInstanceId"],elementId:[8,"elementId"],draftExtraParams:[9,"draftExtraParams"]},null),r._33(9,{userid:0,action:1}),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,8,0,t.plugin.name,t.control,"assignfeedbackcomments_editor",t.component,t.assign.cmid,!0,"module",t.assign.cmid,"assignfeedbackcomments_editor",e(n,9,0,t.userId,"grade"))},null)}function View_AddonModAssignFeedbackCommentsComponent_0(e){return r._42(0,[(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignFeedbackCommentsComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignFeedbackCommentsComponent_4)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,(t.text||t.canEdit)&&!t.edit);e(n,6,0,t.edit&&t.loaded)},null)}function View_AddonModAssignFeedbackEditPdfComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-file",[],null,null,null,ho.b,ho.a)),r._15(1,245760,null,0,mo.a,[pe.a,ue.a,S.a,me.a,ge.a,ye.a,Gt.a,_e.a,fe.a,ve.a,ae.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.component,t.assign.cmid,!0)},null)}function View_AddonModAssignFeedbackEditPdfComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignFeedbackEditPdfComponent_2)),r._15(13,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n"]))],function(e,n){e(n,13,0,n.component.files)},function(e,n){e(n,8,0,n.component.plugin.name)})}function View_AddonModAssignFeedbackEditPdfComponent_0(e){return r._42(0,[(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignFeedbackEditPdfComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.files&&t.files.length)},null)}function View_AddonModAssignFeedbackFileComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-file",[],null,null,null,ho.b,ho.a)),r._15(1,245760,null,0,mo.a,[pe.a,ue.a,S.a,me.a,ge.a,ye.a,Gt.a,_e.a,fe.a,ve.a,ae.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.component,t.assign.cmid,!0)},null)}function View_AddonModAssignFeedbackFileComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(10,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignFeedbackFileComponent_2)),r._15(13,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,2,["\n"]))],function(e,n){e(n,13,0,n.component.files)},function(e,n){e(n,8,0,n.component.plugin.name)})}function View_AddonModAssignFeedbackFileComponent_0(e){return r._42(0,[(e()(),r._40(-1,null,["\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModAssignFeedbackFileComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.files&&t.files.length)},null)}function View_AddonModDataFieldCheckboxComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(1,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function View_AddonModDataFieldCheckboxComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),r._15(1,16384,[[1,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.value)},function(e,n){e(n,2,0,n.context.$implicit.key)})}function View_AddonModDataFieldCheckboxComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function View_AddonModDataFieldCheckboxComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,2,{contentLabel:0}),r._37(603979776,3,{_buttons:1}),r._37(603979776,4,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),r._15(8,16384,[[2,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._40(9,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(12,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var o=!0,i=e.component;if("click"===n){o=!1!==r._29(e,13)._click(t)&&o}if("ngModelChange"===n){o=!1!==(i.search["f_"+i.field.id+"_allreq"]=t)&&o}return o},Ke.b,Ke.a)),r._15(13,1228800,null,0,qe.a,[X.a,Fe.a,[2,xe.a],r.p,r.K],null,null),r._35(1024,null,Re.l,function(e){return[e]},[qe.a]),r._15(15,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.f]),r._15(17,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,15,0,"f_"+t.field.id+"_allreq",t.search["f_"+t.field.id+"_allreq"])},function(e,n){e(n,9,0,r._41(n,9,0,r._29(n,10).transform("addon.mod_data.selectedrequired")));e(n,12,0,r._29(n,13)._disabled,r._29(n,17).ngClassUntouched,r._29(n,17).ngClassTouched,r._29(n,17).ngClassPristine,r._29(n,17).ngClassDirty,r._29(n,17).ngClassValid,r._29(n,17).ngClassInvalid,r._29(n,17).ngClassPending)})}function View_AddonModDataFieldCheckboxComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,27,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldCheckboxComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(8,0,null,null,12,"ion-select",[["interface","action-sheet"],["multiple","true"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,9)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,9)._keyup()&&o}return o},cn.b,cn.a)),r._15(9,1228800,null,1,pn.a,[fn.a,Fe.a,X.a,r.p,r.K,[2,xe.a],hn.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"],multiple:[3,"multiple"]},null),r._37(603979776,1,{options:1}),r._32(131072,Te.a,[Oe.a,r.i]),r._33(12,{title:0}),r._35(1024,null,Re.l,function(e){return[e]},[pn.a]),r._15(14,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(16,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldCheckboxComponent_3)),r._15(19,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldCheckboxComponent_4)),r._15(23,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldCheckboxComponent_5)),r._15(26,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,r._41(n,9,0,r._29(n,11).transform("addon.mod_data.menuchoose")),e(n,12,0,t.field.name),"action-sheet","true");e(n,14,0,"f_"+t.field.id);e(n,19,0,t.options);e(n,23,0,t.error&&"edit"==t.mode);e(n,26,0,"search"==t.mode)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,8,0,r._29(n,9)._disabled,r._29(n,16).ngClassUntouched,r._29(n,16).ngClassTouched,r._29(n,16).ngClassPristine,r._29(n,16).ngClassDirty,r._29(n,16).ngClassValid,r._29(n,16).ngClassInvalid,r._29(n,16).ngClassPending)})}function View_AddonModDataFieldCheckboxComponent_6(e){return r._42(0,[(e()(),r._16(0,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(1,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),r._11(0,null,null,0))],function(e,n){e(n,1,0,n.component.value.content,!1)},null)}function View_AddonModDataFieldCheckboxComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldCheckboxComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldCheckboxComponent_6)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function View_AddonModDataFieldDateComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(1,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function View_AddonModDataFieldDateComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function View_AddonModDataFieldDateComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),r._15(8,16384,[[1,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._40(9,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(12,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var o=!0,i=e.component;if("click"===n){o=!1!==r._29(e,13)._click(t)&&o}if("ngModelChange"===n){o=!1!==(i.search["f_"+i.field.id+"_z"]=t)&&o}return o},Ke.b,Ke.a)),r._15(13,1228800,null,0,qe.a,[X.a,Fe.a,[2,xe.a],r.p,r.K],null,null),r._35(1024,null,Re.l,function(e){return[e]},[qe.a]),r._15(15,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.f]),r._15(17,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,15,0,"f_"+t.field.id+"_z",t.search["f_"+t.field.id+"_z"])},function(e,n){e(n,9,0,r._41(n,9,0,r._29(n,10).transform("addon.mod_data.usedate")));e(n,12,0,r._29(n,13)._disabled,r._29(n,17).ngClassUntouched,r._29(n,17).ngClassTouched,r._29(n,17).ngClassPristine,r._29(n,17).ngClassDirty,r._29(n,17).ngClassValid,r._29(n,17).ngClassInvalid,r._29(n,17).ngClassPending)})}function View_AddonModDataFieldDateComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,21,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldDateComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(8,0,null,null,6,"ion-datetime",[],[[2,"datetime-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,9)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,9)._keyup()&&o}return o},ze.b,ze.a)),r._15(9,1228800,null,0,$e.a,[Fe.a,X.a,r.p,r.K,[2,xe.a],[2,Ye.a]],{disabled:[0,"disabled"],displayFormat:[1,"displayFormat"],placeholder:[2,"placeholder"]},null),r._32(131072,Te.a,[Oe.a,r.i]),r._35(1024,null,Re.l,function(e){return[e]},[$e.a]),r._15(12,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],isDisabled:[1,"isDisabled"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(14,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldDateComponent_3)),r._15(17,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldDateComponent_4)),r._15(20,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,"search"==t.mode&&!t.search["f_"+t.field.id+"_z"],t.format,r._41(n,9,2,r._29(n,10).transform("core.date")));e(n,12,0,"f_"+t.field.id,"search"==t.mode&&!t.search["f_"+t.field.id+"_z"]);e(n,17,0,t.error&&"edit"==t.mode);e(n,20,0,"search"==t.mode)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,8,0,r._29(n,9)._disabled,r._29(n,14).ngClassUntouched,r._29(n,14).ngClassTouched,r._29(n,14).ngClassPristine,r._29(n,14).ngClassDirty,r._29(n,14).ngClassValid,r._29(n,14).ngClassInvalid,r._29(n,14).ngClassPending)})}function View_AddonModDataFieldDateComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(e()(),r._40(1,null,["",""])),r._34(2,2)],null,function(e,n){var t=n.component;e(n,1,0,r._41(n,1,0,e(n,2,0,r._29(n.parent,0),1e3*t.value.content,"strftimedate")))})}function View_AddonModDataFieldDateComponent_0(e){return r._42(0,[r._32(0,Xe.a,[b.a,Je.a]),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldDateComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldDateComponent_5)),r._15(5,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"]))],function(e,n){var t=n.component;e(n,2,0,!t.isShowOrListMode());e(n,5,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function View_AddonModDataFieldFileComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.error)},null)}function View_AddonModDataFieldFileComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,10,"span",[],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(3,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(5,0,null,null,1,"core-attachments",[["maxSubmissions","1"]],null,null,null,jt.b,jt.a)),r._15(6,114688,null,0,Qt.a,[ge.a,S.a,fe.a,zt.a,Oe.a,$t.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldFileComponent_2)),r._15(9,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,3,0,t.field.required);e(n,6,0,t.files,t.maxSizeBytes,"1",t.component,t.componentId,!0);e(n,9,0,t.error)},null)}function View_AddonModDataFieldFileComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,10,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(5,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(6,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(8,16384,null,0,Re.n,[Re.m],null,null),r._15(9,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"f_"+t.field.id);e(n,9,0,"text",t.field.name)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,5,0,r._29(n,8).ngClassUntouched,r._29(n,8).ngClassTouched,r._29(n,8).ngClassPristine,r._29(n,8).ngClassDirty,r._29(n,8).ngClassValid,r._29(n,8).ngClassInvalid,r._29(n,8).ngClassPending)})}function View_AddonModDataFieldFileComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,7,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(4,0,null,null,1,"core-files",[],null,null,null,Kt.b,Kt.a)),r._15(5,376832,null,0,qt.a,[Gt.a,ue.a,r.w],{files:[0,"files"],component:[1,"component"],componentId:[2,"componentId"],alwaysDownload:[3,"alwaysDownload"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.files,t.component,t.componentId,!0)},null)}function View_AddonModDataFieldFileComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldFileComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldFileComponent_3)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldFileComponent_4)),r._15(7,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,"edit"==t.mode);e(n,4,0,"search"==t.mode);e(n,7,0,t.isShowOrListMode())},null)}function View_AddonModDataFieldLatlongComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(1,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(3,16384,null,0,Re.n,[Re.m],null,null),r._15(4,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null)],function(e,n){var t=n.component;e(n,1,0,"f_"+t.field.id);e(n,4,0,"text",t.field.name)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending)})}function View_AddonModDataFieldLatlongComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(1,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function View_AddonModDataFieldLatlongComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,12,"div",[["class","addon-data-lantlong"]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(2,0,null,null,6,"ion-input",[["maxlength","10"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(3,540672,null,0,Re.j,[],{maxlength:[0,"maxlength"]},null),r._35(1024,null,Re.k,function(e){return[e]},[Re.j]),r._15(5,671744,null,0,Re.f,[[3,Re.b],[2,Re.k],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(7,16384,null,0,Re.n,[Re.m],null,null),r._15(8,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(10,0,null,null,1,"span",[["class","placeholder-icon"],["item-right",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["°N"])),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,"10");e(n,5,0,"f_"+t.field.id+"_0");e(n,8,0,"text")},function(e,n){e(n,2,0,r._29(n,3).maxlength?r._29(n,3).maxlength:null,r._29(n,7).ngClassUntouched,r._29(n,7).ngClassTouched,r._29(n,7).ngClassPristine,r._29(n,7).ngClassDirty,r._29(n,7).ngClassValid,r._29(n,7).ngClassInvalid,r._29(n,7).ngClassPending)})}function View_AddonModDataFieldLatlongComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,12,"div",[["class","addon-data-lantlong"]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(2,0,null,null,6,"ion-input",[["maxlength","10"],["type","text"]],[[1,"maxlength",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(3,540672,null,0,Re.j,[],{maxlength:[0,"maxlength"]},null),r._35(1024,null,Re.k,function(e){return[e]},[Re.j]),r._15(5,671744,null,0,Re.f,[[3,Re.b],[2,Re.k],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(7,16384,null,0,Re.n,[Re.m],null,null),r._15(8,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(10,0,null,null,1,"span",[["class","placeholder-icon"],["item-right",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["°E"])),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,3,0,"10");e(n,5,0,"f_"+t.field.id+"_1");e(n,8,0,"text")},function(e,n){e(n,2,0,r._29(n,3).maxlength?r._29(n,3).maxlength:null,r._29(n,7).ngClassUntouched,r._29(n,7).ngClassTouched,r._29(n,7).ngClassPristine,r._29(n,7).ngClassDirty,r._29(n,7).ngClassValid,r._29(n,7).ngClassInvalid,r._29(n,7).ngClassPending)})}function View_AddonModDataFieldLatlongComponent_6(e){return r._42(0,[(e()(),r._16(0,0,null,null,9,"div",[["class","addon-data-lantlong"]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(2,0,null,null,6,"button",[["icon-left",""],["ion-button",""]],null,[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.getLocation(t)&&o}return o},$.b,$.a)),r._15(3,1097728,null,0,Y.a,[[8,""],X.a,r.p,r.K],null,null),(e()(),r._40(-1,0,["\n            "])),(e()(),r._16(5,0,null,0,1,"ion-icon",[["name","locate"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._15(6,147456,null,0,lo.a,[X.a,r.p,r.K],{name:[0,"name"]},null),(e()(),r._40(7,0,["\n            ","\n        "])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n    "]))],function(e,n){e(n,6,0,"locate")},function(e,n){e(n,5,0,r._29(n,6)._hidden);e(n,7,0,r._41(n,7,0,r._29(n,8).transform("addon.mod_data.mylocation")))})}function View_AddonModDataFieldLatlongComponent_7(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function View_AddonModDataFieldLatlongComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,22,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldLatlongComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldLatlongComponent_3)),r._15(9,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldLatlongComponent_4)),r._15(12,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldLatlongComponent_5)),r._15(15,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldLatlongComponent_6)),r._15(18,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldLatlongComponent_7)),r._15(21,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"search"==t.mode);e(n,9,0,"edit"==t.mode);e(n,12,0,"edit"==t.mode);e(n,15,0,"edit"==t.mode);e(n,18,0,"edit"==t.mode&&t.showGeolocation);e(n,21,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending)})}function View_AddonModDataFieldLatlongComponent_8(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,"span",[],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,1,"a",[],[[8,"href",4]],null,null,null,null)),(e()(),r._40(3,null,["",""])),(e()(),r._40(-1,null,["\n"]))],null,function(e,n){var t=n.component;e(n,2,0,t.getLatLongLink(t.north,t.east));e(n,3,0,t.formatLatLong(t.north,t.east))})}function View_AddonModDataFieldLatlongComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldLatlongComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldLatlongComponent_8)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value)},null)}function View_AddonModDataFieldMenuComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(1,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function View_AddonModDataFieldMenuComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),r._15(1,16384,[[1,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit)},function(e,n){e(n,2,0,n.context.$implicit)})}function View_AddonModDataFieldMenuComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function View_AddonModDataFieldMenuComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,29,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMenuComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(8,0,null,null,17,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,9)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,9)._keyup()&&o}return o},cn.b,cn.a)),r._15(9,1228800,null,1,pn.a,[fn.a,Fe.a,X.a,r.p,r.K,[2,xe.a],hn.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"]},null),r._37(603979776,1,{options:1}),r._32(131072,Te.a,[Oe.a,r.i]),r._33(12,{title:0}),r._35(1024,null,Re.l,function(e){return[e]},[pn.a]),r._15(14,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(16,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(18,0,null,null,3,"ion-option",[["value",""]],null,null,null,null,null)),r._15(19,16384,[[1,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(20,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMenuComponent_3)),r._15(24,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMenuComponent_4)),r._15(28,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,r._41(n,9,0,r._29(n,11).transform("addon.mod_data.menuchoose")),e(n,12,0,t.field.name),"action-sheet");e(n,14,0,"f_"+t.field.id);e(n,19,0,"");e(n,24,0,t.options);e(n,28,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,8,0,r._29(n,9)._disabled,r._29(n,16).ngClassUntouched,r._29(n,16).ngClassTouched,r._29(n,16).ngClassPristine,r._29(n,16).ngClassDirty,r._29(n,16).ngClassValid,r._29(n,16).ngClassInvalid,r._29(n,16).ngClassPending);e(n,20,0,r._41(n,20,0,r._29(n,21).transform("addon.mod_data.menuchoose")))})}function View_AddonModDataFieldMenuComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.value.content)})}function View_AddonModDataFieldMenuComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMenuComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMenuComponent_5)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function View_AddonModDataFieldMultimenuComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(1,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function View_AddonModDataFieldMultimenuComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),r._15(1,16384,[[1,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.value)},function(e,n){e(n,2,0,n.context.$implicit.key)})}function View_AddonModDataFieldMultimenuComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function View_AddonModDataFieldMultimenuComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,2,{contentLabel:0}),r._37(603979776,3,{_buttons:1}),r._37(603979776,4,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),r._15(8,16384,[[2,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._40(9,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(12,0,null,4,6,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var o=!0,i=e.component;if("click"===n){o=!1!==r._29(e,13)._click(t)&&o}if("ngModelChange"===n){o=!1!==(i.search["f_"+i.field.id+"_allreq"]=t)&&o}return o},Ke.b,Ke.a)),r._15(13,1228800,null,0,qe.a,[X.a,Fe.a,[2,xe.a],r.p,r.K],null,null),r._35(1024,null,Re.l,function(e){return[e]},[qe.a]),r._15(15,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.f]),r._15(17,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,15,0,"f_"+t.field.id+"_allreq",t.search["f_"+t.field.id+"_allreq"])},function(e,n){e(n,9,0,r._41(n,9,0,r._29(n,10).transform("addon.mod_data.selectedrequired")));e(n,12,0,r._29(n,13)._disabled,r._29(n,17).ngClassUntouched,r._29(n,17).ngClassTouched,r._29(n,17).ngClassPristine,r._29(n,17).ngClassDirty,r._29(n,17).ngClassValid,r._29(n,17).ngClassInvalid,r._29(n,17).ngClassPending)})}function View_AddonModDataFieldMultimenuComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,27,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMultimenuComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(8,0,null,null,12,"ion-select",[["interface","action-sheet"],["multiple","true"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,9)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,9)._keyup()&&o}return o},cn.b,cn.a)),r._15(9,1228800,null,1,pn.a,[fn.a,Fe.a,X.a,r.p,r.K,[2,xe.a],hn.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"],multiple:[3,"multiple"]},null),r._37(603979776,1,{options:1}),r._32(131072,Te.a,[Oe.a,r.i]),r._33(12,{title:0}),r._35(1024,null,Re.l,function(e){return[e]},[pn.a]),r._15(14,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(16,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMultimenuComponent_3)),r._15(19,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMultimenuComponent_4)),r._15(23,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMultimenuComponent_5)),r._15(26,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,r._41(n,9,0,r._29(n,11).transform("addon.mod_data.menuchoose")),e(n,12,0,t.field.name),"action-sheet","true");e(n,14,0,"f_"+t.field.id);e(n,19,0,t.options);e(n,23,0,t.error&&"edit"==t.mode);e(n,26,0,"search"==t.mode)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,8,0,r._29(n,9)._disabled,r._29(n,16).ngClassUntouched,r._29(n,16).ngClassTouched,r._29(n,16).ngClassPristine,r._29(n,16).ngClassDirty,r._29(n,16).ngClassValid,r._29(n,16).ngClassInvalid,r._29(n,16).ngClassPending)})}function View_AddonModDataFieldMultimenuComponent_6(e){return r._42(0,[(e()(),r._16(0,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(1,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),r._11(0,null,null,0))],function(e,n){e(n,1,0,n.component.value.content,!1)},null)}function View_AddonModDataFieldMultimenuComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMultimenuComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldMultimenuComponent_6)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function View_AddonModDataFieldNumberComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(1,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function View_AddonModDataFieldNumberComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function View_AddonModDataFieldNumberComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldNumberComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(8,0,null,null,4,"ion-input",[["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(9,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(11,16384,null,0,Re.n,[Re.m],null,null),r._15(12,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldNumberComponent_3)),r._15(15,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,"f_"+t.field.id);e(n,12,0,"number",t.field.name);e(n,15,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,8,0,r._29(n,11).ngClassUntouched,r._29(n,11).ngClassTouched,r._29(n,11).ngClassPristine,r._29(n,11).ngClassDirty,r._29(n,11).ngClassValid,r._29(n,11).ngClassInvalid,r._29(n,11).ngClassPending)})}function View_AddonModDataFieldNumberComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.value.content)})}function View_AddonModDataFieldNumberComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldNumberComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldNumberComponent_4)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function View_AddonModDataFieldPictureComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.error)},null)}function View_AddonModDataFieldPictureComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,25,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(5,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(6,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(8,0,null,null,1,"core-attachments",[["acceptedTypes","image"],["maxSubmissions","1"]],null,null,null,jt.b,jt.a)),r._15(9,114688,null,0,Qt.a,[ge.a,S.a,fe.a,zt.a,Oe.a,$t.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"],acceptedTypes:[6,"acceptedTypes"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldPictureComponent_2)),r._15(12,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._16(14,0,null,null,3,"ion-label",[["stacked",""]],null,null,null,null,null)),r._15(15,16384,null,0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),r._40(16,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(19,0,null,null,5,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(20,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(22,16384,null,0,Re.n,[Re.m],null,null),r._15(23,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,t.field.required);e(n,9,0,t.files,t.maxSizeBytes,"1",t.component,t.componentId,!0,"image");e(n,12,0,t.error);e(n,20,0,"f_"+t.field.id+"_alttext");e(n,23,0,"text",r._41(n,23,1,r._29(n,24).transform("addon.mod_data.alttext")))},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,16,0,r._41(n,16,0,r._29(n,17).transform("addon.mod_data.alttext")));e(n,19,0,r._29(n,22).ngClassUntouched,r._29(n,22).ngClassTouched,r._29(n,22).ngClassPristine,r._29(n,22).ngClassDirty,r._29(n,22).ngClassValid,r._29(n,22).ngClassInvalid,r._29(n,22).ngClassPending)})}function View_AddonModDataFieldPictureComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,10,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(5,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(6,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(8,16384,null,0,Re.n,[Re.m],null,null),r._15(9,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"f_"+t.field.id);e(n,9,0,"text",t.field.name)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,5,0,r._29(n,8).ngClassUntouched,r._29(n,8).ngClassTouched,r._29(n,8).ngClassPristine,r._29(n,8).ngClassDirty,r._29(n,8).ngClassValid,r._29(n,8).ngClassInvalid,r._29(n,8).ngClassPending)})}function View_AddonModDataFieldPictureComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"span",[],null,[[null,"click"]],function(e,n,t){var o=!0,r=e.component;if("click"===n){o=!1!==r.gotoEntry.emit(r.entryId)&&o}return o},null,null)),(e()(),r._16(1,0,null,null,1,"img",[["class","core-media-adapt-width list_picture"],["core-external-content",""]],[[8,"alt",0]],null,null,null,null)),r._15(2,4734976,null,0,zo.a,[r.p,b.a,me.a,on.a,pe.a,S.a,ae.a,ge.a,ue.a],{src:[0,"src"]},null)],function(e,n){e(n,2,0,n.component.imageUrl)},function(e,n){e(n,1,0,n.component.title)})}function View_AddonModDataFieldPictureComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"img",[["class","core-media-adapt-width list_picture"],["core-external-content",""]],[[8,"alt",0],[1,"width",0],[1,"height",0]],null,null,null,null)),r._15(1,4734976,null,0,zo.a,[r.p,b.a,me.a,on.a,pe.a,S.a,ae.a,ge.a,ue.a],{src:[0,"src"]},null)],function(e,n){e(n,1,0,n.component.imageUrl)},function(e,n){var t=n.component;e(n,0,0,t.title,t.width,t.height)})}function View_AddonModDataFieldPictureComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldPictureComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldPictureComponent_3)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldPictureComponent_4)),r._15(7,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldPictureComponent_5)),r._15(10,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,"edit"==t.mode);e(n,4,0,"search"==t.mode);e(n,7,0,"list"==t.mode&&t.imageUrl);e(n,10,0,"show"==t.mode&&t.imageUrl)},null)}function View_AddonModDataFieldRadiobuttonComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(1,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function View_AddonModDataFieldRadiobuttonComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),r._15(1,16384,[[1,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit)},function(e,n){e(n,2,0,n.context.$implicit)})}function View_AddonModDataFieldRadiobuttonComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function View_AddonModDataFieldRadiobuttonComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,29,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldRadiobuttonComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(8,0,null,null,17,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,9)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,9)._keyup()&&o}return o},cn.b,cn.a)),r._15(9,1228800,null,1,pn.a,[fn.a,Fe.a,X.a,r.p,r.K,[2,xe.a],hn.a],{placeholder:[0,"placeholder"],selectOptions:[1,"selectOptions"],interface:[2,"interface"]},null),r._37(603979776,1,{options:1}),r._32(131072,Te.a,[Oe.a,r.i]),r._33(12,{title:0}),r._35(1024,null,Re.l,function(e){return[e]},[pn.a]),r._15(14,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[2,Re.l]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(16,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(18,0,null,null,3,"ion-option",[["value",""]],null,null,null,null,null)),r._15(19,16384,[[1,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(20,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldRadiobuttonComponent_3)),r._15(24,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldRadiobuttonComponent_4)),r._15(28,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,r._41(n,9,0,r._29(n,11).transform("addon.mod_data.menuchoose")),e(n,12,0,t.field.name),"action-sheet");e(n,14,0,"f_"+t.field.id);e(n,19,0,"");e(n,24,0,t.options);e(n,28,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,8,0,r._29(n,9)._disabled,r._29(n,16).ngClassUntouched,r._29(n,16).ngClassTouched,r._29(n,16).ngClassPristine,r._29(n,16).ngClassDirty,r._29(n,16).ngClassValid,r._29(n,16).ngClassInvalid,r._29(n,16).ngClassPending);e(n,20,0,r._41(n,20,0,r._29(n,21).transform("addon.mod_data.menuchoose")))})}function View_AddonModDataFieldRadiobuttonComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.value.content)})}function View_AddonModDataFieldRadiobuttonComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldRadiobuttonComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldRadiobuttonComponent_5)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function View_AddonModDataFieldTextComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(1,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function View_AddonModDataFieldTextComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function View_AddonModDataFieldTextComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldTextComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(8,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(9,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(11,16384,null,0,Re.n,[Re.m],null,null),r._15(12,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldTextComponent_3)),r._15(15,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,"f_"+t.field.id);e(n,12,0,"text",t.field.name);e(n,15,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,8,0,r._29(n,11).ngClassUntouched,r._29(n,11).ngClassTouched,r._29(n,11).ngClassPristine,r._29(n,11).ngClassDirty,r._29(n,11).ngClassValid,r._29(n,11).ngClassInvalid,r._29(n,11).ngClassPending)})}function View_AddonModDataFieldTextComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.value.content)})}function View_AddonModDataFieldTextComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldTextComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldTextComponent_4)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function View_AddonModDataFieldTextareaComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(1,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(3,16384,null,0,Re.n,[Re.m],null,null),r._15(4,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null)],function(e,n){var t=n.component;e(n,1,0,"f_"+t.field.id);e(n,4,0,"text",t.field.name)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending)})}function View_AddonModDataFieldTextareaComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(1,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function View_AddonModDataFieldTextareaComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,"core-rich-text-editor",[["contextLevel","module"],["item-content",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,be.c,be.b)),r._15(1,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(3,16384,null,0,Re.n,[Re.m],null,null),r._15(4,1228800,null,0,In.a,[S.a,ae.a,pe.a,me.a,[2,ln.a],r.p,_e.a,ue.a,on.a,Sn.a],{placeholder:[0,"placeholder"],control:[1,"control"],component:[2,"component"],componentId:[3,"componentId"],autoSave:[4,"autoSave"],contextLevel:[5,"contextLevel"],contextInstanceId:[6,"contextInstanceId"],elementId:[7,"elementId"]},null)],function(e,n){var t=n.component;e(n,1,0,"f_"+t.field.id);e(n,4,0,t.field.name,t.form.controls["f_"+t.field.id],t.component,t.componentId,!0,"module",t.componentId,"field_"+t.field.id)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending)})}function View_AddonModDataFieldTextareaComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function View_AddonModDataFieldTextareaComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldTextareaComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldTextareaComponent_3)),r._15(9,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldTextareaComponent_4)),r._15(12,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldTextareaComponent_5)),r._15(15,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"search"==t.mode);e(n,9,0,"edit"==t.mode);e(n,12,0,"edit"==t.mode);e(n,15,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending)})}function View_AddonModDataFieldTextareaComponent_6(e){return r._42(0,[(e()(),r._16(0,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(1,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._11(0,null,null,0))],function(e,n){var t=n.component;e(n,1,0,t.format(t.value),t.component,t.componentId,"module",t.componentId,t.database.course)},null)}function View_AddonModDataFieldTextareaComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldTextareaComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldTextareaComponent_6)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value)},null)}function View_AddonModDataFieldUrlComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[["class","core-mark-required"]],null,null,null,Ne.b,Ne.a)),r._15(1,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null)],function(e,n){e(n,1,0,n.component.field.required)},null)}function View_AddonModDataFieldUrlComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{formControl:[0,"formControl"],errorText:[1,"errorText"]},null)],function(e,n){var t=n.component;e(n,1,0,t.form.controls["f_"+t.field.id],t.error)},null)}function View_AddonModDataFieldUrlComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,16,"span",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,1).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,1).onReset()&&o}return o},null,null)),r._15(1,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(3,16384,null,0,Re.o,[Re.b],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldUrlComponent_2)),r._15(6,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(8,0,null,null,4,"ion-input",[["type","url"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(9,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(11,16384,null,0,Re.n,[Re.m],null,null),r._15(12,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldUrlComponent_3)),r._15(15,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.form);e(n,6,0,"edit"==t.mode);e(n,9,0,"f_"+t.field.id);e(n,12,0,"url",t.field.name);e(n,15,0,t.error&&"edit"==t.mode)},function(e,n){e(n,0,0,r._29(n,3).ngClassUntouched,r._29(n,3).ngClassTouched,r._29(n,3).ngClassPristine,r._29(n,3).ngClassDirty,r._29(n,3).ngClassValid,r._29(n,3).ngClassInvalid,r._29(n,3).ngClassPending);e(n,8,0,r._29(n,11).ngClassUntouched,r._29(n,11).ngClassTouched,r._29(n,11).ngClassPristine,r._29(n,11).ngClassDirty,r._29(n,11).ngClassValid,r._29(n,11).ngClassInvalid,r._29(n,11).ngClassPending)})}function View_AddonModDataFieldUrlComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"a",[["capture","true"],["core-link",""]],[[8,"href",4]],null,null,null,null)),r._15(1,81920,null,0,sr.a,[r.p,S.a,ue.a,pe.a,ae.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],fe.a],{capture:[0,"capture"]},null),(e()(),r._40(2,null,["",""]))],function(e,n){e(n,1,0,"true")},function(e,n){var t=n.component;e(n,0,0,t.value.content);e(n,2,0,t.value.content)})}function View_AddonModDataFieldUrlComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldUrlComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._11(16777216,null,null,1,null,View_AddonModDataFieldUrlComponent_4)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null)],function(e,n){var t=n.component;e(n,1,0,!t.isShowOrListMode());e(n,4,0,t.isShowOrListMode()&&t.value&&t.value.content)},null)}function View_AddonModQuizAccessOfflineAttemptsComponent_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(11,0,null,2,3,"p",[],null,null,null,null,null)),(e()(),r._40(12,null,["",""])),r._33(13,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"]))],null,function(e,n){var t=n.component;e(n,8,0,r._41(n,8,0,r._29(n,9).transform("core.settings.synchronization")));e(n,12,0,r._41(n,12,0,r._29(n,14).transform("addon.mod_quiz.confirmcontinueoffline",e(n,13,0,t.quiz.syncTimeReadable))))})}function View_AddonModQuizAccessPasswordComponent_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(11,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._40(12,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._16(16,0,null,null,20,"ion-item",[["class","item item-block"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,n,t){var o=!0;if("submit"===n){o=!1!==r._29(e,17).onSubmit(t)&&o}if("reset"===n){o=!1!==r._29(e,17).onReset()&&o}return o},De.b,De.a)),r._15(17,540672,null,0,Re.h,[[8,null],[8,null]],{form:[0,"form"]},null),r._35(2048,null,Re.b,null,[Re.h]),r._15(19,16384,null,0,Re.o,[Re.b],null,null),r._15(20,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(24,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(26,0,null,3,9,"core-show-password",[["item-content",""]],null,null,null,Mr.b,Mr.a)),r._15(27,4308992,null,0,wr.a,[r.p,ue.a,S.a,on.a],{name:[0,"name"]},null),(e()(),r._40(-1,0,["\n        "])),(e()(),r._16(29,0,null,0,5,"ion-input",[["id","addon-mod_quiz-accessrule-password-input"],["name","quizpassword"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(30,671744,null,0,Re.f,[[3,Re.b],[8,null],[8,null],[8,null]],{name:[0,"name"]},null),r._35(2048,null,Re.m,null,[Re.f]),r._15(32,16384,null,0,Re.n,[Re.m],null,null),r._15(33,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{type:[0,"type"],clearOnEdit:[1,"clearOnEdit"],placeholder:[2,"placeholder"]},null),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,0,["\n    "])),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,17,0,n.component.form);e(n,27,0,"quizpassword");e(n,30,0,"quizpassword");e(n,33,0,"password",!1,r._19(1,"",r._41(n,33,2,r._29(n,34).transform("addon.mod_quiz.quizpassword")),""))},function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,9).transform("addon.mod_quiz.quizpassword")));e(n,12,0,r._41(n,12,0,r._29(n,13).transform("addon.mod_quiz.requirepasswordmessage")));e(n,16,0,r._29(n,19).ngClassUntouched,r._29(n,19).ngClassTouched,r._29(n,19).ngClassPristine,r._29(n,19).ngClassDirty,r._29(n,19).ngClassValid,r._29(n,19).ngClassInvalid,r._29(n,19).ngClassPending);e(n,29,0,r._29(n,32).ngClassUntouched,r._29(n,32).ngClassTouched,r._29(n,32).ngClassPristine,r._29(n,32).ngClassDirty,r._29(n,32).ngClassValid,r._29(n,32).ngClassInvalid,r._29(n,32).ngClassPending)})}function View_AddonModQuizAccessTimeLimitComponent_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(7,0,null,2,2,"p",[["class","item-heading"]],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n    "])),(e()(),r._16(11,0,null,2,3,"p",[],null,null,null,null,null)),(e()(),r._40(12,null,["",""])),r._33(13,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n"])),(e()(),r._40(-1,null,["\n"]))],null,function(e,n){var t=n.component;e(n,8,0,r._41(n,8,0,r._29(n,9).transform("addon.mod_quiz.confirmstartheader")));e(n,12,0,r._41(n,12,0,r._29(n,14).transform("addon.mod_quiz.confirmstart",e(n,13,0,t.quiz.readableTimeLimit))))})}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),r._15(1,16384,[[7,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.value)},function(e,n){e(n,2,0,n.context.$implicit.label)})}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[["item-content",""]],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.fieldErrors["grade_"+n.parent.parent.parent.context.index])},null)}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,28,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,1,5,"ion-label",[["stacked",""]],null,null,null,Ne.b,Ne.a)),r._15(8,16384,[[4,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),r._15(9,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(10,0,["",""])),r._33(11,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(14,0,null,3,10,"ion-select",[["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0,i=e.component;if("click"===n){o=!1!==r._29(e,15)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,15)._keyup()&&o}if("ngModelChange"===n){o=!1!==(i.selectedValues[e.parent.parent.context.index].grade=t)&&o}return o},cn.b,cn.a)),r._15(15,1228800,null,1,pn.a,[fn.a,Fe.a,X.a,r.p,r.K,[2,xe.a],hn.a],{interface:[0,"interface"]},null),r._37(603979776,7,{options:1}),r._35(1024,null,Re.l,function(e){return[e]},[pn.a]),r._15(18,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{model:[0,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(20,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_4)),r._15(23,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,3,1,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_5)),r._15(27,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,9,0,!0);e(n,15,0,"action-sheet");e(n,18,0,t.selectedValues[n.parent.parent.context.index].grade);e(n,23,0,n.parent.parent.context.$implicit.grades);e(n,27,0,t.fieldErrors["grade_"+n.parent.parent.context.index])},function(e,n){e(n,10,0,r._41(n,10,0,r._29(n,12).transform("addon.mod_workshop_assessment_accumulative.dimensiongradefor",e(n,11,0,n.parent.parent.context.$implicit.dimtitle))));e(n,14,0,r._29(n,15)._disabled,r._29(n,20).ngClassUntouched,r._29(n,20).ngClassTouched,r._29(n,20).ngClassPristine,r._29(n,20).ngClassDirty,r._29(n,20).ngClassValid,r._29(n,20).ngClassInvalid,r._29(n,20).ngClassPending)})}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_8(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),r._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.parent.context.$implicit.label)})}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_7(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n                "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_8)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "]))],function(e,n){e(n,3,0,n.context.$implicit.value===n.component.selectedValues[n.parent.parent.parent.context.index].grade)},null)}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_6(e){return r._42(0,[(e()(),r._16(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,8,{contentLabel:0}),r._37(603979776,9,{_buttons:1}),r._37(603979776,10,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._33(9,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,2,1,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_7)),r._15(13,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){e(n,13,0,n.parent.parent.context.$implicit.grades)},function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,10).transform("addon.mod_workshop_assessment_accumulative.dimensiongradefor",e(n,9,0,n.parent.parent.context.$implicit.dimtitle))))})}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_9(e){return r._42(0,[(e()(),r._16(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,11,{contentLabel:0}),r._37(603979776,12,{_buttons:1}),r._37(603979776,13,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,1,4,"ion-label",[["stacked",""]],null,null,null,null,null)),r._15(8,16384,[[11,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),r._40(9,null,["",""])),r._33(10,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(13,0,null,3,5,"ion-textarea",[["aria-multiline","true"],["core-auto-rows",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"change"]],function(e,n,t){var o=!0,i=e.component;if("input"===n){o=!1!==r._29(e,18).onInput()&&o}if("change"===n){o=!1!==r._29(e,18).onChange()&&o}if("ngModelChange"===n){o=!1!==(i.selectedValues[e.parent.parent.context.index].peercomment=t)&&o}return o},vn.b,vn.a)),r._15(14,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(16,16384,null,0,Re.n,[Re.m],null,null),r._15(17,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],null,{input:"input"}),r._15(18,4210688,null,0,Nr.a,[r.p],null,null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){e(n,14,0,n.component.selectedValues[n.parent.parent.context.index].peercomment)},function(e,n){e(n,9,0,r._41(n,9,0,r._29(n,11).transform("addon.mod_workshop_assessment_accumulative.dimensioncommentfor",e(n,10,0,n.parent.parent.context.$implicit.dimtitle))));e(n,13,0,r._29(n,16).ngClassUntouched,r._29(n,16).ngClassTouched,r._29(n,16).ngClassPristine,r._29(n,16).ngClassDirty,r._29(n,16).ngClassValid,r._29(n,16).ngClassInvalid,r._29(n,16).ngClassPending)})}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_10(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,14,{contentLabel:0}),r._37(603979776,15,{_buttons:1}),r._37(603979776,16,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._33(9,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(14,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,14,0,t.selectedValues[n.parent.parent.context.index].peercomment,"module",t.moduleId,t.courseId)},function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,10).transform("addon.mod_workshop_assessment_accumulative.dimensioncommentfor",e(n,9,0,n.parent.parent.context.$implicit.dimtitle))))})}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,28,"ion-card",[],null,null,null,null,null)),r._15(1,16384,null,0,Tt.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(11,null,["",""])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(13,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(14,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_3)),r._15(18,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_6)),r._15(21,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_9)),r._15(24,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_10)),r._15(27,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,14,0,n.parent.context.$implicit.description,"module",t.moduleId,t.courseId);e(n,18,0,t.edit&&n.parent.context.$implicit.grades);e(n,21,0,!t.edit&&n.parent.context.$implicit.grades);e(n,24,0,t.edit);e(n,27,0,!t.edit)},function(e,n){e(n,11,0,n.parent.context.$implicit.dimtitle)})}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_2)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.context.index<n.component.assessment.form.dimenssionscount)},null)}function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_1)),r._15(1,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.assessment.form.fields)},null)}function View_AddonModWorkshopAssessmentStrategyCommentsComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[["item-content",""]],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.fieldErrors["peercomment_"+n.parent.parent.parent.context.index])},null)}function View_AddonModWorkshopAssessmentStrategyCommentsComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,1,5,"ion-label",[["stacked",""]],null,null,null,Ne.b,Ne.a)),r._15(8,16384,[[4,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),r._15(9,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(10,0,["",""])),r._33(11,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(14,0,null,3,5,"ion-textarea",[["aria-multiline","true"],["core-auto-rows",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"change"]],function(e,n,t){var o=!0,i=e.component;if("input"===n){o=!1!==r._29(e,19).onInput()&&o}if("change"===n){o=!1!==r._29(e,19).onChange()&&o}if("ngModelChange"===n){o=!1!==(i.selectedValues[e.parent.parent.context.index].peercomment=t)&&o}return o},vn.b,vn.a)),r._15(15,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(17,16384,null,0,Re.n,[Re.m],null,null),r._15(18,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],null,{input:"input"}),r._15(19,4210688,null,0,Nr.a,[r.p],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,3,1,null,View_AddonModWorkshopAssessmentStrategyCommentsComponent_4)),r._15(22,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,9,0,!0);e(n,15,0,t.selectedValues[n.parent.parent.context.index].peercomment);e(n,22,0,t.fieldErrors["peercomment_"+n.parent.parent.context.index])},function(e,n){e(n,10,0,r._41(n,10,0,r._29(n,12).transform("addon.mod_workshop_assessment_comments.dimensioncommentfor",e(n,11,0,n.parent.parent.context.$implicit.dimtitle))));e(n,14,0,r._29(n,17).ngClassUntouched,r._29(n,17).ngClassTouched,r._29(n,17).ngClassPristine,r._29(n,17).ngClassDirty,r._29(n,17).ngClassValid,r._29(n,17).ngClassInvalid,r._29(n,17).ngClassPending)})}function View_AddonModWorkshopAssessmentStrategyCommentsComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,7,{contentLabel:0}),r._37(603979776,8,{_buttons:1}),r._37(603979776,9,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._33(9,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(14,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,14,0,t.selectedValues[n.parent.parent.context.index].peercomment,"module",t.moduleId,t.courseId)},function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,10).transform("addon.mod_workshop_assessment_comments.dimensioncommentfor",e(n,9,0,n.parent.parent.context.$implicit.dimtitle))))})}function View_AddonModWorkshopAssessmentStrategyCommentsComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,22,"ion-card",[],null,null,null,null,null)),r._15(1,16384,null,0,Tt.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(11,null,["",""])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(13,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(14,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyCommentsComponent_3)),r._15(18,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyCommentsComponent_5)),r._15(21,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,14,0,n.parent.context.$implicit.description,"module",t.moduleId,t.courseId);e(n,18,0,t.edit);e(n,21,0,!t.edit)},function(e,n){e(n,11,0,n.parent.context.$implicit.dimtitle)})}function View_AddonModWorkshopAssessmentStrategyCommentsComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyCommentsComponent_2)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.context.index<n.component.assessment.form.dimenssionscount)},null)}function View_AddonModWorkshopAssessmentStrategyCommentsComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyCommentsComponent_1)),r._15(1,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.assessment.form.fields)},null)}function View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[["item-content",""]],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.fieldErrors["grade_"+n.parent.parent.context.index])},null)}function View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,19,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,14,{contentLabel:0}),r._37(603979776,15,{_buttons:1}),r._37(603979776,16,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,1,4,"ion-label",[["stacked",""]],null,null,null,null,null)),r._15(8,16384,[[14,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),r._40(9,null,["",""])),r._33(10,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(13,0,null,3,5,"ion-textarea",[["aria-multiline","true"],["core-auto-rows",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"change"]],function(e,n,t){var o=!0,i=e.component;if("input"===n){o=!1!==r._29(e,18).onInput()&&o}if("change"===n){o=!1!==r._29(e,18).onChange()&&o}if("ngModelChange"===n){o=!1!==(i.selectedValues[e.parent.parent.context.index].peercomment=t)&&o}return o},vn.b,vn.a)),r._15(14,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[8,null]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(16,16384,null,0,Re.n,[Re.m],null,null),r._15(17,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],null,{input:"input"}),r._15(18,4210688,null,0,Nr.a,[r.p],null,null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){e(n,14,0,"peercomment_"+n.parent.parent.context.index,n.component.selectedValues[n.parent.parent.context.index].peercomment)},function(e,n){e(n,9,0,r._41(n,9,0,r._29(n,11).transform("addon.mod_workshop_assessment_numerrors.dimensioncommentfor",e(n,10,0,n.parent.parent.context.$implicit.dimtitle))));e(n,13,0,r._29(n,16).ngClassUntouched,r._29(n,16).ngClassTouched,r._29(n,16).ngClassPristine,r._29(n,16).ngClassDirty,r._29(n,16).ngClassValid,r._29(n,16).ngClassInvalid,r._29(n,16).ngClassPending)})}function View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,17,{contentLabel:0}),r._37(603979776,18,{_buttons:1}),r._37(603979776,19,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,2,3,"h2",[],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._33(9,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(12,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(13,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(14,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,14,0,t.selectedValues[n.parent.parent.context.index].peercomment,"module",t.moduleId,t.courseId)},function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,10).transform("addon.mod_workshop_assessment_numerrors.dimensioncommentfor",e(n,9,0,n.parent.parent.context.$implicit.dimtitle))))})}function View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,82,"ion-card",[],null,null,null,null,null)),r._15(1,16384,null,0,Tt.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(10,0,null,2,1,"h2",[],null,null,null,null,null)),(e()(),r._40(11,null,["",""])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(13,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(14,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(17,0,null,null,58,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.selectedValues[e.parent.context.index].grade=t)&&o}return o},null,null)),r._15(18,1064960,null,1,jr.a,[r.K,r.p,r.i],null,null),r._37(335544320,4,{_header:0}),r._35(1024,null,Re.l,function(e){return[e]},[jr.a]),r._15(21,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(23,16384,null,0,Re.n,[Re.m],null,null),r._15(24,16384,null,0,Qr.a,[X.a,r.p,r.K,on.a,zr.l,yn.a],null,null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(26,0,null,null,16,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(27,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,5,{contentLabel:0}),r._37(603979776,6,{_buttons:1}),r._37(603979776,7,{_icons:1}),r._15(31,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n                "])),(e()(),r._16(33,0,null,1,5,"ion-label",[["stacked",""]],null,null,null,Ne.b,Ne.a)),r._15(34,16384,[[5,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),r._15(35,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(36,0,["",""])),r._33(37,{$a:0}),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n                "])),(e()(),r._11(16777216,null,3,1,null,View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_3)),r._15(41,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(44,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(45,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,8,{contentLabel:0}),r._37(603979776,9,{_buttons:1}),r._37(603979776,10,{_icons:1}),r._15(49,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n                "])),(e()(),r._16(51,0,null,1,3,"ion-label",[],null,null,null,null,null)),r._15(52,16384,[[8,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._16(53,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(54,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),r._40(-1,2,["\n                "])),(e()(),r._16(56,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,57)._click(t)&&o}return o},$r.b,$r.a)),r._15(57,245760,null,0,Yr.a,[Fe.a,X.a,r.p,r.K,[2,xe.a],[2,jr.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(60,0,null,null,14,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(61,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,11,{contentLabel:0}),r._37(603979776,12,{_buttons:1}),r._37(603979776,13,{_icons:1}),r._15(65,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n                "])),(e()(),r._16(67,0,null,1,3,"ion-label",[],null,null,null,null,null)),r._15(68,16384,[[11,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._16(69,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(70,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],filter:[1,"filter"]},null),(e()(),r._40(-1,2,["\n                "])),(e()(),r._16(72,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,73)._click(t)&&o}return o},$r.b,$r.a)),r._15(73,245760,null,0,Yr.a,[Fe.a,X.a,r.p,r.K,[2,xe.a],[2,jr.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_4)),r._15(78,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_5)),r._15(81,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,14,0,n.parent.context.$implicit.description,"module",t.moduleId,t.courseId);e(n,21,0,"grade_"+n.parent.context.index,t.selectedValues[n.parent.context.index].grade);e(n,35,0,t.edit);e(n,41,0,t.edit&&t.fieldErrors["grade_"+n.parent.context.index]);e(n,54,0,n.parent.context.$implicit.grade0,!1);e(n,57,0,-1,!t.edit);e(n,70,0,n.parent.context.$implicit.grade1,!1);e(n,73,0,1,!t.edit);e(n,78,0,t.edit);e(n,81,0,!t.edit)},function(e,n){e(n,11,0,n.parent.context.$implicit.dimtitle);e(n,17,0,r._29(n,23).ngClassUntouched,r._29(n,23).ngClassTouched,r._29(n,23).ngClassPristine,r._29(n,23).ngClassDirty,r._29(n,23).ngClassValid,r._29(n,23).ngClassInvalid,r._29(n,23).ngClassPending);e(n,36,0,r._41(n,36,0,r._29(n,38).transform("addon.mod_workshop.yourassessmentfor",e(n,37,0,n.parent.context.$implicit.dimtitle))));e(n,56,0,r._29(n,57)._disabled);e(n,72,0,r._29(n,73)._disabled)})}function View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_2)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.context.index<n.component.assessment.form.dimenssionscount)},null)}function View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_1)),r._15(1,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.assessment.form.fields)},null)}function View_AddonModWorkshopAssessmentStrategyRubricComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-input-errors",[],null,null,null,Ve.b,Ve.a)),r._15(1,638976,null,0,We.a,[Oe.a],{errorText:[0,"errorText"]},null)],function(e,n){e(n,1,0,n.component.fieldErrors["chosenlevelid_"+n.parent.parent.context.index])},null)}function View_AddonModWorkshopAssessmentStrategyRubricComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,5,{contentLabel:0}),r._37(603979776,6,{_buttons:1}),r._37(603979776,7,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n                "])),(e()(),r._16(7,0,null,1,4,"ion-label",[],null,null,null,null,null)),r._15(8,16384,[[5,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._16(9,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),r._16(10,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(11,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n                "])),(e()(),r._16(13,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,14)._click(t)&&o}return o},$r.b,$r.a)),r._15(14,245760,null,0,Yr.a,[Fe.a,X.a,r.p,r.K,[2,xe.a],[2,jr.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),r._40(-1,2,["\n            "]))],function(e,n){var t=n.component;e(n,11,0,n.context.$implicit.definition,"module",t.moduleId,t.courseId);e(n,14,0,n.context.$implicit.levelid,!t.edit)},function(e,n){e(n,13,0,r._29(n,14)._disabled)})}function View_AddonModWorkshopAssessmentStrategyRubricComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,33,"ion-card",[],null,null,null,null,null)),r._15(1,16384,null,0,Tt.a,[X.a,r.p,r.K],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(3,0,null,null,16,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(10,0,null,2,2,"h2",[],null,null,null,Ne.b,Ne.a)),r._15(11,4308992,null,0,Be.a,[r.p,Oe.a,fe.a,ue.a],{coreMarkRequired:[0,"coreMarkRequired"]},null),(e()(),r._40(12,0,["",""])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(14,16777216,null,2,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),r._15(15,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,2,1,null,View_AddonModWorkshopAssessmentStrategyRubricComponent_3)),r._15(18,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(21,0,null,null,11,"ion-list",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.selectedValues[e.parent.context.index].chosenlevelid=t)&&o}return o},null,null)),r._15(22,1064960,null,1,jr.a,[r.K,r.p,r.i],null,null),r._37(335544320,4,{_header:0}),r._35(1024,null,Re.l,function(e){return[e]},[jr.a]),r._15(25,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(27,16384,null,0,Re.n,[Re.m],null,null),r._15(28,16384,null,0,Qr.a,[X.a,r.p,r.K,on.a,zr.l,yn.a],null,null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyRubricComponent_4)),r._15(31,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,11,0,t.edit);e(n,15,0,n.parent.context.$implicit.description,"module",t.moduleId,t.courseId);e(n,18,0,t.edit&&t.fieldErrors["chosenlevelid_"+n.parent.context.index]);e(n,25,0,"chosenlevelid_"+n.parent.context.index,t.selectedValues[n.parent.context.index].chosenlevelid);e(n,31,0,n.parent.context.$implicit.fields)},function(e,n){e(n,12,0,n.parent.context.$implicit.dimtitle);e(n,21,0,r._29(n,27).ngClassUntouched,r._29(n,27).ngClassTouched,r._29(n,27).ngClassPristine,r._29(n,27).ngClassDirty,r._29(n,27).ngClassValid,r._29(n,27).ngClassInvalid,r._29(n,27).ngClassPending)})}function View_AddonModWorkshopAssessmentStrategyRubricComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyRubricComponent_2)),r._15(3,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,3,0,n.context.index<n.component.assessment.form.dimenssionscount)},null)}function View_AddonModWorkshopAssessmentStrategyRubricComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonModWorkshopAssessmentStrategyRubricComponent_1)),r._15(1,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.assessment.form.fields)},null)}function View_AddonQbehaviourDeferredCBMComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,5,{contentLabel:0}),r._37(603979776,6,{_buttons:1}),r._37(603979776,7,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,1,2,"ion-label",[],null,null,null,null,null)),r._15(8,16384,[[5,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._40(9,null,["",""])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(11,0,null,4,1,"ion-radio",[],[[8,"id",0],[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,12)._click(t)&&o}return o},$r.b,$r.a)),r._15(12,245760,null,0,Yr.a,[Fe.a,X.a,r.p,r.K,[2,xe.a],[2,jr.a]],{value:[0,"value"],disabled:[1,"disabled"]},null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){e(n,12,0,n.context.$implicit.value,n.context.$implicit.disabled)},function(e,n){e(n,9,0,n.context.$implicit.text);e(n,11,0,r._19(1,"",n.context.$implicit.id,""),r._29(n,12)._disabled)})}function View_AddonQbehaviourDeferredCBMComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,33,"div",[],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,10,"ion-item",[["class","addon-qbehaviour-deferredcbm-certainty-title item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(3,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(7,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._40(10,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(14,0,null,null,10,"div",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.question.behaviourCertaintySelected=t)&&o}return o},null,null)),r._15(15,1064960,null,1,jr.a,[r.K,r.p,r.i],null,null),r._37(335544320,4,{_header:0}),r._35(1024,null,Re.l,function(e){return[e]},[jr.a]),r._15(18,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(20,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQbehaviourDeferredCBMComponent_2)),r._15(23,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(27,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var o=!0;if("input"===n){o=!1!==r._29(e,28)._handleInput(t.target.value)&&o}if("blur"===n){o=!1!==r._29(e,28).onTouched()&&o}if("compositionstart"===n){o=!1!==r._29(e,28)._compositionStart()&&o}if("compositionend"===n){o=!1!==r._29(e,28)._compositionEnd(t.target.value)&&o}return o},null,null)),r._15(28,16384,null,0,Re.c,[r.L,r.p,[2,Re.a]],null,null),r._35(1024,null,Re.l,function(e){return[e]},[Re.c]),r._15(30,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{model:[0,"model"]},null),r._35(2048,null,Re.m,null,[Re.q]),r._15(32,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,18,0,t.question.behaviourCertaintyOptions[0].name,t.question.behaviourCertaintySelected);e(n,23,0,t.question.behaviourCertaintyOptions);e(n,30,0,t.question.behaviourCertaintySelected)},function(e,n){var t=n.component;e(n,10,0,r._41(n,10,0,r._29(n,11).transform("core.question.certainty")));e(n,14,0,r._29(n,20).ngClassUntouched,r._29(n,20).ngClassTouched,r._29(n,20).ngClassPristine,r._29(n,20).ngClassDirty,r._29(n,20).ngClassValid,r._29(n,20).ngClassInvalid,r._29(n,20).ngClassPending);e(n,27,0,t.question.behaviourCertaintyOptions[0].name,r._29(n,32).ngClassUntouched,r._29(n,32).ngClassTouched,r._29(n,32).ngClassPristine,r._29(n,32).ngClassDirty,r._29(n,32).ngClassValid,r._29(n,32).ngClassInvalid,r._29(n,32).ngClassPending)})}function View_AddonQbehaviourDeferredCBMComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQbehaviourDeferredCBMComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.behaviourCertaintyOptions&&t.question.behaviourCertaintyOptions.length)},null)}function View_AddonQbehaviourInformationItemComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,0,"input",[["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,r._19(1,"",t.question.behaviourSeenInput.name,""),r._19(1,"",t.question.behaviourSeenInput.value,""))})}function View_AddonQbehaviourInformationItemComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQbehaviourInformationItemComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.question.behaviourSeenInput)},null)}function View_AddonQtypeCalculatedComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function View_AddonQtypeCalculatedComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_3)),r._15(3,540672,null,0,te.r,[r.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,r._29(n.parent.parent,7))},null)}function View_AddonQtypeCalculatedComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function View_AddonQtypeCalculatedComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_5)),r._15(3,540672,null,0,te.r,[r.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),r._40(-1,null,["\n                "]))],function(e,n){e(n,3,0,r._29(n.parent.parent,4))},null)}function View_AddonQtypeCalculatedComponent_7(e){return r._42(0,[(e()(),r._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function View_AddonQtypeCalculatedComponent_6(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_7)),r._15(3,540672,null,0,te.r,[r.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),r._40(-1,null,["\n                "]))],function(e,n){e(n,3,0,r._29(n.parent.parent,4))},null)}function View_AddonQtypeCalculatedComponent_8(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-icon",[["class","core-correct-icon"],["item-content",""],["item-end",""]],null,null,null,J.b,J.a)),r._15(1,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"],color:[1,"color"]},null),r._31(2,1)],function(e,n){var t=n.component;e(n,1,0,t.question.input.correctIcon,e(n,2,0,t.question.input.correctIconColor))},null)}function View_AddonQtypeCalculatedComponent_10(e){return r._42(0,[(e()(),r._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function View_AddonQtypeCalculatedComponent_9(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_10)),r._15(3,540672,null,0,te.r,[r.W],{ngTemplateOutlet:[0,"ngTemplateOutlet"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,r._29(n.parent.parent,7))},null)}function View_AddonQtypeCalculatedComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,65,"section",[["class","addon-qtype-calculated-container"],["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(3,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(7,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(10,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(11,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_2)),r._15(16,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._16(18,0,null,null,42,"ion-item",[["class","grid item item-block"],["ion-grid",""],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(19,278528,null,0,te.i,[r.v,r.w,r.p,r.L],{ngClass:[0,"ngClass"]},null),r._15(20,16384,null,0,rt.a,[],null,null),r._15(21,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(25,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(27,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),r._15(28,16384,[[4,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),r._40(29,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(32,0,null,3,27,"ion-grid",[["class","grid"],["item-content",""],["no-padding",""]],null,null,null,null,null)),r._15(33,16384,null,0,rt.a,[],null,null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(35,0,null,null,20,"ion-row",[["class","row"]],null,null,null,null,null)),r._15(36,16384,null,0,it.a,[],null,null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._40(-1,null,["\n                "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_4)),r._15(40,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n                "])),(e()(),r._40(-1,null,["\n                "])),(e()(),r._16(43,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),r._15(44,16384,null,0,$n.a,[],null,null),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._16(46,0,null,null,3,"ion-input",[["autocorrect","off"],["padding-left",""],["type","text"]],[[1,"name",0]],null,null,vn.b,vn.a)),r._15(47,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{value:[0,"value"],disabled:[1,"disabled"],type:[2,"type"],autocorrect:[3,"autocorrect"],placeholder:[4,"placeholder"]},null),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._40(-1,null,["\n                "])),(e()(),r._40(-1,null,["\n\n                "])),(e()(),r._40(-1,null,["\n                "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_6)),r._15(54,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_8)),r._15(58,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_9)),r._15(64,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,16,0,t.question.options&&t.question.options.length&&t.question.optionsFirst);e(n,19,0,r._19(1,"core-",t.question.input.correctIconColor,"-item"));e(n,40,0,t.question.select&&t.question.selectFirst);e(n,47,0,t.question.input.value,t.question.input.readOnly,"text","off",t.question.input.readOnly?"":r._41(n,47,4,r._29(n,48).transform("core.question.answer")));e(n,54,0,t.question.select&&!t.question.selectFirst);e(n,58,0,t.question.input.correctIcon);e(n,64,0,t.question.options&&t.question.options.length&&!t.question.optionsFirst)},function(e,n){var t=n.component;e(n,29,0,r._41(n,29,0,r._29(n,30).transform("addon.mod_quiz.answercolon")));e(n,46,0,t.question.input.name)})}function View_AddonQtypeCalculatedComponent_12(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"label",[["class","accesshide"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),r._40(1,null,["",""]))],null,function(e,n){var t=n.component;e(n,0,0,r._19(1,"",t.question.select.id,""));e(n,1,0,t.question.select.accessibilityLabel)})}function View_AddonQtypeCalculatedComponent_13(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),r._15(1,16384,[[7,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.value)},function(e,n){e(n,2,0,n.context.$implicit.label)})}function View_AddonQtypeCalculatedComponent_11(e){return r._42(0,[(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(1,0,null,null,25,"ion-col",[["class","col"]],null,null,null,null,null)),r._15(2,16384,null,0,$n.a,[],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_12)),r._15(5,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(7,0,null,null,10,"ion-select",[["interface","action-sheet"]],[[8,"id",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0,i=e.component;if("click"===n){o=!1!==r._29(e,8)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,8)._keyup()&&o}if("ngModelChange"===n){o=!1!==(i.question.select.selected=t)&&o}return o},cn.b,cn.a)),r._15(8,1228800,null,1,pn.a,[fn.a,Fe.a,X.a,r.p,r.K,[2,xe.a],hn.a],{disabled:[0,"disabled"],interface:[1,"interface"]},null),r._37(603979776,7,{options:1}),r._35(1024,null,Re.l,function(e){return[e]},[pn.a]),r._15(11,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(13,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_13)),r._15(16,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,null,["\n\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(20,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var o=!0;if("input"===n){o=!1!==r._29(e,21)._handleInput(t.target.value)&&o}if("blur"===n){o=!1!==r._29(e,21).onTouched()&&o}if("compositionstart"===n){o=!1!==r._29(e,21)._compositionStart()&&o}if("compositionend"===n){o=!1!==r._29(e,21)._compositionEnd(t.target.value)&&o}return o},null,null)),r._15(21,16384,null,0,Re.c,[r.L,r.p,[2,Re.a]],null,null),r._35(1024,null,Re.l,function(e){return[e]},[Re.c]),r._15(23,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{model:[0,"model"]},null),r._35(2048,null,Re.m,null,[Re.q]),r._15(25,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.question.select.accessibilityLabel);e(n,8,0,t.question.select.disabled,"action-sheet");e(n,11,0,t.question.select.name,t.question.select.disabled,t.question.select.selected);e(n,16,0,t.question.select.options);e(n,23,0,t.question.select.selected)},function(e,n){var t=n.component;e(n,7,0,r._19(1,"",t.question.select.id,""),r._29(n,8)._disabled,r._29(n,13).ngClassUntouched,r._29(n,13).ngClassTouched,r._29(n,13).ngClassPristine,r._29(n,13).ngClassDirty,r._29(n,13).ngClassValid,r._29(n,13).ngClassInvalid,r._29(n,13).ngClassPending);e(n,20,0,t.question.select.name,r._29(n,25).ngClassUntouched,r._29(n,25).ngClassTouched,r._29(n,25).ngClassPristine,r._29(n,25).ngClassDirty,r._29(n,25).ngClassValid,r._29(n,25).ngClassInvalid,r._29(n,25).ngClassPending)})}function View_AddonQtypeCalculatedComponent_15(e){return r._42(0,[(e()(),r._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,9,{contentLabel:0}),r._37(603979776,10,{_buttons:1}),r._37(603979776,11,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,1,2,"ion-label",[],null,null,null,null,null)),r._15(8,16384,[[9,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._40(9,null,["",""])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(11,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,12)._click(t)&&o}return o},$r.b,$r.a)),r._15(12,245760,null,0,Yr.a,[Fe.a,X.a,r.p,r.K,[2,xe.a],[2,jr.a]],{color:[0,"color"],value:[1,"value"],disabled:[2,"disabled"]},null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,12,0,t.question.input.correctIconColor,n.context.$implicit.value,n.context.$implicit.disabled||t.question.input.readOnly)},function(e,n){e(n,9,0,n.context.$implicit.text);e(n,11,0,r._29(n,12)._disabled)})}function View_AddonQtypeCalculatedComponent_14(e){return r._42(0,[(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(1,0,null,null,18,"div",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.question.unit=t)&&o}return o},null,null)),r._15(2,1064960,null,1,jr.a,[r.K,r.p,r.i],null,null),r._37(335544320,8,{_header:0}),r._35(1024,null,Re.l,function(e){return[e]},[jr.a]),r._15(5,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(7,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_15)),r._15(10,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(13,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var o=!0;if("input"===n){o=!1!==r._29(e,14)._handleInput(t.target.value)&&o}if("blur"===n){o=!1!==r._29(e,14).onTouched()&&o}if("compositionstart"===n){o=!1!==r._29(e,14)._compositionStart()&&o}if("compositionend"===n){o=!1!==r._29(e,14)._compositionEnd(t.target.value)&&o}return o},null,null)),r._15(14,16384,null,0,Re.c,[r.L,r.p,[2,Re.a]],null,null),r._35(1024,null,Re.l,function(e){return[e]},[Re.c]),r._15(16,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{model:[0,"model"]},null),r._35(2048,null,Re.m,null,[Re.q]),r._15(18,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,5,0,t.question.optionsName,t.question.unit);e(n,10,0,t.question.options);e(n,16,0,t.question.unit)},function(e,n){var t=n.component;e(n,1,0,r._29(n,7).ngClassUntouched,r._29(n,7).ngClassTouched,r._29(n,7).ngClassPristine,r._29(n,7).ngClassDirty,r._29(n,7).ngClassValid,r._29(n,7).ngClassInvalid,r._29(n,7).ngClassPending);e(n,13,0,t.question.optionsName,r._29(n,18).ngClassUntouched,r._29(n,18).ngClassTouched,r._29(n,18).ngClassPristine,r._29(n,18).ngClassDirty,r._29(n,18).ngClassValid,r._29(n,18).ngClassInvalid,r._29(n,18).ngClassPending)})}function View_AddonQtypeCalculatedComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeCalculatedComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(0,[["selectUnits",2]],null,0,null,View_AddonQtypeCalculatedComponent_11)),(e()(),r._40(-1,null,["\n\n"])),(e()(),r._40(-1,null,["\n"])),(e()(),r._11(0,[["radioUnits",2]],null,0,null,View_AddonQtypeCalculatedComponent_14)),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function View_AddonQtypeDdImageOrTextComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"p",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._15(3,147456,[[3,4]],0,lo.a,[X.a,r.p,r.K],{name:[0,"name"]},null),(e()(),r._40(4,null,["\n            ","\n        "])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){e(n,2,0,r._29(n,3)._hidden);e(n,4,0,r._41(n,4,0,r._29(n,5).transform("core.question.howtodraganddrop")))})}function View_AddonQtypeDdImageOrTextComponent_3(e){return r._42(0,[(e()(),r._16(0,16777216,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var o=!0;if("afterRender"===n){o=!1!==e.component.ddAreaRendered()&&o}return o},null,null)),r._15(1,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],adaptImg:[3,"adaptImg"],filter:[4,"filter"]},{afterRender:"afterRender"}),(e()(),r._11(0,null,null,0))],function(e,n){var t=n.component;e(n,1,0,t.question.ddArea,t.component,t.componentId,!1,!1)},null)}function View_AddonQtypeDdImageOrTextComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,25,"section",[["class","addon-qtype-ddimageortext-container"],["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(3,0,null,null,1,"core-loading",[],null,null,null,Fn.b,Fn.a)),r._15(4,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._16(6,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(7,278528,null,0,te.i,[r.v,r.w,r.p,r.L],{ngClass:[0,"ngClass"]},null),r._33(8,{invisible:0}),r._15(9,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(13,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,2,1,null,View_AddonQtypeDdImageOrTextComponent_2)),r._15(16,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(18,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(19,16777216,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var o=!0;if("afterRender"===n){o=!1!==e.component.textRendered()&&o}return o},null,null)),r._15(20,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},{afterRender:"afterRender"}),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,2,1,null,View_AddonQtypeDdImageOrTextComponent_3)),r._15(23,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.question.loaded);e(n,7,0,e(n,8,0,!t.question.loaded));e(n,16,0,!t.question.readOnly);e(n,20,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,23,0,t.question.ddArea)},null)}function View_AddonQtypeDdImageOrTextComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeDdImageOrTextComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function View_AddonQtypeDdMarkerComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"p",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._15(3,147456,[[4,4]],0,lo.a,[X.a,r.p,r.K],{name:[0,"name"]},null),(e()(),r._40(4,null,["\n            ","\n        "])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){e(n,2,0,r._29(n,3)._hidden);e(n,4,0,r._41(n,4,0,r._29(n,5).transform("core.question.howtodraganddrop")))})}function View_AddonQtypeDdMarkerComponent_3(e){return r._42(0,[(e()(),r._16(0,16777216,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var o=!0;if("afterRender"===n){o=!1!==e.component.ddAreaRendered()&&o}return o},null,null)),r._15(1,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],adaptImg:[3,"adaptImg"],filter:[4,"filter"]},{afterRender:"afterRender"}),(e()(),r._11(0,null,null,0))],function(e,n){var t=n.component;e(n,1,0,t.question.ddArea,t.component,t.componentId,!1,!1)},null)}function View_AddonQtypeDdMarkerComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,25,"section",[["class","addon-qtype-ddmarker-container"],["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(3,0,null,null,1,"core-loading",[],null,null,null,Fn.b,Fn.a)),r._15(4,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._16(6,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(7,278528,null,0,te.i,[r.v,r.w,r.p,r.L],{ngClass:[0,"ngClass"]},null),r._33(8,{invisible:0}),r._15(9,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,2,{contentLabel:0}),r._37(603979776,3,{_buttons:1}),r._37(603979776,4,{_icons:1}),r._15(13,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,2,1,null,View_AddonQtypeDdMarkerComponent_2)),r._15(16,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(18,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(19,16777216,[[1,0],["questiontext",1]],null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var o=!0;if("afterRender"===n){o=!1!==e.component.textRendered()&&o}return o},null,null)),r._15(20,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},{afterRender:"afterRender"}),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,2,1,null,View_AddonQtypeDdMarkerComponent_3)),r._15(23,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.question.loaded);e(n,7,0,e(n,8,0,!t.question.loaded));e(n,16,0,!t.question.readOnly);e(n,20,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,23,0,t.question.ddArea)},null)}function View_AddonQtypeDdMarkerComponent_0(e){return r._42(0,[r._37(671088640,1,{questionTextEl:0}),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeDdMarkerComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.question.text||""===t.question.text)},null)}function View_AddonQtypeDdwtosComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,5,"p",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(2,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._15(3,147456,[[4,4]],0,lo.a,[X.a,r.p,r.K],{name:[0,"name"]},null),(e()(),r._40(4,null,["\n            ","\n        "])),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){e(n,3,0,"information-circle")},function(e,n){e(n,2,0,r._29(n,3)._hidden);e(n,4,0,r._41(n,4,0,r._29(n,5).transform("core.question.howtodraganddrop")))})}function View_AddonQtypeDdwtosComponent_3(e){return r._42(0,[(e()(),r._16(0,16777216,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var o=!0;if("afterRender"===n){o=!1!==e.component.answersRendered()&&o}return o},null,null)),r._15(1,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],filter:[3,"filter"]},{afterRender:"afterRender"}),(e()(),r._11(0,null,null,0))],function(e,n){var t=n.component;e(n,1,0,t.question.answers,t.component,t.componentId,!1)},null)}function View_AddonQtypeDdwtosComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,27,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(3,0,null,null,1,"core-loading",[],null,null,null,Fn.b,Fn.a)),r._15(4,638976,null,0,Ln.a,[Oe.a,r.p,_e.a,ue.a],{hideUntil:[0,"hideUntil"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._16(6,0,null,null,20,"ion-item",[["class","addon-qtype-ddwtos-container item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(7,278528,null,0,te.i,[r.v,r.w,r.p,r.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r._33(8,{invisible:0}),r._15(9,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,2,{contentLabel:0}),r._37(603979776,3,{_buttons:1}),r._37(603979776,4,{_icons:1}),r._15(13,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,2,1,null,View_AddonQtypeDdwtosComponent_2)),r._15(16,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(18,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(19,16777216,[[1,0],["questiontext",1]],null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var o=!0;if("afterRender"===n){o=!1!==e.component.textRendered()&&o}return o},null,null)),r._15(20,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},{afterRender:"afterRender"}),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,2,1,null,View_AddonQtypeDdwtosComponent_3)),r._15(23,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(25,0,null,2,0,"div",[["class","drags"]],null,null,null,null,null)),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.question.loaded);e(n,7,0,"addon-qtype-ddwtos-container",e(n,8,0,!t.question.loaded));e(n,16,0,!t.question.readOnly);e(n,20,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,23,0,t.question.answers)},null)}function View_AddonQtypeDdwtosComponent_0(e){return r._42(0,[r._37(671088640,1,{questionTextEl:0}),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeDdwtosComponent_1)),r._15(2,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,2,0,t.question.text||""===t.question.text)},null)}function View_AddonQtypeDescriptionComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,0,"input",[["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.question.seenInput.name,t.question.seenInput.value)})}function View_AddonQtypeDescriptionComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,17,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeDescriptionComponent_2)),r._15(4,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(6,0,null,null,10,"ion-item",[["class","item item-text-wrap item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(7,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(11,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(13,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(14,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(15,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,4,0,t.question.seenInput);e(n,15,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId)},null)}function View_AddonQtypeDescriptionComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeDescriptionComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function View_AddonQtypeEssayComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,0,"input",[["item-content",""],["type","hidden"]],[[8,"name",0],[8,"value",0]],null,null,null,null))],null,function(e,n){var t=n.component;e(n,0,0,t.question.formatInput.name,t.question.formatInput.value)})}function View_AddonQtypeEssayComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,7,"ion-textarea",[["aria-multiline","true"],["class","core-question-textarea"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,vn.b,vn.a)),r._15(1,278528,null,0,te.i,[r.v,r.w,r.p,r.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r._33(2,{"core-monospaced":0}),r._15(3,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},null),r._35(2048,null,Re.m,null,[Re.q]),r._15(5,16384,null,0,Re.n,[Re.m],null,null),r._15(6,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{placeholder:[0,"placeholder"]},null),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){var t=n.component;e(n,1,0,"core-question-textarea",e(n,2,0,t.question.isMonospaced));e(n,3,0,t.question.textarea.text);e(n,6,0,r._19(1,"",r._41(n,6,0,r._29(n,7).transform("core.question.answer")),""))},function(e,n){e(n,0,0,n.component.question.textarea.name,r._29(n,5).ngClassUntouched,r._29(n,5).ngClassTouched,r._29(n,5).ngClassPristine,r._29(n,5).ngClassDirty,r._29(n,5).ngClassValid,r._29(n,5).ngClassInvalid,r._29(n,5).ngClassPending)})}function View_AddonQtypeEssayComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-rich-text-editor",[["item-content",""]],null,null,null,be.c,be.b)),r._15(1,1228800,null,0,In.a,[S.a,ae.a,pe.a,me.a,[2,ln.a],r.p,_e.a,ue.a,on.a,Sn.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"],autoSave:[5,"autoSave"]},null),r._32(131072,Te.a,[Oe.a,r.i])],function(e,n){var t=n.component;e(n,1,0,r._19(1,"",r._41(n,1,0,r._29(n,2).transform("core.question.answer")),""),t.formControl,t.question.textarea.name,t.component,t.componentId,!1)},null)}function View_AddonQtypeEssayComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,3,1,null,View_AddonQtypeEssayComponent_3)),r._15(9,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,3,1,null,View_AddonQtypeEssayComponent_4)),r._15(13,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,3,1,null,View_AddonQtypeEssayComponent_5)),r._15(17,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,9,0,t.question.formatInput);e(n,13,0,t.question.isPlainText);e(n,17,0,!t.question.isPlainText)},null)}function View_AddonQtypeEssayComponent_6(e){return r._42(0,[(e()(),r._16(0,0,null,null,25,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(2,0,null,null,10,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(3,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,7,{contentLabel:0}),r._37(603979776,8,{_buttons:1}),r._37(603979776,9,{_icons:1}),r._15(7,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(9,0,null,2,2,"p",[["class","core-question-warning"]],null,null,null,null,null)),(e()(),r._40(10,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(14,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(15,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,10,{contentLabel:0}),r._37(603979776,11,{_buttons:1}),r._37(603979776,12,{_icons:1}),r._15(19,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(21,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(22,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(23,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,23,0,t.question.textarea.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId)},function(e,n){e(n,10,0,r._41(n,10,0,r._29(n,11).transform("core.question.errorinlinefilesnotsupported")))})}function View_AddonQtypeEssayComponent_7(e){return r._42(0,[(e()(),r._16(0,0,null,null,10,"ion-item",[["class","core-danger-item item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,13,{contentLabel:0}),r._37(603979776,14,{_buttons:1}),r._37(603979776,15,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,2,2,"p",[["class","core-question-warning"]],null,null,null,null,null)),(e()(),r._40(8,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n    "]))],null,function(e,n){e(n,8,0,r._41(n,8,0,r._29(n,9).transform("core.question.errorattachmentsnotsupported")))})}function View_AddonQtypeEssayComponent_8(e){return r._42(0,[(e()(),r._16(0,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,16,{contentLabel:0}),r._37(603979776,17,{_buttons:1}),r._37(603979776,18,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,2,4,"p",[],null,null,null,null,null)),(e()(),r._16(8,16777216,null,null,3,"core-format-text",[],null,null,null,null,null)),r._15(9,278528,null,0,te.i,[r.v,r.w,r.p,r.L],{ngClass:[0,"ngClass"]},null),r._33(10,{"core-monospaced":0}),r._15(11,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,9,0,e(n,10,0,t.question.isMonospaced));e(n,11,0,t.question.answer,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId)},null)}function View_AddonQtypeEssayComponent_10(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-file",[],null,null,null,ho.b,ho.a)),r._15(1,245760,null,0,mo.a,[pe.a,ue.a,S.a,me.a,ge.a,ye.a,Gt.a,_e.a,fe.a,ve.a,ae.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(e,n){var t=n.component;e(n,1,0,n.context.$implicit,t.component,t.componentId)},null)}function View_AddonQtypeEssayComponent_9(e){return r._42(0,[(e()(),r._16(0,0,null,null,12,"ion-item",[["class","item item-block"]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,19,{contentLabel:0}),r._37(603979776,20,{_buttons:1}),r._37(603979776,21,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,2,4,"div",[["no-lines",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n            "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeEssayComponent_10)),r._15(10,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,2,["\n    "]))],function(e,n){e(n,10,0,n.component.question.attachments)},null)}function View_AddonQtypeEssayComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,33,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(3,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(10,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(11,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(12,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeEssayComponent_2)),r._15(17,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeEssayComponent_6)),r._15(21,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeEssayComponent_7)),r._15(25,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeEssayComponent_8)),r._15(29,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeEssayComponent_9)),r._15(32,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,12,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,17,0,t.question.textarea&&!t.question.hasDraftFiles);e(n,21,0,t.question.textarea&&t.question.hasDraftFiles);e(n,25,0,t.question.allowsAttachments);e(n,29,0,!t.question.textarea&&(t.question.answer||!t.question.attachments.length&&!t.question.allowsAttachments));e(n,32,0,!t.question.textarea&&t.question.attachments&&t.question.attachments.length)},null)}function View_AddonQtypeEssayComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeEssayComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function View_AddonQtypeGapSelectComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,13,"section",[["class","addon-qtype-gapselect-container"],["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,10,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(3,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(7,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(9,0,null,2,2,"p",[],null,null,null,null,null)),(e()(),r._16(10,16777216,null,null,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var o=!0;if("afterRender"===n){o=!1!==e.component.questionRendered()&&o}return o},null,null)),r._15(11,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},{afterRender:"afterRender"}),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId)},null)}function View_AddonQtypeGapSelectComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeGapSelectComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function View_AddonQtypeMatchComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"label",[["class","accesshide"]],[[8,"htmlFor",0]],null,null,null,null)),(e()(),r._40(1,null,["",""]))],null,function(e,n){e(n,0,0,r._19(1,"",n.parent.context.$implicit.id,""));e(n,1,0,n.parent.context.$implicit.accessibilityLabel)})}function View_AddonQtypeMatchComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),r._15(1,16384,[[7,4]],0,dn.a,[r.p],{value:[0,"value"]},null),(e()(),r._40(2,null,["",""]))],function(e,n){e(n,1,0,n.context.$implicit.value)},function(e,n){e(n,2,0,n.context.$implicit.label)})}function View_AddonQtypeMatchComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","success"],["name","fa-check"]],null,null,null,J.b,J.a)),r._15(1,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,n){e(n,1,0,"fa-check","success")},null)}function View_AddonQtypeMatchComponent_6(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","danger"],["name","fa-remove"]],null,null,null,J.b,J.a)),r._15(1,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,n){e(n,1,0,"fa-remove","danger")},null)}function View_AddonQtypeMatchComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,55,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(7,0,null,3,47,"ion-grid",[["class","grid"],["item-content",""],["no-margin",""],["no-padding",""]],null,null,null,null,null)),r._15(8,16384,null,0,rt.a,[],null,null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(10,0,null,null,43,"ion-row",[["class","row"],["no-margin",""]],null,null,null,null,null)),r._15(11,16384,null,0,it.a,[],null,null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._16(13,0,null,null,6,"ion-col",[["class","col"]],null,null,null,null,null)),r._15(14,16384,null,0,$n.a,[],null,null),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._16(16,0,null,null,2,"p",[],null,null,null,null,null)),(e()(),r._16(17,16777216,null,null,1,"core-format-text",[],[[8,"id",0]],null,null,null,null)),r._15(18,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._40(-1,null,["\n                "])),(e()(),r._16(21,0,null,null,31,"ion-col",[["class","col"]],null,null,null,null,null)),r._15(22,16384,null,0,$n.a,[],null,null),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMatchComponent_3)),r._15(25,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._16(27,0,null,null,10,"ion-select",[["interface","action-sheet"]],[[8,"id",0],[1,"aria-labelledby",0],[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,28)._click(t)&&o}if("keyup.space"===n){o=!1!==r._29(e,28)._keyup()&&o}if("ngModelChange"===n){o=!1!==(e.context.$implicit.selected=t)&&o}return o},cn.b,cn.a)),r._15(28,1228800,null,1,pn.a,[fn.a,Fe.a,X.a,r.p,r.K,[2,xe.a],hn.a],{color:[0,"color"],disabled:[1,"disabled"],interface:[2,"interface"]},null),r._37(603979776,7,{options:1}),r._35(1024,null,Re.l,function(e){return[e]},[pn.a]),r._15(31,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],isDisabled:[1,"isDisabled"],model:[2,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(33,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n                        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMatchComponent_4)),r._15(36,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._40(-1,null,["\n\n                    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMatchComponent_5)),r._15(40,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMatchComponent_6)),r._15(43,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n                    "])),(e()(),r._40(-1,null,["\n                    "])),(e()(),r._16(46,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var o=!0;if("input"===n){o=!1!==r._29(e,47)._handleInput(t.target.value)&&o}if("blur"===n){o=!1!==r._29(e,47).onTouched()&&o}if("compositionstart"===n){o=!1!==r._29(e,47)._compositionStart()&&o}if("compositionend"===n){o=!1!==r._29(e,47)._compositionEnd(t.target.value)&&o}return o},null,null)),r._15(47,16384,null,0,Re.c,[r.L,r.p,[2,Re.a]],null,null),r._35(1024,null,Re.l,function(e){return[e]},[Re.c]),r._15(49,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{model:[0,"model"]},null),r._35(2048,null,Re.m,null,[Re.q]),r._15(51,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._40(-1,null,["\n            "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,2,["\n    "]))],function(e,n){var t=n.component;e(n,18,0,n.context.$implicit.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,25,0,n.context.$implicit.accessibilityLabel);e(n,28,0,(1===n.context.$implicit.isCorrect?"success":"")+(0===n.context.$implicit.isCorrect?"danger":""),n.context.$implicit.disabled,"action-sheet");e(n,31,0,n.context.$implicit.name,n.context.$implicit.disabled,n.context.$implicit.selected);e(n,36,0,n.context.$implicit.options);e(n,40,0,1===n.context.$implicit.isCorrect);e(n,43,0,0===n.context.$implicit.isCorrect);e(n,49,0,n.context.$implicit.selected)},function(e,n){e(n,17,0,r._19(1,"addon-qtype-match-question-",n.context.$implicit.id,""));e(n,27,0,r._19(1,"",n.context.$implicit.id,""),"addon-qtype-match-question-"+n.context.$implicit.id,r._29(n,28)._disabled,r._29(n,33).ngClassUntouched,r._29(n,33).ngClassTouched,r._29(n,33).ngClassPristine,r._29(n,33).ngClassDirty,r._29(n,33).ngClassValid,r._29(n,33).ngClassInvalid,r._29(n,33).ngClassPending);e(n,46,0,n.context.$implicit.name,r._29(n,51).ngClassUntouched,r._29(n,51).ngClassTouched,r._29(n,51).ngClassPristine,r._29(n,51).ngClassDirty,r._29(n,51).ngClassValid,r._29(n,51).ngClassInvalid,r._29(n,51).ngClassPending)})}function View_AddonQtypeMatchComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"section",[["class","addon-qtype-match-container"],["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(3,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(7,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(9,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),r._15(10,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMatchComponent_2)),r._15(14,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,10,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,14,0,t.question.rows)},null)}function View_AddonQtypeMatchComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMatchComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,1,0,n.component.question.loaded)},null)}function View_AddonQtypeMultiAnswerComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,12,"section",[["class","addon-qtype-multianswer-container"],["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,9,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(3,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(7,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(9,16777216,null,2,1,"core-format-text",[],null,[[null,"afterRender"]],function(e,n,t){var o=!0;if("afterRender"===n){o=!1!==e.component.questionRendered()&&o}return o},null,null)),r._15(10,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},{afterRender:"afterRender"}),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,10,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId)},null)}function View_AddonQtypeMultiAnswerComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMultiAnswerComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function View_AddonQtypeMultichoiceComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),r._40(1,null,["",""]))],null,function(e,n){e(n,1,0,n.component.question.prompt)})}function View_AddonQtypeMultichoiceComponent_5(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"div",[["class","specificfeedback"]],null,null,null,null,null)),(e()(),r._16(1,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(2,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,n){var t=n.component;e(n,2,0,n.parent.context.$implicit.feedback,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId)},null)}function View_AddonQtypeMultichoiceComponent_6(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","success"],["item-content",""],["name","fa-check"]],null,null,null,J.b,J.a)),r._15(1,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,n){e(n,1,0,"fa-check","success")},null)}function View_AddonQtypeMultichoiceComponent_7(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","danger"],["item-content",""],["name","fa-remove"]],null,null,null,J.b,J.a)),r._15(1,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,n){e(n,1,0,"fa-remove","danger")},null)}function View_AddonQtypeMultichoiceComponent_4(e){return r._42(0,[(e()(),r._16(0,0,null,null,37,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,1,8,"ion-label",[],null,null,null,null,null)),r._15(8,16384,[[4,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],{color:[0,"color"]},null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._16(10,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(11,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMultichoiceComponent_5)),r._15(14,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(17,0,null,4,5,"ion-checkbox",[["item-end",""]],[[1,"name",0],[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,18)._click(t)&&o}if("ngModelChange"===n){o=!1!==(e.context.$implicit.checked=t)&&o}return o},Ke.b,Ke.a)),r._15(18,1228800,null,0,qe.a,[X.a,Fe.a,[2,xe.a],r.p,r.K],{color:[0,"color"],disabled:[1,"disabled"]},null),r._35(1024,null,Re.l,function(e){return[e]},[qe.a]),r._15(20,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(22,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,3,1,null,View_AddonQtypeMultichoiceComponent_6)),r._15(25,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,3,1,null,View_AddonQtypeMultichoiceComponent_7)),r._15(28,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n\n            "])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(31,0,null,3,5,"input",[["item-content",""],["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var o=!0;if("input"===n){o=!1!==r._29(e,32)._handleInput(t.target.value)&&o}if("blur"===n){o=!1!==r._29(e,32).onTouched()&&o}if("compositionstart"===n){o=!1!==r._29(e,32)._compositionStart()&&o}if("compositionend"===n){o=!1!==r._29(e,32)._compositionEnd(t.target.value)&&o}return o},null,null)),r._15(32,16384,null,0,Re.c,[r.L,r.p,[2,Re.a]],null,null),r._35(1024,null,Re.l,function(e){return[e]},[Re.c]),r._15(34,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{model:[0,"model"]},null),r._35(2048,null,Re.m,null,[Re.q]),r._15(36,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,8,0,(1===n.context.$implicit.isCorrect?"success":"")+(0===n.context.$implicit.isCorrect?"danger":""));e(n,11,0,n.context.$implicit.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,14,0,n.context.$implicit.feedback);e(n,18,0,(1===n.context.$implicit.isCorrect?"success":"")+(0===n.context.$implicit.isCorrect?"danger":""),n.context.$implicit.disabled);e(n,20,0,n.context.$implicit.disabled,n.context.$implicit.checked);e(n,25,0,1===n.context.$implicit.isCorrect);e(n,28,0,0===n.context.$implicit.isCorrect);e(n,34,0,n.context.$implicit.checked)},function(e,n){e(n,17,0,n.context.$implicit.name,r._29(n,18)._disabled,r._29(n,22).ngClassUntouched,r._29(n,22).ngClassTouched,r._29(n,22).ngClassPristine,r._29(n,22).ngClassDirty,r._29(n,22).ngClassValid,r._29(n,22).ngClassInvalid,r._29(n,22).ngClassPending);e(n,31,0,n.context.$implicit.name,r._29(n,36).ngClassUntouched,r._29(n,36).ngClassTouched,r._29(n,36).ngClassPristine,r._29(n,36).ngClassDirty,r._29(n,36).ngClassValid,r._29(n,36).ngClassInvalid,r._29(n,36).ngClassPending)})}function View_AddonQtypeMultichoiceComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,4,null,null,null,null,null,null,null)),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMultichoiceComponent_4)),r._15(3,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){e(n,3,0,n.component.question.options)},null)}function View_AddonQtypeMultichoiceComponent_10(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"div",[["class","specificfeedback"]],null,null,null,null,null)),(e()(),r._16(1,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(2,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null)],function(e,n){var t=n.component;e(n,2,0,n.parent.context.$implicit.feedback,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId)},null)}function View_AddonQtypeMultichoiceComponent_11(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","success"],["item-content",""],["name","fa-check"]],null,null,null,J.b,J.a)),r._15(1,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,n){e(n,1,0,"fa-check","success")},null)}function View_AddonQtypeMultichoiceComponent_12(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-icon",[["class","core-correct-icon"],["color","danger"],["item-content",""],["name","fa-remove"]],null,null,null,J.b,J.a)),r._15(1,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"],color:[1,"color"]},null)],function(e,n){e(n,1,0,"fa-remove","danger")},null)}function View_AddonQtypeMultichoiceComponent_9(e){return r._42(0,[(e()(),r._16(0,0,null,null,25,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,8,{contentLabel:0}),r._37(603979776,9,{_buttons:1}),r._37(603979776,10,{_icons:1}),r._15(5,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(7,0,null,1,8,"ion-label",[],null,null,null,null,null)),r._15(8,16384,[[8,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,null],[8,null],[8,null]],null,null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._16(10,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),r._15(11,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,null,["\n                "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMultichoiceComponent_10)),r._15(14,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n            "])),(e()(),r._40(-1,2,["\n            "])),(e()(),r._16(17,0,null,4,1,"ion-radio",[],[[2,"radio-disabled",null]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==r._29(e,18)._click(t)&&o}return o},$r.b,$r.a)),r._15(18,245760,null,0,Yr.a,[Fe.a,X.a,r.p,r.K,[2,xe.a],[2,jr.a]],{color:[0,"color"],value:[1,"value"],disabled:[2,"disabled"]},null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,3,1,null,View_AddonQtypeMultichoiceComponent_11)),r._15(21,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n            "])),(e()(),r._11(16777216,null,3,1,null,View_AddonQtypeMultichoiceComponent_12)),r._15(24,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n        "]))],function(e,n){var t=n.component;e(n,11,0,n.context.$implicit.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,14,0,n.context.$implicit.feedback);e(n,18,0,(1===n.context.$implicit.isCorrect?"success":"")+(0===n.context.$implicit.isCorrect?"danger":""),n.context.$implicit.value,n.context.$implicit.disabled);e(n,21,0,1===n.context.$implicit.isCorrect);e(n,24,0,0===n.context.$implicit.isCorrect)},function(e,n){e(n,17,0,r._29(n,18)._disabled)})}function View_AddonQtypeMultichoiceComponent_13(e){return r._42(0,[(e()(),r._16(0,0,null,null,6,"div",[["padding-horizontal",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n            "])),(e()(),r._16(2,0,null,null,3,"button",[["color","light"],["full",""],["ion-button",""],["text-wrap",""],["type","reset"]],[[8,"disabled",0]],[[null,"click"]],function(e,n,t){var o=!0;if("click"===n){o=!1!==e.component.clear()&&o}return o},$.b,$.a)),r._15(3,1097728,null,0,Y.a,[[8,""],X.a,r.p,r.K],{color:[0,"color"],full:[1,"full"]},null),(e()(),r._40(4,0,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n        "]))],function(e,n){e(n,3,0,"light","")},function(e,n){e(n,2,0,!n.component.question.singleChoiceModel);e(n,4,0,r._41(n,4,0,r._29(n,5).transform("addon.mod_quiz.clearchoice")))})}function View_AddonQtypeMultichoiceComponent_8(e){return r._42(0,[(e()(),r._16(0,0,null,null,21,"div",[["radio-group",""],["role","radiogroup"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(e,n,t){var o=!0;if("ngModelChange"===n){o=!1!==(e.component.question.singleChoiceModel=t)&&o}return o},null,null)),r._15(1,1064960,null,1,jr.a,[r.K,r.p,r.i],null,null),r._37(335544320,7,{_header:0}),r._35(1024,null,Re.l,function(e){return[e]},[jr.a]),r._15(4,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r._35(2048,null,Re.m,null,[Re.q]),r._15(6,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMultichoiceComponent_9)),r._15(9,802816,null,0,te.j,[r.W,r.T,r.v],{ngForOf:[0,"ngForOf"]},null),(e()(),r._40(-1,null,["\n        "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMultichoiceComponent_13)),r._15(12,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n        "])),(e()(),r._40(-1,null,["\n        "])),(e()(),r._16(15,0,null,null,5,"input",[["type","hidden"]],[[1,"name",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,n,t){var o=!0;if("input"===n){o=!1!==r._29(e,16)._handleInput(t.target.value)&&o}if("blur"===n){o=!1!==r._29(e,16).onTouched()&&o}if("compositionstart"===n){o=!1!==r._29(e,16)._compositionStart()&&o}if("compositionend"===n){o=!1!==r._29(e,16)._compositionEnd(t.target.value)&&o}return o},null,null)),r._15(16,16384,null,0,Re.c,[r.L,r.p,[2,Re.a]],null,null),r._35(1024,null,Re.l,function(e){return[e]},[Re.c]),r._15(18,671744,null,0,Re.q,[[8,null],[8,null],[8,null],[2,Re.l]],{model:[0,"model"]},null),r._35(2048,null,Re.m,null,[Re.q]),r._15(20,16384,null,0,Re.n,[Re.m],null,null),(e()(),r._40(-1,null,["\n    "]))],function(e,n){var t=n.component;e(n,4,0,t.question.optionsName,t.question.singleChoiceModel);e(n,9,0,t.question.options);e(n,12,0,!t.question.disabled);e(n,18,0,t.question.singleChoiceModel)},function(e,n){var t=n.component;e(n,0,0,r._29(n,6).ngClassUntouched,r._29(n,6).ngClassTouched,r._29(n,6).ngClassPristine,r._29(n,6).ngClassDirty,r._29(n,6).ngClassValid,r._29(n,6).ngClassInvalid,r._29(n,6).ngClassPending);e(n,15,0,t.question.optionsName,r._29(n,20).ngClassUntouched,r._29(n,20).ngClassTouched,r._29(n,20).ngClassPristine,r._29(n,20).ngClassDirty,r._29(n,20).ngClassValid,r._29(n,20).ngClassInvalid,r._29(n,20).ngClassPending)})}function View_AddonQtypeMultichoiceComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,24,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(3,0,null,null,12,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(4,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(8,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(10,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),r._15(11,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,2,1,null,View_AddonQtypeMultichoiceComponent_2)),r._15(14,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMultichoiceComponent_3)),r._15(19,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMultichoiceComponent_8)),r._15(23,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,11,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,14,0,t.question.prompt);e(n,19,0,t.question.multi);e(n,23,0,!t.question.multi)},null)}function View_AddonQtypeMultichoiceComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeMultichoiceComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function View_AddonQtypeShortAnswerComponent_3(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"core-icon",[["class","core-correct-icon"],["item-content",""],["item-end",""]],null,null,null,J.b,J.a)),r._15(1,704512,null,0,Z.a,[r.p,X.a],{name:[0,"name"],color:[1,"color"]},null),r._31(2,1)],function(e,n){var t=n.component;e(n,1,0,t.question.input.correctIcon,e(n,2,0,t.question.input.correctIconColor))},null)}function View_AddonQtypeShortAnswerComponent_2(e){return r._42(0,[(e()(),r._16(0,0,null,null,20,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(1,278528,null,0,te.i,[r.v,r.w,r.p,r.L],{ngClass:[0,"ngClass"]},null),r._15(2,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,4,{contentLabel:0}),r._37(603979776,5,{_buttons:1}),r._37(603979776,6,{_icons:1}),r._15(6,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(8,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),r._15(9,16384,[[4,4]],0,He.a,[X.a,r.p,r.K,[8,null],[8,""],[8,null],[8,null]],null,null),(e()(),r._40(10,null,["",""])),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(13,0,null,3,3,"ion-input",[["autocorrect","off"],["padding-left",""],["type","text"]],[[1,"name",0]],null,null,vn.b,vn.a)),r._15(14,5423104,null,0,Cn.a,[X.a,on.a,Fe.a,fn.a,r.p,r.K,[2,ln.a],[2,xe.a],[2,Re.m],yn.a],{value:[0,"value"],disabled:[1,"disabled"],type:[2,"type"],autocorrect:[3,"autocorrect"],placeholder:[4,"placeholder"]},null),r._32(131072,Te.a,[Oe.a,r.i]),(e()(),r._40(-1,null,["\n        "])),(e()(),r._40(-1,2,["\n        "])),(e()(),r._11(16777216,null,3,1,null,View_AddonQtypeShortAnswerComponent_3)),r._15(19,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,2,["\n"]))],function(e,n){var t=n.component;e(n,1,0,r._19(1,"core-",t.question.input.correctIconColor,"-item"));e(n,14,0,t.question.input.value,t.question.input.readOnly,"text","off",t.question.input.readOnly?"":r._41(n,14,4,r._29(n,15).transform("core.question.answer")));e(n,19,0,t.question.input.correctIcon)},function(e,n){var t=n.component;e(n,10,0,r._41(n,10,0,r._29(n,11).transform("addon.mod_quiz.answercolon")));e(n,13,0,t.question.input.name)})}function View_AddonQtypeShortAnswerComponent_1(e){return r._42(0,[(e()(),r._16(0,0,null,null,15,"section",[["ion-list",""]],null,null,null,null,null)),(e()(),r._40(-1,null,["\n    "])),(e()(),r._16(2,0,null,null,9,"ion-item",[["class","addon-qtype-shortanswer-text item item-block"],["text-wrap",""]],null,null,null,De.b,De.a)),r._15(3,1097728,null,3,xe.a,[Fe.a,X.a,r.p,r.K,[2,Le.a]],null,null),r._37(335544320,1,{contentLabel:0}),r._37(603979776,2,{_buttons:1}),r._37(603979776,3,{_icons:1}),r._15(7,16384,null,0,Ue.a,[],null,null),(e()(),r._40(-1,2,["\n        "])),(e()(),r._16(9,16777216,null,2,1,"core-format-text",[],null,null,null,null,null)),r._15(10,540672,null,0,tn.a,[r.p,pe.a,S.a,fe.a,Oe.a,on.a,ue.a,ae.a,b.a,me.a,ge.a,rn.a,[2,I.a],[2,ln.a],[2,de.a],se.a,_e.a,sn.a,an.a,un.a,r.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(e()(),r._40(-1,2,["\n    "])),(e()(),r._40(-1,null,["\n    "])),(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeShortAnswerComponent_2)),r._15(14,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,10,0,t.question.text,t.component,t.componentId,t.contextLevel,t.contextInstanceId,t.courseId);e(n,14,0,!t.question.input.isInline)},null)}function View_AddonQtypeShortAnswerComponent_0(e){return r._42(0,[(e()(),r._11(16777216,null,null,1,null,View_AddonQtypeShortAnswerComponent_1)),r._15(1,16384,null,0,te.k,[r.W,r.T],{ngIf:[0,"ngIf"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){var t=n.component;e(n,1,0,t.question.text||""===t.question.text)},null)}function View_MoodleMobileApp_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,2,"ion-nav",[],null,null,null,ji.b,ji.a)),r._35(6144,null,Qi.a,null,[zi.a]),r._15(2,4374528,null,0,zi.a,[[2,$i.a],[2,I.a],fn.a,X.a,on.a,r.p,r.D,r.K,r.n,zr.l,Yi.a,[2,hn.a],yn.a,r.q],{root:[0,"root"]},null),(e()(),r._40(-1,null,["\n"]))],function(e,n){e(n,2,0,n.component.rootPage)},null)}Object.defineProperty(n,"__esModule",{value:!0});var o=t(80),r=t(1),i=t(535),l=t(307),s=t(1522),a=t(1523),u=t(1524),d=t(1525),c=t(1526),p=t(1527),f=t(1528),h=t(1529),m=t(1530),_=t(1531),g=t(1532),v=t(1533),C=t(1534),y=t(1624),P=t(725),A=t(200),b=t(7),I=t(21),S=t(5),E=t(450),M=t(62),w=r._14({encapsulation:2,styles:[],data:{}}),k=r._12("core-course-format-single-activity",E.a,function View_CoreCourseFormatSingleActivityComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-course-format-single-activity",[],null,null,null,View_CoreCourseFormatSingleActivityComponent_0,w)),r._15(1,573440,null,0,E.a,[M.a,r.u],null,null)],null,null)},{course:"course",sections:"sections",downloadEnabled:"downloadEnabled",initialSectionId:"initialSectionId",initialSectionNumber:"initialSectionNumber",moduleId:"moduleId"},{completionChanged:"completionChanged"},[]),T=t(475),O=t(1569),D=t(1579),x=t(1568),F=t(1578),L=t(1606),U=t(1607),R=t(1608),H=t(1609),N=t(1610),B=t(1611),V=t(1612),W=t(1613),K=t(1614),q=t(1615),G=t(1616),j=t(1537),Q=t(1538),z=t(1535),$=t(47),Y=t(44),X=t(9),J=t(81),Z=t(76),ee=t(122),ne=t(102),te=t(8),oe=t(524),re=t(328),ie=t(323),le=t(257),se=t(43),ae=t(23),ue=t(3),de=t(29),ce=t(604),pe=t(2),fe=t(12),he=t(360),me=t(18),_e=t(10),ge=t(11),ve=t(57),Ce=t(58),ye=t(116),Pe=r._14({encapsulation:2,styles:[],data:{}}),Ae=r._12("core-h5p-player",ce.a,function View_CoreH5PPlayerComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"core-h5p-player",[],null,null,null,View_CoreH5PPlayerComponent_0,Pe)),r._15(1,770048,null,0,ce.a,[b.a,r.p,pe.a,ae.a,ue.a,fe.a,he.a,me.a,_e.a,ge.a,S.a,ve.a,Ce.a,ye.a],null,null)],function(e,n){e(n,1,0)},null)},{src:"src",component:"component",componentId:"componentId"},{},[]),be=t(272),Ie=t(480),Se=t(1540),Ee=t(1585),Me=t(1625),we=t(1586),ke=t(1587),Te=t(26),Oe=t(19),De=t(32),xe=t(22),Fe=t(20),Le=t(28),Ue=t(34),Re=t(24),He=t(68),Ne=t(94),Be=t(85),Ve=t(104),We=t(95),Ke=t(251),qe=t(201),Ge=t(681),je=r._14({encapsulation:2,styles:[],data:{}}),Qe=r._12("addon-user-profile-field-checkbox",Ge.a,function View_AddonUserProfileFieldCheckboxComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-user-profile-field-checkbox",[],null,null,null,View_AddonUserProfileFieldCheckboxComponent_0,je)),r._15(1,114688,null,0,Ge.a,[Re.d,ue.a],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId"},{},[]),ze=t(771),$e=t(324),Ye=t(261),Xe=t(228),Je=t(25),Ze=t(682),en=r._14({encapsulation:2,styles:[],data:{}}),nn=r._12("addon-user-profile-field-datetime",Ze.a,function View_AddonUserProfileFieldDatetimeComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-user-profile-field-datetime",[],null,null,null,View_AddonUserProfileFieldDatetimeComponent_0,en)),r._15(1,114688,null,0,Ze.a,[Re.d,Je.a,ue.a,Oe.a],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId"},{},[]),tn=t(48),on=t(17),rn=t(16),ln=t(30),sn=t(41),an=t(31),un=t(37),dn=t(109),cn=t(124),pn=t(110),fn=t(36),hn=t(60),mn=t(683),_n=r._14({encapsulation:2,styles:[],data:{}}),gn=r._12("addon-user-profile-field-menu",mn.a,function View_AddonUserProfileFieldMenuComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-user-profile-field-menu",[],null,null,null,View_AddonUserProfileFieldMenuComponent_0,_n)),r._15(1,114688,null,0,mn.a,[Re.d],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{},[]),vn=t(111),Cn=t(91),yn=t(35),Pn=t(684),An=r._14({encapsulation:2,styles:[],data:{}}),bn=r._12("addon-user-profile-field-text",Pn.a,function View_AddonUserProfileFieldTextComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-user-profile-field-text",[],null,null,null,View_AddonUserProfileFieldTextComponent_0,An)),r._15(1,114688,null,0,Pn.a,[Re.d,ue.a],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{},[]),In=t(250),Sn=t(216),En=t(685),Mn=r._14({encapsulation:2,styles:[],data:{}}),wn=r._12("addon-user-profile-field-textarea",En.a,function View_AddonUserProfileFieldTextareaComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-user-profile-field-textarea",[],null,null,null,View_AddonUserProfileFieldTextareaComponent_0,Mn)),r._15(1,114688,null,0,En.a,[],null,null)],function(e,n){e(n,1,0)},null)},{field:"field",edit:"edit",disabled:"disabled",form:"form",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{},[]),kn=t(1536),Tn=t(1539),On=t(230),Dn=t(278),xn=t(101),Fn=t(55),Ln=t(52),Un=t(686),Rn=t(14),Hn=r._14({encapsulation:2,styles:[],data:{}}),Nn=r._12("addon-block-activitymodules",Un.a,function View_AddonBlockActivityModulesComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-block-activitymodules",[],null,null,null,View_AddonBlockActivityModulesComponent_0,Hn)),r._15(1,114688,null,0,Un.a,[r.u,Rn.a,Oe.a,M.a,pe.a],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[]),Bn=t(1554),Vn=t(144),Wn=t(93),Kn=t(84),qn=t(79),Gn=t(125),jn=t(115),Qn=t(1577),zn=t(383),$n=t(120),Yn=t(394),Xn=t(293),Jn=t(39),Zn=t(53),et=t(71),nt=t(46),tt=t(92),ot=t(77),rt=t(165),it=t(121),lt=t(687),st=t(173),at=t(103),ut=t(189),dt=r._14({encapsulation:2,styles:[],data:{}}),ct=r._12("addon-block-myoverview",lt.a,function View_AddonBlockMyOverviewComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-block-myoverview",[],null,null,null,View_AddonBlockMyOverviewComponent_0,dt)),r._15(1,770048,null,0,lt.a,[r.u,Zn.a,st.a,_e.a,Jn.a,at.a,ut.a,pe.a,Je.a],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams",downloadEnabled:"downloadEnabled"},{},[]),pt=t(1549),ft=t(482),ht=t(51),mt=t(688),_t=t(232),gt=r._14({encapsulation:2,styles:[],data:{}}),vt=r._12("addon-block-sitemainmenu",mt.a,function View_AddonBlockSiteMainMenuComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-block-sitemainmenu",[],null,null,null,View_AddonBlockSiteMainMenuComponent_0,gt)),r._15(1,114688,null,0,mt.a,[r.u,pe.a,Rn.a,Jn.a,_t.a,ht.a],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams",downloadEnabled:"downloadEnabled"},{},[]),Ct=t(387),yt=t(690),Pt=r._14({encapsulation:2,styles:[],data:{}}),At=r._12("addon-block-timeline-events",yt.a,function View_AddonBlockTimelineEventsComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-block-timeline-events",[],null,null,null,View_AddonBlockTimelineEventsComponent_0,Pt)),r._15(1,573440,null,0,yt.a,[[2,I.a],ue.a,fe.a,S.a,pe.a,Rn.a,rn.a,Je.a],null,null)],null,null)},{events:"events",showCourse:"showCourse",from:"from",to:"to",canLoadMore:"canLoadMore"},{loadMore:"loadMore"},[]),bt=t(689),It=t(312),St=r._14({encapsulation:2,styles:[],data:{}}),Et=r._12("addon-block-timeline",bt.a,function View_AddonBlockTimelineComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-block-timeline",[],null,null,null,View_AddonBlockTimelineComponent_0,St)),r._15(1,114688,null,0,bt.a,[r.u,Zn.a,It.a,at.a,ut.a,pe.a,Je.a],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[]),Mt=t(691),wt=r._14({encapsulation:2,styles:[],data:{}}),kt=r._12("addon-block-recentlyaccessedcourses",Mt.a,function View_AddonBlockRecentlyAccessedCoursesComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-block-recentlyaccessedcourses",[],null,null,null,View_AddonBlockRecentlyAccessedCoursesComponent_0,wt)),r._15(1,770048,null,0,Mt.a,[r.u,Zn.a,st.a,_e.a,Jn.a,at.a,ut.a,pe.a],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams",downloadEnabled:"downloadEnabled"},{},[]),Tt=t(90),Ot=t(692),Dt=t(467),xt=r._14({encapsulation:2,styles:[],data:{}}),Ft=r._12("addon-block-recentlyaccesseditems",Ot.a,function View_AddonBlockRecentlyAccessedItemsComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-block-recentlyaccesseditems",[],null,null,null,View_AddonBlockRecentlyAccessedItemsComponent_0,xt)),r._15(1,114688,null,0,Ot.a,[r.u,[2,I.a],pe.a,Dt.a,rn.a],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams"},{},[]),Lt=t(693),Ut=r._14({encapsulation:2,styles:[],data:{}}),Rt=r._12("addon-block-starredcourses",Lt.a,function View_AddonBlockStarredCoursesComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-block-starredcourses",[],null,null,null,View_AddonBlockStarredCoursesComponent_0,Ut)),r._15(1,770048,null,0,Lt.a,[r.u,Zn.a,st.a,_e.a,Jn.a,at.a,ut.a,pe.a],null,null)],function(e,n){e(n,1,0)},null)},{title:"title",block:"block",contextLevel:"contextLevel",instanceId:"instanceId",link:"link",linkParams:"linkParams",downloadEnabled:"downloadEnabled"},{},[]),Ht=t(322),Nt=t(154),Bt=t(635),Vt=r._14({encapsulation:2,styles:[],data:{}}),Wt=r._12("addon-mod-assign-submission-comments",Bt.a,function View_AddonModAssignSubmissionCommentsComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-assign-submission-comments",[],null,null,null,View_AddonModAssignSubmissionCommentsComponent_0,Vt)),r._15(1,49152,null,0,Bt.a,[Nt.a],null,null)],null,null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[]),Kt=t(530),qt=t(327),Gt=t(67),jt=t(481),Qt=t(318),zt=t(73),$t=t(150),Yt=t(638),Xt=t(178),Jt=t(78),Zt=t(134),eo=t(184),no=r._14({encapsulation:2,styles:[],data:{}}),to=r._12("addon-mod-assign-submission-file",Yt.a,function View_AddonModAssignSubmissionFileComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-assign-submission-file",[],null,null,null,View_AddonModAssignSubmissionFileComponent_0,no)),r._15(1,114688,null,0,Yt.a,[Xt.a,Jt.a,Zt.a,eo.a,zt.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[]),oo=t(639),ro=r._14({encapsulation:2,styles:[],data:{}}),io=r._12("addon-mod-assign-submission-online-text",oo.a,function View_AddonModAssignSubmissionOnlineTextComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-assign-submission-online-text",[],null,null,null,View_AddonModAssignSubmissionOnlineTextComponent_0,ro)),r._15(1,114688,null,0,oo.a,[Re.d,S.a,fe.a,Jt.a,Zt.a,r.p,pe.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",configs:"configs",edit:"edit",allowOffline:"allowOffline"},{},[]),lo=t(49),so=t(248),ao=t(641),uo=t(163),co=t(153),po=r._14({encapsulation:2,styles:[],data:{}}),fo=r._12("addon-mod-assign-feedback-comments",ao.a,function View_AddonModAssignFeedbackCommentsComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-assign-feedback-comments",[],null,null,null,View_AddonModAssignFeedbackCommentsComponent_0,po)),r._15(1,114688,null,0,ao.a,[uo.a,r.p,S.a,fe.a,Zt.a,Jt.a,Re.d,co.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[]),ho=t(249),mo=t(215),_o=t(643),go=r._14({encapsulation:2,styles:[],data:{}}),vo=r._12("addon-mod-assign-feedback-edit-pdf",_o.a,function View_AddonModAssignFeedbackEditPdfComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-assign-feedback-edit-pdf",[],null,null,null,View_AddonModAssignFeedbackEditPdfComponent_0,go)),r._15(1,114688,null,0,_o.a,[uo.a,Jt.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[]),Co=t(644),yo=r._14({encapsulation:2,styles:[],data:{}}),Po=r._12("addon-mod-assign-feedback-file",Co.a,function View_AddonModAssignFeedbackFileComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-assign-feedback-file",[],null,null,null,View_AddonModAssignFeedbackFileComponent_0,yo)),r._15(1,114688,null,0,Co.a,[uo.a,Jt.a],null,null)],function(e,n){e(n,1,0)},null)},{assign:"assign",submission:"submission",plugin:"plugin",userId:"userId",configs:"configs",canEdit:"canEdit",edit:"edit"},{},[]),Ao=t(1588),bo=t(1557),Io=t(1589),So=t(1553),Eo=t(694),Mo=r._14({encapsulation:2,styles:[],data:{}}),wo=r._12("addon-mod-data-field-checkbox",Eo.a,function View_AddonModDataFieldCheckboxComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-checkbox",[],null,null,null,View_AddonModDataFieldCheckboxComponent_0,Mo)),r._15(1,638976,null,0,Eo.a,[Re.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),ko=t(695),To=r._14({encapsulation:2,styles:[],data:{}}),Oo=r._12("addon-mod-data-field-date",ko.a,function View_AddonModDataFieldDateComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-date",[],null,null,null,View_AddonModDataFieldDateComponent_0,To)),r._15(1,638976,null,0,ko.a,[Re.d,Je.a,Oe.a],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Do=t(696),xo=r._14({encapsulation:2,styles:[],data:{}}),Fo=r._12("addon-mod-data-field-file",Do.a,function View_AddonModDataFieldFileComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-file",[],null,null,null,View_AddonModDataFieldFileComponent_0,xo)),r._15(1,638976,null,0,Do.a,[Re.d,Xt.a],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Lo=t(697),Uo=t(361),Ro=r._14({encapsulation:2,styles:[],data:{}}),Ho=r._12("addon-mod-data-field-latlong",Lo.a,function View_AddonModDataFieldLatlongComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-latlong",[],null,null,null,View_AddonModDataFieldLatlongComponent_0,Ro)),r._15(1,638976,null,0,Lo.a,[Re.d,on.a,Uo.a,S.a,o.c,ge.a],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),No=t(698),Bo=r._14({encapsulation:2,styles:[],data:{}}),Vo=r._12("addon-mod-data-field-menu",No.a,function View_AddonModDataFieldMenuComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-menu",[],null,null,null,View_AddonModDataFieldMenuComponent_0,Bo)),r._15(1,638976,null,0,No.a,[Re.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Wo=t(699),Ko=r._14({encapsulation:2,styles:[],data:{}}),qo=r._12("addon-mod-data-field-multimenu",Wo.a,function View_AddonModDataFieldMultimenuComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-multimenu",[],null,null,null,View_AddonModDataFieldMultimenuComponent_0,Ko)),r._15(1,638976,null,0,Wo.a,[Re.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Go=t(701),jo=r._14({encapsulation:2,styles:[],data:{}}),Qo=r._12("addon-mod-data-field-number",Go.a,function View_AddonModDataFieldNumberComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-number",[],null,null,null,View_AddonModDataFieldNumberComponent_0,jo)),r._15(1,638976,null,0,Go.a,[Re.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),zo=t(229),$o=t(702),Yo=r._14({encapsulation:2,styles:[],data:{}}),Xo=r._12("addon-mod-data-field-picture",$o.a,function View_AddonModDataFieldPictureComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-picture",[],null,null,null,View_AddonModDataFieldPictureComponent_0,Yo)),r._15(1,638976,null,0,$o.a,[Re.d,Xt.a,S.a],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),Jo=t(703),Zo=r._14({encapsulation:2,styles:[],data:{}}),er=r._12("addon-mod-data-field-radiobutton",Jo.a,function View_AddonModDataFieldRadiobuttonComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-radiobutton",[],null,null,null,View_AddonModDataFieldRadiobuttonComponent_0,Zo)),r._15(1,638976,null,0,Jo.a,[Re.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),nr=t(700),tr=r._14({encapsulation:2,styles:[],data:{}}),or=r._12("addon-mod-data-field-text",nr.a,function View_AddonModDataFieldTextComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-text",[],null,null,null,View_AddonModDataFieldTextComponent_0,tr)),r._15(1,638976,null,0,nr.a,[Re.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),rr=t(704),ir=r._14({encapsulation:2,styles:[],data:{}}),lr=r._12("addon-mod-data-field-textarea",rr.a,function View_AddonModDataFieldTextareaComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-textarea",[],null,null,null,View_AddonModDataFieldTextareaComponent_0,ir)),r._15(1,638976,null,0,rr.a,[Re.d,fe.a],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),sr=t(175),ar=t(705),ur=r._14({encapsulation:2,styles:[],data:{}}),dr=r._12("addon-mod-data-field-url",ar.a,function View_AddonModDataFieldUrlComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-data-field-url",[],null,null,null,View_AddonModDataFieldUrlComponent_0,ur)),r._15(1,638976,null,0,ar.a,[Re.d],null,null)],function(e,n){e(n,1,0)},null)},{mode:"mode",field:"field",value:"value",database:"database",error:"error",form:"form",search:"search"},{gotoEntry:"gotoEntry"},[]),cr=t(1596),pr=t(1600),fr=t(1548),hr=t(1593),mr=t(1566),_r=t(1575),gr=t(1576),vr=t(1594),Cr=t(1620),yr=t(1597),Pr=t(1598),Ar=t(1599),br=t(1621),Ir=t(661),Sr=r._14({encapsulation:2,styles:[],data:{}}),Er=r._12("addon-mod-quiz-access-offline-attempts",Ir.a,function View_AddonModQuizAccessOfflineAttemptsComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-quiz-access-offline-attempts",[],null,null,null,View_AddonModQuizAccessOfflineAttemptsComponent_0,Sr)),r._15(1,114688,null,0,Ir.a,[Re.d],null,null)],function(e,n){e(n,1,0)},null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[]),Mr=t(738),wr=t(378),kr=t(662),Tr=r._14({encapsulation:2,styles:[],data:{}}),Or=r._12("addon-mod-quiz-access-password",kr.a,function View_AddonModQuizAccessPasswordComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-quiz-access-password",[],null,null,null,View_AddonModQuizAccessPasswordComponent_0,Tr)),r._15(1,114688,null,0,kr.a,[Re.d],null,null)],function(e,n){e(n,1,0)},null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[]),Dr=t(663),xr=r._14({encapsulation:2,styles:[],data:{}}),Fr=r._12("addon-mod-quiz-access-time-limit",Dr.a,function View_AddonModQuizAccessTimeLimitComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-quiz-access-time-limit",[],null,null,null,View_AddonModQuizAccessTimeLimitComponent_0,xr)),r._15(1,49152,null,0,Dr.a,[],null,null)],null,null)},{rule:"rule",quiz:"quiz",attempt:"attempt",prefetch:"prefetch",siteId:"siteId",form:"form"},{},[]),Lr=t(1601),Ur=t(1603),Rr=t(1602),Hr=t(1567),Nr=t(381),Br=t(672),Vr=r._14({encapsulation:2,styles:[],data:{}}),Wr=r._12("addon-mod-workshop-assessment-strategy-accumulative",Br.a,function View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-accumulative",[],null,null,null,View_AddonModWorkshopAssessmentStrategyAccumulativeComponent_0,Vr)),r._15(1,49152,null,0,Br.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy",moduleId:"moduleId",courseId:"courseId"},{},[]),Kr=t(673),qr=r._14({encapsulation:2,styles:[],data:{}}),Gr=r._12("addon-mod-workshop-assessment-strategy-comments",Kr.a,function View_AddonModWorkshopAssessmentStrategyCommentsComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-comments",[],null,null,null,View_AddonModWorkshopAssessmentStrategyCommentsComponent_0,qr)),r._15(1,49152,null,0,Kr.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy",moduleId:"moduleId",courseId:"courseId"},{},[]),jr=t(138),Qr=t(87),zr=t(45),$r=t(177),Yr=t(146),Xr=t(674),Jr=r._14({encapsulation:2,styles:[],data:{}}),Zr=r._12("addon-mod-workshop-assessment-strategy-numerrors",Xr.a,function View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-numerrors",[],null,null,null,View_AddonModWorkshopAssessmentStrategyNumErrorsComponent_0,Jr)),r._15(1,49152,null,0,Xr.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy",moduleId:"moduleId",courseId:"courseId"},{},[]),ei=t(675),ni=r._14({encapsulation:2,styles:[],data:{}}),ti=r._12("addon-mod-workshop-assessment-strategy-rubric",ei.a,function View_AddonModWorkshopAssessmentStrategyRubricComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-mod-workshop-assessment-strategy-rubric",[],null,null,null,View_AddonModWorkshopAssessmentStrategyRubricComponent_0,ni)),r._15(1,49152,null,0,ei.a,[],null,null)],null,null)},{workshopId:"workshopId",assessment:"assessment",edit:"edit",selectedValues:"selectedValues",fieldErrors:"fieldErrors",strategy:"strategy",moduleId:"moduleId",courseId:"courseId"},{},[]),oi=t(1595),ri=t(1604),ii=t(1622),li=t(1605),si=t(468),ai=r._14({encapsulation:2,styles:[],data:{}}),ui=r._12("addon-qbehaviour-deferredcbm",si.a,function View_AddonQbehaviourDeferredCBMComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qbehaviour-deferredcbm",[],null,null,null,View_AddonQbehaviourDeferredCBMComponent_0,ai)),r._15(1,49152,null,0,si.a,[],null,null)],null,null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),di=t(708),ci=r._14({encapsulation:2,styles:[],data:{}}),pi=r._12("addon-qbehaviour-informationitem",di.a,function View_AddonQbehaviourInformationItemComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qbehaviour-informationitem",[],null,null,null,View_AddonQbehaviourInformationItemComponent_0,ci)),r._15(1,49152,null,0,di.a,[],null,null)],null,null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),fi=t(470),hi=r._14({encapsulation:2,styles:[],data:{}}),mi=r._12("addon-qtype-calculated",fi.a,function View_AddonQtypeCalculatedComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-calculated",[],null,null,null,View_AddonQtypeCalculatedComponent_0,hi)),r._15(1,114688,null,0,fi.a,[b.a,r.u],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),_i=t(710),gi=r._14({encapsulation:2,styles:[],data:{}}),vi=r._12("addon-qtype-ddimageortext",_i.a,function View_AddonQtypeDdImageOrTextComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-ddimageortext",[],null,null,null,View_AddonQtypeDdImageOrTextComponent_0,gi)),r._15(1,245760,null,0,_i.a,[b.a,r.u,r.p],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Ci=t(711),yi=r._14({encapsulation:2,styles:[],data:{}}),Pi=r._12("addon-qtype-ddmarker",Ci.a,function View_AddonQtypeDdMarkerComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-ddmarker",[],null,null,null,View_AddonQtypeDdMarkerComponent_0,yi)),r._15(1,245760,null,0,Ci.a,[b.a,r.u,r.p,pe.a,ae.a,me.a],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Ai=t(712),bi=r._14({encapsulation:2,styles:[],data:{}}),Ii=r._12("addon-qtype-ddwtos",Ai.a,function View_AddonQtypeDdwtosComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-ddwtos",[],null,null,null,View_AddonQtypeDdwtosComponent_0,bi)),r._15(1,245760,null,0,Ai.a,[b.a,r.u,r.p],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Si=t(713),Ei=r._14({encapsulation:2,styles:[],data:{}}),Mi=r._12("addon-qtype-description",Si.a,function View_AddonQtypeDescriptionComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-description",[],null,null,null,View_AddonQtypeDescriptionComponent_0,Ei)),r._15(1,114688,null,0,Si.a,[b.a,r.u],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),wi=t(714),ki=r._14({encapsulation:2,styles:[],data:{}}),Ti=r._12("addon-qtype-essay",wi.a,function View_AddonQtypeEssayComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-essay",[],null,null,null,View_AddonQtypeEssayComponent_0,ki)),r._15(1,114688,null,0,wi.a,[b.a,r.u,Re.d],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Oi=t(715),Di=r._14({encapsulation:2,styles:[],data:{}}),xi=r._12("addon-qtype-gapselect",Oi.a,function View_AddonQtypeGapSelectComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-gapselect",[],null,null,null,View_AddonQtypeGapSelectComponent_0,Di)),r._15(1,114688,null,0,Oi.a,[b.a,r.u,r.p],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Fi=t(471),Li=r._14({encapsulation:2,styles:[],data:{}}),Ui=r._12("addon-qtype-match",Fi.a,function View_AddonQtypeMatchComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-match",[],null,null,null,View_AddonQtypeMatchComponent_0,Li)),r._15(1,114688,null,0,Fi.a,[b.a,r.u],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Ri=t(717),Hi=r._14({encapsulation:2,styles:[],data:{}}),Ni=r._12("addon-qtype-multianswer",Ri.a,function View_AddonQtypeMultiAnswerComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-multianswer",[],null,null,null,View_AddonQtypeMultiAnswerComponent_0,Hi)),r._15(1,114688,null,0,Ri.a,[b.a,r.u,r.p],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Bi=t(365),Vi=r._14({encapsulation:2,styles:[],data:{}}),Wi=r._12("addon-qtype-multichoice",Bi.a,function View_AddonQtypeMultichoiceComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-multichoice",[],null,null,null,View_AddonQtypeMultichoiceComponent_0,Vi)),r._15(1,114688,null,0,Bi.a,[b.a,r.u],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),Ki=t(718),qi=r._14({encapsulation:2,styles:[],data:{}}),Gi=r._12("addon-qtype-shortanswer",Ki.a,function View_AddonQtypeShortAnswerComponent_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"addon-qtype-shortanswer",[],null,null,null,View_AddonQtypeShortAnswerComponent_0,qi)),r._15(1,114688,null,0,Ki.a,[b.a,r.u],null,null)],function(e,n){e(n,1,0)},null)},{question:"question",component:"component",componentId:"componentId",attemptId:"attemptId",offlineEnabled:"offlineEnabled",contextLevel:"contextLevel",contextInstanceId:"contextInstanceId",courseId:"courseId"},{buttonClicked:"buttonClicked",onAbort:"onAbort"},[]),ji=t(1052),Qi=t(220),zi=t(308),$i=t(40),Yi=t(207),Xi=t(489),Ji=t(349),Zi=t(126),el=t(151),nl=t(466),tl=t(465),ol=t(186),rl=r._14({encapsulation:2,styles:[],data:{}}),il=r._12("ng-component",Xi.a,function View_MoodleMobileApp_Host_0(e){return r._42(0,[(e()(),r._16(0,0,null,null,1,"ng-component",[],null,null,null,View_MoodleMobileApp_0,rl)),r._15(1,114688,null,0,Xi.a,[on.a,b.a,Ji.a,l.b,_e.a,Zi.a,r.D,ge.a,el.a,pe.a,nl.a,tl.a,ue.a,ae.a,ol.a],null,null)],function(e,n){e(n,1,0)},null)},{},{},[]),ll=t(573),sl=t(790),al=t(789),ul=t(413),dl=t(262),cl=t(440),pl=t(617),fl=t(756),hl=t(741),ml=t(385),_l=t(61),gl=t(283),vl=t(375),Cl=t(753),yl=t(389),Pl=t(739),Al=t(742),bl=t(170),Il=t(401),Sl=t(386),El=t(234),Ml=t(264),wl=t(572),kl=t(188),Tl=t(108),Ol=t(575),Dl=t(155),xl=t(63),Fl=t(59),Ll=t(574),Ul=t(210),Rl=t(341),Hl=t(547),Nl=t(270),Bl=t(576),Vl=t(722),Wl=t(4),Kl=t(33),ql=t(107),Gl=t(27),jl=t(555),Ql=t(427),zl=t(554),$l=t(472),Yl=t(367),Xl=t(368),Jl=t(370),Zl=t(369),es=t(127),ns=t(426),ts=t(1300),os=t(309),rs=t(435),is=t(436),ls=t(437),ss=t(546),as=t(581),us=t(541),ds=t(438),cs=t(566),ps=t(439),fs=t(172),hs=t(441),ms=t(355),_s=t(359),gs=t(354),vs=t(152),Cs=t(310),ys=t(776),Ps=t(89),As=t(1089),bs=t(606),Is=t(607),Ss=t(171),Es=t(391),Ms=t(353),ws=t(567),ks=t(179),Ts=t(145),Os=t(568),Ds=t(490),xs=t(133),Fs=t(137),Ls=t(72),Us=t(446),Rs=t(233),Hs=t(66),Ns=t(136),Bs=t(586),Vs=t(599),Ws=t(587),Ks=t(1072),qs=t(487),Gs=t(1073),js=t(1074),Qs=t(1075),zs=t(1076),$s=t(598),Ys=t(445),Xs=t(442),Js=t(356),Zs=t(539),ea=t(1077),na=t(1078),ta=t(1079),oa=t(1081),ra=t(1080),ia=t(600),la=t(488),sa=t(502),aa=t(1092),ua=t(611),da=t(597),ca=t(1061),pa=t(1065),fa=t(1064),ha=t(1067),ma=t(1066),_a=t(1063),ga=t(1062),va=t(82),Ca=t(397),ya=t(1068),Pa=t(1069),Aa=t(206),ba=t(1070),Ia=t(227),Sa=t(1071),Ea=t(596),Ma=t(1093),wa=t(612),ka=t(595),Ta=t(315),Oa=t(483),Da=t(105),xa=t(1094),Fa=t(1095),La=t(1096),Ua=t(1097),Ra=t(615),Ha=t(1098),Na=t(1099),Ba=t(613),Va=t(740),Wa=t(169),Ka=t(1082),qa=t(1083),Ga=t(185),ja=t(1084),Qa=t(1085),za=t(1086),$a=t(602),Ya=t(729),Xa=t(1303),Ja=t(477),Za=t(743),eu=t(593),nu=t(156),tu=t(192),ou=t(326),ru=t(609),iu=t(74),lu=t(129),su=t(610),au=t(118),uu=t(393),du=t(130),cu=t(590),pu=t(167),fu=t(585),hu=t(193),mu=t(1305),_u=t(1304),gu=t(1306),vu=t(608),Cu=t(388),yu=t(521),Pu=t(1308),Au=t(1307),bu=t(271),Iu=t(594),Su=t(1309),Eu=t(1100),Mu=t(1101),wu=t(616),ku=t(164),Tu=t(1311),Ou=t(1312),Du=t(1313),xu=t(1310),Fu=t(601),Lu=t(1087),Uu=t(605),Ru=t(1088),Hu=t(603),Nu=t(624),Bu=t(199),Vu=t(623),Wu=t(284),Ku=t(1124),qu=t(1125),Gu=t(1126),ju=t(1127),Qu=t(626),zu=t(374),$u=t(274),Yu=t(750),Xu=t(208),Ju=t(1315),Zu=t(1316),ed=t(1317),nd=t(1318),td=t(1319),od=t(1314),rd=t(757),id=t(275),ld=t(187),sd=t(1128),ad=t(276),ud=t(478),dd=t(1129),cd=t(1130),pd=t(627),fd=t(751),hd=t(166),md=t(1132),_d=t(1131),gd=t(1133),vd=t(1134),Cd=t(1135),yd=t(1136),Pd=t(1137),Ad=t(1138),bd=t(628),Id=t(752),Sd=t(1321),Ed=t(1322),Md=t(1320),wd=t(1325),kd=t(1324),Td=t(1327),Od=t(1326),Dd=t(1329),xd=t(1328),Fd=t(1331),Ld=t(1330),Ud=t(1333),Rd=t(1332),Hd=t(1323),Nd=t(1139),Bd=t(629),Vd=t(75),Wd=t(1335),Kd=t(1336),qd=t(1334),Gd=t(1338),jd=t(1337),Qd=t(1340),zd=t(1339),$d=t(1344),Yd=t(1343),Xd=t(1342),Jd=t(1341),Zd=t(1346),ec=t(1345),nc=t(1348),tc=t(1347),oc=t(1350),rc=t(1349),ic=t(1352),lc=t(1351),sc=t(1354),ac=t(1353),uc=t(1356),dc=t(1355),cc=t(1365),pc=t(1364),fc=t(277),hc=t(1358),mc=t(1359),_c=t(1357),gc=t(1361),vc=t(1360),Cc=t(1363),yc=t(1362),Pc=t(1367),Ac=t(1366),bc=t(1369),Ic=t(1370),Sc=t(1368),Ec=t(1372),Mc=t(1373),wc=t(1371),kc=t(1375),Tc=t(1376),Oc=t(1374),Dc=t(1378),xc=t(1379),Fc=t(1377),Lc=t(1381),Uc=t(1380),Rc=t(1383),Hc=t(1382),Nc=t(1385),Bc=t(1386),Vc=t(1384),Wc=t(1388),Kc=t(1387),qc=t(1390),Gc=t(1389),jc=t(1156),Qc=t(1155),zc=t(637),$c=t(1157),Yc=t(1159),Xc=t(1158),Jc=t(1154),Zc=t(640),ep=t(1161),np=t(1163),tp=t(1162),op=t(1165),rp=t(1164),ip=t(1160),lp=t(1148),sp=t(319),ap=t(1149),up=t(1150),dp=t(1151),cp=t(1152),pp=t(1153),fp=t(634),hp=t(754),mp=t(221),_p=t(1166),gp=t(1167),vp=t(398),Cp=t(1168),yp=t(1169),Pp=t(645),Ap=t(736),bp=t(279),Ip=t(1172),Sp=t(1170),Ep=t(1173),Mp=t(1171),wp=t(646),kp=t(755),Tp=t(1174),Op=t(295),Dp=t(294),xp=t(591),Fp=t(1175),Lp=t(296),Up=t(1177),Rp=t(1176),Hp=t(647),Np=t(476),Bp=t(592),Vp=t(128),Wp=t(1403),Kp=t(1402),qp=t(1405),Gp=t(1404),jp=t(1407),Qp=t(1406),zp=t(1409),$p=t(1408),Yp=t(1411),Xp=t(1410),Jp=t(1413),Zp=t(1412),ef=t(1415),nf=t(1414),tf=t(1417),of=t(1416),rf=t(1419),lf=t(1418),sf=t(364),af=t(1420),uf=t(1422),df=t(1421),cf=t(1424),pf=t(1423),ff=t(1401),hf=t(292),mf=t(98),_f=t(1392),gf=t(203),vf=t(217),Cf=t(231),yf=t(236),Pf=t(329),Af=t(399),bf=t(1393),If=t(1399),Sf=t(1394),Ef=t(1395),Mf=t(1396),wf=t(1397),kf=t(1398),Tf=t(1400),Of=t(1391),Df=t(1426),xf=t(1427),Ff=t(706),Lf=t(1428),Uf=t(1425),Rf=t(761),Hf=t(286),Nf=t(1212),Bf=t(331),Vf=t(287),Wf=t(1213),Kf=t(1214),qf=t(1215),Gf=t(1216),jf=t(1217),Qf=t(1218),zf=t(657),$f=t(765),Yf=t(223),Xf=t(299),Jf=t(1252),Zf=t(406),eh=t(1253),nh=t(1255),th=t(1254),oh=t(664),rh=t(728),ih=t(297),lh=t(135),sh=t(1178),ah=t(252),uh=t(649),dh=t(1179),ch=t(285),ph=t(1187),fh=t(1180),hh=t(1181),mh=t(1182),_h=t(1183),gh=t(1184),vh=t(1185),Ch=t(1186),yh=t(648),Ph=t(758),Ah=t(1188),bh=t(330),Ih=t(1189),Sh=t(1190),Eh=t(1192),Mh=t(1191),wh=t(650),kh=t(733),Th=t(737),Oh=t(1193),Dh=t(280),xh=t(254),Fh=t(402),Lh=t(1194),Uh=t(1195),Rh=t(1196),Hh=t(1197),Nh=t(1199),Bh=t(1198),Vh=t(1200),Wh=t(651),Kh=t(759),qh=t(1201),Gh=t(258),jh=t(205),Qh=t(507),zh=t(363),$h=t(403),Yh=t(1202),Xh=t(1203),Jh=t(1204),Zh=t(1205),em=t(1206),nm=t(1207),tm=t(654),om=t(762),rm=t(298),im=t(1219),lm=t(1220),sm=t(1221),am=t(1222),um=t(658),dm=t(763),cm=t(222),pm=t(1223),fm=t(332),hm=t(405),mm=t(1224),_m=t(1226),gm=t(1225),vm=t(659),Cm=t(764),ym=t(1235),Pm=t(1234),Am=t(1237),bm=t(1236),Im=t(1239),Sm=t(1238),Em=t(263),Mm=t(168),wm=t(253),km=t(139),Tm=t(333),Om=t(259),Dm=t(1241),xm=t(1240),Fm=t(1243),Lm=t(1242),Um=t(1245),Rm=t(1244),Hm=t(1247),Nm=t(1246),Bm=t(1249),Vm=t(1248),Wm=t(1251),Km=t(1250),qm=t(1227),Gm=t(1228),jm=t(1229),Qm=t(1230),zm=t(1231),$m=t(1232),Ym=t(1233),Xm=t(660),Jm=t(766),Zm=t(1256),e_=t(334),n_=t(288),t_=t(1257),o_=t(1258),r_=t(1259),i_=t(1260),l_=t(665),s_=t(768),a_=t(303),u_=t(336),d_=t(1265),c_=t(1266),p_=t(1267),f_=t(1268),h_=t(668),m_=t(767),__=t(1261),g_=t(301),v_=t(300),C_=t(335),y_=t(667),P_=t(1262),A_=t(302),b_=t(1264),I_=t(1263),S_=t(666),E_=t(484),M_=t(1280),w_=t(1279),k_=t(1282),T_=t(1281),O_=t(1284),D_=t(1283),x_=t(1286),F_=t(1285),L_=t(1278),U_=t(190),R_=t(176),H_=t(1287),N_=t(1288),B_=t(204),V_=t(291),W_=t(1290),K_=t(1291),q_=t(1289),G_=t(671),j_=t(760),Q_=t(237),z_=t(1208),$_=t(404),Y_=t(1209),X_=t(1211),J_=t(1210),Z_=t(656),eg=t(769),ng=t(1269),tg=t(289),og=t(235),rg=t(290),ig=t(1270),lg=t(1271),sg=t(1272),ag=t(1273),ug=t(1274),dg=t(1275),cg=t(1276),pg=t(1277),fg=t(669),hg=t(630),mg=t(495),_g=t(1430),gg=t(1429),vg=t(380),Cg=t(162),yg=t(1140),Pg=t(1144),Ag=t(1143),bg=t(1141),Ig=t(503),Sg=t(1145),Eg=t(1147),Mg=t(632),wg=t(633),kg=t(1142),Tg=t(1146),Og=t(631),Dg=t(770),xg=t(304),Fg=t(260),Lg=t(1292),Ug=t(1294),Rg=t(337),Hg=t(1293),Ng=t(676),Bg=t(256),Vg=t(1295),Wg=t(1296),Kg=t(520),qg=t(1297),Gg=t(1298),jg=t(677),Qg=t(1299),zg=t(678),$g=t(1433),Yg=t(1432),Xg=t(1435),Jg=t(1434),Zg=t(707),ev=t(1437),nv=t(1436),tv=t(1438),ov=t(1440),rv=t(1439),iv=t(1442),lv=t(1441),sv=t(1444),av=t(1443),uv=t(1446),dv=t(1445),cv=t(1448),pv=t(1447),fv=t(1450),hv=t(1449),mv=t(1431),_v=t(469),gv=t(1452),vv=t(709),Cv=t(1454),yv=t(1453),Pv=t(1456),Av=t(1455),bv=t(1458),Iv=t(1457),Sv=t(1460),Ev=t(1459),Mv=t(1462),wv=t(1461),kv=t(1464),Tv=t(1463),Ov=t(1466),Dv=t(1465),xv=t(1468),Fv=t(1467),Lv=t(716),Uv=t(1469),Rv=t(1471),Hv=t(1470),Nv=t(1472),Bv=t(1474),Vv=t(1473),Wv=t(1476),Kv=t(1475),qv=t(1478),Gv=t(1477),jv=t(1480),Qv=t(1479),zv=t(1451),$v=t(1482),Yv=t(1481),Xv=t(1485),Jv=t(1484),Zv=t(1487),eC=t(1486),nC=t(1489),tC=t(1488),oC=t(1491),rC=t(1490),iC=t(1493),lC=t(1492),sC=t(1495),aC=t(1494),uC=t(1497),dC=t(1496),cC=t(1499),pC=t(1498),fC=t(1501),hC=t(1500),mC=t(1503),_C=t(1502),gC=t(1505),vC=t(1504),CC=t(1507),yC=t(1506),PC=t(1509),AC=t(1508),bC=t(1511),IC=t(1510),SC=t(1483),EC=t(1301),MC=t(1302),wC=t(400),kC=r._13(i.a,[l.b],function(e){return r._25([r._26(512,r.n,r._6,[[8,[s.a,a.a,u.a,d.a,c.a,p.a,f.a,h.a,m.a,_.a,g.a,v.a,C.a,y.a,k,T.a,O.a,D.a,x.a,F.a,L.a,U.a,R.a,H.a,N.a,B.a,V.a,W.a,K.a,q.a,G.a,j.a,Q.a,z.a,Ae,be.a,Ie.a,Se.a,Ee.a,Me.a,we.a,ke.a,Qe,nn,gn,bn,wn,kn.a,Tn.a,Nn,Bn.a,ct,vt,Et,At,kt,Ft,Rt,Wt,to,io,fo,vo,Po,Ao.a,bo.a,Io.a,So.a,wo,Oo,Fo,Ho,Vo,qo,Qo,Xo,er,or,lr,dr,cr.a,pr.a,fr.a,hr.a,mr.a,_r.a,gr.a,vr.a,Cr.a,yr.a,Pr.a,Ar.a,br.a,Er,Or,Fr,Lr.a,Ur.a,Rr.a,Hr.a,Wr,Gr,Zr,ti,oi.a,ri.a,ii.a,li.a,ui,pi,mi,vi,Pi,Ii,Mi,Ti,xi,Ui,Ni,Wi,Gi,il]],[3,r.n],r.B]),r._26(5120,r.x,r._36,[[3,r.x]]),r._26(4608,te.m,te.l,[r.x,[2,te.w]]),r._26(5120,r.b,r._18,[]),r._26(5120,r.v,r._27,[]),r._26(5120,r.w,r._30,[]),r._26(6144,r.O,null,[o.c]),r._26(4608,o.f,ll.a,[]),r._26(5120,o.d,function(e,n,t,r,i){return[new o.k(e,n),new o.p(t),new o.n(r,i)]},[te.c,r.D,te.c,te.c,o.f]),r._26(4608,o.e,o.e,[o.d,r.D]),r._26(135680,o.m,o.m,[te.c]),r._26(4608,o.l,o.l,[o.e,o.m]),r._26(5120,sl.a,al.d,[]),r._26(5120,sl.c,al.e,[]),r._26(4608,sl.b,al.c,[sl.a,sl.c]),r._26(5120,r.M,al.f,[o.l,sl.b,r.D]),r._26(6144,o.q,null,[o.m]),r._26(4608,r.U,r.U,[r.D]),r._26(4608,o.h,o.h,[te.c]),r._26(4608,o.i,o.i,[te.c]),r._26(4608,ul.b,al.b,[r.M,o.b]),r._26(4608,dl.h,dl.n,[te.c,r.G,dl.l]),r._26(4608,dl.o,dl.o,[dl.h,dl.m]),r._26(5120,dl.a,function(e){return[e,new cl.a]},[dl.o]),r._26(4608,Re.x,Re.x,[]),r._26(4608,Re.d,Re.d,[]),r._26(5120,Uo.a,pl.m,[ge.a]),r._26(4608,fl.a,fl.a,[]),r._26(4608,ut.a,ut.a,[Zn.a,ue.a,st.a,Oe.a,et.a,pe.a]),r._26(4608,hl.a,hl.a,[b.a,Oe.a]),r._26(4608,ml.a,ml.a,[Rn.a,_l.a]),r._26(4608,gl.a,gl.a,[pe.a]),r._26(4608,vl.a,vl.a,[pe.a,nt.a,Oe.a]),r._26(4608,Cl.a,Cl.a,[pe.a,$t.a,yl.a,S.a]),r._26(4608,Dt.a,Dt.a,[pe.a,Rn.a,S.a]),r._26(4608,Pl.a,Pl.a,[Oe.a,fe.a]),r._26(4608,Al.a,Al.a,[S.a,Re.d,Oe.a,fe.a,Je.a,bl.a]),r._26(4608,Il.a,Il.a,[Rn.a]),r._26(4608,Sl.a,Sl.a,[pe.a,Oe.a,S.a,ue.a,El.a,Ml.a]),r._26(4608,wl.a,wl.a,[]),r._26(4608,Fe.a,Fe.a,[]),r._26(4608,kl.a,kl.a,[on.a]),r._26(4608,Tl.a,Tl.a,[X.a,on.a,r.D,yn.a]),r._26(4608,Ye.a,Ye.a,[fn.a,X.a]),r._26(4608,Ol.a,Ol.a,[X.a,on.a,yn.a,fn.a,zr.l]),r._26(4608,Yi.a,Yi.a,[on.a,X.a]),r._26(4608,se.a,se.a,[b.a,Ce.a,pe.a,ae.a,fe.a,ue.a,S.a,on.a,ge.a,Oe.a,ol.a,r.D,X.a,rn.a]),r._26(4608,tl.a,tl.a,[b.a,ge.a,ue.a,Zi.a,rn.a,Dl.a,S.a,ae.a,pe.a,fe.a,xl.a,Oe.a,Fl.a]),r._26(4608,nl.a,nl.a,[]),r._26(512,te.b,te.b,[]),r._26(1024,r.q,o.r,[]),r._26(256,X.b,{pageTransition:"core-page-transition"},[]),r._26(1024,Ll.a,Ll.b,[]),r._26(1024,on.a,on.b,[o.b,Ll.a,r.D]),r._26(1024,X.a,X.c,[X.b,on.a]),r._26(512,yn.a,yn.a,[on.a]),r._26(512,Ul.a,Ul.a,[]),r._26(512,fn.a,fn.a,[X.a,on.a,[2,Ul.a]]),r._26(512,zr.l,zr.l,[fn.a]),r._26(256,Rl.a,{links:[{loadChildren:"../addon/badges/pages/issued-badge/issued-badge.module.ngfactory#AddonBadgesIssuedBadgePageModuleNgFactory",name:"AddonBadgesIssuedBadgePage",segment:"addon-badges-issued-badge",priority:"low",defaultHistory:[]},{loadChildren:"../addon/badges/pages/user-badges/user-badges.module.ngfactory#AddonBadgesUserBadgesPageModuleNgFactory",name:"AddonBadgesUserBadgesPage",segment:"addon-badges-user-badges",priority:"low",defaultHistory:[]},{loadChildren:"../addon/blog/pages/entries/entries.module.ngfactory#AddonBlogEntriesPageModuleNgFactory",name:"AddonBlogEntriesPage",segment:"addon-blog-entries",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/settings/settings.module.ngfactory#AddonCalendarSettingsPageModuleNgFactory",name:"AddonCalendarSettingsPage",segment:"addon-calendar-settings",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competencies/competencies.module.ngfactory#AddonCompetencyCompetenciesPageModuleNgFactory",name:"AddonCompetencyCompetenciesPage",segment:"addon-competency-competencies",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competencysummary/competencysummary.module.ngfactory#AddonCompetencyCompetencySummaryPageModuleNgFactory",name:"AddonCompetencyCompetencySummaryPage",segment:"addon-competency-competency-summary",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/competency/competency.module.ngfactory#AddonCompetencyCompetencyPageModuleNgFactory",name:"AddonCompetencyCompetencyPage",segment:"addon-competency-competency",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/coursecompetencies/coursecompetencies.module.ngfactory#AddonCompetencyCourseCompetenciesPageModuleNgFactory",name:"AddonCompetencyCourseCompetenciesPage",segment:"addon-competency-coursecompetencies",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/plan/plan.module.ngfactory#AddonCompetencyPlanPageModuleNgFactory",name:"AddonCompetencyPlanPage",segment:"addon-competency-plan",priority:"low",defaultHistory:[]},{loadChildren:"../addon/competency/pages/planlist/planlist.module.ngfactory#AddonCompetencyPlanListPageModuleNgFactory",name:"AddonCompetencyPlanListPage",segment:"addon-competency-planlist",priority:"low",defaultHistory:[]},{loadChildren:"../addon/coursecompletion/pages/report/report.module.ngfactory#AddonModFolderIndexPageModuleNgFactory",name:"AddonCourseCompletionReportPage",segment:"addon-course-completion-report",priority:"low",defaultHistory:[]},{loadChildren:"../addon/files/pages/list/list.module.ngfactory#AddonFilesListPageModuleNgFactory",name:"AddonFilesListPage",segment:"addon-files-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messageoutput/airnotifier/pages/devices/devices.module.ngfactory#AddonMessageOutputAirnotifierDevicesPageModuleNgFactory",name:"AddonMessageOutputAirnotifierDevicesPage",segment:"addon-message-output-airnotifier-devices",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/contacts/contacts.module.ngfactory#AddonMessagesContactsPageModuleNgFactory",name:"AddonMessagesContactsPage",segment:"addon-messages-contacts",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/conversation-info/conversation-info.module.ngfactory#AddonMessagesConversationInfoPageModuleNgFactory",name:"AddonMessagesConversationInfoPage",segment:"addon-messages-conversation-info",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/index/index.module.ngfactory#AddonMessagesIndexPageModuleNgFactory",name:"AddonMessagesIndexPage",segment:"addon-messages-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/edit-feedback-modal/edit-feedback-modal.module.ngfactory#AddonModAssignEditFeedbackModalPageModuleNgFactory",name:"AddonModAssignEditFeedbackModalPage",segment:"addon-mod-assign-edit-feedback-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/index/index.module.ngfactory#AddonModAssignIndexPageModuleNgFactory",name:"AddonModAssignIndexPage",segment:"addon-mod-assign-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/submission-review/submission-review.module.ngfactory#AddonModAssignSubmissionReviewPageModuleNgFactory",name:"AddonModAssignSubmissionReviewPage",segment:"addon-mod-assign-submission-review",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/book/pages/index/index.module.ngfactory#AddonModBookIndexPageModuleNgFactory",name:"AddonModBookIndexPage",segment:"addon-mod-book-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/book/pages/toc/toc.module.ngfactory#AddonModBookTocPageModuleNgFactory",name:"AddonModBookTocPage",segment:"addon-mod-book-toc-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/index/index.module.ngfactory#AddonModChatIndexPageModuleNgFactory",name:"AddonModChatIndexPage",segment:"addon-mod-chat-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/session-messages/session-messages.module.ngfactory#AddonModChatSessionMessagesPageModuleNgFactory",name:"AddonModChatSessionMessagesPage",segment:"addon-mod-chat-session-messages",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/sessions/sessions.module.ngfactory#AddonModChatSessionsPageModuleNgFactory",name:"AddonModChatSessionsPage",segment:"addon-mod-chat-sessions",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/users/users.module.ngfactory#AddonModChatUsersPageModuleNgFactory",name:"AddonModChatUsersPage",segment:"addon-mod-chat-users",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/choice/pages/index/index.module.ngfactory#AddonModChoiceIndexPageModuleNgFactory",name:"AddonModChoiceIndexPage",segment:"addon-mod-choice-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/index/index.module.ngfactory#AddonModDataIndexPageModuleNgFactory",name:"AddonModDataIndexPage",segment:"addon-mod-data-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/attempt/attempt.module.ngfactory#AddonModFeedbackAttemptPageModuleNgFactory",name:"AddonModFeedbackAttemptPage",segment:"addon-mod-feedback-attempt",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/index/index.module.ngfactory#AddonModFeedbackIndexPageModuleNgFactory",name:"AddonModFeedbackIndexPage",segment:"addon-mod-feedback-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/nonrespondents/nonrespondents.module.ngfactory#AddonModFeedbackNonRespondentsPageModuleNgFactory",name:"AddonModFeedbackNonRespondentsPage",segment:"addon-mod-feedback-nonrespondents",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/respondents/respondents.module.ngfactory#AddonModFeedbackRespondentsPageModuleNgFactory",name:"AddonModFeedbackRespondentsPage",segment:"addon-mod-feedback-respondents",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/folder/pages/index/index.module.ngfactory#AddonModFolderIndexPageModuleNgFactory",name:"AddonModFolderIndexPage",segment:"addon-mod-folder-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/edit-post/edit-post.module.ngfactory#AddonModForumEditPostPageModuleNgFactory",name:"AddonModForumEditPostPage",segment:"addon-mod-edit-post",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/index/index.module.ngfactory#AddonModForumIndexPageModuleNgFactory",name:"AddonModForumIndexPage",segment:"addon-mod-forum-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/sort-order-selector/sort-order-selector.module.ngfactory#AddonModForumSortOrderSelectorPagePageModuleNgFactory",name:"AddonModForumSortOrderSelectorPage",segment:"addon-mod-forum-sort-order-selector",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/entry/entry.module.ngfactory#AddonModForumDiscussionPageModuleNgFactory",name:"AddonModGlossaryEntryPage",segment:"addon-mod-glossary-entry",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/index/index.module.ngfactory#AddonModGlossaryIndexPageModuleNgFactory",name:"AddonModGlossaryIndexPage",segment:"addon-mod-glossary-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/imscp/pages/index/index.module.ngfactory#AddonModImscpIndexPageModuleNgFactory",name:"AddonModImscpIndexPage",segment:"addon-mod-imscp-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/imscp/pages/toc/toc.module.ngfactory#AddonModImscpTocPageModuleNgFactory",name:"AddonModImscpTocPage",segment:"addon-mod-imscp-toc-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/index/index.module.ngfactory#AddonModLessonIndexPageModuleNgFactory",name:"AddonModLessonIndexPage",segment:"addon-mod-lesson-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/menu-modal/menu-modal.module.ngfactory#AddonModLessonMenuModalPageModuleNgFactory",name:"AddonModLessonMenuModalPage",segment:"addon-mod-lesson-menu-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/password-modal/password-modal.module.ngfactory#AddonModLessonPasswordModalPageModuleNgFactory",name:"AddonModLessonPasswordModalPage",segment:"addon-mod-lesson-password-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lti/pages/index/index.module.ngfactory#AddonModLtiIndexPageModuleNgFactory",name:"AddonModLtiIndexPage",segment:"addon-mod-lti-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/page/pages/index/index.module.ngfactory#AddonModPageIndexPageModuleNgFactory",name:"AddonModPageIndexPage",segment:"addon-mod-page-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/attempt/attempt.module.ngfactory#AddonModQuizAttemptPageModuleNgFactory",name:"AddonModQuizAttemptPage",segment:"addon-mod-quiz-attempt",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/index/index.module.ngfactory#AddonModQuizIndexPageModuleNgFactory",name:"AddonModQuizIndexPage",segment:"addon-mod-quiz-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/navigation-modal/navigation-modal.module.ngfactory#AddonModQuizNavigationModalPageModuleNgFactory",name:"AddonModQuizNavigationModalPage",segment:"addon-mod-quiz-navigation-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/preflight-modal/preflight-modal.module.ngfactory#AddonModQuizPreflightModalModuleNgFactory",name:"AddonModQuizPreflightModalPage",segment:"addon-mod-quiz-preflight-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/resource/pages/index/index.module.ngfactory#AddonModResourceIndexPageModuleNgFactory",name:"AddonModResourceIndexPage",segment:"addon-mod-resource-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/index/index.module.ngfactory#AddonModScormIndexPageModuleNgFactory",name:"AddonModScormIndexPage",segment:"addon-mod-scorm-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/toc/toc.module.ngfactory#AddonModScormTocPageModuleNgFactory",name:"AddonModScormTocPage",segment:"addon-mod-scorm-toc-modal",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/survey/pages/index/index.module.ngfactory#AddonModSurveyIndexPageModuleNgFactory",name:"AddonModSurveyIndexPage",segment:"addon-mod-survey-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/url/pages/index/index.module.ngfactory#AddonModUrlIndexPageModuleNgFactory",name:"AddonModUrlIndexPage",segment:"addon-mod-url-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/index/index.module.ngfactory#AddonModWikiIndexPageModuleNgFactory",name:"AddonModWikiIndexPage",segment:"addon-mod-wiki-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/map/map.module.ngfactory#AddonModWikiMapPageModuleNgFactory",name:"AddonModWikiMapPage",segment:"addon-mod-wiki-map",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/index/index.module.ngfactory#AddonModWorkshopIndexPageModuleNgFactory",name:"AddonModWorkshopIndexPage",segment:"addon-mod-workshop-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/phase/phase.module.ngfactory#AddonModWorkshopPhaseInfoPageModuleNgFactory",name:"AddonModWorkshopPhaseInfoPage",segment:"addon-mod-workshop-phase-info",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notes/pages/add/add.module.ngfactory#AddonNotesAddPageModuleNgFactory",name:"AddonNotesAddPage",segment:"addon-notes-add",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notes/pages/list/list.module.ngfactory#AddonNotesListPageModuleNgFactory",name:"AddonNotesListPage",segment:"addon-notes-list-page",priority:"low",defaultHistory:[]},{loadChildren:"../addon/storagemanager/pages/course-storage/course-storage.module.ngfactory#AddonStorageManagerCourseStoragePageModuleNgFactory",name:"AddonStorageManagerCourseStoragePage",segment:"addon-storagemanager-course-storage",priority:"low",defaultHistory:[]},{loadChildren:"../components/split-view/placeholder/placeholder.module.ngfactory#CorePlaceholderPageModuleNgFactory",name:"CoreSplitViewPlaceholderPage",segment:"core-placeholder",priority:"low",defaultHistory:[]},{loadChildren:"../core/comments/pages/add/add.module.ngfactory#CoreCommentsAddPageModuleNgFactory",name:"CoreCommentsAddPage",segment:"core-comments-add",priority:"low",defaultHistory:[]},{loadChildren:"../core/contentlinks/pages/choose-site/choose-site.module.ngfactory#CoreContentLinksChooseSitePageModuleNgFactory",name:"CoreContentLinksChooseSitePage",segment:"core-content-links-choose-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/list-mod-type/list-mod-type.module.ngfactory#CoreCourseListModTypePageModuleNgFactory",name:"CoreCourseListModTypePage",segment:"core-course-list-mod-type",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/section-selector/section-selector.module.ngfactory#CoreCourseSectionSelectorPageModuleNgFactory",name:"CoreCourseSectionSelectorPage",segment:"core-course-section-selector",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/unsupported-module/unsupported-module.module.ngfactory#CoreCourseUnsupportedModulePageModuleNgFactory",name:"CoreCourseUnsupportedModulePage",segment:"core-course-unsupported-module",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/available-courses/available-courses.module.ngfactory#CoreCoursesAvailableCoursesPageModuleNgFactory",name:"CoreCoursesAvailableCoursesPage",segment:"core-courses-available-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/categories/categories.module.ngfactory#CoreCoursesCategoriesPageModuleNgFactory",name:"CoreCoursesCategoriesPage",segment:"core-courses-categories",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/my-courses/my-courses.module.ngfactory#CoreCoursesMyCoursesPageModuleNgFactory",name:"CoreCoursesMyCoursesPage",segment:"core-courses-my-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/search/search.module.ngfactory#CoreCoursesSearchPageModuleNgFactory",name:"CoreCoursesSearchPage",segment:"core-courses-search",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/self-enrol-password/self-enrol-password.module.ngfactory#CoreCoursesSelfEnrolPasswordPageModuleNgFactory",name:"CoreCoursesSelfEnrolPasswordPage",segment:"core-courses-self-enrol-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/course/course.module.ngfactory#CoreGradesCoursePageModuleNgFactory",name:"CoreGradesCoursePage",segment:"core-grades-course",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/courses/courses.module.ngfactory#CoreGradesCoursesPageModuleNgFactory",name:"CoreGradesCoursesPage",segment:"core-grades-courses",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/coursesplit/coursesplit.module.ngfactory#CoreGradesCourseSplitPageModuleNgFactory",name:"CoreGradesCourseSplitPage",segment:"core-grades-course-split",priority:"low",defaultHistory:[]},{loadChildren:"../core/grades/pages/grade/grade.module.ngfactory#CoreGradesGradePageModuleNgFactory",name:"CoreGradesGradePage",segment:"core-grades-grade",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/change-password/change-password.module.ngfactory#CoreLoginChangePasswordPageModuleNgFactory",name:"CoreLoginChangePasswordPage",segment:"core-login-change-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/forgotten-password/forgotten-password.module.ngfactory#CoreLoginForgottenPasswordPageModuleNgFactory",name:"CoreLoginForgottenPasswordPage",segment:"core-login-forgotten-password",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/init/init.module.ngfactory#CoreLoginInitPageModuleNgFactory",name:"CoreLoginInitPage",segment:"core-login-init",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/reconnect/reconnect.module.ngfactory#CoreLoginReconnectPageModuleNgFactory",name:"CoreLoginReconnectPage",segment:"core-login-reconnect",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-error/site-error.module.ngfactory#CoreLoginSiteErrorPageModuleNgFactory",name:"CoreLoginSiteErrorPage",segment:"core-login-site-error",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-help/site-help.module.ngfactory#CoreLoginSiteHelpPageModuleNgFactory",name:"CoreLoginSiteHelpPage",segment:"core-login-site-help",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site-policy/site-policy.module.ngfactory#CoreLoginSitePolicyPageModuleNgFactory",name:"CoreLoginSitePolicyPage",segment:"core-login-site-policy",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/sites/sites.module.ngfactory#CoreLoginSitesPageModuleNgFactory",name:"CoreLoginSitesPage",segment:"core-login-sites",priority:"low",defaultHistory:[]},{loadChildren:"../core/mainmenu/pages/more/more.module.ngfactory#CoreMainMenuPageModuleNgFactory",name:"CoreMainMenuMorePage",segment:"core-mainmenu-more",priority:"low",defaultHistory:[]},{loadChildren:"../core/rating/pages/ratings/ratings.module.ngfactory#CoreRatingRatingsPageModuleNgFactory",name:"CoreRatingRatingsPage",segment:"core-rating-ratings",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/about/about.module.ngfactory#CoreSettingsAboutPageModuleNgFactory",name:"CoreSettingsAboutPage",segment:"core-settings-about",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/app/app.module.ngfactory#CoreAppSettingsPageModuleNgFactory",name:"CoreAppSettingsPage",segment:"core-settings-app",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/general/general.module.ngfactory#CoreSettingsGeneralPageModuleNgFactory",name:"CoreSettingsGeneralPage",segment:"core-settings-general",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/licenses/licenses.module.ngfactory#CoreSettingsLicensesPageModuleNgFactory",name:"CoreSettingsLicensesPage",segment:"core-settings-licenses",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/site/site.module.ngfactory#CoreSitePreferencesPageModuleNgFactory",name:"CoreSitePreferencesPage",segment:"core-site-preferences",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/space-usage/space-usage.module.ngfactory#CoreSettingsSpaceUsagePageModuleNgFactory",name:"CoreSettingsSpaceUsagePage",segment:"core-settings-space-usage",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/synchronization/synchronization.module.ngfactory#CoreSettingsSynchronizationPageModuleNgFactory",name:"CoreSettingsSynchronizationPage",segment:"core-settings-synchronization",priority:"low",defaultHistory:[]},{loadChildren:"../core/sharedfiles/pages/choose-site/choose-site.module.ngfactory#CoreSharedFilesChooseSitePageModuleNgFactory",name:"CoreSharedFilesChooseSitePage",segment:"core-shared-files-choose-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/sharedfiles/pages/list/list.module.ngfactory#CoreSharedFilesListPageModuleNgFactory",name:"CoreSharedFilesListPage",segment:"core-shared-files-list",priority:"low",defaultHistory:[]},{loadChildren:"../core/sitehome/pages/index/index.module.ngfactory#CoreSiteHomeIndexPageModuleNgFactory",name:"CoreSiteHomeIndexPage",segment:"core-sitehome-index",priority:"low",defaultHistory:[]},{loadChildren:"../core/siteplugins/pages/module-index/module-index.module.ngfactory#CoreSitePluginsModuleIndexPageModuleNgFactory",name:"CoreSitePluginsModuleIndexPage",segment:"core-site-plugins-module-index-page",priority:"low",defaultHistory:[]},{loadChildren:"../core/siteplugins/pages/plugin-page/plugin-page.module.ngfactory#CoreSitePluginsPluginPageModuleNgFactory",name:"CoreSitePluginsPluginPage",segment:"core-site-plugins-plugin-page",priority:"low",defaultHistory:[]},{loadChildren:"../core/tag/pages/index-area/index-area.module.ngfactory#CoreTagIndexAreaPageModuleNgFactory",name:"CoreTagIndexAreaPage",segment:"core-tag-index-area",priority:"low",defaultHistory:[]},{loadChildren:"../core/tag/pages/index/index.module.ngfactory#CoreTagIndexPageModuleNgFactory",name:"CoreTagIndexPage",segment:"core-tag-index",priority:"low",defaultHistory:[]},{loadChildren:"../core/tag/pages/search/search.module.ngfactory#CoreTagSerchPageModuleNgFactory",name:"CoreTagSearchPage",segment:"core-tag-search",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/about/about.module.ngfactory#CoreUserAboutPageModuleNgFactory",name:"CoreUserAboutPage",segment:"core-user-about",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/participants/participants.module.ngfactory#CoreUserParticipantsPageModuleNgFactory",name:"CoreUserParticipantsPage",segment:"core-user-participants",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/iframe/iframe.module.ngfactory#CoreViewerIframePageModuleNgFactory",name:"CoreViewerIframePage",segment:"core-viewer-iframe",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/image/image.module.ngfactory#CoreViewerImagePageModuleNgFactory",name:"CoreViewerImagePage",segment:"core-viewer-image",priority:"low",defaultHistory:[]},{loadChildren:"../core/viewer/pages/text/text.module.ngfactory#CoreViewerTextPageModuleNgFactory",name:"CoreViewerTextPage",segment:"core-viewer-text",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/index/index.module.ngfactory#AddonCalendarIndexPageModuleNgFactory",name:"AddonCalendarIndexPage",segment:"addon-calendar-index",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/search/search.module.ngfactory#AddonMessagesSearchPageModuleNgFactory",name:"AddonMessagesSearchPage",segment:"addon-messages-search",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/settings/settings.module.ngfactory#AddonMessagesSettingsPageModuleNgFactory",name:"AddonMessagesSettingsPage",segment:"addon-messages-settings",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/edit/edit.module.ngfactory#AddonModAssignEditPageModuleNgFactory",name:"AddonModAssignEditPage",segment:"addon-mod-assign-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/assign/pages/submission-list/submission-list.module.ngfactory#AddonModAssignSubmissionListPageModuleNgFactory",name:"AddonModAssignSubmissionListPage",segment:"addon-mod-assign-submission-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/chat/pages/chat/chat.module.ngfactory#AddonModChatChatPageModuleNgFactory",name:"AddonModChatChatPage",segment:"addon-mod-chat-chat",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/edit/edit.module.ngfactory#AddonModDataEditPageModuleNgFactory",name:"AddonModDataEditPage",segment:"addon-mod-data-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/entry/entry.module.ngfactory#AddonModDataEntryPageModuleNgFactory",name:"AddonModDataEntryPage",segment:"addon-mod-data-entry",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/data/pages/search/search.module.ngfactory#AddonModDataSearchPageModuleNgFactory",name:"AddonModDataSearchPage",segment:"addon-mod-data-search",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/feedback/pages/form/form.module.ngfactory#AddonModFeedbackFormPageModuleNgFactory",name:"AddonModFeedbackFormPage",segment:"addon-mod-feedback-form",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/glossary/pages/edit/edit.module.ngfactory#AddonModGlossaryNewDiscussionPageModuleNgFactory",name:"AddonModGlossaryEditPage",segment:"addon-mod-glossary-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/user-retake/user-retake.module.ngfactory#AddonModLessonUserRetakePageModuleNgFactory",name:"AddonModLessonUserRetakePage",segment:"addon-mod-lesson-user-retake",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/review/review.module.ngfactory#AddonModQuizReviewPageModuleNgFactory",name:"AddonModQuizReviewPage",segment:"addon-mod-quiz-review",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/assessment/assessment.module.ngfactory#AddonModWorkshopAssessmentPageModuleNgFactory",name:"AddonModWorkshopAssessmentPage",segment:"addon-mod-workshop-assessment",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/edit-submission/edit-submission.module.ngfactory#AddonModWorkshopEditSubmissionPageModuleNgFactory",name:"AddonModWorkshopEditSubmissionPage",segment:"addon-mod-workshop-edit-submission",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notifications/pages/list/list.module.ngfactory#AddonNotificationsListPageModuleNgFactory",name:"AddonNotificationsListPage",segment:"addon-notifications-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/notifications/pages/settings/settings.module.ngfactory#AddonNotificationsSettingsPageModuleNgFactory",name:"AddonNotificationsSettingsPage",segment:"addon-notifications-settings",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/dashboard/dashboard.module.ngfactory#CoreCoursesDashboardPageModuleNgFactory",name:"CoreCoursesDashboardPage",segment:"core-courses-dashboard",priority:"low",defaultHistory:[]},{loadChildren:"../core/emulator/pages/capture-media/capture-media.module.ngfactory#CoreEmulatorCaptureMediaPageModuleNgFactory",name:"CoreEmulatorCaptureMediaPage",segment:"core-emulator-capture-media",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/credentials/credentials.module.ngfactory#CoreLoginCredentialsPageModuleNgFactory",name:"CoreLoginCredentialsPage",segment:"core-login-credentials",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/email-signup/email-signup.module.ngfactory#CoreLoginCredentialsPageModuleNgFactory",name:"CoreLoginEmailSignupPage",segment:"core-login-email-signup",priority:"low",defaultHistory:[]},{loadChildren:"../core/login/pages/site/site.module.ngfactory#CoreLoginSitePageModuleNgFactory",name:"CoreLoginSitePage",segment:"core-login-site",priority:"low",defaultHistory:[]},{loadChildren:"../core/mainmenu/pages/menu/menu.module.ngfactory#CoreMainMenuPageModuleNgFactory",name:"CoreMainMenuPage",segment:"core-mainmenu",priority:"low",defaultHistory:[]},{loadChildren:"../core/settings/pages/deviceinfo/deviceinfo.module.ngfactory#CoreSettingsDeviceInfoPageModuleNgFactory",name:"CoreSettingsDeviceInfoPage",segment:"core-settings-deviceinfo",priority:"low",defaultHistory:[]},{loadChildren:"../core/user/pages/profile/profile.module.ngfactory#CoreUserProfilePageModuleNgFactory",name:"CoreUserProfilePage",segment:"core-user-profile",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/edit-event/edit-event.module.ngfactory#AddonCalendarEditEventPageModuleNgFactory",name:"AddonCalendarEditEventPage",segment:"addon-calendar-edit-event",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/event/event.module.ngfactory#AddonCalendarEventPageModuleNgFactory",name:"AddonCalendarEventPage",segment:"addon-calendar-event",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/new-discussion/new-discussion.module.ngfactory#AddonModForumNewDiscussionPageModuleNgFactory",name:"AddonModForumNewDiscussionPage",segment:"addon-mod-forum-new-discussion",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/scorm/pages/player/player.module.ngfactory#AddonModScormPlayerPageModuleNgFactory",name:"AddonModScormPlayerPage",segment:"addon-mod-scorm-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/wiki/pages/edit/edit.module.ngfactory#AddonModWikiEditPageModuleNgFactory",name:"AddonModWikiEditPage",segment:"addon-mod-wiki-edit",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/workshop/pages/submission/submission.module.ngfactory#AddonModWorkshopSubmissionPageModuleNgFactory",name:"AddonModWorkshopSubmissionPage",segment:"addon-mod-workshop-submission",priority:"low",defaultHistory:[]},{loadChildren:"../core/comments/pages/viewer/viewer.module.ngfactory#CoreCommentsViewerPageModuleNgFactory",name:"CoreCommentsViewerPage",segment:"core-comments-viewer",priority:"low",defaultHistory:[]},{loadChildren:"../core/course/pages/section/section.module.ngfactory#CoreCourseSectionPageModuleNgFactory",name:"CoreCourseSectionPage",segment:"core-course-section",priority:"low",defaultHistory:[]},{loadChildren:"../core/courses/pages/course-preview/course-preview.module.ngfactory#CoreCoursesCoursePreviewPageModuleNgFactory",name:"CoreCoursesCoursePreviewPage",segment:"core-courses-course-preview",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/day/day.module.ngfactory#AddonCalendarDayPageModuleNgFactory",name:"AddonCalendarDayPage",segment:"addon-calendar-day",priority:"low",defaultHistory:[]},{loadChildren:"../addon/calendar/pages/list/list.module.ngfactory#AddonCalendarListPageModuleNgFactory",name:"AddonCalendarListPage",segment:"addon-calendar-list",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/group-conversations/group-conversations.module.ngfactory#AddonMessagesGroupConversationsPageModuleNgFactory",name:"AddonMessagesGroupConversationsPage",segment:"addon-messages-group-conversations",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/forum/pages/discussion/discussion.module.ngfactory#AddonModForumDiscussionPageModuleNgFactory",name:"AddonModForumDiscussionPage",segment:"addon-mod-forum-discussion",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/lesson/pages/player/player.module.ngfactory#AddonModLessonPlayerPageModuleNgFactory",name:"AddonModLessonPlayerPage",segment:"addon-mod-lesson-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/mod/quiz/pages/player/player.module.ngfactory#AddonModQuizPlayerPageModuleNgFactory",name:"AddonModQuizPlayerPage",segment:"addon-mod-quiz-player",priority:"low",defaultHistory:[]},{loadChildren:"../addon/messages/pages/discussion/discussion.module.ngfactory#AddonMessagesDiscussionPageModuleNgFactory",name:"AddonMessagesDiscussionPage",segment:"addon-messages-discussion",priority:"low",defaultHistory:[]}]},[]),r._26(512,r.j,r.j,[]),r._26(512,Hl.a,Hl.a,[r.j]),r._26(1024,Nl.b,Nl.c,[Hl.a,r.u]),r._26(1024,r.c,function(e,n,t,r,i,l,s,a,u,d,c,p,f){return[o.u(e),Bl.a(n),wl.b(t,r),Ol.b(i,l,s,a,u),Nl.d(d,c,p,f)]},[[2,r.C],X.a,on.a,yn.a,X.a,on.a,yn.a,fn.a,zr.l,X.a,Rl.a,Nl.b,r.D]),r._26(512,r.d,r.d,[[2,r.c]]),r._26(131584,r.f,r.f,[r.D,r._7,r.u,r.q,r.n,r.d]),r._26(512,r.e,r.e,[r.f]),r._26(512,o.a,o.a,[[3,o.a]]),r._26(512,al.a,al.a,[]),r._26(512,dl.e,dl.e,[]),r._26(512,dl.d,dl.d,[]),r._26(512,Re.v,Re.v,[]),r._26(512,Re.i,Re.i,[]),r._26(512,Re.s,Re.s,[]),r._26(512,Vl.a,Vl.a,[]),r._26(512,Wl.a,Wl.a,[]),r._26(512,Kl.a,Kl.a,[]),r._26(512,ql.a,ql.a,[]),r._26(512,Gl.a,Gl.a,[]),r._26(512,jl.a,jl.a,[]),r._26(512,Ql.a,Ql.a,[jl.a,on.a]),r._26(512,Ji.a,Ji.a,[]),r._26(1024,ol.a,pl.f,[on.a]),r._26(512,b.a,b.a,[]),r._26(512,_e.a,_e.a,[b.a]),r._26(512,zl.a,zl.a,[]),r._26(512,ge.a,ge.a,[Ql.a,on.a,Ji.a,fn.a,ol.a,b.a,_e.a,r.D,Ul.a,zl.a]),r._26(512,$l.a,$l.a,[]),r._26(512,dl.k,dl.k,[]),r._26(2048,dl.i,null,[dl.k]),r._26(512,dl.g,dl.g,[dl.i]),r._26(2048,dl.b,null,[dl.g]),r._26(512,dl.f,dl.j,[dl.b,r.u]),r._26(512,dl.c,dl.c,[dl.f]),r._26(1024,Yl.b,i.d,[dl.c]),r._26(512,Xl.a,Xl.b,[]),r._26(512,Jl.b,Jl.a,[]),r._26(512,Zl.b,Zl.a,[]),r._26(256,Oe.b,void 0,[]),r._26(256,Oe.c,void 0,[]),r._26(512,Oe.a,Oe.a,[$l.a,Yl.b,Xl.a,Jl.b,Zl.b,Oe.b,Oe.c]),r._26(512,es.a,es.a,[ge.a]),r._26(1024,ns.a,pl.n,[ge.a]),r._26(512,el.a,el.a,[Oe.a,es.a,on.a,ns.a,X.a]),r._26(1024,Rl.b,Rl.d,[fn.a,Rl.a]),r._26(512,te.g,ts.a,[]),r._26(512,te.f,te.f,[te.g]),r._26(1024,hn.a,hn.b,[fn.a,Rl.b,te.f,Nl.b,r.n]),r._26(512,uo.a,uo.a,[fn.a,X.a,hn.a]),r._26(512,o.c,o.s,[te.c]),r._26(512,fe.a,fe.a,[Oe.a,el.a,uo.a,o.c,on.a]),r._26(512,Gt.a,Gt.a,[dl.c,b.a,Oe.a,fe.a]),r._26(1024,os.a,pl.j,[ge.a,fe.a,Gt.a]),r._26(1024,rs.a,pl.h,[ge.a,os.a,fe.a]),r._26(512,Ce.a,Ce.a,[b.a,on.a,os.a,ge.a,fe.a,rs.a,Gt.a]),r._26(512,ae.a,ae.a,[el.a,fe.a]),r._26(1024,is.a,pl.o,[ge.a,Ce.a,ae.a]),r._26(1024,ls.a,pl.i,[ge.a]),r._26(512,ss.a,ss.a,[fn.a,X.a]),r._26(512,as.a,as.a,[fn.a,X.a]),r._26(512,us.a,us.a,[fn.a,X.a]),r._26(512,et.a,et.a,[fn.a,X.a,hn.a]),r._26(512,S.a,S.a,[Oe.a,ss.a,as.a,us.a,fe.a,ge.a,on.a,es.a,ae.a,uo.a,o.c,et.a,Ce.a,b.a,_e.a]),r._26(1024,ds.a,pl.k,[ge.a]),r._26(512,cs.a,cs.a,[]),r._26(1024,ps.a,pl.l,[ge.a,Ce.a]),r._26(512,fs.a,fs.a,[dl.c,Oe.a,ge.a,fe.a,Ce.a,ps.a,Gt.a,b.a]),r._26(512,ue.a,ue.a,[is.a,ge.a,ls.a,S.a,b.a,Oe.a,on.a,el.a,_e.a,ds.a,Gt.a,cs.a,fs.a,r.D,fe.a]),r._26(512,Dl.a,Dl.a,[b.a,on.a,ue.a]),r._26(512,hs.a,hs.a,[r.u]),r._26(512,pe.a,pe.a,[b.a,dl.c,hs.a,ge.a,Oe.a,ae.a,_e.a,fe.a,ue.a,r.u,fs.a,S.a]),r._26(1024,ms.a,pl.p,[ge.a,ue.a,fe.a]),r._26(512,_s.a,_s.a,[ue.a,Gt.a,uo.a]),r._26(512,Je.a,Je.a,[Oe.a]),r._26(1024,gs.a,pl.g,[ge.a]),r._26(512,vs.a,vs.a,[b.a,ms.a,on.a,ge.a,ue.a,es.a,fe.a,Oe.a,us.a,_e.a,gs.a,r.D]),r._26(512,Cs.a,Cs.a,[os.a,Ce.a,ue.a,b.a,pe.a,ms.a,_s.a,Je.a,ge.a,vs.a]),r._26(512,pl.a,pl.a,[ge.a,Dl.a,Cs.a,on.a]),r._26(512,Vl.b,Vl.b,[]),r._26(512,ys.a,ys.a,[]),r._26(512,Ps.a,Ps.a,[b.a,ge.a,es.a,ue.a,ol.a,r.D]),r._26(512,As.a,As.a,[pe.a]),r._26(512,bs.b,bs.b,[Ps.a,As.a]),r._26(512,Is.b,Is.b,[]),r._26(512,Ss.a,Ss.a,[b.a,pe.a,_e.a]),r._26(512,xl.a,xl.a,[b.a,pe.a,ae.a,ue.a]),r._26(512,Zn.a,Zn.a,[b.a,pe.a,_e.a]),r._26(512,Es.a,Es.a,[pe.a]),r._26(512,Ms.a,Ms.a,[pe.a]),r._26(512,ws.a,ws.a,[Zn.a,r.u]),r._26(512,ks.a,ks.a,[b.a,pe.a,_e.a,ws.a]),r._26(512,ve.a,ve.a,[b.a,pe.a,_e.a]),r._26(512,me.a,me.a,[b.a,ge.a,Ce.a,pe.a,fs.a,fe.a,ue.a,Gt.a,ae.a,Je.a,_e.a,Dl.a,ol.a,ve.a,S.a,r.D]),r._26(512,Fl.a,Fl.a,[b.a,pe.a,ue.a,el.a,ge.a,on.a,me.a,Zn.a,fe.a,_e.a]),r._26(512,Ts.a,Ts.a,[b.a,pe.a,ue.a]),r._26(1024,Os.a,pl.c,[ge.a]),r._26(512,Ds.a,Ds.a,[]),r._26(512,xs.a,xs.a,[]),r._26(512,un.a,un.a,[b.a,pe.a,_e.a,xs.a]),r._26(512,sn.a,sn.a,[b.a,_e.a,pe.a,fe.a,un.a,ge.a]),r._26(512,Fs.a,Fs.a,[b.a,ge.a,Dl.a,Ts.a,pe.a,Os.a,vs.a,ue.a,fe.a,gs.a,es.a,Ds.a,r.D,Oe.a,on.a,hs.a,sn.a,un.a]),r._26(512,Rn.a,Rn.a,[b.a,pe.a,_e.a,ue.a,Je.a,Oe.a,Ms.a,ge.a,ks.a,Fl.a,S.a,Fs.a]),r._26(512,Ls.a,Ls.a,[pe.a,Oe.a,Zn.a]),r._26(512,Us.a,Us.a,[pe.a]),r._26(512,nt.a,nt.a,[b.a,pe.a,ue.a,me.a,ge.a,Us.a,Fs.a]),r._26(512,Rs.a,Rs.a,[Ce.a,pe.a,fe.a]),r._26(512,Hs.a,Hs.a,[pe.a,Je.a,fe.a,ue.a,ge.a,Fs.a]),r._26(512,Ns.a,Ns.a,[ge.a,pe.a,Ls.a,me.a,nt.a,Oe.a,ue.a,Rs.a,Hs.a]),r._26(512,_t.a,_t.a,[b.a,pe.a,Rn.a,Ns.a]),r._26(512,It.a,It.a,[pe.a,Es.a]),r._26(512,Bs.a,Bs.a,[]),r._26(512,_l.a,_l.a,[b.a,pe.a,_e.a,Bs.a,Fl.a]),r._26(512,Vs.a,Vs.a,[Zn.a,Es.a,_t.a,It.a,_l.a,pe.a]),r._26(512,Ws.a,Ws.a,[pe.a,Rn.a]),r._26(512,M.a,M.a,[b.a,pe.a,_e.a,Rn.a,Ws.a]),r._26(512,ye.a,ye.a,[Ce.a,me.a,pe.a,ge.a,Oe.a,ue.a,fs.a]),r._26(512,ht.a,ht.a,[b.a,pe.a,ue.a,Rn.a,me.a,Je.a,Ce.a,_e.a,ye.a]),r._26(512,Zi.a,Zi.a,[b.a,pe.a,S.a,fs.a,Oe.a,fe.a,_e.a,ge.a,ue.a,ae.a,es.a,on.a,Dl.a,Fl.a,te.f,us.a,Rn.a]),r._26(512,at.a,at.a,[b.a,pe.a,ue.a,_e.a,Zn.a]),r._26(512,an.a,an.a,[b.a,_e.a,ge.a,pe.a,un.a,Rn.a,sn.a,Zn.a]),r._26(512,Jn.a,Jn.a,[Rn.a,S.a,M.a,ht.a,me.a,pe.a,fe.a,Je.a,ue.a,Oe.a,Zi.a,at.a,_t.a,_e.a,ye.a,ge.a,Ce.a,r.u,Zn.a,Ms.a,b.a,an.a]),r._26(512,Ks.a,Ks.a,[pe.a,Zn.a,S.a,Oe.a,Rn.a,fe.a,Jn.a,b.a]),r._26(512,qs.a,qs.a,[el.a,pe.a,Ss.a,ue.a]),r._26(512,rn.a,rn.a,[b.a,pe.a,Zi.a,xl.a,ge.a,S.a,ae.a,Oe.a,Dl.a,_e.a,fe.a,Fl.a,r.D,ue.a,qs.a]),r._26(512,Gs.a,Gs.a,[Zn.a,rn.a]),r._26(512,js.a,js.a,[Zi.a,Vs.a]),r._26(512,Qs.a,Qs.a,[ue.a,S.a,Jn.a,Zi.a]),r._26(512,zs.a,zs.a,[ue.a,S.a,pe.a,Jn.a,Zi.a,fe.a,Zn.a]),r._26(512,$s.b,$s.b,[Ss.a,xl.a,Vs.a,Ks.a,Gs.a,js.a,Ts.a,Qs.a,zs.a]),r._26(512,Ys.a,Ys.a,[b.a,pe.a,_e.a]),r._26(1024,Xs.a,pl.e,[ge.a,_s.a]),r._26(1024,Js.a,pl.d,[ge.a,_s.a]),r._26(512,zt.a,zt.a,[b.a,Ce.a,fe.a,ue.a,pe.a,Je.a,Gt.a,me.a,on.a,Oe.a,Xs.a,Js.a]),r._26(512,Zs.a,Zs.a,[fn.a,X.a]),r._26(512,$t.a,$t.a,[b.a,ge.a,Oe.a,zt.a,S.a,fe.a,Ce.a,ue.a,Zs.a,Ys.a,Js.a,on.a]),r._26(512,ea.a,ea.a,[ge.a,ue.a,$t.a]),r._26(512,na.a,na.a,[ge.a,ue.a,on.a,$t.a]),r._26(512,ta.a,ta.a,[ge.a,ue.a,$t.a]),r._26(512,oa.a,oa.a,[ge.a,ue.a,on.a,$t.a]),r._26(512,ra.a,ra.a,[ge.a,on.a,Je.a,$t.a,zt.a,S.a]),r._26(512,ia.b,ia.b,[Ys.a,ea.a,na.a,ta.a,oa.a,ra.a]),r._26(512,la.a,la.a,[b.a,Ce.a,ge.a,fe.a,Gt.a,pe.a,_e.a]),r._26(512,sa.a,sa.a,[b.a,us.a,Oe.a,ue.a,pe.a,uo.a,zt.a,Dl.a,la.a,S.a,Ce.a,ge.a]),r._26(512,aa.a,aa.a,[sa.a,on.a]),r._26(512,ua.b,ua.b,[on.a,Ys.a,aa.a,sa.a,_e.a]),r._26(512,da.a,da.a,[M.a]),r._26(512,ca.a,ca.a,[ks.a,da.a]),r._26(512,pa.a,pa.a,[]),r._26(512,fa.a,fa.a,[ks.a,pa.a]),r._26(512,ha.a,ha.a,[Je.a]),r._26(512,ma.a,ma.a,[ks.a,ha.a]),r._26(512,_a.a,_a.a,[M.a]),r._26(512,ga.a,ga.a,[ks.a,_a.a]),r._26(512,va.a,va.a,[_e.a,pe.a]),r._26(512,Ca.a,Ca.a,[pe.a,b.a,ge.a,Ms.a,_e.a,Rn.a,Oe.a,ue.a,fe.a,va.a,Je.a,Hs.a]),r._26(512,ya.a,ya.a,[Ca.a]),r._26(512,Pa.a,Pa.a,[Rn.a,pe.a]),r._26(512,Aa.a,Aa.a,[b.a,pe.a,_e.a]),r._26(512,ba.a,ba.a,[S.a]),r._26(512,Ia.a,Ia.a,[S.a]),r._26(512,Sa.a,Sa.a,[Ia.a]),r._26(512,Ea.b,Ea.b,[Ps.a,ya.a,Pa.a,on.a,_e.a,Aa.a,ba.a,Sa.a]),r._26(512,Ma.a,Ma.a,[pe.a,_t.a,rn.a]),r._26(512,wa.b,wa.b,[xl.a,Ma.a]),r._26(512,ka.b,ka.b,[]),r._26(512,Ta.a,Ta.a,[]),r._26(512,Oa.a,Oa.a,[]),r._26(512,Da.a,Da.a,[b.a,pe.a,Zn.a,_e.a,ue.a]),r._26(512,xa.a,xa.a,[pe.a,ue.a]),r._26(512,Fa.a,Fa.a,[rn.a]),r._26(512,La.a,La.a,[nt.a]),r._26(512,Ua.a,Ua.a,[nt.a,Jn.a,S.a,rn.a,Rn.a]),r._26(512,Ra.a,Ra.a,[b.a,pe.a,ge.a,Oe.a,va.a,fe.a,Us.a,nt.a,ue.a,Je.a]),r._26(512,Ha.a,Ha.a,[Ra.a]),r._26(512,Na.a,Na.a,[S.a]),r._26(512,Ba.b,Ba.b,[Da.a,xa.a,_e.a,pe.a,nt.a,xl.a,Fa.a,La.a,Ua.a,at.a,Ps.a,Ha.a,Aa.a,Na.a]),r._26(512,Va.a,Va.a,[]),r._26(512,Wa.a,Wa.a,[b.a,pe.a,Zn.a,Fs.a]),r._26(512,Ka.a,Ka.a,[Wa.a]),r._26(512,qa.a,qa.a,[Wa.a,Zn.a]),r._26(512,Ga.a,Ga.a,[b.a,Zn.a,Wa.a,pe.a,fe.a,Rn.a,S.a,ae.a,ue.a,rn.a,Jn.a]),r._26(512,ja.a,ja.a,[Wa.a,Ga.a]),r._26(512,Qa.a,Qa.a,[rn.a,Wa.a]),r._26(512,za.a,za.a,[rn.a,pe.a,Wa.a]),r._26(512,$a.b,$a.b,[Ss.a,Ka.a,qa.a,at.a,xl.a,ja.a,Qa.a,za.a,Da.a,_e.a,pe.a]),r._26(512,Ya.a,Ya.a,[b.a,ge.a,Ps.a,S.a,_e.a,me.a,pe.a,ue.a,Oe.a,es.a,sn.a,Rn.a]),r._26(512,Xa.a,Xa.a,[Ya.a]),r._26(512,Ja.a,Ja.a,[]),r._26(512,Za.a,Za.a,[]),r._26(1024,r.g,function(){return[i.e]},[]),r._26(512,eu.a,eu.a,[r.g]),r._26(512,nu.a,nu.a,[r.u,b.a,eu.a]),r._26(512,tu.a,tu.a,[b.a,pe.a,_e.a]),r._26(512,ou.a,ou.a,[b.a,pe.a,_e.a,ue.a]),r._26(512,ru.a,ru.a,[]),r._26(512,iu.a,iu.a,[b.a,pe.a,_e.a,ru.a]),r._26(512,lu.a,lu.a,[b.a,pe.a,Je.a,ue.a]),r._26(512,su.a,su.a,[lu.a]),r._26(512,au.a,au.a,[b.a,pe.a,_e.a,iu.a,su.a]),r._26(512,uu.a,uu.a,[b.a,pe.a,_e.a]),r._26(512,du.a,du.a,[b.a,pe.a,_e.a,ue.a]),r._26(512,cu.a,cu.a,[Oe.a]),r._26(512,pu.a,pu.a,[b.a,pe.a,_e.a,cu.a]),r._26(512,fu.a,fu.a,[Oe.a]),r._26(512,co.a,co.a,[b.a,pe.a,_e.a,fu.a]),r._26(512,hu.a,hu.a,[b.a,pe.a,_e.a]),r._26(512,mu.a,mu.a,[b.a,pe.a,S.a,Ss.a,M.a,Da.a,el.a,fs.a,Fl.a,ht.a,nu.a,ue.a,ae.a,at.a,_e.a,ks.a,tu.a,fe.a,me.a,ou.a,iu.a,au.a,lu.a,uu.a,du.a,pu.a,Oe.a,co.a,ge.a,hu.a,Rn.a,_l.a,an.a,ve.a]),r._26(512,_u.a,_u.a,[mu.a]),r._26(512,gu.a,gu.a,[]),r._26(512,vu.b,vu.b,[]),r._26(512,Cu.a,Cu.a,[pe.a,Je.a]),r._26(512,Nt.a,Nt.a,[pe.a,ue.a,ge.a,Cu.a]),r._26(512,yu.a,yu.a,[b.a,pe.a,ge.a,va.a,fe.a,Oe.a,Cu.a,ue.a,_e.a,Nt.a,Je.a]),r._26(512,Pu.a,Pu.a,[yu.a]),r._26(512,Au.a,Au.a,[_e.a,Ps.a,Pu.a]),r._26(512,bu.a,bu.a,[]),r._26(512,Iu.b,Iu.b,[]),r._26(512,Su.a,Su.a,[]),r._26(512,Eu.a,Eu.a,[Fs.a]),r._26(512,Mu.a,Mu.a,[Fs.a]),r._26(512,wu.b,wu.b,[on.a,Fs.a,_e.a,vs.a,b.a,Ps.a,Eu.a,Mu.a]),r._26(512,ku.a,ku.a,[pe.a,Oe.a]),r._26(512,Tu.a,Tu.a,[ku.a,ue.a]),r._26(512,Ou.a,Ou.a,[ku.a,rn.a]),r._26(512,Du.a,Du.a,[ku.a,rn.a]),r._26(512,xu.a,xu.a,[Ss.a,Tu.a,xl.a,Ou.a,Du.a]),r._26(512,Fu.b,Fu.b,[]),r._26(512,Lu.a,Lu.a,[]),r._26(512,Uu.a,Uu.a,[Oe.a,fe.a]),r._26(512,he.a,he.a,[b.a,pe.a,fe.a,Ce.a,Gt.a,Uu.a,me.a,ue.a,ae.a,Oe.a]),r._26(512,Ru.a,Ru.a,[ae.a,Gt.a,fe.a,ue.a,Ce.a,he.a,Oe.a]),r._26(512,Hu.b,Hu.b,[ve.a,Ru.a]),r._26(512,Nu.b,Nu.b,[]),r._26(512,Bu.a,Bu.a,[]),r._26(512,Sn.a,Sn.a,[b.a,pe.a,fe.a,ue.a]),r._26(512,Vu.b,Vu.b,[Sn.a]),r._26(512,Wu.a,Wu.a,[b.a,pe.a]),r._26(512,Ku.a,Ku.a,[Wu.a]),r._26(512,qu.a,qu.a,[Wu.a,rn.a]),r._26(512,Gu.a,Gu.a,[Wu.a,rn.a]),r._26(512,ju.a,ju.a,[ue.a,Wu.a,Zi.a]),r._26(512,Qu.b,Qu.b,[Da.a,Ku.a,xl.a,qu.a,Gu.a,Ts.a,ju.a]),r._26(512,zu.a,zu.a,[]),r._26(512,$u.a,$u.a,[]),r._26(512,Yu.a,Yu.a,[]),r._26(512,Xu.a,Xu.a,[b.a,pe.a,ue.a,Fs.a]),r._26(512,Ju.a,Ju.a,[Xu.a]),r._26(512,Zu.a,Zu.a,[rn.a,Xu.a]),r._26(512,ed.a,ed.a,[Zn.a,Xu.a,Jn.a,Rn.a,pe.a,me.a]),r._26(512,nd.a,nd.a,[Xu.a,rn.a]),r._26(512,td.a,td.a,[Ia.a,Xu.a]),r._26(512,od.a,od.a,[Ss.a,Ju.a,Zu.a,Da.a,ed.a,at.a,nd.a,xl.a,Aa.a,td.a]),r._26(512,rd.a,rd.a,[]),r._26(512,id.a,id.a,[pe.a,ue.a]),r._26(512,ld.a,ld.a,[b.a,pe.a,Ls.a,Zn.a,fe.a,Je.a,ae.a,vs.a,es.a,ue.a,id.a,ge.a,Oe.a,nt.a]),r._26(512,sd.a,sd.a,[ld.a]),r._26(512,ad.a,ad.a,[b.a,Rn.a,pe.a,ld.a,es.a,ue.a]),r._26(512,ud.a,ud.a,[Oe.a,ge.a,Rn.a,_e.a,b.a,pe.a,va.a,fe.a,Je.a,ue.a,ld.a,id.a,ad.a]),r._26(512,dd.a,dd.a,[ud.a]),r._26(512,cd.a,cd.a,[rn.a,ld.a]),r._26(512,pd.b,pd.b,[Ss.a,sd.a,Dl.a,ld.a,Zi.a,vs.a,Ps.a,dd.a,xl.a,cd.a]),r._26(512,fd.a,fd.a,[]),r._26(512,hd.a,hd.a,[b.a,pe.a,Fs.a]),r._26(512,md.a,md.a,[hd.a]),r._26(512,_d.a,_d.a,[hd.a,an.a]),r._26(512,gd.a,gd.a,[rn.a,pe.a,hd.a,_e.a]),r._26(512,vd.a,vd.a,[rn.a,hd.a]),r._26(512,Cd.a,Cd.a,[rn.a,hd.a]),r._26(512,yd.a,yd.a,[rn.a,hd.a]),r._26(512,Pd.a,Pd.a,[rn.a,hd.a]),r._26(512,Ad.a,Ad.a,[ue.a,ae.a,hd.a,Zi.a]),r._26(512,bd.b,bd.b,[Ss.a,md.a,at.a,_d.a,Da.a,gd.a,xl.a,vd.a,Cd.a,yd.a,Pd.a,Ts.a,Ad.a]),r._26(512,Id.a,Id.a,[]),r._26(512,st.a,st.a,[b.a,pe.a,Zn.a,ue.a]),r._26(512,Sd.a,Sd.a,[st.a]),r._26(512,Ed.a,Ed.a,[_e.a,st.a]),r._26(512,Md.a,Md.a,[at.a,Sd.a,Da.a,Ed.a]),r._26(512,wd.a,wd.a,[]),r._26(512,kd.a,kd.a,[tu.a,wd.a]),r._26(512,Td.a,Td.a,[Je.a]),r._26(512,Od.a,Od.a,[tu.a,Td.a]),r._26(512,Dd.a,Dd.a,[]),r._26(512,xd.a,xd.a,[tu.a,Dd.a]),r._26(512,Fd.a,Fd.a,[fe.a]),r._26(512,Ld.a,Ld.a,[tu.a,Fd.a]),r._26(512,Ud.a,Ud.a,[fe.a]),r._26(512,Rd.a,Rd.a,[tu.a,Ud.a]),r._26(512,Hd.a,Hd.a,[]),r._26(512,yl.a,yl.a,[pe.a,Gt.a]),r._26(512,Nd.a,Nd.a,[yl.a]),r._26(512,Bd.b,Bd.b,[Ss.a,Nd.a]),r._26(512,Vd.a,Vd.a,[]),r._26(512,Wd.a,Wd.a,[]),r._26(512,Kd.a,Kd.a,[]),r._26(512,qd.a,qd.a,[_l.a,Kd.a]),r._26(512,Gd.a,Gd.a,[]),r._26(512,jd.a,jd.a,[_l.a,Gd.a]),r._26(512,Qd.a,Qd.a,[]),r._26(512,zd.a,zd.a,[_l.a,Qd.a]),r._26(512,$d.a,$d.a,[]),r._26(512,Yd.a,Yd.a,[_l.a,$d.a]),r._26(512,Xd.a,Xd.a,[]),r._26(512,Jd.a,Jd.a,[_l.a,Xd.a]),r._26(512,Zd.a,Zd.a,[ld.a]),r._26(512,ec.a,ec.a,[_l.a,Zd.a]),r._26(512,nc.a,nc.a,[ld.a]),r._26(512,tc.a,tc.a,[_l.a,nc.a]),r._26(512,oc.a,oc.a,[]),r._26(512,rc.a,rc.a,[_l.a,oc.a]),r._26(512,ic.a,ic.a,[]),r._26(512,lc.a,lc.a,[_l.a,ic.a]),r._26(512,sc.a,sc.a,[]),r._26(512,ac.a,ac.a,[_l.a,sc.a]),r._26(512,uc.a,uc.a,[]),r._26(512,dc.a,dc.a,[_l.a,uc.a]),r._26(512,cc.a,cc.a,[]),r._26(512,pc.a,pc.a,[_l.a,cc.a]),r._26(512,fc.a,fc.a,[]),r._26(512,hc.a,hc.a,[]),r._26(512,mc.a,mc.a,[Zn.a,pe.a]),r._26(512,_c.a,_c.a,[_l.a,mc.a]),r._26(512,gc.a,gc.a,[]),r._26(512,vc.a,vc.a,[_l.a,gc.a]),r._26(512,Cc.a,Cc.a,[]),r._26(512,yc.a,yc.a,[_l.a,Cc.a]),r._26(512,Pc.a,Pc.a,[]),r._26(512,Ac.a,Ac.a,[_l.a,Pc.a]),r._26(512,bc.a,bc.a,[]),r._26(512,Ic.a,Ic.a,[]),r._26(512,Sc.a,Sc.a,[_l.a,Ic.a]),r._26(512,Ec.a,Ec.a,[]),r._26(512,Mc.a,Mc.a,[It.a,Zn.a,pe.a]),r._26(512,wc.a,wc.a,[_l.a,Mc.a]),r._26(512,kc.a,kc.a,[]),r._26(512,Tc.a,Tc.a,[]),r._26(512,Oc.a,Oc.a,[_l.a,Tc.a]),r._26(512,Dc.a,Dc.a,[]),r._26(512,xc.a,xc.a,[]),r._26(512,Fc.a,Fc.a,[_l.a,xc.a]),r._26(512,Lc.a,Lc.a,[]),r._26(512,Uc.a,Uc.a,[_l.a,Lc.a]),r._26(512,Rc.a,Rc.a,[]),r._26(512,Hc.a,Hc.a,[_l.a,Rc.a]),r._26(512,Nc.a,Nc.a,[]),r._26(512,Bc.a,Bc.a,[]),r._26(512,Vc.a,Vc.a,[_l.a,Bc.a]),r._26(512,Wc.a,Wc.a,[]),r._26(512,Kc.a,Kc.a,[_l.a,Wc.a]),r._26(512,qc.a,qc.a,[]),r._26(512,Gc.a,Gc.a,[_l.a,qc.a]),r._26(512,jc.a,jc.a,[Nt.a]),r._26(512,Qc.a,Qc.a,[pu.a,jc.a]),r._26(512,Zt.a,Zt.a,[b.a,pe.a,fe.a,Ce.a,Je.a]),r._26(512,Jt.a,Jt.a,[b.a,pe.a,fe.a,Je.a,ge.a,ue.a,pu.a,Wa.a,me.a,Zt.a,Nt.a,Hs.a]),r._26(512,eo.a,eo.a,[b.a,pe.a,Ce.a,Jt.a,ue.a,Zt.a,co.a,pu.a,zt.a,Ls.a]),r._26(512,Xt.a,Xt.a,[pe.a]),r._26(512,zc.a,zc.a,[Jt.a,Zt.a,eo.a,Xt.a,zt.a,ye.a,ue.a]),r._26(512,$c.a,$c.a,[pu.a,zc.a]),r._26(512,Yc.a,Yc.a,[Oe.a,pe.a,ye.a,fe.a,Jt.a,Zt.a,eo.a]),r._26(512,Xc.a,Xc.a,[pu.a,Yc.a]),r._26(512,Jc.a,Jc.a,[]),r._26(512,Zc.a,Zc.a,[pe.a,fe.a,Jt.a,Zt.a]),r._26(512,ep.a,ep.a,[co.a,Zc.a]),r._26(512,np.a,np.a,[Jt.a]),r._26(512,tp.a,tp.a,[co.a,np.a]),r._26(512,op.a,op.a,[Jt.a]),r._26(512,rp.a,rp.a,[co.a,op.a]),r._26(512,ip.a,ip.a,[]),r._26(512,lp.a,lp.a,[Rn.a,Jt.a]),r._26(512,sp.a,sp.a,[b.a,pe.a,ge.a,va.a,fe.a,Oe.a,Je.a,Rn.a,_e.a,Jt.a,Zt.a,ue.a,pu.a,co.a,Ga.a,Hs.a]),r._26(512,ap.a,ap.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,Jt.a,fe.a,co.a,pu.a,Jn.a,Ls.a,Ga.a,nt.a,eo.a,sp.a]),r._26(512,up.a,up.a,[sp.a]),r._26(512,dp.a,dp.a,[Jn.a]),r._26(512,cp.a,cp.a,[rn.a,Oe.a,Jt.a]),r._26(512,pp.a,pp.a,[ue.a,Jt.a,ae.a,Jn.a]),r._26(512,fp.b,fp.b,[M.a,lp.a,ht.a,ap.a,Ps.a,up.a,xl.a,dp.a,cp.a,Ts.a,pp.a]),r._26(512,hp.a,hp.a,[]),r._26(512,mp.a,mp.a,[b.a,pe.a,fe.a,Ce.a,me.a,fs.a,ue.a,Rn.a,S.a,Hs.a]),r._26(512,_p.a,_p.a,[mp.a,Rn.a]),r._26(512,gp.a,gp.a,[Jn.a,mp.a]),r._26(512,vp.a,vp.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,mp.a]),r._26(512,Cp.a,Cp.a,[rn.a,Oe.a,mp.a]),r._26(512,yp.a,yp.a,[Ia.a,mp.a,Rn.a,ae.a]),r._26(512,Pp.b,Pp.b,[M.a,_p.a,xl.a,gp.a,ht.a,vp.a,Cp.a,Aa.a,yp.a]),r._26(512,Ap.a,Ap.a,[]),r._26(512,bp.a,bp.a,[pe.a,nt.a,Hs.a,ue.a,Oe.a]),r._26(512,Ip.a,Ip.a,[Rn.a,bp.a]),r._26(512,Sp.a,Sp.a,[Jn.a]),r._26(512,Ep.a,Ep.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,Ls.a,nt.a,bp.a]),r._26(512,Mp.a,Mp.a,[rn.a,Oe.a]),r._26(512,wp.b,wp.b,[M.a,Ip.a,xl.a,Sp.a,ht.a,Ep.a,Mp.a]),r._26(512,kp.a,kp.a,[]),r._26(512,Tp.a,Tp.a,[Rn.a]),r._26(512,Op.a,Op.a,[pe.a]),r._26(512,Dp.a,Dp.a,[pe.a,ge.a,me.a,ue.a,Op.a,Hs.a]),r._26(512,xp.a,xp.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,Dp.a,nt.a,r.u]),r._26(512,Fp.a,Fp.a,[Jn.a]),r._26(512,Lp.a,Lp.a,[pe.a,b.a,ge.a,Op.a,_e.a,Dp.a,Oe.a,ue.a,fe.a,Rn.a,va.a,Je.a,Hs.a,xp.a,ht.a]),r._26(512,Up.a,Up.a,[Lp.a]),r._26(512,Rp.a,Rp.a,[rn.a,Oe.a]),r._26(512,Hp.b,Hp.b,[M.a,Tp.a,ht.a,xp.a,xl.a,Fp.a,Ps.a,Up.a,Rp.a]),r._26(512,Np.a,Np.a,[]),r._26(512,Bp.a,Bp.a,[]),r._26(512,Vp.a,Vp.a,[b.a,pe.a,_e.a,ue.a,Bp.a]),r._26(512,Wp.a,Wp.a,[Oe.a]),r._26(512,Kp.a,Kp.a,[Vp.a,Wp.a]),r._26(512,qp.a,qp.a,[Oe.a,Je.a]),r._26(512,Gp.a,Gp.a,[Vp.a,qp.a]),r._26(512,jp.a,jp.a,[Oe.a,Xt.a,zt.a]),r._26(512,Qp.a,Qp.a,[Vp.a,jp.a]),r._26(512,zp.a,zp.a,[Oe.a]),r._26(512,$p.a,$p.a,[Vp.a,zp.a]),r._26(512,Yp.a,Yp.a,[Oe.a]),r._26(512,Xp.a,Xp.a,[Vp.a,Yp.a]),r._26(512,Jp.a,Jp.a,[Oe.a]),r._26(512,Zp.a,Zp.a,[Vp.a,Jp.a]),r._26(512,ef.a,ef.a,[Oe.a]),r._26(512,nf.a,nf.a,[Vp.a,ef.a]),r._26(512,tf.a,tf.a,[Oe.a,Xt.a,zt.a]),r._26(512,of.a,of.a,[Vp.a,tf.a]),r._26(512,rf.a,rf.a,[Oe.a]),r._26(512,lf.a,lf.a,[Vp.a,rf.a]),r._26(512,sf.a,sf.a,[Oe.a]),r._26(512,af.a,af.a,[Vp.a,sf.a]),r._26(512,uf.a,uf.a,[Oe.a,fe.a]),r._26(512,df.a,df.a,[Vp.a,uf.a]),r._26(512,cf.a,cf.a,[Oe.a]),r._26(512,pf.a,pf.a,[Vp.a,cf.a]),r._26(512,ff.a,ff.a,[]),r._26(512,hf.a,hf.a,[b.a,pe.a,fe.a,Ce.a,zt.a,ue.a]),r._26(512,mf.a,mf.a,[b.a,pe.a,ue.a,me.a,hf.a,ge.a,Vp.a,Hs.a]),r._26(512,_f.a,_f.a,[Rn.a,mf.a]),r._26(512,gf.a,gf.a,[pe.a,ue.a]),r._26(512,vf.a,vf.a,[pe.a,mf.a,Oe.a,Vp.a,hf.a,zt.a,fe.a,_e.a,ue.a,S.a,Rn.a,gf.a]),r._26(512,Cf.a,Cf.a,[ge.a,_e.a,pe.a,nt.a,ue.a,gf.a]),r._26(512,yf.a,yf.a,[Oe.a,ge.a,_e.a,b.a,pe.a,va.a,fe.a,Je.a,ue.a,Cf.a,gf.a]),r._26(512,Pf.a,Pf.a,[pe.a,b.a,ge.a,hf.a,_e.a,mf.a,Oe.a,ue.a,Rn.a,va.a,fe.a,Je.a,vf.a,Hs.a,yf.a]),r._26(512,Af.a,Af.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,mf.a,Je.a,vf.a,Ls.a,Nt.a,Pf.a]),r._26(512,bf.a,bf.a,[Jn.a,mf.a]),r._26(512,If.a,If.a,[Pf.a]),r._26(512,Sf.a,Sf.a,[mf.a,vf.a]),r._26(512,Ef.a,Ef.a,[mf.a,vf.a]),r._26(512,Mf.a,Mf.a,[rn.a,mf.a,Rn.a,S.a]),r._26(512,wf.a,wf.a,[rn.a,mf.a,Rn.a,S.a]),r._26(512,kf.a,kf.a,[rn.a,Oe.a,mf.a]),r._26(512,Tf.a,Tf.a,[Ia.a,mf.a]),r._26(512,Of.a,Of.a,[M.a,_f.a,ht.a,Af.a,xl.a,bf.a,Ps.a,If.a,Sf.a,Ef.a,Mf.a,wf.a,kf.a,Aa.a,Tf.a]),r._26(512,Df.a,Df.a,[]),r._26(512,xf.a,xf.a,[Jn.a]),r._26(512,Ff.a,Ff.a,[pe.a,me.a,ue.a]),r._26(512,Lf.a,Lf.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,Ff.a]),r._26(512,Uf.a,Uf.a,[M.a,Df.a,xl.a,xf.a,ht.a,Lf.a]),r._26(512,Rf.a,Rf.a,[]),r._26(512,Hf.a,Hf.a,[b.a,pe.a,Je.a,fe.a,ue.a]),r._26(512,bl.a,bl.a,[b.a,pe.a,ue.a,Oe.a,fe.a,S.a,Hf.a,Hs.a,_e.a]),r._26(512,Nf.a,Nf.a,[Rn.a,bl.a]),r._26(512,Bf.a,Bf.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,uo.a,Ls.a,bl.a,r.u]),r._26(512,Vf.a,Vf.a,[b.a,pe.a,ge.a,va.a,fe.a,Oe.a,Rn.a,_e.a,bl.a,Hf.a,Bf.a,Je.a,ue.a,ae.a,Hs.a,ht.a]),r._26(512,Wf.a,Wf.a,[Vf.a]),r._26(512,Kf.a,Kf.a,[Jn.a,bl.a,S.a,Rn.a]),r._26(512,qf.a,qf.a,[Jn.a,S.a,pe.a,bl.a,Rn.a,rn.a]),r._26(512,Gf.a,Gf.a,[S.a,bl.a,Jn.a,rn.a,Rn.a]),r._26(512,jf.a,jf.a,[rn.a,Oe.a,bl.a]),r._26(512,Qf.a,Qf.a,[ue.a,Ga.a,Wa.a]),r._26(512,zf.b,zf.b,[M.a,Nf.a,ht.a,Bf.a,Ps.a,Wf.a,xl.a,Kf.a,qf.a,Gf.a,jf.a,Ts.a,Qf.a]),r._26(512,$f.a,$f.a,[]),r._26(512,Yf.a,Yf.a,[b.a,pe.a,Rn.a,me.a,ue.a,Hs.a]),r._26(512,Xf.a,Xf.a,[Rn.a,S.a,Yf.a,Jn.a,fe.a,Gt.a,Ce.a,ge.a,me.a,pe.a,ye.a]),r._26(512,Jf.a,Jf.a,[Yf.a,Rn.a,Gt.a,Xf.a,ht.a,fe.a,Oe.a,Je.a]),r._26(512,Zf.a,Zf.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,Yf.a,Xf.a]),r._26(512,eh.a,eh.a,[Jn.a,Yf.a]),r._26(512,nh.a,nh.a,[]),r._26(512,th.a,th.a,[rn.a,Oe.a,Yf.a]),r._26(512,oh.b,oh.b,[M.a,Jf.a,ht.a,Zf.a,xl.a,eh.a,ve.a,nh.a,th.a]),r._26(512,rh.a,rh.a,[]),r._26(512,ih.a,ih.a,[b.a,pe.a,fe.a,Je.a]),r._26(512,lh.a,lh.a,[b.a,pe.a,ue.a,me.a,ih.a,ge.a,Hs.a]),r._26(512,sh.a,sh.a,[Rn.a,lh.a]),r._26(512,ah.a,ah.a,[lh.a,nt.a,fe.a,Oe.a,Je.a,S.a,Rn.a,rn.a,pe.a,ue.a]),r._26(512,uh.a,uh.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,lh.a,ah.a,Je.a,Ls.a,r.u]),r._26(512,dh.a,dh.a,[Jn.a,lh.a]),r._26(512,ch.a,ch.a,[pe.a,b.a,ge.a,ih.a,_e.a,lh.a,Oe.a,ue.a,fe.a,Rn.a,va.a,Je.a,Hs.a,ht.a,uh.a]),r._26(512,ph.a,ph.a,[ch.a]),r._26(512,fh.a,fh.a,[rn.a,lh.a,Rn.a,S.a]),r._26(512,hh.a,hh.a,[lh.a,ah.a]),r._26(512,mh.a,mh.a,[rn.a,lh.a,Rn.a,S.a]),r._26(512,_h.a,_h.a,[rn.a,lh.a,Rn.a,S.a]),r._26(512,gh.a,gh.a,[rn.a,lh.a,Rn.a,S.a]),r._26(512,vh.a,vh.a,[rn.a,Oe.a,lh.a]),r._26(512,Ch.a,Ch.a,[ue.a,ah.a,ae.a,Jn.a,lh.a]),r._26(512,yh.b,yh.b,[M.a,sh.a,ht.a,uh.a,xl.a,dh.a,Ps.a,ph.a,fh.a,hh.a,mh.a,_h.a,gh.a,vh.a,Ts.a,Ch.a]),r._26(512,Ph.a,Ph.a,[]),r._26(512,Ah.a,Ah.a,[Rn.a]),r._26(512,bh.a,bh.a,[b.a,pe.a,Rn.a,ue.a,Hs.a]),r._26(512,Ih.a,Ih.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,bh.a]),r._26(512,Sh.a,Sh.a,[Jn.a]),r._26(512,Eh.a,Eh.a,[]),r._26(512,Mh.a,Mh.a,[rn.a,Oe.a]),r._26(512,wh.b,wh.b,[M.a,Ah.a,ht.a,Ih.a,xl.a,Sh.a,ve.a,Eh.a,Mh.a]),r._26(512,kh.a,kh.a,[]),r._26(512,Th.a,Th.a,[]),r._26(512,Oh.a,Oh.a,[Rn.a,Ns.a,Oe.a,_e.a,pe.a]),r._26(512,Dh.a,Dh.a,[Oe.a,Ce.a,pe.a,zt.a,Je.a,nt.a,ge.a,ue.a,Ns.a,Rs.a]),r._26(512,xh.a,xh.a,[Oe.a,ge.a,Rn.a,_e.a,Ls.a,b.a,pe.a,va.a,fe.a,Je.a,zt.a,ue.a,Ns.a,Dh.a,Rs.a,Hs.a,yf.a]),r._26(512,Fh.a,Fh.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,nt.a,Ls.a,Ns.a,xh.a]),r._26(512,Lh.a,Lh.a,[xh.a]),r._26(512,Uh.a,Uh.a,[Jn.a]),r._26(512,Rh.a,Rh.a,[S.a,rn.a]),r._26(512,Hh.a,Hh.a,[rn.a,Oe.a]),r._26(512,Nh.a,Nh.a,[ue.a,Ns.a,ae.a,rn.a]),r._26(512,Bh.a,Bh.a,[rn.a,Rn.a,S.a]),r._26(512,Vh.a,Vh.a,[Ia.a]),r._26(512,Wh.b,Wh.b,[M.a,Oh.a,ht.a,Fh.a,Ps.a,Lh.a,xl.a,Uh.a,Rh.a,Hh.a,Ts.a,Nh.a,Bh.a,Aa.a,Vh.a]),r._26(512,Kh.a,Kh.a,[]),r._26(512,qh.a,qh.a,[Rn.a]),r._26(512,Gh.a,Gh.a,[Ce.a,pe.a,fe.a,ue.a]),r._26(512,jh.a,jh.a,[ge.a,pe.a,me.a,Oe.a,fe.a,ue.a,Gh.a,Hs.a]),r._26(512,Qh.a,Qh.a,[Ce.a,zt.a,Gh.a]),r._26(512,zh.a,zh.a,[Oe.a,ge.a,Rn.a,_e.a,b.a,pe.a,va.a,fe.a,Je.a,zt.a,ue.a,jh.a,Qh.a,Gh.a,Hs.a,yf.a]),r._26(512,$h.a,$h.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,jh.a,Nt.a,zh.a,nt.a]),r._26(512,Yh.a,Yh.a,[zh.a]),r._26(512,Xh.a,Xh.a,[Jn.a,jh.a]),r._26(512,Jh.a,Jh.a,[S.a,rn.a,jh.a,Jn.a]),r._26(512,Zh.a,Zh.a,[rn.a,Oe.a]),r._26(512,em.a,em.a,[rn.a,Rn.a,S.a,jh.a]),r._26(512,nm.a,nm.a,[Ia.a]),r._26(512,tm.b,tm.b,[M.a,qh.a,ht.a,$h.a,Ps.a,Yh.a,xl.a,Xh.a,Jh.a,Zh.a,em.a,Aa.a,nm.a]),r._26(512,om.a,om.a,[]),r._26(512,rm.a,rm.a,[Ce.a,pe.a,fe.a,ae.a,ue.a,Oe.a,ge.a,Hs.a]),r._26(512,im.a,im.a,[ge.a,Rn.a,S.a,me.a,pe.a,rm.a,o.c]),r._26(512,lm.a,lm.a,[Jn.a]),r._26(512,sm.a,sm.a,[rn.a,Oe.a]),r._26(512,am.a,am.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,rm.a]),r._26(512,um.b,um.b,[M.a,im.a,xl.a,lm.a,sm.a,ht.a,am.a]),r._26(512,dm.a,dm.a,[]),r._26(512,cm.a,cm.a,[b.a,pe.a,Rn.a,ue.a,me.a,Hs.a]),r._26(512,pm.a,pm.a,[Rn.a,cm.a]),r._26(512,fm.a,fm.a,[b.a,S.a,me.a,Ce.a,fe.a,fs.a,pe.a]),r._26(512,hm.a,hm.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,cm.a,fm.a]),r._26(512,mm.a,mm.a,[Jn.a,cm.a]),r._26(512,_m.a,_m.a,[]),r._26(512,gm.a,gm.a,[rn.a,Oe.a,cm.a]),r._26(512,vm.b,vm.b,[M.a,pm.a,ht.a,hm.a,xl.a,mm.a,ve.a,_m.a,gm.a]),r._26(512,Cm.a,Cm.a,[]),r._26(512,ym.a,ym.a,[]),r._26(512,Pm.a,Pm.a,[du.a,ym.a]),r._26(512,Am.a,Am.a,[]),r._26(512,bm.a,bm.a,[du.a,Am.a]),r._26(512,Im.a,Im.a,[]),r._26(512,Sm.a,Sm.a,[du.a,Im.a]),r._26(512,Em.a,Em.a,[b.a,pe.a,Je.a,lu.a,Oe.a,ue.a,au.a]),r._26(512,Mm.a,Mm.a,[b.a,pe.a,ue.a,Oe.a,fe.a,Ga.a,iu.a,me.a,Je.a,du.a,Em.a,S.a,Hs.a,Fs.a]),r._26(512,wm.a,wm.a,[S.a,Oe.a,ue.a,du.a,Mm.a,uo.a,Em.a,Jn.a,pe.a,rn.a]),r._26(512,km.a,km.a,[S.a,fe.a,lu.a,pe.a,Oe.a,ae.a,ue.a,me.a,iu.a]),r._26(512,Tm.a,Tm.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,r.u,Mm.a,fe.a,wm.a,du.a,km.a]),r._26(512,Om.a,Om.a,[b.a,pe.a,ge.a,va.a,fe.a,Oe.a,_e.a,Je.a,Mm.a,Em.a,Tm.a,lu.a,iu.a,Hs.a,ht.a,Rn.a]),r._26(512,Dm.a,Dm.a,[Om.a]),r._26(512,xm.a,xm.a,[du.a,Dm.a]),r._26(512,Fm.a,Fm.a,[]),r._26(512,Lm.a,Lm.a,[du.a,Fm.a]),r._26(512,Um.a,Um.a,[pe.a]),r._26(512,Rm.a,Rm.a,[du.a,Um.a]),r._26(512,Hm.a,Hm.a,[]),r._26(512,Nm.a,Nm.a,[du.a,Hm.a]),r._26(512,Bm.a,Bm.a,[]),r._26(512,Vm.a,Vm.a,[du.a,Bm.a]),r._26(512,Wm.a,Wm.a,[]),r._26(512,Km.a,Km.a,[du.a,Wm.a]),r._26(512,qm.a,qm.a,[Rn.a]),r._26(512,Gm.a,Gm.a,[Om.a]),r._26(512,jm.a,jm.a,[Jn.a,Mm.a]),r._26(512,Qm.a,Qm.a,[Jn.a,S.a,pe.a,Mm.a]),r._26(512,zm.a,zm.a,[Mm.a,wm.a]),r._26(512,$m.a,$m.a,[rn.a,Oe.a]),r._26(512,Ym.a,Ym.a,[ue.a,Mm.a,ae.a,Jn.a,wm.a]),r._26(512,Xm.b,Xm.b,[M.a,qm.a,ht.a,Tm.a,Ps.a,Gm.a,xl.a,jm.a,Qm.a,zm.a,$m.a,Ts.a,Ym.a]),r._26(512,Jm.a,Jm.a,[]),r._26(512,Zm.a,Zm.a,[Rn.a]),r._26(512,Ml.a,Ml.a,[b.a,pe.a,Je.a,va.a,ue.a,fe.a,nt.a]),r._26(512,El.a,El.a,[b.a,Oe.a,pe.a,fs.a,fe.a,ue.a,me.a,Ml.a,Je.a,va.a,_e.a,Hs.a]),r._26(512,e_.a,e_.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,Ce.a,fe.a,El.a,r.u]),r._26(512,n_.a,n_.a,[b.a,pe.a,ge.a,va.a,fe.a,Oe.a,_e.a,Je.a,El.a,Ml.a,e_.a,ue.a,ht.a,Rn.a,Hs.a]),r._26(512,t_.a,t_.a,[n_.a]),r._26(512,o_.a,o_.a,[Jn.a]),r._26(512,r_.a,r_.a,[Jn.a,S.a,pe.a]),r._26(512,i_.a,i_.a,[rn.a,Oe.a]),r._26(512,l_.b,l_.b,[M.a,Zm.a,ht.a,e_.a,Ps.a,t_.a,xl.a,o_.a,r_.a,i_.a]),r._26(512,s_.a,s_.a,[]),r._26(512,a_.a,a_.a,[b.a,pe.a,Rn.a,ue.a,Gt.a,Hs.a]),r._26(512,u_.a,u_.a,[pe.a,S.a,rn.a]),r._26(512,d_.a,d_.a,[Rn.a,a_.a,u_.a,S.a,rn.a]),r._26(512,c_.a,c_.a,[Jn.a]),r._26(512,p_.a,p_.a,[rn.a,Oe.a]),r._26(512,f_.a,f_.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a]),r._26(512,h_.b,h_.b,[M.a,d_.a,xl.a,c_.a,p_.a,ht.a,f_.a]),r._26(512,m_.a,m_.a,[]),r._26(512,__.a,__.a,[Rn.a]),r._26(512,g_.a,g_.a,[b.a,pe.a,fe.a]),r._26(512,v_.a,v_.a,[b.a,pe.a,ge.a,me.a,ue.a,g_.a,Hs.a]),r._26(512,C_.a,C_.a,[Oe.a]),r._26(512,y_.a,y_.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,v_.a,C_.a,r.u]),r._26(512,P_.a,P_.a,[Jn.a]),r._26(512,A_.a,A_.a,[b.a,pe.a,ge.a,va.a,fe.a,Oe.a,Rn.a,g_.a,_e.a,v_.a,ue.a,Je.a,Hs.a,ht.a,y_.a]),r._26(512,b_.a,b_.a,[A_.a]),r._26(512,I_.a,I_.a,[rn.a,Oe.a]),r._26(512,S_.b,S_.b,[M.a,__.a,ht.a,y_.a,xl.a,P_.a,Ps.a,b_.a,I_.a]),r._26(512,E_.a,E_.a,[]),r._26(512,M_.a,M_.a,[Oe.a,Ga.a]),r._26(512,w_.a,w_.a,[hu.a,M_.a]),r._26(512,k_.a,k_.a,[Oe.a]),r._26(512,T_.a,T_.a,[hu.a,k_.a]),r._26(512,O_.a,O_.a,[Oe.a]),r._26(512,D_.a,D_.a,[hu.a,O_.a]),r._26(512,x_.a,x_.a,[Oe.a]),r._26(512,F_.a,F_.a,[hu.a,x_.a]),r._26(512,L_.a,L_.a,[]),r._26(512,U_.a,U_.a,[Ce.a,pe.a,fe.a,Je.a]),r._26(512,R_.a,R_.a,[ge.a,me.a,pe.a,ue.a,U_.a,Hs.a]),r._26(512,H_.a,H_.a,[Rn.a,R_.a]),r._26(512,N_.a,N_.a,[Jn.a,R_.a]),r._26(512,B_.a,B_.a,[Oe.a,Ce.a,zt.a,pe.a,fe.a,ue.a,R_.a,U_.a,hu.a]),r._26(512,V_.a,V_.a,[Oe.a,ge.a,Rn.a,_e.a,b.a,pe.a,va.a,fe.a,Je.a,ue.a,R_.a,B_.a,U_.a,Hs.a]),r._26(512,W_.a,W_.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,Ls.a,nt.a,R_.a,B_.a,V_.a]),r._26(512,K_.a,K_.a,[V_.a]),r._26(512,q_.a,q_.a,[rn.a,Oe.a,R_.a]),r._26(512,G_.b,G_.b,[M.a,H_.a,xl.a,N_.a,ht.a,W_.a,Ps.a,K_.a,q_.a]),r._26(512,j_.a,j_.a,[]),r._26(512,Q_.a,Q_.a,[ge.a,Rn.a,me.a,pe.a,fe.a,ue.a,Hs.a]),r._26(512,z_.a,z_.a,[Rn.a,Q_.a]),r._26(512,$_.a,$_.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,Q_.a]),r._26(512,Y_.a,Y_.a,[Jn.a,Q_.a]),r._26(512,X_.a,X_.a,[]),r._26(512,J_.a,J_.a,[rn.a,Oe.a,Q_.a]),r._26(512,Z_.b,Z_.b,[M.a,z_.a,ht.a,$_.a,xl.a,Y_.a,ve.a,X_.a,J_.a]),r._26(512,eg.a,eg.a,[]),r._26(512,ng.a,ng.a,[Rn.a]),r._26(512,tg.a,tg.a,[b.a,pe.a]),r._26(512,og.a,og.a,[b.a,pe.a,ge.a,me.a,ue.a,Oe.a,tg.a,_e.a,Hs.a]),r._26(512,rg.a,rg.a,[b.a,pe.a,ge.a,va.a,fe.a,Oe.a,Rn.a,_e.a,og.a,tg.a,ue.a,Ls.a,Je.a,Hs.a]),r._26(512,ig.a,ig.a,[Oe.a,ge.a,ue.a,Rn.a,me.a,pe.a,S.a,an.a,ve.a,og.a,nt.a,fe.a,Jn.a,Ls.a,rg.a]),r._26(512,lg.a,lg.a,[rg.a]),r._26(512,sg.a,sg.a,[Jn.a]),r._26(512,ag.a,ag.a,[S.a,og.a,Jn.a,rn.a]),r._26(512,ug.a,ug.a,[S.a,og.a,Jn.a,rn.a,Rn.a]),r._26(512,dg.a,dg.a,[rn.a,fe.a]),r._26(512,cg.a,cg.a,[rn.a,Oe.a]),r._26(512,pg.a,pg.a,[Ia.a]),r._26(512,fg.b,fg.b,[M.a,ng.a,ht.a,ig.a,Ps.a,lg.a,xl.a,sg.a,ag.a,ug.a,dg.a,cg.a,Aa.a,pg.a]),r._26(512,hg.b,hg.b,[]),r._26(512,mg.a,mg.a,[b.a,pe.a]),r._26(512,_g.a,_g.a,[mg.a]),r._26(512,gg.a,gg.a,[uu.a,_g.a]),r._26(512,vg.a,vg.a,[b.a,pe.a,ge.a,fe.a]),r._26(512,Cg.a,Cg.a,[b.a,pe.a,ge.a,nt.a,vg.a,ue.a,Je.a,Cs.a,_e.a]),r._26(512,yg.a,yg.a,[Cg.a,pe.a,_e.a,ge.a,vs.a,an.a,Fs.a,ue.a,Ts.a,Cs.a]),r._26(512,Pg.a,Pg.a,[rn.a,Cg.a]),r._26(512,Ag.a,Ag.a,[rn.a,Cg.a,pe.a]),r._26(512,bg.a,bg.a,[rn.a,pe.a,Cg.a]),r._26(512,Ig.a,Ig.a,[b.a,pe.a,ge.a,Oe.a,va.a,fe.a,vg.a,_e.a,Cg.a,nt.a,ue.a,Je.a]),r._26(512,Sg.a,Sg.a,[Ig.a]),r._26(512,Eg.a,Eg.a,[Cg.a]),r._26(131584,Mg.a,Mg.a,[pe.a,Cg.a,_e.a,S.a,Oe.a]),r._26(131584,wg.a,wg.a,[pe.a,Cg.a,_e.a,S.a,Oe.a]),r._26(512,kg.a,kg.a,[rn.a,Cg.a]),r._26(512,Tg.a,Tg.a,[ue.a,Cg.a,Zi.a]),r._26(512,Og.b,Og.b,[Ss.a,yg.a,xl.a,Pg.a,Ag.a,bg.a,Da.a,Ps.a,Sg.a,ol.a,r.D,Ig.a,ge.a,vs.a,Cg.a,pe.a,rn.a,Eg.a,ou.a,Ts.a,ue.a,Mg.a,wg.a,kg.a,Tg.a]),r._26(512,Dg.a,Dg.a,[]),r._26(512,xg.a,xg.a,[b.a,pe.a,Je.a]),r._26(512,Fg.a,Fg.a,[b.a,pe.a,ge.a,ue.a,Oe.a,nt.a,xg.a,Fs.a]),r._26(512,Lg.a,Lg.a,[Fg.a]),r._26(512,Ug.a,Ug.a,[rn.a,pe.a,Fg.a,_e.a]),r._26(512,Rg.a,Rg.a,[b.a,pe.a,ge.a,va.a,fe.a,Oe.a,xg.a,ue.a,_e.a,Fg.a,Zn.a,Je.a]),r._26(512,Hg.a,Hg.a,[Rg.a]),r._26(512,Ng.b,Ng.b,[at.a,Lg.a,Da.a,Ug.a,Ps.a,Hg.a]),r._26(512,Bg.a,Bg.a,[b.a,ge.a,pe.a,Je.a,nt.a,Cs.a,Cg.a,fe.a]),r._26(512,Vg.a,Vg.a,[_e.a,pe.a,ue.a,Bg.a,Fs.a,Ts.a]),r._26(512,Wg.a,Wg.a,[ge.a,vs.a,Bg.a]),r._26(512,Kg.a,Kg.a,[Bg.a,pe.a]),r._26(512,qg.a,qg.a,[ge.a,_e.a,pe.a,vs.a,Bg.a,fe.a,Cs.a,Kg.a]),r._26(512,Gg.a,Gg.a,[ue.a,Bg.a,rn.a,_e.a]),r._26(512,jg.b,jg.b,[Ss.a,Vg.a,ou.a,Wg.a,Ps.a,qg.a,r.D,ge.a,vs.a,Dl.a,Ts.a,Gg.a]),r._26(512,Qg.a,Qg.a,[b.a,pe.a,Ce.a,me.a,fs.a,ue.a,ge.a]),r._26(512,zg.b,zg.b,[Dl.a,Qg.a,_e.a,pe.a,b.a]),r._26(512,$g.a,$g.a,[km.a]),r._26(512,Yg.a,Yg.a,[au.a,$g.a]),r._26(512,Xg.a,Xg.a,[km.a]),r._26(512,Jg.a,Jg.a,[au.a,Xg.a]),r._26(512,Zg.a,Zg.a,[iu.a,lu.a]),r._26(512,ev.a,ev.a,[iu.a,km.a,Zg.a]),r._26(512,nv.a,nv.a,[au.a,ev.a]),r._26(512,tv.a,tv.a,[au.a,Zg.a]),r._26(512,ov.a,ov.a,[km.a]),r._26(512,rv.a,rv.a,[au.a,ov.a]),r._26(512,iv.a,iv.a,[km.a]),r._26(512,lv.a,lv.a,[au.a,iv.a]),r._26(512,sv.a,sv.a,[km.a,lu.a]),r._26(512,av.a,av.a,[au.a,sv.a]),r._26(512,uv.a,uv.a,[km.a]),r._26(512,dv.a,dv.a,[au.a,uv.a]),r._26(512,cv.a,cv.a,[km.a]),r._26(512,pv.a,pv.a,[au.a,cv.a]),r._26(512,fv.a,fv.a,[iu.a,lu.a]),r._26(512,hv.a,hv.a,[au.a,fv.a]),r._26(512,mv.a,mv.a,[]),r._26(512,_v.a,_v.a,[ue.a,S.a]),r._26(512,gv.a,gv.a,[iu.a,_v.a]),r._26(512,vv.a,vv.a,[ue.a]),r._26(512,Cv.a,Cv.a,[vv.a]),r._26(512,yv.a,yv.a,[iu.a,Cv.a]),r._26(512,Pv.a,Pv.a,[_v.a]),r._26(512,Av.a,Av.a,[iu.a,Pv.a]),r._26(512,bv.a,bv.a,[lu.a]),r._26(512,Iv.a,Iv.a,[iu.a,bv.a]),r._26(512,Sv.a,Sv.a,[lu.a,km.a]),r._26(512,Ev.a,Ev.a,[iu.a,Sv.a]),r._26(512,Mv.a,Mv.a,[lu.a]),r._26(512,wv.a,wv.a,[iu.a,Mv.a]),r._26(512,kv.a,kv.a,[]),r._26(512,Tv.a,Tv.a,[iu.a,kv.a]),r._26(512,Ov.a,Ov.a,[ue.a,km.a,fe.a,S.a]),r._26(512,Dv.a,Dv.a,[iu.a,Ov.a]),r._26(512,xv.a,xv.a,[lu.a]),r._26(512,Fv.a,Fv.a,[iu.a,xv.a]),r._26(512,Lv.a,Lv.a,[lu.a]),r._26(512,Uv.a,Uv.a,[iu.a,Lv.a]),r._26(512,Rv.a,Rv.a,[lu.a,km.a]),r._26(512,Hv.a,Hv.a,[iu.a,Rv.a]),r._26(512,Nv.a,Nv.a,[iu.a,vv.a]),r._26(512,Bv.a,Bv.a,[ue.a,S.a]),r._26(512,Vv.a,Vv.a,[iu.a,Bv.a]),r._26(512,Wv.a,Wv.a,[Lv.a]),r._26(512,Kv.a,Kv.a,[iu.a,Wv.a]),r._26(512,qv.a,qv.a,[ue.a]),r._26(512,Gv.a,Gv.a,[iu.a,qv.a]),r._26(512,jv.a,jv.a,[ue.a]),r._26(512,Qv.a,Qv.a,[iu.a,jv.a]),r._26(512,zv.a,zv.a,[]),r._26(512,$v.a,$v.a,[]),r._26(512,Yv.a,Yv.a,[at.a,$v.a]),r._26(512,Xv.a,Xv.a,[]),r._26(512,Jv.a,Jv.a,[un.a,Xv.a]),r._26(512,Zv.a,Zv.a,[]),r._26(512,eC.a,eC.a,[un.a,Zv.a]),r._26(512,nC.a,nC.a,[]),r._26(512,tC.a,tC.a,[un.a,nC.a]),r._26(512,oC.a,oC.a,[]),r._26(512,rC.a,rC.a,[un.a,oC.a]),r._26(512,iC.a,iC.a,[r.n]),r._26(512,lC.a,lC.a,[un.a,iC.a]),r._26(512,sC.a,sC.a,[]),r._26(512,aC.a,aC.a,[un.a,sC.a]),r._26(512,uC.a,uC.a,[]),r._26(512,dC.a,dC.a,[un.a,uC.a]),r._26(512,cC.a,cC.a,[]),r._26(512,pC.a,pC.a,[un.a,cC.a]),r._26(512,fC.a,fC.a,[_e.a,el.a,pe.a,fe.a,ue.a]),r._26(512,hC.a,hC.a,[un.a,fC.a]),r._26(512,mC.a,mC.a,[fe.a,ae.a]),r._26(512,_C.a,_C.a,[un.a,mC.a]),r._26(512,gC.a,gC.a,[el.a,pe.a]),r._26(512,vC.a,vC.a,[un.a,gC.a]),r._26(512,CC.a,CC.a,[]),r._26(512,yC.a,yC.a,[un.a,CC.a]),r._26(512,PC.a,PC.a,[]),r._26(512,AC.a,AC.a,[un.a,PC.a]),r._26(512,bC.a,bC.a,[]),r._26(512,IC.a,IC.a,[un.a,bC.a]),r._26(512,SC.a,SC.a,[]),r._26(512,EC.a,EC.a,[b.a,es.a]),r._26(512,MC.a,MC.a,[pe.a]),r._26(512,i.a,i.a,[on.a,Dl.a,EC.a,X.a,pe.a,Ce.a,_e.a,Ps.a,MC.a]),r._26(256,dl.l,"XSRF-TOKEN",[]),r._26(256,dl.m,"X-XSRF-TOKEN",[]),r._26(256,Nl.a,wC.a,[]),r._26(256,l.a,Xi.a,[]),r._26(256,te.a,"/",[])])}),TC=t(1957);t(1973);Object(TC.shim)(),Object(r._0)(),Object(o.j)().bootstrapModuleFactory(kC)},,,,,,,,,,,,,function(e,n,t){function webpackContext(e){return t(webpackContextResolve(e))}function webpackContextResolve(e){var n=o[e];if(!(n+1))throw new Error("Cannot find module '"+e+"'.");return n}var o={"./af":825,"./af.js":825,"./ar":826,"./ar-dz":827,"./ar-dz.js":827,"./ar-kw":828,"./ar-kw.js":828,"./ar-ly":829,"./ar-ly.js":829,"./ar-ma":830,"./ar-ma.js":830,"./ar-sa":831,"./ar-sa.js":831,"./ar-tn":832,"./ar-tn.js":832,"./ar.js":826,"./az":833,"./az.js":833,"./be":834,"./be.js":834,"./bg":835,"./bg.js":835,"./bm":836,"./bm.js":836,"./bn":837,"./bn.js":837,"./bo":838,"./bo.js":838,"./br":839,"./br.js":839,"./bs":840,"./bs.js":840,"./ca":841,"./ca.js":841,"./cs":842,"./cs.js":842,"./cv":843,"./cv.js":843,"./cy":844,"./cy.js":844,"./da":845,"./da.js":845,"./de":846,"./de-at":847,"./de-at.js":847,"./de-ch":848,"./de-ch.js":848,"./de.js":846,"./dv":849,"./dv.js":849,"./el":850,"./el.js":850,"./en-SG":851,"./en-SG.js":851,"./en-au":852,"./en-au.js":852,"./en-ca":853,"./en-ca.js":853,"./en-gb":854,"./en-gb.js":854,"./en-ie":855,"./en-ie.js":855,"./en-il":856,"./en-il.js":856,"./en-nz":857,"./en-nz.js":857,"./eo":858,"./eo.js":858,"./es":859,"./es-do":860,"./es-do.js":860,"./es-us":861,"./es-us.js":861,"./es.js":859,"./et":862,"./et.js":862,"./eu":863,"./eu.js":863,"./fa":864,"./fa.js":864,"./fi":865,"./fi.js":865,"./fo":866,"./fo.js":866,"./fr":867,"./fr-ca":868,"./fr-ca.js":868,"./fr-ch":869,"./fr-ch.js":869,"./fr.js":867,"./fy":870,"./fy.js":870,"./ga":871,"./ga.js":871,"./gd":872,"./gd.js":872,"./gl":873,"./gl.js":873,"./gom-latn":874,"./gom-latn.js":874,"./gu":875,"./gu.js":875,"./he":876,"./he.js":876,"./hi":877,"./hi.js":877,"./hr":878,"./hr.js":878,"./hu":879,"./hu.js":879,"./hy-am":880,"./hy-am.js":880,"./id":881,"./id.js":881,"./is":882,"./is.js":882,"./it":883,"./it-ch":884,"./it-ch.js":884,"./it.js":883,"./ja":885,"./ja.js":885,"./jv":886,"./jv.js":886,"./ka":887,"./ka.js":887,"./kk":888,"./kk.js":888,"./km":889,"./km.js":889,"./kn":890,"./kn.js":890,"./ko":891,"./ko.js":891,"./ku":892,"./ku.js":892,"./ky":893,"./ky.js":893,"./lb":894,"./lb.js":894,"./lo":895,"./lo.js":895,"./lt":896,"./lt.js":896,"./lv":897,"./lv.js":897,"./me":898,"./me.js":898,"./mi":899,"./mi.js":899,"./mk":900,"./mk.js":900,"./ml":901,"./ml.js":901,"./mn":902,"./mn.js":902,"./mr":903,"./mr.js":903,"./ms":904,"./ms-my":905,"./ms-my.js":905,"./ms.js":904,"./mt":906,"./mt.js":906,"./my":907,"./my.js":907,"./nb":908,"./nb.js":908,"./ne":909,"./ne.js":909,"./nl":910,"./nl-be":911,"./nl-be.js":911,"./nl.js":910,"./nn":912,"./nn.js":912,"./pa-in":913,"./pa-in.js":913,"./pl":914,"./pl.js":914,"./pt":915,"./pt-br":916,"./pt-br.js":916,"./pt.js":915,"./ro":917,"./ro.js":917,"./ru":918,"./ru.js":918,"./sd":919,"./sd.js":919,"./se":920,"./se.js":920,"./si":921,"./si.js":921,"./sk":922,"./sk.js":922,"./sl":923,"./sl.js":923,"./sq":924,"./sq.js":924,"./sr":925,"./sr-cyrl":926,"./sr-cyrl.js":926,"./sr.js":925,"./ss":927,"./ss.js":927,"./sv":928,"./sv.js":928,"./sw":929,"./sw.js":929,"./ta":930,"./ta.js":930,"./te":931,"./te.js":931,"./tet":932,"./tet.js":932,"./tg":933,"./tg.js":933,"./th":934,"./th.js":934,"./tl-ph":935,"./tl-ph.js":935,"./tlh":936,"./tlh.js":936,"./tr":937,"./tr.js":937,"./tzl":938,"./tzl.js":938,"./tzm":939,"./tzm-latn":940,"./tzm-latn.js":940,"./tzm.js":939,"./ug-cn":941,"./ug-cn.js":941,"./uk":942,"./uk.js":942,"./ur":943,"./ur.js":943,"./uz":944,"./uz-latn":945,"./uz-latn.js":945,"./uz.js":944,"./vi":946,"./vi.js":946,"./x-pseudo":947,"./x-pseudo.js":947,"./yo":948,"./yo.js":948,"./zh-cn":949,"./zh-cn.js":949,"./zh-hk":950,"./zh-hk.js":950,"./zh-tw":951,"./zh-tw.js":951};webpackContext.keys=function webpackContextKeys(){return Object.keys(o)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=1639},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";(function(e){t.d(n,"a",function(){return i}),t.d(n,"b",function(){return l});var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function __(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),r=function(){function EntryMock(e,n,o,r,i,l,s,a){void 0===i&&(i=""),void 0===l&&(l=""),this.textUtils=e,this.mimeUtils=n,this.isFile=o,this.isDirectory=r,this.name=i,this.fullPath=l,this.fileSystem=s,this.nativeURL=a,this.fs=t(451)}return EntryMock.prototype.copyTo=function(e,n,t,o){var r=this,s=this.fullPath,a=this.textUtils.concatenatePaths(e.fullPath,n=n||this.name),u=this.fs.createReadStream(s),d=this.fs.createWriteStream(a);new Promise(function(e,n){u.on("error",n),d.on("error",n),d.on("close",e),u.pipe(d)}).then(function(){t&&t(new(r.isDirectory?i:l)(r.textUtils,r.mimeUtils,n,a))}).catch(function(e){o&&o(e)})},EntryMock.prototype.getMetadata=function(e,n){this.fs.stat(this.fullPath,function(t,o){t?n&&n(t):e&&e({size:o.size,modificationTime:o.mtime})})},EntryMock.prototype.getParent=function(e,n){var t=this,o="/"==this.fullPath.slice(-1)?this.fullPath.slice(0,-1):this.fullPath,r=o.substr(0,o.lastIndexOf("/"));this.fs.stat(r,function(o,l){if(o||!l.isDirectory())n&&n(o);else{var s=r.substr(r.lastIndexOf("/")+1);e&&e(new i(t.textUtils,t.mimeUtils,s,r))}})},EntryMock.prototype.moveTo=function(e,n,t,o){var r=this,s=this.fullPath,a=this.textUtils.concatenatePaths(e.fullPath,n=n||this.name);this.fs.rename(s,a,function(e){if(e)o&&o(e);else{t&&t(new(r.isDirectory?i:l)(r.textUtils,r.mimeUtils,n,a))}})},EntryMock.prototype.remove=function(e,n){(this.isDirectory?this.fs.rmdir:this.fs.unlink)(this.fullPath,function(t){t<0?n&&n(t):e&&e()})},EntryMock.prototype.setMetadata=function(e,n,t){n&&n("Not supported")},EntryMock.prototype.toInternalURL=function(){return"file://"+this.fullPath},EntryMock.prototype.toURL=function(){return this.fullPath},EntryMock}(),i=function(e){function DirectoryEntryMock(n,t,o,r,i,l){void 0===o&&(o=""),void 0===r&&(r="");var s=e.call(this,n,t,!1,!0,o,r,i,l)||this;return s.fullPath&&!/\/$/.test(s.fullPath)&&(s.fullPath+="/"),s.nativeURL&&!/\/$/.test(s.nativeURL)&&(s.nativeURL+="/"),s}return o(DirectoryEntryMock,e),DirectoryEntryMock.prototype.createReader=function(){return new s(this.textUtils,this.mimeUtils,this.fullPath)},DirectoryEntryMock.prototype.deleteEmptyFolder=function(e,n,t){this.fs.rmdir(e,function(e){e?t&&t(e):n&&n()})},DirectoryEntryMock.prototype.getDirectory=function(e,n,t,o){this.getDirOrFile(!0,e,n,t,o)},DirectoryEntryMock.prototype.getDirOrFile=function(e,n,t,o,r){var i=this,s=function(){o&&o(new(e?DirectoryEntryMock:l)(i.textUtils,i.mimeUtils,u,d))},a=function(n){e?i.fs.mkdir(d,n):i.fs.writeFile(d,"",n)},u=n.substr(n.lastIndexOf("/")+1),d=this.textUtils.concatenatePaths(this.fullPath,n);this.fs.stat(d,function(e){e?t.create?a(function(e){if(e)if("EEXIST"===e.code)s();else if("ENOENT"===e.code){var n=d.substring(0,d.lastIndexOf("/"));n?i.getDirectory(n,t,function(){a(function(e){e?r&&r(e):s()})},r):r&&r(e)}else r&&r(e);else s()}):r&&r(e):s()})},DirectoryEntryMock.prototype.getFile=function(e,n,t,o){this.getDirOrFile(!1,e,n,t,o)},DirectoryEntryMock.prototype.removeRecursively=function(e,n){var t=this;new Promise(function(e,n){t.removeRecursiveFn(t.fullPath,e,n)}).then(function(){e&&e()}).catch(function(e){n&&n(e)})},DirectoryEntryMock.prototype.removeRecursiveFn=function(e,n,t){var o=this;this.fs.stat(e,function(r,i){r?t&&t(r):i.isFile()?o.fs.unlink(e,function(e){e?t&&t(e):n&&n()}):o.fs.readdir(e,function(r,i){if(r)t&&t(r);else if(i.length){var l=0;i.forEach(function(r){o.removeRecursiveFn(o.textUtils.concatenatePaths(e,r),function(){++l==i.length&&o.deleteEmptyFolder(e,n,t)},t)})}else o.deleteEmptyFolder(e,n,t)})})},DirectoryEntryMock}(r),l=function(e){function FileEntryMock(n,t,o,r,i,l){void 0===o&&(o=""),void 0===r&&(r="");var s=e.call(this,n,t,!0,!1,o,r,i,l)||this;return s.fullPath&&/\/$/.test(s.fullPath)&&(s.fullPath=s.fullPath.substring(0,s.fullPath.length-1)),s.nativeURL&&/\/$/.test(s.nativeURL)&&(s.nativeURL=s.nativeURL.substring(0,s.nativeURL.length-1)),s}return o(FileEntryMock,e),FileEntryMock.prototype.createWriter=function(e,n){var t=this;this.file(function(n){e&&e(new a(t.textUtils,t.mimeUtils,n))},n)},FileEntryMock.prototype.file=function(e,n){var t=this;this.getMetadata(function(o){t.fs.readFile(t.fullPath,function(r,i){if(r)n&&n(r);else{i=Uint8Array.from(i).buffer;var l=new File([i],t.name||"",{lastModified:o.modificationTime||null,type:t.mimeUtils.getMimeType(t.mimeUtils.getFileExtension(t.name))||null});l.localURL=t.fullPath,l.start=0,l.end=l.size,e&&e(l)}})},n)},FileEntryMock}(r),s=function(){function DirectoryReaderMock(e,n,o){void 0===o&&(o=null),this.textUtils=e,this.mimeUtils=n,this.localURL=o,this.fs=t(451)}return DirectoryReaderMock.prototype.readEntries=function(e,n){var t=this;this.fs.readdir(this.localURL,function(o,r){if(o)n&&n(o);else try{for(var s=[],a=0;a<r.length;a++){var u=r[a],d=t.textUtils.concatenatePaths(t.localURL,u),c=t.fs.statSync(d);c.isDirectory()?s.push(new i(t.textUtils,t.mimeUtils,u,d)):c.isFile()&&s.push(new l(t.textUtils,t.mimeUtils,u,d))}e&&e(s)}catch(e){n&&n(e)}})},DirectoryReaderMock}(),a=function(){function FileWriterMock(e,n,o){this.textUtils=e,this.mimeUtils=n,this.file=o,this.fs=t(451),this.fileName="",this.length=0,this.size=0,this.position=0,this.readyState=0,this.result=null,this.error=null,o&&(this.localURL=o.localURL||o,this.length=o.size||0)}return FileWriterMock.prototype.abort=function(){},FileWriterMock.prototype.seek=function(e){this.position=e},FileWriterMock.prototype.truncate=function(e){this.size=e},FileWriterMock.prototype.write=function(n){var t=this;if(n&&"[object Blob]"==n.toString()){var o=new FileReader;o.onload=function(){2==o.readyState&&t.writeFile(new e(o.result))},o.readAsArrayBuffer(n)}else n&&"[object ArrayBuffer]"==n.toString()?(n=new Uint8Array(n),this.writeFile(e.from(n))):this.writeFile(n)},FileWriterMock.prototype.writeFile=function(e){var n=this,t=this.fs.createWriteStream(this.localURL,{flags:"r+",start:this.position});t.on("error",function(e){n.onerror&&n.onerror(e)}),t.end(e,function(){n.position+=e.length,n.onwrite&&n.onwrite(),n.onwriteend&&n.onwriteend(),t.destroy()}),this.onwritestart&&this.onwritestart()},FileWriterMock}()}).call(n,t(358).Buffer)},,,function(e,n){e.exports=require("stream")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,n,t){"use strict";t(0),t(1),t(14),t(39),t(5);t.d(n,"a",function(){return o});var o=function(){return function CoreCourseDirectivesModule(){}}()},function(e,n,t){"use strict";t(0),t(1),t(6),t(4),t(5),t(3),t(59),t(157);t.d(n,"a",function(){return o});var o=function(){return function CoreSitePluginsDirectivesModule(){}}()}],[1626]);