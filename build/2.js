webpackJsonp([2],{1989:function(n,e,s){"use strict";function View_AddonMessagesDiscussionsComponent_1(n){return l._42(0,[(n()(),l._16(0,0,null,null,2,"core-search-box",[["autocorrect","off"],["lengthCheck","2"],["searchArea","AddonMessagesDiscussions"],["spellcheck","false"]],null,[[null,"onSubmit"],[null,"onClear"]],function(n,e,s){var l=!0,t=n.component;if("onSubmit"===e){l=!1!==t.searchMessage(s)&&l}if("onClear"===e){l=!1!==t.clearSearch(s)&&l}return l},V.c,V.b)),l._15(1,114688,null,0,P.a,[O.a,S.a,U.a,o.a,a.a,E.a],{placeholder:[0,"placeholder"],autocorrect:[1,"autocorrect"],spellcheck:[2,"spellcheck"],lengthCheck:[3,"lengthCheck"],disabled:[4,"disabled"],searchArea:[5,"searchArea"]},{onSubmit:"onSubmit",onClear:"onClear"}),l._32(131072,k.a,[O.a,l.i])],function(n,e){var s=e.component;n(e,1,0,l._41(e,1,0,l._29(e,2).transform("addon.messages.message")),"off","false","2",!s.loaded,"AddonMessagesDiscussions")},null)}function View_AddonMessagesDiscussionsComponent_3(n){return l._42(0,[(n()(),l._16(0,0,null,null,17,"a",[["class","addon-message-discussion item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0],[2,"core-split-item-selected",null]],[[null,"click"]],function(n,e,s){var l=!0;if("click"===e){l=!1!==n.component.gotoDiscussion(n.context.$implicit.userid,n.context.$implicit.messageid)&&l}return l},R.b,R.a)),l._15(1,1097728,null,3,T.a,[$.a,L.a,l.p,l.K,[2,q.a]],null,null),l._37(335544320,4,{contentLabel:0}),l._37(603979776,5,{_buttons:1}),l._37(603979776,6,{_icons:1}),l._15(5,16384,null,0,W.a,[],null,null),(n()(),l._40(-1,2,["\n                "])),(n()(),l._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,K.b,K.a)),l._15(8,16384,null,0,N.a,[],null,null),l._15(9,770048,null,0,F.a,[B.a,a.a,S.a,j.a,o.a,[2,u.a]],{user:[0,"user"],checkOnline:[1,"checkOnline"]},null),(n()(),l._40(-1,2,["\n                "])),(n()(),l._16(11,0,null,2,1,"h2",[],null,null,null,null,null)),(n()(),l._40(12,null,["",""])),(n()(),l._40(-1,2,["\n                "])),(n()(),l._16(14,0,null,2,2,"p",[],null,null,null,null,null)),(n()(),l._16(15,16777216,null,null,1,"core-format-text",[["clean","true"],["contextLevel","system"],["singleLine","true"]],null,null,null,null,null)),l._15(16,540672,null,0,G.a,[l.p,a.a,E.a,H.a,O.a,z.a,S.a,J.a,Z.a,Q.a,j.a,X.a,[2,B.a],[2,Y.a],[2,u.a],nn.a,o.a,en.a,sn.a,ln.a,l.W],{text:[0,"text"],clean:[1,"clean"],singleLine:[2,"singleLine"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"]},null),(n()(),l._40(-1,2,["\n            "]))],function(n,e){n(e,9,0,e.context.$implicit,e.context.$implicit.showonlinestatus);n(e,16,0,e.context.$implicit.lastmessage,"true","true","system",0)},function(n,e){n(e,0,0,e.context.$implicit.fullname,e.context.$implicit.userid==e.component.discussionUserId);n(e,12,0,e.context.$implicit.fullname)})}function View_AddonMessagesDiscussionsComponent_2(n){return l._42(0,[(n()(),l._16(0,0,null,null,21,"ion-list",[["no-margin",""]],null,null,null,null,null)),l._15(1,16384,null,0,tn.a,[L.a,l.p,l.K,z.a,on.l,an.a],null,null),(n()(),l._40(-1,null,["\n            "])),(n()(),l._16(3,0,null,null,14,"ion-item-divider",[["class","item item-divider"]],null,null,null,R.b,R.a)),l._15(4,1097728,null,3,T.a,[$.a,L.a,l.p,l.K,[2,q.a]],null,null),l._37(335544320,1,{contentLabel:0}),l._37(603979776,2,{_buttons:1}),l._37(603979776,3,{_icons:1}),l._15(8,16384,null,0,un.a,[L.a,l.p,l.K],null,null),(n()(),l._40(-1,2,["\n                "])),(n()(),l._16(10,0,null,2,2,"h2",[],null,null,null,null,null)),(n()(),l._40(11,null,["",""])),l._32(131072,k.a,[O.a,l.i]),(n()(),l._40(-1,2,["\n                "])),(n()(),l._16(14,0,null,4,2,"ion-note",[["item-end",""]],null,null,null,null,null)),l._15(15,16384,null,0,rn.a,[L.a,l.p,l.K],null,null),(n()(),l._40(16,null,["",""])),(n()(),l._40(-1,2,["\n            "])),(n()(),l._40(-1,null,["\n            "])),(n()(),l._11(16777216,null,null,1,null,View_AddonMessagesDiscussionsComponent_3)),l._15(20,802816,null,0,cn.j,[l.W,l.T,l.v],{ngForOf:[0,"ngForOf"]},null),(n()(),l._40(-1,null,["\n        "]))],function(n,e){n(e,20,0,e.component.search.results)},function(n,e){var s=e.component;n(e,11,0,l._41(e,11,0,l._29(e,12).transform("core.searchresults")));n(e,16,0,s.search.results.length)})}function View_AddonMessagesDiscussionsComponent_7(n){return l._42(0,[(n()(),l._16(0,0,null,null,0,"span",[["class","core-primary-circle"]],null,null,null,null,null))],null,null)}function View_AddonMessagesDiscussionsComponent_8(n){return l._42(0,[(n()(),l._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),l._40(1,null,["",""])),l._34(2,1)],null,function(n,e){n(e,1,0,l._41(e,1,0,n(e,2,0,l._29(e.parent.parent.parent.parent,0),e.parent.parent.context.$implicit.message.timecreated/1e3)))})}function View_AddonMessagesDiscussionsComponent_6(n){return l._42(0,[(n()(),l._16(0,0,null,null,8,"ion-note",[],null,null,null,null,null)),l._15(1,16384,null,0,rn.a,[L.a,l.p,l.K],null,null),(n()(),l._40(-1,null,["\n                    "])),(n()(),l._11(16777216,null,null,1,null,View_AddonMessagesDiscussionsComponent_7)),l._15(4,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,null,["\n                    "])),(n()(),l._11(16777216,null,null,1,null,View_AddonMessagesDiscussionsComponent_8)),l._15(7,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,null,["\n                "]))],function(n,e){n(e,4,0,e.parent.context.$implicit.unread);n(e,7,0,e.parent.context.$implicit.message.timecreated>0)},null)}function View_AddonMessagesDiscussionsComponent_5(n){return l._42(0,[(n()(),l._16(0,0,null,null,20,"a",[["class","addon-message-discussion item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0],[2,"core-split-item-selected",null]],[[null,"click"]],function(n,e,s){var l=!0;if("click"===e){l=!1!==n.component.gotoDiscussion(n.context.$implicit.message.user)&&l}return l},R.b,R.a)),l._15(1,1097728,null,3,T.a,[$.a,L.a,l.p,l.K,[2,q.a]],null,null),l._37(335544320,7,{contentLabel:0}),l._37(603979776,8,{_buttons:1}),l._37(603979776,9,{_icons:1}),l._15(5,16384,null,0,W.a,[],null,null),(n()(),l._40(-1,2,["\n                "])),(n()(),l._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,K.b,K.a)),l._15(8,16384,null,0,N.a,[],null,null),l._15(9,770048,null,0,F.a,[B.a,a.a,S.a,j.a,o.a,[2,u.a]],{user:[0,"user"],checkOnline:[1,"checkOnline"]},null),(n()(),l._40(-1,2,["\n                "])),(n()(),l._16(11,0,null,2,1,"h2",[],null,null,null,null,null)),(n()(),l._40(12,null,["",""])),(n()(),l._40(-1,2,["\n                "])),(n()(),l._11(16777216,null,2,1,null,View_AddonMessagesDiscussionsComponent_6)),l._15(15,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,2,["\n                "])),(n()(),l._16(17,0,null,2,2,"p",[],null,null,null,null,null)),(n()(),l._16(18,16777216,null,null,1,"core-format-text",[["clean","true"],["contextLevel","system"],["singleLine","true"]],null,null,null,null,null)),l._15(19,540672,null,0,G.a,[l.p,a.a,E.a,H.a,O.a,z.a,S.a,J.a,Z.a,Q.a,j.a,X.a,[2,B.a],[2,Y.a],[2,u.a],nn.a,o.a,en.a,sn.a,ln.a,l.W],{text:[0,"text"],clean:[1,"clean"],singleLine:[2,"singleLine"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"]},null),(n()(),l._40(-1,2,["\n            "]))],function(n,e){n(e,9,0,e.context.$implicit,e.context.$implicit.showonlinestatus);n(e,15,0,e.context.$implicit.message.timecreated>0||e.context.$implicit.unread);n(e,19,0,e.context.$implicit.message.message,"true","true","system",0)},function(n,e){n(e,0,0,e.context.$implicit.fullname,e.context.$implicit.message.user==e.component.discussionUserId);n(e,12,0,e.context.$implicit.fullname)})}function View_AddonMessagesDiscussionsComponent_4(n){return l._42(0,[(n()(),l._16(0,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),l._15(1,16384,null,0,tn.a,[L.a,l.p,l.K,z.a,on.l,an.a],null,null),(n()(),l._40(-1,null,["\n            "])),(n()(),l._11(16777216,null,null,1,null,View_AddonMessagesDiscussionsComponent_5)),l._15(4,802816,null,0,cn.j,[l.W,l.T,l.v],{ngForOf:[0,"ngForOf"]},null),(n()(),l._40(-1,null,["\n        "]))],function(n,e){n(e,4,0,e.component.discussions)},null)}function View_AddonMessagesDiscussionsComponent_9(n){return l._42(0,[(n()(),l._16(0,0,null,null,2,"core-empty-box",[["icon","chatbubbles"]],null,null,null,dn.b,dn.a)),l._15(1,49152,null,0,_n.a,[],{message:[0,"message"],icon:[1,"icon"]},null),l._32(131072,k.a,[O.a,l.i])],function(n,e){n(e,1,0,l._41(e,1,0,l._29(e,2).transform("addon.messages.nomessagesfound")),"chatbubbles")},null)}function View_AddonMessagesDiscussionsComponent_10(n){return l._42(0,[(n()(),l._16(0,0,null,null,2,"core-empty-box",[["icon","search"]],null,null,null,dn.b,dn.a)),l._15(1,49152,null,0,_n.a,[],{message:[0,"message"],icon:[1,"icon"]},null),l._32(131072,k.a,[O.a,l.i])],function(n,e){n(e,1,0,l._41(e,1,0,l._29(e,2).transform("core.noresults")),"search")},null)}function View_AddonMessagesDiscussionsComponent_0(n){return l._42(0,[l._32(0,hn.a,[Z.a,O.a,fn.a]),(n()(),l._16(1,0,null,null,29,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,gn.b,gn.a)),l._15(2,4374528,null,0,Y.a,[L.a,z.a,an.a,l.p,l.K,pn.a,mn.a,l.D,[2,Cn.a],[2,B.a]],null,null),(n()(),l._40(-1,1,["\n    "])),(n()(),l._16(4,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,e,s){var l=!0;if("ionRefresh"===e){l=!1!==n.component.refreshData(s)&&l}return l},null,null)),l._15(5,212992,null,0,vn.a,[z.a,Y.a,l.D,on.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),l._40(-1,null,["\n        "])),(n()(),l._16(7,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,bn.b,bn.a)),l._15(8,114688,null,0,Mn.a,[vn.a,L.a],{pullingText:[0,"pullingText"]},null),l._32(131072,k.a,[O.a,l.i]),(n()(),l._40(-1,null,["\n    "])),(n()(),l._40(-1,1,["\n\n    "])),(n()(),l._11(16777216,null,1,1,null,View_AddonMessagesDiscussionsComponent_1)),l._15(13,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,1,["\n\n    "])),(n()(),l._16(15,0,null,1,14,"core-loading",[],null,null,null,In.b,In.a)),l._15(16,638976,null,0,An.a,[O.a,l.p,o.a,S.a],{hideUntil:[0,"hideUntil"],message:[1,"message"]},null),(n()(),l._40(-1,0,["\n\n        "])),(n()(),l._11(16777216,null,0,1,null,View_AddonMessagesDiscussionsComponent_2)),l._15(19,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,0,["\n\n        "])),(n()(),l._11(16777216,null,0,1,null,View_AddonMessagesDiscussionsComponent_4)),l._15(22,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,0,["\n\n        "])),(n()(),l._11(16777216,null,0,1,null,View_AddonMessagesDiscussionsComponent_9)),l._15(25,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,0,["\n\n        "])),(n()(),l._11(16777216,null,0,1,null,View_AddonMessagesDiscussionsComponent_10)),l._15(28,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,0,["\n    "])),(n()(),l._40(-1,1,["\n"])),(n()(),l._40(-1,null,["\n"]))],function(n,e){var s=e.component;n(e,5,0,s.loaded);n(e,8,0,l._19(1,"",l._41(e,8,0,l._29(e,9).transform("core.pulltorefresh")),""));n(e,13,0,s.search.enabled);n(e,16,0,s.loaded,s.loadingMessage);n(e,19,0,s.search.showResults);n(e,22,0,!s.search.showResults);n(e,25,0,(!s.discussions||s.discussions.length<=0)&&!s.search.showResults);n(e,28,0,(!s.search.results||s.search.results.length<=0)&&s.search.showResults)},function(n,e){n(e,1,0,l._29(e,2).statusbarPadding,l._29(e,2)._hasRefresher);n(e,4,0,"inactive"!==l._29(e,5).state,l._29(e,5)._top);n(e,7,0,l._29(e,8).r.state)})}function View_AddonMessagesContactsComponent_1(n){return l._42(0,[(n()(),l._16(0,0,null,null,2,"core-empty-box",[["icon","person"]],null,null,null,dn.b,dn.a)),l._15(1,49152,null,0,_n.a,[],{message:[0,"message"],icon:[1,"icon"]},null),l._32(131072,k.a,[O.a,l.i])],function(n,e){n(e,1,0,l._41(e,1,0,l._29(e,2).transform("addon.messages.contactlistempty")),"person")},null)}function View_AddonMessagesContactsComponent_2(n){return l._42(0,[(n()(),l._16(0,0,null,null,2,"core-empty-box",[["icon","person"]],null,null,null,dn.b,dn.a)),l._15(1,49152,null,0,_n.a,[],{message:[0,"message"],icon:[1,"icon"]},null),l._32(131072,k.a,[O.a,l.i])],function(n,e){n(e,1,0,l._41(e,1,0,l._29(e,2).transform("addon.messages.nousersfound")),"person")},null)}function View_AddonMessagesContactsComponent_6(n){return l._42(0,[(n()(),l._16(0,0,null,null,13,"a",[["class","addon-messages-conversation-item item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0],[2,"core-split-item-selected",null]],[[null,"click"]],function(n,e,s){var l=!0;if("click"===e){l=!1!==n.component.gotoDiscussion(n.parent.context.$implicit.id)&&l}return l},R.b,R.a)),l._15(1,1097728,null,3,T.a,[$.a,L.a,l.p,l.K,[2,q.a]],null,null),l._37(335544320,4,{contentLabel:0}),l._37(603979776,5,{_buttons:1}),l._37(603979776,6,{_icons:1}),l._15(5,16384,null,0,W.a,[],null,null),(n()(),l._40(-1,2,["\n                        "])),(n()(),l._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,K.b,K.a)),l._15(8,16384,null,0,N.a,[],null,null),l._15(9,770048,null,0,F.a,[B.a,a.a,S.a,j.a,o.a,[2,u.a]],{user:[0,"user"],checkOnline:[1,"checkOnline"]},null),(n()(),l._40(-1,2,["\n                        "])),(n()(),l._16(11,0,null,2,1,"h2",[],null,null,null,null,null)),(n()(),l._40(12,null,["",""])),(n()(),l._40(-1,2,["\n                    "]))],function(n,e){n(e,9,0,e.parent.context.$implicit,e.parent.context.$implicit.showonlinestatus)},function(n,e){n(e,0,0,e.parent.context.$implicit.fullname,e.parent.context.$implicit.id==e.component.discussionUserId);n(e,12,0,e.parent.context.$implicit.fullname)})}function View_AddonMessagesContactsComponent_5(n){return l._42(0,[(n()(),l._16(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),l._40(-1,null,["\n                    "])),(n()(),l._40(-1,null,["\n                    "])),(n()(),l._11(16777216,null,null,1,null,View_AddonMessagesContactsComponent_6)),l._15(4,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,null,["\n                "]))],function(n,e){n(e,4,0,e.context.$implicit.profileimageurl||e.context.$implicit.profileimageurlsmall)},null)}function View_AddonMessagesContactsComponent_4(n){return l._42(0,[(n()(),l._16(0,0,null,null,20,null,null,null,null,null,null,null)),(n()(),l._40(-1,null,["\n                "])),(n()(),l._16(2,0,null,null,14,"ion-item-divider",[["class","item item-divider"]],null,null,null,R.b,R.a)),l._15(3,1097728,null,3,T.a,[$.a,L.a,l.p,l.K,[2,q.a]],null,null),l._37(335544320,1,{contentLabel:0}),l._37(603979776,2,{_buttons:1}),l._37(603979776,3,{_icons:1}),l._15(7,16384,null,0,un.a,[L.a,l.p,l.K],null,null),(n()(),l._40(-1,2,["\n                    "])),(n()(),l._16(9,0,null,2,2,"h2",[],null,null,null,null,null)),(n()(),l._40(10,null,["",""])),l._32(131072,k.a,[O.a,l.i]),(n()(),l._40(-1,2,["\n                    "])),(n()(),l._16(13,0,null,4,2,"ion-note",[["item-end",""]],null,null,null,null,null)),l._15(14,16384,null,0,rn.a,[L.a,l.p,l.K],null,null),(n()(),l._40(15,null,["",""])),(n()(),l._40(-1,2,["\n                "])),(n()(),l._40(-1,null,["\n                "])),(n()(),l._11(16777216,null,null,1,null,View_AddonMessagesContactsComponent_5)),l._15(19,802816,null,0,cn.j,[l.W,l.T,l.v],{ngForOf:[0,"ngForOf"]},null),(n()(),l._40(-1,null,["\n            "]))],function(n,e){n(e,19,0,e.component.contacts[e.parent.context.$implicit])},function(n,e){var s=e.component;n(e,10,0,l._41(e,10,0,l._29(e,11).transform("addon.messages.type_"+e.parent.context.$implicit)));n(e,15,0,s.contacts[e.parent.context.$implicit].length)})}function View_AddonMessagesContactsComponent_3(n){return l._42(0,[(n()(),l._16(0,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),l._15(1,16384,null,0,tn.a,[L.a,l.p,l.K,z.a,on.l,an.a],null,null),(n()(),l._40(-1,null,["\n            "])),(n()(),l._11(16777216,null,null,1,null,View_AddonMessagesContactsComponent_4)),l._15(4,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,null,["\n        "]))],function(n,e){var s=e.component;n(e,4,0,s.contacts[e.context.$implicit]&&(s.contacts[e.context.$implicit].length>0||e.context.$implicit===s.searchType))},null)}function View_AddonMessagesContactsComponent_0(n){return l._42(0,[(n()(),l._16(0,0,null,null,27,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,gn.b,gn.a)),l._15(1,4374528,null,0,Y.a,[L.a,z.a,an.a,l.p,l.K,pn.a,mn.a,l.D,[2,Cn.a],[2,B.a]],null,null),(n()(),l._40(-1,1,["\n    "])),(n()(),l._16(3,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,e,s){var l=!0;if("ionRefresh"===e){l=!1!==n.component.refreshData(s)&&l}return l},null,null)),l._15(4,212992,null,0,vn.a,[z.a,Y.a,l.D,on.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),l._40(-1,null,["\n        "])),(n()(),l._16(6,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,bn.b,bn.a)),l._15(7,114688,null,0,Mn.a,[vn.a,L.a],{pullingText:[0,"pullingText"]},null),l._32(131072,k.a,[O.a,l.i]),(n()(),l._40(-1,null,["\n    "])),(n()(),l._40(-1,1,["\n\n    "])),(n()(),l._16(11,0,null,1,2,"core-search-box",[["autocorrect","off"],["lengthCheck","2"],["searchArea","AddonMessagesContacts"],["spellcheck","false"]],null,[[null,"onSubmit"],[null,"onClear"]],function(n,e,s){var l=!0,t=n.component;if("onSubmit"===e){l=!1!==t.search(s)&&l}if("onClear"===e){l=!1!==t.clearSearch(s)&&l}return l},V.c,V.b)),l._15(12,114688,null,0,P.a,[O.a,S.a,U.a,o.a,a.a,E.a],{placeholder:[0,"placeholder"],autocorrect:[1,"autocorrect"],spellcheck:[2,"spellcheck"],lengthCheck:[3,"lengthCheck"],disabled:[4,"disabled"],searchArea:[5,"searchArea"]},{onSubmit:"onSubmit",onClear:"onClear"}),l._32(131072,k.a,[O.a,l.i]),(n()(),l._40(-1,1,["\n\n    "])),(n()(),l._16(15,0,null,1,11,"core-loading",[],null,null,null,In.b,In.a)),l._15(16,638976,null,0,An.a,[O.a,l.p,o.a,S.a],{hideUntil:[0,"hideUntil"],message:[1,"message"]},null),(n()(),l._40(-1,0,["\n        "])),(n()(),l._11(16777216,null,0,1,null,View_AddonMessagesContactsComponent_1)),l._15(19,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,0,["\n\n        "])),(n()(),l._11(16777216,null,0,1,null,View_AddonMessagesContactsComponent_2)),l._15(22,16384,null,0,cn.k,[l.W,l.T],{ngIf:[0,"ngIf"]},null),(n()(),l._40(-1,0,["\n\n        "])),(n()(),l._11(16777216,null,0,1,null,View_AddonMessagesContactsComponent_3)),l._15(25,802816,null,0,cn.j,[l.W,l.T,l.v],{ngForOf:[0,"ngForOf"]},null),(n()(),l._40(-1,0,["\n    "])),(n()(),l._40(-1,1,["\n"])),(n()(),l._40(-1,null,["\n"]))],function(n,e){var s=e.component;n(e,4,0,s.loaded);n(e,7,0,l._19(1,"",l._41(e,7,0,l._29(e,8).transform("core.pulltorefresh")),""));n(e,12,0,l._41(e,12,0,l._29(e,13).transform("addon.messages.contactname")),"off","false","2",!s.loaded,"AddonMessagesContacts");n(e,16,0,s.loaded,s.loadingMessage);n(e,19,0,!s.hasContacts&&""==s.searchString);n(e,22,0,!s.hasContacts&&""!=s.searchString);n(e,25,0,s.contactTypes)},function(n,e){n(e,0,0,l._29(e,1).statusbarPadding,l._29(e,1)._hasRefresher);n(e,3,0,"inactive"!==l._29(e,4).state,l._29(e,4)._top);n(e,6,0,l._29(e,7).r.state)})}function View_AddonMessagesIndexPage_1(n){return l._42(0,[(n()(),l._40(-1,null,["\n                    "])),(n()(),l._16(1,0,null,null,1,"addon-messages-discussions",[],null,null,null,View_AddonMessagesDiscussionsComponent_0,yn)),l._15(2,245760,null,0,Dn.a,[o.a,a.a,O.a,i.a,E.a,wn.a,j.a,z.a,S.a,xn.a],null,null),(n()(),l._40(-1,null,["\n                "]))],function(n,e){n(e,2,0)},null)}function View_AddonMessagesIndexPage_2(n){return l._42(0,[(n()(),l._40(-1,null,["\n                    "])),(n()(),l._16(1,0,null,null,1,"addon-messages-contacts",[],null,null,null,View_AddonMessagesContactsComponent_0,Pn)),l._15(2,245760,null,0,Vn.a,[a.a,O.a,j.a,i.a,E.a,wn.a,o.a],null,null),(n()(),l._40(-1,null,["\n                "]))],function(n,e){n(e,2,0)},null)}function View_AddonMessagesIndexPage_0(n){return l._42(0,[l._37(402653184,1,{splitviewCtrl:0}),l._37(402653184,2,{tabsComponent:0}),(n()(),l._16(2,0,null,null,21,"ion-header",[],null,null,null,null,null)),l._15(3,16384,null,0,On.a,[L.a,l.p,l.K,[2,Cn.a]],null,null),(n()(),l._40(-1,null,["\n    "])),(n()(),l._16(5,0,null,null,17,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Sn.b,Sn.a)),l._15(6,49152,null,0,Un.a,[pn.a,[2,Cn.a],[2,B.a],L.a,l.p,l.K],null,null),l._15(7,212992,null,0,En.a,[Un.a,z.a,O.a,o.a],null,null),(n()(),l._40(-1,3,["\n        "])),(n()(),l._16(9,0,null,3,3,"ion-title",[],null,null,null,kn.b,kn.a)),l._15(10,49152,null,0,Rn.a,[L.a,l.p,l.K,[2,Tn.a],[2,Un.a]],null,null),(n()(),l._40(11,0,["",""])),l._32(131072,k.a,[O.a,l.i]),(n()(),l._40(-1,3,["\n        "])),(n()(),l._16(14,0,null,2,7,"ion-buttons",[["end",""]],null,null,null,null,null)),l._15(15,16384,null,1,$n.a,[L.a,l.p,l.K,[2,Tn.a],[2,Un.a]],null,null),l._37(603979776,3,{_buttons:1}),(n()(),l._40(-1,null,["\n            "])),(n()(),l._40(-1,null,["\n            "])),(n()(),l._16(19,0,null,null,1,"core-context-menu",[],null,null,null,Ln.b,Ln.a)),l._15(20,245760,null,0,qn.a,[O.a,Wn.a,l.p,E.a,[2,Kn.a],S.a],null,null),(n()(),l._40(-1,null,["\n        "])),(n()(),l._40(-1,3,["\n    "])),(n()(),l._40(-1,null,["\n"])),(n()(),l._40(-1,null,["\n"])),(n()(),l._16(25,0,null,null,28,"core-split-view",[],null,null,null,Nn.b,Nn.a)),l._15(26,245760,[[1,4]],0,u.a,[[2,B.a],l.p,Fn.a,z.a,O.a],null,null),(n()(),l._40(-1,0,["\n    "])),(n()(),l._16(28,0,null,0,24,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,gn.b,gn.a)),l._15(29,4374528,null,0,Y.a,[L.a,z.a,an.a,l.p,l.K,pn.a,mn.a,l.D,[2,Cn.a],[2,B.a]],null,null),(n()(),l._40(-1,1,["\n        "])),(n()(),l._16(31,0,null,1,20,"core-tabs",[],null,null,null,Bn.b,Bn.a)),l._15(32,4964352,[[2,4]],0,r.a,[l.p,Y.a,E.a,j.a,jn.a,z.a,O.a],null,null),(n()(),l._40(-1,0,["\n            "])),(n()(),l._16(34,0,null,0,7,"core-tab",[["icon","chatbubbles"]],null,null,null,Gn.b,Gn.a)),l._15(35,245760,null,2,Kn.a,[r.a,l.p,E.a,S.a],{title:[0,"title"],icon:[1,"icon"]},null),l._37(335544320,4,{template:0}),l._37(335544320,5,{content:0}),l._32(131072,k.a,[O.a,l.i]),(n()(),l._40(-1,null,["\n                "])),(n()(),l._11(0,[[4,2]],null,0,null,View_AddonMessagesIndexPage_1)),(n()(),l._40(-1,null,["\n            "])),(n()(),l._40(-1,0,["\n            "])),(n()(),l._16(43,0,null,0,7,"core-tab",[["icon","person"]],null,null,null,Gn.b,Gn.a)),l._15(44,245760,null,2,Kn.a,[r.a,l.p,E.a,S.a],{title:[0,"title"],icon:[1,"icon"]},null),l._37(335544320,6,{template:0}),l._37(335544320,7,{content:0}),l._32(131072,k.a,[O.a,l.i]),(n()(),l._40(-1,null,["\n                "])),(n()(),l._11(0,[[6,2]],null,0,null,View_AddonMessagesIndexPage_2)),(n()(),l._40(-1,null,["\n            "])),(n()(),l._40(-1,0,["\n        "])),(n()(),l._40(-1,1,["\n    "])),(n()(),l._40(-1,0,["\n"]))],function(n,e){n(e,7,0),n(e,20,0),n(e,26,0),n(e,32,0);n(e,35,0,l._41(e,35,0,l._29(e,38).transform("addon.messages.messages")),"chatbubbles");n(e,44,0,l._41(e,44,0,l._29(e,47).transform("addon.messages.contacts")),"person")},function(n,e){n(e,5,0,l._29(e,6)._hidden,l._29(e,6)._sbPadding);n(e,11,0,l._41(e,11,0,l._29(e,12).transform("addon.messages.messages")));n(e,28,0,l._29(e,29).statusbarPadding,l._29(e,29)._hasRefresher)})}Object.defineProperty(e,"__esModule",{value:!0});var l=s(1),t=(s(0),s(6),s(4)),o=s(10),a=s(2),i=s(162),u=s(29),r=s(202),c=function(){function AddonMessagesIndexPage(n,e){var s=this;this.siteId=e.getCurrentSiteId(),this.loadSplitViewObserver=n.on(i.a.SPLIT_VIEW_LOAD_EVENT,function(n){!n.discussion||!s.splitviewCtrl.isOn()&&n.onlyWithSplitView||s.gotoDiscussion(n.discussion,n.message)},this.siteId)}return AddonMessagesIndexPage.prototype.gotoDiscussion=function(n,e){var s={userId:n};e&&(s.message=e),this.splitviewCtrl.push("AddonMessagesDiscussionPage",s)},AddonMessagesIndexPage.prototype.ionViewDidEnter=function(){this.tabsComponent&&this.tabsComponent.ionViewDidEnter()},AddonMessagesIndexPage.prototype.ionViewDidLeave=function(){this.tabsComponent&&this.tabsComponent.ionViewDidLeave()},AddonMessagesIndexPage.prototype.ngOnDestroy=function(){this.loadSplitViewObserver&&this.loadSplitViewObserver.off()},AddonMessagesIndexPage}(),d=s(27),_=s(33),h=s(2120),f=function(){return function AddonMessagesIndexPageModule(){}}(),g=s(1522),p=s(1523),m=s(1524),C=s(1525),v=s(1526),b=s(1527),M=s(1528),I=s(1529),A=s(1530),D=s(1531),w=s(1532),x=s(1533),y=s(1534),V=s(475),P=s(379),O=s(19),S=s(3),U=s(283),E=s(5),k=s(26),R=s(32),T=s(22),$=s(20),L=s(9),q=s(28),W=s(34),K=s(214),N=s(161),F=s(183),B=s(21),j=s(11),G=s(48),H=s(12),z=s(17),J=s(23),Z=s(7),Q=s(18),X=s(16),Y=s(30),nn=s(43),en=s(41),sn=s(31),ln=s(37),tn=s(87),on=s(45),an=s(35),un=s(101),rn=s(248),cn=s(8),dn=s(125),_n=s(115),hn=s(377),fn=s(25),gn=s(182),pn=s(36),mn=s(108),Cn=s(40),vn=s(160),bn=s(213),Mn=s(174),In=s(55),An=s(52),Dn=s(2121),wn=s(70),xn=s(145),yn=l._14({encapsulation:2,styles:[],data:{}}),Vn=s(2124),Pn=l._14({encapsulation:2,styles:[],data:{}}),On=s(371),Sn=s(723),Un=s(212),En=s(473),kn=s(724),Rn=s(314),Tn=s(247),$n=s(372),Ln=s(92),qn=s(79),Wn=s(71),Kn=s(77),Nn=s(474),Fn=s(73),Bn=s(731),jn=s(127),Gn=s(732),Hn=l._14({encapsulation:2,styles:[],data:{}}),zn=l._12("page-addon-messages-index",c,function View_AddonMessagesIndexPage_Host_0(n){return l._42(0,[(n()(),l._16(0,0,null,null,1,"page-addon-messages-index",[],null,null,null,View_AddonMessagesIndexPage_0,Hn)),l._15(1,180224,null,0,c,[o.a,a.a],null,null)],null,null)},{},{},[]),Jn=s(24),Zn=s(367),Qn=s(368),Xn=s(370),Yn=s(369),ne=s(472),ee=s(722),se=s(107),le=s(315),te=s(270);s.d(e,"AddonMessagesIndexPageModuleNgFactory",function(){return oe});var oe=l._13(f,[],function(n){return l._25([l._26(512,l.n,l._6,[[8,[g.a,p.a,m.a,C.a,v.a,b.a,M.a,I.a,A.a,D.a,w.a,x.a,y.a,V.a,zn]],[3,l.n],l.B]),l._26(4608,cn.m,cn.l,[l.x,[2,cn.w]]),l._26(4608,Jn.x,Jn.x,[]),l._26(4608,Jn.d,Jn.d,[]),l._26(4608,Zn.b,Zn.a,[]),l._26(4608,Qn.a,Qn.b,[]),l._26(4608,Xn.b,Xn.a,[]),l._26(4608,Yn.b,Yn.a,[]),l._26(4608,O.a,O.a,[ne.a,Zn.b,Qn.a,Xn.b,Yn.b,O.b,O.c]),l._26(512,cn.b,cn.b,[]),l._26(512,Jn.v,Jn.v,[]),l._26(512,Jn.i,Jn.i,[]),l._26(512,Jn.s,Jn.s,[]),l._26(512,ee.a,ee.a,[]),l._26(512,t.a,t.a,[]),l._26(512,_.a,_.a,[]),l._26(512,se.a,se.a,[]),l._26(512,d.a,d.a,[]),l._26(512,le.a,le.a,[]),l._26(512,h.a,h.a,[]),l._26(512,ee.b,ee.b,[]),l._26(512,f,f,[]),l._26(256,O.c,void 0,[]),l._26(256,O.b,void 0,[]),l._26(256,te.a,c,[])])})},2120:function(n,e,s){"use strict";s.d(e,"a",function(){return l});s(0),s(6),s(4),s(27),s(33),s(107),s(315),s(2121),s(2122),s(2123),s(2124);var l=function(){return function AddonMessagesComponentsModule(){}}()},2121:function(n,e,s){"use strict";s.d(e,"a",function(){return t});s(0),s(6),s(4),s(10),s(2);var l=s(162),t=(s(5),s(3),s(11),s(145),function(){function AddonMessagesDiscussionsComponent(n,e,s,t,o,a,i,u,r,c){var d=this;this.eventsProvider=n,this.messagesProvider=t,this.domUtils=o,this.appProvider=i,this.utils=r,this.loaded=!1,this.search={enabled:!1,showResults:!1,results:[],loading:"",text:""},this.search.loading=s.instant("core.searching"),this.loadingMessages=s.instant("core.loading"),this.siteId=e.getCurrentSiteId(),this.newMessagesObserver=n.on(l.a.NEW_MESSAGE_EVENT,function(n){if(n.userId&&d.discussions){var e=d.discussions.find(function(e){return e.message.user==n.userId});void 0===e?(d.loaded=!1,d.refreshData().finally(function(){d.loaded=!0})):(e.message.message=n.message,e.message.timecreated=n.timecreated)}},this.siteId),this.readChangedObserver=n.on(l.a.READ_CHANGED_EVENT,function(n){if(n.userId&&d.discussions){var e=d.discussions.find(function(e){return e.message.user==n.userId});void 0!==e&&(e.unread=!1,d.messagesProvider.invalidateConversations(d.siteId),d.messagesProvider.refreshUnreadConversationCounts(d.siteId))}},this.siteId),this.appResumeSubscription=u.resume.subscribe(function(){d.loaded&&(d.loaded=!1,d.refreshData())}),this.discussionUserId=a.get("discussionUserId")||!1,this.pushObserver=c.on("receive").subscribe(function(n){r.isFalseOrZero(n.notif)&&n.site==d.siteId&&d.refreshData(null,!1)})}return AddonMessagesDiscussionsComponent.prototype.ngOnInit=function(){var n=this;this.discussionUserId&&this.gotoDiscussion(this.discussionUserId),this.fetchData().then(function(){!n.discussionUserId&&n.discussions.length>0&&n.gotoDiscussion(n.discussions[0].message.user,void 0,!0)})},AddonMessagesDiscussionsComponent.prototype.refreshData=function(n,e){var s=this;void 0===e&&(e=!0);var l=[];return l.push(this.messagesProvider.invalidateDiscussionsCache(this.siteId)),e&&l.push(this.messagesProvider.invalidateUnreadConversationCounts(this.siteId)),this.utils.allPromises(l).finally(function(){return s.fetchData().finally(function(){n&&n.complete()})})},AddonMessagesDiscussionsComponent.prototype.fetchData=function(){var n=this;this.loadingMessage=this.loadingMessages,this.search.enabled=this.messagesProvider.isSearchMessagesEnabled();var e=[];return e.push(this.messagesProvider.getDiscussions(this.siteId).then(function(e){var s=[];for(var l in e)e[l].unread=!!e[l].unread,s.push(e[l]);n.discussions=s.sort(function(n,e){return e.message.timecreated-n.message.timecreated})})),e.push(this.messagesProvider.getUnreadConversationCounts(this.siteId)),Promise.all(e).catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.messages.errorwhileretrievingdiscussions",!0)}).finally(function(){n.loaded=!0})},AddonMessagesDiscussionsComponent.prototype.clearSearch=function(){var n=this;this.loaded=!1,this.search.showResults=!1,this.search.text="",this.fetchData().finally(function(){n.loaded=!0})},AddonMessagesDiscussionsComponent.prototype.searchMessage=function(n){var e=this;return this.appProvider.closeKeyboard(),this.loaded=!1,this.loadingMessage=this.search.loading,this.messagesProvider.searchMessages(n,void 0,void 0,void 0,this.siteId).then(function(n){e.search.showResults=!0,e.search.results=n.messages}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.messages.errorwhileretrievingmessages",!0)}).finally(function(){e.loaded=!0})},AddonMessagesDiscussionsComponent.prototype.gotoDiscussion=function(n,e,s){void 0===s&&(s=!1),this.discussionUserId=n;var t={discussion:n,onlyWithSplitView:s};e&&(t.message=e),this.eventsProvider.trigger(l.a.SPLIT_VIEW_LOAD_EVENT,t,this.siteId)},AddonMessagesDiscussionsComponent.prototype.ngOnDestroy=function(){this.newMessagesObserver&&this.newMessagesObserver.off(),this.readChangedObserver&&this.readChangedObserver.off(),this.cronObserver&&this.cronObserver.off(),this.appResumeSubscription&&this.appResumeSubscription.unsubscribe(),this.pushObserver&&this.pushObserver.unsubscribe()},AddonMessagesDiscussionsComponent}())},2122:function(n,e,s){"use strict";s.d(e,"a",function(){return o});s(0);var l=s(1),t=(s(6),s(10),s(2),s(162)),o=(s(5),function(){function AddonMessagesConfirmedContactsComponent(n,e,s,o){var a=this;this.domUtils=n,this.messagesProvider=o,this.onUserSelected=new l.r,this.loaded=!1,this.canLoadMore=!1,this.loadMoreError=!1,this.contacts=[],this.onUserSelected=new l.r,this.memberInfoObserver=e.on(t.a.MEMBER_INFO_CHANGED_EVENT,function(n){if(n.userBlocked||n.userUnblocked){var e=a.contacts.find(function(e){return e.id==n.userId});e&&(e.isblocked=n.userBlocked)}else if(n.contactRemoved){var s=a.contacts.findIndex(function(e){return e.id==n.userId});s>=0&&a.contacts.splice(s,1)}else n.contactRequestConfirmed&&a.refreshData()},s.getCurrentSiteId())}return AddonMessagesConfirmedContactsComponent.prototype.ngOnInit=function(){var n=this;this.fetchData().then(function(){n.contacts.length&&n.selectUser(n.contacts[0].id,!0)}).finally(function(){n.loaded=!0}),this.content.resize()},AddonMessagesConfirmedContactsComponent.prototype.fetchData=function(n){var e=this;void 0===n&&(n=!1),this.loadMoreError=!1;var s=n?0:this.contacts.length;return(0===s?this.messagesProvider.invalidateUserContacts().catch(function(){}):Promise.resolve()).then(function(){return e.messagesProvider.getUserContacts(s)}).then(function(s){e.contacts=n?s.contacts:e.contacts.concat(s.contacts),e.canLoadMore=s.canLoadMore}).catch(function(n){e.loadMoreError=!0,e.domUtils.showErrorModalDefault(n,"addon.messages.errorwhileretrievingcontacts",!0)})},AddonMessagesConfirmedContactsComponent.prototype.refreshData=function(n){return this.fetchData(!0).finally(function(){n&&n.complete()})},AddonMessagesConfirmedContactsComponent.prototype.loadMore=function(n){return this.fetchData().finally(function(){n&&n()})},AddonMessagesConfirmedContactsComponent.prototype.selectUser=function(n,e){void 0===e&&(e=!1),this.selectedUserId=n,this.onUserSelected.emit({userId:n,onInit:e})},AddonMessagesConfirmedContactsComponent.prototype.ngOnDestroy=function(){this.memberInfoObserver&&this.memberInfoObserver.off()},AddonMessagesConfirmedContactsComponent}())},2123:function(n,e,s){"use strict";s.d(e,"a",function(){return o});s(0);var l=s(1),t=(s(6),s(10),s(2),s(162)),o=(s(5),function(){function AddonMessagesContactRequestsComponent(n,e,s,o){var a=this;this.domUtils=n,this.messagesProvider=o,this.onUserSelected=new l.r,this.loaded=!1,this.canLoadMore=!1,this.loadMoreError=!1,this.requests=[],this.memberInfoObserver=e.on(t.a.MEMBER_INFO_CHANGED_EVENT,function(n){if(n.contactRequestConfirmed||n.contactRequestDeclined){var e=a.requests.findIndex(function(e){return e.id==n.userId});e>=0&&a.requests.splice(e,1)}},s.getCurrentSiteId())}return AddonMessagesContactRequestsComponent.prototype.ngOnInit=function(){var n=this;this.fetchData().then(function(){n.requests.length&&n.selectUser(n.requests[0].id,!0)}).finally(function(){n.loaded=!0}),this.content.resize()},AddonMessagesContactRequestsComponent.prototype.fetchData=function(n){var e=this;void 0===n&&(n=!1),this.loadMoreError=!1;var s=n?0:this.requests.length;return(0===s?this.messagesProvider.invalidateContactRequestsCache().catch(function(){}):Promise.resolve()).then(function(){return e.messagesProvider.getContactRequests(s)}).then(function(s){e.requests=n?s.requests:e.requests.concat(s.requests),e.canLoadMore=s.canLoadMore}).catch(function(n){e.loadMoreError=!0,e.domUtils.showErrorModalDefault(n,"addon.messages.errorwhileretrievingcontacts",!0)})},AddonMessagesContactRequestsComponent.prototype.refreshData=function(n){return this.messagesProvider.refreshContactRequestsCount(),this.fetchData(!0).finally(function(){n&&n.complete()})},AddonMessagesContactRequestsComponent.prototype.loadMore=function(n){return this.fetchData().finally(function(){n&&n()})},AddonMessagesContactRequestsComponent.prototype.selectUser=function(n,e){void 0===e&&(e=!1),this.selectedUserId=n,this.onUserSelected.emit({userId:n,onInit:e})},AddonMessagesContactRequestsComponent.prototype.ngOnDestroy=function(){this.memberInfoObserver&&this.memberInfoObserver.off()},AddonMessagesContactRequestsComponent}())},2124:function(n,e,s){"use strict";s.d(e,"a",function(){return t});s(0),s(6),s(4),s(2);var l=s(162),t=(s(5),s(11),s(10),function(){function AddonMessagesContactsComponent(n,e,s,t,o,a,i){var u=this;this.appProvider=s,this.messagesProvider=t,this.domUtils=o,this.eventsProvider=i,this.noSearchTypes=["online","offline","blocked","strangers"],this.loaded=!1,this.contactTypes=this.noSearchTypes,this.searchType="search",this.loadingMessage="",this.hasContacts=!1,this.contacts={online:[],offline:[],strangers:[],search:[]},this.searchString="",this.currentUserId=n.getCurrentSiteUserId(),this.siteId=n.getCurrentSiteId(),this.searchingMessages=e.instant("core.searching"),this.loadingMessages=e.instant("core.loading"),this.loadingMessage=this.loadingMessages,this.discussionUserId=a.get("discussionUserId")||!1,this.memberInfoObserver=i.on(l.a.MEMBER_INFO_CHANGED_EVENT,function(n){n.contactRequestConfirmed&&u.refreshData()},n.getCurrentSiteId())}return AddonMessagesContactsComponent.prototype.ngOnInit=function(){var n=this;this.discussionUserId&&this.gotoDiscussion(this.discussionUserId),this.fetchData().then(function(){if(!n.discussionUserId&&n.hasContacts){var e=void 0;for(var s in n.contacts)if(n.contacts[s].length>0){e=n.contacts[s][0];break}e&&n.gotoDiscussion(e.id,!0)}}).finally(function(){n.loaded=!0})},AddonMessagesContactsComponent.prototype.refreshData=function(n){var e=this;return(this.searchString?this.performSearch(this.searchString):this.messagesProvider.invalidateAllContactsCache(this.currentUserId).then(function(){return e.fetchData()})).finally(function(){n.complete()})},AddonMessagesContactsComponent.prototype.fetchData=function(){var n=this;return this.loadingMessage=this.loadingMessages,this.messagesProvider.getAllContacts().then(function(e){for(var s in e)n.contacts[s]=e[s].length>0?n.sortUsers(e[s]):[];n.clearSearch()}).catch(function(e){n.domUtils.showErrorModalDefault(e,"addon.messages.errorwhileretrievingcontacts",!0)})},AddonMessagesContactsComponent.prototype.sortUsers=function(n){return n.sort(function(n,e){var s=n.fullname.toLowerCase(),l=e.fullname.toLowerCase();return s.localeCompare(l)})},AddonMessagesContactsComponent.prototype.clearSearch=function(){this.searchString="",this.contactTypes=this.noSearchTypes,this.hasContacts=!1;for(var n in this.contacts)if(this.contacts[n].length>0)return void(this.hasContacts=!0)},AddonMessagesContactsComponent.prototype.search=function(n){var e=this;return this.appProvider.closeKeyboard(),this.loaded=!1,this.loadingMessage=this.searchingMessages,this.performSearch(n).finally(function(){e.loaded=!0})},AddonMessagesContactsComponent.prototype.performSearch=function(n){var e=this;return this.messagesProvider.searchContacts(n).then(function(s){e.hasContacts=s.length>0,e.searchString=n,e.contactTypes=["search"],e.contacts.search=e.sortUsers(s)}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.messages.errorwhileretrievingcontacts",!0)})},AddonMessagesContactsComponent.prototype.gotoDiscussion=function(n,e){void 0===e&&(e=!1),this.discussionUserId=n;this.eventsProvider.trigger(l.a.SPLIT_VIEW_LOAD_EVENT,{discussion:n,onlyWithSplitView:e},this.siteId)},AddonMessagesContactsComponent.prototype.ngOnDestroy=function(){this.memberInfoObserver&&this.memberInfoObserver.off()},AddonMessagesContactsComponent}())}});