webpackJsonp([125],{2083:function(n,l,i){"use strict";function View_AddonModAssignSubmissionListPage_1(n){return s._42(0,[(n()(),s._16(0,0,null,null,3,"core-empty-box",[["icon","paper"]],null,null,null,k.b,k.a)),s._15(1,49152,null,0,C.a,[],{message:[0,"message"],icon:[1,"icon"]},null),s._32(131072,y.a,[D.a,s.i]),(n()(),s._40(-1,0,["\n            "]))],function(n,l){n(l,1,0,s._41(l,1,0,s._29(l,2).transform("addon.mod_assign.submissionstatus_")),"paper")},null)}function View_AddonModAssignSubmissionListPage_3(n){return s._42(0,[(n()(),s._16(0,0,null,null,3,"ion-label",[["id","addon-assign-groupslabel"]],null,null,null,null,null)),s._15(1,16384,[[3,4]],0,G.a,[$.a,s.p,s.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(n()(),s._40(2,null,["",""])),s._32(131072,y.a,[D.a,s.i])],function(n,l){n(l,1,0,"addon-assign-groupslabel")},function(n,l){n(l,2,0,s._41(l,2,0,s._29(l,3).transform("core.groupsseparate")))})}function View_AddonModAssignSubmissionListPage_4(n){return s._42(0,[(n()(),s._16(0,0,null,null,3,"ion-label",[["id","addon-assign-groupslabel"]],null,null,null,null,null)),s._15(1,16384,[[3,4]],0,G.a,[$.a,s.p,s.K,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(n()(),s._40(2,null,["",""])),s._32(131072,y.a,[D.a,s.i])],function(n,l){n(l,1,0,"addon-assign-groupslabel")},function(n,l){n(l,2,0,s._41(l,2,0,s._29(l,3).transform("core.groupsvisible")))})}function View_AddonModAssignSubmissionListPage_5(n){return s._42(0,[(n()(),s._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),s._15(1,16384,[[6,4]],0,W.a,[s.p],{value:[0,"value"]},null),(n()(),s._40(2,null,["",""]))],function(n,l){n(l,1,0,l.context.$implicit.id)},function(n,l){n(l,2,0,l.context.$implicit.name)})}function View_AddonModAssignSubmissionListPage_2(n){return s._42(0,[(n()(),s._16(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,O.b,O.a)),s._15(1,1097728,null,3,K.a,[U.a,$.a,s.p,s.K,[2,E.a]],null,null),s._37(603979776,3,{contentLabel:0}),s._37(603979776,4,{_buttons:1}),s._37(603979776,5,{_icons:1}),s._15(5,16384,null,0,R.a,[],null,null),(n()(),s._40(-1,2,["\n                    "])),(n()(),s._11(16777216,null,1,1,null,View_AddonModAssignSubmissionListPage_3)),s._15(8,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,2,["\n                    "])),(n()(),s._11(16777216,null,1,1,null,View_AddonModAssignSubmissionListPage_4)),s._15(11,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,2,["\n                    "])),(n()(),s._16(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-assign-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(n,l,i){var u=!0,t=n.component;if("click"===l){u=!1!==s._29(n,14)._click(i)&&u}if("keyup.space"===l){u=!1!==s._29(n,14)._keyup()&&u}if("ngModelChange"===l){u=!1!==(t.groupId=i)&&u}if("ionChange"===l){u=!1!==t.setGroup(t.groupId)&&u}return u},F.b,F.a)),s._15(14,1228800,null,1,B.a,[j.a,U.a,$.a,s.p,s.K,[2,K.a],H.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),s._37(603979776,6,{options:1}),s._35(1024,null,q.l,function(n){return[n]},[B.a]),s._15(17,671744,null,0,q.q,[[8,null],[8,null],[8,null],[2,q.l]],{model:[0,"model"]},{update:"ngModelChange"}),s._35(2048,null,q.m,null,[q.q]),s._15(19,16384,null,0,q.n,[q.m],null,null),(n()(),s._40(-1,null,["\n                        "])),(n()(),s._11(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_5)),s._15(22,802816,null,0,N.j,[s.W,s.T,s.v],{ngForOf:[0,"ngForOf"]},null),(n()(),s._40(-1,null,["\n                    "])),(n()(),s._40(-1,2,["\n                "]))],function(n,l){var i=l.component;n(l,8,0,i.groupInfo.separateGroups);n(l,11,0,i.groupInfo.visibleGroups);n(l,14,0,"action-sheet");n(l,17,0,i.groupId);n(l,22,0,i.groupInfo.groups)},function(n,l){n(l,13,0,s._29(l,14)._disabled,s._29(l,19).ngClassUntouched,s._29(l,19).ngClassTouched,s._29(l,19).ngClassPristine,s._29(l,19).ngClassDirty,s._29(l,19).ngClassValid,s._29(l,19).ngClassInvalid,s._29(l,19).ngClassPending)})}function View_AddonModAssignSubmissionListPage_7(n){return s._42(0,[(n()(),s._16(0,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),s._40(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.userfullname)})}function View_AddonModAssignSubmissionListPage_8(n){return s._42(0,[(n()(),s._16(0,0,null,null,2,"h2",[],null,null,null,null,null)),(n()(),s._40(1,null,["","",""])),s._32(131072,y.a,[D.a,s.i])],null,function(n,l){n(l,1,0,s._41(l,1,0,s._29(l,2).transform("addon.mod_assign.hiddenuser")),l.parent.context.$implicit.blindid)})}function View_AddonModAssignSubmissionListPage_10(n){return s._42(0,[(n()(),s._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),s._40(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.parent.context.$implicit.groupname)})}function View_AddonModAssignSubmissionListPage_11(n){return s._42(0,[(n()(),s._16(0,0,null,null,2,"span",[["class","text-danger"]],null,null,null,null,null)),(n()(),s._40(1,null,["",""])),s._32(131072,y.a,[D.a,s.i])],null,function(n,l){n(l,1,0,s._41(l,1,0,s._29(l,2).transform("addon.mod_assign.noteam")))})}function View_AddonModAssignSubmissionListPage_12(n){return s._42(0,[(n()(),s._16(0,0,null,null,2,"span",[["class","text-danger"]],null,null,null,null,null)),(n()(),s._40(1,null,["",""])),s._32(131072,y.a,[D.a,s.i])],null,function(n,l){n(l,1,0,s._41(l,1,0,s._29(l,2).transform("addon.mod_assign.multipleteams")))})}function View_AddonModAssignSubmissionListPage_13(n){return s._42(0,[(n()(),s._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),s._40(1,null,["",""])),s._32(131072,y.a,[D.a,s.i])],null,function(n,l){n(l,1,0,s._41(l,1,0,s._29(l,2).transform("addon.mod_assign.defaultteam")))})}function View_AddonModAssignSubmissionListPage_9(n){return s._42(0,[(n()(),s._16(0,0,null,null,13,"p",[],null,null,null,null,null)),(n()(),s._40(-1,null,["\n                            "])),(n()(),s._11(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_10)),s._15(3,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,null,["\n                            "])),(n()(),s._11(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_11)),s._15(6,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,null,["\n                            "])),(n()(),s._11(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_12)),s._15(9,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,null,["\n                            "])),(n()(),s._11(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_13)),s._15(12,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,null,["\n                        "]))],function(n,l){var i=l.component;n(l,3,0,l.parent.context.$implicit.groupname);n(l,6,0,i.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.noGroups&&!l.parent.context.$implicit.blindid);n(l,9,0,i.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,12,0,!i.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname)},null)}function View_AddonModAssignSubmissionListPage_14(n){return s._42(0,[(n()(),s._16(0,0,null,null,2,"ion-badge",[["text-center",""],["text-wrap",""]],null,null,null,null,null)),s._15(1,16384,null,0,J.a,[$.a,s.p,s.K],{color:[0,"color"]},null),(n()(),s._40(2,null,["\n                            ","\n                        "]))],function(n,l){n(l,1,0,l.parent.context.$implicit.statusColor)},function(n,l){n(l,2,0,l.parent.context.$implicit.statusTranslated)})}function View_AddonModAssignSubmissionListPage_15(n){return s._42(0,[(n()(),s._16(0,0,null,null,3,"ion-badge",[["text-center",""],["text-wrap",""]],null,null,null,null,null)),s._15(1,16384,null,0,J.a,[$.a,s.p,s.K],{color:[0,"color"]},null),(n()(),s._40(2,null,["\n                            ","\n                        "])),s._32(131072,y.a,[D.a,s.i])],function(n,l){n(l,1,0,l.parent.context.$implicit.gradingColor)},function(n,l){n(l,2,0,s._41(l,2,0,s._29(l,3).transform(l.parent.context.$implicit.gradingStatusTranslationId)))})}function View_AddonModAssignSubmissionListPage_6(n){return s._42(0,[(n()(),s._16(0,0,null,null,28,null,null,null,null,null,null,null)),(n()(),s._40(-1,null,["\n                    "])),(n()(),s._16(2,0,null,null,25,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(n,l,i){var s=!0;if("click"===l){s=!1!==n.component.loadSubmission(n.context.$implicit)&&s}return s},O.b,O.a)),s._15(3,1097728,null,3,K.a,[U.a,$.a,s.p,s.K,[2,E.a]],null,null),s._37(335544320,7,{contentLabel:0}),s._37(603979776,8,{_buttons:1}),s._37(603979776,9,{_icons:1}),s._15(7,16384,null,0,R.a,[],null,null),(n()(),s._40(-1,2,["\n                        "])),(n()(),s._16(9,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,z.b,z.a)),s._15(10,770048,null,0,Q.a,[X.a,o.a,Y.a,Z.a,e.a,[2,m.a]],{user:[0,"user"],linkProfile:[1,"linkProfile"]},null),s._15(11,16384,null,0,nn.a,[],null,null),(n()(),s._40(-1,2,["\n                        "])),(n()(),s._11(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_7)),s._15(14,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,2,["\n                        "])),(n()(),s._11(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_8)),s._15(17,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,2,["\n                        "])),(n()(),s._11(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_9)),s._15(20,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,2,["\n                        "])),(n()(),s._11(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_14)),s._15(23,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,2,["\n                        "])),(n()(),s._11(16777216,null,2,1,null,View_AddonModAssignSubmissionListPage_15)),s._15(26,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,2,["\n                    "])),(n()(),s._40(-1,null,["\n                "]))],function(n,l){var i=l.component;n(l,10,0,l.context.$implicit,!1);n(l,14,0,l.context.$implicit.userfullname);n(l,17,0,!l.context.$implicit.userfullname);n(l,20,0,i.assign.teamsubmission);n(l,23,0,l.context.$implicit.statusTranslated);n(l,26,0,l.context.$implicit.gradingStatusTranslationId)},function(n,l){n(l,2,0,l.context.$implicit.submitid==l.component.selectedSubmissionId)})}function View_AddonModAssignSubmissionListPage_16(n){return s._42(0,[(n()(),s._16(0,0,null,null,10,"ion-item",[["class","core-warning-card item item-block"],["icon-start",""],["text-wrap",""]],null,null,null,O.b,O.a)),s._15(1,1097728,null,3,K.a,[U.a,$.a,s.p,s.K,[2,E.a]],null,null),s._37(335544320,10,{contentLabel:0}),s._37(603979776,11,{_buttons:1}),s._37(603979776,12,{_icons:1}),s._15(5,16384,null,0,R.a,[],null,null),(n()(),s._40(-1,2,["\n                    "])),(n()(),s._16(7,0,null,2,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s._15(8,147456,[[12,4]],0,ln.a,[$.a,s.p,s.K],{name:[0,"name"]},null),(n()(),s._40(9,2,["\n                    ","\n                "])),s._32(131072,y.a,[D.a,s.i])],function(n,l){n(l,8,0,"warning")},function(n,l){n(l,7,0,s._29(l,8)._hidden);n(l,9,0,s._41(l,9,0,s._29(l,10).transform("addon.mod_assign.notallparticipantsareshown")))})}function View_AddonModAssignSubmissionListPage_0(n){return s._42(0,[s._37(402653184,1,{splitviewCtrl:0}),(n()(),s._16(1,0,null,null,16,"ion-header",[],null,null,null,null,null)),s._15(2,16384,null,0,sn.a,[$.a,s.p,s.K,[2,un.a]],null,null),(n()(),s._40(-1,null,["\n    "])),(n()(),s._16(4,0,null,null,12,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,tn.b,tn.a)),s._15(5,49152,null,0,an.a,[j.a,[2,un.a],[2,X.a],$.a,s.p,s.K],null,null),s._15(6,212992,null,0,en.a,[an.a,on.a,D.a,e.a],null,null),(n()(),s._40(-1,3,["\n        "])),(n()(),s._16(8,0,null,3,3,"ion-title",[],null,null,null,rn.b,rn.a)),s._15(9,49152,null,0,dn.a,[$.a,s.p,s.K,[2,_n.a],[2,an.a]],null,null),(n()(),s._16(10,16777216,null,0,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),s._15(11,540672,null,0,gn.a,[s.p,o.a,r.a,cn.a,D.a,on.a,Y.a,mn.a,pn.a,fn.a,Z.a,bn.a,[2,X.a],[2,hn.a],[2,m.a],An.a,e.a,vn.a,In.a,Pn.a,s.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(n()(),s._40(-1,3,["\n\n        "])),(n()(),s._16(13,0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),s._15(14,16384,null,1,Sn.a,[$.a,s.p,s.K,[2,_n.a],[2,an.a]],null,null),s._37(603979776,2,{_buttons:1}),(n()(),s._40(-1,3,["\n    "])),(n()(),s._40(-1,null,["\n"])),(n()(),s._40(-1,null,["\n"])),(n()(),s._16(19,0,null,null,35,"core-split-view",[],null,null,null,wn.b,wn.a)),s._15(20,245760,[[1,4]],0,m.a,[[2,X.a],s.p,Mn.a,on.a,D.a],null,null),(n()(),s._40(-1,0,["\n    "])),(n()(),s._16(22,0,null,0,31,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Ln.b,Ln.a)),s._15(23,4374528,null,0,hn.a,[$.a,on.a,xn.a,s.p,s.K,j.a,Vn.a,s.D,[2,un.a],[2,X.a]],null,null),(n()(),s._40(-1,1,["\n        "])),(n()(),s._16(25,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,i){var s=!0;if("ionRefresh"===l){s=!1!==n.component.refreshList(i)&&s}return s},null,null)),s._15(26,212992,null,0,Tn.a,[on.a,hn.a,s.D,kn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),s._40(-1,null,["\n            "])),(n()(),s._16(28,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Cn.b,Cn.a)),s._15(29,114688,null,0,yn.a,[Tn.a,$.a],{pullingText:[0,"pullingText"]},null),s._32(131072,y.a,[D.a,s.i]),(n()(),s._40(-1,null,["\n        "])),(n()(),s._40(-1,1,["\n        "])),(n()(),s._16(33,0,null,1,19,"core-loading",[],null,null,null,Dn.b,Dn.a)),s._15(34,638976,null,0,Gn.a,[D.a,s.p,e.a,Y.a],{hideUntil:[0,"hideUntil"]},null),(n()(),s._40(-1,0,["\n            "])),(n()(),s._11(16777216,null,0,1,null,View_AddonModAssignSubmissionListPage_1)),s._15(37,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,0,["\n\n            "])),(n()(),s._16(39,0,null,0,12,"ion-list",[],null,null,null,null,null)),s._15(40,16384,null,0,$n.a,[$.a,s.p,s.K,on.a,kn.l,xn.a],null,null),(n()(),s._40(-1,null,["\n                "])),(n()(),s._11(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_2)),s._15(43,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,null,["\n                "])),(n()(),s._40(-1,null,["\n                "])),(n()(),s._11(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_6)),s._15(47,802816,null,0,N.j,[s.W,s.T,s.v],{ngForOf:[0,"ngForOf"]},null),(n()(),s._40(-1,null,["\n\n                "])),(n()(),s._11(16777216,null,null,1,null,View_AddonModAssignSubmissionListPage_16)),s._15(50,16384,null,0,N.k,[s.W,s.T],{ngIf:[0,"ngIf"]},null),(n()(),s._40(-1,null,["\n            "])),(n()(),s._40(-1,0,["\n        "])),(n()(),s._40(-1,1,["\n    "])),(n()(),s._40(-1,0,["\n"])),(n()(),s._40(-1,null,["\n"]))],function(n,l){var i=l.component;n(l,6,0);n(l,11,0,i.title,"module",i.moduleId,i.courseId),n(l,20,0);n(l,26,0,i.loaded);n(l,29,0,s._19(1,"",s._41(l,29,0,s._29(l,30).transform("core.pulltorefresh")),""));n(l,34,0,i.loaded);n(l,37,0,!i.submissions||0==i.submissions.length);n(l,43,0,i.groupInfo.separateGroups||i.groupInfo.visibleGroups);n(l,47,0,i.submissions);n(l,50,0,!i.haveAllParticipants)},function(n,l){n(l,4,0,s._29(l,5)._hidden,s._29(l,5)._sbPadding);n(l,22,0,s._29(l,23).statusbarPadding,s._29(l,23)._hasRefresher);n(l,25,0,"inactive"!==s._29(l,26).state,s._29(l,26)._top);n(l,28,0,s._29(l,29).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var s=i(1),u=(i(0),i(6),i(4)),t=i(27),a=i(33),e=i(10),o=i(2),r=i(5),d=i(72),_=i(78),g=i(134),c=i(184),m=i(29),p=function(){function AddonModAssignSubmissionListPage(n,l,i,s,u,t,a,e,o){var r=this;this.sitesProvider=l,this.domUtils=s,this.translate=u,this.assignProvider=t,this.assignOfflineProvider=a,this.assignHelper=e,this.groupsProvider=o,this.groupId=0,this.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},this.moduleId=n.get("moduleId"),this.courseId=n.get("courseId"),this.groupId=n.get("groupId"),this.selectedStatus=n.get("status"),this.title=this.translate.instant(this.selectedStatus?this.selectedStatus==_.a.NEED_GRADING?"addon.mod_assign.numberofsubmissionsneedgrading":"addon.mod_assign.submissionstatus_"+this.selectedStatus:"addon.mod_assign.numberofparticipants"),this.gradedObserver=i.on(_.a.GRADED_EVENT,function(n){r.assign&&n.assignmentId==r.assign.id&&n.userId==l.getCurrentSiteUserId()&&(r.loaded=!1,r.refreshAllData().finally(function(){r.loaded=!0}))},l.getCurrentSiteId())}return AddonModAssignSubmissionListPage.prototype.ngOnInit=function(){var n=this;this.fetchAssignment().finally(function(){!n.selectedSubmissionId&&n.splitviewCtrl.isOn()&&n.submissions.length>0&&n.loadSubmission(n.submissions[0]),n.loaded=!0})},AddonModAssignSubmissionListPage.prototype.fetchAssignment=function(){var n=this;return this.assignProvider.getAssignment(this.courseId,this.moduleId).then(function(l){return n.title=l.name||n.title,n.assign=l,n.assignProvider.getSubmissions(l.id)}).then(function(l){return l.canviewsubmissions?(n.submissionsData=l,n.groupsProvider.getActivityGroupInfo(n.assign.cmid,!1).then(function(l){return n.groupInfo=l,n.setGroup(n.groupsProvider.validateGroupId(n.groupId,l))})):Promise.reject(null)}).catch(function(l){n.domUtils.showErrorModalDefault(l,"Error getting assigment data.")})},AddonModAssignSubmissionListPage.prototype.setGroup=function(n){var l=this;if(this.groupId=n,this.haveAllParticipants=!0,!this.sitesProvider.getCurrentSite().wsAvailable("mod_assign_list_participants"))return this.haveAllParticipants=!1,this.submissions=[],Promise.resolve();var i=[this.assignHelper.getSubmissionsUserData(this.assign,this.submissionsData.submissions,this.groupId),this.assign.markingworkflow?Promise.resolve(null):this.assignProvider.getAssignmentGrades(this.assign.id)];return Promise.all(i).then(function(n){var i=n[1],s=l.selectedStatus==_.a.NEED_GRADING,u=s?_.a.SUBMISSION_STATUS_SUBMITTED:l.selectedStatus,t=[],a=[];return n[0].forEach(function(n){u&&u!=n.status||t.push(l.assignOfflineProvider.getSubmissionGrade(l.assign.id,n.userid).catch(function(){}).then(function(u){var t=!1;return u&&n.timemodified<u.timemodified&&(t=!0),(s?l.assignProvider.needsSubmissionToBeGraded(n,l.assign.id):Promise.resolve(!0)).then(function(s){if(s){if("graded"==n.gradingstatus&&!l.assign.markingworkflow){var u=i.filter(function(l){return l.userid==n.userid}).reduce(function(n,l){return n.timemodified>l.timemodified?n:l});u&&u.timemodified<n.timemodified&&(n.gradingstatus=_.a.GRADED_FOLLOWUP_SUBMIT)}n.statusColor=l.assignProvider.getSubmissionStatusColor(n.status),n.gradingColor=l.assignProvider.getSubmissionGradingStatusColor(n.gradingstatus),n.statusTranslated="success"==n.statusColor&&n.gradingstatus?"":l.translate.instant("addon.mod_assign.submissionstatus_"+n.status),t?(n.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",n.gradingColor=""):n.gradingStatusTranslationId="danger"!=n.statusColor||"danger"!=n.gradingColor?l.assignProvider.getSubmissionGradingStatusTranslationId(n.gradingstatus):"",a.push(n)}})}))}),Promise.all(t).then(function(){l.submissions=a})})},AddonModAssignSubmissionListPage.prototype.loadSubmission=function(n){this.selectedSubmissionId===n.submitid&&this.splitviewCtrl.isOn()||(this.selectedSubmissionId=n.submitid,this.splitviewCtrl.push("AddonModAssignSubmissionReviewPage",{courseId:this.courseId,moduleId:this.moduleId,submitId:n.submitid,blindId:n.blindid}))},AddonModAssignSubmissionListPage.prototype.refreshAllData=function(){var n=this,l=[];return l.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(l.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentGradesData(this.assign.id)),l.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),Promise.all(l).finally(function(){return n.fetchAssignment()})},AddonModAssignSubmissionListPage.prototype.refreshList=function(n){this.refreshAllData().finally(function(){n.complete()})},AddonModAssignSubmissionListPage.prototype.ngOnDestroy=function(){this.gradedObserver&&this.gradedObserver.off()},AddonModAssignSubmissionListPage}(),f=function(){return function AddonModAssignSubmissionListPageModule(){}}(),b=i(1522),h=i(1523),A=i(1524),v=i(1525),I=i(1526),P=i(1527),S=i(1528),w=i(1529),M=i(1530),L=i(1531),x=i(1532),V=i(1533),T=i(1534),k=i(125),C=i(115),y=i(26),D=i(19),G=i(68),$=i(9),W=i(109),O=i(32),K=i(22),U=i(20),E=i(28),R=i(34),N=i(8),F=i(124),B=i(110),j=i(36),H=i(60),q=i(24),J=i(144),z=i(214),Q=i(183),X=i(21),Y=i(3),Z=i(11),nn=i(161),ln=i(49),sn=i(371),un=i(40),tn=i(723),an=i(212),en=i(473),on=i(17),rn=i(724),dn=i(314),_n=i(247),gn=i(48),cn=i(12),mn=i(23),pn=i(7),fn=i(18),bn=i(16),hn=i(30),An=i(43),vn=i(41),In=i(31),Pn=i(37),Sn=i(372),wn=i(474),Mn=i(73),Ln=i(182),xn=i(35),Vn=i(108),Tn=i(160),kn=i(45),Cn=i(213),yn=i(174),Dn=i(55),Gn=i(52),$n=i(87),Wn=i(70),On=s._14({encapsulation:2,styles:[],data:{}}),Kn=s._12("page-addon-mod-assign-submission-list",p,function View_AddonModAssignSubmissionListPage_Host_0(n){return s._42(0,[(n()(),s._16(0,0,null,null,1,"page-addon-mod-assign-submission-list",[],null,null,null,View_AddonModAssignSubmissionListPage_0,On)),s._15(1,245760,null,0,p,[Wn.a,o.a,e.a,r.a,D.a,_.a,g.a,c.a,d.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Un=i(367),En=i(368),Rn=i(370),Nn=i(369),Fn=i(472),Bn=i(722),jn=i(107),Hn=i(270);i.d(l,"AddonModAssignSubmissionListPageModuleNgFactory",function(){return qn});var qn=s._13(f,[],function(n){return s._25([s._26(512,s.n,s._6,[[8,[b.a,h.a,A.a,v.a,I.a,P.a,S.a,w.a,M.a,L.a,x.a,V.a,T.a,Kn]],[3,s.n],s.B]),s._26(4608,N.m,N.l,[s.x,[2,N.w]]),s._26(4608,q.x,q.x,[]),s._26(4608,q.d,q.d,[]),s._26(4608,Un.b,Un.a,[]),s._26(4608,En.a,En.b,[]),s._26(4608,Rn.b,Rn.a,[]),s._26(4608,Nn.b,Nn.a,[]),s._26(4608,D.a,D.a,[Fn.a,Un.b,En.a,Rn.b,Nn.b,D.b,D.c]),s._26(512,N.b,N.b,[]),s._26(512,q.v,q.v,[]),s._26(512,q.i,q.i,[]),s._26(512,q.s,q.s,[]),s._26(512,Bn.a,Bn.a,[]),s._26(512,u.a,u.a,[]),s._26(512,a.a,a.a,[]),s._26(512,jn.a,jn.a,[]),s._26(512,t.a,t.a,[]),s._26(512,Bn.b,Bn.b,[]),s._26(512,f,f,[]),s._26(256,D.c,void 0,[]),s._26(256,D.b,void 0,[]),s._26(256,Hn.a,p,[])])})}});