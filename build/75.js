webpackJsonp([75],{2033:function(l,n,a){"use strict";function View_AddonStorageManagerCourseStoragePage_5(l){return e._42(0,[(l()(),e._16(0,0,null,null,0,"img",[["alt",""],["class","core-module-icon"],["role","presentation"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,0,0,n.parent.parent.context.$implicit.handlerData.icon)})}function View_AddonStorageManagerCourseStoragePage_4(l){return e._42(0,[(l()(),e._16(0,0,null,null,28,"ion-item",[["class","item item-block"],["no-padding",""]],null,null,null,K.b,K.a)),e._15(1,1097728,null,3,k.a,[D.a,y.a,e.p,e.K,[2,V.a]],null,null),e._37(335544320,8,{contentLabel:0}),e._37(603979776,9,{_buttons:1}),e._37(603979776,10,{_icons:1}),e._15(5,16384,null,0,$.a,[],null,null),(l()(),e._40(-1,2,["\n                            "])),(l()(),e._16(7,0,null,2,4,"h2",[],[[8,"className",0]],null,null,null,null)),(l()(),e._40(-1,null,["\n                                "])),(l()(),e._11(16777216,null,null,1,null,View_AddonStorageManagerCourseStoragePage_5)),e._15(10,16384,null,0,F.k,[e.W,e.T],{ngIf:[0,"ngIf"]},null),(l()(),e._40(11,null,["\n                                ","\n                            "])),(l()(),e._40(-1,2,["\n                            "])),(l()(),e._16(13,0,null,2,5,"p",[],null,null,null,null,null)),(l()(),e._40(-1,null,["\n                            "])),(l()(),e._16(15,0,null,null,1,"ion-icon",[["item-start",""],["name","cube"],["role","img"]],[[2,"hide",null]],null,null,null,null)),e._15(16,147456,[[10,4]],0,L.a,[y.a,e.p,e.K],{name:[0,"name"]},null),(l()(),e._40(17,null,["\n                                ","\n                            "])),e._34(18,1),(l()(),e._40(-1,2,["\n                            "])),(l()(),e._16(20,0,null,4,7,"button",[["icon-only",""],["ion-button",""],["item-end",""],["outline",""]],null,[[null,"click"]],function(l,n,a){var e=!0;if("click"===n){e=!1!==l.component.deleteForModule(l.parent.context.$implicit)&&e}return e},N.b,N.a)),e._15(21,1097728,[[9,4]],0,E.a,[[8,""],y.a,e.p,e.K],{outline:[0,"outline"]},null),(l()(),e._40(-1,0,["\n                                "])),(l()(),e._16(23,0,null,0,3,"core-icon",[["name","trash"]],null,null,null,O.b,O.a)),e._15(24,704512,null,0,I.a,[e.p,y.a],{name:[0,"name"],ariaLabel:[1,"ariaLabel"]},null),e._33(25,{name:0}),e._32(131072,T.a,[W.a,e.i]),(l()(),e._40(-1,0,["\n                            "])),(l()(),e._40(-1,2,["\n                        "]))],function(l,n){l(n,10,0,n.parent.context.$implicit.handlerData.icon);l(n,16,0,"cube");l(n,21,0,"");l(n,24,0,"trash",e._19(1,"",e._41(n,24,1,e._29(n,26).transform("addon.storagemanager.deletedatafrom",l(n,25,0,n.parent.context.$implicit.name))),""))},function(l,n){l(n,7,0,e._19(1,"",n.parent.context.$implicit.handlerData.class," addon-storagemanager-module-size"));l(n,11,0,n.parent.context.$implicit.name);l(n,15,0,e._29(n,16)._hidden);l(n,17,0,e._41(n,17,0,l(n,18,0,e._29(n.parent.parent.parent.parent,0),n.parent.context.$implicit.totalSize)))})}function View_AddonStorageManagerCourseStoragePage_3(l){return e._42(0,[(l()(),e._16(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e._40(-1,null,["\n                        "])),(l()(),e._11(16777216,null,null,1,null,View_AddonStorageManagerCourseStoragePage_4)),e._15(3,16384,null,0,F.k,[e.W,e.T],{ngIf:[0,"ngIf"]},null),(l()(),e._40(-1,null,["\n                    "]))],function(l,n){l(n,3,0,n.context.$implicit.totalSize>0)},null)}function View_AddonStorageManagerCourseStoragePage_2(l){return e._42(0,[(l()(),e._16(0,0,null,null,40,"ion-card",[["class","section"]],null,null,null,null,null)),e._15(1,16384,null,0,U.a,[y.a,e.p,e.K],null,null),(l()(),e._40(-1,null,["\n                "])),(l()(),e._16(3,0,null,null,29,"ion-card-header",[],null,null,null,null,null)),e._15(4,16384,null,0,H.a,[y.a,e.p,e.K],null,null),(l()(),e._40(-1,null,["\n                    "])),(l()(),e._16(6,0,null,null,25,"ion-item",[["class","item item-block"],["no-padding",""]],null,null,null,K.b,K.a)),e._15(7,1097728,null,3,k.a,[D.a,y.a,e.p,e.K,[2,V.a]],null,null),e._37(335544320,5,{contentLabel:0}),e._37(603979776,6,{_buttons:1}),e._37(603979776,7,{_icons:1}),e._15(11,16384,null,0,$.a,[],null,null),(l()(),e._40(-1,2,["\n                        "])),(l()(),e._16(13,0,null,2,1,"h2",[["text-wrap",""]],null,null,null,null,null)),(l()(),e._40(14,null,["",""])),(l()(),e._40(-1,2,["\n                        "])),(l()(),e._16(16,0,null,2,5,"p",[],null,null,null,null,null)),(l()(),e._40(-1,null,["\n                            "])),(l()(),e._16(18,0,null,null,1,"ion-icon",[["item-start",""],["name","cube"],["role","img"]],[[2,"hide",null]],null,null,null,null)),e._15(19,147456,[[7,4]],0,L.a,[y.a,e.p,e.K],{name:[0,"name"]},null),(l()(),e._40(20,null,["\n                            ","\n                        "])),e._34(21,1),(l()(),e._40(-1,2,["\n                        "])),(l()(),e._16(23,0,null,4,7,"button",[["icon-only",""],["ion-button",""],["item-end",""],["no-padding",""]],null,[[null,"click"]],function(l,n,a){var e=!0;if("click"===n){e=!1!==l.component.deleteForSection(l.parent.context.$implicit)&&e}return e},N.b,N.a)),e._15(24,1097728,[[6,4]],0,E.a,[[8,""],y.a,e.p,e.K],null,null),(l()(),e._40(-1,0,["\n                            "])),(l()(),e._16(26,0,null,0,3,"core-icon",[["name","trash"]],null,null,null,O.b,O.a)),e._15(27,704512,null,0,I.a,[e.p,y.a],{name:[0,"name"],ariaLabel:[1,"ariaLabel"]},null),e._33(28,{name:0}),e._32(131072,T.a,[W.a,e.i]),(l()(),e._40(-1,0,["\n                        "])),(l()(),e._40(-1,2,["\n                    "])),(l()(),e._40(-1,null,["\n                "])),(l()(),e._40(-1,null,["\n                "])),(l()(),e._16(34,0,null,null,5,"ion-card-content",[],null,null,null,null,null)),e._15(35,16384,null,0,j.a,[y.a,e.p,e.K],null,null),(l()(),e._40(-1,null,["\n                    "])),(l()(),e._11(16777216,null,null,1,null,View_AddonStorageManagerCourseStoragePage_3)),e._15(38,802816,null,0,F.j,[e.W,e.T,e.v],{ngForOf:[0,"ngForOf"]},null),(l()(),e._40(-1,null,["\n                "])),(l()(),e._40(-1,null,["\n            "]))],function(l,n){l(n,19,0,"cube");l(n,27,0,"trash",e._19(1,"",e._41(n,27,1,e._29(n,29).transform("addon.storagemanager.deletedatafrom",l(n,28,0,n.parent.context.$implicit.name))),""));l(n,38,0,n.parent.context.$implicit.modules)},function(l,n){l(n,14,0,n.parent.context.$implicit.name);l(n,18,0,e._29(n,19)._hidden);l(n,20,0,e._41(n,20,0,l(n,21,0,e._29(n.parent.parent,0),n.parent.context.$implicit.totalSize)))})}function View_AddonStorageManagerCourseStoragePage_1(l){return e._42(0,[(l()(),e._16(0,0,null,null,4,null,null,null,null,null,null,null)),(l()(),e._40(-1,null,["\n            "])),(l()(),e._11(16777216,null,null,1,null,View_AddonStorageManagerCourseStoragePage_2)),e._15(3,16384,null,0,F.k,[e.W,e.T],{ngIf:[0,"ngIf"]},null),(l()(),e._40(-1,null,["\n        "]))],function(l,n){l(n,3,0,n.context.$implicit.totalSize>0)},null)}function View_AddonStorageManagerCourseStoragePage_0(l){return e._42(0,[e._32(0,B.a,[J.a,R.a]),e._37(402653184,1,{content:0}),(l()(),e._16(2,0,null,null,12,"ion-header",[],null,null,null,null,null)),e._15(3,16384,null,0,q.a,[y.a,e.p,e.K,[2,G.a]],null,null),(l()(),e._40(-1,null,["\n    "])),(l()(),e._16(5,0,null,null,8,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,Q.b,Q.a)),e._15(6,49152,null,0,X.a,[Y.a,[2,G.a],[2,Z.a],y.a,e.p,e.K],null,null),e._15(7,212992,null,0,ll.a,[X.a,nl.a,W.a,al.a],null,null),(l()(),e._40(-1,3,["\n        "])),(l()(),e._16(9,0,null,3,3,"ion-title",[],null,null,null,el.b,el.a)),e._15(10,49152,null,0,ul.a,[y.a,e.p,e.K,[2,tl.a],[2,X.a]],null,null),(l()(),e._40(11,0,["",""])),e._32(131072,T.a,[W.a,e.i]),(l()(),e._40(-1,3,["\n    "])),(l()(),e._40(-1,null,["\n"])),(l()(),e._40(-1,null,["\n"])),(l()(),e._16(16,0,null,null,54,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ol.b,ol.a)),e._15(17,4374528,[[1,4]],0,rl.a,[y.a,nl.a,il.a,e.p,e.K,Y.a,_l.a,e.D,[2,G.a],[2,Z.a]],null,null),(l()(),e._40(-1,1,["\n    "])),(l()(),e._16(19,0,null,1,50,"core-loading",[],null,null,null,dl.b,dl.a)),e._15(20,638976,null,0,sl.a,[W.a,e.p,al.a,cl.a],{hideUntil:[0,"hideUntil"]},null),(l()(),e._40(-1,0,["\n        "])),(l()(),e._16(22,0,null,0,43,"ion-card",[["class","wholecourse"]],null,null,null,null,null)),e._15(23,16384,null,0,U.a,[y.a,e.p,e.K],null,null),(l()(),e._40(-1,null,["\n            "])),(l()(),e._16(25,0,null,null,39,"ion-card-header",[],null,null,null,null,null)),e._15(26,16384,null,0,H.a,[y.a,e.p,e.K],null,null),(l()(),e._40(-1,null,["\n                "])),(l()(),e._16(28,0,null,null,1,"h1",[["text-wrap",""]],null,null,null,null,null)),(l()(),e._40(29,null,["",""])),(l()(),e._40(-1,null,["\n                "])),(l()(),e._16(31,0,null,null,2,"p",[["text-wrap",""]],null,null,null,null,null)),(l()(),e._40(32,null,["",""])),e._32(131072,T.a,[W.a,e.i]),(l()(),e._40(-1,null,["\n                "])),(l()(),e._16(35,0,null,null,28,"ion-item",[["class","size item item-block"],["no-padding",""],["padding-top",""],["text-wrap",""]],null,null,null,K.b,K.a)),e._15(36,1097728,null,3,k.a,[D.a,y.a,e.p,e.K,[2,V.a]],null,null),e._37(335544320,2,{contentLabel:0}),e._37(603979776,3,{_buttons:1}),e._37(603979776,4,{_icons:1}),e._15(40,16384,null,0,$.a,[],null,null),(l()(),e._40(-1,2,["\n                    "])),(l()(),e._16(42,0,null,0,1,"ion-icon",[["item-start",""],["name","cube"],["role","img"]],[[2,"hide",null]],null,null,null,null)),e._15(43,147456,[[4,4]],0,L.a,[y.a,e.p,e.K],{name:[0,"name"]},null),(l()(),e._40(-1,2,["\n                    "])),(l()(),e._16(45,0,null,2,2,"h2",[["text-wrap",""]],null,null,null,null,null)),(l()(),e._40(46,null,["",""])),e._32(131072,T.a,[W.a,e.i]),(l()(),e._40(-1,2,["\n                    "])),(l()(),e._16(49,0,null,4,5,"div",[["item-end",""]],null,null,null,null,null)),(l()(),e._40(-1,null,["\n                        "])),(l()(),e._16(51,0,null,null,2,"p",[["text-end",""]],null,null,null,null,null)),(l()(),e._40(52,null,["",""])),e._34(53,1),(l()(),e._40(-1,null,["\n                    "])),(l()(),e._40(-1,2,["\n                    "])),(l()(),e._16(56,0,null,4,6,"button",[["icon-only",""],["ion-button",""],["item-end",""],["no-padding",""]],[[8,"disabled",0]],[[null,"click"]],function(l,n,a){var e=!0;if("click"===n){e=!1!==l.component.deleteForCourse()&&e}return e},N.b,N.a)),e._15(57,1097728,[[3,4]],0,E.a,[[8,""],y.a,e.p,e.K],null,null),(l()(),e._40(-1,0,["\n                        "])),(l()(),e._16(59,0,null,0,2,"core-icon",[["name","trash"]],null,null,null,O.b,O.a)),e._15(60,704512,null,0,I.a,[e.p,y.a],{name:[0,"name"],ariaLabel:[1,"ariaLabel"]},null),e._32(131072,T.a,[W.a,e.i]),(l()(),e._40(-1,0,["\n                    "])),(l()(),e._40(-1,2,["\n                "])),(l()(),e._40(-1,null,["\n            "])),(l()(),e._40(-1,null,["\n        "])),(l()(),e._40(-1,0,["\n        "])),(l()(),e._11(16777216,null,0,1,null,View_AddonStorageManagerCourseStoragePage_1)),e._15(68,802816,null,0,F.j,[e.W,e.T,e.v],{ngForOf:[0,"ngForOf"]},null),(l()(),e._40(-1,0,["\n    "])),(l()(),e._40(-1,1,["\n"])),(l()(),e._40(-1,null,["\n"]))],function(l,n){var a=n.component;l(n,7,0);l(n,20,0,a.loaded);l(n,43,0,"cube");l(n,60,0,"trash",e._19(1,"",e._41(n,60,1,e._29(n,61).transform("addon.storagemanager.deletecourse")),""));l(n,68,0,a.sections)},function(l,n){var a=n.component;l(n,5,0,e._29(n,6)._hidden,e._29(n,6)._sbPadding);l(n,11,0,e._41(n,11,0,e._29(n,12).transform("addon.storagemanager.managestorage")));l(n,16,0,e._29(n,17).statusbarPadding,e._29(n,17)._hasRefresher);l(n,29,0,a.course.displayname);l(n,32,0,e._41(n,32,0,e._29(n,33).transform("addon.storagemanager.info")));l(n,42,0,e._29(n,43)._hidden);l(n,46,0,e._41(n,46,0,e._29(n,47).transform("addon.storagemanager.storageused")));l(n,52,0,e._41(n,52,0,l(n,53,0,e._29(n,0),a.totalSize)));l(n,56,0,0==a.totalSize)})}Object.defineProperty(n,"__esModule",{value:!0});var e=a(1),u=(a(0),a(6),a(4)),t=a(27),o=a(33),r=a(107),i=a(14),_=a(51),d=a(39),s=a(5),c=a(42),g=function(){function AddonStorageManagerCourseStoragePage(l,n,a,e,u,t){this.courseProvider=n,this.prefetchDelegate=a,this.courseHelperProvider=e,this.domUtils=u,this.translate=t,this.course=l.get("course")}return AddonStorageManagerCourseStoragePage.prototype.ionViewDidLoad=function(){var l=this;this.courseProvider.getSections(this.course.id,!1,!0).then(function(n){l.courseHelperProvider.addHandlerDataForModules(n,l.course.id),l.sections=n,l.totalSize=0;var a=[];l.sections.forEach(function(n){n.totalSize=0,n.modules.forEach(function(e){e.parentSection=n,e.totalSize=0;var u=l.prefetchDelegate.getModuleDownloadedSize(e,l.course.id).then(function(a){isNaN(a)||(e.totalSize=Number(a),n.totalSize+=a,l.totalSize+=a)});a.push(u)})}),Promise.all(a).then(function(){l.loaded=!0,0==l.totalSize&&l.markCourseAsNotDownloaded()})})},AddonStorageManagerCourseStoragePage.prototype.deleteForCourse=function(){var l=[];this.sections.forEach(function(n){n.modules.forEach(function(n){n.totalSize>0&&l.push(n)})}),this.deleteModules(l)},AddonStorageManagerCourseStoragePage.prototype.deleteForSection=function(l){var n=[];l.modules.forEach(function(l){l.totalSize>0&&n.push(l)}),this.deleteModules(n)},AddonStorageManagerCourseStoragePage.prototype.deleteForModule=function(l){l.totalSize>0&&this.deleteModules([l])},AddonStorageManagerCourseStoragePage.prototype.deleteModules=function(l){var n=this,a=this.domUtils.showModalLoading(),e=[];return l.forEach(function(l){var a=n.prefetchDelegate.removeModuleFiles(l,n.course.id).then(function(){l.parentSection.totalSize-=l.totalSize,n.totalSize-=l.totalSize,l.totalSize=0});e.push(a)}),Promise.all(e).then(function(){a.dismiss()}).catch(function(l){a.dismiss(),n.domUtils.showErrorModalDefault(l,n.translate.instant("core.errordeletefile"))}).finally(function(){0==n.totalSize&&n.markCourseAsNotDownloaded()})},AddonStorageManagerCourseStoragePage.prototype.markCourseAsNotDownloaded=function(){this.courseProvider.setCourseStatus(this.course.id,c.a.NOT_DOWNLOADED)},AddonStorageManagerCourseStoragePage}(),p=function(){return function AddonStorageManagerCourseStoragePageModule(){}}(),m=a(1522),f=a(1523),S=a(1524),h=a(1525),b=a(1526),M=a(1527),P=a(1528),v=a(1529),C=a(1530),w=a(1531),A=a(1532),z=a(1533),x=a(1534),K=a(32),k=a(22),D=a(20),y=a(9),V=a(28),$=a(34),F=a(8),L=a(49),N=a(47),E=a(44),O=a(81),I=a(76),T=a(26),W=a(19),U=a(90),H=a(317),j=a(485),B=a(1570),J=a(7),R=a(12),q=a(371),G=a(40),Q=a(723),X=a(212),Y=a(36),Z=a(21),ll=a(473),nl=a(17),al=a(10),el=a(724),ul=a(314),tl=a(247),ol=a(182),rl=a(30),il=a(35),_l=a(108),dl=a(55),sl=a(52),cl=a(3),gl=a(70),pl=e._14({encapsulation:2,styles:[],data:{}}),ml=e._12("page-addon-storagemanager-course-storage",g,function View_AddonStorageManagerCourseStoragePage_Host_0(l){return e._42(0,[(l()(),e._16(0,0,null,null,1,"page-addon-storagemanager-course-storage",[],null,null,null,View_AddonStorageManagerCourseStoragePage_0,pl)),e._15(1,49152,null,0,g,[gl.a,i.a,_.a,d.a,s.a,W.a],null,null)],null,null)},{},{},[]),fl=a(24),Sl=a(367),hl=a(368),bl=a(370),Ml=a(369),Pl=a(472),vl=a(722),Cl=a(270);a.d(n,"AddonStorageManagerCourseStoragePageModuleNgFactory",function(){return wl});var wl=e._13(p,[],function(l){return e._25([e._26(512,e.n,e._6,[[8,[m.a,f.a,S.a,h.a,b.a,M.a,P.a,v.a,C.a,w.a,A.a,z.a,x.a,ml]],[3,e.n],e.B]),e._26(4608,F.m,F.l,[e.x,[2,F.w]]),e._26(4608,fl.x,fl.x,[]),e._26(4608,fl.d,fl.d,[]),e._26(4608,Sl.b,Sl.a,[]),e._26(4608,hl.a,hl.b,[]),e._26(4608,bl.b,bl.a,[]),e._26(4608,Ml.b,Ml.a,[]),e._26(4608,W.a,W.a,[Pl.a,Sl.b,hl.a,bl.b,Ml.b,W.b,W.c]),e._26(512,F.b,F.b,[]),e._26(512,fl.v,fl.v,[]),e._26(512,fl.i,fl.i,[]),e._26(512,fl.s,fl.s,[]),e._26(512,vl.a,vl.a,[]),e._26(512,u.a,u.a,[]),e._26(512,o.a,o.a,[]),e._26(512,r.a,r.a,[]),e._26(512,t.a,t.a,[]),e._26(512,vl.b,vl.b,[]),e._26(512,p,p,[]),e._26(256,W.c,void 0,[]),e._26(256,W.b,void 0,[]),e._26(256,Cl.a,g,[])])})}});