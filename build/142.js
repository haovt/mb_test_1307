webpackJsonp([142],{2113:function(n,l,e){"use strict";function View_AddonCalendarDayPage_1(n){return t._42(0,[(n()(),t._16(0,0,null,null,1,"ion-icon",[["name","funnel"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._15(1,147456,null,0,L.a,[U.a,t.p,t.K],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"funnel")},function(n,l){n(l,0,0,t._29(l,1)._hidden)})}function View_AddonCalendarDayPage_2(n){return t._42(0,[(n()(),t._16(0,0,null,null,1,"ion-icon",[["name","ios-funnel-outline"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._15(1,147456,null,0,L.a,[U.a,t.p,t.K],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"ios-funnel-outline")},function(n,l){n(l,0,0,t._29(l,1)._hidden)})}function View_AddonCalendarDayPage_3(n){return t._42(0,[(n()(),t._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.goToCurrentDay()&&t}return t},W.b,W.a)),t._15(1,770048,null,0,$.a,[H.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"]},{action:"action"}),t._32(131072,Y.a,[R.a,t.i])],function(n,l){n(l,1,0,t._41(l,1,0,t._29(l,2).transform("addon.calendar.today")),"fa-calendar-times-o",900)},null)}function View_AddonCalendarDayPage_4(n){return t._42(0,[(n()(),t._16(0,0,null,null,10,"ion-col",[["class","col"],["text-start",""]],null,null,null,null,null)),t._15(1,16384,null,0,j.a,[],null,null),(n()(),t._40(-1,null,["\n                "])),(n()(),t._16(3,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.loadPrevious()&&t}return t},B.b,B.a)),t._15(4,1097728,null,0,G.a,[[8,""],U.a,t.p,t.K],{clear:[0,"clear"]},null),t._32(131072,Y.a,[R.a,t.i]),(n()(),t._40(-1,0,["\n                    "])),(n()(),t._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-back"],["name","arrow-back"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._15(8,147456,null,0,L.a,[U.a,t.p,t.K],{name:[0,"name"],md:[1,"md"]},null),(n()(),t._40(-1,0,["\n                "])),(n()(),t._40(-1,null,["\n            "]))],function(n,l){n(l,4,0,"");n(l,8,0,"arrow-back","ios-arrow-back")},function(n,l){n(l,3,0,t._41(l,3,0,t._29(l,5).transform("addon.calendar.dayprev")));n(l,7,0,t._29(l,8)._hidden)})}function View_AddonCalendarDayPage_5(n){return t._42(0,[(n()(),t._16(0,0,null,null,10,"ion-col",[["class","col"],["text-end",""]],null,null,null,null,null)),t._15(1,16384,null,0,j.a,[],null,null),(n()(),t._40(-1,null,["\n                "])),(n()(),t._16(3,0,null,null,6,"a",[["clear",""],["icon-only",""],["ion-button",""]],[[8,"title",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.loadNext()&&t}return t},B.b,B.a)),t._15(4,1097728,null,0,G.a,[[8,""],U.a,t.p,t.K],{clear:[0,"clear"]},null),t._32(131072,Y.a,[R.a,t.i]),(n()(),t._40(-1,0,["\n                    "])),(n()(),t._16(7,0,null,0,1,"ion-icon",[["md","ios-arrow-forward"],["name","arrow-forward"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._15(8,147456,null,0,L.a,[U.a,t.p,t.K],{name:[0,"name"],md:[1,"md"]},null),(n()(),t._40(-1,0,["\n                "])),(n()(),t._40(-1,null,["\n            "]))],function(n,l){n(l,4,0,"");n(l,8,0,"arrow-forward","ios-arrow-forward")},function(n,l){n(l,3,0,t._41(l,3,0,t._29(l,5).transform("addon.calendar.daynext")));n(l,7,0,t._29(l,8)._hidden)})}function View_AddonCalendarDayPage_6(n){return t._42(0,[(n()(),t._16(0,0,null,null,8,"ion-card",[["class","core-warning-card"],["icon-start",""]],null,null,null,null,null)),t._15(1,16384,null,0,z.a,[U.a,t.p,t.K],null,null),(n()(),t._40(-1,null,["\n            "])),(n()(),t._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._15(4,147456,null,0,L.a,[U.a,t.p,t.K],{name:[0,"name"]},null),(n()(),t._40(5,null,[" ","\n        "])),t._32(131072,Y.a,[R.a,t.i]),t._33(7,{$a:0}),t._32(131072,Y.a,[R.a,t.i])],function(n,l){n(l,4,0,"warning")},function(n,l){n(l,3,0,t._29(l,4)._hidden);n(l,5,0,t._41(l,5,0,t._29(l,8).transform("core.hasdatatosync",n(l,7,0,t._41(l,5,0,t._29(l,6).transform("core.day"))))))})}function View_AddonCalendarDayPage_7(n){return t._42(0,[(n()(),t._16(0,0,null,null,3,"core-empty-box",[["icon","calendar"]],null,null,null,J.b,J.a)),t._15(1,49152,null,0,q.a,[],{message:[0,"message"],icon:[1,"icon"]},null),t._32(131072,Y.a,[R.a,t.i]),(n()(),t._40(-1,0,["\n        "]))],function(n,l){n(l,1,0,t._41(l,1,0,t._29(l,2).transform("addon.calendar.noevents")),"calendar")},null)}function View_AddonCalendarDayPage_10(n){return t._42(0,[(n()(),t._16(0,0,null,null,0,"img",[["class","core-module-icon"],["item-start",""]],[[8,"src",4]],null,null,null,null))],null,function(n,l){n(l,0,0,t._19(1,"",l.parent.context.$implicit.moduleIcon,""))})}function View_AddonCalendarDayPage_11(n){return t._42(0,[(n()(),t._16(0,0,null,null,1,"core-icon",[["item-start",""]],null,null,null,Q.b,Q.a)),t._15(1,704512,null,0,X.a,[t.p,U.a],{name:[0,"name"]},null)],function(n,l){n(l,1,0,l.parent.context.$implicit.eventIcon)},null)}function View_AddonCalendarDayPage_12(n){return t._42(0,[(n()(),t._16(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),t._15(1,16384,null,0,Z.a,[U.a,t.p,t.K],null,null),(n()(),t._40(-1,null,["\n                        "])),(n()(),t._16(3,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._15(4,147456,null,0,L.a,[U.a,t.p,t.K],{name:[0,"name"]},null),(n()(),t._40(-1,null,["\n                        "])),(n()(),t._16(6,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),t._40(7,null,["",""])),t._32(131072,Y.a,[R.a,t.i]),(n()(),t._40(-1,null,["\n                    "]))],function(n,l){n(l,4,0,"time")},function(n,l){n(l,3,0,t._29(l,4)._hidden);n(l,7,0,t._41(l,7,0,t._29(l,8).transform("core.notsent")))})}function View_AddonCalendarDayPage_13(n){return t._42(0,[(n()(),t._16(0,0,null,null,9,"ion-note",[["item-end",""]],null,null,null,null,null)),t._15(1,16384,null,0,Z.a,[U.a,t.p,t.K],null,null),(n()(),t._40(-1,null,["\n                        "])),(n()(),t._16(3,0,null,null,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._15(4,147456,null,0,L.a,[U.a,t.p,t.K],{name:[0,"name"]},null),(n()(),t._40(-1,null,["\n                        "])),(n()(),t._16(6,0,null,null,2,"span",[["text-wrap",""]],null,null,null,null,null)),(n()(),t._40(7,null,["",""])),t._32(131072,Y.a,[R.a,t.i]),(n()(),t._40(-1,null,["\n                    "]))],function(n,l){n(l,4,0,"trash")},function(n,l){n(l,3,0,t._29(l,4)._hidden);n(l,7,0,t._41(l,7,0,t._29(l,8).transform("core.deletedoffline")))})}function View_AddonCalendarDayPage_9(n){return t._42(0,[(n()(),t._16(0,0,null,null,29,null,null,null,null,null,null,null)),(n()(),t._40(-1,null,["\n                "])),(n()(),t._16(2,0,null,null,26,"a",[["class","addon-calendar-event item item-block"],["ion-item",""],["text-wrap",""]],[[8,"title",0],[2,"item-dimmed",null]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.gotoEvent(n.context.$implicit.id)&&t}return t},nn.b,nn.a)),t._15(3,278528,null,0,ln.i,[t.v,t.w,t.p,t.L],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),t._31(4,1),t._15(5,1097728,null,3,en.a,[tn.a,U.a,t.p,t.K,[2,an.a]],null,null),t._37(335544320,2,{contentLabel:0}),t._37(603979776,3,{_buttons:1}),t._37(603979776,4,{_icons:1}),t._15(9,16384,null,0,rn.a,[],null,null),(n()(),t._40(-1,2,["\n                    "])),(n()(),t._11(16777216,null,0,1,null,View_AddonCalendarDayPage_10)),t._15(12,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,2,["\n                    "])),(n()(),t._11(16777216,null,0,1,null,View_AddonCalendarDayPage_11)),t._15(15,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,2,["\n                    "])),(n()(),t._16(17,0,null,2,2,"h2",[],null,null,null,null,null)),(n()(),t._16(18,16777216,null,null,1,"core-format-text",[],null,null,null,null,null)),t._15(19,540672,null,0,un.a,[t.p,c.a,_.a,on.a,R.a,dn.a,sn.a,cn.a,_n.a,fn.a,o.a,hn.a,[2,vn.a],[2,mn.a],[2,yn.a],gn.a,d.a,pn.a,En.a,Dn.a,t.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"]},null),(n()(),t._40(-1,2,["\n                    "])),(n()(),t._16(21,0,null,2,0,"p",[],[[8,"innerHTML",1]],null,null,null,null)),(n()(),t._40(-1,2,["\n                    "])),(n()(),t._11(16777216,null,4,1,null,View_AddonCalendarDayPage_12)),t._15(24,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,2,["\n                    "])),(n()(),t._11(16777216,null,4,1,null,View_AddonCalendarDayPage_13)),t._15(27,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,2,["\n                "])),(n()(),t._40(-1,null,["\n            "]))],function(n,l){n(l,3,0,"addon-calendar-event",n(l,4,0,"addon-calendar-eventtype-"+l.context.$implicit.eventtype));n(l,12,0,l.context.$implicit.moduleIcon);n(l,15,0,l.context.$implicit.eventIcon&&!l.context.$implicit.moduleIcon);n(l,19,0,l.context.$implicit.name,l.context.$implicit.contextLevel,l.context.$implicit.contextInstanceId);n(l,24,0,l.context.$implicit.offline&&!l.context.$implicit.deleted);n(l,27,0,l.context.$implicit.deleted)},function(n,l){n(l,2,0,l.context.$implicit.name,l.context.$implicit.ispast);n(l,21,0,l.context.$implicit.formattedtime)})}function View_AddonCalendarDayPage_8(n){return t._42(0,[(n()(),t._16(0,0,null,null,5,"ion-list",[["no-margin",""]],null,null,null,null,null)),t._15(1,16384,null,0,Cn.a,[U.a,t.p,t.K,dn.a,bn.l,Pn.a],null,null),(n()(),t._40(-1,null,["\n            "])),(n()(),t._11(16777216,null,null,1,null,View_AddonCalendarDayPage_9)),t._15(4,802816,null,0,ln.j,[t.W,t.T,t.v],{ngForOf:[0,"ngForOf"]},null),(n()(),t._40(-1,null,["\n        "]))],function(n,l){n(l,4,0,l.component.filteredEvents)},null)}function View_AddonCalendarDayPage_14(n){return t._42(0,[(n()(),t._16(0,0,null,null,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,In.b,In.a)),t._15(1,212992,null,0,An.a,[t.p,mn.a],null,null),t._15(2,1228800,null,2,wn.a,[dn.a],null,null),t._37(335544320,5,{_mainButton:0}),t._37(603979776,6,{_fabLists:1}),(n()(),t._40(-1,0,["\n            "])),(n()(),t._16(6,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.openEdit()&&t}return t},On.b,On.a)),t._15(7,49152,[[5,4]],0,Tn.a,[U.a,t.p,t.K],null,null),t._32(131072,Y.a,[R.a,t.i]),(n()(),t._40(-1,0,["\n                "])),(n()(),t._16(10,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t._15(11,147456,null,0,L.a,[U.a,t.p,t.K],{name:[0,"name"]},null),(n()(),t._40(-1,0,["\n            "])),(n()(),t._40(-1,0,["\n        "]))],function(n,l){n(l,1,0);n(l,11,0,"add")},function(n,l){n(l,6,0,t._41(l,6,0,t._29(l,8).transform("addon.calendar.newevent")));n(l,10,0,t._29(l,11)._hidden)})}function View_AddonCalendarDayPage_0(n){return t._42(0,[(n()(),t._16(0,0,null,null,39,"ion-header",[],null,null,null,null,null)),t._15(1,16384,null,0,xn.a,[U.a,t.p,t.K,[2,Vn.a]],null,null),(n()(),t._40(-1,null,["\n    "])),(n()(),t._16(3,0,null,null,35,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,kn.b,kn.a)),t._15(4,49152,null,0,Mn.a,[Nn.a,[2,Vn.a],[2,vn.a],U.a,t.p,t.K],null,null),t._15(5,212992,null,0,Kn.a,[Mn.a,dn.a,R.a,d.a],null,null),(n()(),t._40(-1,3,["\n        "])),(n()(),t._16(7,0,null,3,3,"ion-title",[],null,null,null,Sn.b,Sn.a)),t._15(8,49152,null,0,Fn.a,[U.a,t.p,t.K,[2,Ln.a],[2,Mn.a]],null,null),(n()(),t._40(9,0,["",""])),t._32(131072,Y.a,[R.a,t.i]),(n()(),t._40(-1,3,["\n        "])),(n()(),t._16(12,0,null,2,25,"ion-buttons",[["end",""]],null,null,null,null,null)),t._15(13,16384,null,1,Un.a,[U.a,t.p,t.K,[2,Ln.a],[2,Mn.a]],null,null),t._37(603979776,1,{_buttons:1}),(n()(),t._40(-1,null,["\n            "])),(n()(),t._16(16,0,null,null,9,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.openFilter(e)&&t}return t},B.b,B.a)),t._15(17,1097728,[[1,4]],0,G.a,[[8,""],U.a,t.p,t.K],null,null),t._32(131072,Y.a,[R.a,t.i]),(n()(),t._40(-1,0,["\n                "])),(n()(),t._11(16777216,null,0,1,null,View_AddonCalendarDayPage_1)),t._15(21,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,0,["\n                "])),(n()(),t._11(16777216,null,0,1,null,View_AddonCalendarDayPage_2)),t._15(24,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,0,["\n            "])),(n()(),t._40(-1,null,["\n            "])),(n()(),t._16(27,0,null,null,9,"core-context-menu",[],null,null,null,Wn.b,Wn.a)),t._15(28,245760,null,0,H.a,[R.a,$n.a,t.p,_.a,[2,Hn.a],sn.a],null,null),(n()(),t._40(-1,0,["\n                "])),(n()(),t._11(16777216,null,0,1,null,View_AddonCalendarDayPage_3)),t._15(31,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,0,["\n                "])),(n()(),t._16(33,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,e){var t=!0;if("action"===l){t=!1!==n.component.doRefresh(null,e,!0)&&t}return t},W.b,W.a)),t._15(34,770048,null,0,$.a,[H.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),t._32(131072,Y.a,[R.a,t.i]),(n()(),t._40(-1,0,["\n            "])),(n()(),t._40(-1,null,["\n        "])),(n()(),t._40(-1,3,["\n    "])),(n()(),t._40(-1,null,["\n"])),(n()(),t._40(-1,null,["\n"])),(n()(),t._16(41,0,null,null,50,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Yn.b,Yn.a)),t._15(42,4374528,null,0,mn.a,[U.a,dn.a,Pn.a,t.p,t.K,Nn.a,Rn.a,t.D,[2,Vn.a],[2,vn.a]],null,null),(n()(),t._40(-1,1,["\n    "])),(n()(),t._16(44,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,e){var t=!0;if("ionRefresh"===l){t=!1!==n.component.doRefresh(e)&&t}return t},null,null)),t._15(45,212992,null,0,jn.a,[dn.a,mn.a,t.D,bn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),t._40(-1,null,["\n        "])),(n()(),t._16(47,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Bn.b,Bn.a)),t._15(48,114688,null,0,Gn.a,[jn.a,U.a],{pullingText:[0,"pullingText"]},null),t._32(131072,Y.a,[R.a,t.i]),(n()(),t._40(-1,null,["\n    "])),(n()(),t._40(-1,1,["\n\n    "])),(n()(),t._40(-1,1,["\n    "])),(n()(),t._16(53,0,null,1,19,"ion-grid",[["class","safe-area-page grid"],["padding-top",""]],null,null,null,null,null)),t._15(54,16384,null,0,zn.a,[],null,null),(n()(),t._40(-1,null,["\n        "])),(n()(),t._16(56,0,null,null,15,"ion-row",[["class","row"]],null,null,null,null,null)),t._15(57,16384,null,0,Jn.a,[],null,null),(n()(),t._40(-1,null,["\n            "])),(n()(),t._11(16777216,null,null,1,null,View_AddonCalendarDayPage_4)),t._15(60,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,null,["\n            "])),(n()(),t._16(62,0,null,null,5,"ion-col",[["class","addon-calendar-period col"],["text-center",""]],null,null,null,null,null)),t._15(63,16384,null,0,j.a,[],null,null),(n()(),t._40(-1,null,["\n                "])),(n()(),t._16(65,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),t._40(66,null,["",""])),(n()(),t._40(-1,null,["\n            "])),(n()(),t._40(-1,null,["\n            "])),(n()(),t._11(16777216,null,null,1,null,View_AddonCalendarDayPage_5)),t._15(70,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,null,["\n        "])),(n()(),t._40(-1,null,["\n    "])),(n()(),t._40(-1,1,["\n\n    "])),(n()(),t._16(74,0,null,1,16,"core-loading",[["class","safe-area-page"]],null,null,null,qn.b,qn.a)),t._15(75,638976,null,0,Qn.a,[R.a,t.p,d.a,sn.a],{hideUntil:[0,"hideUntil"]},null),(n()(),t._40(-1,0,["\n        "])),(n()(),t._40(-1,0,["\n        "])),(n()(),t._11(16777216,null,0,1,null,View_AddonCalendarDayPage_6)),t._15(79,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,0,["\n\n        "])),(n()(),t._11(16777216,null,0,1,null,View_AddonCalendarDayPage_7)),t._15(82,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,0,["\n\n        "])),(n()(),t._11(16777216,null,0,1,null,View_AddonCalendarDayPage_8)),t._15(85,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,0,["\n\n        "])),(n()(),t._40(-1,0,["\n        "])),(n()(),t._11(16777216,null,0,1,null,View_AddonCalendarDayPage_14)),t._15(89,16384,null,0,ln.k,[t.W,t.T],{ngIf:[0,"ngIf"]},null),(n()(),t._40(-1,0,["\n    "])),(n()(),t._40(-1,1,["\n"])),(n()(),t._40(-1,null,["\n"]))],function(n,l){var e=l.component;n(l,5,0);n(l,21,0,e.filter.filtered);n(l,24,0,!e.filter.filtered),n(l,28,0);n(l,31,0,!e.isCurrentDay);n(l,34,0,t._41(l,34,0,t._29(l,35).transform("core.settings.synchronizenow")),e.syncIcon,!1,400,!e.loaded||!e.hasOffline||!e.isOnline);n(l,45,0,e.loaded);n(l,48,0,t._19(1,"",t._41(l,48,0,t._29(l,49).transform("core.pulltorefresh")),""));n(l,60,0,e.currentMoment);n(l,70,0,e.currentMoment);n(l,75,0,e.loaded);n(l,79,0,e.hasOffline);n(l,82,0,!e.filteredEvents||!e.filteredEvents.length);n(l,85,0,e.filteredEvents&&e.filteredEvents.length);n(l,89,0,e.canCreate)},function(n,l){var e=l.component;n(l,3,0,t._29(l,4)._hidden,t._29(l,4)._sbPadding);n(l,9,0,t._41(l,9,0,t._29(l,10).transform("addon.calendar.calendarevents")));n(l,16,0,t._41(l,16,0,t._29(l,18).transform("core.filter")));n(l,41,0,t._29(l,42).statusbarPadding,t._29(l,42)._hasRefresher);n(l,44,0,"inactive"!==t._29(l,45).state,t._29(l,45)._top);n(l,47,0,t._29(l,48).r.state);n(l,66,0,e.periodName)})}Object.defineProperty(l,"__esModule",{value:!0});var t=e(1),a=(e(0),e(6),e(4)),i=e(27),r=e(33),u=e(107),o=e(11),d=e(10),s=e(152),c=e(2),_=e(5),f=e(25),h=e(187),v=e(275),m=e(276),y=e(478),g=e(53),p=e(189),E=e(746),D=e(186),C=e(15),b=function(){function AddonCalendarDayPage(n,l,e,t,a,i,r,u,o,d,s,c,_,f,v,m,g){var p=this;this.navCtrl=i,this.domUtils=r,this.timeUtils=u,this.calendarProvider=o,this.calendarOffline=d,this.calendarHelper=s,this.calendarSync=c,this.eventsProvider=_,this.coursesProvider=f,this.coursesHelper=v,this.appProvider=m,this.popoverCtrl=g,this.categories={},this.events=[],this.onlineEvents=[],this.offlineEvents={},this.offlineEditedEventsIds=[],this.deletedEvents=[],this.filteredEvents=[],this.canCreate=!1,this.loaded=!1,this.hasOffline=!1,this.isOnline=!1,this.filter={filtered:!1,courseId:null,categoryId:null,course:!0,group:!0,site:!0,user:!0,category:!0};var E=new Date;h.a.ALL_TYPES.forEach(function(n){p.filter[n]=l.get(n),p.filter[n]=void 0===p.filter[n]||p.filter[n]}),this.filter.courseId=l.get("courseId"),this.filter.categoryId=l.get("categoryId"),this.filter.filtered=!!this.filter.courseId||h.a.ALL_TYPES.some(function(n){return!p.filter[n]}),this.year=l.get("year")||E.getFullYear(),this.month=l.get("month")||E.getMonth()+1,this.day=l.get("day")||E.getDate(),this.currentSiteId=a.getCurrentSiteId(),n.isAvailable()&&(this.obsDefaultTimeChange=_.on(h.a.DEFAULT_NOTIFICATION_TIME_CHANGED,function(){o.scheduleEventsNotifications(p.onlineEvents)},this.currentSiteId)),this.newEventObserver=_.on(h.a.NEW_EVENT_EVENT,function(n){n&&n.event&&(p.loaded=!1,p.refreshData(!0,!1,!0))},this.currentSiteId),this.discardedObserver=_.on(h.a.NEW_EVENT_DISCARDED_EVENT,function(){p.loaded=!1,p.refreshData(!0,!1,!0)},this.currentSiteId),this.editEventObserver=_.on(h.a.EDIT_EVENT_EVENT,function(n){n&&n.event&&(p.loaded=!1,p.refreshData(!0,!1,!0))},this.currentSiteId),this.syncObserver=_.on(y.a.AUTO_SYNCED,function(n){p.loaded=!1,p.refreshData(!1,!1,!0)},this.currentSiteId),this.manualSyncObserver=_.on(y.a.MANUAL_SYNCED,function(n){!n||"day"==n.source&&n.year==p.year&&n.month==p.month&&n.day==p.day||(p.loaded=!1,p.refreshData(!1,!1,!0))},this.currentSiteId),this.deleteEventObserver=_.on(h.a.DELETED_EVENT_EVENT,function(n){n&&!n.sent?(p.hasOffline=p.markAsDeleted(n.eventId,!0)||p.hasOffline,p.deletedEvents.push(n.eventId)):(p.loaded=!1,p.refreshData(!1,!1,!0))},this.currentSiteId),this.undeleteEventObserver=_.on(h.a.UNDELETED_EVENT_EVENT,function(n){if(n&&n.eventId){var l=p.markAsDeleted(n.eventId,!1),e=p.deletedEvents.indexOf(n.eventId);if(-1!=e&&p.deletedEvents.splice(e,1),l)if(p.hasOffline=!1,p.events.length!=p.onlineEvents.length)p.hasOffline=!0;else{var t=p.events.find(function(n){return n.deleted||n.offline});p.hasOffline=!!t}}},this.currentSiteId),this.filterChangedObserver=this.eventsProvider.on(h.a.FILTER_CHANGED_EVENT,function(n){p.filter=n,p.calendarHelper.canEditEvents(p.filter.courseId).then(function(n){p.canCreate=n}),p.filterEvents()}),this.onlineObserver=e.onchange().subscribe(function(){t.run(function(){p.isOnline=p.appProvider.isOnline()})})}return AddonCalendarDayPage.prototype.ngOnInit=function(){this.calculateCurrentMoment(),this.calculateIsCurrentDay(),this.fetchData(!0,!1)},AddonCalendarDayPage.prototype.fetchData=function(n,l){var e=this;this.syncIcon="spinner",this.isOnline=this.appProvider.isOnline();return(n?this.sync():Promise.resolve()).then(function(){var n=[];return n.push(e.coursesHelper.getCoursesForPopover(e.filter.courseId).then(function(n){e.courses=n.courses})),n.push(e.loadCategories()),n.push(e.calendarOffline.getAllEditedEvents().then(function(n){n.forEach(function(n){n.offline=!0,e.calendarHelper.formatEventData(n)}),e.offlineEvents=e.calendarHelper.classifyIntoMonths(n);var l=n.filter(function(n){return n.id>0});e.offlineEditedEventsIds=l.map(function(n){return n.id})})),n.push(e.calendarOffline.getAllDeletedEventsIds().then(function(n){e.deletedEvents=n})),n.push(e.calendarHelper.canEditEvents(e.filter.courseId).then(function(n){e.canCreate=n})),n.push(e.calendarProvider.getCalendarTimeFormat().then(function(n){e.timeFormat=n})),Promise.all(n)}).then(function(){return e.fetchEvents()}).catch(function(n){e.domUtils.showErrorModalDefault(n,"addon.calendar.errorloadevents",!0)}).finally(function(){e.loaded=!0,e.syncIcon="sync"})},AddonCalendarDayPage.prototype.fetchEvents=function(){var n=this;return this.calendarProvider.getDayEvents(this.year,this.month,this.day).catch(function(l){return n.appProvider.isOnline()?Promise.reject(l):Promise.resolve({events:[]})}).then(function(l){var e=[];n.periodName=n.timeUtils.userDate(new Date(n.year,n.month-1,n.day).getTime(),"core.strftimedaydate"),n.onlineEvents=l.events,n.onlineEvents.forEach(n.calendarHelper.formatEventData.bind(n.calendarHelper)),n.calendarProvider.scheduleEventsNotifications(n.onlineEvents),n.events=n.mergeEvents(),n.filterEvents(),n.calculateIsCurrentDay();var t=1e3*n.currentMoment.unix();return n.events.forEach(function(l){l.ispast=n.isPastDay||n.isCurrentDay&&n.isEventPast(l),e.push(n.calendarProvider.formatEventTime(l,n.timeFormat,!0,t).then(function(n){l.formattedtime=n}))}),Promise.all(e)})},AddonCalendarDayPage.prototype.mergeEvents=function(){var n=this;if(this.hasOffline=!1,!Object.keys(this.offlineEvents).length&&!this.deletedEvents.length)return this.onlineEvents;var l=this.offlineEvents[this.calendarHelper.getMonthId(this.year,this.month)],e=l&&l[this.day],t=this.onlineEvents;return this.deletedEvents.length&&t.forEach(function(l){l.deleted=-1!=n.deletedEvents.indexOf(l.id),l.deleted&&(n.hasOffline=!0)}),this.offlineEditedEventsIds.length&&(t=t.filter(function(l){return-1==n.offlineEditedEventsIds.indexOf(l.id)})).length!=this.onlineEvents.length&&(this.hasOffline=!0),e&&e.length&&(this.hasOffline=!0,t=this.sortEvents(t.concat(e))),t},AddonCalendarDayPage.prototype.filterEvents=function(){this.filteredEvents=this.calendarHelper.getFilteredEvents(this.events,this.filter,this.categories)},AddonCalendarDayPage.prototype.sortEvents=function(n){return n.sort(function(n,l){return n.timestart==l.timestart?n.timeduration-l.timeduration:n.timestart-l.timestart})},AddonCalendarDayPage.prototype.doRefresh=function(n,l,e){return this.loaded?this.refreshData(!0,e).finally(function(){n&&n.complete(),l&&l()}):Promise.resolve()},AddonCalendarDayPage.prototype.refreshData=function(n,l,e){var t=this;this.syncIcon="spinner";var a=[];return e||a.push(this.calendarProvider.invalidateDayEvents(this.year,this.month,this.day)),a.push(this.calendarProvider.invalidateAllowedEventTypes()),a.push(this.coursesProvider.invalidateCategories(0,!0)),a.push(this.calendarProvider.invalidateTimeFormat()),Promise.all(a).finally(function(){return t.fetchData(n,l)})},AddonCalendarDayPage.prototype.loadCategories=function(){var n=this;return this.coursesProvider.getCategories(0,!0).then(function(l){n.categories={},l.forEach(function(l){n.categories[l.id]=l})}).catch(function(){})},AddonCalendarDayPage.prototype.sync=function(n){var l=this;return this.calendarSync.syncEvents().then(function(n){n.warnings&&n.warnings.length&&l.domUtils.showErrorModal(n.warnings[0]),n.updated&&(n.source="day",n.day=l.day,n.month=l.month,n.year=l.year,l.eventsProvider.trigger(y.a.MANUAL_SYNCED,n,l.currentSiteId))}).catch(function(e){n&&l.domUtils.showErrorModalDefault(e,"core.errorsync",!0)})},AddonCalendarDayPage.prototype.gotoEvent=function(n){n<0?this.openEdit(n):this.navCtrl.push("AddonCalendarEventPage",{id:n})},AddonCalendarDayPage.prototype.openFilter=function(n){this.popoverCtrl.create(E.a,{courses:this.courses,filter:this.filter}).present({ev:n})},AddonCalendarDayPage.prototype.openEdit=function(n){var l={};n?l.eventId=n:l.timestamp=1e3*C().year(this.year).month(this.month-1).date(this.day).unix(),this.filter.courseId&&(l.courseId=this.filter.courseId),this.navCtrl.push("AddonCalendarEditEventPage",l)},AddonCalendarDayPage.prototype.calculateCurrentMoment=function(){this.currentMoment=C().year(this.year).month(this.month-1).date(this.day)},AddonCalendarDayPage.prototype.calculateIsCurrentDay=function(){var n=new Date;this.currentTime=this.timeUtils.timestamp(),this.isCurrentDay=this.year==n.getFullYear()&&this.month==n.getMonth()+1&&this.day==n.getDate(),this.isPastDay=this.year<n.getFullYear()||this.year==n.getFullYear()&&this.month<n.getMonth()||this.year==n.getFullYear()&&this.month==n.getMonth()+1&&this.day<n.getDate()},AddonCalendarDayPage.prototype.goToCurrentDay=function(){var n=this,l=new Date,e=this.day,t=this.month,a=this.year;this.day=l.getDate(),this.month=l.getMonth()+1,this.year=l.getFullYear(),this.calculateCurrentMoment(),this.loaded=!1,this.fetchEvents().then(function(){n.isCurrentDay=!0}).catch(function(l){n.domUtils.showErrorModalDefault(l,"addon.calendar.errorloadevents",!0),n.year=a,n.month=t,n.day=e,n.calculateCurrentMoment()}).finally(function(){n.loaded=!0})},AddonCalendarDayPage.prototype.loadNext=function(){var n=this;this.increaseDay(),this.loaded=!1,this.fetchEvents().catch(function(l){n.domUtils.showErrorModalDefault(l,"addon.calendar.errorloadevents",!0),n.decreaseDay()}).finally(function(){n.loaded=!0})},AddonCalendarDayPage.prototype.loadPrevious=function(){var n=this;this.decreaseDay(),this.loaded=!1,this.fetchEvents().catch(function(l){n.domUtils.showErrorModalDefault(l,"addon.calendar.errorloadevents",!0),n.increaseDay()}).finally(function(){n.loaded=!0})},AddonCalendarDayPage.prototype.decreaseDay=function(){this.currentMoment.subtract(1,"day"),this.year=this.currentMoment.year(),this.month=this.currentMoment.month()+1,this.day=this.currentMoment.date()},AddonCalendarDayPage.prototype.increaseDay=function(){this.currentMoment.add(1,"day"),this.year=this.currentMoment.year(),this.month=this.currentMoment.month()+1,this.day=this.currentMoment.date()},AddonCalendarDayPage.prototype.markAsDeleted=function(n,l){var e=this.onlineEvents.find(function(l){return l.id==n});return!!e&&(e.deleted=l,!0)},AddonCalendarDayPage.prototype.isEventPast=function(n){return n.timestart+n.timeduration<this.currentTime},AddonCalendarDayPage.prototype.ngOnDestroy=function(){this.newEventObserver&&this.newEventObserver.off(),this.discardedObserver&&this.discardedObserver.off(),this.editEventObserver&&this.editEventObserver.off(),this.deleteEventObserver&&this.deleteEventObserver.off(),this.undeleteEventObserver&&this.undeleteEventObserver.off(),this.syncObserver&&this.syncObserver.off(),this.manualSyncObserver&&this.manualSyncObserver.off(),this.onlineObserver&&this.onlineObserver.unsubscribe(),this.filterChangedObserver&&this.filterChangedObserver.off(),this.obsDefaultTimeChange&&this.obsDefaultTimeChange.off()},AddonCalendarDayPage}(),P=function(){return function AddonCalendarDayPageModule(){}}(),I=e(1522),A=e(1523),w=e(1524),O=e(1525),T=e(1526),x=e(1527),V=e(1528),k=e(1529),M=e(1530),N=e(1531),K=e(1532),S=e(1533),F=e(1534),L=e(49),U=e(9),W=e(93),$=e(84),H=e(79),Y=e(26),R=e(19),j=e(120),B=e(47),G=e(44),z=e(90),J=e(125),q=e(115),Q=e(81),X=e(76),Z=e(248),nn=e(32),ln=e(8),en=e(22),tn=e(20),an=e(28),rn=e(34),un=e(48),on=e(12),dn=e(17),sn=e(3),cn=e(23),_n=e(7),fn=e(18),hn=e(16),vn=e(21),mn=e(30),yn=e(29),gn=e(43),pn=e(41),En=e(31),Dn=e(37),Cn=e(87),bn=e(45),Pn=e(35),In=e(281),An=e(255),wn=e(218),On=e(282),Tn=e(191),xn=e(371),Vn=e(40),kn=e(723),Mn=e(212),Nn=e(36),Kn=e(473),Sn=e(724),Fn=e(314),Ln=e(247),Un=e(372),Wn=e(92),$n=e(71),Hn=e(77),Yn=e(182),Rn=e(108),jn=e(160),Bn=e(213),Gn=e(174),zn=e(165),Jn=e(121),qn=e(55),Qn=e(52),Xn=e(70),Zn=t._14({encapsulation:2,styles:[],data:{}}),nl=t._12("page-addon-calendar-day",b,function View_AddonCalendarDayPage_Host_0(n){return t._42(0,[(n()(),t._16(0,0,null,null,1,"page-addon-calendar-day",[],null,null,null,View_AddonCalendarDayPage_0,Zn)),t._15(1,245760,null,0,b,[s.a,Xn.a,D.a,t.D,c.a,vn.a,_.a,f.a,h.a,v.a,m.a,y.a,d.a,g.a,p.a,o.a,$n.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),ll=e(24),el=e(367),tl=e(368),al=e(370),il=e(369),rl=e(472),ul=e(722),ol=e(270);e.d(l,"AddonCalendarDayPageModuleNgFactory",function(){return dl});var dl=t._13(P,[],function(n){return t._25([t._26(512,t.n,t._6,[[8,[I.a,A.a,w.a,O.a,T.a,x.a,V.a,k.a,M.a,N.a,K.a,S.a,F.a,nl]],[3,t.n],t.B]),t._26(4608,ln.m,ln.l,[t.x,[2,ln.w]]),t._26(4608,ll.x,ll.x,[]),t._26(4608,ll.d,ll.d,[]),t._26(4608,el.b,el.a,[]),t._26(4608,tl.a,tl.b,[]),t._26(4608,al.b,al.a,[]),t._26(4608,il.b,il.a,[]),t._26(4608,R.a,R.a,[rl.a,el.b,tl.a,al.b,il.b,R.b,R.c]),t._26(512,ln.b,ln.b,[]),t._26(512,ll.v,ll.v,[]),t._26(512,ll.i,ll.i,[]),t._26(512,ll.s,ll.s,[]),t._26(512,ul.a,ul.a,[]),t._26(512,a.a,a.a,[]),t._26(512,r.a,r.a,[]),t._26(512,u.a,u.a,[]),t._26(512,i.a,i.a,[]),t._26(512,ul.b,ul.b,[]),t._26(512,P,P,[]),t._26(256,R.c,void 0,[]),t._26(256,R.b,void 0,[]),t._26(256,ol.a,b,[])])})}});